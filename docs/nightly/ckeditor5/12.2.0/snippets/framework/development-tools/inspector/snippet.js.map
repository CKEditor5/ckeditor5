{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./packages/ckeditor5-utils/src/ckeditorerror.js","webpack:///./packages/ckeditor5-core/src/plugin.js","webpack:///./packages/ckeditor5-engine/src/model/range.js","webpack:///./node_modules/lodash-es/last.js","webpack:///./packages/ckeditor5-engine/src/model/position.js","webpack:///./packages/ckeditor5-engine/src/view/position.js","webpack:///./packages/ckeditor5-utils/src/mix.js","webpack:///./packages/ckeditor5-ui/src/view.js","webpack:///./packages/ckeditor5-core/src/command.js","webpack:///./packages/ckeditor5-utils/src/emittermixin.js","webpack:///./packages/ckeditor5-utils/src/keyboard.js","webpack:///./packages/ckeditor5-engine/src/view/range.js","webpack:///./packages/ckeditor5-table/src/commands/utils.js","webpack:///./packages/ckeditor5-utils/src/log.js","webpack:///./packages/ckeditor5-engine/src/view/filler.js","webpack:///./packages/ckeditor5-utils/src/observablemixin.js","webpack:///./packages/ckeditor5-ui/src/button/buttonview.js","webpack:///./packages/ckeditor5-engine/src/model/element.js","webpack:///./packages/ckeditor5-engine/src/model/text.js","webpack:///./packages/ckeditor5-engine/src/view/text.js","webpack:///./packages/ckeditor5-engine/src/model/operation/moveoperation.js","webpack:///./packages/ckeditor5-widget/src/highlightstack.js","webpack:///./packages/ckeditor5-widget/src/utils.js","webpack:///./packages/ckeditor5-engine/src/model/operation/splitoperation.js","webpack:///./node_modules/lodash-es/_root.js","webpack:///./packages/ckeditor5-utils/src/comparearrays.js","webpack:///./packages/ckeditor5-utils/src/dom/global.js","webpack:///./packages/ckeditor5-utils/src/dom/istext.js","webpack:///./packages/ckeditor5-engine/src/model/operation/mergeoperation.js","webpack:///./packages/ckeditor5-engine/src/model/operation/operation.js","webpack:///./packages/ckeditor5-utils/src/collection.js","webpack:///./packages/ckeditor5-utils/src/env.js","webpack:///./packages/ckeditor5-engine/src/view/element.js","webpack:///./packages/ckeditor5-image/src/image/utils.js","webpack:///./node_modules/lodash-es/isObject.js","webpack:///./node_modules/lodash-es/isObjectLike.js","webpack:///./packages/ckeditor5-utils/src/focustracker.js","webpack:///./packages/ckeditor5-engine/src/model/liveposition.js","webpack:///./packages/ckeditor5-utils/src/isiterable.js","webpack:///./node_modules/lodash-es/isEqual.js","webpack:///./packages/ckeditor5-engine/src/model/operation/attributeoperation.js","webpack:///./packages/ckeditor5-utils/src/uid.js","webpack:///./packages/ckeditor5-engine/src/model/textproxy.js","webpack:///./packages/ckeditor5-engine/src/model/operation/utils.js","webpack:///./packages/ckeditor5-utils/src/keystrokehandler.js","webpack:///./packages/ckeditor5-utils/src/first.js","webpack:///./packages/ckeditor5-engine/src/model/operation/insertoperation.js","webpack:///./packages/ckeditor5-engine/src/view/selection.js","webpack:///./node_modules/lodash-es/_Symbol.js","webpack:///./packages/ckeditor5-utils/src/dom/rect.js","webpack:///./node_modules/lodash-es/_coreJsData.js","webpack:///./node_modules/lodash-es/_isMasked.js","webpack:///./node_modules/lodash-es/_baseIsNative.js","webpack:///./node_modules/lodash-es/_getValue.js","webpack:///./node_modules/lodash-es/_getNative.js","webpack:///./packages/ckeditor5-engine/src/view/observer/observer.js","webpack:///./packages/ckeditor5-engine/src/model/treewalker.js","webpack:///./packages/ckeditor5-engine/src/view/observer/domeventobserver.js","webpack:///./node_modules/lodash-es/_getRawTag.js","webpack:///./node_modules/lodash-es/_objectToString.js","webpack:///./node_modules/lodash-es/_baseGetTag.js","webpack:///./packages/ckeditor5-upload/src/filereader.js","webpack:///./packages/ckeditor5-upload/src/filerepository.js","webpack:///./packages/ckeditor5-engine/src/view/textproxy.js","webpack:///./packages/ckeditor5-ui/src/focuscycler.js","webpack:///./packages/ckeditor5-engine/src/view/matcher.js","webpack:///./packages/ckeditor5-ui/src/viewcollection.js","webpack:///./packages/ckeditor5-utils/src/tomap.js","webpack:///./node_modules/lodash-es/isArray.js","webpack:///./packages/ckeditor5-ui/src/template.js","webpack:///./node_modules/lodash-es/_copyObject.js","webpack:///./packages/ckeditor5-engine/src/view/node.js","webpack:///./packages/ckeditor5-engine/src/model/node.js","webpack:///./packages/ckeditor5-engine/src/model/nodelist.js","webpack:///./packages/ckeditor5-engine/src/view/treewalker.js","webpack:///./packages/ckeditor5-engine/src/model/operation/markeroperation.js","webpack:///./packages/ckeditor5-engine/src/model/operation/renameoperation.js","webpack:///./packages/ckeditor5-ui/src/dropdown/dropdownpanelview.js","webpack:///./packages/ckeditor5-ui/src/dropdown/dropdownview.js","webpack:///./packages/ckeditor5-ui/src/dropdown/button/dropdownbuttonview.js","webpack:///./packages/ckeditor5-ui/src/list/listseparatorview.js","webpack:///./packages/ckeditor5-ui/src/dropdown/utils.js","webpack:///./node_modules/lodash-es/_DataView.js","webpack:///./node_modules/lodash-es/_Promise.js","webpack:///./node_modules/lodash-es/_Set.js","webpack:///./node_modules/lodash-es/_WeakMap.js","webpack:///./node_modules/lodash-es/_getTag.js","webpack:///./node_modules/lodash-es/_nodeUtil.js","webpack:///./packages/ckeditor5-utils/src/diff.js","webpack:///./packages/ckeditor5-utils/src/dom/isnode.js","webpack:///./node_modules/lodash-es/_toSource.js","webpack:///./packages/ckeditor5-engine/src/model/documentfragment.js","webpack:///./packages/ckeditor5-engine/src/view/documentfragment.js","webpack:///./packages/ckeditor5-engine/src/model/liverange.js","webpack:///./packages/ckeditor5-utils/src/dom/emittermixin.js","webpack:///./node_modules/lodash-es/eq.js","webpack:///./node_modules/lodash-es/_listCacheClear.js","webpack:///./node_modules/lodash-es/_assocIndexOf.js","webpack:///./node_modules/lodash-es/_listCacheDelete.js","webpack:///./node_modules/lodash-es/_listCacheGet.js","webpack:///./node_modules/lodash-es/_listCacheHas.js","webpack:///./node_modules/lodash-es/_listCacheSet.js","webpack:///./node_modules/lodash-es/_ListCache.js","webpack:///./node_modules/lodash-es/_Map.js","webpack:///./packages/ckeditor5-engine/src/view/containerelement.js","webpack:///./packages/ckeditor5-ui/src/icon/iconview.js","webpack:///./packages/ckeditor5-utils/src/dom/indexof.js","webpack:///./packages/ckeditor5-utils/src/dom/getancestors.js","webpack:///./packages/ckeditor5-engine/src/view/domconverter.js","webpack:///./packages/ckeditor5-utils/src/dom/getcommonancestor.js","webpack:///./node_modules/lodash-es/isBuffer.js","webpack:///./packages/ckeditor5-utils/src/dom/isrange.js","webpack:///./packages/ckeditor5-ui/src/panel/balloon/contextualballoon.js","webpack:///./node_modules/lodash-es/_getPrototype.js","webpack:///./node_modules/lodash-es/_isPrototype.js","webpack:///./node_modules/lodash-es/isArrayLike.js","webpack:///./node_modules/lodash-es/_baseUnary.js","webpack:///./packages/ckeditor5-engine/src/view/editableelement.js","webpack:///./packages/ckeditor5-engine/src/view/observer/domeventdata.js","webpack:///./node_modules/lodash-es/_arrayEach.js","webpack:///./node_modules/lodash-es/_baseAssign.js","webpack:///./node_modules/lodash-es/_baseAssignIn.js","webpack:///./node_modules/lodash-es/_copyArray.js","webpack:///./node_modules/lodash-es/_copySymbols.js","webpack:///./node_modules/lodash-es/_getSymbolsIn.js","webpack:///./node_modules/lodash-es/_copySymbolsIn.js","webpack:///./node_modules/lodash-es/_getAllKeysIn.js","webpack:///./node_modules/lodash-es/_initCloneArray.js","webpack:///./node_modules/lodash-es/_cloneArrayBuffer.js","webpack:///./node_modules/lodash-es/_cloneDataView.js","webpack:///./node_modules/lodash-es/_cloneRegExp.js","webpack:///./node_modules/lodash-es/_cloneSymbol.js","webpack:///./node_modules/lodash-es/_cloneTypedArray.js","webpack:///./node_modules/lodash-es/_initCloneByTag.js","webpack:///./node_modules/lodash-es/_baseCreate.js","webpack:///./node_modules/lodash-es/_initCloneObject.js","webpack:///./node_modules/lodash-es/_baseIsMap.js","webpack:///./node_modules/lodash-es/isMap.js","webpack:///./node_modules/lodash-es/_baseIsSet.js","webpack:///./node_modules/lodash-es/isSet.js","webpack:///./node_modules/lodash-es/_baseClone.js","webpack:///./node_modules/lodash-es/_nativeKeysIn.js","webpack:///./node_modules/lodash-es/_baseKeysIn.js","webpack:///./node_modules/lodash-es/keysIn.js","webpack:///./node_modules/lodash-es/_nativeKeys.js","webpack:///./node_modules/lodash-es/_baseKeys.js","webpack:///./node_modules/lodash-es/keys.js","webpack:///./node_modules/lodash-es/_arrayFilter.js","webpack:///./node_modules/lodash-es/_getSymbols.js","webpack:///./node_modules/lodash-es/_defineProperty.js","webpack:///./node_modules/lodash-es/_Uint8Array.js","webpack:///./packages/ckeditor5-utils/src/dom/iswindow.js","webpack:///./node_modules/lodash-es/_stackClear.js","webpack:///./node_modules/lodash-es/_stackDelete.js","webpack:///./node_modules/lodash-es/_stackGet.js","webpack:///./node_modules/lodash-es/_stackHas.js","webpack:///./node_modules/lodash-es/_stackSet.js","webpack:///./node_modules/lodash-es/_Stack.js","webpack:///./packages/ckeditor5-utils/src/spy.js","webpack:///./packages/ckeditor5-utils/src/eventinfo.js","webpack:///./node_modules/lodash-es/isPlainObject.js","webpack:///./node_modules/lodash-es/isFunction.js","webpack:///./packages/ckeditor5-ui/src/bindings/clickoutsidehandler.js","webpack:///./packages/ckeditor5-paragraph/src/paragraphcommand.js","webpack:///./packages/ckeditor5-paragraph/src/paragraph.js","webpack:///./packages/ckeditor5-ui/src/panel/balloon/balloonpanelview.js","webpack:///./packages/ckeditor5-ui/src/toolbar/toolbarview.js","webpack:///./packages/ckeditor5-ui/src/bindings/preventdefault.js","webpack:///./packages/ckeditor5-utils/src/priorities.js","webpack:///./packages/ckeditor5-engine/src/view/observer/mouseobserver.js","webpack:///./packages/ckeditor5-widget/src/widget.js","webpack:///./packages/ckeditor5-utils/src/dom/tounit.js","webpack:///./packages/ckeditor5-ui/src/labeledinput/labeledinputview.js","webpack:///./packages/ckeditor5-ui/src/inputtext/inputtextview.js","webpack:///./packages/ckeditor5-ui/src/bindings/submithandler.js","webpack:///./packages/ckeditor5-core/theme/icons/check.svg","webpack:///./packages/ckeditor5-core/theme/icons/cancel.svg","webpack:///./packages/ckeditor5-basic-styles/src/attributecommand.js","webpack:///./packages/ckeditor5-widget/src/widgettoolbarrepository.js","webpack:///./packages/ckeditor5-utils/src/version.js","webpack:///./node_modules/lodash-es/_getAllKeys.js","webpack:///./packages/ckeditor5-utils/src/count.js","webpack:///./packages/ckeditor5-engine/src/model/operation/rootattributeoperation.js","webpack:///./packages/ckeditor5-engine/src/view/upcastwriter.js","webpack:///./node_modules/lodash-es/identity.js","webpack:///./node_modules/lodash-es/_apply.js","webpack:///./node_modules/lodash-es/_overRest.js","webpack:///./node_modules/lodash-es/constant.js","webpack:///./node_modules/lodash-es/_baseSetToString.js","webpack:///./node_modules/lodash-es/_shortOut.js","webpack:///./node_modules/lodash-es/_setToString.js","webpack:///./node_modules/lodash-es/_baseRest.js","webpack:///./node_modules/lodash-es/_isIterateeCall.js","webpack:///./node_modules/lodash-es/_createAssigner.js","webpack:///./node_modules/lodash-es/assignIn.js","webpack:///./packages/ckeditor5-clipboard/src/datatransfer.js","webpack:///./packages/ckeditor5-clipboard/src/clipboardobserver.js","webpack:///./packages/ckeditor5-clipboard/src/utils/viewtoplaintext.js","webpack:///./packages/ckeditor5-clipboard/src/clipboard.js","webpack:///./packages/ckeditor5-clipboard/src/utils/normalizeclipboarddata.js","webpack:///./packages/ckeditor5-clipboard/src/utils/plaintexttohtml.js","webpack:///./packages/ckeditor5-ui/src/button/switchbuttonview.js","webpack:///./packages/ckeditor5-ui/src/notification/notification.js","webpack:///./packages/ckeditor5-table/src/utils.js","webpack:///./packages/ckeditor5-engine/src/dataprocessor/basichtmlwriter.js","webpack:///./packages/ckeditor5-engine/src/dataprocessor/htmldataprocessor.js","webpack:///./node_modules/lodash-es/_freeGlobal.js","webpack:///./node_modules/lodash-es/_overArg.js","webpack:///./node_modules/lodash-es/_baseAssignValue.js","webpack:///./node_modules/lodash-es/_assignValue.js","webpack:///./node_modules/lodash-es/stubArray.js","webpack:///./node_modules/lodash-es/_arrayPush.js","webpack:///./node_modules/lodash-es/isLength.js","webpack:///./node_modules/lodash-es/_isIndex.js","webpack:///./node_modules/lodash-es/_baseGetAllKeys.js","webpack:///./packages/ckeditor5-utils/src/objecttomap.js","webpack:///./packages/ckeditor5-engine/src/view/documentselection.js","webpack:///./packages/ckeditor5-utils/src/fastdiff.js","webpack:///./packages/ckeditor5-utils/src/dom/getborderwidths.js","webpack:///./node_modules/lodash-es/_nativeCreate.js","webpack:///./node_modules/lodash-es/_hashClear.js","webpack:///./node_modules/lodash-es/_hashDelete.js","webpack:///./node_modules/lodash-es/_hashGet.js","webpack:///./node_modules/lodash-es/_hashHas.js","webpack:///./node_modules/lodash-es/_hashSet.js","webpack:///./node_modules/lodash-es/_Hash.js","webpack:///./node_modules/lodash-es/_mapCacheClear.js","webpack:///./node_modules/lodash-es/_isKeyable.js","webpack:///./node_modules/lodash-es/_getMapData.js","webpack:///./node_modules/lodash-es/_mapCacheDelete.js","webpack:///./node_modules/lodash-es/_mapCacheGet.js","webpack:///./node_modules/lodash-es/_mapCacheHas.js","webpack:///./node_modules/lodash-es/_mapCacheSet.js","webpack:///./node_modules/lodash-es/_MapCache.js","webpack:///./node_modules/lodash-es/_setCacheAdd.js","webpack:///./node_modules/lodash-es/_setCacheHas.js","webpack:///./node_modules/lodash-es/_SetCache.js","webpack:///./node_modules/lodash-es/_arraySome.js","webpack:///./node_modules/lodash-es/_cacheHas.js","webpack:///./node_modules/lodash-es/_equalArrays.js","webpack:///./node_modules/lodash-es/_mapToArray.js","webpack:///./node_modules/lodash-es/_setToArray.js","webpack:///./node_modules/lodash-es/_equalByTag.js","webpack:///./node_modules/lodash-es/_equalObjects.js","webpack:///./node_modules/lodash-es/_baseIsEqualDeep.js","webpack:///./node_modules/lodash-es/_baseIsEqual.js","webpack:///./node_modules/lodash-es/_baseTimes.js","webpack:///./node_modules/lodash-es/_baseIsArguments.js","webpack:///./node_modules/lodash-es/isArguments.js","webpack:///./node_modules/lodash-es/_arrayLikeKeys.js","webpack:///./node_modules/lodash-es/_baseIsTypedArray.js","webpack:///./node_modules/lodash-es/isTypedArray.js","webpack:///./packages/ckeditor5-ui/src/model.js","webpack:///./packages/ckeditor5-enter/src/enterobserver.js","webpack:///./packages/ckeditor5-utils/src/dom/position.js","webpack:///./packages/ckeditor5-utils/src/dom/getpositionedancestor.js","webpack:///./packages/ckeditor5-cloud-services/tests/_utils/cloud-services-config.js","webpack:///./node_modules/lodash-es/isSymbol.js","webpack:///./packages/ckeditor5-ui/src/tooltip/tooltipview.js","webpack:///./packages/ckeditor5-engine/src/view/placeholder.js","webpack:///./packages/ckeditor5-undo/src/undoui.js","webpack:///./packages/ckeditor5-undo/src/undo.js","webpack:///./packages/ckeditor5-ui/src/label/labelview.js","webpack:///./packages/ckeditor5-image/src/image/imageloadobserver.js","webpack:///./packages/ckeditor5-image/src/image/converters.js","webpack:///./packages/ckeditor5-image/src/image/imageinsertcommand.js","webpack:///./packages/ckeditor5-image/src/image/imageediting.js","webpack:///./packages/ckeditor5-image/src/imagetextalternative/imagetextalternativecommand.js","webpack:///./packages/ckeditor5-image/src/imagetextalternative/imagetextalternativeediting.js","webpack:///./packages/ckeditor5-image/src/imagetextalternative/ui/textalternativeformview.js","webpack:///./packages/ckeditor5-image/src/image/ui/utils.js","webpack:///./packages/ckeditor5-image/src/imagetextalternative/imagetextalternativeui.js","webpack:///./packages/ckeditor5-image/src/imagetextalternative.js","webpack:///./packages/ckeditor5-image/src/image.js","webpack:///./packages/ckeditor5-upload/src/ui/filedialogbuttonview.js","webpack:///./packages/ckeditor5-image/src/imageupload/utils.js","webpack:///./packages/ckeditor5-image/src/imageupload/imageuploadui.js","webpack:///./packages/ckeditor5-image/src/imageupload/imageuploadprogress.js","webpack:///./packages/ckeditor5-image/src/imageupload/imageuploadcommand.js","webpack:///./packages/ckeditor5-image/src/imageupload/imageuploadediting.js","webpack:///./packages/ckeditor5-image/src/imageupload.js","webpack:///./packages/ckeditor5-core/theme/icons/object-right.svg","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./node_modules/lodash-es/isElement.js","webpack:///./packages/ckeditor5-adapter-ckfinder/src/utils.js","webpack:///./packages/ckeditor5-adapter-ckfinder/src/uploadadapter.js","webpack:///./packages/ckeditor5-core/src/pendingactions.js","webpack:///./packages/ckeditor5-core/theme/icons/object-full-width.svg","webpack:///./packages/ckeditor5-core/theme/icons/object-left.svg","webpack:///./packages/ckeditor5-core/theme/icons/object-center.svg","webpack:///./packages/ckeditor5-utils/src/dom/setdatainelement.js","webpack:///./packages/ckeditor5-ui/src/toolbar/toolbarseparatorview.js","webpack:///./packages/ckeditor5-ui/theme/icons/dropdown-arrow.svg","webpack:///(webpack)/buildin/global.js","webpack:///./packages/ckeditor5-ui/src/list/listview.js","webpack:///./packages/ckeditor5-ui/src/list/listitemview.js","webpack:///./packages/ckeditor5-basic-styles/src/italic/italicui.js","webpack:///./packages/ckeditor5-basic-styles/src/italic.js","webpack:///./packages/ckeditor5-basic-styles/src/bold/boldui.js","webpack:///./packages/ckeditor5-basic-styles/src/bold.js","webpack:///./node_modules/lodash-es/stubFalse.js","webpack:///./node_modules/lodash-es/_cloneBuffer.js","webpack:///./packages/ckeditor5-core/src/editor/utils/dataapimixin.js","webpack:///./packages/ckeditor5-ui/src/editorui/editoruiview.js","webpack:///./packages/ckeditor5-utils/src/dom/getdatafromelement.js","webpack:///./packages/ckeditor5-basic-styles/src/bold/boldediting.js","webpack:///./packages/ckeditor5-basic-styles/src/italic/italicediting.js","webpack:///./packages/ckeditor5-widget/theme/icons/drag-handler.svg","webpack:///./packages/ckeditor5-utils/src/config.js","webpack:///./packages/ckeditor5-engine/src/view/rooteditableelement.js","webpack:///./packages/ckeditor5-engine/src/view/document.js","webpack:///./packages/ckeditor5-engine/src/view/attributeelement.js","webpack:///./packages/ckeditor5-engine/src/view/emptyelement.js","webpack:///./packages/ckeditor5-engine/src/view/uielement.js","webpack:///./packages/ckeditor5-engine/src/view/downcastwriter.js","webpack:///./packages/ckeditor5-utils/src/dom/insertat.js","webpack:///./packages/ckeditor5-utils/src/dom/remove.js","webpack:///./packages/ckeditor5-engine/src/view/renderer.js","webpack:///./node_modules/lodash-es/isEqualWith.js","webpack:///./packages/ckeditor5-engine/src/view/observer/mutationobserver.js","webpack:///./packages/ckeditor5-engine/src/view/observer/keyobserver.js","webpack:///./packages/ckeditor5-engine/src/view/observer/fakeselectionobserver.js","webpack:///./packages/ckeditor5-engine/src/view/observer/selectionobserver.js","webpack:///./packages/ckeditor5-engine/src/view/observer/focusobserver.js","webpack:///./packages/ckeditor5-engine/src/view/observer/compositionobserver.js","webpack:///./packages/ckeditor5-engine/src/view/observer/inputobserver.js","webpack:///./packages/ckeditor5-utils/src/dom/scroll.js","webpack:///./packages/ckeditor5-engine/src/view/view.js","webpack:///./packages/ckeditor5-engine/src/conversion/mapper.js","webpack:///./packages/ckeditor5-engine/src/conversion/modelconsumable.js","webpack:///./packages/ckeditor5-engine/src/conversion/downcastdispatcher.js","webpack:///./packages/ckeditor5-engine/src/model/selection.js","webpack:///./packages/ckeditor5-engine/src/model/documentselection.js","webpack:///./packages/ckeditor5-engine/src/conversion/conversionhelpers.js","webpack:///./node_modules/lodash-es/cloneDeep.js","webpack:///./packages/ckeditor5-engine/src/conversion/downcasthelpers.js","webpack:///./packages/ckeditor5-engine/src/conversion/upcasthelpers.js","webpack:///./packages/ckeditor5-engine/src/controller/editingcontroller.js","webpack:///./packages/ckeditor5-core/src/plugincollection.js","webpack:///./packages/ckeditor5-core/src/commandcollection.js","webpack:///./packages/ckeditor5-utils/src/translation-service.js","webpack:///./packages/ckeditor5-utils/src/locale.js","webpack:///./packages/ckeditor5-engine/src/conversion/viewconsumable.js","webpack:///./packages/ckeditor5-engine/src/model/schema.js","webpack:///./packages/ckeditor5-engine/src/conversion/upcastdispatcher.js","webpack:///./packages/ckeditor5-engine/src/controller/datacontroller.js","webpack:///./packages/ckeditor5-engine/src/conversion/conversion.js","webpack:///./packages/ckeditor5-engine/src/model/batch.js","webpack:///./packages/ckeditor5-engine/src/model/operation/detachoperation.js","webpack:///./packages/ckeditor5-engine/src/model/rootelement.js","webpack:///./packages/ckeditor5-engine/src/model/writer.js","webpack:///./packages/ckeditor5-engine/src/model/differ.js","webpack:///./packages/ckeditor5-engine/src/model/history.js","webpack:///./packages/ckeditor5-utils/src/unicode.js","webpack:///./packages/ckeditor5-engine/src/model/document.js","webpack:///./packages/ckeditor5-engine/src/model/markercollection.js","webpack:///./packages/ckeditor5-engine/src/model/utils/insertcontent.js","webpack:///./packages/ckeditor5-engine/src/model/utils/deletecontent.js","webpack:///./packages/ckeditor5-engine/src/model/utils/modifyselection.js","webpack:///./packages/ckeditor5-engine/src/model/utils/getselectedcontent.js","webpack:///./packages/ckeditor5-engine/src/model/utils/selection-post-fixer.js","webpack:///./packages/ckeditor5-engine/src/model/model.js","webpack:///./packages/ckeditor5-core/src/editingkeystrokehandler.js","webpack:///./packages/ckeditor5-core/src/editor/editor.js","webpack:///./packages/ckeditor5-typing/src/utils/changebuffer.js","webpack:///./packages/ckeditor5-typing/src/inputcommand.js","webpack:///./packages/ckeditor5-typing/src/utils/injectunsafekeystrokeshandling.js","webpack:///./packages/ckeditor5-typing/src/utils/utils.js","webpack:///./packages/ckeditor5-utils/src/difftochanges.js","webpack:///./packages/ckeditor5-typing/src/utils/injecttypingmutationshandling.js","webpack:///./packages/ckeditor5-typing/src/input.js","webpack:///./packages/ckeditor5-typing/src/deletecommand.js","webpack:///./packages/ckeditor5-typing/src/deleteobserver.js","webpack:///./packages/ckeditor5-typing/src/delete.js","webpack:///./packages/ckeditor5-typing/src/typing.js","webpack:///./packages/ckeditor5-engine/src/model/operation/nooperation.js","webpack:///./packages/ckeditor5-engine/src/model/operation/transform.js","webpack:///./packages/ckeditor5-undo/src/basecommand.js","webpack:///./packages/ckeditor5-undo/src/undocommand.js","webpack:///./packages/ckeditor5-undo/src/redocommand.js","webpack:///./packages/ckeditor5-undo/src/undoediting.js","webpack:///./packages/ckeditor5-enter/src/entercommand.js","webpack:///./packages/ckeditor5-enter/src/enter.js","webpack:///./packages/ckeditor5-ui/src/editableui/editableuiview.js","webpack:///./packages/ckeditor5-ui/src/editableui/inline/inlineeditableuiview.js","webpack:///./packages/ckeditor5-ui/src/componentfactory.js","webpack:///./packages/ckeditor5-core/src/editor/editorui.js","webpack:///./packages/ckeditor5-ui/src/toolbar/enabletoolbarkeyboardfocus.js","webpack:///./packages/ckeditor5-ui/src/toolbar/normalizetoolbarconfig.js","webpack:///./packages/ckeditor5-undo/theme/icons/undo.svg","webpack:///./packages/ckeditor5-undo/theme/icons/redo.svg","webpack:///./packages/ckeditor5-basic-styles/theme/icons/bold.svg","webpack:///./packages/ckeditor5-basic-styles/theme/icons/italic.svg","webpack:///./packages/ckeditor5-enter/src/shiftentercommand.js","webpack:///./packages/ckeditor5-enter/src/shiftenter.js","webpack:///./packages/ckeditor5-essentials/src/essentials.js","webpack:///./packages/ckeditor5-heading/src/headingcommand.js","webpack:///./packages/ckeditor5-heading/src/headingediting.js","webpack:///./packages/ckeditor5-heading/src/utils.js","webpack:///./packages/ckeditor5-core/src/editor/utils/elementapimixin.js","webpack:///./packages/ckeditor5-core/src/editor/utils/attachtoform.js","webpack:///./packages/ckeditor5-ui/theme/icons/previous-arrow.svg","webpack:///./packages/ckeditor5-ui/theme/icons/next-arrow.svg","webpack:///./packages/ckeditor5-core/theme/icons/low-vision.svg","webpack:///./packages/ckeditor5-core/theme/icons/image.svg","webpack:///./packages/ckeditor5-image/theme/icons/image_placeholder.svg","webpack:///./packages/ckeditor5-list/theme/icons/numberedlist.svg","webpack:///./packages/ckeditor5-list/theme/icons/bulletedlist.svg","webpack:///./packages/ckeditor5-list/src/listcommand.js","webpack:///./packages/ckeditor5-list/src/indentcommand.js","webpack:///./packages/ckeditor5-list/src/utils.js","webpack:///./packages/ckeditor5-list/src/converters.js","webpack:///./packages/ckeditor5-list/src/listediting.js","webpack:///./packages/ckeditor5-list/src/listui.js","webpack:///./packages/ckeditor5-list/src/list.js","webpack:///./node_modules/@ckeditor/ckeditor-cloud-services-core/src/uploadgateway/fileuploader.js","webpack:///./node_modules/@ckeditor/ckeditor-cloud-services-core/src/token/token.js","webpack:///./packages/ckeditor5-cloud-services/src/cloudservices.js","webpack:///./packages/ckeditor5-easy-image/src/cloudservicesuploadadapter.js","webpack:///./node_modules/@ckeditor/ckeditor-cloud-services-core/src/uploadgateway/uploadgateway.js","webpack:///./packages/ckeditor5-easy-image/src/easyimage.js","webpack:///./packages/ckeditor5-heading/src/headingui.js","webpack:///./packages/ckeditor5-heading/src/heading.js","webpack:///./packages/ckeditor5-table/src/tabletoolbar.js","webpack:///./packages/ckeditor5-table/src/converters/upcasttable.js","webpack:///./packages/ckeditor5-table/src/tablewalker.js","webpack:///./packages/ckeditor5-table/src/converters/downcast.js","webpack:///./packages/ckeditor5-table/src/commands/inserttablecommand.js","webpack:///./packages/ckeditor5-table/src/commands/insertrowcommand.js","webpack:///./packages/ckeditor5-table/src/commands/insertcolumncommand.js","webpack:///./packages/ckeditor5-table/src/commands/splitcellcommand.js","webpack:///./packages/ckeditor5-table/src/commands/mergecellcommand.js","webpack:///./packages/ckeditor5-table/src/commands/removerowcommand.js","webpack:///./packages/ckeditor5-table/src/commands/removecolumncommand.js","webpack:///./packages/ckeditor5-table/src/commands/setheaderrowcommand.js","webpack:///./packages/ckeditor5-table/src/commands/setheadercolumncommand.js","webpack:///./packages/ckeditor5-table/src/tableutils.js","webpack:///./packages/ckeditor5-table/src/converters/table-layout-post-fixer.js","webpack:///./packages/ckeditor5-table/src/converters/table-cell-content-post-fixer.js","webpack:///./packages/ckeditor5-table/src/converters/tablecell-post-fixer.js","webpack:///./packages/ckeditor5-table/src/tableediting.js","webpack:///./packages/ckeditor5-table/src/ui/inserttableview.js","webpack:///./packages/ckeditor5-table/src/tableui.js","webpack:///./packages/ckeditor5-table/src/table.js","webpack:///./packages/ckeditor5-media-embed/src/converters.js","webpack:///./packages/ckeditor5-media-embed/src/utils.js","webpack:///./packages/ckeditor5-media-embed/src/mediaembedcommand.js","webpack:///./packages/ckeditor5-media-embed/src/mediaregistry.js","webpack:///./packages/ckeditor5-media-embed/src/mediaembedediting.js","webpack:///./packages/ckeditor5-media-embed/src/automediaembed.js","webpack:///./packages/ckeditor5-media-embed/src/ui/mediaformview.js","webpack:///./packages/ckeditor5-media-embed/src/mediaembedui.js","webpack:///./packages/ckeditor5-media-embed/src/mediaembed.js","webpack:///./packages/ckeditor5-core/theme/icons/quote.svg","webpack:///./packages/ckeditor5-image/src/imagetoolbar.js","webpack:///./packages/ckeditor5-link/theme/icons/unlink.svg","webpack:///./packages/ckeditor5-core/theme/icons/pencil.svg","webpack:///./packages/ckeditor5-link/theme/icons/link.svg","webpack:///./packages/ckeditor5-media-embed/theme/icons/media-placeholder.svg","webpack:///./packages/ckeditor5-media-embed/theme/icons/media.svg","webpack:///./packages/ckeditor5-table/theme/icons/table.svg","webpack:///./packages/ckeditor5-table/theme/icons/table-column.svg","webpack:///./packages/ckeditor5-table/theme/icons/table-row.svg","webpack:///./packages/ckeditor5-table/theme/icons/table-merge-cell.svg","webpack:///./packages/ckeditor5-link/src/findlinkrange.js","webpack:///./packages/ckeditor5-link/src/linkcommand.js","webpack:///./packages/ckeditor5-link/src/unlinkcommand.js","webpack:///./node_modules/lodash-es/_baseSlice.js","webpack:///./node_modules/lodash-es/_castSlice.js","webpack:///./node_modules/lodash-es/_hasUnicode.js","webpack:///./node_modules/lodash-es/_asciiToArray.js","webpack:///./node_modules/lodash-es/_unicodeToArray.js","webpack:///./node_modules/lodash-es/_stringToArray.js","webpack:///./node_modules/lodash-es/_arrayMap.js","webpack:///./node_modules/lodash-es/_baseToString.js","webpack:///./node_modules/lodash-es/toString.js","webpack:///./node_modules/lodash-es/_createCaseFirst.js","webpack:///./node_modules/lodash-es/upperFirst.js","webpack:///./packages/ckeditor5-link/src/utils.js","webpack:///./packages/ckeditor5-link/src/utils/automaticdecorators.js","webpack:///./packages/ckeditor5-link/src/utils/manualdecorator.js","webpack:///./packages/ckeditor5-engine/src/utils/bindtwostepcarettoattribute.js","webpack:///./packages/ckeditor5-link/src/linkediting.js","webpack:///./packages/ckeditor5-engine/src/view/observer/clickobserver.js","webpack:///./packages/ckeditor5-link/src/ui/linkformview.js","webpack:///./packages/ckeditor5-link/src/ui/linkactionsview.js","webpack:///./packages/ckeditor5-link/src/linkui.js","webpack:///./packages/ckeditor5-link/src/link.js","webpack:///./packages/ckeditor5-image/src/imagestyle/imagestylecommand.js","webpack:///./packages/ckeditor5-image/src/imagestyle/converters.js","webpack:///./packages/ckeditor5-image/src/imagestyle/utils.js","webpack:///./packages/ckeditor5-image/src/imagestyle/imagestyleediting.js","webpack:///./packages/ckeditor5-image/src/imagestyle/imagestyleui.js","webpack:///./packages/ckeditor5-image/src/imagestyle.js","webpack:///./packages/ckeditor5-block-quote/src/blockquotecommand.js","webpack:///./packages/ckeditor5-block-quote/src/blockquoteediting.js","webpack:///./packages/ckeditor5-block-quote/src/blockquoteui.js","webpack:///./packages/ckeditor5-block-quote/src/blockquote.js","webpack:///./packages/ckeditor5-image/src/imagecaption/utils.js","webpack:///./packages/ckeditor5-image/src/imagecaption/imagecaptionediting.js","webpack:///./packages/ckeditor5-image/src/imagecaption.js","webpack:///./packages/ckeditor5-autoformat/src/blockautoformatediting.js","webpack:///./packages/ckeditor5-autoformat/src/inlineautoformatediting.js","webpack:///./packages/ckeditor5-autoformat/src/autoformat.js","webpack:///./packages/ckeditor5-build-classic/src/ckeditor.js","webpack:///./packages/ckeditor5-utils/src/elementreplacer.js","webpack:///./packages/ckeditor5-paste-from-office/src/filters/space.js","webpack:///./packages/ckeditor5-paste-from-office/src/filters/parse.js","webpack:///./packages/ckeditor5-paste-from-office/src/filters/list.js","webpack:///./packages/ckeditor5-paste-from-office/src/filters/image.js","webpack:///./packages/ckeditor5-paste-from-office/src/pastefromoffice.js","webpack:///./packages/ckeditor5-ckfinder/src/ckfinderui.js","webpack:///./packages/ckeditor5-ckfinder/src/ckfindercommand.js","webpack:///./packages/ckeditor5-ckfinder/src/ckfinderediting.js","webpack:///./packages/ckeditor5-ckfinder/src/ckfinder.js","webpack:///./packages/ckeditor5-ckfinder/theme/icons/browse-files.svg","webpack:///./packages/ckeditor5-editor-classic/src/classiceditorui.js","webpack:///./packages/ckeditor5-ui/src/editorui/boxed/boxededitoruiview.js","webpack:///./packages/ckeditor5-ui/src/panel/sticky/stickypanelview.js","webpack:///./packages/ckeditor5-editor-classic/src/classiceditoruiview.js","webpack:///./packages/ckeditor5-editor-classic/src/classiceditor.js","webpack:///./node_modules/lodash-es/cloneDeepWith.js","webpack:///./node_modules/lodash-es/clone.js","webpack:///./node_modules/lodash-es/now.js","webpack:///./node_modules/lodash-es/toNumber.js","webpack:///./node_modules/lodash-es/debounce.js","webpack:///./node_modules/@ckeditor/ckeditor5-inspector/build/inspector.js","webpack:///./node_modules/umberto/source/ckeditor5/12.2.0/_snippets/framework/development-tools/inspector.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","CKEditorError","attachLinkToDocumentation","DOCUMENTATION_URL","Error","[object Object]","message","context","data","JSON","stringify","super","this","type","matchedErrorName","match","Plugin","_ckeditor_ckeditor5_utils_src_observablemixin__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_utils_src_mix__WEBPACK_IMPORTED_MODULE_1__","editor","stopListening","Range","_position__WEBPACK_IMPORTED_MODULE_0__","_treewalker__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_utils_src_ckeditorerror__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_utils_src_comparearrays__WEBPACK_IMPORTED_MODULE_3__","start","end","_createAt","stickiness","isCollapsed","iterator","boundaries","ignoreElementEnd","isEqual","isFlat","startParentPath","getParentPath","endParentPath","root","position","isAfter","isBefore","otherRange","loose","containsStart","containsPosition","containsEnd","item","pos","_createBefore","ranges","isIntersecting","push","commonRangeStart","commonRangeEnd","diffAt","getCommonPath","length","posParent","parent","path","howMany","maxOffset","offset","getShiftedBy","slice","options","treeWalker","nextPosition","operation","_getTransformedByInsertOperation","_getTransformedByMoveOperation","_getTransformedBySplitOperation","_getTransformedByMergeOperation","operations","result","getTransformedByOperation","splice","range","j","next","containsRange","getCommonAncestor","toJSON","constructor","spread","_getTransformedByInsertion","sourcePosition","targetPosition","_getTransformedByMove","insertionPosition","deletionPosition","insertPosition","newPos","moveRange","_createFromPositionAndShift","_getTransformedByDeletion","differenceSet","getDifference","difference","common","getIntersection","transformedCommon","_getCombined","deletePosition","newStart","newEnd","shift","element","offsetSize","clone","ref","sort","a","b","refIndex","indexOf","json","doc","fromJSON","lodash_es_last","array","undefined","position_Position","is","ckeditorerror","Array","getPath","concat","newOffset","getChild","offsetToIndex","index","textNode","node","model_text","startOffset","nodeAfter","nodeBefore","isAtStart","isAtEnd","otherPosition","comparearrays","skip","startPosition","treewalker","getAncestors","includeSelf","cmp","Math","min","ancestorsA","ancestorsB","shifted","compareWith","left","right","leftParent","thisParentPath","posParentPath","movedRange","splitPosition","moveTargetPosition","graveyardPosition","transformed","source","target","combined","from","itemOrPosition","_createAfter","endOffset","graveyard","getRoot","rootName","Position","_treewalker__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_utils_src_comparearrays__WEBPACK_IMPORTED_MODULE_1__","_editableelement__WEBPACK_IMPORTED_MODULE_3__","childCount","editableElement","editable","thisPath","otherPath","offsetInText","mix","baseClass","mixins","forEach","mixin","getOwnPropertyNames","getOwnPropertySymbols","sourceDescriptor","getOwnPropertyDescriptor","View","_ckeditor_ckeditor5_utils_src_ckeditorerror__WEBPACK_IMPORTED_MODULE_0__","_viewcollection__WEBPACK_IMPORTED_MODULE_1__","_template__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_utils_src_dom_emittermixin__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_utils_src_observablemixin__WEBPACK_IMPORTED_MODULE_4__","_ckeditor_ckeditor5_utils_src_collection__WEBPACK_IMPORTED_MODULE_5__","_ckeditor_ckeditor5_utils_src_mix__WEBPACK_IMPORTED_MODULE_6__","_ckeditor_ckeditor5_utils_src_isiterable__WEBPACK_IMPORTED_MODULE_7__","locale","isRendered","_viewCollections","_unboundChildren","createCollection","on","evt","collection","decorate","bindTemplate","_bindTemplate","add","children","child","remove","definition","template","extend","render","registerChild","getViews","map","destroy","_revertData","revert","Command","set","_disableStack","Set","listenTo","model","document","refresh","isEnabled","stop","priority","forceDisabled","clearForceDisabled","id","size","forceDisable","delete","off","return","_getEmitterListenedTo","_setEmitterId","_eventinfo__WEBPACK_IMPORTED_MODULE_0__","_uid__WEBPACK_IMPORTED_MODULE_1__","_priorities__WEBPACK_IMPORTED_MODULE_2__","_listeningTo","_emitterId","EmitterMixin","event","callback","wasFired","args","emitter","emitterInfo","eventCallbacks","emitters","_getEmitterId","emitterId","callbacks","eventName","events","getEvents","childEventName","newEventNodes","childEvents","substr","lastIndexOf","createEventNamespace","lists","getCallbacksListsForNamespace","callbackDefinition","added","removeCallback","pop","eventOrInfo","eventInfo","getCallbacksForEvent","_events","callbackArgs","apply","called","_delegations","destinations","passAllDestinations","fireDelegatedEvents","to","nameOrFunction","Map","clear","listeningEmitter","listenedToEmitterId","eventNode","callbacksLists","childCallbacksLists","fireArgs","delegatedInfo","fire","keyCodes","getCode","parseKeystroke","getEnvKeystrokeText","_ckeditorerror__WEBPACK_IMPORTED_MODULE_0__","_env__WEBPACK_IMPORTED_MODULE_1__","macGlyphsToModifiers","⌘","⇧","⌥","modifiersToMacGlyphs","ctrl","alt","arrowleft","arrowup","arrowright","arrowdown","backspace","enter","space","esc","tab","cmd","code","letter","String","fromCharCode","toLowerCase","generateKnownKeyCodes","keyCode","altKey","ctrlKey","shiftKey","keystroke","splitKeystrokeText","reduce","sum","isMac","split","getLastMatchingPosition","enlargeTrimSkip","direction","nodeAfterStart","nodeBeforeEnd","startElement","endElement","_createFromParentsAndOffsets","findAncestor","parentName","updateNumericAttribute","writer","defaultValue","setAttribute","removeAttribute","createEmptyTableCell","attributes","tableCell","createElement","insertElement","insert","log","console","error","warn","BR_FILLER","NBSP_FILLER","INLINE_FILLER_LENGTH","INLINE_FILLER","startsWithFiller","isInlineFiller","getDataWithoutFiller","isBlockFiller","injectQuirksHandling","_ckeditor_ckeditor5_utils_src_keyboard__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_utils_src_dom_istext__WEBPACK_IMPORTED_MODULE_1__","domDocument","fillerBr","dataset","ckeFiller","createTextNode","domNode","domText","templateBlockFillers","WeakMap","blockFiller","templateBlockFiller","window","isEqualNode","view","jumpOverInlineFiller","domSelection","domTarget","ownerDocument","defaultView","getSelection","rangeCount","getRangeAt","collapsed","domParent","startContainer","domOffset","collapse","_emittermixin__WEBPACK_IMPORTED_MODULE_0__","_ckeditorerror__WEBPACK_IMPORTED_MODULE_1__","lodash_es__WEBPACK_IMPORTED_MODULE_2__","lodash_es__WEBPACK_IMPORTED_MODULE_3__","observablePropertiesSymbol","boundObservablesSymbol","boundPropertiesSymbol","ObservableMixin","keys","initObservable","properties","has","configurable","oldValue","newValue","bindProperties","isStringArray","boundProperties","propertyName","bindings","binding","bindTo","toMany","bindToMany","_observable","_bindProperties","_to","_bindings","unbindProperties","boundObservables","toObservable","toProperty","toProperties","toPropertyBindings","boundObservable","methodName","originalMethod","observable","parsedArgs","parsed","lastObservable","parseBindToArgs","bindingsKeys","numberOfBindings","toBindings","updateBoundObservableProperty","attachBindToListeners","chain","toPropertyName","bindingsToObservable","updateBoundObservables","updateBindToBound","observables","attribute","observableAndAttributePairs","getBindingTargets","arr","every","propertyValue","ButtonView","_view__WEBPACK_IMPORTED_MODULE_0__","_icon_iconview__WEBPACK_IMPORTED_MODULE_1__","_tooltip_tooltipview__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_utils_src_uid__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_utils_src_keyboard__WEBPACK_IMPORTED_MODULE_4__","ariaLabelUid","tooltipView","_createTooltipView","labelView","_createLabelView","iconView","extendTemplate","class","_getTooltipString","setTemplate","tag","if","tabindex","aria-labelledby","aria-disabled","aria-pressed","mousedown","preventDefault","click","icon","focus","style","text","tooltip","label","Function","Element","_node__WEBPACK_IMPORTED_MODULE_0__","_nodelist__WEBPACK_IMPORTED_MODULE_1__","_text__WEBPACK_IMPORTED_MODULE_2__","_textproxy__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_utils_src_isiterable__WEBPACK_IMPORTED_MODULE_4__","attrs","_children","_insertChild","isEmpty","getNode","getNodeIndex","getNodeStartOffset","relativePath","deep","_clone","getAttributes","nodes","items","normalize","_remove","_insertNodes","_removeNodes","Text","_data","_textData","_fireChange","otherNode","MoveOperation","_operation__WEBPACK_IMPORTED_MODULE_0__","_position__WEBPACK_IMPORTED_MODULE_1__","_range__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_utils_src_ckeditorerror__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_utils_src_comparearrays__WEBPACK_IMPORTED_MODULE_4__","_utils__WEBPACK_IMPORTED_MODULE_5__","baseVersion","newTargetPosition","getMovedRangeStart","sourceElement","targetElement","sourceOffset","targetOffset","className","HighlightStack","_stack","descriptor","stack","oldTop","_insertDescriptor","newTop","compareDescriptors","oldDescriptor","newDescriptor","_removeDescriptor","findIndex","shouldABeBeforeB","classesToString","classes","isArray","join","emittermixin","WIDGET_SELECTED_CLASS_NAME","isWidget","toWidget","getLabel","toWidgetEditable","findOptimalInsertionPosition","viewToModelPositionOutsideModelElement","WIDGET_CLASS_NAME","getCustomProperty","env","isEdge","addClass","setCustomProperty","getFillerOffset","labelOrCreator","setLabel","hasSelectionHandler","widgetElement","selectionHandler","createUIElement","domElement","toDomElement","iconview","drag_handler_default","appendChild","createPositionAt","addSelectionHandler","setHighlightHandling","normalizeToArray","removeClass","labelCreator","isReadOnly","selection","selectedElement","getSelectedElement","schema","isBlock","createPositionAfter","firstBlock","getSelectedBlocks","positionAfter","isTouching","createPositionBefore","viewElementMatcher","mapper","viewPosition","viewParent","findMappedViewAncestor","modelParent","toModelElement","modelPosition","SplitOperation","_mergeoperation__WEBPACK_IMPORTED_MODULE_1__","_position__WEBPACK_IMPORTED_MODULE_2__","_range__WEBPACK_IMPORTED_MODULE_3__","_utils__WEBPACK_IMPORTED_MODULE_4__","_ckeditor_ckeditor5_utils_src_ckeditorerror__WEBPACK_IMPORTED_MODULE_5__","getInsertionPosition","Number","POSITIVE_INFINITY","splitElement","newElement","sourceRange","_freeGlobal_js__WEBPACK_IMPORTED_MODULE_0__","freeSelf","self","compareArrays","minLen","isText","obj","toString","MergeOperation","_splitoperation__WEBPACK_IMPORTED_MODULE_1__","mergedElement","_createIn","_createOn","Operation","isDocumentOperation","batch","assign","__className","Collection","_uid__WEBPACK_IMPORTED_MODULE_2__","_mix__WEBPACK_IMPORTED_MODULE_3__","_items","_itemMap","_idProperty","idProperty","_bindToExternalToInternalMap","_bindToInternalToExternalMap","_skippedIndexesFromExternal","first","last","itemId","idOrIndex","itemOrId","subject","itemDoesNotExist","externalItem","ctx","find","filter","_bindToCollection","externalCollection","as","Class","_setUpBindToBinding","using","callbackOrProperty","factory","addItem","isExternalBoundToThis","externalItemBound","finalIndex","skipped","getIndex","userAgent","navigator","isGecko","isSafari","isAndroid","_text__WEBPACK_IMPORTED_MODULE_1__","_textproxy__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_utils_src_objecttomap__WEBPACK_IMPORTED_MODULE_3__","_matcher__WEBPACK_IMPORTED_MODULE_5__","lodash_es__WEBPACK_IMPORTED_MODULE_6__","_attrs","parseAttributes","_classes","classString","parseClasses","_styles","parseInlineStyles","_customProperties","entries","getAttribute","styleString","otherElement","patterns","matcher","styles","childrenClone","getChildren","cloned","count","stylesMap","stylesString","quoteType","propertyNameStart","propertyValueStart","charAt","char","trim","classesSet","classesString","classArray","toImageWidget","getSelectedImageWidget","isImage","insertImage","isImageAllowed","_ckeditor_ckeditor5_widget_src_utils__WEBPACK_IMPORTED_MODULE_0__","viewElement","altText","isImageWidget","modelElement","imageElement","insertAtSelection","insertContent","setSelection","getInsertImageParent","checkChild","isImageAllowedInParent","isObject","checkSelectionOnObject","ancestor","isInOtherImage","FocusTracker","_dom_emittermixin__WEBPACK_IMPORTED_MODULE_0__","_observablemixin__WEBPACK_IMPORTED_MODULE_1__","_ckeditorerror__WEBPACK_IMPORTED_MODULE_2__","_elements","_nextEventLoopTimeout","_focus","useCapture","_blur","focusedElement","clearTimeout","isFocused","setTimeout","LivePosition","_ckeditor_ckeditor5_utils_src_emittermixin__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_utils_src_mix__WEBPACK_IMPORTED_MODULE_2__","oldPosition","toPosition","isIterable","lodash_es_isEqual","other","_baseIsEqual","attributeoperation_AttributeOperation","getItems","shallow","hasAttribute","utils","uid","uuid","floor","random","substring","TextProxy","isPartial","parentFirst","ancestors","getAttributeKeys","_insert","_move","_setAttribute","_normalizeNodes","_documentfragment__WEBPACK_IMPORTED_MODULE_4__","_nodelist__WEBPACK_IMPORTED_MODULE_5__","_ckeditor_ckeditor5_utils_src_ckeditorerror__WEBPACK_IMPORTED_MODULE_6__","_splitNodeAtPosition","_mergeNodesAtIndex","removed","_removeChildren","_removeAttribute","normalized","prev","_haveSameAttributes","mergedNode","offsetDiff","firstPart","secondPart","nodeA","nodeB","iteratorA","iteratorB","attr","done","KeystrokeHandler","_keyboard__WEBPACK_IMPORTED_MODULE_1__","_listener","keyEvtData","stopPropagation","iterable","iteratorItem","InsertOperation","_nodelist__WEBPACK_IMPORTED_MODULE_2__","_moveoperation__WEBPACK_IMPORTED_MODULE_3__","_text__WEBPACK_IMPORTED_MODULE_5__","_element__WEBPACK_IMPORTED_MODULE_6__","_ckeditor_ckeditor5_utils_src_ckeditorerror__WEBPACK_IMPORTED_MODULE_7__","shouldReceiveAttributes","gyPosition","originalNodes","Selection","_range__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_utils_src_mix__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_utils_src_emittermixin__WEBPACK_IMPORTED_MODULE_4__","_node__WEBPACK_IMPORTED_MODULE_5__","_ckeditor_ckeditor5_utils_src_count__WEBPACK_IMPORTED_MODULE_7__","_ckeditor_ckeditor5_utils_src_isiterable__WEBPACK_IMPORTED_MODULE_8__","_documentselection__WEBPACK_IMPORTED_MODULE_9__","selectable","placeOrOffset","_ranges","_lastRangeBackward","_isFake","_fakeSelectionLabel","setTo","isFake","fakeSelectionLabel","anchor","isBackward","firstRange","getFirstRange","lastRange","getLastRange","otherSelection","thisRange","found","numOfRangesA","getRanges","rangeA","getTrimmed","rangeB","nextSibling","previousSibling","_setRanges","_setFakeOptions","fake","backward","newFocus","_addRange","newRanges","isLastBackward","_pushRange","storedRange","addedRange","intersectingRange","Rect","_isrange__WEBPACK_IMPORTED_MODULE_0__","_iswindow__WEBPACK_IMPORTED_MODULE_1__","_getborderwidths__WEBPACK_IMPORTED_MODULE_2__","_log__WEBPACK_IMPORTED_MODULE_3__","_istext__WEBPACK_IMPORTED_MODULE_4__","lodash_es__WEBPACK_IMPORTED_MODULE_5__","rectProperties","isSourceRange","_source","writable","sourceNode","body","contains","copyRectProperties","getDomRangeRects","getBoundingClientRect","innerWidth","innerHeight","top","bottom","width","height","x","y","anotherRect","rect","max","getArea","visibleRect","isBody","parentNode","commonAncestorContainer","parentRect","intersectionRect","prop","intersectRect","scrollBarWidth","scrollBarHeight","documentElement","clientWidth","clientHeight","borderWidths","offsetWidth","offsetHeight","moveBy","rects","clientRects","getClientRects","elementOrRange","_coreJsData","maskSrcKey","exec","IE_PROTO","_isMasked","func","reIsHostCtor","funcProto","objectProto","funcToString","_baseIsNative_hasOwnProperty","reIsNative","RegExp","replace","_baseIsNative","isFunction","test","_toSource","_getValue","Observer","_ckeditor_ckeditor5_utils_src_dom_emittermixin__WEBPACK_IMPORTED_MODULE_0__","disable","TreeWalker","_text__WEBPACK_IMPORTED_MODULE_0__","_textproxy__WEBPACK_IMPORTED_MODULE_1__","_element__WEBPACK_IMPORTED_MODULE_2__","_position__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_utils_src_ckeditorerror__WEBPACK_IMPORTED_MODULE_4__","singleCharacters","_boundaryStartParent","_boundaryEndParent","_visitedParent","prevPosition","prevVisitedParent","_next","_previous","previousPosition","formatReturnValue","charactersCount","offsetInTextNode","DomEventObserver","_observer__WEBPACK_IMPORTED_MODULE_0__","_domeventdata__WEBPACK_IMPORTED_MODULE_1__","domEventType","domEvent","onDomEvent","eventType","additionalData","_getRawTag_hasOwnProperty","nativeObjectToString","symToStringTag","_Symbol","_getRawTag","isOwn","unmasked","e","_objectToString_nativeObjectToString","_objectToString","nullTag","undefinedTag","_baseGetTag_symToStringTag","FileReader","reader","_reader","onprogress","loaded","file","total","Promise","resolve","reject","onload","onerror","onabort","readAsDataURL","abort","observablemixin","filerepository_FileRepository","src_plugin","pluginName","requires","pendingactions","loaders","_updatePendingAction","_loadersMap","_pendingAction","uploaded","fileOrPromise","createUploadAdapter","loader","filerepository_FileLoader","then","catch","aggregatedUploaded","aggregatedTotal","uploadTotal","fileOrPromiseOrLoader","getLoader","_destroy","pendingActions","plugins","getMessage","parseInt","uploadedPercent","filePromise","uploadAdapterCreator","_filePromiseWrapper","_createFilePromiseWrapper","_adapter","promise","status","read","err","upload","uploadResponse","isFulfilled","rejecter","wrapper","resolver","FocusCycler","_ckeditor_ckeditor5_utils_src_dom_global__WEBPACK_IMPORTED_MODULE_0__","actions","keystrokeHandler","cancel","focusables","isFocusable","_getFocusableItem","previous","current","focusTracker","viewIndex","focused","step","collectionLength","getComputedStyle","display","Matcher","pattern","_patterns","singleElement","isElementMatching","results","matchName","matchAttributes","getClassNames","hasClass","matchClasses","hasStyle","getStyle","matchStyles","ViewCollection","_ckeditor_ckeditor5_utils_src_collection__WEBPACK_IMPORTED_MODULE_1__","_parentElement","insertBefore","elementOrDocFragment","dest","evtName","delegate","stopDelegating","toMap","_objecttomap__WEBPACK_IMPORTED_MODULE_0__","lodash_es__WEBPACK_IMPORTED_MODULE_1__","Template","_ckeditor_ckeditor5_utils_src_emittermixin__WEBPACK_IMPORTED_MODULE_2__","_view__WEBPACK_IMPORTED_MODULE_3__","_viewcollection__WEBPACK_IMPORTED_MODULE_4__","_ckeditor_ckeditor5_utils_src_dom_isnode__WEBPACK_IMPORTED_MODULE_5__","_ckeditor_ckeditor5_utils_src_log__WEBPACK_IMPORTED_MODULE_6__","lodash_es__WEBPACK_IMPORTED_MODULE_7__","lodash_es__WEBPACK_IMPORTED_MODULE_8__","xhtmlNs","def","_isRendered","_renderNode","intoFragment","isApplying","revertData","_revertTemplateFromNode","search","isView","isTemplate","eventNameOrFunctionOrAttribute","TemplateToBinding","eventNameOrFunction","valueIfTrue","TemplateIfBinding","extendObjectValueArray","eventListeners","childIndex","childDef","isInvalid","_renderText","_renderElement","createElementNS","_renderAttributes","_renderElementChildren","_setUpListeners","textContent","hasTemplateBinding","_bindToObservable","updater","getTextUpdater","attrName","attrValue","domAttrValue","attrNs","valueToBind","shouldExtend","unshift","getAttributeUpdater","_renderStyleAttribute","isFalsy","val","arrayValueReducer","setAttributeNS","styleName","styleValue","getStyleUpdater","container","createDocumentFragment","isViewCollection","setParent","childRevertData","childNodes","revertBindings","schemaItem","domEvtName","domSelector","activateDomEventListener","syncValueSchemaValue","templateBinding","activateAttributeListener","revertBinding","TemplateBinding","domEvt","matches","getValue","some","getValueSchemaValue","el","removeAttributeNS","normalizePlainTextDefinition","normalizeTextDefinition","listeners","arrayify","normalizeListeners","normalizeAttributes","cur","ext","_assignValue_js__WEBPACK_IMPORTED_MODULE_0__","_baseAssignValue_js__WEBPACK_IMPORTED_MODULE_1__","props","customizer","isNew","Node","lodash_es__WEBPACK_IMPORTED_MODULE_4__","getChildIndex","nodePath","_ckeditor_ckeditor5_utils_src_tomap__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_utils_src_ckeditorerror__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_utils_src_comparearrays__WEBPACK_IMPORTED_MODULE_2__","getChildStartOffset","NodeList","_nodes","totalOffset","nodeList","indexStart","_element__WEBPACK_IMPORTED_MODULE_0__","_formatReturnValue","textLength","textProxy","MarkerOperation","oldRange","newRange","markers","affectsData","_markers","RenameOperation","_element__WEBPACK_IMPORTED_MODULE_1__","oldName","newName","dropdownpanelview_DropdownPanelView","selectstart","lastChild","focusLast","dropdownview_DropdownView","buttonView","panelView","focustracker","keystrokes","keystrokehandler","isOpen","panelPosition","defaultPanelPositions","fitInViewport","positions","southEast","southWest","northEast","northWest","closeDropdown","buttonRect","panelRect","dropdownbuttonview_DropdownButtonView","buttonview","arrowView","_createArrowView","aria-haspopup","content","dropdown_arrow_default","listseparatorview_ListSeparatorView","createDropdown","ButtonClass","dropdownView","clickoutsidehandler","activator","contextElements","closeDropdownOnBlur","switchbuttonview","closeDropdownOnExecute","focusDropdownContentsOnArrows","addDefaultBehavior","addToolbarToDropdown","buttons","toolbarView","toolbarview","addListToDropdown","listView","listview","listItemView","listitemview","_DataView","_getNative","_root","_Promise","_Set","_WeakMap","dataViewCtorString","mapCtorString","_Map","promiseCtorString","setCtorString","weakMapCtorString","getTag","_baseGetTag","ArrayBuffer","Ctor","ctorString","freeExports","nodeType","freeModule","freeProcess","process","nodeUtil","types","require","diff","_src_fastdiff__WEBPACK_IMPORTED_MODULE_0__","aLength","bLength","fastDiff","_delete","tmp","delta","es","fp","snake","k","y1","y2","dir","isNode","Document","DocumentFragment","_nodelist__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_utils_src_isiterable__WEBPACK_IMPORTED_MODULE_3__","LiveRange","_range__WEBPACK_IMPORTED_MODULE_0__","_createFromRanges","boundariesChanged","contentChanged","doesOperationChangeRangeContent","toRange","_isnode__WEBPACK_IMPORTED_MODULE_2__","_iswindow__WEBPACK_IMPORTED_MODULE_3__","DomEmitterMixin","rest","proxy","_getProxyEmitter","ProxyEmitter","attach","detach","getNodeUID","_domNode","_domListeners","domListener","_createDomListener","addEventListener","removeListener","removeEventListener","_listCacheClear","__data__","_assocIndexOf","eq","_listCacheDelete","_listCacheGet","_listCacheHas","_listCacheSet","ListCache","entry","_getNative_js__WEBPACK_IMPORTED_MODULE_0__","_root_js__WEBPACK_IMPORTED_MODULE_1__","ContainerElement","IconView","viewBox","_updateXMLContent","_colorFillPaths","svg","DOMParser","parseFromString","querySelector","innerHTML","fillColor","querySelectorAll","fill","DOCUMENT_NODE","domconverter_DomConverter","filler","preElements","blockElements","_domToViewMapping","_viewToDomMapping","_fakeSelectionMapping","viewDocumentSelection","unbindDomElement","domFragment","viewFragment","viewNode","textData","_processDataFromViewText","mapViewToDom","bindDocumentFragments","bindElements","withChildren","viewChildrenToDom","fillerPositionOffset","childView","viewToDom","viewRange","domStart","viewPositionToDom","domEnd","domRange","createRange","setStart","setEnd","findCorrespondingDomText","domBefore","domAfter","istext","uiElement","getParentUIElement","_processDataFromDomText","view_text","isComment","mapDomToView","isDocumentFragment","documentfragment","viewName","keepOriginalCase","tagName","view_element","domChildrenToView","_appendChild","domChild","viewChild","domToView","viewSelection","fakeSelectionToView","isDomSelectionBackward","viewRanges","domRangeToView","viewStart","domPositionToView","viewEnd","endContainer","findCorrespondingViewText","viewBefore","domElementOrDocumentFragment","isElement","firstChild","documentFragmentOrElement","viewText","viewEditable","domEditable","activeElement","scrollX","scrollY","global","scrollPositions","forEachDomNodeAncestor","scrollLeft","scrollTop","scrollTo","ELEMENT_NODE","DOCUMENT_FRAGMENT_NODE","COMMENT_NODE","anchorNode","anchorOffset","focusNode","focusOffset","_isDomSelectionPositionCorrect","includes","prevNode","_getTouchingViewTextNode","_nodeEndsWithSpace","nextNode","_hasDomParentOfType","_getTouchingInlineDomNode","shouldLeftTrim","_checkShouldLeftTrimDomText","shouldRightTrim","_checkShouldRightTrimDomText","getNext","topmostParent","createTreeWalker","NodeFilter","SHOW_TEXT","SHOW_ELEMENT","acceptNode","FILTER_ACCEPT","FILTER_SKIP","currentNode","touchingNode","lca","boundaryParent","parents","_root_js__WEBPACK_IMPORTED_MODULE_0__","_stubFalse_js__WEBPACK_IMPORTED_MODULE_1__","Buffer","isBuffer","isRange","ContextualBalloon","_ckeditor_ckeditor5_core_src_plugin__WEBPACK_IMPORTED_MODULE_0__","_balloonpanelview__WEBPACK_IMPORTED_MODULE_1__","_view__WEBPACK_IMPORTED_MODULE_2__","_button_buttonview__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_utils_src_focustracker__WEBPACK_IMPORTED_MODULE_5__","_ckeditor_ckeditor5_utils_src_dom_tounit__WEBPACK_IMPORTED_MODULE_6__","_ckeditor_ckeditor5_utils_src_dom_rect__WEBPACK_IMPORTED_MODULE_7__","_theme_icons_previous_arrow_svg__WEBPACK_IMPORTED_MODULE_8__","_theme_icons_previous_arrow_svg__WEBPACK_IMPORTED_MODULE_8___default","_theme_icons_next_arrow_svg__WEBPACK_IMPORTED_MODULE_9__","_theme_icons_next_arrow_svg__WEBPACK_IMPORTED_MODULE_9___default","toPx","positionLimiter","editing","domConverter","ui","_viewToStack","_idToStack","_rotatorView","_createRotatorView","_fakePanelsView","_createFakePanelsView","hasView","stackId","_numberOfStacks","_visibleStack","singleViewMode","showStack","_showView","_singleViewMode","visibleView","_showNextStack","hide","hideView","values","_getStackId","pin","_getBalloonPosition","updatePosition","visibleStack","stacks","nextIndex","RotatorView","isSingleViewMode","numberOfStacks","buttonNextView","buttonPrevView","_showPrevStack","FakePanelsView","number","balloonClassName","withArrow","showView","limiter","_createButtonView","z-index","balloonPanelView","_balloonPanelView","_addPanels","_removePanels","deregisterChild","numberOfPanels","_overArg_js__WEBPACK_IMPORTED_MODULE_0__","getPrototype","getPrototypeOf","_isFunction_js__WEBPACK_IMPORTED_MODULE_0__","_isLength_js__WEBPACK_IMPORTED_MODULE_1__","EditableElement","_containerelement__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_utils_src_observablemixin__WEBPACK_IMPORTED_MODULE_3__","documentSymbol","_document","_setCustomProperty","DomEventData","lodash_es__WEBPACK_IMPORTED_MODULE_0__","_arrayEach","iteratee","_baseAssign","_copyObject","_baseAssignIn","lodash_es_keysIn","_copyArray","_copySymbols","_getSymbols","_getSymbolsIn","_arrayPush","_getPrototype","stubArray","_copySymbolsIn","_getAllKeysIn","_baseGetAllKeys","_initCloneArray_hasOwnProperty","_initCloneArray","input","_cloneArrayBuffer","arrayBuffer","byteLength","_Uint8Array","_cloneDataView","dataView","isDeep","buffer","byteOffset","reFlags","_cloneRegExp","regexp","lastIndex","symbolProto","symbolValueOf","valueOf","_cloneSymbol","symbol","_cloneTypedArray","typedArray","boolTag","dateTag","mapTag","numberTag","regexpTag","setTag","stringTag","symbolTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","_initCloneByTag","objectCreate","_baseCreate","proto","_initCloneObject","_isPrototype","_baseIsMap_mapTag","_baseIsMap","isObjectLike","_getTag","nodeIsMap","_nodeUtil","isMap","lodash_es_isMap","_baseUnary","_baseIsSet_setTag","_baseIsSet","nodeIsSet","isSet","lodash_es_isSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","argsTag","funcTag","genTag","objectTag","cloneableTags","baseClone","bitmask","isFull","isArr","isFunc","_cloneBuffer","_Stack","stacked","subValue","keysFunc","_getAllKeys","keysIn","_assignValue","_nativeKeysIn","_baseKeysIn_hasOwnProperty","_baseKeysIn","isProto","isArrayLike","_arrayLikeKeys","_nativeKeys","_overArg","_baseKeys_hasOwnProperty","_baseKeys","_arrayFilter","predicate","resIndex","propertyIsEnumerable","nativeGetSymbols","getSymbols","Uint8Array","isWindow","stringifiedObject","_stackClear","_ListCache","_stackDelete","_stackGet","_stackHas","LARGE_ARRAY_SIZE","_stackSet","pairs","_MapCache","Stack","src_spy","spy","eventinfo_EventInfo","_baseGetTag_js__WEBPACK_IMPORTED_MODULE_0__","_getPrototype_js__WEBPACK_IMPORTED_MODULE_1__","_isObjectLike_js__WEBPACK_IMPORTED_MODULE_2__","objectCtorString","_isObject_js__WEBPACK_IMPORTED_MODULE_1__","asyncTag","proxyTag","clickOutsideHandler","contextElement","paragraphcommand_ParagraphCommand","command","block","checkCanBecomeParagraph","change","blocks","rename","paragraph_Paragraph","commands","register","inheritAllFrom","conversion","elementToElement","for","modelWriter","paragraphLikeElements","converterPriority","upcastDispatcher","conversionApi","consumable","viewItem","isParagraphable","modelCursor","wrapInParagraph","modelRange","registerPostFixer","_autoparagraphEmptyRoots","enqueueChange","getRootNames","paragraph","convertItem","createContext","BalloonPanelView","_ckeditor_ckeditor5_utils_src_dom_position__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_utils_src_dom_isrange__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_utils_src_dom_tounit__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_utils_src_dom_global__WEBPACK_IMPORTED_MODULE_4__","defaultLimiterElement","isVisible","show","defaultPositions","positionOptions","southArrowNorth","southArrowNorthWest","southArrowNorthEast","northArrowSouth","northArrowSouthWest","northArrowSouthEast","optimalPosition","_getOptimalPosition","unpin","_pinWhenIsVisibleCallback","_startPinning","_stopPinning","attachTo","getDomElement","limiterElement","scrollTarget","isWithinScrollTarget","isLimiterWithinScrollTarget","getNorthTop","targetRect","balloonRect","arrowVerticalOffset","getSouthTop","arrowHorizontalOffset","northWestArrowSouth","northWestArrowSouthWest","northWestArrowSouthEast","northEastArrowSouth","northEastArrowSouthEast","northEastArrowSouthWest","southWestArrowNorth","southWestArrowNorthWest","southWestArrowNorthEast","southEastArrowNorth","southEastArrowNorthEast","southEastArrowNorthWest","toolbarview_ToolbarView","_focusCycler","focuscycler","focusPrevious","focusNext","focusFirst","config","toolbarseparatorview","priorities","normal","highest","high","low","lowest","mouseobserver_MouseObserver","domeventobserver","widget_Widget","selectAllKeystrokeCode","keyboard","viewDocument","_previouslySelected","downcastDispatcher","_clearPreviouslySelectedWidgets","viewWriter","lastMarked","isChild","addObserver","_onMousedown","_onKeydown","_handleDelete","domEventData","isInsideNestedEditable","detail","_setSelectionOverElement","isForward","wasHandled","isArrowKeyCode","isSelectAllKeyCode","_handleEnterKey","_selectAllNestedEditableContent","_selectAllContent","_handleArrowKeys","modelSelection","objectElement","_getObjectElementNextToSelection","previousNode","nodeToRemove","getLastPosition","getFirstPosition","getNearestSelectionRange","objectElement2","isBackwards","isInline","shouldInsertParagraph","paragraphLimit","findAllowedParent","documentSelection","limitElement","getLimitElement","createRangeIn","widgetParent","createRangeOn","forward","probe","createSelection","modifySelection","widget","toUnit","unit","LabeledInputView","_ckeditor_ckeditor5_utils_src_uid__WEBPACK_IMPORTED_MODULE_1__","_label_labelview__WEBPACK_IMPORTED_MODULE_2__","InputView","inputUid","statusUid","inputView","_createInputView","statusView","_createStatusView","errorText","infoText","ariaDescribedById","select","InputTextView","placeholder","readonly","aria-invalid","aria-describedby","setValue","submitHandler","AttributeCommand","_ckeditor_ckeditor5_core_src_command__WEBPACK_IMPORTED_MODULE_0__","attributeKey","_getValueFromFirstAllowedNode","checkAttributeInSelection","forceValue","setSelectionAttribute","removeSelectionAttribute","getValidRanges","checkAttribute","WidgetToolbarRepository","_ckeditor_ckeditor5_ui_src_panel_balloon_contextualballoon__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_ui_src_toolbar_toolbarview__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_ui_src_panel_balloon_balloonpanelview__WEBPACK_IMPORTED_MODULE_3__","balloonToolbar","isWidgetSelected","_toolbarDefinitions","_balloon","_updateToolbarsVisibility","toolbarConfig","toolbarId","getRelatedElement","fillFromConfig","componentFactory","maxRelatedElementDepth","deepestRelatedElement","deepestToolbarDefinition","relatedElement","relatedElementDepth","_isToolbarInBalloon","_hideToolbar","_isToolbarVisible","_showToolbar","toolbarDefinition","balloon","getBalloonPositionData","repositionContextualBalloon","toolbar","editingView","_log__WEBPACK_IMPORTED_MODULE_0__","ckeditor5_package_json__WEBPACK_IMPORTED_MODULE_1__","windowOrGlobal","CKEDITOR_VERSION","_baseGetAllKeys_js__WEBPACK_IMPORTED_MODULE_0__","_getSymbols_js__WEBPACK_IMPORTED_MODULE_1__","_keys_js__WEBPACK_IMPORTED_MODULE_2__","_","RootAttributeOperation","UpcastWriter","_documentfragment__WEBPACK_IMPORTED_MODULE_0__","_position__WEBPACK_IMPORTED_MODULE_4__","_range__WEBPACK_IMPORTED_MODULE_5__","_selection__WEBPACK_IMPORTED_MODULE_6__","removeChildren","oldElement","insertChild","_addClass","_removeClass","_setStyle","_removeStyle","_removeCustomProperty","lodash_es_identity","_apply","thisArg","nativeMax","_overRest","transform","arguments","otherArgs","lodash_es_constant","_baseSetToString","_defineProperty","string","HOT_COUNT","HOT_SPAN","nativeNow","Date","now","_setToString","lastCalled","stamp","remaining","_shortOut","_baseRest","_isIterateeCall","_isIndex","_createAssigner","assigner","sources","guard","assignIn","DataTransfer","nativeDataTransfer","files","kind","getAsFile","getFiles","_native","getData","setData","clipboardobserver_ClipboardObserver","handleInput","targetRanges","dropRange","eventinfo","dataTransfer","evtData","clipboardData","domDoc","clientX","clientY","caretRangeFromPoint","rangeParent","rangeOffset","getDropViewRange","smallPaddingElements","clipboard_Clipboard","modelDocument","onCopyCut","toView","getSelectedContent","method","_htmlDataProcessor","htmldataprocessor","fullMatch","spaces","normalizeClipboardData","plainTextToHtml","scrollToTheSelection","dataController","modelFragment","toModel","toData","viewToPlainText","childText","deleteContent","SwitchButtonView","_buttonview__WEBPACK_IMPORTED_MODULE_1__","toggleSwitchView","_createToggleView","Notification","alert","_showNotification","namespace","title","toTableWidget","getSelectedTableWidget","getTableWidgetAncestor","_commands_utils__WEBPACK_IMPORTED_MODULE_1__","isTableWidget","parentTable","BasicHtmlWriter","fragment","implementation","createHTMLDocument","htmldataprocessor_HtmlDataProcessor","_domParser","_domConverter","domconverter","_htmlWriter","getHtml","_toDom","freeGlobal","arg","_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__","_baseAssignValue_js__WEBPACK_IMPORTED_MODULE_0__","_eq_js__WEBPACK_IMPORTED_MODULE_1__","objValue","MAX_SAFE_INTEGER","reIsUint","_arrayPush_js__WEBPACK_IMPORTED_MODULE_0__","_isArray_js__WEBPACK_IMPORTED_MODULE_1__","symbolsFunc","objectToMap","DocumentSelection","_selection__WEBPACK_IMPORTED_MODULE_0__","_selection","isSimilar","setFocus","atomicChanges","changeIndexes","arr1","arr2","firstIndex","findFirstDifferenceIndex","lastIndexOld","lastIndexNew","oldArrayReversed","cutAndReverse","newArrayReversed","findChangeBoundaryIndexes","newLength","changeIndexesToAtomicChanges","newArray","changeIndexesToChanges","reverse","getBorderWidths","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","_nativeCreate","_hashClear","_hashDelete","HASH_UNDEFINED","_hashGet_hasOwnProperty","_hashGet","_hashHas_hasOwnProperty","_hashHas","_hashSet_HASH_UNDEFINED","_hashSet","Hash","_Hash","_mapCacheClear","hash","_isKeyable","_getMapData","_mapCacheDelete","_mapCacheGet","_mapCacheHas","_mapCacheSet","MapCache","_setCacheAdd","_setCacheHas","SetCache","_SetCache","_arraySome","_cacheHas","cache","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","_equalArrays","equalFunc","arrLength","othLength","seen","arrValue","othValue","compared","othIndex","_mapToArray","_setToArray","_equalByTag_COMPARE_PARTIAL_FLAG","_equalByTag_COMPARE_UNORDERED_FLAG","errorTag","_equalByTag","convert","_equalObjects_COMPARE_PARTIAL_FLAG","_equalObjects_hasOwnProperty","_equalObjects","objProps","objLength","skipCtor","objCtor","othCtor","_baseIsEqualDeep_COMPARE_PARTIAL_FLAG","arrayTag","_baseIsEqualDeep_hasOwnProperty","_baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","isTypedArray","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","_baseTimes","_baseIsArguments","isArguments_hasOwnProperty","lodash_es_isArguments","_arrayLikeKeys_hasOwnProperty","inherited","isArg","isBuff","isType","skipIndexes","typedArrayTags","_baseIsTypedArray","isLength","nodeIsTypedArray","Model","_ckeditor_ckeditor5_utils_src_mix__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_utils_src_observablemixin__WEBPACK_IMPORTED_MODULE_1__","EnterObserver","_ckeditor_ckeditor5_engine_src_view_observer_observer__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_engine_src_view_observer_domeventdata__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_utils_src_keyboard__WEBPACK_IMPORTED_MODULE_2__","once","isSoft","getOptimalPosition","positionedElementAncestor","parentElement","getPositionedAncestor","elementRect","bestPosition","limiterRect","getVisible","viewportRect","bestPositionRect","bestPositionName","maxLimiterIntersectArea","maxViewportIntersectArea","elementRectArea","positionName","positionRect","getPosition","limiterIntersectArea","viewportIntersectArea","limiterViewportIntersectRect","getIntersectionArea","setBestPosition","getBestPosition","getAbsoluteRectCoordinates","ancestorPosition","ancestorBorderWidths","getborderwidths","moveTo","CS_CONFIG","tokenUrl","uploadUrl","_isObjectLike_js__WEBPACK_IMPORTED_MODULE_1__","TooltipView","enablePlaceholder","documentPlaceholders","isDirectHost","updateDocumentPlaceholders","hidePlaceholder","placeholders","wasViewModified","updatePlaceholder","hostElement","getChildPlaceholderHostSubstitute","isEmptyish","selectionAnchor","needsPlaceholder","showPlaceholder","undoui_UndoUI","_addButton","undo_default","redo_default","Icon","execute","undo_Undo","undoediting","LabelView","imageloadobserver_ImageLoadObserver","observer","_observedElements","domRoot","_updateObservedElements","_fireEvents","modelToViewAttributeConverter","dispatcher","converter","consume","img","toViewElement","attributeNewValue","imageinsertcommand_ImageInsertCommand","src_command","src","imageediting_ImageEditing","allowWhere","allowAttributes","createImageViewElement","srcset","attributeOldValue","srcsetAttributeConverter","viewImage","attributeToAttribute","conversionResult","modelImage","convertChildren","viewFigureToModel","emptyElement","createEmptyElement","figure","createContainerElement","imagetextalternativecommand_ImageTextAlternativeCommand","imagetextalternativeediting_ImageTextAlternativeEditing","textalternativeformview_TextAlternativeFormView","src_view","labeledInput","_createLabeledInputView","saveButtonView","_createButton","check_default","cancelButtonView","cancel_default","_focusables","viewcollection","submithandler","v","button","labeledinputview","inputtextview","balloonpanelview","imagetextalternativeui_ImageTextAlternativeUI","contextualballoon","_createForm","_form","low_vision_default","_showForm","_hideForm","_isVisible","focusEditable","imagetextalternative_ImageTextAlternative","image_Image","filedialogbuttonview_FileDialogButtonView","_fileInputView","filedialogbuttonview_FileInputView","open","accept","multiple","isImageType","fetchLocalImage","image","imageSrc","fetch","resource","blob","mimeType","getImageMimeType","filename","File","createFileFromBlob","imageuploadui_ImageUploadUI","acceptedType","allowMultipleFiles","image_default","imagesToUpload","imageuploadprogress_ImageUploadProgress","encodeURIComponent","image_placeholder_default","uploadStatusChange","uploadId","fileRepository","filerepository","viewFigure","_startAppearEffect","_showPlaceholder","_hidePlaceholder","progressBar","_createProgressBar","setStyle","_showProgressBar","completeIcon","_showCompleteIcon","_removeUIElement","_hideProgressBar","_stopAppearEffect","viewImg","_getUIElement","_createPlaceholder","imageFigure","uniqueProperty","imageuploadcommand_ImageUploadCommand","filesToUpload","uploadImage","createLoader","imageuploadediting_ImageUploadEditing","notification_notification","isHtmlIncluded","images","toModelRange","fetchableImages","isLocalImage","upcastwriter","fetchableImage","changes","differ","getChanges","includeChangesInGraveyard","isInGraveyard","_readAndUpload","notification","setAttributes","uploadStatus","default","_parseAndSetSrcsetAttributeOnImage","clean","showWarning","destroyLoader","maxWidth","srcsetAttribute","isNaN","imageupload_ImageUpload","originalModule","webpackPolyfill","_isObjectLike_js__WEBPACK_IMPORTED_MODULE_0__","_isPlainObject_js__WEBPACK_IMPORTED_MODULE_1__","TOKEN_COOKIE_NAME","TOKEN_LENGTH","tokenCharset","getCsrfToken","token","parts","cookie","part","pair","decodeURIComponent","getCookie","randValues","crypto","getRandomValues","character","toUpperCase","generateToken","setCookie","uploadadapter_CKFinderUploadAdapter","url","uploadadapter_UploadAdapter","_initRequest","_initListeners","_sendRequest","xhr","XMLHttpRequest","responseType","genericError","response","lengthComputable","FormData","append","send","PendingActions","_plugin__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_utils_src_collection__WEBPACK_IMPORTED_MODULE_2__","_actions","action","hasAny","setDataInElement","HTMLTextAreaElement","ToolbarSeparatorView","g","ListView","_ckeditor_ckeditor5_utils_src_focustracker__WEBPACK_IMPORTED_MODULE_1__","_focuscycler__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_utils_src_keystrokehandler__WEBPACK_IMPORTED_MODULE_3__","ListItemView","ITALIC","italicui_ItalicUI","italic_default","italic_Italic","italicediting","BOLD","boldui_BoldUI","bold_default","bold_Bold","boldediting","allocUnsafe","copy","DataApiMixin","EditorUIView","_template__WEBPACK_IMPORTED_MODULE_1__","_renderBodyCollection","_bodyCollectionContainer","bodyElement","getDataFromElement","BoldEditing","_attributecommand__WEBPACK_IMPORTED_MODULE_1__","setAttributeProperties","isFormatting","attributeToElement","upcastAlso","font-weight","ItalicEditing","font-style","config_Config","configurations","defaultConfigurations","_config","define","_setObjectToTarget","_setToTarget","_getFromSource","isDefine","isPlainObject","cloneDeepWith","leaveDOMReferences","cloneConfig","configuration","rootNameSymbol","rooteditableelement_RootEditableElement","editableelement","_name","document_Document","documentselection","roots","_postFixers","postFixer","wasFixed","DEFAULT_PRIORITY","attributeelement_AttributeElement","_priority","_id","_clonesGroup","nonUiChildrenCount","emptyelement_EmptyElement","emptyelement_getFillerOffset","view_node","uielement_UIElement","uielement_getFillerOffset","injectUiElementHandling","domSelectionCollapsed","jumpedOverAnyUiElement","nextViewPosition","newDomPosition","jumpOverUiElement","downcastwriter_DowncastWriter","_cloneGroups","_setTo","_setFocus","attributeElement","containerelement","renderFunction","positionOrRange","view_position","_breakAttributes","_breakAttributesRange","view_range","move","positionOffset","positionParent","_removeFromClonedElementsGroup","mergeAttributes","mergeTextNodes","newPosition","validateNodesToInsert","errorContext","validNodesToInsert","validNode","isiterable","getParentContainer","_addToClonedElementsGroup","endPosition","rangeOrItem","validateRangeContainer","breakStart","breakEnd","parentContainer","mergePosition","walker","getWalker","rangeToRemove","countBefore","_hasNonUiChildren","_wrapPosition","_wrapRange","_unwrapChildren","groupName","view_selection","wrapElement","wrapPositions","isAttribute","isUI","_wrapAttributeElement","shouldABeOutsideB","newAttribute","_wrapChildren","offsetChange","unwrapElement","unwrapPositions","unwrapped","_unwrapAttributeElement","movePositionToTextNode","breakTextNode","fakePosition","createAttributeElement","wrapRange","wrap","toWrap","canBeJoined","getStyleNames","toUnwrap","removeStyle","forceSplitText","rangeStart","rangeEnd","isContainerOrFragment","offsetAfter","clonedNode","nodesToMove","group","getIdentity","textToMove","t1","t2","nodeBeforeLength","insertAt","nodeToInsert","removeChild","renderer_Renderer","domDocuments","markedAttributes","markedChildren","markedTexts","_inlineFiller","_fakeSelectionContainer","inlineFillerPosition","_updateChildrenMappings","_isSelectionInInlineFiller","_removeInlineFiller","_getInlineFillerPosition","_needsInlineFillerAtSelection","_updateAttrs","_updateChildren","_updateText","fillerDomPosition","view_filler","addInlineFiller","_updateSelection","_updateFocus","actualDomChildren","expectedDomChildren","_diffNodeLists","_findReplaceActions","counter","equal","insertIndex","deleteIndex","_updateElementMappings","firstPos","selectionPosition","domFillerNode","selectionParent","selectionOffset","isEditable","newDomText","actualText","expectedText","fastdiff","insertData","deleteData","domAttrKeys","viewAttrKeys","nodesToUnbind","_markDescendantTextToSync","domChildList","fakeSelectionContainer","childList","filterOutFakeSelectionContainer","src_diff","actualDomChild","expectedDomChild","actualDom","expectedDom","newActions","actualSlice","expectedSlice","areSimilar","_removeDomSelection","_removeFakeSelection","_updateFakeSelection","_updateDomSelection","removeAllRanges","selectNodeContents","addRange","bindFakeSelection","_domSelectionNeedsUpdate","childAtOffset","fixGeckoSelectionAfterBr","isDomSelectionCorrect","oldViewSelection","domSelectionToView","activeDomElement","domParentOrArray","nodeAfterFiller","fillerNode","node1","node2","isnode","lodash_es_isEqualWith","mutationobserver_MutationObserver","characterData","characterDataOldValue","subtree","renderer","_renderer","_domElements","_mutationObserver","MutationObserver","_onMutations","takeRecords","observe","enable","disconnect","domMutations","mutatedTexts","mutatedElements","mutation","_isBogusBrMutation","oldText","newText","viewMutations","mutatedText","markToSync","viewChildren","newViewChildren","sameNodes","oldChildren","newChildren","viewSelectionAnchor","viewSelectionFocus","child1","child2","forceRender","addedNode","removedNodes","addedNodes","keyobserver_KeyObserver","metaKey","fakeselectionobserver_FakeSelectionObserver","_fireSelectionChangeDoneDebounced","debounce","_isArrowKeyCode","_handleSelectionMove","newSelection","oldSelection","selectionobserver_SelectionObserver","mutationObserver","getObserver","_documents","WeakSet","_clearInfiniteLoopInterval","setInterval","_clearInfiniteLoop","_loopbackCounter","_handleSelectionChange","clearInterval","flush","newViewSelection","focusobserver_FocusObserver","_renderTimeoutId","selectedEditable","compositionobserver_CompositionObserver","isComposing","inputobserver_InputObserver","scrollViewportToShowTarget","viewportOffset","targetWindow","getWindow","currentWindow","currentFrame","firstAncestorToScroll","scrollAncestorsToShowRect","getParentElement","getRectRelativeToWindow","scrollWindowToShowRect","frameElement","targetShiftedDownRect","targetShiftedUpRect","dom_rect","excludeScrollbarsAndBorders","isAbove","isBelow","isLeftOf","isRightOf","getRect","parentWindow","firstRect","secondRect","isrange","relativeWindow","frame","frameRect","scrollAncestorsToShowTarget","view_View","domRoots","_initialDomRootAttributes","_observers","_ongoingChange","_postFixersInProgress","_renderingDisabled","_hasChangedSinceTheLastRendering","_writer","_render","viewRoot","initialDomRootAttributes","updateContenteditableAttribute","viewRangeToDom","isRenderingInProgress","callbackResult","_callPostFixers","flag","disableObservers","enableObservers","mapper_Mapper","_modelToViewMapping","_viewToModelMapping","_viewToModelLengthCallbacks","_markerNameToElements","viewContainer","_findPositionIn","viewBlock","modelOffset","_toModelOffset","model_position","elements","model_range","toModelPosition","toViewPosition","isPhantom","boundElements","getElementsWithSameId","viewElementName","lengthCallback","viewOffset","getModelLength","len","expectedOffset","lastLength","_moveViewPositionToTextNode","modelconsumable_ModelConsumable","_consumable","_textProxyRegistry","_normalizeConsumableType","textproxy","_getSymbolForTextProxy","itemConsumables","startMap","endMap","_addSymbolForTextProxy","downcastdispatcher_DowncastDispatcher","getMarkersToRemove","convertMarkerRemove","convertInsert","convertRemove","convertAttribute","getMarkersToAdd","convertMarkerAdd","_createInsertConsumable","_testAndFire","_clearConversionApi","_createConsumableForRange","markersAtSelection","getMarkersAtPosition","_createSelectionConsumable","marker","markerRange","getRange","shouldMarkerChangeBeConverted","markerName","containsItem","selection_Selection","model_node","anyNewRange","_removeAllRanges","directChange","_popRange","attributeKeys","model_element","visited","startBlock","getParentBlock","isUnvisitedBlockContainer","endBlock","selected","parentBlock","findAncestorBlock","limitStartPosition","limitEndPosition","_checkRange","hasParentLimit","isLimit","storePrefix","documentselection_LiveSelection","hasOwnRange","isGravityOverridden","getTopMostBlocks","containsEntireContent","_updateMarkers","_updateAttributes","_getStoredAttributes","overrideGravity","restoreGravity","startsWith","_model","_attributePriority","_fixGraveyardRangesData","_hasChangedRange","_overriddenGravityRegister","liveRange","_fixGraveyardSelection","_validateSelectionRange","changeParent","isNoLongerEmpty","storedAttributes","clearAttributesStoredInElement","_getDefaultRange","optionsOrPlaceOrOffset","overrideUid","src_uid","_prepareRange","liverange","fromRange","selectionRange","clearAll","newAttributes","tomap","_getSurroundingAttributes","oldAttributes","_setAttributesTo","changed","newKey","oldKey","getAttrsIfCharacter","removedRangeStart","positionCandidate","ConversionHelpers","dispatchers","_dispatchers","conversionHelper","lodash_es_cloneDeep","_baseClone","downcasthelpers_DowncastHelpers","normalizeToElementConfig","elementCreator","downcastElementToElement","modelValue","getFromAttributeCreator","oldViewElement","newViewElement","toViewRange","unwrap","downcastAttributeToElement","normalizeToAttributeConfig","attributeCreator","oldAttribute","changeAttribute","downcastAttributeToAttribute","isOpening","viewStartElement","viewEndElement","bindElementToMarker","insertUIElement","markerNameToElements","unbindElementsFromMarkerName","clearClonedElementsGroup","downcastMarkerToElement","highlightDescriptor","prepareDescriptor","createViewElementFromHighlightDescriptor","rangeAfterWrap","highlightText","highlightElement","viewHighlightElement","removeHighlight","downcastMarkerToHighlight","viewElementType","modelData","viewElementDefinition","createViewElementFromDefinition","modelAttributeValue","upcasthelpers_UpcastHelpers","upcastElementToElement","normalizeModelAttributeConfig","prepareToAttributeConverter","elementName","getViewElementNameFromConfig","upcastElementToAttribute","viewKey","keyName","normalizeViewAttributeKeyValueConfig","upcastAttributeToAttribute","oldModel","data-name","normalizeToMarkerConfig","upcastElementToMarker","view_matcher","matcherResult","getModelElement","splitResult","splitToAllowedParent","getSplitParts","cursorParent","prepareToElementConverter","viewAttributeKeyToCopy","defaultModelValue","modelKey","onlyViewNameIsDefined","modelAttribute","setAttributeOn","editingcontroller_EditingController","_disableRendering","convertChanges","convertSelection","convertSelectionChange","createText","modelEnd","unbindViewElement","brokenPosition","breakAttributes","plugincollection_PluginCollection","availablePlugins","_editor","_availablePlugins","_plugins","PluginConstructor","plugin","errorMsg","removePlugins","that","loading","pluginConstructors","mapToAvailableConstructors","removePluginConstructors","missingPlugins","pluginNameOrConstructor","getPluginConstructor","getMissingPluginNames","all","loadPlugin","initPlugins","RequiredPluginConstructorOrName","RequiredPluginConstructor","requiredBy","_add","instantiatePlugin","loadedPlugins","PluginConstructorOrName","promises","pluginInstance","plugin1","plugin2","commandcollection_CommandCollection","_commands","commandName","translate","language","translationKey","numberOfLanguages","CKEDITOR_TRANSLATIONS","hasTranslation","locale_Locale","_t","str","translatedString","ViewConsumable","_consumables","consumables","elementConsumables","viewconsumable_ViewElementConsumables","instance","consumablesFromElement","createFrom","_canConsumeName","_test","_consume","_revert","consumableName","schema_Schema","_sourceDefinitions","_attributeProperties","SchemaContext","getDefinition","itemName","_clearCache","_compiledDefinitions","_compile","getDefinitions","_checkContextMatch","attributeName","positionOrBaseElement","elementToMerge","checkMerge","retValue","getAttributeProperties","selectionOrRangeOrPosition","rangeCommonAncestor","getMinimalFlatRanges","convertToMinimalFlatRanges","_getValidRangesForRange","backwardWalker","forwardWalker","combineWalkers","removeDisallowedAttributes","compiledDefinitions","sourceRules","itemNames","compileBaseItemRule","compileAllowContentOf","compileAllowWhere","compileAllowAttributesOf","compileInheritPropertiesFrom","cleanUpAllowIn","cleanUpAllowAttributes","contextItemIndex","contextItem","getItem","allowIn","parentRule","mapContextItem","query","getNames","endsWith","sourceItemRules","itemRule","allowContentOf","allowAttributesOf","inheritTypesFrom","sourceItemRule","typeNames","copyTypes","copyProperty","inheritFrom","makeInheritAllWork","allowContentOfItemName","getAllowedChildren","allowedItem","allowWhereItemName","allowedIn","allowAttributeOfItem","inheritAttributes","inheritPropertiesOfItem","existingItems","itemToCheck","getValues","ctxItem","upcastdispatcher_UpcastDispatcher","_splitParts","_modelCursor","_convertItem","_convertChildren","_splitToAllowedParent","_getSplitParts","contextDefinition","createContextTree","store","documentFragment","_removeEmptyElements","modelItem","markerElements","markerElement","currentPosition","extractMarkersFromModelFragment","nextModelCursor","allowedParent","treeWalkerValue","originalPart","splitPart","_registerSplitPair","list","anyRemoved","datacontroller_DataController","dataProcessor","processor","_checkIfRootsExists","hasContent","ignoreWhitespaces","modelElementOrFragment","viewDocumentFragment","clearBindings","elementRange","intersection","_getMarkersRelativeToElement","version","initialData","main","modelRoot","parse","newData","viewElementOrFragment","rootNames","conversion_Conversion","downcastDispatchers","upcastDispatchers","_helpers","_downcast","_createConversionHelpers","isDowncast","_upcast","alias","_getAllUpcastDefinitions","elementToAttribute","helpers","_getUpcastDefinition","upcastAlsoItem","Batch","op","detachoperation_DetachOperation","operation_operation","operation_utils","rootelement_RootElement","_doc","writer_Writer","model_documentfragment","_assertWriterUsedCorrectly","isSameTree","insertoperation","addOperation","applyOperation","rangeRootPosition","usingOperation","updateMarker","addMarker","itemOrRange","setAttributeOnRange","setAttributeOnItem","removeAttributesFromItem","_addOperationForAffectedMarkers","moveoperation","flat","applyRemoveOperation","_merge","_mergeDetached","createPositionFromPath","merge","mergeoperation","renameOperation","renameoperation","firstSplitElement","firstCopyElement","splitoperation","elementOrString","shiftedRange","applyMarkerOperation","_set","markerOrName","currentMarker","_refresh","hasUsingOperationDefined","affectsDataDefined","currentRange","updatedRange","managedUsingOperations","keyOrObjectOrIterable","_setSelectionAttribute","keyOrIterableOfKeys","_removeSelectionAttribute","_overrideGravity","_restoreGravity","storeKey","_getStoreAttributeKey","_currentWriter","isAffected","elementBefore","elementAfter","affectedInLeftElement","affectedInRightElement","affectedAfterLeftElement","affectedBeforeRightElement","valueBefore","valueAfter","lastSplitPosition","attributeoperation","previousValue","rootattributeoperation","markeroperation","rootA","rootB","differ_Differ","markerCollection","_markerCollection","_changesInElement","_elementSnapshots","_changedMarkers","_changeCount","_cachedChanges","_cachedChangesWithGraveyard","_isInInsertedElement","_markInsert","_markAttribute","sourceParentInserted","targetParentInserted","_markRemove","getMarkersIntersectingRange","bufferMarkerChange","graveyardParent","mergedIntoElement","buffered","diffSet","snapshotChildren","elementChildren","_getChildrenSnapshot","_generateActionsFromChanges","_getInsertDiff","_getRemoveDiff","elementAttributes","snapshotAttributes","_getAttributesDiff","changeCount","prevDiff","thisDiff","isConsecutiveTextRemove","isConsecutiveTextAdd","isConsecutiveAttributeChange","_changesInGraveyardFilter","changeItem","_markChange","_removeAllNestedChanges","_makeSnapshot","_getChangesForElement","_handleChange","inc","nodesToHandle","old","incEnd","oldEnd","intersectionLength","howManyAfter","attributePart","diffs","snapshot","oldChildrenLength","oldChildrenHandled","repeat","posInGy","rangeInGy","History","_operations","_undoPairs","_undoneOperations","undoneOperation","undoingOperation","isInsideSurrogatePair","isHighSurrogateHalf","isLowSurrogateHalf","isInsideCombinedSymbol","isCombiningMark","graveyardName","model_document_Document","history","_hasSelectionChangedFromTheLastChangeBlock","createRoot","bufferOperation","_hasDocumentChangedFromTheLastChangeBlock","hasDataChanges","reset","defaultRoot","_getDefaultRoot","validateTextNodePosition","rangeBoundary","markercollection_MarkerCollection","markercollection_Marker","oldMarker","hasChanged","_attachLiveRange","_managedUsingOperations","_affectsData","_destroyMarker","prefix","_detachLiveRange","_liveRange","insertcontent_Insertion","canMergeWith","_filterAttributesOf","_affectedStart","_affectedEnd","parentContext","_handleNode","isFirst","isLast","nodeToSelect","_handleObject","_checkAndSplitToAllowedPosition","_mergeSiblingsOf","_handleDisallowedNode","_tryAutoparagraphing","handleNodes","livePos","liveposition","fromPosition","_setAffectedBoundaries","mergeLeft","_canMergeLeft","mergeRight","_canMergeRight","mergePosLeft","mergePosRight","livePosition","_getAllowedIn","tempPos","selRange","doNotResetEntireContent","shouldEntireContentBeReplacedWithParagraph","insertParagraph","replaceEntireContentWithParagraph","startPos","endPos","leaveUnmerged","mergeBranches","startParent","endParent","leftPos","rightPos","rangeToCheck","checkCanBeMerged","parentToRemove","collapseSelectionAt","isTextAllowed","isParagraphAllowed","shouldAutoparagraph","validSelectionRange","doNotAutoparagraph","wordBoundaryCharacters","searchEnd","getSearchRange","tryExtendingTo","setSelectionFocus","isAtWordBoundary","isAtNodeBoundary","boundaryChar","getCorrectWordBreakPosition","getCorrectPosition","offsetToCheck","removeRangeContent","parentsToCheck","itemRange","parentToCheck","removeRange","injectSelectionPostFixer","correctedRange","tryFixingRange","fixedRanges","selectionStart","selectionEnd","selectionPostFixer","originalPosition","nearestSelectionRange","fixedPosition","tryFixingCollapsedRange","isTextAllowedOnStart","isTextAllowedOnEnd","startLimitElement","endLimitElement","startIsOnBlock","endIsOnBlock","checkSelectionOnNonLimitElements","isStartObject","fixedStart","isEndObject","fixedEnd","isStartInLimit","isEndInLimit","bothInSameParent","expandStart","isInObject","expandEnd","findOutermostLimitAncestor","tryFixingNonCollapsedRage","startingNode","isLimitNode","model_Model","_pendingChanges","_validate","addChildCheck","childDefinition","_runPendingChanges","batchOrType","_execute","insertion","nodesToInsert","getSelectionRange","affectedRange","getAffectedRange","frag","commonPath","commonParent","getNodeByPath","flatSubtreeRange","appendText","leftExcessRange","rangeOrElement","intersectingMarker","ret","currentBatch","callbackReturnValue","_handleChangeBlock","editingkeystrokehandler_EditingKeystrokeHandler","editor_Editor","builtinPlugins","defaultConfig","state","addAlias","extraPlugins","init","readyPromise","ChangeBuffer","limit","isLocked","_changeCallback","_batch","_reset","_selectionChangeCallback","createBatch","ignoreLock","inputcommand_InputCommand","undoStepSize","_buffer","textInsertions","resultRange","isCollapsedRange","lock","unlock","injectUnsafeKeystrokesHandling","latestCompositionSelection","inputCommand","handleUnsafeKeystroke","isSelectionUnchanged","keyData","safeKeycodes","isSafeKeystroke","deleteSelectionContent","isFlatSelection","getSingleTextNodeChange","output","lastOperation","pushLast","isContinuationOf","expected","diffToChanges","compareChildNodes","oldChild","newChild","injecttypingmutationshandling_MutationHandler","mutations","containerChildrenMutated","_handleContainerChildrenMutations","_handleTextMutation","_handleTextNodeInsertion","mutationsCommonAncestor","commonAncestor","getMutationsContainer","domMutationCommonAncestor","freshDomConverter","modelFromCurrentDom","currentModel","modelFromDomChildren","currentModelChildren","lastDomChild","lastCurrentChild","isSafeForTextMutation","diffResult","firstChangeAt","insertions","deletions","calculateChanges","modelSelectionRange","insertText","viewPos","modelPos","insertedText","lastChangeAt","input_Input","handle","injectTypingMutationsHandling","deletecommand_DeleteCommand","_shouldEntireContentBeReplacedWithParagraph","sequence","_replaceEntireContentWithParagraph","limitElementFirstChild","deleteobserver_DeleteObserver","fireViewDeleteEvent","originalEvent","domeventdata","hasWordModifier","inputType","selectionToRemove","delete_Delete","deleteCommandParams","domSelectionAfterDeletion","typing_Typing","nooperation_NoOperation","transformations","setTransformation","OperationA","OperationB","transformationFunction","aGroup","noUpdateTransformation","getTransformation","aIsStrong","aWasUndone","bWasUndone","abRelation","baRelation","transformSets","operationsA","operationsB","nextTransformIndex","nextBaseVersionA","nextBaseVersionB","originalOperationsACount","originalOperationsBCount","contextFactory","transform_ContextFactory","useRelations","forceWeakRemove","setOriginalOperations","opA","indexB","opB","newOpsA","getContext","newOpsB","updateRelation","newOpA","padWithNoOps","brokenOperationsACount","brokenOperationsBCount","updateBaseVersions","_history","_useRelations","_forceWeakRemove","_originalOperations","_relations","takeFrom","originalOperation","_setRelation","affectedLeft","affectedRight","side","wasInLeftElement","wasStartBeforeMergedElement","wasEndBeforeMergedElement","wasInRightElement","_wasUndone","_getRelation","originalOp","wasUndone","isUndoneOperation","origB","undoneB","getUndoneOperation","origA","relationsA","relation","_getComplementaryAttributeOperations","insertOperation","insertValue","_moveTargetIntoMovedRange","_makeMoveOperationsFromRanges","hasSameParentAs","moveOp","_breakRangeByMoveOperation","aNewRange","aToGraveyard","bToGraveyard","removedRange","mergeInside","mergeSplittingElement","getReversed","aCompB","shouldSpread","rightRange","movesGraveyardElement","gyMoveSource","splitNodesMoveSource","gyMoveTarget","gyMove","splitNodesMoveTargetPath","splitNodesMoveTarget","splitNodesMove","renamePath","splitPath","additionalSplit","rangeToMove","gyElementMoved","newParentPosition","newTargetPath","howManyRemoved","aInGraveyard","bInGraveyard","newPositionPath","basecommand_BaseCommand","_createdBatches","docSelection","selectionRanges","transformSelectionRange","batchToUndo","undoingBatch","operationsToUndo","operationToUndo","nextBaseVersion","historyOperations","getOperations","reversedOperations","setOperationAsUndone","getTransformedByOperations","undocommand_UndoCommand","batchIndex","_undo","_restoreSelection","redocommand_RedoCommand","redoingBatch","undoediting_UndoEditing","_batchRegistry","_undoCommand","_redoCommand","isRedoBatch","isUndoBatch","addBatch","clearStack","undoneBatch","entercommand_EnterCommand","isSelectionEmpty","splitBlock","isContainedWithinOneElement","enterBlock","splitPos","enter_Enter","enterobserver","editableuiview_EditableUIView","_editableElement","_hasExternalElement","_editingView","_updateIsFocusedClasses","update","updateAfterRender","inlineeditableuiview_InlineEditableUIView","role","componentfactory_ComponentFactory","_components","originalName","getNormalized","editorui_EditorUI","_editableElementsMap","ckeditorInstance","_editableElements","editorUI","enableToolbarKeyboardFocus","origin","originKeystrokeHandler","originFocusTracker","beforeFocus","afterBlur","normalizeToolbarConfig","shiftentercommand_ShiftEnterCommand","insertBreak","softBreakAction","anchorPos","isInsideLimitElement","breakLineElement","shiftenter_ShiftEnter","essentials_Essentials","clipboard","typing","undo","headingcommand_HeadingCommand","modelElements","heading","checkCanBecomeHeading","headingediting_HeadingEditing","defaultModelElement","option","_addDefaultH1Conversion","enterCommand","getLocalizedOptions","localizedTitles","Paragraph","Heading 1","Heading 2","Heading 3","Heading 4","Heading 5","Heading 6","_ckeditor_ckeditor5_utils_src_dom_setdatainelement__WEBPACK_IMPORTED_MODULE_1__","ElementApiMixin","attachToForm","updateSourceElement","form","originalSubmit","onSubmit","submit","listcommand_ListCommand","_checkEnabled","checkCanBecomeListItem","turnOff","currentIndent","indent","newIndent","listIndent","lowestIndent","_fixType","listType","listItem","startingItem","indentcommand_IndentCommand","indentDirection","_indentBy","itemsToChange","lastItem","getListItemFillerOffset","hasOnlyLists","modelViewInsertion","injectViewList","createViewListItemElement","viewList","generateLiInUl","modelViewRemove","breakContainer","viewListPrev","mergeViewLists","hoistNestedLists","modelViewChangeType","listName","modelViewChangeIndent","modelViewSplitOnInsert","removeStart","removeEnd","previousList","mergePos","modelViewMergeAfter","viewItemPrev","viewItemNext","viewModelConverter","conversionStore","listItemModel","convertedChild","wasSplit","findNextListItem","viewToModelListItemChildrenConverter","cleanList","cleanListItem","foundList","firstNode","modelToViewPosition","topmostViewList","modelIndentPasteFixer","refItem","indentChange","getSiblingListItem","sameIndent","smallerIndent","itemIndent","firstList","secondList","mergeContainers","injectedItem","injectedList","prevItem","positionAfterUiElements","prevView","breakPosition","nextViewList","lastSubChild","modelChild","nextIndent","modelRemoveStartPosition","viewRemoveStartPosition","viewRemovedItem","prevModelItem","foo","prevIndent","prevViewList","listediting_ListEditing","itemToListHead","applied","_addListToFix","listHead","_fixListIndents","_fixListTypes","maxIndent","fixBy","typesStack","modelChangePostFixer","registerViewToModelLength","getViewListItemLength","modelNode","modelLength","viewToModelPosition","firstPosition","getCommandExecuter","outdent","registerChildCommand","listui_ListUI","numberedlist_default","bulletedlist_default","list_List","BASE64_HEADER_REG_EXP","FileUploader","fileOrData","apiAddress","_isBase64","base64","sliceSize","contentType","base64Data","atob","byteArrays","byteNumbers","charCodeAt","Blob","_base64ToBlob","_token","_apiAddress","_prepareRequest","_attachXHRListeners","setRequestHeader","onError","statusCode","xhrResponse","formData","fileuploader","DEFAULT_OPTIONS","refreshInterval","autoRefresh","Token","tokenUrlOrRefreshToken","initValue","defaultRefreshToken","_options","_startRefreshing","_refreshToken","_stopRefreshing","_refreshInterval","token_token","cloudservices_CloudServices","optionName","cloudservicesuploadadapter_CloudServicesUploadAdapter","cloudServices","_uploadGateway","_UploadGateway","Adapter","uploadGateway","fileUploader","easyimage_EasyImage","src_image","imageupload","headingui_HeadingUI","src_utils","defaultTitle","dropdownTooltip","titles","itemDefinitions","headingCommand","paragraphCommand","withText","commandValue","isOn","areEnabled","para","whichModel","heading_Heading","headingediting","TableToolbar","_utils__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_widget_src_widgettoolbarrepository__WEBPACK_IMPORTED_MODULE_2__","widgetToolbarRepository","tableContentToolbarItems","tableToolbarItems","upcastTable","viewTable","rows","headingRows","headingColumns","tableMeta","headRows","bodyRows","firstTheadElement","tableChild","trs","tr","headingCols","scanRowForHeadingColumns","scanTable","table","row","upcastTableCell","viewTableCell","th","TableWalker","startRow","endRow","includeSpanned","column","_skipRows","_row","_column","_cell","_spannedCells","_isOverEndRow","_isSpanned","currentColumn","outValue","_formatOutValue","_shouldSkipRow","_shouldSkipColumn","cell","colspan","rowspan","_recordSpans","cellIndex","rowIsBelowStartRow","rowIsMarkedAsSkipped","isCurrentColumn","isPreviousThatOverlapsColumn","columnToUpdate","_markSpannedCell","rowToUpdate","downcastInsertTable","asWidget","figureElement","tableElement","tableWidget","ckeditor5_table_src_utils","tableWalker","tableAttributes","viewRows","tableWalkerValue","tableSection","getOrCreateTableSection","getSectionName","tableRow","trElement","createTr","createViewTableCellElement","downcastInsertRow","getViewTable","downcastInsertCell","rowIndex","downcastTableHeadingRowsChange","oldRows","newRows","rowsToMove","isBetween","moveViewRowsToTableSection","renameViewTableCell","removeTableSectionIfEmpty","renameViewTableCellIfRequired","lower","upper","downcastTableHeadingColumnsChange","oldColumns","newColumns","lastColumnToCheck","desiredCellElementName","viewCell","renamedCell","createEditableElement","getCellElementName","cellElementName","cellElement","isSingleParagraph","hasAnyAttribute","innerParagraph","paragraphInsertPosition","fakeParagraph","sectionName","viewTableSection","getExistingTableSectionElement","tableChildElement","createTableSection","viewTableRow","inserttablecommand_InsertTableCommand","validParent","getInsertTableParent","tableUtils","columns","createTable","insertrowcommand_InsertRowCommand","order","tableParent","insertRows","at","insertcolumncommand_InsertColumnCommand","getCellLocation","insertColumns","splitcellcommand_SplitCellCommand","isHorizontally","splitCellHorizontally","splitCellVertically","mergecellcommand_MergeCellCommand","isHorizontal","cellToMerge","_getMergeableCell","isMergeNext","cellToExpand","cellToRemove","removedTableCellRow","mergeTableCells","spanAttribute","cellSpan","cellToMergeSpan","removedRowIndex","overlapsRemovedRow","removeEmptyRow","horizontalCell","cellOnLeft","cellOnRight","leftCellColumn","rightCellColumn","leftCellSpan","getHorizontalCell","currentCellRowSpan","rowOfCellToMerge","tableMap","mergeColumn","cellToMergeData","getVerticalCell","span","removerowcommand_RemoveRowCommand","currentRow","cellsToMove","rowspanToSet","targetRow","previousCell","cellToMove","removecolumncommand_RemoveColumnCommand","getColumns","removedColumn","setheaderrowcommand_SetHeaderRowCommand","isInTable","_isInHeading","currentHeadingRows","selectionRow","headingRowsToSet","cellsToSplit","getOverlappingCells","splitHorizontally","newRowspan","spanToSet","columnIndex","tableCellPosition","setheadercolumncommand_SetHeaderColumnCommand","currentHeadingColumns","selectionColumn","headingColumnsToSet","tableutils_TableUtils","createEmptyRows","rowsToInsert","tableIterator","cellsToInsert","columnsToInsert","tableColumns","createCells","skipRow","numberOfCells","newCellsSpan","updatedSpan","breakSpanEvenly","newCellsAttributes","splitCellColumn","cellsToUpdate","splitCellRow","cellColumn","tableCellToInsert","cells","injectTableLayoutPostFixer","analyzedTables","isTableAttributeEntry","fixTableCellsRowspan","fixTableRowsSizes","tableLayoutPostFixer","cellsToTrim","maxRows","isInHeader","rowLimit","findCellsToTrim","rowsLengths","lengths","getRowsLengths","tableSize","maxColumns","isAttributeType","injectTableCellContentPostFixer","fixTableCellContent","fixTable","fixTableRow","tableCellContentsPostFixer","textNodes","injectTableCellPostFixer","elementsToCheck","elementsWithChangedAttributes","isSpanOrP","isTdOrTh","changedChildren","childrenToCheck","getElementsToCheck","ensureProperElementName","selectionNeedsFix","updateRangesInViewSelection","tableCellPostFixer","currentViewElement","modelParagraph","expectedViewElementName","isOnlyChild","hasAttributes","getExpectedElementName","renamedViewElement","tableediting_TableEditing","_handleTabOnSelectedTable","_getTabHandler","currentRowIndex","currentCellIndex","isFirstCellInRow","isLastCellInRow","isLastRow","cellToFocus","nextRow","previousRow","inserttableview_InsertTableView","boxView","inserttableview_TableSizeGridBoxView","_highlightGridBoxes","mouseover","tableui_TableUI","dropdown_utils","table_default","insertTableView","bindIsOn","_prepareDropdown","table_column_default","table_row_default","table_merge_cell_default","addListOption","src_model","table_Table","modelToViewUrlAttributeConverter","registry","mediaViewElement","getMediaViewElement","createMediaFigureElement","getSelectedMediaModelWidget","insertMedia","mediaElement","mediaembedcommand_MediaEmbedCommand","selectedMedia","mediaPlaceholderIconViewBox","mediaregistry_MediaRegistry","providers","extraProviders","removedProviders","removeProviders","providerDefinitions","provider","_getMedia","getViewElement","mediaregistry_Media","previewRenderer","html","subPattern","_getUrlMatches","rawUrl","_getValidUrl","_match","_previewRenderer","renderForEditingView","renderMediaPreview","mediaHtml","_getPreviewHtml","_getPlaceholderHtml","tooltipview","media_placeholder_default","rel","href","outerHTML","mediaembedediting_MediaEmbedEditing","toMediaWidget","viewMedia","hasMedia","data-oembed-url","URL_REGEXP","automediaembed_AutoMediaEmbed","_timeoutId","_positionToInsert","leftLivePosition","rightLivePosition","_embedMediaBetweenPositions","leftPosition","rightPosition","mediaRegistry","urlRange","mediaformview_MediaFormView","validators","urlInputView","_createUrlInput","_validators","resetFormStatus","validator","_urlInputViewInfoDefault","_urlInputViewInfoTip","mediaembedui_MediaEmbedUI","getFormValidators","dropdown","_setUpDropdown","_setUpForm","closeUI","media_default","isValid","mediaembed_MediaEmbed","ImageToolbar","_image_utils__WEBPACK_IMPORTED_MODULE_1__","findLinkRange","_findBound","lookBack","lastNode","linkcommand_LinkCommand","manualDecorators","manualDecorator","_getDecoratorStateFromModel","manualDecoratorIds","truthyManualDecorators","falsyManualDecorators","linkRange","decoratorName","unlinkcommand_UnlinkCommand","linkCommand","rangesToUnlink","_baseSlice","_castSlice","reHasUnicode","_hasUnicode","_asciiToArray","rsAstral","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsSeq","rsSymbol","reUnicode","_unicodeToArray","_stringToArray","_arrayMap","INFINITY","symbolToString","_baseToString","baseToString","isSymbol","lodash_es_toString","lodash_es_upperFirst","strSymbols","chr","trailing","_createCaseFirst","ATTRIBUTE_WHITESPACES","SAFE_URL","createLinkElement","linkElement","ensureSafeUrl","isSafeUrl","AutomaticDecorators","_definitions","ManualDecorator","TwoStepCaretHandler","_modelSelection","_overrideUid","_isNextGravityRestorationSkipped","_isGravityOverridden","isAtBoundary","_hasSelectionAttribute","isBetweenDifferentValues","_preventCaretMovement","isAtStartBoundary","isAtEndBoundary","_setSelectionAttributeFromTheNodeBefore","isStepAfterTheAttributeBoundary","_skipNextAutomaticGravityRestoration","overrideSelectionGravity","restoreSelectionGravity","isAttrBefore","isAttrAfter","HIGHLIGHT_CLASS","DECORATOR_AUTOMATIC","DECORATOR_MANUAL","EXTERNAL_LINKS_REGEXP","linkediting_LinkEditing","addTargetToExternalLinks","linkDecorators","decorators","localizedDecoratorsLabels","Open in a new tab","Downloadable","decorator","getLocalizedDecorators","retArray","normalizeDecorators","_enableAutomaticDecorators","_enableManualDecorators","twoStepCaretHandler","arrowRightPressed","arrowLeftPressed","isMovementHandled","handleForwardMovement","handleBackwardMovement","bindTwoStepCaretToAttribute","_setupLinkHighlight","automaticDecoratorDefinitions","automaticDecorators","getDispatcher","manualDecoratorDefinitions","manualDecoratorName","highlightedLinks","clickobserver_ClickObserver","linkformview_LinkFormView","_manualDecoratorSwitches","_createManualDecoratorSwitches","_createFormChildren","classList","accumulator","switchButton","switches","additionalButtonsView","linkactionsview_LinkActionsView","previewButtonView","_createPreviewButton","unlinkButtonView","unlink_default","editButtonView","pencil_default","linkKeystroke","linkui_LinkUI","actionsView","_createActionsView","formView","_createFormView","_createToolbarLinkButton","_enableUserBalloonInteractions","unlinkCommand","_addFormView","_hideUI","getDecoratorSwitchesState","_closeFormView","_showUI","icons_link_default","_getSelectedLinkElement","_areActionsVisible","_isUIVisible","_isUIInPanel","_areActionsInPanel","_getBalloonPositionData","_isFormInPanel","restoreManualDecoratorStates","_removeFormView","forceVisible","_addActionsView","_startUpdatingUI","prevSelectedLink","prevSelectionParent","getSelectionParent","selectedLink","targetLink","findLinkElementAncestor","startLink","endLink","isLinkElement","link_Link","imagestylecommand_ImageStyleCommand","defaultStyle","isDefault","attributeValue","getStyleByName","defaultStyles","full","object_full_width_default","object_right_default","alignLeft","object_left_default","alignCenter","object_center_default","alignRight","defaultIcons","center","normalizeImageStyles","configuredStyles","_normalizeStyle","extendedStyle","imagestyleediting_ImageStyleEditing","modelToViewConverter","newStyle","oldStyle","modelToViewStyleAttribute","filteredStyles","viewFigureElement","modelImageElement","viewToModelStyleAttribute","imagestyleui_ImageStyleUI","localizedDefaultStylesTitles","Full size image","Side image","Left aligned image","Centered image","Right aligned image","translatedStyles","translateStyles","componentName","imagestyle_ImageStyle","blockquotecommand_BlockQuoteCommand","blocksToQuote","findQuote","checkCanBeQuoted","_applyQuote","_removeQuote","getRangesOfBlockGroups","groupRange","positionBefore","quotesToMerge","quote","currentQuote","nextQuote","elementOrPosition","nextBlock","isBQAllowed","isBlockAllowedInBQ","blockquoteediting_BlockQuoteEditing","blockquoteui_BlockQuoteUI","quote_default","blockquote_BlockQuote","getCaptionFromImage","imageModelElement","matchImageCaption","imagecaptionediting_ImageCaptionEditing","_insertMissingModelCaptionElement","captionModelToView","createCaptionForEditing","placeholderText","captionElementCreator","_fixCaptionVisibility","_updateCaptionVisibility","lastCaption","_lastSelectedCaption","viewCaption","modelCaption","getParentCaption","showCaption","hideCaptionIfEmpty","viewModified","nodeFinder","imagesWithoutCaption","nestedItem","appendElement","captionElement","insertViewCaptionAndBind","caption","imagecaption_ImageCaption","blockautoformatediting_BlockAutoformatEditing","callbackOrCommand","InlineAutoformatEditing","testRegexpOrCallback","attributeOrCallback","regExp","testCallback","formatCallback","format","1","leftDel","2","3","rightDel","delStart","delEnd","rangesToFormat","validRanges","getText","testOutput","testOutputToRanges","rangesToRemove","arrays","autoformat_Autoformat","_addListAutoformats","_addBasicStylesAutoformats","_addHeadingAutoformats","_addBlockQuoteAutoformats","boldCallback","getCallbackFunctionForInlineAutoformat","italicCallback","codeCallback","level","ClassicEditor","_ckeditor_ckeditor5_editor_classic_src_classiceditor__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_essentials_src_essentials__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_adapter_ckfinder_src_uploadadapter__WEBPACK_IMPORTED_MODULE_2__","_ckeditor_ckeditor5_autoformat_src_autoformat__WEBPACK_IMPORTED_MODULE_3__","_ckeditor_ckeditor5_basic_styles_src_bold__WEBPACK_IMPORTED_MODULE_4__","_ckeditor_ckeditor5_basic_styles_src_italic__WEBPACK_IMPORTED_MODULE_5__","_ckeditor_ckeditor5_block_quote_src_blockquote__WEBPACK_IMPORTED_MODULE_6__","_ckeditor_ckeditor5_ckfinder_src_ckfinder__WEBPACK_IMPORTED_MODULE_7__","_ckeditor_ckeditor5_easy_image_src_easyimage__WEBPACK_IMPORTED_MODULE_8__","_ckeditor_ckeditor5_heading_src_heading__WEBPACK_IMPORTED_MODULE_9__","_ckeditor_ckeditor5_image_src_image__WEBPACK_IMPORTED_MODULE_10__","_ckeditor_ckeditor5_image_src_imagecaption__WEBPACK_IMPORTED_MODULE_11__","_ckeditor_ckeditor5_image_src_imagestyle__WEBPACK_IMPORTED_MODULE_12__","_ckeditor_ckeditor5_image_src_imagetoolbar__WEBPACK_IMPORTED_MODULE_13__","_ckeditor_ckeditor5_image_src_imageupload__WEBPACK_IMPORTED_MODULE_14__","_ckeditor_ckeditor5_link_src_link__WEBPACK_IMPORTED_MODULE_15__","_ckeditor_ckeditor5_list_src_list__WEBPACK_IMPORTED_MODULE_16__","_ckeditor_ckeditor5_media_embed_src_mediaembed__WEBPACK_IMPORTED_MODULE_17__","_ckeditor_ckeditor5_paragraph_src_paragraph__WEBPACK_IMPORTED_MODULE_18__","_ckeditor_ckeditor5_paste_from_office_src_pastefromoffice__WEBPACK_IMPORTED_MODULE_19__","_ckeditor_ckeditor5_table_src_table__WEBPACK_IMPORTED_MODULE_20__","_ckeditor_ckeditor5_table_src_tabletoolbar__WEBPACK_IMPORTED_MODULE_21__","contentToolbar","ElementReplacer","_replacedElements","normalizeSafariSpaceSpans","htmlString","parseHtml","domParser","normalizedHtml","normalizeSpacing","cleanContentAfterBody","htmlDocument","innerTextLength","normalizeSpacerunSpans","bodyString","bodyView","documentToView","stylesObject","styleTags","getElementsByTagName","sheet","cssRules","extractStyles","transformListItemLikeElementsIntoLists","itemLikeElements","itemLikeElementsMatcher","mso-list","itemData","getListItemData","findAllItemLikeElements","currentList","itemLikeElement","previousItem","currentItem","isNewListNeeded","listStyle","listLikeItem","listStyleTypeRegex","listStyleMatch","listStyleType","listStyleTypeMatch","detectListStyle","insertNewEmptyList","bulletMatcher","removeBulletElement","transformElementIntoListItem","replaceImagesSourceWithBase64","rtfData","upcastWriter","shapesIds","imageElementsMatcher","imgs","shapes","shape","removeAllImgElementsRepresentingShapes","shapeElementsMatcher","prevSiblingName","findAllShapesIds","removeAllShapeElements","findAllImageElementsWithLocalSource","imageElements","imagesHexSources","newSrc","_convertHexToBase64","hex","replaceImagesFileSourceWithInlineRepresentation","regexPictureHeader","regexPicture","imageType","extractImageDataFromRtf","hexString","btoa","pastefromoffice_PasteFromOffice","pasteFromOfficeProcessed","isWordInput","_normalizeWordInput","ckfinderui_CKFinderUI","browse_files_default","ckfindercommand_CKFinderCommand","imageCommand","openerMethod","chooseFiles","originalOnInit","onInit","finder","toArray","links","linkFile","getUrl","imagesUrls","request","insertImages","resizedUrl","CKFinder","urls","ckfinderediting_CKFinderEditing","ckfinder_CKFinder","uploadadapter","classiceditorui_ClassicEditorUI","editorui","_toolbarConfig","normalizetoolbarconfig","_elementReplacer","elementreplacer","replacementElement","editingRoot","setEditableElement","attachDomRoot","_initPlaceholder","_initToolbar","restore","detachDomRoot","stickyPanel","viewportTopOffset","enabletoolbarkeyboardfocus","boxededitoruiview_BoxedEditorUIView","editoruiview","_voiceLabelView","_createVoiceLabel","lang","voiceLabel","labelview","tounit","stickypanelview_StickyPanelView","_contentPanelPlaceholder","isSticky","_panelRect","_contentPanel","_hasViewportTopOffset","_isStickyToTheLimiter","limiterBottomOffset","marginLeft","_checkIfShouldBeSticky","_limiterRect","isActive","_marginLeft","classiceditoruiview_ClassicEditorUIView","inlineeditableuiview","classiceditor_ClassicEditor","editor_editor","sourceElementOrData","attachtoform","getdatafromelement","getInitialData","dataapimixin","elementapimixin","_baseClone_js__WEBPACK_IMPORTED_MODULE_0__","lodash_es_now","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","lodash_es_toNumber","isBinary","FUNC_ERROR_TEXT","nativeMin","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","TypeError","invokeFunc","time","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","unescape","sourceRoot","HTMLIFrameElement","contentDocument","head","u","refs","f","base","css","media","sourceMap","h","insertInto","before","nonce","nc","singleton","URL","createObjectURL","revokeObjectURL","convertToAbsoluteUrls","styleSheet","cssText","DEBUG","Boolean","hmr","locals","__REACT_DEVTOOLS_GLOBAL_HOOK__","checkDCE","framesToPop","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","w","E","isReactComponent","setState","forceUpdate","isPureReactComponent","S","C","T","N","__self","__source","P","defaultProps","$$typeof","_owner","z","R","O","D","keyPrefix","M","I","=",":","A","L","U","W","F","Children","only","createRef","Component","PureComponent","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_context","forwardRef","lazy","_ctor","_status","_result","memo","compare","useCallback","useContext","useEffect","useImperativeHandle","useDebugValue","useLayoutEffect","useMemo","useReducer","useRef","useState","Fragment","StrictMode","Suspense","cloneElement","createFactory","isValidElement","unstable_ConcurrentMode","unstable_Profiler","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentDispatcher","ReactCurrentOwner","H","B","extractEvents","eventTypes","phasedRegistrationNames","registrationName","dependencies","currentTarget","_dispatchListeners","_dispatchInstances","isPropagationStopped","isPersistent","release","injectEventPluginOrder","injectEventPluginsByName","stateNode","disabled","dispatchConfig","_targetInst","V","$","Y","X","animationend","animationiteration","animationstart","transitionend","G","Q","q","animation","transition","Z","K","J","ee","te","ne","re","oe","ie","ae","le","se","nativeEvent","Interface","isDefaultPrevented","defaultPrevented","returnValue","ce","eventPool","ue","destructor","pe","getPooled","cancelBubble","persist","eventPhase","bubbles","cancelable","timeStamp","isTrusted","de","fe","he","me","ge","documentMode","ve","ye","be","ke","beforeInput","bubbled","captured","compositionEnd","compositionStart","compositionUpdate","xe","we","Ee","_e","Se","which","Ce","Te","Ne","Pe","ze","Re","Oe","De","Me","Ie","je","Ae","color","date","datetime","datetime-local","email","month","password","tel","week","Le","nodeName","Ue","srcElement","correspondingUseElement","We","Fe","He","_valueTracker","stopTracking","Be","checked","Ve","$e","Ye","Xe","Ge","Qe","qe","Ze","Ke","Je","et","tt","nt","rt","ot","it","lt","displayName","st","_debugOwner","_debugSource","fileName","lineNumber","ct","ut","pt","dt","ft","acceptsBooleans","attributeNamespace","mustUseProperty","ht","mt","gt","vt","yt","bt","defaultChecked","_wrapperState","initialChecked","kt","initialValue","controlled","xt","wt","Et","St","Ct","Tt","Nt","Pt","zt","Rt","Ot","Dt","detachEvent","Mt","It","attachEvent","jt","At","Lt","Ut","_isInputEventSupported","Wt","Ft","Alt","Control","Meta","Shift","Ht","getModifierState","Bt","Vt","$t","Yt","Xt","Gt","screenX","screenY","pageX","pageY","relatedTarget","fromElement","toElement","movementX","movementY","Qt","pointerId","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","qt","mouseEnter","mouseLeave","pointerEnter","pointerLeave","Zt","alternate","Kt","Jt","en","tn","effectTag","nn","rn","sibling","animationName","elapsedTime","pseudoElement","an","ln","sn","charCode","cn","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","un","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","pn","location","dn","fn","touches","targetTouches","changedTouches","hn","mn","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","gn","vn","yn","bn","isInteractive","kn","isInteractiveTopLevelEventType","xn","wn","En","targetInst","containerInfo","topLevelType","_n","Sn","Tn","Nn","Cn","Pn","zn","Rn","On","Dn","Mn","In","jn","An","contentEditable","Un","Wn","Fn","Hn","Bn","Vn","$n","Yn","onSelect","Xn","Gn","defaultSelected","Qn","dangerouslySetInnerHTML","qn","Zn","Kn","SimpleEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin","Jn","mathml","er","nr","rr","or","namespaceURI","MSApp","execUnsafeLocalFunction","ir","nodeValue","ar","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","lr","sr","cr","setProperty","ur","menuitem","area","br","col","embed","hr","keygen","link","meta","param","track","wbr","pr","dr","fr","blur","mr","gr","vr","autoFocus","yr","__html","kr","xr","unstable_scheduleCallback","wr","unstable_cancelCallback","Er","_r","Sr","Cr","Tr","Nr","Pr","zr","Rr","Or","Dr","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Mr","childContextTypes","Ir","jr","Ar","Lr","getChildContext","Ur","__reactInternalMemoizedMergedChildContext","Wr","Fr","Hr","Br","$r","elementType","pendingProps","contextDependencies","memoizedState","updateQueue","memoizedProps","lastEffect","firstEffect","nextEffect","childExpirationTime","expirationTime","Yr","Xr","Gr","Qr","qr","Zr","Kr","pendingChildren","Jr","didError","earliestPendingTime","latestPendingTime","no","eo","latestPingedTime","earliestSuspendedTime","latestSuspendedTime","nextExpirationTimeToWorkOn","ro","oo","io","baseState","ao","_reactInternalFiber","wl","qi","Qa","payload","Ba","Ki","Ka","Vi","$i","lo","shouldComponentUpdate","so","contextType","Hi","co","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","uo","na","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","po","fo","_stringRef","ho","mo","go","vo","yo","bo","ko","xo","wo","Eo","_o","So","Co","To","No","Po","zo","Ro","Oo","Do","Mo","Io","jo","Ao","Lo","Uo","Wo","Fo","Ho","Bo","Vo","$o","Yo","Xo","Go","Qo","qo","Zo","pi","ci","Ko","Jo","queue","baseUpdate","ei","ti","ni","dispatch","wi","eagerReducer","eagerState","ri","deps","oi","ii","ai","li","si","readContext","di","fi","hi","mi","gi","vi","yi","bi","ki","xi","Ei","_i","Fi","Di","Si","Ci","Ni","Ti","Pi","Xi","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","zi","getDerivedStateFromError","Ri","pendingContext","Oi","timedOutAt","fallback","Ii","ji","Ai","Li","Ui","Wi","observedBits","Bi","Yi","Gi","firstUpdate","lastUpdate","firstCapturedUpdate","lastCapturedUpdate","firstCapturedEffect","lastCapturedEffect","Qi","Zi","Ji","ea","ta","ra","oa","ia","aa","la","sa","ca","ua","onClick","onclick","pa","da","fa","Ga","ha","ma","componentWillUnmount","ya","ga","va","_reactRootContainer","ba","wasMultiple","Za","El","ka","xa","Ol","wa","componentDidCatch","La","componentStack","Ea","_a","Sa","Ca","Ta","Na","Pa","za","Ra","Oa","Da","Ma","Ia","ja","Aa","Ua","Wa","Fa","__reactInternalSnapshotBeforeUpdate","Ha","Va","pendingCommitExpirationTime","focusedElem","compareDocumentPosition","Ln","ol","ul","Nl","unstable_runWithPriority","unstable_NormalPriority","finishedWork","$a","Ya","hydrate","hidden","unstable_observedBits","Mi","Xa","Cl","maxDuration","pingCache","qa","xl","unstable_getCurrentPriorityLevel","unstable_ImmediatePriority","unstable_UserBlockingPriority","unstable_LowPriority","unstable_IdlePriority","ll","vl","gl","Ja","tl","nl","rl","il","al","sl","cl","pl","dl","fl","unstable_now","hl","ml","yl","bl","kl","Tl","timeout","timeoutHandle","Pl","_l","nextScheduledRoot","zl","Sl","unstable_shouldYield","_onComplete","Rl","firstBatch","_expirationTime","_defer","Dl","Ml","Il","jl","Al","Ll","Ul","_callbacks","_hasChildren","_didComplete","Wl","_didCommit","_onCommit","Fl","_internalRoot","Hl","Bl","legacy_renderSubtreeIntoContainer","Vl","commit","unmount","$l","createPortal","findDOMNode","unstable_renderSubtreeIntoContainer","unmountComponentAtNode","unstable_createPortal","unstable_batchedUpdates","unstable_interactiveUpdates","flushSync","unstable_createRoot","unstable_flushControlled","Events","findFiberByHostInstance","isDisabled","supportsFiber","inject","onCommitFiberRoot","onCommitFiberUnmount","overrideProps","currentDispatcherRef","findHostInstanceByFiber","bundleType","rendererPackageName","Yl","Xl","priorityLevel","requestAnimationFrame","cancelAnimationFrame","performance","_schedMock","MessageChannel","port2","port1","onmessage","postMessage","unstable_next","unstable_wrapCallback","unstable_continueExecution","unstable_pauseExecution","unstable_getFirstCallbackNode","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsNull","thatReturnsThis","thatReturnsArgument","bool","any","arrayOf","instanceOf","objectOf","oneOf","oneOfType","exact","isRequired","checkPropTypes","PropTypes","classNames","setPrototypeOf","__proto__","ReferenceError","empty","identifier","offsetParent","lastX","lastY","scale","touch","mouse","dragging","NaN","touchIdentifier","handleDragStart","onMouseDown","allowAnyClick","onStart","enableUserSelectHack","getElementById","handleDrag","handleDragStop","grid","round","onDrag","MouseEvent","createEvent","initMouseEvent","onStop","onMouseUp","onTouchStart","onTouchEnd","touchAction","propTypes","onDragStart","dragged","bounds","slackX","slackY","HTMLElement","offsetLeft","paddingLeft","offsetTop","paddingTop","marginTop","paddingRight","marginRight","paddingBottom","marginBottom","onDragStop","defaultPosition","isElementSVG","SVGElement","axis","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","DraggableCore","protocol","host","pathname","userSelect","MsUserSelect","cursor","topRight","bottomRight","bottomLeft","topLeft","replaceStyles","onResizeStart","MozUserSelect","WebkitUserSelect","abs","isResizing","resizeCursor","propsSize","original","updateExtendsProps","onMouseMove","extendsProps","flexWrap","minWidth","TouchEvent","resizable","lockAspectRatio","lockAspectRatioExtraHeight","lockAspectRatioExtraWidth","maxHeight","minHeight","resizeRatio","getParentSize","snap","calculateNewSize","onResize","onResizeStop","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","handleComponent","sizeStyle","boxSizing","backgroundColor","renderResizer","defaultSize","getMaxSizesFromProps","getOffsetFromParent","getDraggablePosition","draggable","getParent","getSelfElement","getOffsetHeight","getOffsetWidth","updateSize","disableDragging","dragHandleClassName","dragAxis","dragGrid","resizeHandleStyles","resizeHandleClasses","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","localStorage","setItem","showCompactText","activeNode","handleClick","treeProps","presentation","cssClass","dontRenderAttributeValue","dontRenderValue","isEnd","htmlFor","onChange","isChecked","_onEditorEventCallback","startListeningToEditor","stopListeningToEditor","editorEventObserverConfig","handleCompactTextChange","getEditorModelTree","currentRootName","editorRoots","onRootChange","currentEditorNode","splitVertically","handleTabClick","activeTab","definitions","onTabChange","contentBefore","contentAfter","handleSidePaneResize","maxSidePaneWidth","readOnly","header","groupEnd","getInspectedEditorNodeInfo","editorNode","inspectedNode","getEditorSelectionInfo","handleRootChange","handlePaneChange","handleTreeClick","showTypes","handleShowTypesChange","getEditorViewTree","customProperties","getCustomProperties","getCommandStates","currentCommandName","getEditorCommandInfo","inspectedCommandName","editors","currentEditorName","handleEditorChange","handleToggleCollapseClick","handleInspectorResize","isUp","CKEDITOR_INSPECTOR_VERSION","_editors","_inspectorRef","_updateState","_ckeditor_ckeditor5_build_classic_src_ckeditor__WEBPACK_IMPORTED_MODULE_0__","_ckeditor_ckeditor5_inspector__WEBPACK_IMPORTED_MODULE_1__","_ckeditor_ckeditor5_inspector__WEBPACK_IMPORTED_MODULE_1___default","_ckeditor_ckeditor5_cloud_services_tests_utils_cloud_services_config__WEBPACK_IMPORTED_MODULE_2__","getViewportTopOffsetConfig"],"mappings":"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","file":"framework/development-tools/inspector/snippet.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 400);\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/ckeditorerror\n */\n\n/**\n * URL to the documentation with error codes.\n */\nexport const DOCUMENTATION_URL =\n\t'https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html';\n\n/**\n * The CKEditor error class.\n *\n * All errors will be shortened during the minification process in order to reduce the code size.\n * Therefore, all error messages should be documented in the same way as those in {@link module:utils/log}.\n *\n * Read more in the {@link module:utils/log} module.\n *\n * @extends Error\n */\nexport default class CKEditorError extends Error {\n\t/**\n\t * Creates an instance of the CKEditorError class.\n\t *\n\t * Read more about error logging in the {@link module:utils/log} module.\n\t *\n\t * @param {String} message The error message in an `error-name: Error message.` format.\n\t * During the minification process the \"Error message\" part will be removed to limit the code size\n\t * and a link to this error documentation will be added to the `message`.\n\t * @param {Object|null} context A context of the error by which the {@link module:watchdog/watchdog~Watchdog watchdog}\n\t * is able to determine which editor crashed. It should be an editor instance or a property connected to it. It can be also\n\t * a `null` value if the editor should not be restarted in case of the error (e.g. during the editor initialization).\n\t * The error context should be checked using the `areConnectedThroughProperties( editor, context )` utility\n\t * to check if the object works as the context.\n\t * @param {Object} [data] Additional data describing the error. A stringified version of this object\n\t * will be appended to the error message, so the data are quickly visible in the console. The original\n\t * data object will also be later available under the {@link #data} property.\n\t */\n\tconstructor( message, context, data ) {\n\t\tmessage = attachLinkToDocumentation( message );\n\n\t\tif ( data ) {\n\t\t\tmessage += ' ' + JSON.stringify( data );\n\t\t}\n\n\t\tsuper( message );\n\n\t\t/**\n\t\t * @type {String}\n\t\t */\n\t\tthis.name = 'CKEditorError';\n\n\t\t/**\n\t\t * A context of the error by which the Watchdog is able to determine which editor crashed.\n\t\t *\n\t\t * @type {Object|null}\n\t\t */\n\t\tthis.context = context;\n\n\t\t/**\n\t\t * The additional error data passed to the constructor. Undefined if none was passed.\n\t\t *\n\t\t * @type {Object|undefined}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\t/**\n\t * Checks if the error is of the `CKEditorError` type.\n\t */\n\tis( type ) {\n\t\treturn type === 'CKEditorError';\n\t}\n}\n\n/**\n * Attaches link to the documentation at the end of the error message.\n *\n * @param {String} message Message to be logged.\n * @returns {String}\n */\nexport function attachLinkToDocumentation( message ) {\n\tconst matchedErrorName = message.match( /^([^:]+):/ );\n\n\tif ( !matchedErrorName ) {\n\t\treturn message;\n\t}\n\n\treturn message + ` Read more: ${ DOCUMENTATION_URL }#error-${ matchedErrorName[ 1 ] }\\n`;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/plugin\n */\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The base class for CKEditor plugin classes.\n *\n * @implements module:core/plugin~PluginInterface\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor instance.\n\t\t *\n\t\t * Note that most editors implement the {@link module:core/editor/editorwithui~EditorWithUI} interface in addition\n\t\t * to the base {@link module:core/editor/editor~Editor} interface. However, editors with an external UI\n\t\t * (i.e. Bootstrap-based) or a headless editor may not implement the {@link module:core/editor/editorwithui~EditorWithUI}\n\t\t * interface.\n\t\t *\n\t\t * Because of above, to make plugins more universal, it is recommended to split features into:\n\t\t *  - The \"editing\" part that only uses the {@link module:core/editor/editor~Editor} interface.\n\t\t *  - The \"UI\" part that uses both the {@link module:core/editor/editor~Editor} interface and\n\t\t *  the {@link module:core/editor/editorwithui~EditorWithUI} interface.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor} #editor\n\t\t */\n\t\tthis.editor = editor;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n}\n\nmix( Plugin, ObservableMixin );\n\n/**\n * The base interface for CKEditor plugins.\n *\n * In its minimal form it can be a simple function (it will be used as a constructor) that accepts\n * {@link module:core/editor/editor~Editor the editor} as a parameter.\n * It can also implement a few methods which, when present, will be used to properly initialize and destroy the plugin.\n *\n *\t\t// A simple plugin that enables a data processor.\n *\t\tfunction MyPlugin( editor ) {\n *\t\t\teditor.data.processor = new MyDataProcessor();\n *\t\t}\n *\n * In most cases, however, you will want to inherit from the {@link module:core/plugin~Plugin} class which implements the\n * {@link module:utils/observablemixin~ObservableMixin} and is, therefore, more convenient:\n *\n *\t\tclass MyPlugin extends Plugin {\n *\t\t\tinit() {\n *\t\t\t\t// `listenTo()` and `editor` are available thanks to `Plugin`.\n *\t\t\t\t// By using `listenTo()` you will ensure that the listener is removed when\n *\t\t\t\t// the plugin is destroyed.\n *\t\t\t\tthis.listenTo( this.editor.data, 'ready', () => {\n *\t\t\t\t\t// Do something when the data is ready.\n *\t\t\t\t} );\n *\t\t\t}\n *\t\t}\n *\n * @interface PluginInterface\n */\n\n/**\n * Creates a new plugin instance. This is the first step of the plugin initialization.\n * See also {@link #init} and {@link #afterInit}.\n *\n * A plugin is always instantiated after its {@link module:core/plugin~PluginInterface.requires dependencies} and the\n * {@link #init} and {@link #afterInit} methods are called in the same order.\n *\n * Usually, you will want to put your plugin's initialization code in the {@link #init} method.\n * The constructor can be understood as \"before init\" and used in special cases, just like\n * {@link #afterInit} serves the special \"after init\" scenarios (e.g.the code which depends on other\n * plugins, but which does not {@link module:core/plugin~PluginInterface.requires explicitly require} them).\n *\n * @method #constructor\n * @param {module:core/editor/editor~Editor} editor\n */\n\n/**\n * An array of plugins required by this plugin.\n *\n * To keep the plugin class definition tight it is recommended to define this property as a static getter:\n *\n *\t\timport Image from './image.js';\n *\n *\t\texport default class ImageCaption {\n *\t\t\tstatic get requires() {\n *\t\t\t\treturn [ Image ];\n *\t\t\t}\n *\t\t}\n *\n * @static\n * @readonly\n * @member {Array.<Function>|undefined} module:core/plugin~PluginInterface.requires\n */\n\n/**\n * An optional name of the plugin. If set, the plugin will be available in\n * {@link module:core/plugincollection~PluginCollection#get} by its\n * name and its constructor. If not, then only by its constructor.\n *\n * The name should reflect the constructor name.\n *\n * To keep the plugin class definition tight it is recommended to define this property as a static getter:\n *\n *\t\texport default class ImageCaption {\n *\t\t\tstatic get pluginName() {\n *\t\t\t\treturn 'ImageCaption';\n *\t\t\t}\n *\t\t}\n *\n * Note: The native `Function.name` property could not be used to keep the plugin name because\n * it will be mangled during code minification.\n *\n * Naming a plugin is necessary to enable removing it through the\n * {@link module:core/editor/editorconfig~EditorConfig#removePlugins `config.removePlugins`} option.\n *\n * @static\n * @readonly\n * @member {String|undefined} module:core/plugin~PluginInterface.pluginName\n */\n\n/**\n * The second stage (after plugin {@link #constructor}) of plugin initialization.\n * Unlike the plugin constructor this method can be asynchronous.\n *\n * A plugin's `init()` method is called after its {@link module:core/plugin~PluginInterface.requires dependencies} are initialized,\n * so in the same order as constructors of these plugins.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #init\n * @returns {null|Promise}\n */\n\n/**\n * The third (and last) stage of plugin initialization. See also {@link #constructor} and {@link #init}.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #afterInit\n * @returns {null|Promise}\n */\n\n/**\n * Destroys the plugin.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #destroy\n * @returns {null|Promise}\n */\n\n/**\n * Array of loaded plugins.\n *\n * @typedef {Array.<module:core/plugin~PluginInterface>} module:core/plugin~LoadedPlugins\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/range\n */\n\nimport Position from './position';\nimport TreeWalker from './treewalker';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\n\n/**\n * Represents a range in the model tree.\n *\n * A range is defined by its {@link module:engine/model/range~Range#start} and {@link module:engine/model/range~Range#end}\n * positions.\n *\n * You can create range instances via its constructor or the `createRange*()` factory methods of\n * {@link module:engine/model/model~Model} and {@link module:engine/model/writer~Writer}.\n */\nexport default class Range {\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * @param {module:engine/model/position~Position} start Start position.\n\t * @param {module:engine/model/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t */\n\tconstructor( start, end = null ) {\n\t\t/**\n\t\t * Start position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position}\n\t\t */\n\t\tthis.start = Position._createAt( start );\n\n\t\t/**\n\t\t * End position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position}\n\t\t */\n\t\tthis.end = end ? Position._createAt( end ) : Position._createAt( start );\n\n\t\t// If the range is collapsed, treat in a similar way as a position and set its boundaries stickiness to 'toNone'.\n\t\t// In other case, make the boundaries stick to the \"inside\" of the range.\n\t\tthis.start.stickiness = this.isCollapsed ? 'toNone' : 'toNext';\n\t\tthis.end.stickiness = this.isCollapsed ? 'toNone' : 'toPrevious';\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link module:engine/model/item~Item items} that are in this range and returns\n\t * them together with additional information like length or {@link module:engine/model/position~Position positions},\n\t * grouped as {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t * It iterates over all {@link module:engine/model/textproxy~TextProxy text contents} that are inside the range\n\t * and all the {@link module:engine/model/element~Element}s that are entered into when iterating over this range.\n\t *\n\t * This iterator uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range\n\t * and `ignoreElementEnd` option set to `true`.\n\t *\n\t * @returns {Iterable.<module:engine/model/treewalker~TreeWalkerValue>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tyield* new TreeWalker( { boundaries: this, ignoreElementEnd: true } );\n\t}\n\n\t/**\n\t * Returns whether the range is collapsed, that is if {@link #start} and\n\t * {@link #end} positions are equal.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.start.isEqual( this.end );\n\t}\n\n\t/**\n\t * Returns whether this range is flat, that is if {@link #start} position and\n\t * {@link #end} position are in the same {@link module:engine/model/position~Position#parent}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isFlat() {\n\t\tconst startParentPath = this.start.getParentPath();\n\t\tconst endParentPath = this.end.getParentPath();\n\n\t\treturn compareArrays( startParentPath, endParentPath ) == 'same';\n\t}\n\n\t/**\n\t * Range root element.\n\t *\n\t * @type {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.start.root;\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/model/position~Position position}.\n\t *\n\t * @param {module:engine/model/position~Position} position Position to check.\n\t * @returns {Boolean} `true` if given {@link module:engine/model/position~Position position} is contained\n\t * in this range,`false` otherwise.\n\t */\n\tcontainsPosition( position ) {\n\t\treturn position.isAfter( this.start ) && position.isBefore( this.end );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link ~Range range}.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to check.\n\t * @param {Boolean} [loose=false] Whether the check is loose or strict. If the check is strict (`false`), compared range cannot\n\t * start or end at the same position as this range boundaries. If the check is loose (`true`), compared range can start, end or\n\t * even be equal to this range. Note that collapsed ranges are always compared in strict mode.\n\t * @returns {Boolean} `true` if given {@link ~Range range} boundaries are contained by this range, `false` otherwise.\n\t */\n\tcontainsRange( otherRange, loose = false ) {\n\t\tif ( otherRange.isCollapsed ) {\n\t\t\tloose = false;\n\t\t}\n\n\t\tconst containsStart = this.containsPosition( otherRange.start ) || ( loose && this.start.isEqual( otherRange.start ) );\n\t\tconst containsEnd = this.containsPosition( otherRange.end ) || ( loose && this.end.isEqual( otherRange.end ) );\n\n\t\treturn containsStart && containsEnd;\n\t}\n\n\t/**\n\t * Checks whether given {@link module:engine/model/item~Item} is inside this range.\n\t *\n\t * @param {module:engine/model/item~Item} item Model item to check.\n\t */\n\tcontainsItem( item ) {\n\t\tconst pos = Position._createBefore( item );\n\n\t\treturn this.containsPosition( pos ) || this.start.isEqual( pos );\n\t}\n\n\t/**\n\t * Two ranges are equal if their {@link #start} and {@link #end} positions are equal.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges are equal, `false` otherwise.\n\t */\n\tisEqual( otherRange ) {\n\t\treturn this.start.isEqual( otherRange.start ) && this.end.isEqual( otherRange.end );\n\t}\n\n\t/**\n\t * Checks and returns whether this range intersects with given range.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges intersect, `false` otherwise.\n\t */\n\tisIntersecting( otherRange ) {\n\t\treturn this.start.isBefore( otherRange.end ) && this.end.isAfter( otherRange.start );\n\t}\n\n\t/**\n\t * Computes which part(s) of this {@link ~Range range} is not a part of given {@link ~Range range}.\n\t * Returned array contains zero, one or two {@link ~Range ranges}.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet otherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 5 ] ) );\n\t *\t\tlet transformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has no ranges because `otherRange` contains `range`\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 3 ] ) );\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has one range: from [ 3 ] to [ 4, 0, 1 ]\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 3 ] ), model.createPositionFromPath( root, [ 4 ] ) );\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has two ranges: from [ 2, 7 ] to [ 3 ] and from [ 4 ] to [ 4, 0, 1 ]\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to differentiate against.\n\t * @returns {Array.<module:engine/model/range~Range>} The difference between ranges.\n\t */\n\tgetDifference( otherRange ) {\n\t\tconst ranges = [];\n\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect.\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the start to the middle of this range.\n\t\t\t\tranges.push( new Range( this.start, otherRange.start ) );\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the middle of this range to the end.\n\t\t\t\tranges.push( new Range( otherRange.end, this.end ) );\n\t\t\t}\n\t\t} else {\n\t\t\t// Ranges do not intersect, return the original range.\n\t\t\tranges.push( new Range( this.start, this.end ) );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an intersection of this {@link ~Range range} and given {@link ~Range range}.\n\t * Intersection is a common part of both of those ranges. If ranges has no common part, returns `null`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet otherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 2 ] ) );\n\t *\t\tlet transformed = range.getIntersection( otherRange ); // null - ranges have no common part\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 3 ] ), model.createPositionFromPath( root, [ 5 ] ) );\n\t *\t\ttransformed = range.getIntersection( otherRange ); // range from [ 3 ] to [ 4, 0, 1 ]\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to check for intersection.\n\t * @returns {module:engine/model/range~Range|null} A common part of given ranges or `null` if ranges have no common part.\n\t */\n\tgetIntersection( otherRange ) {\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect, so a common range will be returned.\n\t\t\t// At most, it will be same as this range.\n\t\t\tlet commonRangeStart = this.start;\n\t\t\tlet commonRangeEnd = this.end;\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means thaNt we have to\n\t\t\t\t// shrink common range to the given range start.\n\t\t\t\tcommonRangeStart = otherRange.start;\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// shrink common range to the given range end.\n\t\t\t\tcommonRangeEnd = otherRange.end;\n\t\t\t}\n\n\t\t\treturn new Range( commonRangeStart, commonRangeEnd );\n\t\t}\n\n\t\t// Ranges do not intersect, so they do not have common part.\n\t\treturn null;\n\t}\n\n\t/**\n\t * Computes and returns the smallest set of {@link #isFlat flat} ranges, that covers this range in whole.\n\t *\n\t * See an example of a model structure (`[` and `]` are range boundaries):\n\t *\n\t *\t\troot                                                            root\n\t *\t\t |- element DIV                         DIV             P2              P3             DIV\n\t *\t\t |   |- element H                   H        P1        f o o           b a r       H         P4\n\t *\t\t |   |   |- \"fir[st\"             fir[st     lorem                               se]cond     ipsum\n\t *\t\t |   |- element P1\n\t *\t\t |   |   |- \"lorem\"                                              ||\n\t *\t\t |- element P2                                                   ||\n\t *\t\t |   |- \"foo\"                                                    VV\n\t *\t\t |- element P3\n\t *\t\t |   |- \"bar\"                                                   root\n\t *\t\t |- element DIV                         DIV             [P2             P3]             DIV\n\t *\t\t |   |- element H                   H       [P1]       f o o           b a r        H         P4\n\t *\t\t |   |   |- \"se]cond\"            fir[st]    lorem                               [se]cond     ipsum\n\t *\t\t |   |- element P4\n\t *\t\t |   |   |- \"ipsum\"\n\t *\n\t * As it can be seen, letters contained in the range are: `stloremfoobarse`, spread across different parents.\n\t * We are looking for minimal set of flat ranges that contains the same nodes.\n\t *\n\t * Minimal flat ranges for above range `( [ 0, 0, 3 ], [ 3, 0, 2 ] )` will be:\n\t *\n\t *\t\t( [ 0, 0, 3 ], [ 0, 0, 5 ] ) = \"st\"\n\t *\t\t( [ 0, 1 ], [ 0, 2 ] ) = element P1 (\"lorem\")\n\t *\t\t( [ 1 ], [ 3 ] ) = element P2, element P3 (\"foobar\")\n\t *\t\t( [ 3, 0, 0 ], [ 3, 0, 2 ] ) = \"se\"\n\t *\n\t * **Note:** if an {@link module:engine/model/element~Element element} is not wholly contained in this range, it won't be returned\n\t * in any of the returned flat ranges. See in the example how `H` elements at the beginning and at the end of the range\n\t * were omitted. Only their parts that were wholly in the range were returned.\n\t *\n\t * **Note:** this method is not returning flat ranges that contain no nodes.\n\t *\n\t * @returns {Array.<module:engine/model/range~Range>} Array of flat ranges covering this range.\n\t */\n\tgetMinimalFlatRanges() {\n\t\tconst ranges = [];\n\t\tconst diffAt = this.start.getCommonPath( this.end ).length;\n\n\t\tconst pos = Position._createAt( this.start );\n\t\tlet posParent = pos.parent;\n\n\t\t// Go up.\n\t\twhile ( pos.path.length > diffAt + 1 ) {\n\t\t\tconst howMany = posParent.maxOffset - pos.offset;\n\n\t\t\tif ( howMany !== 0 ) {\n\t\t\t\tranges.push( new Range( pos, pos.getShiftedBy( howMany ) ) );\n\t\t\t}\n\n\t\t\tpos.path = pos.path.slice( 0, -1 );\n\t\t\tpos.offset++;\n\t\t\tposParent = posParent.parent;\n\t\t}\n\n\t\t// Go down.\n\t\twhile ( pos.path.length <= this.end.path.length ) {\n\t\t\tconst offset = this.end.path[ pos.path.length - 1 ];\n\t\t\tconst howMany = offset - pos.offset;\n\n\t\t\tif ( howMany !== 0 ) {\n\t\t\t\tranges.push( new Range( pos, pos.getShiftedBy( howMany ) ) );\n\t\t\t}\n\n\t\t\tpos.offset = offset;\n\t\t\tpos.path.push( 0 );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/treewalker~TreeWalker TreeWalker} instance with this range as a boundary.\n\t *\n\t * For example, to iterate over all items in the entire document root:\n\t *\n\t *\t\t// Create a range spanning over the entire root content:\n\t *\t\tconst range = editor.model.createRangeIn( editor.model.document.getRoot() );\n\t *\n\t *\t\t// Iterate over all items in this range:\n\t *\t\tfor ( const value of range.getWalker() ) {\n\t *\t\t\tconsole.log( value.item );\n\t *\t\t}\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @param {module:engine/model/position~Position} [options.startPosition]\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/model/item~Item items} that are in this range and returns\n\t * them.\n\t *\n\t * This method uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range and `ignoreElementEnd` option\n\t * set to `true`. However it returns only {@link module:engine/model/item~Item model items},\n\t * not {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/model/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @method getItems\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/model/item~Item>}\n\t */\n\t* getItems( options = {} ) {\n\t\toptions.boundaries = this;\n\t\toptions.ignoreElementEnd = true;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/model/position~Position positions} that are boundaries or\n\t * contained in this range.\n\t *\n\t * This method uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range. However it returns only\n\t * {@link module:engine/model/position~Position positions}, not {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/model/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/model/position~Position>}\n\t */\n\t* getPositions( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tyield treeWalker.position;\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.nextPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Returns a range that is a result of transforming this range by given `operation`.\n\t *\n\t * **Note:** transformation may break one range into multiple ranges (for example, when a part of the range is\n\t * moved to a different part of document tree). For this reason, an array is returned by this method and it\n\t * may contain one or more `Range` instances.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to transform range by.\n\t * @returns {Array.<module:engine/model/range~Range>} Range which is the result of transformation.\n\t */\n\tgetTransformedByOperation( operation ) {\n\t\tswitch ( operation.type ) {\n\t\t\tcase 'insert':\n\t\t\t\treturn this._getTransformedByInsertOperation( operation );\n\t\t\tcase 'move':\n\t\t\tcase 'remove':\n\t\t\tcase 'reinsert':\n\t\t\t\treturn this._getTransformedByMoveOperation( operation );\n\t\t\tcase 'split':\n\t\t\t\treturn [ this._getTransformedBySplitOperation( operation ) ];\n\t\t\tcase 'merge':\n\t\t\t\treturn [ this._getTransformedByMergeOperation( operation ) ];\n\t\t}\n\n\t\treturn [ new Range( this.start, this.end ) ];\n\t}\n\n\t/**\n\t * Returns a range that is a result of transforming this range by multiple `operations`.\n\t *\n\t * @see ~Range#getTransformedByOperation\n\t * @param {Iterable.<module:engine/model/operation/operation~Operation>} operations Operations to transform the range by.\n\t * @returns {Array.<module:engine/model/range~Range>} Range which is the result of transformation.\n\t */\n\tgetTransformedByOperations( operations ) {\n\t\tconst ranges = [ new Range( this.start, this.end ) ];\n\n\t\tfor ( const operation of operations ) {\n\t\t\tfor ( let i = 0; i < ranges.length; i++ ) {\n\t\t\t\tconst result = ranges[ i ].getTransformedByOperation( operation );\n\n\t\t\t\tranges.splice( i, 1, ...result );\n\t\t\t\ti += result.length - 1;\n\t\t\t}\n\t\t}\n\n\t\t// It may happen that a range is split into two, and then the part of second \"piece\" is moved into first\n\t\t// \"piece\". In this case we will have incorrect third range, which should not be included in the result --\n\t\t// because it is already included in the first \"piece\". In this loop we are looking for all such ranges that\n\t\t// are inside other ranges and we simply remove them.\n\t\tfor ( let i = 0; i < ranges.length; i++ ) {\n\t\t\tconst range = ranges[ i ];\n\n\t\t\tfor ( let j = i + 1; j < ranges.length; j++ ) {\n\t\t\t\tconst next = ranges[ j ];\n\n\t\t\t\tif ( range.containsRange( next ) || next.containsRange( range ) || range.isEqual( next ) ) {\n\t\t\t\t\tranges.splice( j, 1 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of the range's both ends (in which the entire range is contained).\n\t *\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor() {\n\t\treturn this.start.getCommonAncestor( this.end );\n\t}\n\n\t/**\n\t * Converts `Range` to plain object and returns it.\n\t *\n\t * @returns {Object} `Node` converted to plain object.\n\t */\n\ttoJSON() {\n\t\treturn {\n\t\t\tstart: this.start.toJSON(),\n\t\t\tend: this.end.toJSON()\n\t\t};\n\t}\n\n\t/**\n\t * Returns a new range that is equal to current range.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.start, this.end );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by insert operation.\n\t *\n\t * One or more ranges may be returned as a result of this transformation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/insertoperation~InsertOperation} operation\n\t * @returns {Array.<module:engine/model/range~Range>}\n\t */\n\t_getTransformedByInsertOperation( operation, spread = false ) {\n\t\treturn this._getTransformedByInsertion( operation.position, operation.howMany, spread );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by move operation.\n\t *\n\t * One or more ranges may be returned as a result of this transformation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/moveoperation~MoveOperation} operation\n\t * @returns {Array.<module:engine/model/range~Range>}\n\t */\n\t_getTransformedByMoveOperation( operation, spread = false ) {\n\t\tconst sourcePosition = operation.sourcePosition;\n\t\tconst howMany = operation.howMany;\n\t\tconst targetPosition = operation.targetPosition;\n\n\t\treturn this._getTransformedByMove( sourcePosition, targetPosition, howMany, spread );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by split operation.\n\t *\n\t * Always one range is returned. The transformation is done in a way to not break the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/splitoperation~SplitOperation} operation\n\t * @returns {module:engine/model/range~Range}\n\t */\n\t_getTransformedBySplitOperation( operation ) {\n\t\tconst start = this.start._getTransformedBySplitOperation( operation );\n\t\tlet end = this.end._getTransformedBySplitOperation( operation );\n\n\t\tif ( this.end.isEqual( operation.insertionPosition ) ) {\n\t\t\tend = this.end.getShiftedBy( 1 );\n\t\t}\n\n\t\t// Below may happen when range contains graveyard element used by split operation.\n\t\tif ( start.root != end.root ) {\n\t\t\t// End position was next to the moved graveyard element and was moved with it.\n\t\t\t// Fix it by using old `end` which has proper `root`.\n\t\t\tend = this.end.getShiftedBy( -1 );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by merge operation.\n\t *\n\t * Always one range is returned. The transformation is done in a way to not break the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/mergeoperation~MergeOperation} operation\n\t * @returns {module:engine/model/range~Range}\n\t */\n\t_getTransformedByMergeOperation( operation ) {\n\t\t// Special case when the marker is set on \"the closing tag\" of an element. Marker can be set like that during\n\t\t// transformations, especially when a content of a few block elements were removed. For example:\n\t\t//\n\t\t// {} is the transformed range, [] is the removed range.\n\t\t// <p>F[o{o</p><p>B}ar</p><p>Xy]z</p>\n\t\t//\n\t\t// <p>Fo{o</p><p>B}ar</p><p>z</p>\n\t\t// <p>F{</p><p>B}ar</p><p>z</p>\n\t\t// <p>F{</p>}<p>z</p>\n\t\t// <p>F{}z</p>\n\t\t//\n\t\tif ( this.start.isEqual( operation.targetPosition ) && this.end.isEqual( operation.deletionPosition ) ) {\n\t\t\treturn new Range( this.start );\n\t\t}\n\n\t\tlet start = this.start._getTransformedByMergeOperation( operation );\n\t\tlet end = this.end._getTransformedByMergeOperation( operation );\n\n\t\tif ( start.root != end.root ) {\n\t\t\t// This happens when the end position was next to the merged (deleted) element.\n\t\t\t// Then, the end position was moved to the graveyard root. In this case we need to fix\n\t\t\t// the range cause its boundaries would be in different roots.\n\t\t\tend = this.end.getShiftedBy( -1 );\n\t\t}\n\n\t\tif ( start.isAfter( end ) ) {\n\t\t\t// This happens in three following cases:\n\t\t\t//\n\t\t\t// Case 1: Merge operation source position is before the target position (due to some transformations, OT, etc.)\n\t\t\t//         This means that start can be moved before the end of the range.\n\t\t\t//\n\t\t\t// Before: <p>a{a</p><p>b}b</p><p>cc</p>\n\t\t\t// Merge:  <p>b}b</p><p>cca{a</p>\n\t\t\t// Fix:    <p>{b}b</p><p>ccaa</p>\n\t\t\t//\n\t\t\t// Case 2: Range start is before merged node but not directly.\n\t\t\t//         Result should include all nodes that were in the original range.\n\t\t\t//\n\t\t\t// Before: <p>aa</p>{<p>cc</p><p>b}b</p>\n\t\t\t// Merge:  <p>aab}b</p>{<p>cc</p>\n\t\t\t// Fix:    <p>aa{bb</p><p>cc</p>}\n\t\t\t//\n\t\t\t//         The range is expanded by an additional `b` letter but it is better than dropping the whole `cc` paragraph.\n\t\t\t//\n\t\t\t// Case 3: Range start is directly before merged node.\n\t\t\t//         Resulting range should include only nodes from the merged element:\n\t\t\t//\n\t\t\t// Before: <p>aa</p>{<p>b}b</p><p>cc</p>\n\t\t\t// Merge:  <p>aab}b</p>{<p>cc</p>\n\t\t\t// Fix:    <p>aa{b}b</p><p>cc</p>\n\t\t\t//\n\n\t\t\tif ( operation.sourcePosition.isBefore( operation.targetPosition ) ) {\n\t\t\t\t// Case 1.\n\t\t\t\tstart = Position._createAt( end );\n\t\t\t\tstart.offset = 0;\n\t\t\t} else {\n\t\t\t\tif ( !operation.deletionPosition.isEqual( start ) ) {\n\t\t\t\t\t// Case 2.\n\t\t\t\t\tend = operation.deletionPosition;\n\t\t\t\t}\n\n\t\t\t\t// In both case 2 and 3 start is at the end of the merge-to element.\n\t\t\t\tstart = operation.targetPosition;\n\t\t\t}\n\n\t\t\treturn new Range( start, end );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Returns an array containing one or two {@link ~Range ranges} that are a result of transforming this\n\t * {@link ~Range range} by inserting `howMany` nodes at `insertPosition`. Two {@link ~Range ranges} are\n\t * returned if the insertion was inside this {@link ~Range range} and `spread` is set to `true`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet transformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 1 ] ), 2 );\n\t *\t\t// transformed array has one range from [ 4, 7 ] to [ 6, 0, 1 ]\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 4, 0, 0 ] ), 4 );\n\t *\t\t// transformed array has one range from [ 2, 7 ] to [ 4, 0, 5 ]\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 3, 2 ] ), 4 );\n\t *\t\t// transformed array has one range, which is equal to original range\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 3, 2 ] ), 4, true );\n\t *\t\t// transformed array has two ranges: from [ 2, 7 ] to [ 3, 2 ] and from [ 3, 6 ] to [ 4, 0, 1 ]\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} insertPosition Position where nodes are inserted.\n\t * @param {Number} howMany How many nodes are inserted.\n\t * @param {Boolean} [spread] Flag indicating whether this {~Range range} should be spread if insertion\n\t * was inside the range. Defaults to `false`.\n\t * @returns {Array.<module:engine/model/range~Range>} Result of the transformation.\n\t */\n\t_getTransformedByInsertion( insertPosition, howMany, spread = false ) {\n\t\tif ( spread && this.containsPosition( insertPosition ) ) {\n\t\t\t// Range has to be spread. The first part is from original start to the spread point.\n\t\t\t// The other part is from spread point to the original end, but transformed by\n\t\t\t// insertion to reflect insertion changes.\n\n\t\t\treturn [\n\t\t\t\tnew Range( this.start, insertPosition ),\n\t\t\t\tnew Range(\n\t\t\t\t\tinsertPosition.getShiftedBy( howMany ),\n\t\t\t\t\tthis.end._getTransformedByInsertion( insertPosition, howMany )\n\t\t\t\t)\n\t\t\t];\n\t\t} else {\n\t\t\tconst range = new Range( this.start, this.end );\n\n\t\t\trange.start = range.start._getTransformedByInsertion( insertPosition, howMany );\n\t\t\trange.end = range.end._getTransformedByInsertion( insertPosition, howMany );\n\n\t\t\treturn [ range ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns an array containing {@link ~Range ranges} that are a result of transforming this\n\t * {@link ~Range range} by moving `howMany` nodes from `sourcePosition` to `targetPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} sourcePosition Position from which nodes are moved.\n\t * @param {module:engine/model/position~Position} targetPosition Position to where nodes are moved.\n\t * @param {Number} howMany How many nodes are moved.\n\t * @param {Boolean} [spread=false] Whether the range should be spread if the move points inside the range.\n\t * @returns {Array.<module:engine/model/range~Range>} Result of the transformation.\n\t */\n\t_getTransformedByMove( sourcePosition, targetPosition, howMany, spread = false ) {\n\t\t// Special case for transforming a collapsed range. Just transform it like a position.\n\t\tif ( this.isCollapsed ) {\n\t\t\tconst newPos = this.start._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\n\t\t\treturn [ new Range( newPos ) ];\n\t\t}\n\n\t\t// Special case for transformation when a part of the range is moved towards the range.\n\t\t//\n\t\t// Examples:\n\t\t//\n\t\t// <div><p>ab</p><p>c[d</p></div><p>e]f</p> --> <div><p>ab</p></div><p>c[d</p><p>e]f</p>\n\t\t// <p>e[f</p><div><p>a]b</p><p>cd</p></div> --> <p>e[f</p><p>a]b</p><div><p>cd</p></div>\n\t\t//\n\t\t// Without this special condition, the default algorithm leaves an \"artifact\" range from one of `differenceSet` parts:\n\t\t//\n\t\t// <div><p>ab</p><p>c[d</p></div><p>e]f</p> --> <div><p>ab</p>{</div>}<p>c[d</p><p>e]f</p>\n\t\t//\n\t\t// This special case is applied only if the range is to be kept together (not spread).\n\t\tconst moveRange = Range._createFromPositionAndShift( sourcePosition, howMany );\n\t\tconst insertPosition = targetPosition._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tif ( this.containsPosition( targetPosition ) && !spread ) {\n\t\t\tif ( moveRange.containsPosition( this.start ) || moveRange.containsPosition( this.end ) ) {\n\t\t\t\tconst start = this.start._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\t\t\t\tconst end = this.end._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\n\t\t\t\treturn [ new Range( start, end ) ];\n\t\t\t}\n\t\t}\n\n\t\t// Default algorithm.\n\t\tlet result;\n\n\t\tconst differenceSet = this.getDifference( moveRange );\n\t\tlet difference = null;\n\n\t\tconst common = this.getIntersection( moveRange );\n\n\t\tif ( differenceSet.length == 1 ) {\n\t\t\t// `moveRange` and this range may intersect but may be separate.\n\t\t\tdifference = new Range(\n\t\t\t\tdifferenceSet[ 0 ].start._getTransformedByDeletion( sourcePosition, howMany ),\n\t\t\t\tdifferenceSet[ 0 ].end._getTransformedByDeletion( sourcePosition, howMany )\n\t\t\t);\n\t\t} else if ( differenceSet.length == 2 ) {\n\t\t\t// `moveRange` is inside this range.\n\t\t\tdifference = new Range(\n\t\t\t\tthis.start,\n\t\t\t\tthis.end._getTransformedByDeletion( sourcePosition, howMany )\n\t\t\t);\n\t\t} // else, `moveRange` contains this range.\n\n\t\tif ( difference ) {\n\t\t\tresult = difference._getTransformedByInsertion( insertPosition, howMany, common !== null || spread );\n\t\t} else {\n\t\t\tresult = [];\n\t\t}\n\n\t\tif ( common ) {\n\t\t\tconst transformedCommon = new Range(\n\t\t\t\tcommon.start._getCombined( moveRange.start, insertPosition ),\n\t\t\t\tcommon.end._getCombined( moveRange.start, insertPosition )\n\t\t\t);\n\n\t\t\tif ( result.length == 2 ) {\n\t\t\t\tresult.splice( 1, 0, transformedCommon );\n\t\t\t} else {\n\t\t\t\tresult.push( transformedCommon );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a copy of this range that is transformed by deletion of `howMany` nodes from `deletePosition`.\n\t *\n\t * If the deleted range is intersecting with the transformed range, the transformed range will be shrank.\n\t *\n\t * If the deleted range contains transformed range, `null` will be returned.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} deletionPosition Position from which nodes are removed.\n\t * @param {Number} howMany How many nodes are removed.\n\t * @returns {module:engine/model/range~Range|null} Result of the transformation.\n\t */\n\t_getTransformedByDeletion( deletePosition, howMany ) {\n\t\tlet newStart = this.start._getTransformedByDeletion( deletePosition, howMany );\n\t\tlet newEnd = this.end._getTransformedByDeletion( deletePosition, howMany );\n\n\t\tif ( newStart == null && newEnd == null ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( newStart == null ) {\n\t\t\tnewStart = deletePosition;\n\t\t}\n\n\t\tif ( newEnd == null ) {\n\t\t\tnewEnd = deletePosition;\n\t\t}\n\n\t\treturn new Range( newStart, newEnd );\n\t}\n\n\t/**\n\t * Creates a new range, spreading from specified {@link module:engine/model/position~Position position} to a position moved by\n\t * given `shift`. If `shift` is a negative value, shifted position is treated as the beginning of the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} position Beginning of the range.\n\t * @param {Number} shift How long the range should be.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createFromPositionAndShift( position, shift ) {\n\t\tconst start = position;\n\t\tconst end = position.getShiftedBy( shift );\n\n\t\treturn shift > 0 ? new this( start, end ) : new this( end, start );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/model/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @protected\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createIn( element ) {\n\t\treturn new this( Position._createAt( element, 0 ), Position._createAt( element, element.maxOffset ) );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/model/item~Item model item} and ends after it.\n\t *\n\t * @protected\n\t * @param {module:engine/model/item~Item} item\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createOn( item ) {\n\t\treturn this._createFromPositionAndShift( Position._createBefore( item ), item.offsetSize );\n\t}\n\n\t/**\n\t * Combines all ranges from the passed array into a one range. At least one range has to be passed.\n\t * Passed ranges must not have common parts.\n\t *\n\t * The first range from the array is a reference range. If other ranges start or end on the exactly same position where\n\t * the reference range, they get combined into one range.\n\t *\n\t *\t\t[  ][]  [    ][ ][             ][ ][]  [  ]  // Passed ranges, shown sorted\n\t *\t\t[    ]                                       // The result of the function if the first range was a reference range.\n\t *\t            [                           ]        // The result of the function if the third-to-seventh range was a reference range.\n\t *\t                                           [  ]  // The result of the function if the last range was a reference range.\n\t *\n\t * @param {Array.<module:engine/model/range~Range>} ranges Ranges to combine.\n\t * @returns {module:engine/model/range~Range} Combined range.\n\t */\n\tstatic _createFromRanges( ranges ) {\n\t\tif ( ranges.length === 0 ) {\n\t\t\t/**\n\t\t\t * At least one range has to be passed to\n\t\t\t * {@link module:engine/model/range~Range._createFromRanges `Range._createFromRanges()`}.\n\t\t\t *\n\t\t\t * @error range-create-from-ranges-empty-array\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'range-create-from-ranges-empty-array: At least one range has to be passed.',\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if ( ranges.length == 1 ) {\n\t\t\treturn ranges[ 0 ].clone();\n\t\t}\n\n\t\t// 1. Set the first range in `ranges` array as a reference range.\n\t\t// If we are going to return just a one range, one of the ranges need to be the reference one.\n\t\t// Other ranges will be stuck to that range, if possible.\n\t\tconst ref = ranges[ 0 ];\n\n\t\t// 2. Sort all the ranges so it's easier to process them.\n\t\tranges.sort( ( a, b ) => {\n\t\t\treturn a.start.isAfter( b.start ) ? 1 : -1;\n\t\t} );\n\n\t\t// 3. Check at which index the reference range is now.\n\t\tconst refIndex = ranges.indexOf( ref );\n\n\t\t// 4. At this moment we don't need the original range.\n\t\t// We are going to modify the result and we need to return a new instance of Range.\n\t\t// We have to create a copy of the reference range.\n\t\tconst result = new this( ref.start, ref.end );\n\n\t\t// 5. Ranges should be checked and glued starting from the range that is closest to the reference range.\n\t\t// Since ranges are sorted, start with the range with index that is closest to reference range index.\n\t\tif ( refIndex > 0 ) {\n\t\t\tfor ( let i = refIndex - 1; true; i++ ) {\n\t\t\t\tif ( ranges[ i ].end.isEqual( result.start ) ) {\n\t\t\t\t\tresult.start = Position._createAt( ranges[ i ].start );\n\t\t\t\t} else {\n\t\t\t\t\t// If ranges are not starting/ending at the same position there is no point in looking further.\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 6. Ranges should be checked and glued starting from the range that is closest to the reference range.\n\t\t// Since ranges are sorted, start with the range with index that is closest to reference range index.\n\t\tfor ( let i = refIndex + 1; i < ranges.length; i++ ) {\n\t\t\tif ( ranges[ i ].start.isEqual( result.end ) ) {\n\t\t\t\tresult.end = Position._createAt( ranges[ i ].end );\n\t\t\t} else {\n\t\t\t\t// If ranges are not starting/ending at the same position there is no point in looking further.\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Creates a `Range` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Range`.\n\t * @param {module:engine/model/document~Document} doc Document object that will be range owner.\n\t * @returns {module:engine/model/element~Element} `Range` instance created using given plain object.\n\t */\n\tstatic fromJSON( json, doc ) {\n\t\treturn new this( Position.fromJSON( json.start, doc ), Position.fromJSON( json.end, doc ) );\n\t}\n}\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nexport default last;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/position\n */\n\nimport TreeWalker from './treewalker';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Text from './text';\nimport { last } from 'lodash-es';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Represents a position in the model tree.\n *\n * A position is represented by its {@link module:engine/model/position~Position#root} and\n * a {@link module:engine/model/position~Position#path} in that root.\n *\n * You can create position instances via its constructor or the `createPosition*()` factory methods of\n * {@link module:engine/model/model~Model} and {@link module:engine/model/writer~Writer}.\n *\n * **Note:** Position is based on offsets, not indexes. This means that a position between two text nodes\n * `foo` and `bar` has offset `3`, not `1`. See {@link module:engine/model/position~Position#path} for more information.\n *\n * Since a position in the model is represented by a {@link module:engine/model/position~Position#root position root} and\n * {@link module:engine/model/position~Position#path position path} it is possible to create positions placed in non-existing places.\n * This requirement is important for operational transformation algorithms.\n *\n * Also, {@link module:engine/model/operation/operation~Operation operations}\n * kept in the {@link module:engine/model/document~Document#history document history}\n * are storing positions (and ranges) which were correct when those operations were applied, but may not be correct\n * after the document has changed.\n *\n * When changes are applied to the model, it may also happen that {@link module:engine/model/position~Position#parent position parent}\n * will change even if position path has not changed. Keep in mind, that if a position leads to non-existing element,\n * {@link module:engine/model/position~Position#parent} and some other properties and methods will throw errors.\n *\n * In most cases, position with wrong path is caused by an error in code, but it is sometimes needed, as described above.\n */\nexport default class Position {\n\t/**\n\t * Creates a position.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} root Root of the position.\n\t * @param {Array.<Number>} path Position path. See {@link module:engine/model/position~Position#path}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * See {@link module:engine/model/position~PositionStickiness}.\n\t */\n\tconstructor( root, path, stickiness = 'toNone' ) {\n\t\tif ( !root.is( 'element' ) && !root.is( 'documentFragment' ) ) {\n\t\t\t/**\n\t\t\t * Position root is invalid.\n\t\t\t *\n\t\t\t * Positions can only be anchored in elements or document fragments.\n\t\t\t *\n\t\t\t * @error model-position-root-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-root-invalid: Position root invalid.',\n\t\t\t\troot\n\t\t\t);\n\t\t}\n\n\t\tif ( !( path instanceof Array ) || path.length === 0 ) {\n\t\t\t/**\n\t\t\t * Position path must be an array with at least one item.\n\t\t\t *\n\t\t\t * @error model-position-path-incorrect\n\t\t\t * @param path\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-path-incorrect: Position path must be an array with at least one item.',\n\t\t\t\troot,\n\t\t\t\t{ path }\n\t\t\t);\n\t\t}\n\n\t\t// Normalize the root and path (if element was passed).\n\t\tpath = root.getPath().concat( path );\n\t\troot = root.root;\n\n\t\t/**\n\t\t * Root of the position path.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t\t * module:engine/model/position~Position#root\n\t\t */\n\t\tthis.root = root;\n\n\t\t/**\n\t\t * Position of the node in the tree. **Path contains offsets, not indexes.**\n\t\t *\n\t\t * Position can be placed before, after or in a {@link module:engine/model/node~Node node} if that node has\n\t\t * {@link module:engine/model/node~Node#offsetSize} greater than `1`. Items in position path are\n\t\t * {@link module:engine/model/node~Node#startOffset starting offsets} of position ancestors, starting from direct root children,\n\t\t * down to the position offset in it's parent.\n\t\t *\n\t\t *\t\t ROOT\n\t\t *\t\t  |- P            before: [ 0 ]         after: [ 1 ]\n\t\t *\t\t  |- UL           before: [ 1 ]         after: [ 2 ]\n\t\t *\t\t     |- LI        before: [ 1, 0 ]      after: [ 1, 1 ]\n\t\t *\t\t     |  |- foo    before: [ 1, 0, 0 ]   after: [ 1, 0, 3 ]\n\t\t *\t\t     |- LI        before: [ 1, 1 ]      after: [ 1, 2 ]\n\t\t *\t\t        |- bar    before: [ 1, 1, 0 ]   after: [ 1, 1, 3 ]\n\t\t *\n\t\t * `foo` and `bar` are representing {@link module:engine/model/text~Text text nodes}. Since text nodes has offset size\n\t\t * greater than `1` you can place position offset between their start and end:\n\t\t *\n\t\t *\t\t ROOT\n\t\t *\t\t  |- P\n\t\t *\t\t  |- UL\n\t\t *\t\t     |- LI\n\t\t *\t\t     |  |- f^o|o  ^ has path: [ 1, 0, 1 ]   | has path: [ 1, 0, 2 ]\n\t\t *\t\t     |- LI\n\t\t *\t\t        |- b^a|r  ^ has path: [ 1, 1, 1 ]   | has path: [ 1, 1, 2 ]\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<Number>} module:engine/model/position~Position#path\n\t\t */\n\t\tthis.path = path;\n\n\t\t/**\n\t\t * Position stickiness. See {@link module:engine/model/position~PositionStickiness}.\n\t\t *\n\t\t * @member {module:engine/model/position~PositionStickiness} module:engine/model/position~Position#stickiness\n\t\t */\n\t\tthis.stickiness = stickiness;\n\t}\n\n\t/**\n\t * Offset at which this position is located in its {@link module:engine/model/position~Position#parent parent}. It is equal\n\t * to the last item in position {@link module:engine/model/position~Position#path path}.\n\t *\n\t * @type {Number}\n\t */\n\tget offset() {\n\t\treturn last( this.path );\n\t}\n\n\t/**\n\t * @param {Number} newOffset\n\t */\n\tset offset( newOffset ) {\n\t\tthis.path[ this.path.length - 1 ] = newOffset;\n\t}\n\n\t/**\n\t * Parent element of this position.\n\t *\n\t * Keep in mind that `parent` value is calculated when the property is accessed.\n\t * If {@link module:engine/model/position~Position#path position path}\n\t * leads to a non-existing element, `parent` property will throw error.\n\t *\n\t * Also it is a good idea to cache `parent` property if it is used frequently in an algorithm (i.e. in a long loop).\n\t *\n\t * @readonly\n\t * @type {module:engine/model/element~Element}\n\t */\n\tget parent() {\n\t\tlet parent = this.root;\n\n\t\tfor ( let i = 0; i < this.path.length - 1; i++ ) {\n\t\t\tparent = parent.getChild( parent.offsetToIndex( this.path[ i ] ) );\n\t\t}\n\n\t\treturn parent;\n\t}\n\n\t/**\n\t * Position {@link module:engine/model/position~Position#offset offset} converted to an index in position's parent node. It is\n\t * equal to the {@link module:engine/model/node~Node#index index} of a node after this position. If position is placed\n\t * in text node, position index is equal to the index of that text node.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget index() {\n\t\treturn this.parent.offsetToIndex( this.offset );\n\t}\n\n\t/**\n\t * Returns {@link module:engine/model/text~Text text node} instance in which this position is placed or `null` if this\n\t * position is not in a text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/text~Text|null}\n\t */\n\tget textNode() {\n\t\tconst node = this.parent.getChild( this.index );\n\n\t\treturn ( node instanceof Text && node.startOffset < this.offset ) ? node : null;\n\t}\n\n\t/**\n\t * Node directly after this position or `null` if this position is in text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget nodeAfter() {\n\t\treturn this.textNode === null ? this.parent.getChild( this.index ) : null;\n\t}\n\n\t/**\n\t * Node directly before this position or `null` if this position is in text node.\n\t *\n\t * @readonly\n\t * @type {Node}\n\t */\n\tget nodeBefore() {\n\t\treturn this.textNode === null ? this.parent.getChild( this.index - 1 ) : null;\n\t}\n\n\t/**\n\t * Is `true` if position is at the beginning of its {@link module:engine/model/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtStart() {\n\t\treturn this.offset === 0;\n\t}\n\n\t/**\n\t * Is `true` if position is at the end of its {@link module:engine/model/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtEnd() {\n\t\treturn this.offset == this.parent.maxOffset;\n\t}\n\n\t/**\n\t * Checks whether this position is before or after given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {module:engine/model/position~PositionRelation}\n\t */\n\tcompareWith( otherPosition ) {\n\t\tif ( this.root != otherPosition.root ) {\n\t\t\treturn 'different';\n\t\t}\n\n\t\tconst result = compareArrays( this.path, otherPosition.path );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'same':\n\t\t\t\treturn 'same';\n\n\t\t\tcase 'prefix':\n\t\t\t\treturn 'before';\n\n\t\t\tcase 'extension':\n\t\t\t\treturn 'after';\n\n\t\t\tdefault:\n\t\t\t\treturn this.path[ result ] < otherPosition.path[ result ] ? 'before' : 'after';\n\t\t}\n\t}\n\n\t/**\n\t * Gets the farthest position which matches the callback using\n\t * {@link module:engine/model/treewalker~TreeWalker TreeWalker}.\n\t *\n\t * For example:\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text' );\n\t * \t\t// <paragraph>[]foo</paragraph> -> <paragraph>foo[]</paragraph>\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text', { direction: 'backward' } );\n\t * \t\t// <paragraph>foo[]</paragraph> -> <paragraph>[]foo</paragraph>\n\t *\n\t * \t\tgetLastMatchingPosition( value => false );\n\t * \t\t// Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/model/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t *\n\t * @returns {module:engine/model/position~Position} The position after the last item which matches the `skip` callback test.\n\t */\n\tgetLastMatchingPosition( skip, options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\t\ttreeWalker.skip( skip );\n\n\t\treturn treeWalker.position;\n\t}\n\n\t/**\n\t * Returns a path to this position's parent. Parent path is equal to position {@link module:engine/model/position~Position#path path}\n\t * but without the last item.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @returns {Array.<Number>} Path to the parent.\n\t */\n\tgetParentPath() {\n\t\treturn this.path.slice( 0, -1 );\n\t}\n\n\t/**\n\t * Returns ancestors array of this position, that is this position's parent and its ancestors.\n\t *\n\t * @returns {Array.<module:engine/model/item~Item>} Array with ancestors.\n\t */\n\tgetAncestors() {\n\t\tif ( this.parent.is( 'documentFragment' ) ) {\n\t\t\treturn [ this.parent ];\n\t\t} else {\n\t\t\treturn this.parent.getAncestors( { includeSelf: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the slice of two position {@link #path paths} which is identical. The {@link #root roots}\n\t * of these two paths must be identical.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} position The second position.\n\t * @returns {Array.<Number>} The common path.\n\t */\n\tgetCommonPath( position ) {\n\t\tif ( this.root != position.root ) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// We find on which tree-level start and end have the lowest common ancestor\n\t\tconst cmp = compareArrays( this.path, position.path );\n\t\t// If comparison returned string it means that arrays are same.\n\t\tconst diffAt = ( typeof cmp == 'string' ) ? Math.min( this.path.length, position.path.length ) : cmp;\n\n\t\treturn this.path.slice( 0, diffAt );\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both positions. The {@link #root roots} of these two positions must be identical.\n\t *\n\t * @param {module:engine/model/position~Position} position The second position.\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( position ) {\n\t\tconst ancestorsA = this.getAncestors();\n\t\tconst ancestorsB = position.getAncestors();\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns a new instance of `Position`, that has same {@link #parent parent} but it's offset\n\t * is shifted by `shift` value (can be a negative value).\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {Number} shift Offset shift. Can be a negative value.\n\t * @returns {module:engine/model/position~Position} Shifted position.\n\t */\n\tgetShiftedBy( shift ) {\n\t\tconst shifted = this.clone();\n\n\t\tconst offset = shifted.offset + shift;\n\t\tshifted.offset = offset < 0 ? 0 : offset;\n\n\t\treturn shifted;\n\t}\n\n\t/**\n\t * Checks whether this position is after given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @see module:engine/model/position~Position#isBefore\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if this position is after given position.\n\t */\n\tisAfter( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'after';\n\t}\n\n\t/**\n\t * Checks whether this position is before given position.\n\t *\n\t * **Note:** watch out when using negation of the value returned by this method, because the negation will also\n\t * be `true` if positions are in different roots and you might not expect this. You should probably use\n\t * `a.isAfter( b ) || a.isEqual( b )` or `!a.isBefore( p ) && a.root == b.root` in most scenarios. If your\n\t * condition uses multiple `isAfter` and `isBefore` checks, build them so they do not use negated values, i.e.:\n\t *\n\t *\t\tif ( a.isBefore( b ) && c.isAfter( d ) ) {\n\t *\t\t\t// do A.\n\t *\t\t} else {\n\t *\t\t\t// do B.\n\t *\t\t}\n\t *\n\t * or, if you have only one if-branch:\n\t *\n\t *\t\tif ( !( a.isBefore( b ) && c.isAfter( d ) ) {\n\t *\t\t\t// do B.\n\t *\t\t}\n\t *\n\t * rather than:\n\t *\n\t *\t\tif ( !a.isBefore( b ) || && !c.isAfter( d ) ) {\n\t *\t\t\t// do B.\n\t *\t\t} else {\n\t *\t\t\t// do A.\n\t *\t\t}\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if this position is before given position.\n\t */\n\tisBefore( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'before';\n\t}\n\n\t/**\n\t * Checks whether this position is equal to given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions are same.\n\t */\n\tisEqual( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'same';\n\t}\n\n\t/**\n\t * Checks whether this position is touching given position. Positions touch when there are no text nodes\n\t * or empty nodes in a range between them. Technically, those positions are not equal but in many cases\n\t * they are very similar or even indistinguishable.\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions touch.\n\t */\n\tisTouching( otherPosition ) {\n\t\tlet left = null;\n\t\tlet right = null;\n\t\tconst compare = this.compareWith( otherPosition );\n\n\t\tswitch ( compare ) {\n\t\t\tcase 'same':\n\t\t\t\treturn true;\n\n\t\t\tcase 'before':\n\t\t\t\tleft = Position._createAt( this );\n\t\t\t\tright = Position._createAt( otherPosition );\n\t\t\t\tbreak;\n\n\t\t\tcase 'after':\n\t\t\t\tleft = Position._createAt( otherPosition );\n\t\t\t\tright = Position._createAt( this );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\n\t\t// Cached for optimization purposes.\n\t\tlet leftParent = left.parent;\n\n\t\twhile ( left.path.length + right.path.length ) {\n\t\t\tif ( left.isEqual( right ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( left.path.length > right.path.length ) {\n\t\t\t\tif ( left.offset !== leftParent.maxOffset ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tleft.path = left.path.slice( 0, -1 );\n\t\t\t\tleftParent = leftParent.parent;\n\t\t\t\tleft.offset++;\n\t\t\t} else {\n\t\t\t\tif ( right.offset !== 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tright.path = right.path.slice( 0, -1 );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if two positions are in the same parent.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} position Position to compare with.\n\t * @returns {Boolean} `true` if positions have the same parent, `false` otherwise.\n\t */\n\thasSameParentAs( position ) {\n\t\tif ( this.root !== position.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisParentPath = this.getParentPath();\n\t\tconst posParentPath = position.getParentPath();\n\n\t\treturn compareArrays( thisParentPath, posParentPath ) == 'same';\n\t}\n\n\t/**\n\t * Returns a copy of this position that is transformed by given `operation`.\n\t *\n\t * The new position's parameters are updated accordingly to the effect of the `operation`.\n\t *\n\t * For example, if `n` nodes are inserted before the position, the returned position {@link ~Position#offset} will be\n\t * increased by `n`. If the position was in a merged element, it will be accordingly moved to the new element, etc.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to transform by.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\tgetTransformedByOperation( operation ) {\n\t\tlet result;\n\n\t\tswitch ( operation.type ) {\n\t\t\tcase 'insert':\n\t\t\t\tresult = this._getTransformedByInsertOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'move':\n\t\t\tcase 'remove':\n\t\t\tcase 'reinsert':\n\t\t\t\tresult = this._getTransformedByMoveOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'split':\n\t\t\t\tresult = this._getTransformedBySplitOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'merge':\n\t\t\t\tresult = this._getTransformedByMergeOperation( operation );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresult = Position._createAt( this );\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by an insert operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/insertoperation~InsertOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByInsertOperation( operation ) {\n\t\treturn this._getTransformedByInsertion( operation.position, operation.howMany );\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by a move operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/moveoperation~MoveOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByMoveOperation( operation ) {\n\t\treturn this._getTransformedByMove( operation.sourcePosition, operation.targetPosition, operation.howMany );\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by a split operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/splitoperation~SplitOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedBySplitOperation( operation ) {\n\t\tconst movedRange = operation.movedRange;\n\n\t\tconst isContained = movedRange.containsPosition( this ) ||\n\t\t\t( movedRange.start.isEqual( this ) && this.stickiness == 'toNext' );\n\n\t\tif ( isContained ) {\n\t\t\treturn this._getCombined( operation.splitPosition, operation.moveTargetPosition );\n\t\t} else {\n\t\t\tif ( operation.graveyardPosition ) {\n\t\t\t\treturn this._getTransformedByMove( operation.graveyardPosition, operation.insertionPosition, 1 );\n\t\t\t} else {\n\t\t\t\treturn this._getTransformedByInsertion( operation.insertionPosition, 1 );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by merge operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/mergeoperation~MergeOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByMergeOperation( operation ) {\n\t\tconst movedRange = operation.movedRange;\n\t\tconst isContained = movedRange.containsPosition( this ) || movedRange.start.isEqual( this );\n\n\t\tlet pos;\n\n\t\tif ( isContained ) {\n\t\t\tpos = this._getCombined( operation.sourcePosition, operation.targetPosition );\n\n\t\t\tif ( operation.sourcePosition.isBefore( operation.targetPosition ) ) {\n\t\t\t\t// Above happens during OT when the merged element is moved before the merged-to element.\n\t\t\t\tpos = pos._getTransformedByDeletion( operation.deletionPosition, 1 );\n\t\t\t}\n\t\t} else if ( this.isEqual( operation.deletionPosition ) ) {\n\t\t\tpos = Position._createAt( operation.deletionPosition );\n\t\t} else {\n\t\t\tpos = this._getTransformedByMove( operation.deletionPosition, operation.graveyardPosition, 1 );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by removing `howMany` nodes starting from `deletePosition`.\n\t * It may happen that this position is in a removed node. If that is the case, `null` is returned instead.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} deletePosition Position before the first removed node.\n\t * @param {Number} howMany How many nodes are removed.\n\t * @returns {module:engine/model/position~Position|null} Transformed position or `null`.\n\t */\n\t_getTransformedByDeletion( deletePosition, howMany ) {\n\t\tconst transformed = Position._createAt( this );\n\n\t\t// This position can't be affected if deletion was in a different root.\n\t\tif ( this.root != deletePosition.root ) {\n\t\t\treturn transformed;\n\t\t}\n\n\t\tif ( compareArrays( deletePosition.getParentPath(), this.getParentPath() ) == 'same' ) {\n\t\t\t// If nodes are removed from the node that is pointed by this position...\n\t\t\tif ( deletePosition.offset < this.offset ) {\n\t\t\t\t// And are removed from before an offset of that position...\n\t\t\t\tif ( deletePosition.offset + howMany > this.offset ) {\n\t\t\t\t\t// Position is in removed range, it's no longer in the tree.\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\t// Decrement the offset accordingly.\n\t\t\t\t\ttransformed.offset -= howMany;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( compareArrays( deletePosition.getParentPath(), this.getParentPath() ) == 'prefix' ) {\n\t\t\t// If nodes are removed from a node that is on a path to this position...\n\t\t\tconst i = deletePosition.path.length - 1;\n\n\t\t\tif ( deletePosition.offset <= this.path[ i ] ) {\n\t\t\t\t// And are removed from before next node of that path...\n\t\t\t\tif ( deletePosition.offset + howMany > this.path[ i ] ) {\n\t\t\t\t\t// If the next node of that path is removed return null\n\t\t\t\t\t// because the node containing this position got removed.\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, decrement index on that path.\n\t\t\t\t\ttransformed.path[ i ] -= howMany;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn transformed;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by inserting `howMany` nodes at `insertPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} insertPosition Position where nodes are inserted.\n\t * @param {Number} howMany How many nodes are inserted.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\t_getTransformedByInsertion( insertPosition, howMany ) {\n\t\tconst transformed = Position._createAt( this );\n\n\t\t// This position can't be affected if insertion was in a different root.\n\t\tif ( this.root != insertPosition.root ) {\n\t\t\treturn transformed;\n\t\t}\n\n\t\tif ( compareArrays( insertPosition.getParentPath(), this.getParentPath() ) == 'same' ) {\n\t\t\t// If nodes are inserted in the node that is pointed by this position...\n\t\t\tif ( insertPosition.offset < this.offset || ( insertPosition.offset == this.offset && this.stickiness != 'toPrevious' ) ) {\n\t\t\t\t// And are inserted before an offset of that position...\n\t\t\t\t// \"Push\" this positions offset.\n\t\t\t\ttransformed.offset += howMany;\n\t\t\t}\n\t\t} else if ( compareArrays( insertPosition.getParentPath(), this.getParentPath() ) == 'prefix' ) {\n\t\t\t// If nodes are inserted in a node that is on a path to this position...\n\t\t\tconst i = insertPosition.path.length - 1;\n\n\t\t\tif ( insertPosition.offset <= this.path[ i ] ) {\n\t\t\t\t// And are inserted before next node of that path...\n\t\t\t\t// \"Push\" the index on that path.\n\t\t\t\ttransformed.path[ i ] += howMany;\n\t\t\t}\n\t\t}\n\n\t\treturn transformed;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by moving `howMany` nodes from `sourcePosition` to `targetPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} sourcePosition Position before the first element to move.\n\t * @param {module:engine/model/position~Position} targetPosition Position where moved elements will be inserted.\n\t * @param {Number} howMany How many consecutive nodes to move, starting from `sourcePosition`.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\t_getTransformedByMove( sourcePosition, targetPosition, howMany ) {\n\t\t// Update target position, as it could be affected by nodes removal.\n\t\ttargetPosition = targetPosition._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tif ( sourcePosition.isEqual( targetPosition ) ) {\n\t\t\t// If `targetPosition` is equal to `sourcePosition` this isn't really any move. Just return position as it is.\n\t\t\treturn Position._createAt( this );\n\t\t}\n\n\t\t// Moving a range removes nodes from their original position. We acknowledge this by proper transformation.\n\t\tconst transformed = this._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tconst isMoved = transformed === null ||\n\t\t\t( sourcePosition.isEqual( this ) && this.stickiness == 'toNext' ) ||\n\t\t\t( sourcePosition.getShiftedBy( howMany ).isEqual( this ) && this.stickiness == 'toPrevious' );\n\n\t\tif ( isMoved ) {\n\t\t\t// This position is inside moved range (or sticks to it).\n\t\t\t// In this case, we calculate a combination of this position, move source position and target position.\n\t\t\treturn this._getCombined( sourcePosition, targetPosition );\n\t\t} else {\n\t\t\t// This position is not inside a removed range.\n\t\t\t//\n\t\t\t// In next step, we simply reflect inserting `howMany` nodes, which might further affect the position.\n\t\t\treturn transformed._getTransformedByInsertion( targetPosition, howMany );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a new position that is a combination of this position and given positions.\n\t *\n\t * The combined position is a copy of this position transformed by moving a range starting at `source` position\n\t * to the `target` position. It is expected that this position is inside the moved range.\n\t *\n\t * Example:\n\t *\n\t *\t\tlet original = model.createPositionFromPath( root, [ 2, 3, 1 ] );\n\t *\t\tlet source = model.createPositionFromPath( root, [ 2, 2 ] );\n\t *\t\tlet target = model.createPositionFromPath( otherRoot, [ 1, 1, 3 ] );\n\t *\t\toriginal._getCombined( source, target ); // path is [ 1, 1, 4, 1 ], root is `otherRoot`\n\t *\n\t * Explanation:\n\t *\n\t * We have a position `[ 2, 3, 1 ]` and move some nodes from `[ 2, 2 ]` to `[ 1, 1, 3 ]`. The original position\n\t * was inside moved nodes and now should point to the new place. The moved nodes will be after\n\t * positions `[ 1, 1, 3 ]`, `[ 1, 1, 4 ]`, `[ 1, 1, 5 ]`. Since our position was in the second moved node,\n\t * the transformed position will be in a sub-tree of a node at `[ 1, 1, 4 ]`. Looking at original path, we\n\t * took care of `[ 2, 3 ]` part of it. Now we have to add the rest of the original path to the transformed path.\n\t * Finally, the transformed position will point to `[ 1, 1, 4, 1 ]`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} source Beginning of the moved range.\n\t * @param {module:engine/model/position~Position} target Position where the range is moved.\n\t * @returns {module:engine/model/position~Position} Combined position.\n\t */\n\t_getCombined( source, target ) {\n\t\tconst i = source.path.length - 1;\n\n\t\t// The first part of a path to combined position is a path to the place where nodes were moved.\n\t\tconst combined = Position._createAt( target );\n\t\tcombined.stickiness = this.stickiness;\n\n\t\t// Then we have to update the rest of the path.\n\n\t\t// Fix the offset because this position might be after `from` position and we have to reflect that.\n\t\tcombined.offset = combined.offset + this.path[ i ] - source.offset;\n\n\t\t// Then, add the rest of the path.\n\t\t// If this position is at the same level as `from` position nothing will get added.\n\t\tcombined.path = combined.path.concat( this.path.slice( i + 1 ) );\n\n\t\treturn combined;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\treturn {\n\t\t\troot: this.root.toJSON(),\n\t\t\tpath: Array.from( this.path ),\n\t\t\tstickiness: this.stickiness\n\t\t};\n\t}\n\n\t/**\n\t * Returns a new position that is equal to current position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.root, this.path, this.stickiness );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/model/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/model/item~Item model item} and `'before'` or `'after'` (sets position before or after given model item).\n\t *\n\t * This method is a shortcut to other factory methods such as:\n\t *\n\t * * {@link module:engine/model/position~Position._createBefore},\n\t * * {@link module:engine/model/position~Position._createAfter}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when the\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness. Used only when the\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t * @protected\n\t */\n\tstatic _createAt( itemOrPosition, offset, stickiness = 'toNone' ) {\n\t\tif ( itemOrPosition instanceof Position ) {\n\t\t\treturn new Position( itemOrPosition.root, itemOrPosition.path, itemOrPosition.stickiness );\n\t\t} else {\n\t\t\tconst node = itemOrPosition;\n\n\t\t\tif ( offset == 'end' ) {\n\t\t\t\toffset = node.maxOffset;\n\t\t\t} else if ( offset == 'before' ) {\n\t\t\t\treturn this._createBefore( node, stickiness );\n\t\t\t} else if ( offset == 'after' ) {\n\t\t\t\treturn this._createAfter( node, stickiness );\n\t\t\t} else if ( offset !== 0 && !offset ) {\n\t\t\t\t/**\n\t\t\t\t * {@link module:engine/model/model~Model#createPositionAt `Model#createPositionAt()`}\n\t\t\t\t * requires the offset to be specified when the first parameter is a model item.\n\t\t\t\t *\n\t\t\t\t * @error model-createPositionAt-offset-required\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-createPositionAt-offset-required: ' +\n\t\t\t\t\t'Model#createPositionAt() requires the offset when the first parameter is a model item.',\n\t\t\t\t\t[ this, itemOrPosition ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( !node.is( 'element' ) && !node.is( 'documentFragment' ) ) {\n\t\t\t\t/**\n\t\t\t\t * Position parent have to be a model element or model document fragment.\n\t\t\t\t *\n\t\t\t\t * @error model-position-parent-incorrect\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-position-parent-incorrect: Position parent have to be a element or document fragment.',\n\t\t\t\t\t[ this, itemOrPosition ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst path = node.getPath();\n\n\t\t\tpath.push( offset );\n\n\t\t\treturn new this( node.root, path, stickiness );\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new position, after given {@link module:engine/model/item~Item model item}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * @returns {module:engine/model/position~Position}\n\t * @protected\n\t */\n\tstatic _createAfter( item, stickiness ) {\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position after a root element.\n\t\t\t *\n\t\t\t * @error model-position-after-root\n\t\t\t * @param {module:engine/model/item~Item} root\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-after-root: You cannot make a position after root.',\n\t\t\t\t[ this, item ],\n\t\t\t\t{ root: item }\n\t\t\t);\n\t\t}\n\n\t\treturn this._createAt( item.parent, item.endOffset, stickiness );\n\t}\n\n\t/**\n\t * Creates a new position, before the given {@link module:engine/model/item~Item model item}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item before which the position should be placed.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * @returns {module:engine/model/position~Position}\n\t * @protected\n\t */\n\tstatic _createBefore( item, stickiness ) {\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position before a root element.\n\t\t\t *\n\t\t\t * @error model-position-before-root\n\t\t\t * @param {module:engine/model/item~Item} root\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-before-root: You cannot make a position before root.',\n\t\t\t\titem,\n\t\t\t\t{ root: item }\n\t\t\t);\n\t\t}\n\n\t\treturn this._createAt( item.parent, item.startOffset, stickiness );\n\t}\n\n\t/**\n\t * Creates a `Position` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Position`.\n\t * @param {module:engine/model/document~Document} doc Document object that will be position owner.\n\t * @returns {module:engine/model/position~Position} `Position` instance created using given plain object.\n\t */\n\tstatic fromJSON( json, doc ) {\n\t\tif ( json.root === '$graveyard' ) {\n\t\t\tconst pos = new Position( doc.graveyard, json.path );\n\t\t\tpos.stickiness = json.stickiness;\n\n\t\t\treturn pos;\n\t\t}\n\n\t\tif ( !doc.getRoot( json.root ) ) {\n\t\t\t/**\n\t\t\t * Cannot create position for document. Root with specified name does not exist.\n\t\t\t *\n\t\t\t * @error model-position-fromjson-no-root\n\t\t\t * @param {String} rootName\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.',\n\t\t\t\tdoc,\n\t\t\t\t{ rootName: json.root }\n\t\t\t);\n\t\t}\n\n\t\treturn new Position( doc.getRoot( json.root ), json.path, json.stickiness );\n\t}\n}\n\n/**\n * A flag indicating whether this position is `'before'` or `'after'` or `'same'` as given position.\n * If positions are in different roots `'different'` flag is returned.\n *\n * @typedef {String} module:engine/model/position~PositionRelation\n */\n\n/**\n * Represents how position is \"sticking\" with neighbour nodes. Used to define how position should be transformed (moved)\n * in edge cases. Possible values: `'toNone'`, `'toNext'`, `'toPrevious'`.\n *\n * Examples:\n *\n *\t\tInsert. Position is at | and nodes are inserted at the same position, marked as ^:\n *\n *\t\t- sticks to none:           <p>f^|oo</p>  ->  <p>fbar|oo</p>\n *\t\t- sticks to next node:      <p>f^|oo</p>  ->  <p>fbar|oo</p>\n *\t\t- sticks to previous node:  <p>f|^oo</p>  ->  <p>f|baroo</p>\n *\n *\n *\t\tMove. Position is at | and range [oo] is moved to position ^:\n *\n *\t\t- sticks to none:           <p>f|[oo]</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\t\t- sticks to none:           <p>f[oo]|</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\n *\t\t- sticks to next node:      <p>f|[oo]</p><p>b^ar</p>  ->  <p>f</p><p>b|ooar</p>\n *\t\t- sticks to next node:      <p>f[oo]|</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\n *\t\t- sticks to previous node:  <p>f|[oo]</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\t\t- sticks to previous node:  <p>f[oo]|</p><p>b^ar</p>  ->  <p>f</p><p>boo|ar</p>\n *\n * @typedef {String} module:engine/model/position~PositionStickiness\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/position\n */\n\nimport TreeWalker from './treewalker';\n\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EditableElement from './editableelement';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Position in the view tree. Position is represented by its parent node and an offset in this parent.\n *\n * In order to create a new position instance use the `createPosition*()` factory methods available in:\n *\n * * {@link module:engine/view/view~View}\n * * {@link module:engine/view/downcastwriter~DowncastWriter}\n * * {@link module:engine/view/upcastwriter~UpcastWriter}\n */\nexport default class Position {\n\t/**\n\t * Creates a position.\n\t *\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} parent Position parent.\n\t * @param {Number} offset Position offset.\n\t */\n\tconstructor( parent, offset ) {\n\t\t/**\n\t\t * Position parent.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t\t * module:engine/view/position~Position#parent\n\t\t */\n\t\tthis.parent = parent;\n\n\t\t/**\n\t\t * Position offset.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} module:engine/view/position~Position#offset\n\t\t */\n\t\tthis.offset = offset;\n\t}\n\n\t/**\n\t * Node directly after the position. Equals `null` when there is no node after position or position is located\n\t * inside text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nodeAfter() {\n\t\tif ( this.parent.is( 'text' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.parent.getChild( this.offset ) || null;\n\t}\n\n\t/**\n\t * Node directly before the position. Equals `null` when there is no node before position or position is located\n\t * inside text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nodeBefore() {\n\t\tif ( this.parent.is( 'text' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.parent.getChild( this.offset - 1 ) || null;\n\t}\n\n\t/**\n\t * Is `true` if position is at the beginning of its {@link module:engine/view/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtStart() {\n\t\treturn this.offset === 0;\n\t}\n\n\t/**\n\t * Is `true` if position is at the end of its {@link module:engine/view/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtEnd() {\n\t\tconst endOffset = this.parent.is( 'text' ) ? this.parent.data.length : this.parent.childCount;\n\n\t\treturn this.offset === endOffset;\n\t}\n\n\t/**\n\t * Position's root, that is the root of the position's parent element.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.parent.root;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this position, or `null` if\n\t * position is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\tlet editable = this.parent;\n\n\t\twhile ( !( editable instanceof EditableElement ) ) {\n\t\t\tif ( editable.parent ) {\n\t\t\t\teditable = editable.parent;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\treturn editable;\n\t}\n\n\t/**\n\t * Returns a new instance of Position with offset incremented by `shift` value.\n\t *\n\t * @param {Number} shift How position offset should get changed. Accepts negative values.\n\t * @returns {module:engine/view/position~Position} Shifted position.\n\t */\n\tgetShiftedBy( shift ) {\n\t\tconst shifted = Position._createAt( this );\n\n\t\tconst offset = shifted.offset + shift;\n\t\tshifted.offset = offset < 0 ? 0 : offset;\n\n\t\treturn shifted;\n\t}\n\n\t/**\n\t * Gets the farthest position which matches the callback using\n\t * {@link module:engine/view/treewalker~TreeWalker TreeWalker}.\n\t *\n\t * For example:\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text' ); // <p>{}foo</p> -> <p>foo[]</p>\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text', { direction: 'backward' } ); // <p>foo[]</p> -> <p>{}foo</p>\n\t * \t\tgetLastMatchingPosition( value => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/view/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t *\n\t * @returns {module:engine/view/position~Position} The position after the last item which matches the `skip` callback test.\n\t */\n\tgetLastMatchingPosition( skip, options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\t\ttreeWalker.skip( skip );\n\n\t\treturn treeWalker.position;\n\t}\n\n\t/**\n\t * Returns ancestors array of this position, that is this position's parent and it's ancestors.\n\t *\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors() {\n\t\tif ( this.parent.is( 'documentFragment' ) ) {\n\t\t\treturn [ this.parent ];\n\t\t} else {\n\t\t\treturn this.parent.getAncestors( { includeSelf: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/node~Node} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both positions.\n\t *\n\t * @param {module:engine/view/position~Position} position\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( position ) {\n\t\tconst ancestorsA = this.getAncestors();\n\t\tconst ancestorsB = position.getAncestors();\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Checks whether this position equals given position.\n\t *\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions are same.\n\t */\n\tisEqual( otherPosition ) {\n\t\treturn ( this.parent == otherPosition.parent && this.offset == otherPosition.offset );\n\t}\n\n\t/**\n\t * Checks whether this position is located before given position. When method returns `false` it does not mean that\n\t * this position is after give one. Two positions may be located inside separate roots and in that situation this\n\t * method will still return `false`.\n\t *\n\t * @see module:engine/view/position~Position#isAfter\n\t * @see module:engine/view/position~Position#compareWith\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} Returns `true` if this position is before given position.\n\t */\n\tisBefore( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'before';\n\t}\n\n\t/**\n\t * Checks whether this position is located after given position. When method returns `false` it does not mean that\n\t * this position is before give one. Two positions may be located inside separate roots and in that situation this\n\t * method will still return `false`.\n\t *\n\t * @see module:engine/view/position~Position#isBefore\n\t * @see module:engine/view/position~Position#compareWith\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} Returns `true` if this position is after given position.\n\t */\n\tisAfter( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'after';\n\t}\n\n\t/**\n\t * Checks whether this position is before, after or in same position that other position. Two positions may be also\n\t * different when they are located in separate roots.\n\t *\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {module:engine/view/position~PositionRelation}\n\t */\n\tcompareWith( otherPosition ) {\n\t\tif ( this.root !== otherPosition.root ) {\n\t\t\treturn 'different';\n\t\t}\n\n\t\tif ( this.isEqual( otherPosition ) ) {\n\t\t\treturn 'same';\n\t\t}\n\n\t\t// Get path from root to position's parent element.\n\t\tconst thisPath = this.parent.is( 'node' ) ? this.parent.getPath() : [];\n\t\tconst otherPath = otherPosition.parent.is( 'node' ) ? otherPosition.parent.getPath() : [];\n\n\t\t// Add the positions' offsets to the parents offsets.\n\t\tthisPath.push( this.offset );\n\t\totherPath.push( otherPosition.offset );\n\n\t\t// Compare both path arrays to find common ancestor.\n\t\tconst result = compareArrays( thisPath, otherPath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn 'before';\n\n\t\t\tcase 'extension':\n\t\t\t\treturn 'after';\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < otherPath[ result ] ? 'before' : 'after';\n\t\t}\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/view/treewalker~TreeWalker TreeWalker} instance with this positions as a start position.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}\n\t * @param {module:engine/view/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\tclone() {\n\t\treturn new Position( this.parent, this.offset );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link module:engine/view/position~Position._createBefore},\n\t * * {@link module:engine/view/position~Position._createAfter}.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tstatic _createAt( itemOrPosition, offset ) {\n\t\tif ( itemOrPosition instanceof Position ) {\n\t\t\treturn new this( itemOrPosition.parent, itemOrPosition.offset );\n\t\t} else {\n\t\t\tconst node = itemOrPosition;\n\n\t\t\tif ( offset == 'end' ) {\n\t\t\t\toffset = node.is( 'text' ) ? node.data.length : node.childCount;\n\t\t\t} else if ( offset == 'before' ) {\n\t\t\t\treturn this._createBefore( node );\n\t\t\t} else if ( offset == 'after' ) {\n\t\t\t\treturn this._createAfter( node );\n\t\t\t} else if ( offset !== 0 && !offset ) {\n\t\t\t\t/**\n\t\t\t\t * {@link module:engine/view/view~View#createPositionAt `View#createPositionAt()`}\n\t\t\t\t * requires the offset to be specified when the first parameter is a view item.\n\t\t\t\t *\n\t\t\t\t * @error view-createPositionAt-offset-required\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'view-createPositionAt-offset-required: ' +\n\t\t\t\t\t'View#createPositionAt() requires the offset when the first parameter is a view item.',\n\t\t\t\t\tnode\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn new Position( node, offset );\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tstatic _createAfter( item ) {\n\t\t// TextProxy is not a instance of Node so we need do handle it in specific way.\n\t\tif ( item.is( 'textProxy' ) ) {\n\t\t\treturn new Position( item.textNode, item.offsetInText + item.data.length );\n\t\t}\n\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position after a root.\n\t\t\t *\n\t\t\t * @error view-position-after-root\n\t\t\t * @param {module:engine/view/node~Node} root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-position-after-root: You can not make position after root.', item, { root: item } );\n\t\t}\n\n\t\treturn new Position( item.parent, item.index + 1 );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tstatic _createBefore( item ) {\n\t\t// TextProxy is not a instance of Node so we need do handle it in specific way.\n\t\tif ( item.is( 'textProxy' ) ) {\n\t\t\treturn new Position( item.textNode, item.offsetInText );\n\t\t}\n\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You cannot make a position before a root.\n\t\t\t *\n\t\t\t * @error view-position-before-root\n\t\t\t * @param {module:engine/view/node~Node} root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-position-before-root: You can not make position before root.', item, { root: item } );\n\t\t}\n\n\t\treturn new Position( item.parent, item.index );\n\t}\n}\n\n/**\n * A flag indicating whether this position is `'before'` or `'after'` or `'same'` as given position.\n * If positions are in different roots `'different'` flag is returned.\n *\n * @typedef {String} module:engine/view/position~PositionRelation\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/mix\n */\n\n/**\n * Copies enumerable properties and symbols from the objects given as 2nd+ parameters to the\n * prototype of first object (a constructor).\n *\n *\t\tclass Editor {\n *\t\t\t...\n *\t\t}\n *\n *\t\tconst SomeMixin = {\n *\t\t\ta() {\n *\t\t\t\treturn 'a';\n *\t\t\t}\n *\t\t};\n *\n *\t\tmix( Editor, SomeMixin, ... );\n *\n *\t\tnew Editor().a(); // -> 'a'\n *\n * Note: Properties which already exist in the base class will not be overriden.\n *\n * @param {Function} [baseClass] Class which prototype will be extended.\n * @param {Object} [...mixins] Objects from which to get properties.\n */\nexport default function mix( baseClass, ...mixins ) {\n\tmixins.forEach( mixin => {\n\t\tObject.getOwnPropertyNames( mixin ).concat( Object.getOwnPropertySymbols( mixin ) )\n\t\t\t.forEach( key => {\n\t\t\t\tif ( key in baseClass.prototype ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst sourceDescriptor = Object.getOwnPropertyDescriptor( mixin, key );\n\t\t\t\tsourceDescriptor.enumerable = false;\n\n\t\t\t\tObject.defineProperty( baseClass.prototype, key, sourceDescriptor );\n\t\t\t} );\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/view\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport ViewCollection from './viewcollection';\nimport Template from './template';\nimport DomEmitterMixin from '@ckeditor/ckeditor5-utils/src/dom/emittermixin';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\nimport '../theme/globals/globals.css';\n\n/**\n * The basic view class, which represents an HTML element created out of a\n * {@link module:ui/view~View#template}. Views are building blocks of the user interface and handle\n * interaction\n *\n * Views {@link module:ui/view~View#registerChild aggregate} children in\n * {@link module:ui/view~View#createCollection collections} and manage the life cycle of DOM\n * listeners e.g. by handling rendering and destruction.\n *\n * See the {@link module:ui/template~TemplateDefinition} syntax to learn more about shaping view\n * elements, attributes and listeners.\n *\n *\t\tclass SampleView extends View {\n *\t\t\tconstructor( locale ) {\n *\t\t\t\tsuper( locale );\n *\n *\t\t\t\tconst bind = this.bindTemplate;\n *\n *\t\t\t\t// Views define their interface (state) using observable attributes.\n *\t\t\t\tthis.set( 'elementClass', 'bar' );\n *\n *\t\t\t\tthis.setTemplate( {\n *\t\t\t\t\ttag: 'p',\n *\n *\t\t\t\t\t// The element of the view can be defined with its children.\n *\t\t\t\t\tchildren: [\n *\t\t\t\t\t\t'Hello',\n *\t\t\t\t\t\t{\n *\t\t\t\t\t\t\ttag: 'b',\n *\t\t\t\t\t\t\tchildren: [ 'world!' ]\n *\t\t\t\t\t\t}\n *\t\t\t\t\t],\n *\t\t\t\t\tattributes: {\n *\t\t\t\t\t\tclass: [\n *\t\t\t\t\t\t\t'foo',\n *\n *\t\t\t\t\t\t\t// Observable attributes control the state of the view in DOM.\n *\t\t\t\t\t\t\tbind.to( 'elementClass' )\n *\t\t\t\t\t\t]\n *\t\t\t\t\t},\n *\t\t\t\t\ton: {\n *\t\t\t\t\t\t// Views listen to DOM events and propagate them.\n *\t\t\t\t\t\tclick: bind.to( 'clicked' )\n *\t\t\t\t\t}\n *\t\t\t\t} );\n *\t\t\t}\n *\t\t}\n *\n *\t\tconst view = new SampleView( locale );\n *\n *\t\tview.render();\n *\n *\t\t// Append <p class=\"foo bar\">Hello<b>world</b></p> to the <body>\n *\t\tdocument.body.appendChild( view.element );\n *\n *\t\t// Change the class attribute to <p class=\"foo baz\">Hello<b>world</b></p>\n *\t\tview.elementClass = 'baz';\n *\n *\t\t// Respond to the \"click\" event in DOM by executing a custom action.\n *\t\tview.on( 'clicked', () => {\n *\t\t\tconsole.log( 'The view has been clicked!' );\n *\t\t} );\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class View {\n\t/**\n\t * Creates an instance of the {@link module:ui/view~View} class.\n\t *\n\t * Also see {@link #render}.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The localization services instance.\n\t */\n\tconstructor( locale ) {\n\t\t/**\n\t\t * An HTML element of the view. `null` until {@link #render rendered}\n\t\t * from the {@link #template}.\n\t\t *\n\t\t *\t\tclass SampleView extends View {\n\t\t *\t\t\tconstructor() {\n\t\t *\t\t\t\tsuper();\n\t\t *\n\t\t *\t\t\t\t// A template instance the #element will be created from.\n\t\t *\t\t\t\tthis.setTemplate( {\n\t\t *\t\t\t\t\ttag: 'p'\n\t\t *\n\t\t *\t\t\t\t\t// ...\n\t\t *\t\t\t\t} );\n\t\t *\t\t\t}\n\t\t *\t\t}\n\t\t *\n\t\t *\t\tconst view = new SampleView();\n\t\t *\n\t\t *\t\t// Renders the #template.\n\t\t *\t\tview.render();\n\t\t *\n\t\t *\t\t// Append the HTML element of the view to <body>.\n\t\t *\t\tdocument.body.appendChild( view.element );\n\t\t *\n\t\t * **Note**: The element of the view can also be assigned directly:\n\t\t *\n\t\t *\t\tview.element = document.querySelector( '#my-container' );\n\t\t *\n\t\t * @member {HTMLElement}\n\t\t */\n\t\tthis.element = null;\n\n\t\t/**\n\t\t * Set `true` when the view has already been {@link module:ui/view~View#render rendered}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isRendered\n\t\t */\n\t\tthis.isRendered = false;\n\n\t\t/**\n\t\t * A set of tools to localize the user interface.\n\t\t *\n\t\t * Also see {@link module:core/editor/editor~Editor#locale}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = locale;\n\n\t\t/**\n\t\t * Shorthand for {@link module:utils/locale~Locale#t}.\n\t\t *\n\t\t * Note: If {@link #locale} instance hasn't been passed to the view this method may not\n\t\t * be available.\n\t\t *\n\t\t * @see module:utils/locale~Locale#t\n\t\t * @method\n\t\t */\n\t\tthis.t = locale && locale.t;\n\n\t\t/**\n\t\t * Collections registered with {@link #createCollection}.\n\t\t *\n\t\t * @protected\n\t\t * @member {Set.<module:ui/viewcollection~ViewCollection>}\n\t\t */\n\t\tthis._viewCollections = new Collection();\n\n\t\t/**\n\t\t * A collection of view instances, which have been added directly\n\t\t * into the {@link module:ui/template~Template#children}.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis._unboundChildren = this.createCollection();\n\n\t\t// Pass parent locale to its children.\n\t\tthis._viewCollections.on( 'add', ( evt, collection ) => {\n\t\t\tcollection.locale = locale;\n\t\t} );\n\n\t\t/**\n\t\t * Template of this view. It provides the {@link #element} representing\n\t\t * the view in DOM, which is {@link #render rendered}.\n\t\t *\n\t\t * @member {module:ui/template~Template} #template\n\t\t */\n\n\t\t/**\n\t\t * Cached {@link module:ui/template~BindChain bind chain} object created by the\n\t\t * {@link #template}. See {@link #bindTemplate}.\n\t\t *\n\t\t * @private\n\t\t * @member {Object} #_bindTemplate\n\t\t */\n\n\t\tthis.decorate( 'render' );\n\t}\n\n\t/**\n\t * Shorthand for {@link module:ui/template~Template.bind}, a binding\n\t * {@link module:ui/template~BindChain interface} pre–configured for the view instance.\n\t *\n\t * It provides {@link module:ui/template~BindChain#to `to()`} and\n\t * {@link module:ui/template~BindChain#if `if()`} methods that initialize bindings with\n\t * observable attributes and attach DOM listeners.\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor( locale ) {\n\t *\t\t\t\tsuper( locale );\n\t *\n\t *\t\t\t\tconst bind = this.bindTemplate;\n\t *\n\t *\t\t\t\t// These {@link module:utils/observablemixin~Observable observable} attributes will control\n\t *\t\t\t\t// the state of the view in DOM.\n\t *\t\t\t\tthis.set( {\n\t *\t\t\t\t\telementClass: 'foo',\n\t *\t\t\t\t \tisEnabled: true\n\t *\t\t\t\t } );\n\t *\n\t *\t\t\t\tthis.setTemplate( {\n\t *\t\t\t\t\ttag: 'p',\n\t *\n\t *\t\t\t\t\tattributes: {\n\t *\t\t\t\t\t\t// The class HTML attribute will follow elementClass\n\t *\t\t\t\t\t\t// and isEnabled view attributes.\n\t *\t\t\t\t\t\tclass: [\n\t *\t\t\t\t\t\t\tbind.to( 'elementClass' )\n\t *\t\t\t\t\t\t\tbind.if( 'isEnabled', 'present-when-enabled' )\n\t *\t\t\t\t\t\t]\n\t *\t\t\t\t\t},\n\t *\n\t *\t\t\t\t\ton: {\n\t *\t\t\t\t\t\t// The view will fire the \"clicked\" event upon clicking <p> in DOM.\n\t *\t\t\t\t\t\tclick: bind.to( 'clicked' )\n\t *\t\t\t\t\t}\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * @method #bindTemplate\n\t */\n\tget bindTemplate() {\n\t\tif ( this._bindTemplate ) {\n\t\t\treturn this._bindTemplate;\n\t\t}\n\n\t\treturn ( this._bindTemplate = Template.bind( this, this ) );\n\t}\n\n\t/**\n\t * Creates a new collection of views, which can be used as\n\t * {@link module:ui/template~Template#children} of this view.\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor( locale ) {\n\t *\t\t\t\tsuper( locale );\n\t *\n\t *\t\t\t\tthis.items = this.createCollection();\n \t *\n\t *\t\t\t\tthis.setTemplate( {\n\t *\t\t\t\t\ttag: 'p',\n\t *\n\t *\t\t\t\t\t// `items` collection will render here.\n\t *\t\t\t\t\tchildren: this.items\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst view = new SampleView( locale );\n\t *\t\tconst child = new ChildView( locale );\n\t *\n\t *\t\tview.render();\n\t *\n\t *\t\t// It will append <p></p> to the <body>.\n\t *\t\tdocument.body.appendChild( view.element );\n\t *\n\t *\t\t// From now on the child is nested under its parent, which is also reflected in DOM.\n\t *\t\t// <p><child#element></p>\n\t *\t\tview.items.add( child );\n\t *\n\t * @returns {module:ui/viewcollection~ViewCollection} A new collection of view instances.\n\t */\n\tcreateCollection() {\n\t\tconst collection = new ViewCollection();\n\n\t\tthis._viewCollections.add( collection );\n\n\t\treturn collection;\n\t}\n\n\t/**\n\t * Registers a new child view under the view instance. Once registered, a child\n\t * view is managed by its parent, including {@link #render rendering}\n\t * and {@link #destroy destruction}.\n\t *\n\t * To revert this, use {@link #deregisterChild}.\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor( locale ) {\n\t *\t\t\t\tsuper( locale );\n\t *\n\t *\t\t\t\tthis.childA = new SomeChildView( locale );\n\t *\t\t\t\tthis.childB = new SomeChildView( locale );\n\t *\n\t *\t\t\t\tthis.setTemplate( { tag: 'p' } );\n\t *\n\t *\t\t\t\t// Register the children.\n\t *\t\t\t\tthis.registerChild( [ this.childA, this.childB ] );\n\t *\t\t\t}\n\t *\n\t *\t\t\trender() {\n\t *\t\t\t\tsuper.render();\n\t *\n\t *\t\t\t\tthis.element.appendChild( this.childA.element );\n\t *\t\t\t\tthis.element.appendChild( this.childB.element );\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst view = new SampleView( locale );\n\t *\n\t *\t\tview.render();\n\t *\n\t *\t\t// Will append <p><childA#element><b></b><childB#element></p>.\n\t *\t\tdocument.body.appendChild( view.element );\n\t *\n\t * **Note**: There's no need to add child views if they're already referenced in the\n\t * {@link #template}:\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor( locale ) {\n\t *\t\t\t\tsuper( locale );\n\t *\n\t *\t\t\t\tthis.childA = new SomeChildView( locale );\n\t *\t\t\t\tthis.childB = new SomeChildView( locale );\n\t *\n\t *\t\t\t\tthis.setTemplate( {\n\t *\t\t\t\t\ttag: 'p',\n\t *\n \t *\t\t\t\t\t// These children will be added automatically. There's no\n \t *\t\t\t\t\t// need to call {@link #registerChild} for any of them.\n\t *\t\t\t\t\tchildren: [ this.childA, this.childB ]\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\n\t *\t\t\t// ...\n\t *\t\t}\n\t *\n\t * @param {module:ui/view~View|Iterable.<module:ui/view~View>} children Children views to be registered.\n\t */\n\tregisterChild( children ) {\n\t\tif ( !isIterable( children ) ) {\n\t\t\tchildren = [ children ];\n\t\t}\n\n\t\tfor ( const child of children ) {\n\t\t\tthis._unboundChildren.add( child );\n\t\t}\n\t}\n\n\t/**\n\t * The opposite of {@link #registerChild}. Removes a child view from this view instance.\n\t * Once removed, the child is no longer managed by its parent, e.g. it can safely\n\t * become a child of another parent view.\n\t *\n\t * @see #registerChild\n\t * @param {module:ui/view~View|Iterable.<module:ui/view~View>} children Child views to be removed.\n\t */\n\tderegisterChild( children ) {\n\t\tif ( !isIterable( children ) ) {\n\t\t\tchildren = [ children ];\n\t\t}\n\n\t\tfor ( const child of children ) {\n\t\t\tthis._unboundChildren.remove( child );\n\t\t}\n\t}\n\n\t/**\n\t * Sets the {@link #template} of the view with with given definition.\n\t *\n\t * A shorthand for:\n\t *\n\t *\t\tview.setTemplate( definition );\n\t *\n\t * @param {module:ui/template~TemplateDefinition} definition Definition of view's template.\n\t */\n\tsetTemplate( definition ) {\n\t\tthis.template = new Template( definition );\n\t}\n\n\t/**\n\t * {@link module:ui/template~Template.extend Extends} the {@link #template} of the view with\n\t * with given definition.\n\t *\n\t * A shorthand for:\n\t *\n\t *\t\tTemplate.extend( view.template, definition );\n\t *\n\t * **Note**: Is requires the {@link #template} to be already set. See {@link #setTemplate}.\n\t *\n\t * @param {module:ui/template~TemplateDefinition} definition Definition which\n\t * extends the {@link #template}.\n\t */\n\textendTemplate( definition ) {\n\t\tTemplate.extend( this.template, definition );\n\t}\n\n\t/**\n\t * Recursively renders the view.\n\t *\n\t * Once the view is rendered:\n\t * * the {@link #element} becomes an HTML element out of {@link #template},\n\t * * the {@link #isRendered} flag is set `true`.\n\t *\n\t * **Note**: The children of the view:\n\t * * defined directly in the {@link #template}\n\t * * residing in collections created by the {@link #createCollection} method,\n\t * * and added by {@link #registerChild}\n\t * are also rendered in the process.\n\t *\n\t * In general, `render()` method is the right place to keep the code which refers to the\n\t * {@link #element} and should be executed at the very beginning of the view's life cycle.\n\t *\n\t * It is possible to {@link module:ui/template~Template.extend} the {@link #template} before\n\t * the view is rendered. To allow an early customization of the view (e.g. by its parent),\n\t * such references should be done in `render()`.\n\t *\n\t *\t\tclass SampleView extends View {\n\t *\t\t\tconstructor() {\n\t *\t\t\t\tthis.setTemplate( {\n\t *\t\t\t\t\t// ...\n\t *\t\t\t\t} );\n\t *\t\t\t},\n\t *\n\t *\t\t\trender() {\n\t *\t\t\t\t// View#element becomes available.\n\t *\t\t\t\tsuper.render();\n\t *\n\t *\t\t\t\t// The \"scroll\" listener depends on #element.\n\t *\t\t\t\tthis.listenTo( window, 'scroll', () => {\n\t *\t\t\t\t\t// A reference to #element would render the #template and make it non-extendable.\n\t *\t\t\t\t\tif ( window.scrollY > 0 ) {\n\t *\t\t\t\t\t\tthis.element.scrollLeft = 100;\n\t *\t\t\t\t\t} else {\n\t *\t\t\t\t\t\tthis.element.scrollLeft = 0;\n\t *\t\t\t\t\t}\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst view = new SampleView();\n\t *\n\t *\t\t// Let's customize the view before it gets rendered.\n\t *\t\tview.extendTemplate( {\n\t *\t\t\tattributes: {\n\t *\t\t\t\tclass: [\n\t *\t\t\t\t\t'additional-class'\n\t *\t\t\t\t]\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Late rendering allows customization of the view.\n\t *\t\tview.render();\n\t */\n\trender() {\n\t\tif ( this.isRendered ) {\n\t\t\t/**\n\t\t\t * This View has already been rendered.\n\t\t\t *\n\t\t\t * @error ui-view-render-rendered\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-view-render-already-rendered: This View has already been rendered.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\t// Render #element of the view.\n\t\tif ( this.template ) {\n\t\t\tthis.element = this.template.render();\n\n\t\t\t// Auto–register view children from #template.\n\t\t\tthis.registerChild( this.template.getViews() );\n\t\t}\n\n\t\tthis.isRendered = true;\n\t}\n\n\t/**\n\t * Recursively destroys the view instance and child views added by {@link #registerChild} and\n\t * residing in collections created by the {@link #createCollection}.\n\t *\n\t * Destruction disables all event listeners:\n\t * * created on the view, e.g. `view.on( 'event', () => {} )`,\n\t * * defined in the {@link #template} for DOM events.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\n\t\tthis._viewCollections.map( c => c.destroy() );\n\n\t\t// Template isn't obligatory for views.\n\t\tif ( this.template && this.template._revertData ) {\n\t\t\tthis.template.revert( this.element );\n\t\t}\n\t}\n\n\t/**\n\t * Event fired by the {@link #render} method. Actual rendering is executed as a listener to\n\t * this event with the default priority.\n\t *\n\t * See {@link module:utils/observablemixin~ObservableMixin#decorate} for more information and samples.\n\t *\n\t * @event render\n\t */\n}\n\nmix( View, DomEmitterMixin );\nmix( View, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/command\n */\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The base class for CKEditor commands.\n *\n * Commands are the main way to manipulate editor contents and state. They are mostly used by UI elements (or by other\n * commands) to make changes in the model. Commands are available in every part of code that has access to\n * the {@link module:core/editor/editor~Editor editor} instance.\n *\n * Instances of registered commands can be retrieved from {@link module:core/editor/editor~Editor#commands `editor.commands`}.\n * The easiest way to execute a command is through {@link module:core/editor/editor~Editor#execute `editor.execute()`}.\n *\n * By default commands are disabled when the editor is in {@link module:core/editor/editor~Editor#isReadOnly read-only} mode.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Command {\n\t/**\n\t * Creates a new `Command` instance.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor Editor on which this command will be used.\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor on which this command will be used.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor}\n\t\t */\n\t\tthis.editor = editor;\n\n\t\t/**\n\t\t * The value of the command. A concrete command class should define what it represents for it.\n\t\t *\n\t\t * For example, the `'bold'` command's value indicates whether the selection starts in a bolded text.\n\t\t * And the value of the `'link'` command may be an object with links details.\n\t\t *\n\t\t * It is possible for a command to have no value (e.g. for stateless actions such as `'imageUpload'`).\n\t\t *\n\t\t * A concrete command class should control this value by overriding the {@link #refresh `refresh()`} method.\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member #value\n\t\t */\n\t\tthis.set( 'value', undefined );\n\n\t\t/**\n\t\t * Flag indicating whether a command is enabled or disabled.\n\t\t * A disabled command will do nothing when executed.\n\t\t *\n\t\t * A concrete command class should control this value by overriding the {@link #refresh `refresh()`} method.\n\t\t *\n\t\t * It is possible to disable a command from \"outside\". For instance, in your integration you may want to disable\n\t\t * a certain set of commands for the time being. To do that, you can use the fact that `isEnabled` is observable\n\t\t * and it fires the `set:isEnabled` event every time anyone tries to modify its value:\n\t\t *\n\t\t *\t\tfunction disableCommand( cmd ) {\n\t\t *\t\t\tcmd.on( 'set:isEnabled', forceDisable, { priority: 'highest' } );\n\t\t *\n\t\t *\t\t\tcmd.isEnabled = false;\n\t\t *\n\t\t *\t\t\t// Make it possible to enable the command again.\n\t\t *\t\t\treturn () => {\n\t\t *\t\t\t\tcmd.off( 'set:isEnabled', forceDisable );\n\t\t *\t\t\t\tcmd.refresh();\n\t\t *\t\t\t};\n\t\t *\n\t\t *\t\t\tfunction forceDisable( evt ) {\n\t\t *\t\t\t\tevt.return = false;\n\t\t *\t\t\t\tevt.stop();\n\t\t *\t\t\t}\n\t\t *\t\t}\n\t\t *\n\t\t *\t\t// Usage:\n\t\t *\n\t\t *\t\t// Disabling the command.\n\t\t *\t\tconst enableBold = disableCommand( editor.commands.get( 'bold' ) );\n\t\t *\n\t\t *\t\t// Enabling the command again.\n\t\t *\t\tenableBold();\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #isEnabled\n\t\t */\n\t\tthis.set( 'isEnabled', false );\n\n\t\t/**\n\t\t * Holds identifiers for {@link #forceDisabled} mechanism.\n\t\t *\n\t\t * @type {Set.<String>}\n\t\t * @private\n\t\t */\n\t\tthis._disableStack = new Set();\n\n\t\tthis.decorate( 'execute' );\n\n\t\t// By default every command is refreshed when changes are applied to the model.\n\t\tthis.listenTo( this.editor.model.document, 'change', () => {\n\t\t\tthis.refresh();\n\t\t} );\n\n\t\tthis.on( 'execute', evt => {\n\t\t\tif ( !this.isEnabled ) {\n\t\t\t\tevt.stop();\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\n\t\t// By default commands are disabled when the editor is in read-only mode.\n\t\tthis.listenTo( editor, 'change:isReadOnly', ( evt, name, value ) => {\n\t\t\tif ( value ) {\n\t\t\t\tthis.forceDisabled( 'readOnlyMode' );\n\t\t\t} else {\n\t\t\t\tthis.clearForceDisabled( 'readOnlyMode' );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Refreshes the command. The command should update its {@link #isEnabled} and {@link #value} properties\n\t * in this method.\n\t *\n\t * This method is automatically called when\n\t * {@link module:engine/model/document~Document#event:change any changes are applied to the document}.\n\t */\n\trefresh() {\n\t\tthis.isEnabled = true;\n\t}\n\n\t/**\n\t * Disables the command.\n\t *\n\t * Command may be disabled by multiple features or algorithms (at once). When disabling a command, unique id should be passed\n\t * (e.g. feature name). The same identifier should be used when {@link #clearForceDisabled enabling back} the command.\n\t * The command becomes enabled only after all features {@link #clearForceDisabled enabled it back}.\n\t *\n\t * Disabling and enabling a command:\n\t *\n\t *\t\tcommand.isEnabled; // -> true\n\t *\t\tcommand.forceDisabled( 'MyFeature' );\n\t *\t\tcommand.isEnabled; // -> false\n\t *\t\tcommand.clearForceDisabled( 'MyFeature' );\n\t *\t\tcommand.isEnabled; // -> true\n\t *\n\t * Command disabled by multiple features:\n\t *\n\t *\t\tcommand.forceDisabled( 'MyFeature' );\n\t *\t\tcommand.forceDisabled( 'OtherFeature' );\n\t *\t\tcommand.clearForceDisabled( 'MyFeature' );\n\t *\t\tcommand.isEnabled; // -> false\n\t *\t\tcommand.clearForceDisabled( 'OtherFeature' );\n\t *\t\tcommand.isEnabled; // -> true\n\t *\n\t * Multiple disabling with the same identifier is redundant:\n\t *\n\t *\t\tcommand.forceDisabled( 'MyFeature' );\n\t *\t\tcommand.forceDisabled( 'MyFeature' );\n\t *\t\tcommand.clearForceDisabled( 'MyFeature' );\n\t *\t\tcommand.isEnabled; // -> true\n\t *\n\t * **Note:** some commands or algorithms may have more complex logic when it comes to enabling or disabling certain commands,\n\t * so the command might be still disabled after {@link #clearForceDisabled} was used.\n\t *\n\t * @param {String} id Unique identifier for disabling. Use the same id when {@link #clearForceDisabled enabling back} the command.\n\t */\n\tforceDisabled( id ) {\n\t\tthis._disableStack.add( id );\n\n\t\tif ( this._disableStack.size == 1 ) {\n\t\t\tthis.on( 'set:isEnabled', forceDisable, { priority: 'highest' } );\n\t\t\tthis.isEnabled = false;\n\t\t}\n\t}\n\n\t/**\n\t * Clears forced disable previously set through {@link #clearForceDisabled}. See {@link #clearForceDisabled}.\n\t *\n\t * @param {String} id Unique identifier, equal to the one passed in {@link #forceDisabled} call.\n\t */\n\tclearForceDisabled( id ) {\n\t\tthis._disableStack.delete( id );\n\n\t\tif ( this._disableStack.size == 0 ) {\n\t\t\tthis.off( 'set:isEnabled', forceDisable );\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * A command may accept parameters. They will be passed from {@link module:core/editor/editor~Editor#execute `editor.execute()`}\n\t * to the command.\n\t *\n\t * The `execute()` method will automatically abort when the command is disabled ({@link #isEnabled} is `false`).\n\t * This behavior is implemented by a high priority listener to the {@link #event:execute} event.\n\t *\n\t * In order to see how to disable a command from \"outside\" see the {@link #isEnabled} documentation.\n\t *\n\t * @fires execute\n\t */\n\texecute() {}\n\n\t/**\n\t * Destroys the command.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Event fired by the {@link #execute} method. The command action is a listener to this event so it's\n\t * possible to change/cancel the behavior of the command by listening to this event.\n\t *\n\t * See {@link module:utils/observablemixin~ObservableMixin#decorate} for more information and samples.\n\t *\n\t * **Note:** This event is fired even if command is disabled. However, it is automatically blocked\n\t * by a high priority listener in order to prevent command execution.\n\t *\n\t * @event execute\n\t */\n}\n\nmix( Command, ObservableMixin );\n\n// Helper function that forces command to be disabled.\nfunction forceDisable( evt ) {\n\tevt.return = false;\n\tevt.stop();\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/emittermixin\n */\n\nimport EventInfo from './eventinfo';\nimport uid from './uid';\nimport priorities from './priorities';\n\n// To check if component is loaded more than once.\nimport './version';\n\nconst _listeningTo = Symbol( 'listeningTo' );\nconst _emitterId = Symbol( 'emitterId' );\n\n/**\n * Mixin that injects the {@link ~Emitter events API} into its host.\n *\n * @mixin EmitterMixin\n * @implements module:utils/emittermixin~Emitter\n */\nconst EmitterMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\ton( event, callback, options = {} ) {\n\t\tthis.listenTo( this, event, callback, options );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tonce( event, callback, options ) {\n\t\tlet wasFired = false;\n\n\t\tconst onceCallback = function( event, ...args ) {\n\t\t\t// Ensure the callback is called only once even if the callback itself leads to re-firing the event\n\t\t\t// (which would call the callback again).\n\t\t\tif ( !wasFired ) {\n\t\t\t\twasFired = true;\n\n\t\t\t\t// Go off() at the first call.\n\t\t\t\tevent.off();\n\n\t\t\t\t// Go with the original callback.\n\t\t\t\tcallback.call( this, event, ...args );\n\t\t\t}\n\t\t};\n\n\t\t// Make a similar on() call, simply replacing the callback.\n\t\tthis.listenTo( this, event, onceCallback, options );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\toff( event, callback ) {\n\t\tthis.stopListening( this, event, callback );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tlistenTo( emitter, event, callback, options = {} ) {\n\t\tlet emitterInfo, eventCallbacks;\n\n\t\t// _listeningTo contains a list of emitters that this object is listening to.\n\t\t// This list has the following format:\n\t\t//\n\t\t// _listeningTo: {\n\t\t//     emitterId: {\n\t\t//         emitter: emitter,\n\t\t//         callbacks: {\n\t\t//             event1: [ callback1, callback2, ... ]\n\t\t//             ....\n\t\t//         }\n\t\t//     },\n\t\t//     ...\n\t\t// }\n\n\t\tif ( !this[ _listeningTo ] ) {\n\t\t\tthis[ _listeningTo ] = {};\n\t\t}\n\n\t\tconst emitters = this[ _listeningTo ];\n\n\t\tif ( !_getEmitterId( emitter ) ) {\n\t\t\t_setEmitterId( emitter );\n\t\t}\n\n\t\tconst emitterId = _getEmitterId( emitter );\n\n\t\tif ( !( emitterInfo = emitters[ emitterId ] ) ) {\n\t\t\temitterInfo = emitters[ emitterId ] = {\n\t\t\t\temitter,\n\t\t\t\tcallbacks: {}\n\t\t\t};\n\t\t}\n\n\t\tif ( !( eventCallbacks = emitterInfo.callbacks[ event ] ) ) {\n\t\t\teventCallbacks = emitterInfo.callbacks[ event ] = [];\n\t\t}\n\n\t\teventCallbacks.push( callback );\n\n\t\t// Finally register the callback to the event.\n\t\tcreateEventNamespace( emitter, event );\n\t\tconst lists = getCallbacksListsForNamespace( emitter, event );\n\t\tconst priority = priorities.get( options.priority );\n\n\t\tconst callbackDefinition = {\n\t\t\tcallback,\n\t\t\tpriority\n\t\t};\n\n\t\t// Add the callback to all callbacks list.\n\t\tfor ( const callbacks of lists ) {\n\t\t\t// Add the callback to the list in the right priority position.\n\t\t\tlet added = false;\n\n\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\tif ( callbacks[ i ].priority < priority ) {\n\t\t\t\t\tcallbacks.splice( i, 0, callbackDefinition );\n\t\t\t\t\tadded = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add at the end, if right place was not found.\n\t\t\tif ( !added ) {\n\t\t\t\tcallbacks.push( callbackDefinition );\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstopListening( emitter, event, callback ) {\n\t\tconst emitters = this[ _listeningTo ];\n\t\tlet emitterId = emitter && _getEmitterId( emitter );\n\t\tconst emitterInfo = emitters && emitterId && emitters[ emitterId ];\n\t\tconst eventCallbacks = emitterInfo && event && emitterInfo.callbacks[ event ];\n\n\t\t// Stop if nothing has been listened.\n\t\tif ( !emitters || ( emitter && !emitterInfo ) || ( event && !eventCallbacks ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// All params provided. off() that single callback.\n\t\tif ( callback ) {\n\t\t\tremoveCallback( emitter, event, callback );\n\t\t}\n\t\t// Only `emitter` and `event` provided. off() all callbacks for that event.\n\t\telse if ( eventCallbacks ) {\n\t\t\twhile ( ( callback = eventCallbacks.pop() ) ) {\n\t\t\t\tremoveCallback( emitter, event, callback );\n\t\t\t}\n\n\t\t\tdelete emitterInfo.callbacks[ event ];\n\t\t}\n\t\t// Only `emitter` provided. off() all events for that emitter.\n\t\telse if ( emitterInfo ) {\n\t\t\tfor ( event in emitterInfo.callbacks ) {\n\t\t\t\tthis.stopListening( emitter, event );\n\t\t\t}\n\t\t\tdelete emitters[ emitterId ];\n\t\t}\n\t\t// No params provided. off() all emitters.\n\t\telse {\n\t\t\tfor ( emitterId in emitters ) {\n\t\t\t\tthis.stopListening( emitters[ emitterId ].emitter );\n\t\t\t}\n\t\t\tdelete this[ _listeningTo ];\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tfire( eventOrInfo, ...args ) {\n\t\tconst eventInfo = eventOrInfo instanceof EventInfo ? eventOrInfo : new EventInfo( this, eventOrInfo );\n\t\tconst event = eventInfo.name;\n\t\tlet callbacks = getCallbacksForEvent( this, event );\n\n\t\t// Record that the event passed this emitter on its path.\n\t\teventInfo.path.push( this );\n\n\t\t// Handle event listener callbacks first.\n\t\tif ( callbacks ) {\n\t\t\t// Arguments passed to each callback.\n\t\t\tconst callbackArgs = [ eventInfo, ...args ];\n\n\t\t\t// Copying callbacks array is the easiest and most secure way of preventing infinite loops, when event callbacks\n\t\t\t// are added while processing other callbacks. Previous solution involved adding counters (unique ids) but\n\t\t\t// failed if callbacks were added to the queue before currently processed callback.\n\t\t\t// If this proves to be too inefficient, another method is to change `.on()` so callbacks are stored if same\n\t\t\t// event is currently processed. Then, `.fire()` at the end, would have to add all stored events.\n\t\t\tcallbacks = Array.from( callbacks );\n\n\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\tcallbacks[ i ].callback.apply( this, callbackArgs );\n\n\t\t\t\t// Remove the callback from future requests if off() has been called.\n\t\t\t\tif ( eventInfo.off.called ) {\n\t\t\t\t\t// Remove the called mark for the next calls.\n\t\t\t\t\tdelete eventInfo.off.called;\n\n\t\t\t\t\tremoveCallback( this, event, callbacks[ i ].callback );\n\t\t\t\t}\n\n\t\t\t\t// Do not execute next callbacks if stop() was called.\n\t\t\t\tif ( eventInfo.stop.called ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Delegate event to other emitters if needed.\n\t\tif ( this._delegations ) {\n\t\t\tconst destinations = this._delegations.get( event );\n\t\t\tconst passAllDestinations = this._delegations.get( '*' );\n\n\t\t\tif ( destinations ) {\n\t\t\t\tfireDelegatedEvents( destinations, eventInfo, args );\n\t\t\t}\n\n\t\t\tif ( passAllDestinations ) {\n\t\t\t\tfireDelegatedEvents( passAllDestinations, eventInfo, args );\n\t\t\t}\n\t\t}\n\n\t\treturn eventInfo.return;\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdelegate( ...events ) {\n\t\treturn {\n\t\t\tto: ( emitter, nameOrFunction ) => {\n\t\t\t\tif ( !this._delegations ) {\n\t\t\t\t\tthis._delegations = new Map();\n\t\t\t\t}\n\n\t\t\t\t// Originally there was a for..of loop which unfortunately caused an error in Babel that didn't allow\n\t\t\t\t// build an application. See: https://github.com/ckeditor/ckeditor5-react/issues/40.\n\t\t\t\tevents.forEach( eventName => {\n\t\t\t\t\tconst destinations = this._delegations.get( eventName );\n\n\t\t\t\t\tif ( !destinations ) {\n\t\t\t\t\t\tthis._delegations.set( eventName, new Map( [ [ emitter, nameOrFunction ] ] ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestinations.set( emitter, nameOrFunction );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstopDelegating( event, emitter ) {\n\t\tif ( !this._delegations ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !event ) {\n\t\t\tthis._delegations.clear();\n\t\t} else if ( !emitter ) {\n\t\t\tthis._delegations.delete( event );\n\t\t} else {\n\t\t\tconst destinations = this._delegations.get( event );\n\n\t\t\tif ( destinations ) {\n\t\t\t\tdestinations.delete( emitter );\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport default EmitterMixin;\n\n/**\n * Emitter/listener interface.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/emittermixin~EmitterMixin} mixin.\n *\n * @interface Emitter\n */\n\n/**\n * Registers a callback function to be executed when an event is fired.\n *\n * Shorthand for {@link #listenTo `this.listenTo( this, event, callback, options )`} (it makes the emitter\n * listen on itself).\n *\n * @method #on\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Registers a callback function to be executed on the next time the event is fired only. This is similar to\n * calling {@link #on} followed by {@link #off} in the callback.\n *\n * @method #once\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Stops executing the callback on the given event.\n * Shorthand for {@link #stopListening `this.stopListening( this, event, callback )`}.\n *\n * @method #off\n * @param {String} event The name of the event.\n * @param {Function} callback The function to stop being called.\n */\n\n/**\n * Registers a callback function to be executed when an event is fired in a specific (emitter) object.\n *\n * Events can be grouped in namespaces using `:`.\n * When namespaced event is fired, it additionally fires all callbacks for that namespace.\n *\n *\t\t// myEmitter.on( ... ) is a shorthand for myEmitter.listenTo( myEmitter, ... ).\n *\t\tmyEmitter.on( 'myGroup', genericCallback );\n *\t\tmyEmitter.on( 'myGroup:myEvent', specificCallback );\n *\n *\t\t// genericCallback is fired.\n *\t\tmyEmitter.fire( 'myGroup' );\n *\t\t// both genericCallback and specificCallback are fired.\n *\t\tmyEmitter.fire( 'myGroup:myEvent' );\n *\t\t// genericCallback is fired even though there are no callbacks for \"foo\".\n *\t\tmyEmitter.fire( 'myGroup:foo' );\n *\n * An event callback can {@link module:utils/eventinfo~EventInfo#stop stop the event} and\n * set the {@link module:utils/eventinfo~EventInfo#return return value} of the {@link #fire} method.\n *\n * @method #listenTo\n * @param {module:utils/emittermixin~Emitter} emitter The object that fires the event.\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Stops listening for events. It can be used at different levels:\n *\n * * To stop listening to a specific callback.\n * * To stop listening to a specific event.\n * * To stop listening to all events fired by a specific object.\n * * To stop listening to all events fired by all objects.\n *\n * @method #stopListening\n * @param {module:utils/emittermixin~Emitter} [emitter] The object to stop listening to. If omitted, stops it for all objects.\n * @param {String} [event] (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n * for all events from `emitter`.\n * @param {Function} [callback] (Requires the `event`) The function to be removed from the call list for the given\n * `event`.\n */\n\n/**\n * Fires an event, executing all callbacks registered for it.\n *\n * The first parameter passed to callbacks is an {@link module:utils/eventinfo~EventInfo} object,\n * followed by the optional `args` provided in the `fire()` method call.\n *\n * @method #fire\n * @param {String|module:utils/eventinfo~EventInfo} eventOrInfo The name of the event or `EventInfo` object if event is delegated.\n * @param {...*} [args] Additional arguments to be passed to the callbacks.\n * @returns {*} By default the method returns `undefined`. However, the return value can be changed by listeners\n * through modification of the {@link module:utils/eventinfo~EventInfo#return `evt.return`}'s property (the event info\n * is the first param of every callback).\n */\n\n/**\n * Delegates selected events to another {@link module:utils/emittermixin~Emitter}. For instance:\n *\n *\t\temitterA.delegate( 'eventX' ).to( emitterB );\n *\t\temitterA.delegate( 'eventX', 'eventY' ).to( emitterC );\n *\n * then `eventX` is delegated (fired by) `emitterB` and `emitterC` along with `data`:\n *\n *\t\temitterA.fire( 'eventX', data );\n *\n * and `eventY` is delegated (fired by) `emitterC` along with `data`:\n *\n *\t\temitterA.fire( 'eventY', data );\n *\n * @method #delegate\n * @param {...String} events Event names that will be delegated to another emitter.\n * @returns {module:utils/emittermixin~EmitterMixinDelegateChain}\n */\n\n/**\n * Stops delegating events. It can be used at different levels:\n *\n * * To stop delegating all events.\n * * To stop delegating a specific event to all emitters.\n * * To stop delegating a specific event to a specific emitter.\n *\n * @method #stopDelegating\n * @param {String} [event] The name of the event to stop delegating. If omitted, stops it all delegations.\n * @param {module:utils/emittermixin~Emitter} [emitter] (requires `event`) The object to stop delegating a particular event to.\n * If omitted, stops delegation of `event` to all emitters.\n */\n\n/**\n * Checks if `listeningEmitter` listens to an emitter with given `listenedToEmitterId` and if so, returns that emitter.\n * If not, returns `null`.\n *\n * @protected\n * @param {module:utils/emittermixin~EmitterMixin} listeningEmitter Emitter that listens.\n * @param {String} listenedToEmitterId Unique emitter id of emitter listened to.\n * @returns {module:utils/emittermixin~EmitterMixin|null}\n */\nexport function _getEmitterListenedTo( listeningEmitter, listenedToEmitterId ) {\n\tif ( listeningEmitter[ _listeningTo ] && listeningEmitter[ _listeningTo ][ listenedToEmitterId ] ) {\n\t\treturn listeningEmitter[ _listeningTo ][ listenedToEmitterId ].emitter;\n\t}\n\n\treturn null;\n}\n\n/**\n * Sets emitter's unique id.\n *\n * **Note:** `_emitterId` can be set only once.\n *\n * @protected\n * @param {module:utils/emittermixin~EmitterMixin} emitter Emitter for which id will be set.\n * @param {String} [id] Unique id to set. If not passed, random unique id will be set.\n */\nexport function _setEmitterId( emitter, id ) {\n\tif ( !emitter[ _emitterId ] ) {\n\t\temitter[ _emitterId ] = id || uid();\n\t}\n}\n\n/**\n * Returns emitter's unique id.\n *\n * @protected\n * @param {module:utils/emittermixin~EmitterMixin} emitter Emitter which id will be returned.\n */\nexport function _getEmitterId( emitter ) {\n\treturn emitter[ _emitterId ];\n}\n\n// Gets the internal `_events` property of the given object.\n// `_events` property store all lists with callbacks for registered event names.\n// If there were no events registered on the object, empty `_events` object is created.\nfunction getEvents( source ) {\n\tif ( !source._events ) {\n\t\tObject.defineProperty( source, '_events', {\n\t\t\tvalue: {}\n\t\t} );\n\t}\n\n\treturn source._events;\n}\n\n// Creates event node for generic-specific events relation architecture.\nfunction makeEventNode() {\n\treturn {\n\t\tcallbacks: [],\n\t\tchildEvents: []\n\t};\n}\n\n// Creates an architecture for generic-specific events relation.\n// If needed, creates all events for given eventName, i.e. if the first registered event\n// is foo:bar:abc, it will create foo:bar:abc, foo:bar and foo event and tie them together.\n// It also copies callbacks from more generic events to more specific events when\n// specific events are created.\nfunction createEventNamespace( source, eventName ) {\n\tconst events = getEvents( source );\n\n\t// First, check if the event we want to add to the structure already exists.\n\tif ( events[ eventName ] ) {\n\t\t// If it exists, we don't have to do anything.\n\t\treturn;\n\t}\n\n\t// In other case, we have to create the structure for the event.\n\t// Note, that we might need to create intermediate events too.\n\t// I.e. if foo:bar:abc is being registered and we only have foo in the structure,\n\t// we need to also register foo:bar.\n\n\t// Currently processed event name.\n\tlet name = eventName;\n\t// Name of the event that is a child event for currently processed event.\n\tlet childEventName = null;\n\n\t// Array containing all newly created specific events.\n\tconst newEventNodes = [];\n\n\t// While loop can't check for ':' index because we have to handle generic events too.\n\t// In each loop, we truncate event name, going from the most specific name to the generic one.\n\t// I.e. foo:bar:abc -> foo:bar -> foo.\n\twhile ( name !== '' ) {\n\t\tif ( events[ name ] ) {\n\t\t\t// If the currently processed event name is already registered, we can be sure\n\t\t\t// that it already has all the structure created, so we can break the loop here\n\t\t\t// as no more events need to be registered.\n\t\t\tbreak;\n\t\t}\n\n\t\t// If this event is not yet registered, create a new object for it.\n\t\tevents[ name ] = makeEventNode();\n\t\t// Add it to the array with newly created events.\n\t\tnewEventNodes.push( events[ name ] );\n\n\t\t// Add previously processed event name as a child of this event.\n\t\tif ( childEventName ) {\n\t\t\tevents[ name ].childEvents.push( childEventName );\n\t\t}\n\n\t\tchildEventName = name;\n\t\t// If `.lastIndexOf()` returns -1, `.substr()` will return '' which will break the loop.\n\t\tname = name.substr( 0, name.lastIndexOf( ':' ) );\n\t}\n\n\tif ( name !== '' ) {\n\t\t// If name is not empty, we found an already registered event that was a parent of the\n\t\t// event we wanted to register.\n\n\t\t// Copy that event's callbacks to newly registered events.\n\t\tfor ( const node of newEventNodes ) {\n\t\t\tnode.callbacks = events[ name ].callbacks.slice();\n\t\t}\n\n\t\t// Add last newly created event to the already registered event.\n\t\tevents[ name ].childEvents.push( childEventName );\n\t}\n}\n\n// Gets an array containing callbacks list for a given event and it's more specific events.\n// I.e. if given event is foo:bar and there is also foo:bar:abc event registered, this will\n// return callback list of foo:bar and foo:bar:abc (but not foo).\nfunction getCallbacksListsForNamespace( source, eventName ) {\n\tconst eventNode = getEvents( source )[ eventName ];\n\n\tif ( !eventNode ) {\n\t\treturn [];\n\t}\n\n\tlet callbacksLists = [ eventNode.callbacks ];\n\n\tfor ( let i = 0; i < eventNode.childEvents.length; i++ ) {\n\t\tconst childCallbacksLists = getCallbacksListsForNamespace( source, eventNode.childEvents[ i ] );\n\n\t\tcallbacksLists = callbacksLists.concat( childCallbacksLists );\n\t}\n\n\treturn callbacksLists;\n}\n\n// Get the list of callbacks for a given event, but only if there any callbacks have been registered.\n// If there are no callbacks registered for given event, it checks if this is a specific event and looks\n// for callbacks for it's more generic version.\nfunction getCallbacksForEvent( source, eventName ) {\n\tlet event;\n\n\tif ( !source._events || !( event = source._events[ eventName ] ) || !event.callbacks.length ) {\n\t\t// There are no callbacks registered for specified eventName.\n\t\t// But this could be a specific-type event that is in a namespace.\n\t\tif ( eventName.indexOf( ':' ) > -1 ) {\n\t\t\t// If the eventName is specific, try to find callback lists for more generic event.\n\t\t\treturn getCallbacksForEvent( source, eventName.substr( 0, eventName.lastIndexOf( ':' ) ) );\n\t\t} else {\n\t\t\t// If this is a top-level generic event, return null;\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn event.callbacks;\n}\n\n// Fires delegated events for given map of destinations.\n//\n// @private\n// * @param {Map.<utils.Emitter>} destinations A map containing `[ {@link utils.Emitter}, \"event name\" ]` pair destinations.\n// * @param {utils.EventInfo} eventInfo The original event info object.\n// * @param {Array.<*>} fireArgs Arguments the original event was fired with.\nfunction fireDelegatedEvents( destinations, eventInfo, fireArgs ) {\n\tfor ( let [ emitter, name ] of destinations ) {\n\t\tif ( !name ) {\n\t\t\tname = eventInfo.name;\n\t\t} else if ( typeof name == 'function' ) {\n\t\t\tname = name( eventInfo.name );\n\t\t}\n\n\t\tconst delegatedInfo = new EventInfo( eventInfo.source, name );\n\n\t\tdelegatedInfo.path = [ ...eventInfo.path ];\n\n\t\temitter.fire( delegatedInfo, ...fireArgs );\n\t}\n}\n\n// Removes callback from emitter for given event.\n//\n// @param {module:utils/emittermixin~Emitter} emitter\n// @param {String} event\n// @param {Function} callback\nfunction removeCallback( emitter, event, callback ) {\n\tconst lists = getCallbacksListsForNamespace( emitter, event );\n\n\tfor ( const callbacks of lists ) {\n\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\tif ( callbacks[ i ].callback == callback ) {\n\t\t\t\t// Remove the callback from the list (fixing the next index).\n\t\t\t\tcallbacks.splice( i, 1 );\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * The return value of {@link ~EmitterMixin#delegate}.\n *\n * @interface module:utils/emittermixin~EmitterMixinDelegateChain\n */\n\n/**\n * Selects destination for {@link module:utils/emittermixin~EmitterMixin#delegate} events.\n *\n * @method #to\n * @param {module:utils/emittermixin~Emitter} emitter An `EmitterMixin` instance which is the destination for delegated events.\n * @param {String|Function} [nameOrFunction] A custom event name or function which converts the original name string.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Set of utils related to keyboard support.\n *\n * @module utils/keyboard\n */\n\nimport CKEditorError from './ckeditorerror';\nimport env from './env';\n\nconst macGlyphsToModifiers = {\n\t'⌘': 'ctrl',\n\t'⇧': 'shift',\n\t'⌥': 'alt'\n};\n\nconst modifiersToMacGlyphs = {\n\t'ctrl': '⌘',\n\t'shift': '⇧',\n\t'alt': '⌥'\n};\n\n/**\n * Object with `keyName => keyCode` pairs for a set of known keys.\n *\n * Contains:\n *\n * * `a-z`,\n * * `0-9`,\n * * `f1-f12`,\n * * `arrow(left|up|right|bottom)`,\n * * `backspace`, `delete`, `enter`, `esc`, `tab`,\n * * `ctrl`, `cmd`, `shift`, `alt`.\n */\nexport const keyCodes = generateKnownKeyCodes();\n\n/**\n * Converts a key name or a {@link module:utils/keyboard~KeystrokeInfo keystroke info} into a key code.\n *\n * Note: Key names are matched with {@link module:utils/keyboard~keyCodes} in a case-insensitive way.\n *\n * @param {String|module:utils/keyboard~KeystrokeInfo} Key name (see {@link module:utils/keyboard~keyCodes})\n * or a keystroke data object.\n * @returns {Number} Key or keystroke code.\n */\nexport function getCode( key ) {\n\tlet keyCode;\n\n\tif ( typeof key == 'string' ) {\n\t\tkeyCode = keyCodes[ key.toLowerCase() ];\n\n\t\tif ( !keyCode ) {\n\t\t\t/**\n\t\t\t * Unknown key name. Only key names contained by the {@link module:utils/keyboard~keyCodes} can be used.\n\t\t\t *\n\t\t\t * @errror keyboard-unknown-key\n\t\t\t * @param {String} key\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'keyboard-unknown-key: Unknown key name.',\n\t\t\t\tnull, { key }\n\t\t\t);\n\t\t}\n\t} else {\n\t\tkeyCode = key.keyCode +\n\t\t\t( key.altKey ? keyCodes.alt : 0 ) +\n\t\t\t( key.ctrlKey ? keyCodes.ctrl : 0 ) +\n\t\t\t( key.shiftKey ? keyCodes.shift : 0 );\n\t}\n\n\treturn keyCode;\n}\n\n/**\n * Parses keystroke and returns a keystroke code that will match the code returned by\n * link {@link module:utils/keyboard.getCode} for a corresponding {@link module:utils/keyboard~KeystrokeInfo keystroke info}.\n *\n * The keystroke can be passed in two formats:\n *\n * * as a single string – e.g. `ctrl + A`,\n * * as an array of {@link module:utils/keyboard~keyCodes known key names} and key codes – e.g.:\n *   * `[ 'ctrl', 32 ]` (ctrl + space),\n *   * `[ 'ctrl', 'a' ]` (ctrl + A).\n *\n * Note: Key names are matched with {@link module:utils/keyboard~keyCodes} in a case-insensitive way.\n *\n * Note: Only keystrokes with a single non-modifier key are supported (e.g. `ctrl+A` is OK, but `ctrl+A+B` is not).\n *\n * @param {String|Array.<Number|String>} keystroke Keystroke definition.\n * @returns {Number} Keystroke code.\n */\nexport function parseKeystroke( keystroke ) {\n\tif ( typeof keystroke == 'string' ) {\n\t\tkeystroke = splitKeystrokeText( keystroke );\n\t}\n\n\treturn keystroke\n\t\t.map( key => ( typeof key == 'string' ) ? getCode( key ) : key )\n\t\t.reduce( ( key, sum ) => sum + key, 0 );\n}\n\n/**\n * It translates any keystroke string text like `\"CTRL+A\"` to an\n * environment–specific keystroke, i.e. `\"⌘A\"` on Mac OSX.\n *\n * @param {String} keystroke Keystroke text.\n * @returns {String} Keystroke text specific for the environment.\n */\nexport function getEnvKeystrokeText( keystroke ) {\n\tif ( !env.isMac ) {\n\t\treturn keystroke;\n\t}\n\n\treturn splitKeystrokeText( keystroke )\n\t\t// Replace modifiers (e.g. \"ctrl\") with Mac glyphs (e.g. \"⌘\") first.\n\t\t.map( key => modifiersToMacGlyphs[ key.toLowerCase() ] || key )\n\n\t\t// Decide whether to put \"+\" between keys in the keystroke or not.\n\t\t.reduce( ( value, key ) => {\n\t\t\tif ( value.slice( -1 ) in macGlyphsToModifiers ) {\n\t\t\t\treturn value + key;\n\t\t\t} else {\n\t\t\t\treturn value + '+' + key;\n\t\t\t}\n\t\t} );\n}\n\nfunction generateKnownKeyCodes() {\n\tconst keyCodes = {\n\t\tarrowleft: 37,\n\t\tarrowup: 38,\n\t\tarrowright: 39,\n\t\tarrowdown: 40,\n\t\tbackspace: 8,\n\t\tdelete: 46,\n\t\tenter: 13,\n\t\tspace: 32,\n\t\tesc: 27,\n\t\ttab: 9,\n\n\t\t// The idea about these numbers is that they do not collide with any real key codes, so we can use them\n\t\t// like bit masks.\n\t\tctrl: 0x110000,\n\t\t// Has the same code as ctrl, because their behaviour should be unified across the editor.\n\t\t// See http://ckeditor.github.io/editor-recommendations/general-policies#ctrl-vs-cmd\n\t\tcmd: 0x110000,\n\t\tshift: 0x220000,\n\t\talt: 0x440000\n\t};\n\n\t// a-z\n\tfor ( let code = 65; code <= 90; code++ ) {\n\t\tconst letter = String.fromCharCode( code );\n\n\t\tkeyCodes[ letter.toLowerCase() ] = code;\n\t}\n\n\t// 0-9\n\tfor ( let code = 48; code <= 57; code++ ) {\n\t\tkeyCodes[ code - 48 ] = code;\n\t}\n\n\t// F1-F12\n\tfor ( let code = 112; code <= 123; code++ ) {\n\t\tkeyCodes[ 'f' + ( code - 111 ) ] = code;\n\t}\n\n\treturn keyCodes;\n}\n\nfunction splitKeystrokeText( keystroke ) {\n\treturn keystroke.split( /\\s*\\+\\s*/ );\n}\n\n/**\n * Information about a keystroke.\n *\n * @interface module:utils/keyboard~KeystrokeInfo\n */\n\n/**\n * The [key code](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode).\n *\n * @member {Number} module:utils/keyboard~KeystrokeInfo#keyCode\n */\n\n/**\n * Whether the <kbd>Alt</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#altKey\n */\n\n/**\n * Whether the <kbd>Ctrl</kbd> or <kbd>Cmd</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#ctrlKey\n */\n\n/**\n * Whether the <kbd>Shift</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#shiftKey\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/range\n */\n\nimport Position from './position';\nimport TreeWalker from './treewalker';\n\n/**\n * Range in the view tree. A range is represented by its start and end {@link module:engine/view/position~Position positions}.\n *\n * In order to create a new position instance use the `createPosition*()` factory methods available in:\n *\n * * {@link module:engine/view/view~View}\n * * {@link module:engine/view/downcastwriter~DowncastWriter}\n * * {@link module:engine/view/upcastwriter~UpcastWriter}\n */\nexport default class Range {\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** Constructor creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at the `start` position.\n\t */\n\tconstructor( start, end = null ) {\n\t\t/**\n\t\t * Start position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position}\n\t\t */\n\t\tthis.start = start.clone();\n\n\t\t/**\n\t\t * End position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position}\n\t\t */\n\t\tthis.end = end ? end.clone() : start.clone();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link module:engine/view/item~Item view items} that are in this range and returns\n\t * them together with additional information like length or {@link module:engine/view/position~Position positions},\n\t * grouped as {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * This iterator uses {@link module:engine/view/treewalker~TreeWalker TreeWalker} with `boundaries` set to this range and\n\t * `ignoreElementEnd` option\n\t * set to `true`.\n\t *\n\t * @returns {Iterable.<module:engine/view/treewalker~TreeWalkerValue>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tyield* new TreeWalker( { boundaries: this, ignoreElementEnd: true } );\n\t}\n\n\t/**\n\t * Returns whether the range is collapsed, that is it start and end positions are equal.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.start.isEqual( this.end );\n\t}\n\n\t/**\n\t * Returns whether this range is flat, that is if {@link module:engine/view/range~Range#start start} position and\n\t * {@link module:engine/view/range~Range#end end} position are in the same {@link module:engine/view/position~Position#parent parent}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isFlat() {\n\t\treturn this.start.parent === this.end.parent;\n\t}\n\n\t/**\n\t * Range root element.\n\t *\n\t * @type {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.start.root;\n\t}\n\n\t/**\n\t * Creates a maximal range that has the same content as this range but is expanded in both ways (at the beginning\n\t * and at the end).\n\t *\n\t * For example:\n\t *\n\t *\t\t<p>Foo</p><p><b>{Bar}</b></p> -> <p>Foo</p>[<p><b>Bar</b>]</p>\n\t *\t\t<p><b>foo</b>{bar}<span></span></p> -> <p><b>foo[</b>bar<span></span>]</p>\n\t *\n\t * Note that in the sample above:\n\t *\n\t * - `<p>` have type of {@link module:engine/view/containerelement~ContainerElement},\n\t * - `<b>` have type of {@link module:engine/view/attributeelement~AttributeElement},\n\t * - `<span>` have type of {@link module:engine/view/uielement~UIElement}.\n\t *\n\t * @returns {module:engine/view/range~Range} Enlarged range.\n\t */\n\tgetEnlarged() {\n\t\tlet start = this.start.getLastMatchingPosition( enlargeTrimSkip, { direction: 'backward' } );\n\t\tlet end = this.end.getLastMatchingPosition( enlargeTrimSkip );\n\n\t\t// Fix positions, in case if they are in Text node.\n\t\tif ( start.parent.is( 'text' ) && start.isAtStart ) {\n\t\t\tstart = Position._createBefore( start.parent );\n\t\t}\n\n\t\tif ( end.parent.is( 'text' ) && end.isAtEnd ) {\n\t\t\tend = Position._createAfter( end.parent );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a minimum range that has the same content as this range but is trimmed in both ways (at the beginning\n\t * and at the end).\n\t *\n\t * For example:\n\t *\n\t *\t\t<p>Foo</p>[<p><b>Bar</b>]</p> -> <p>Foo</p><p><b>{Bar}</b></p>\n\t *\t\t<p><b>foo[</b>bar<span></span>]</p> -> <p><b>foo</b>{bar}<span></span></p>\n\t *\n\t * Note that in the sample above:\n\t *\n\t * - `<p>` have type of {@link module:engine/view/containerelement~ContainerElement},\n\t * - `<b>` have type of {@link module:engine/view/attributeelement~AttributeElement},\n\t * - `<span>` have type of {@link module:engine/view/uielement~UIElement}.\n\t *\n\t * @returns {module:engine/view/range~Range} Shrink range.\n\t */\n\tgetTrimmed() {\n\t\tlet start = this.start.getLastMatchingPosition( enlargeTrimSkip );\n\n\t\tif ( start.isAfter( this.end ) || start.isEqual( this.end ) ) {\n\t\t\treturn new Range( start, start );\n\t\t}\n\n\t\tlet end = this.end.getLastMatchingPosition( enlargeTrimSkip, { direction: 'backward' } );\n\t\tconst nodeAfterStart = start.nodeAfter;\n\t\tconst nodeBeforeEnd = end.nodeBefore;\n\n\t\t// Because TreeWalker prefers positions next to text node, we need to move them manually into these text nodes.\n\t\tif ( nodeAfterStart && nodeAfterStart.is( 'text' ) ) {\n\t\t\tstart = new Position( nodeAfterStart, 0 );\n\t\t}\n\n\t\tif ( nodeBeforeEnd && nodeBeforeEnd.is( 'text' ) ) {\n\t\t\tend = new Position( nodeBeforeEnd, nodeBeforeEnd.data.length );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Two ranges are equal if their start and end positions are equal.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges are equal, `false` otherwise\n\t */\n\tisEqual( otherRange ) {\n\t\treturn this == otherRange || ( this.start.isEqual( otherRange.start ) && this.end.isEqual( otherRange.end ) );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/view/position~Position position}.\n\t *\n\t * @param {module:engine/view/position~Position} position Position to check.\n\t * @returns {Boolean} `true` if given {@link module:engine/view/position~Position position} is contained in this range,\n\t * `false` otherwise.\n\t */\n\tcontainsPosition( position ) {\n\t\treturn position.isAfter( this.start ) && position.isBefore( this.end );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/view/range~Range range}.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to check.\n\t * @param {Boolean} [loose=false] Whether the check is loose or strict. If the check is strict (`false`), compared range cannot\n\t * start or end at the same position as this range boundaries. If the check is loose (`true`), compared range can start, end or\n\t * even be equal to this range. Note that collapsed ranges are always compared in strict mode.\n\t * @returns {Boolean} `true` if given {@link module:engine/view/range~Range range} boundaries are contained by this range, `false`\n\t * otherwise.\n\t */\n\tcontainsRange( otherRange, loose = false ) {\n\t\tif ( otherRange.isCollapsed ) {\n\t\t\tloose = false;\n\t\t}\n\n\t\tconst containsStart = this.containsPosition( otherRange.start ) || ( loose && this.start.isEqual( otherRange.start ) );\n\t\tconst containsEnd = this.containsPosition( otherRange.end ) || ( loose && this.end.isEqual( otherRange.end ) );\n\n\t\treturn containsStart && containsEnd;\n\t}\n\n\t/**\n\t * Computes which part(s) of this {@link module:engine/view/range~Range range} is not a part of given\n\t * {@link module:engine/view/range~Range range}.\n\t * Returned array contains zero, one or two {@link module:engine/view/range~Range ranges}.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet foo = downcastWriter.createText( 'foo' );\n\t *\t\tlet img = downcastWriter.createContainerElement( 'img' );\n\t *\t\tlet bar = downcastWriter.createText( 'bar' );\n\t *\t\tlet p = downcastWriter.createContainerElement( 'p', null, [ foo, img, bar ] );\n\t *\n\t *\t\tlet range = view.createRange( view.createPositionAt( foo, 2 ), view.createPositionAt( bar, 1 ); // \"o\", img, \"b\" are in range.\n\t *\t\tlet otherRange = view.createRange( // \"oo\", img, \"ba\" are in range.\n\t *\t\t\tview.createPositionAt( foo, 1 ),\n\t *\t\t\tview.createPositionAt( bar, 2 )\n\t *\t\t);\n\t *\t\tlet transformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has no ranges because `otherRange` contains `range`\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( foo, 1 ), view.createPositionAt( p, 2 ); // \"oo\", img are in range.\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has one range: from ( p, 2 ) to ( bar, 1 )\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( p, 1 ), view.createPositionAt( p, 2 ) ); // img is in range.\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has two ranges: from ( foo, 1 ) to ( p, 1 ) and from ( p, 2 ) to ( bar, 1 )\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to differentiate against.\n\t * @returns {Array.<module:engine/view/range~Range>} The difference between ranges.\n\t */\n\tgetDifference( otherRange ) {\n\t\tconst ranges = [];\n\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect.\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the start to the middle of this range.\n\t\t\t\tranges.push( new Range( this.start, otherRange.start ) );\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the middle of this range to the end.\n\t\t\t\tranges.push( new Range( otherRange.end, this.end ) );\n\t\t\t}\n\t\t} else {\n\t\t\t// Ranges do not intersect, return the original range.\n\t\t\tranges.push( this.clone() );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an intersection of this {@link module:engine/view/range~Range range} and given {@link module:engine/view/range~Range range}.\n\t * Intersection is a common part of both of those ranges. If ranges has no common part, returns `null`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet foo = downcastWriter.createText( 'foo' );\n\t *\t\tlet img = downcastWriter.createContainerElement( 'img' );\n\t *\t\tlet bar = downcastWriter.createText( 'bar' );\n\t *\t\tlet p = downcastWriter.createContainerElement( 'p', null, [ foo, img, bar ] );\n\t *\n\t *\t\tlet range = view.createRange( view.createPositionAt( foo, 2 ), view.createPositionAt( bar, 1 ); // \"o\", img, \"b\" are in range.\n\t *\t\tlet otherRange = view.createRange( view.createPositionAt( foo, 1 ), view.createPositionAt( p, 2 ); // \"oo\", img are in range.\n\t *\t\tlet transformed = range.getIntersection( otherRange ); // range from ( foo, 1 ) to ( p, 2 ).\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( bar, 1 ), view.createPositionAt( bar, 3 ); \"ar\" is in range.\n\t *\t\ttransformed = range.getIntersection( otherRange ); // null - no common part.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to check for intersection.\n\t * @returns {module:engine/view/range~Range|null} A common part of given ranges or `null` if ranges have no common part.\n\t */\n\tgetIntersection( otherRange ) {\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect, so a common range will be returned.\n\t\t\t// At most, it will be same as this range.\n\t\t\tlet commonRangeStart = this.start;\n\t\t\tlet commonRangeEnd = this.end;\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means thaNt we have to\n\t\t\t\t// shrink common range to the given range start.\n\t\t\t\tcommonRangeStart = otherRange.start;\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// shrink common range to the given range end.\n\t\t\t\tcommonRangeEnd = otherRange.end;\n\t\t\t}\n\n\t\t\treturn new Range( commonRangeStart, commonRangeEnd );\n\t\t}\n\n\t\t// Ranges do not intersect, so they do not have common part.\n\t\treturn null;\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/view/treewalker~TreeWalker TreeWalker} instance with this range as a boundary.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @param {module:engine/view/position~Position} [options.startPosition]\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t * @returns {module:engine/view/treewalker~TreeWalker}\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/node~Node} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of range's both ends (in which the entire range is contained).\n\t *\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor() {\n\t\treturn this.start.getCommonAncestor( this.end );\n\t}\n\n\t/**\n\t * Clones this range.\n\t *\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tclone() {\n\t\treturn new Range( this.start, this.end );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/view/item~Item view items} that are in this range and returns\n\t * them.\n\t *\n\t * This method uses {@link module:engine/view/treewalker~TreeWalker} with `boundaries` set to this range and `ignoreElementEnd` option\n\t * set to `true`. However it returns only {@link module:engine/view/item~Item items},\n\t * not {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/view/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/view/item~Item>}\n\t */\n\t* getItems( options = {} ) {\n\t\toptions.boundaries = this;\n\t\toptions.ignoreElementEnd = true;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/view/position~Position positions} that are boundaries or\n\t * contained in this range.\n\t *\n\t * This method uses {@link module:engine/view/treewalker~TreeWalker} with `boundaries` set to this range. However it returns only\n\t * {@link module:engine/view/position~Position positions}, not {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/view/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/view/position~Position>}\n\t */\n\t* getPositions( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tyield treeWalker.position;\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.nextPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Checks and returns whether this range intersects with the given range.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} True if ranges intersect.\n\t */\n\tisIntersecting( otherRange ) {\n\t\treturn this.start.isBefore( otherRange.end ) && this.end.isAfter( otherRange.start );\n\t}\n\n\t/**\n\t * Creates a range from the given parents and offsets.\n\t *\n\t * @protected\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} startElement Start position\n\t * parent element.\n\t * @param {Number} startOffset Start position offset.\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} endElement End position\n\t * parent element.\n\t * @param {Number} endOffset End position offset.\n\t * @returns {module:engine/view/range~Range} Created range.\n\t */\n\tstatic _createFromParentsAndOffsets( startElement, startOffset, endElement, endOffset ) {\n\t\treturn new this(\n\t\t\tnew Position( startElement, startOffset ),\n\t\t\tnew Position( endElement, endOffset )\n\t\t);\n\t}\n\n\t/**\n\t * Creates a new range, spreading from specified {@link module:engine/view/position~Position position} to a position moved by\n\t * given `shift`. If `shift` is a negative value, shifted position is treated as the beginning of the range.\n\t *\n\t * @protected\n\t * @param {module:engine/view/position~Position} position Beginning of the range.\n\t * @param {Number} shift How long the range should be.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createFromPositionAndShift( position, shift ) {\n\t\tconst start = position;\n\t\tconst end = position.getShiftedBy( shift );\n\n\t\treturn shift > 0 ? new this( start, end ) : new this( end, start );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @protected\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createIn( element ) {\n\t\treturn this._createFromParentsAndOffsets( element, 0, element, element.childCount );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createOn( item ) {\n\t\tconst size = item.is( 'textProxy' ) ? item.offsetSize : 1;\n\n\t\treturn this._createFromPositionAndShift( Position._createBefore( item ), size );\n\t}\n}\n\n// Function used by getEnlarged and getTrimmed methods.\nfunction enlargeTrimSkip( value ) {\n\tif ( value.item.is( 'attributeElement' ) || value.item.is( 'uiElement' ) ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/utils\n */\n\n/**\n * Returns the parent element of given name. Returns undefined if position is not inside desired parent.\n *\n * @param {String} parentName Name of parent element to find.\n * @param {module:engine/model/position~Position|module:engine/model/position~Position} position Position to start searching.\n * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n */\nexport function findAncestor( parentName, position ) {\n\tlet parent = position.parent;\n\n\twhile ( parent ) {\n\t\tif ( parent.name === parentName ) {\n\t\t\treturn parent;\n\t\t}\n\n\t\tparent = parent.parent;\n\t}\n}\n\n/**\n * A common method to update the numeric value. If a value is the default one, it will be unset.\n *\n * @param {String} key Attribute key.\n * @param {*} value The new attribute value.\n * @param {module:engine/model/item~Item} item Model item on which the attribute will be set.\n * @param {module:engine/model/writer~Writer} writer\n * @param {*} defaultValue Default attribute value. If a value is lower or equal, it will be unset.\n */\nexport function updateNumericAttribute( key, value, item, writer, defaultValue = 1 ) {\n\tif ( value > defaultValue ) {\n\t\twriter.setAttribute( key, value, item );\n\t} else {\n\t\twriter.removeAttribute( key, item );\n\t}\n}\n\n/**\n * Common method to create empty table cell - it will create proper model structure as table cell must have at least one block inside.\n *\n * @param {module:engine/model/writer~Writer} writer Model writer.\n * @param {module:engine/model/position~Position} insertPosition Position at which table cell should be inserted.\n * @param {Object} attributes Element's attributes.\n */\nexport function createEmptyTableCell( writer, insertPosition, attributes = {} ) {\n\tconst tableCell = writer.createElement( 'tableCell', attributes );\n\twriter.insertElement( 'paragraph', tableCell );\n\twriter.insert( tableCell, insertPosition );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* global console */\n\n/**\n * @module utils/log\n */\n\nimport { attachLinkToDocumentation } from './ckeditorerror';\n\n/**\n * The logging module.\n *\n * This object features two functions that should be used across CKEditor code base to log errors and warnings.\n * Despite being an overridable interface for native `console.*` this module serves also the goal to limit the\n * code size of a minified CKEditor package. During minification process the messages will be shortened and\n * links to their documentation will be logged to the console.\n *\n * All errors and warning should be documented in the following way:\n *\n *\t\t/**\n *\t\t * Error thrown when a plugin cannot be loaded due to JavaScript errors, lack of plugins with a given name, etc.\n *\t\t *\n *\t\t * @error plugin-load\n *\t\t * @param pluginName The name of the plugin that could not be loaded.\n *\t\t * @param moduleName The name of the module which tried to load this plugin.\n *\t\t * /\n *\t\tlog.error( 'plugin-load: It was not possible to load the \"{$pluginName}\" plugin in module \"{$moduleName}', {\n *\t\t\tpluginName: 'foo',\n *\t\t\tmoduleName: 'bar'\n *\t\t} );\n *\n * ### Warning vs Error vs Throw\n *\n * * Whenever a potentially incorrect situation occurs, which does not directly lead to an incorrect behavior,\n * log a warning.\n * * Whenever an incorrect situation occurs, but the app may continue working (although perhaps incorrectly),\n * log an error.\n * * Whenever it's really bad and it does not make sense to continue working, throw a {@link module:utils/ckeditorerror~CKEditorError}.\n *\n * @namespace\n */\nconst log = {\n\t/**\n\t * Logs an error to the console.\n\t *\n\t * Read more about error logging in the {@link module:utils/log} module.\n\t *\n\t * @param {String} message The error message in an `error-name: Error message.` format.\n\t * During the minification process the \"Error message\" part will be removed to limit the code size\n\t * and a link to this error documentation will be logged to the console.\n\t * @param {Object} [data] Additional data describing the error.\n\t */\n\terror( message, data ) {\n\t\tconsole.error( attachLinkToDocumentation( message ), data );\n\t},\n\n\t/**\n\t * Logs a warning to the console.\n\t *\n\t * Read more about error logging in the {@link module:utils/log} module.\n\t *\n\t * @param {String} message The warning message in a `warning-name: Warning message.` format.\n\t * During the minification process the \"Warning message\" part will be removed to limit the code size\n\t * and a link to this error documentation will be logged to the console.\n\t * @param {Object} [data] Additional data describing the warning.\n\t */\n\twarn( message, data ) {\n\t\tconsole.warn( attachLinkToDocumentation( message ), data );\n\t}\n};\n\nexport default log;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals window */\n\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\n\n/**\n * Set of utils related to block and inline fillers handling.\n *\n * Browsers do not allow to put caret in elements which does not have height. Because of it, we need to fill all\n * empty elements which should be selectable with elements or characters called \"fillers\". Unfortunately there is no one\n * universal filler, this is why two types are uses:\n *\n * * Block filler is an element which fill block elements, like `<p>`. CKEditor uses `<br>` as a block filler during the editing,\n * as browsers do natively. So instead of an empty `<p>` there will be `<p><br></p>`. The advantage of block filler is that\n * it is transparent for the selection, so when the caret is before the `<br>` and user presses right arrow he will be\n * moved to the next paragraph, not after the `<br>`. The disadvantage is that it breaks a block, so it can not be used\n * in the middle of a line of text. The {@link module:engine/view/filler~BR_FILLER `<br>` filler} can be replaced with any other\n * character in the data output, for instance {@link module:engine/view/filler~NBSP_FILLER non-breaking space}.\n *\n * * Inline filler is a filler which does not break a line of text, so it can be used inside the text, for instance in the empty\n * `<b>` surrendered by text: `foo<b></b>bar`, if we want to put the caret there. CKEditor uses a sequence of the zero-width\n * spaces as an {@link module:engine/view/filler~INLINE_FILLER inline filler} having the predetermined\n * {@link module:engine/view/filler~INLINE_FILLER_LENGTH length}. A sequence is used, instead of a single character to\n * avoid treating random zero-width spaces as the inline filler. Disadvantage of the inline filler is that it is not\n * transparent for the selection. The arrow key moves the caret between zero-width spaces characters, so the additional\n * code is needed to handle the caret.\n *\n * Both inline and block fillers are handled by the {@link module:engine/view/renderer~Renderer renderer} and are not present in the\n * view.\n *\n * @module engine/view/filler\n */\n\n/**\n * `<br>` filler creator. This is a function which creates `<br data-cke-filler=\"true\">` element.\n * It defines how the filler is created.\n *\n * @see module:engine/view/filler~NBSP_FILLER\n * @function\n */\nexport const BR_FILLER = domDocument => {\n\tconst fillerBr = domDocument.createElement( 'br' );\n\tfillerBr.dataset.ckeFiller = true;\n\n\treturn fillerBr;\n};\n\n/**\n * Non-breaking space filler creator. This is a function which creates `&nbsp;` text node.\n * It defines how the filler is created.\n *\n * @see module:engine/view/filler~BR_FILLER\n * @function\n */\nexport const NBSP_FILLER = domDocument => domDocument.createTextNode( '\\u00A0' );\n\n/**\n * Length of the {@link module:engine/view/filler~INLINE_FILLER INLINE_FILLER}.\n */\nexport const INLINE_FILLER_LENGTH = 7;\n\n/**\n * Inline filler which is sequence of the zero width spaces.\n */\nexport let INLINE_FILLER = '';\n\nfor ( let i = 0; i < INLINE_FILLER_LENGTH; i++ ) {\n\tINLINE_FILLER += '\\u200b';\n}\n\n/**\n * Checks if the node is a text node which starts with the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n *\n *\t\tstartsWithFiller( document.createTextNode( INLINE_FILLER ) ); // true\n *\t\tstartsWithFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ); // true\n *\t\tstartsWithFiller( document.createTextNode( 'foo' ) ); // false\n *\t\tstartsWithFiller( document.createElement( 'p' ) ); // false\n *\n * @param {Node} domNode DOM node.\n * @returns {Boolean} True if the text node starts with the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n */\nexport function startsWithFiller( domNode ) {\n\treturn isText( domNode ) && ( domNode.data.substr( 0, INLINE_FILLER_LENGTH ) === INLINE_FILLER );\n}\n\n/**\n * Checks if the text node contains only the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n *\n *\t\tisInlineFiller( document.createTextNode( INLINE_FILLER ) ); // true\n *\t\tisInlineFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ); // false\n *\n * @param {Text} domText DOM text node.\n * @returns {Boolean} True if the text node contains only the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n */\nexport function isInlineFiller( domText ) {\n\treturn domText.data.length == INLINE_FILLER_LENGTH && startsWithFiller( domText );\n}\n\n/**\n * Get string data from the text node, removing an {@link module:engine/view/filler~INLINE_FILLER inline filler} from it,\n * if text node contains it.\n *\n *\t\tgetDataWithoutFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ) == 'foo' // true\n *\t\tgetDataWithoutFiller( document.createTextNode( 'foo' ) ) == 'foo' // true\n *\n * @param {Text} domText DOM text node, possible with inline filler.\n * @returns {String} Data without filler.\n */\nexport function getDataWithoutFiller( domText ) {\n\tif ( startsWithFiller( domText ) ) {\n\t\treturn domText.data.slice( INLINE_FILLER_LENGTH );\n\t} else {\n\t\treturn domText.data;\n\t}\n}\n\n// Cache block fillers templates to improve performance.\nconst templateBlockFillers = new WeakMap();\n\n/**\n * Checks if the node is an instance of the block filler of the given type.\n *\n *\t\tconst brFillerInstance = BR_FILLER( document );\n *\t\tisBlockFiller( brFillerInstance, BR_FILLER ); // true\n *\n * @param {Node} domNode DOM node to check.\n * @param {Function} blockFiller Block filler creator.\n * @returns {Boolean} True if text node contains only {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n */\nexport function isBlockFiller( domNode, blockFiller ) {\n\tlet templateBlockFiller = templateBlockFillers.get( blockFiller );\n\n\tif ( !templateBlockFiller ) {\n\t\ttemplateBlockFiller = blockFiller( window.document );\n\t\ttemplateBlockFillers.set( blockFiller, templateBlockFiller );\n\t}\n\n\treturn domNode.isEqualNode( templateBlockFiller );\n}\n\n/**\n * Assign key observer which move cursor from the end of the inline filler to the beginning of it when\n * the left arrow is pressed, so the filler does not break navigation.\n *\n * @param {module:engine/view/view~View} view View controller instance we should inject quirks handling on.\n */\nexport function injectQuirksHandling( view ) {\n\tview.document.on( 'keydown', jumpOverInlineFiller );\n}\n\n// Move cursor from the end of the inline filler to the beginning of it when, so the filler does not break navigation.\nfunction jumpOverInlineFiller( evt, data ) {\n\tif ( data.keyCode == keyCodes.arrowleft ) {\n\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\n\t\tif ( domSelection.rangeCount == 1 && domSelection.getRangeAt( 0 ).collapsed ) {\n\t\t\tconst domParent = domSelection.getRangeAt( 0 ).startContainer;\n\t\t\tconst domOffset = domSelection.getRangeAt( 0 ).startOffset;\n\n\t\t\tif ( startsWithFiller( domParent ) && domOffset <= INLINE_FILLER_LENGTH ) {\n\t\t\t\tdomSelection.collapse( domParent, 0 );\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/observablemixin\n */\n\nimport EmitterMixin from './emittermixin';\nimport CKEditorError from './ckeditorerror';\nimport { extend, isObject } from 'lodash-es';\n\nconst observablePropertiesSymbol = Symbol( 'observableProperties' );\nconst boundObservablesSymbol = Symbol( 'boundObservables' );\nconst boundPropertiesSymbol = Symbol( 'boundProperties' );\n\n/**\n * Mixin that injects the \"observable properties\" and data binding functionality described in the\n * {@link ~Observable} interface.\n *\n * Read more about the concept of observables in the:\n * * {@glink framework/guides/architecture/core-editor-architecture#event-system-and-observables \"Event system and observables\"}\n * section of the {@glink framework/guides/architecture/core-editor-architecture \"Core editor architecture\"} guide,\n * * {@glink framework/guides/deep-dive/observables \"Observables\" deep dive} guide.\n *\n * @mixin ObservableMixin\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/observablemixin~Observable\n */\nconst ObservableMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\tset( name, value ) {\n\t\t// If the first parameter is an Object, iterate over its properties.\n\t\tif ( isObject( name ) ) {\n\t\t\tObject.keys( name ).forEach( property => {\n\t\t\t\tthis.set( property, name[ property ] );\n\t\t\t}, this );\n\n\t\t\treturn;\n\t\t}\n\n\t\tinitObservable( this );\n\n\t\tconst properties = this[ observablePropertiesSymbol ];\n\n\t\tif ( ( name in this ) && !properties.has( name ) ) {\n\t\t\t/**\n\t\t\t * Cannot override an existing property.\n\t\t\t *\n\t\t\t * This error is thrown when trying to {@link ~Observable#set set} an property with\n\t\t\t * a name of an already existing property. For example:\n\t\t\t *\n\t\t\t *\t\tlet observable = new Model();\n\t\t\t *\t\tobservable.property = 1;\n\t\t\t *\t\tobservable.set( 'property', 2 );\t\t\t// throws\n\t\t\t *\n\t\t\t *\t\tobservable.set( 'property', 1 );\n\t\t\t *\t\tobservable.set( 'property', 2 );\t\t\t// ok, because this is an existing property.\n\t\t\t *\n\t\t\t * @error observable-set-cannot-override\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-set-cannot-override: Cannot override an existing property.', this );\n\t\t}\n\n\t\tObject.defineProperty( this, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget() {\n\t\t\t\treturn properties.get( name );\n\t\t\t},\n\n\t\t\tset( value ) {\n\t\t\t\tconst oldValue = properties.get( name );\n\n\t\t\t\t// Fire `set` event before the new value will be set to make it possible\n\t\t\t\t// to override observable property without affecting `change` event.\n\t\t\t\t// See https://github.com/ckeditor/ckeditor5-utils/issues/171.\n\t\t\t\tlet newValue = this.fire( 'set:' + name, name, value, oldValue );\n\n\t\t\t\tif ( newValue === undefined ) {\n\t\t\t\t\tnewValue = value;\n\t\t\t\t}\n\n\t\t\t\t// Allow undefined as an initial value like A.define( 'x', undefined ) (#132).\n\t\t\t\t// Note: When properties map has no such own property, then its value is undefined.\n\t\t\t\tif ( oldValue !== newValue || !properties.has( name ) ) {\n\t\t\t\t\tproperties.set( name, newValue );\n\t\t\t\t\tthis.fire( 'change:' + name, name, newValue, oldValue );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis[ name ] = value;\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tbind( ...bindProperties ) {\n\t\tif ( !bindProperties.length || !isStringArray( bindProperties ) ) {\n\t\t\t/**\n\t\t\t * All properties must be strings.\n\t\t\t *\n\t\t\t * @error observable-bind-wrong-properties\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-wrong-properties: All properties must be strings.', this );\n\t\t}\n\n\t\tif ( ( new Set( bindProperties ) ).size !== bindProperties.length ) {\n\t\t\t/**\n\t\t\t * Properties must be unique.\n\t\t\t *\n\t\t\t * @error observable-bind-duplicate-properties\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-duplicate-properties: Properties must be unique.', this );\n\t\t}\n\n\t\tinitObservable( this );\n\n\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\n\t\tbindProperties.forEach( propertyName => {\n\t\t\tif ( boundProperties.has( propertyName ) ) {\n\t\t\t\t/**\n\t\t\t\t * Cannot bind the same property more that once.\n\t\t\t\t *\n\t\t\t\t * @error observable-bind-rebind\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-bind-rebind: Cannot bind the same property more that once.', this );\n\t\t\t}\n\t\t} );\n\n\t\tconst bindings = new Map();\n\n\t\t// @typedef {Object} Binding\n\t\t// @property {Array} property Property which is bound.\n\t\t// @property {Array} to Array of observable–property components of the binding (`{ observable: ..., property: .. }`).\n\t\t// @property {Array} callback A function which processes `to` components.\n\t\tbindProperties.forEach( a => {\n\t\t\tconst binding = { property: a, to: [] };\n\n\t\t\tboundProperties.set( a, binding );\n\t\t\tbindings.set( a, binding );\n\t\t} );\n\n\t\t// @typedef {Object} BindChain\n\t\t// @property {Function} to See {@link ~ObservableMixin#_bindTo}.\n\t\t// @property {Function} toMany See {@link ~ObservableMixin#_bindToMany}.\n\t\t// @property {module:utils/observablemixin~Observable} _observable The observable which initializes the binding.\n\t\t// @property {Array} _bindProperties Array of `_observable` properties to be bound.\n\t\t// @property {Array} _to Array of `to()` observable–properties (`{ observable: toObservable, properties: ...toProperties }`).\n\t\t// @property {Map} _bindings Stores bindings to be kept in\n\t\t// {@link ~ObservableMixin#_boundProperties}/{@link ~ObservableMixin#_boundObservables}\n\t\t// initiated in this binding chain.\n\t\treturn {\n\t\t\tto: bindTo,\n\t\t\ttoMany: bindToMany,\n\n\t\t\t_observable: this,\n\t\t\t_bindProperties: bindProperties,\n\t\t\t_to: [],\n\t\t\t_bindings: bindings\n\t\t};\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tunbind( ...unbindProperties ) {\n\t\t// Nothing to do here if not inited yet.\n\t\tif ( !( observablePropertiesSymbol in this ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\t\tconst boundObservables = this[ boundObservablesSymbol ];\n\n\t\tif ( unbindProperties.length ) {\n\t\t\tif ( !isStringArray( unbindProperties ) ) {\n\t\t\t\t/**\n\t\t\t\t * Properties must be strings.\n\t\t\t\t *\n\t\t\t\t * @error observable-unbind-wrong-properties\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-unbind-wrong-properties: Properties must be strings.', this );\n\t\t\t}\n\n\t\t\tunbindProperties.forEach( propertyName => {\n\t\t\t\tconst binding = boundProperties.get( propertyName );\n\n\t\t\t\t// Nothing to do if the binding is not defined\n\t\t\t\tif ( !binding ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet toObservable, toProperty, toProperties, toPropertyBindings;\n\n\t\t\t\tbinding.to.forEach( to => {\n\t\t\t\t\t// TODO: ES6 destructuring.\n\t\t\t\t\ttoObservable = to[ 0 ];\n\t\t\t\t\ttoProperty = to[ 1 ];\n\t\t\t\t\ttoProperties = boundObservables.get( toObservable );\n\t\t\t\t\ttoPropertyBindings = toProperties[ toProperty ];\n\n\t\t\t\t\ttoPropertyBindings.delete( binding );\n\n\t\t\t\t\tif ( !toPropertyBindings.size ) {\n\t\t\t\t\t\tdelete toProperties[ toProperty ];\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !Object.keys( toProperties ).length ) {\n\t\t\t\t\t\tboundObservables.delete( toObservable );\n\t\t\t\t\t\tthis.stopListening( toObservable, 'change' );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tboundProperties.delete( propertyName );\n\t\t\t} );\n\t\t} else {\n\t\t\tboundObservables.forEach( ( bindings, boundObservable ) => {\n\t\t\t\tthis.stopListening( boundObservable, 'change' );\n\t\t\t} );\n\n\t\t\tboundObservables.clear();\n\t\t\tboundProperties.clear();\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdecorate( methodName ) {\n\t\tconst originalMethod = this[ methodName ];\n\n\t\tif ( !originalMethod ) {\n\t\t\t/**\n\t\t\t * Cannot decorate an undefined method.\n\t\t\t *\n\t\t\t * @error observablemixin-cannot-decorate-undefined\n\t\t\t * @param {Object} object The object which method should be decorated.\n\t\t\t * @param {String} methodName Name of the method which does not exist.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.',\n\t\t\t\tthis,\n\t\t\t\t{ object: this, methodName }\n\t\t\t);\n\t\t}\n\n\t\tthis.on( methodName, ( evt, args ) => {\n\t\t\tevt.return = originalMethod.apply( this, args );\n\t\t} );\n\n\t\tthis[ methodName ] = function( ...args ) {\n\t\t\treturn this.fire( methodName, args );\n\t\t};\n\t}\n};\n\nextend( ObservableMixin, EmitterMixin );\n\nexport default ObservableMixin;\n\n// Init symbol properties needed to for the observable mechanism to work.\n//\n// @private\n// @param {module:utils/observablemixin~ObservableMixin} observable\nfunction initObservable( observable ) {\n\t// Do nothing if already inited.\n\tif ( observablePropertiesSymbol in observable ) {\n\t\treturn;\n\t}\n\n\t// The internal hash containing the observable's state.\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, observablePropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Map containing bindings to external observables. It shares the binding objects\n\t// (`{ observable: A, property: 'a', to: ... }`) with {@link module:utils/observablemixin~ObservableMixin#_boundProperties} and\n\t// it is used to observe external observables to update own properties accordingly.\n\t// See {@link module:utils/observablemixin~ObservableMixin#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\tz: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t},\n\t//\t\t\t\tC: {\n\t//\t\t\t\t\tw: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, boundObservablesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Object that stores which properties of this observable are bound and how. It shares\n\t// the binding objects (`{ observable: A, property: 'a', to: ... }`) with {@link utils.ObservableMixin#_boundObservables}.\n\t// This data structure is a reverse of {@link utils.ObservableMixin#_boundObservables} and it is helpful for\n\t// {@link utils.ObservableMixin#unbind}.\n\t//\n\t// See {@link utils.ObservableMixin#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\td: { observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t} )\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, boundPropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n}\n\n// A chaining for {@link module:utils/observablemixin~ObservableMixin#bind} providing `.to()` interface.\n//\n// @private\n// @param {...[Observable|String|Function]} args Arguments of the `.to( args )` binding.\nfunction bindTo( ...args ) {\n\tconst parsedArgs = parseBindToArgs( ...args );\n\tconst bindingsKeys = Array.from( this._bindings.keys() );\n\tconst numberOfBindings = bindingsKeys.length;\n\n\t// Eliminate A.bind( 'x' ).to( B, C )\n\tif ( !parsedArgs.callback && parsedArgs.to.length > 1 ) {\n\t\t/**\n\t\t * Binding multiple observables only possible with callback.\n\t\t *\n\t\t * @error observable-bind-no-callback\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'observable-bind-to-no-callback: Binding multiple observables only possible with callback.',\n\t\t\tthis\n\t\t);\n\t}\n\n\t// Eliminate A.bind( 'x', 'y' ).to( B, callback )\n\tif ( numberOfBindings > 1 && parsedArgs.callback ) {\n\t\t/**\n\t\t * Cannot bind multiple properties and use a callback in one binding.\n\t\t *\n\t\t * @error observable-bind-to-extra-callback\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.',\n\t\t\tthis\n\t\t);\n\t}\n\n\tparsedArgs.to.forEach( to => {\n\t\t// Eliminate A.bind( 'x', 'y' ).to( B, 'a' )\n\t\tif ( to.properties.length && to.properties.length !== numberOfBindings ) {\n\t\t\t/**\n\t\t\t * The number of properties must match.\n\t\t\t *\n\t\t\t * @error observable-bind-to-properties-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-to-properties-length: The number of properties must match.', this );\n\t\t}\n\n\t\t// When no to.properties specified, observing source properties instead i.e.\n\t\t// A.bind( 'x', 'y' ).to( B ) -> Observe B.x and B.y\n\t\tif ( !to.properties.length ) {\n\t\t\tto.properties = this._bindProperties;\n\t\t}\n\t} );\n\n\tthis._to = parsedArgs.to;\n\n\t// Fill {@link BindChain#_bindings} with callback. When the callback is set there's only one binding.\n\tif ( parsedArgs.callback ) {\n\t\tthis._bindings.get( bindingsKeys[ 0 ] ).callback = parsedArgs.callback;\n\t}\n\n\tattachBindToListeners( this._observable, this._to );\n\n\t// Update observable._boundProperties and observable._boundObservables.\n\tupdateBindToBound( this );\n\n\t// Set initial values of bound properties.\n\tthis._bindProperties.forEach( propertyName => {\n\t\tupdateBoundObservableProperty( this._observable, propertyName );\n\t} );\n}\n\n// Binds to an attribute in a set of iterable observables.\n//\n// @private\n// @param {Array.<Observable>} observables\n// @param {String} attribute\n// @param {Function} callback\nfunction bindToMany( observables, attribute, callback ) {\n\tif ( this._bindings.size > 1 ) {\n\t\t/**\n\t\t * Binding one attribute to many observables only possible with one attribute.\n\t\t *\n\t\t * @error observable-bind-to-many-not-one-binding\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().', this );\n\t}\n\n\tthis.to(\n\t\t// Bind to #attribute of each observable...\n\t\t...getBindingTargets( observables, attribute ),\n\t\t// ...using given callback to parse attribute values.\n\t\tcallback\n\t);\n}\n\n// Returns an array of binding components for\n// {@link Observable#bind} from a set of iterable observables.\n//\n// @param {Array.<Observable>} observables\n// @param {String} attribute\n// @returns {Array.<String|Observable>}\nfunction getBindingTargets( observables, attribute ) {\n\tconst observableAndAttributePairs = observables.map( observable => [ observable, attribute ] );\n\n\t// Merge pairs to one-dimension array of observables and attributes.\n\treturn Array.prototype.concat.apply( [], observableAndAttributePairs );\n}\n\n// Check if all entries of the array are of `String` type.\n//\n// @private\n// @param {Array} arr An array to be checked.\n// @returns {Boolean}\nfunction isStringArray( arr ) {\n\treturn arr.every( a => typeof a == 'string' );\n}\n\n// Parses and validates {@link Observable#bind}`.to( args )` arguments and returns\n// an object with a parsed structure. For example\n//\n//\t\tA.bind( 'x' ).to( B, 'a', C, 'b', call );\n//\n// becomes\n//\n//\t\t{\n//\t\t\tto: [\n//\t\t\t\t{ observable: B, properties: [ 'a' ] },\n//\t\t\t\t{ observable: C, properties: [ 'b' ] },\n//\t\t\t],\n//\t\t\tcallback: call\n// \t\t}\n//\n// @private\n// @param {...*} args Arguments of {@link Observable#bind}`.to( args )`.\n// @returns {Object}\nfunction parseBindToArgs( ...args ) {\n\t// Eliminate A.bind( 'x' ).to()\n\tif ( !args.length ) {\n\t\t/**\n\t\t * Invalid argument syntax in `to()`.\n\t\t *\n\t\t * @error observable-bind-to-parse-error\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-parse-error: Invalid argument syntax in `to()`.', null );\n\t}\n\n\tconst parsed = { to: [] };\n\tlet lastObservable;\n\n\tif ( typeof args[ args.length - 1 ] == 'function' ) {\n\t\tparsed.callback = args.pop();\n\t}\n\n\targs.forEach( a => {\n\t\tif ( typeof a == 'string' ) {\n\t\t\tlastObservable.properties.push( a );\n\t\t} else if ( typeof a == 'object' ) {\n\t\t\tlastObservable = { observable: a, properties: [] };\n\t\t\tparsed.to.push( lastObservable );\n\t\t} else {\n\t\t\tthrow new CKEditorError( 'observable-bind-to-parse-error: Invalid argument syntax in `to()`.', null );\n\t\t}\n\t} );\n\n\treturn parsed;\n}\n\n// Synchronizes {@link module:utils/observablemixin#_boundObservables} with {@link Binding}.\n//\n// @private\n// @param {Binding} binding A binding to store in {@link Observable#_boundObservables}.\n// @param {Observable} toObservable A observable, which is a new component of `binding`.\n// @param {String} toPropertyName A name of `toObservable`'s property, a new component of the `binding`.\nfunction updateBoundObservables( observable, binding, toObservable, toPropertyName ) {\n\tconst boundObservables = observable[ boundObservablesSymbol ];\n\tconst bindingsToObservable = boundObservables.get( toObservable );\n\tconst bindings = bindingsToObservable || {};\n\n\tif ( !bindings[ toPropertyName ] ) {\n\t\tbindings[ toPropertyName ] = new Set();\n\t}\n\n\t// Pass the binding to a corresponding Set in `observable._boundObservables`.\n\tbindings[ toPropertyName ].add( binding );\n\n\tif ( !bindingsToObservable ) {\n\t\tboundObservables.set( toObservable, bindings );\n\t}\n}\n\n// Synchronizes {@link Observable#_boundProperties} and {@link Observable#_boundObservables}\n// with {@link BindChain}.\n//\n// Assuming the following binding being created\n//\n// \t\tA.bind( 'a', 'b' ).to( B, 'x', 'y' );\n//\n// the following bindings were initialized by {@link Observable#bind} in {@link BindChain#_bindings}:\n//\n// \t\t{\n// \t\t\ta: { observable: A, property: 'a', to: [] },\n// \t\t\tb: { observable: A, property: 'b', to: [] },\n// \t\t}\n//\n// Iterate over all bindings in this chain and fill their `to` properties with\n// corresponding to( ... ) arguments (components of the binding), so\n//\n// \t\t{\n// \t\t\ta: { observable: A, property: 'a', to: [ B, 'x' ] },\n// \t\t\tb: { observable: A, property: 'b', to: [ B, 'y' ] },\n// \t\t}\n//\n// Then update the structure of {@link Observable#_boundObservables} with updated\n// binding, so it becomes:\n//\n// \t\tMap( {\n// \t\t\tB: {\n// \t\t\t\tx: Set( [\n// \t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] }\n// \t\t\t\t] ),\n// \t\t\t\ty: Set( [\n// \t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n// \t\t\t\t] )\n//\t\t\t}\n// \t\t} )\n//\n// @private\n// @param {BindChain} chain The binding initialized by {@link Observable#bind}.\nfunction updateBindToBound( chain ) {\n\tlet toProperty;\n\n\tchain._bindings.forEach( ( binding, propertyName ) => {\n\t\t// Note: For a binding without a callback, this will run only once\n\t\t// like in A.bind( 'x', 'y' ).to( B, 'a', 'b' )\n\t\t// TODO: ES6 destructuring.\n\t\tchain._to.forEach( to => {\n\t\t\ttoProperty = to.properties[ binding.callback ? 0 : chain._bindProperties.indexOf( propertyName ) ];\n\n\t\t\tbinding.to.push( [ to.observable, toProperty ] );\n\t\t\tupdateBoundObservables( chain._observable, binding, to.observable, toProperty );\n\t\t} );\n\t} );\n}\n\n// Updates an property of a {@link Observable} with a value\n// determined by an entry in {@link Observable#_boundProperties}.\n//\n// @private\n// @param {Observable} observable A observable which property is to be updated.\n// @param {String} propertyName An property to be updated.\nfunction updateBoundObservableProperty( observable, propertyName ) {\n\tconst boundProperties = observable[ boundPropertiesSymbol ];\n\tconst binding = boundProperties.get( propertyName );\n\tlet propertyValue;\n\n\t// When a binding with callback is created like\n\t//\n\t// \t\tA.bind( 'a' ).to( B, 'b', C, 'c', callback );\n\t//\n\t// collect B.b and C.c, then pass them to callback to set A.a.\n\tif ( binding.callback ) {\n\t\tpropertyValue = binding.callback.apply( observable, binding.to.map( to => to[ 0 ][ to[ 1 ] ] ) );\n\t} else {\n\t\tpropertyValue = binding.to[ 0 ];\n\t\tpropertyValue = propertyValue[ 0 ][ propertyValue[ 1 ] ];\n\t}\n\n\tif ( observable.hasOwnProperty( propertyName ) ) {\n\t\tobservable[ propertyName ] = propertyValue;\n\t} else {\n\t\tobservable.set( propertyName, propertyValue );\n\t}\n}\n\n// Starts listening to changes in {@link BindChain._to} observables to update\n// {@link BindChain._observable} {@link BindChain._bindProperties}. Also sets the\n// initial state of {@link BindChain._observable}.\n//\n// @private\n// @param {BindChain} chain The chain initialized by {@link Observable#bind}.\nfunction attachBindToListeners( observable, toBindings ) {\n\ttoBindings.forEach( to => {\n\t\tconst boundObservables = observable[ boundObservablesSymbol ];\n\t\tlet bindings;\n\n\t\t// If there's already a chain between the observables (`observable` listens to\n\t\t// `to.observable`), there's no need to create another `change` event listener.\n\t\tif ( !boundObservables.get( to.observable ) ) {\n\t\t\tobservable.listenTo( to.observable, 'change', ( evt, propertyName ) => {\n\t\t\t\tbindings = boundObservables.get( to.observable )[ propertyName ];\n\n\t\t\t\t// Note: to.observable will fire for any property change, react\n\t\t\t\t// to changes of properties which are bound only.\n\t\t\t\tif ( bindings ) {\n\t\t\t\t\tbindings.forEach( binding => {\n\t\t\t\t\t\tupdateBoundObservableProperty( observable, binding.property );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n}\n\n/**\n * Interface which adds \"observable properties\" and data binding functionality.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/observablemixin~ObservableMixin} mixin.\n *\n * Read more about the usage of this interface in the:\n * * {@glink framework/guides/architecture/core-editor-architecture#event-system-and-observables \"Event system and observables\"}\n * section of the {@glink framework/guides/architecture/core-editor-architecture \"Core editor architecture\"} guide,\n * * {@glink framework/guides/deep-dive/observables \"Observables\" deep dive} guide.\n *\n * @interface Observable\n * @extends module:utils/emittermixin~Emitter\n */\n\n/**\n * Fired when a property changed value.\n *\n *\t\tobservable.set( 'prop', 1 );\n *\n *\t\tobservable.on( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `${ propertyName } has changed from ${ oldValue } to ${ newValue }` );\n *\t\t} );\n *\n *\t\tobservable.prop = 2; // -> 'prop has changed from 1 to 2'\n *\n * @event change:{property}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\n\n/**\n * Fired when a property value is going to be set but is not set yet (before the `change` event is fired).\n *\n * You can control the final value of the property by using\n * the {@link module:utils/eventinfo~EventInfo#return event's `return` property}.\n *\n *\t\tobservable.set( 'prop', 1 );\n *\n *\t\tobservable.on( 'set:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `Value is going to be changed from ${ oldValue } to ${ newValue }` );\n *\t\t\tconsole.log( `Current property value is ${ observable[ propertyName ] }` );\n *\n *\t\t\t// Let's override the value.\n *\t\t\tevt.return = 3;\n *\t\t} );\n *\n *\t\tobservable.on( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `Value has changed from ${ oldValue } to ${ newValue }` );\n *\t\t} );\n *\n *\t\tobservable.prop = 2; // -> 'Value is going to be changed from 1 to 2'\n *\t\t                     // -> 'Current property value is 1'\n *\t\t                     // -> 'Value has changed from 1 to 3'\n *\n * **Note:** Event is fired even when the new value is the same as the old value.\n *\n * @event set:{property}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\n\n/**\n * Creates and sets the value of an observable property of this object. Such an property becomes a part\n * of the state and is be observable.\n *\n * It accepts also a single object literal containing key/value pairs with properties to be set.\n *\n * This method throws the `observable-set-cannot-override` error if the observable instance already\n * have a property with the given property name. This prevents from mistakenly overriding existing\n * properties and methods, but means that `foo.set( 'bar', 1 )` may be slightly slower than `foo.bar = 1`.\n *\n * @method #set\n * @param {String|Object} name The property's name or object with `name=>value` pairs.\n * @param {*} [value] The property's value (if `name` was passed in the first parameter).\n */\n\n/**\n * Binds {@link #set obvervable properties} to other objects implementing the\n * {@link module:utils/observablemixin~Observable} interface.\n *\n * Read more in the {@glink framework/guides/deep-dive/observables#property-bindings dedicated guide}\n * covering the topic of property bindings with some additional examples.\n *\n * Let's consider two objects: a `button` and an associated `command` (both `Observable`).\n *\n * A simple property binding could be as follows:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isEnabled' );\n *\n * or even shorter:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command );\n *\n * which works in the following way:\n *\n * * `button.isEnabled` **instantly equals** `command.isEnabled`,\n * * whenever `command.isEnabled` changes, `button.isEnabled` will immediately reflect its value.\n *\n * **Note**: To release the binding use {@link module:utils/observablemixin~Observable#unbind}.\n *\n * You can also \"rename\" the property in the binding by specifying the new name in the `to()` chain:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isWorking' );\n *\n * It is possible to bind more than one property at a time to shorten the code:\n *\n *\t\tbutton.bind( 'isEnabled', 'value' ).to( command );\n *\n * which corresponds to:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command );\n *\t\tbutton.bind( 'value' ).to( command );\n *\n * The binding can include more than one observable, combining multiple data sources in a custom callback:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isEnabled', ui, 'isVisible',\n *\t\t\t( isCommandEnabled, isUIVisible ) => isCommandEnabled && isUIVisible );\n *\n * It is also possible to bind to the same property in an array of observables.\n * To bind a `button` to multiple commands (also `Observables`) so that each and every one of them\n * must be enabled for the button to become enabled, use the following code:\n *\n *\t\tbutton.bind( 'isEnabled' ).toMany( [ commandA, commandB, commandC ], 'isEnabled',\n *\t\t\t( isAEnabled, isBEnabled, isCEnabled ) => isAEnabled && isBEnabled && isCEnabled );\n *\n * @method #bind\n * @param {...String} bindProperties Observable properties that will be bound to another observable(s).\n * @returns {Object} The bind chain with the `to()` and `toMany()` methods.\n */\n\n/**\n * Removes the binding created with {@link #bind}.\n *\n *\t\t// Removes the binding for the 'a' property.\n *\t\tA.unbind( 'a' );\n *\n *\t\t// Removes bindings for all properties.\n *\t\tA.unbind();\n *\n * @method #unbind\n * @param {...String} [unbindProperties] Observable properties to be unbound. All the bindings will\n * be released if no properties provided.\n */\n\n/**\n * Turns the given methods of this object into event-based ones. This means that the new method will fire an event\n * (named after the method) and the original action will be plugged as a listener to that event.\n *\n * Read more in the {@glink framework/guides/deep-dive/observables#decorating-object-methods dedicated guide}\n * covering the topic of decorating methods with some additional examples.\n *\n * Decorating the method does not change its behavior (it only adds an event),\n * but it allows to modify it later on by listening to the method's event.\n *\n * For example, to cancel the method execution the event can be {@link module:utils/eventinfo~EventInfo#stop stopped}:\n *\n *\t\tclass Foo {\n *\t\t\tconstructor() {\n *\t\t\t\tthis.decorate( 'method' );\n *\t\t\t}\n *\n *\t\t\tmethod() {\n *\t\t\t\tconsole.log( 'called!' );\n *\t\t\t}\n *\t\t}\n *\n *\t\tconst foo = new Foo();\n *\t\tfoo.on( 'method', ( evt ) => {\n *\t\t\tevt.stop();\n *\t\t}, { priority: 'high' } );\n *\n *\t\tfoo.method(); // Nothing is logged.\n *\n *\n * **Note**: The high {@link module:utils/priorities~PriorityString priority} listener\n * has been used to execute this particular callback before the one which calls the original method\n * (which uses the \"normal\" priority).\n *\n * It is also possible to change the returned value:\n *\n *\t\tfoo.on( 'method', ( evt ) => {\n *\t\t\tevt.return = 'Foo!';\n *\t\t} );\n *\n *\t\tfoo.method(); // -> 'Foo'\n *\n * Finally, it is possible to access and modify the arguments the method is called with:\n *\n *\t\tmethod( a, b ) {\n *\t\t\tconsole.log( `${ a }, ${ b }`  );\n *\t\t}\n *\n *\t\t// ...\n *\n *\t\tfoo.on( 'method', ( evt, args ) => {\n *\t\t\targs[ 0 ] = 3;\n *\n *\t\t\tconsole.log( args[ 1 ] ); // -> 2\n *\t\t}, { priority: 'high' } );\n *\n *\t\tfoo.method( 1, 2 ); // -> '3, 2'\n *\n * @method #decorate\n * @param {String} methodName Name of the method to decorate.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/button/buttonview\n */\n\nimport View from '../view';\nimport IconView from '../icon/iconview';\nimport TooltipView from '../tooltip/tooltipview';\n\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\nimport { getEnvKeystrokeText } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\nimport '../../theme/components/button/button.css';\n\n/**\n * The button view class.\n *\n *\t\tconst view = new ButtonView();\n *\n *\t\tview.set( {\n *\t\t\tlabel: 'A button',\n *\t\t\tkeystroke: 'Ctrl+B',\n *\t\t\ttooltip: true,\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tview.render();\n *\n *\t\tdocument.body.append( view.element );\n *\n * @extends module:ui/view~View\n * @implements module:ui/button/button~Button\n */\nexport default class ButtonView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\t\tconst ariaLabelUid = uid();\n\n\t\t// Implement the Button interface.\n\t\tthis.set( 'class' );\n\t\tthis.set( 'labelStyle' );\n\t\tthis.set( 'icon' );\n\t\tthis.set( 'isEnabled', true );\n\t\tthis.set( 'isOn', false );\n\t\tthis.set( 'isVisible', true );\n\t\tthis.set( 'keystroke' );\n\t\tthis.set( 'label' );\n\t\tthis.set( 'tabindex', -1 );\n\t\tthis.set( 'tooltip' );\n\t\tthis.set( 'tooltipPosition', 's' );\n\t\tthis.set( 'type', 'button' );\n\t\tthis.set( 'withText', false );\n\n\t\t/**\n\t\t * Collection of the child views inside of the button {@link #element}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\n\t\t/**\n\t\t * Tooltip of the button view. It is configurable using the {@link #tooltip tooltip attribute}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/tooltip/tooltipview~TooltipView} #tooltipView\n\t\t */\n\t\tthis.tooltipView = this._createTooltipView();\n\n\t\t/**\n\t\t * Label of the button view. It is configurable using the {@link #label label attribute}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/view~View} #labelView\n\t\t */\n\t\tthis.labelView = this._createLabelView( ariaLabelUid );\n\n\t\t/**\n\t\t * The icon view of the button. Will be added to {@link #children} when the\n\t\t * {@link #icon icon attribute} is defined.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/icon/iconview~IconView} #iconView\n\t\t */\n\t\tthis.iconView = new IconView();\n\n\t\tthis.iconView.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck-button__icon'\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * Tooltip of the button bound to the template.\n\t\t *\n\t\t * @see #tooltip\n\t\t * @see #_getTooltipString\n\t\t * @private\n\t\t * @observable\n\t\t * @member {Boolean} #_tooltipString\n\t\t */\n\t\tthis.bind( '_tooltipString' ).to(\n\t\t\tthis, 'tooltip',\n\t\t\tthis, 'label',\n\t\t\tthis, 'keystroke',\n\t\t\tthis._getTooltipString.bind( this )\n\t\t);\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'button',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-button',\n\t\t\t\t\tbind.to( 'class' ),\n\t\t\t\t\tbind.if( 'isEnabled', 'ck-disabled', value => !value ),\n\t\t\t\t\tbind.if( 'isVisible', 'ck-hidden', value => !value ),\n\t\t\t\t\tbind.to( 'isOn', value => value ? 'ck-on' : 'ck-off' ),\n\t\t\t\t\tbind.if( 'withText', 'ck-button_with-text' )\n\t\t\t\t],\n\t\t\t\ttype: bind.to( 'type', value => value ? value : 'button' ),\n\t\t\t\ttabindex: bind.to( 'tabindex' ),\n\t\t\t\t'aria-labelledby': `ck-editor__aria-label_${ ariaLabelUid }`,\n\t\t\t\t'aria-disabled': bind.if( 'isEnabled', true, value => !value ),\n\t\t\t\t'aria-pressed': bind.if( 'isOn', true )\n\t\t\t},\n\n\t\t\tchildren: this.children,\n\n\t\t\ton: {\n\t\t\t\tmousedown: bind.to( evt => {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t} ),\n\n\t\t\t\tclick: bind.to( evt => {\n\t\t\t\t\t// We can't make the button disabled using the disabled attribute, because it won't be focusable.\n\t\t\t\t\t// Though, shouldn't this condition be moved to the button controller?\n\t\t\t\t\tif ( this.isEnabled ) {\n\t\t\t\t\t\tthis.fire( 'execute' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Prevent the default when button is disabled, to block e.g.\n\t\t\t\t\t\t// automatic form submitting. See ckeditor/ckeditor5-link#74.\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tif ( this.icon ) {\n\t\t\tthis.iconView.bind( 'content' ).to( this, 'icon' );\n\t\t\tthis.children.add( this.iconView );\n\t\t}\n\n\t\tthis.children.add( this.tooltipView );\n\t\tthis.children.add( this.labelView );\n\t}\n\n\t/**\n\t * Focuses the {@link #element} of the button.\n\t */\n\tfocus() {\n\t\tthis.element.focus();\n\t}\n\n\t/**\n\t * Creates a {@link module:ui/tooltip/tooltipview~TooltipView} instance and binds it with button\n\t * attributes.\n\t *\n\t * @private\n\t * @returns {module:ui/tooltip/tooltipview~TooltipView}\n\t */\n\t_createTooltipView() {\n\t\tconst tooltipView = new TooltipView();\n\n\t\ttooltipView.bind( 'text' ).to( this, '_tooltipString' );\n\t\ttooltipView.bind( 'position' ).to( this, 'tooltipPosition' );\n\n\t\treturn tooltipView;\n\t}\n\n\t/**\n\t * Creates a label view instance and binds it with button attributes.\n\t *\n\t * @private\n\t * @param {String} ariaLabelUid The aria label UID.\n\t * @returns {module:ui/view~View}\n\t */\n\t_createLabelView( ariaLabelUid ) {\n\t\tconst labelView = new View();\n\t\tconst bind = this.bindTemplate;\n\n\t\tlabelView.setTemplate( {\n\t\t\ttag: 'span',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-button__label'\n\t\t\t\t],\n\t\t\t\tstyle: bind.to( 'labelStyle' ),\n\t\t\t\tid: `ck-editor__aria-label_${ ariaLabelUid }`,\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttext: this.bindTemplate.to( 'label' )\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\n\t\treturn labelView;\n\t}\n\n\t/**\n\t * Gets the text for the {@link #tooltipView} from the combination of\n\t * {@link #tooltip}, {@link #label} and {@link #keystroke} attributes.\n\t *\n\t * @private\n\t * @see #tooltip\n\t * @see #_tooltipString\n\t * @param {Boolean|String|Function} tooltip Button tooltip.\n\t * @param {String} label Button label.\n\t * @param {String} keystroke Button keystroke.\n\t * @returns {String}\n\t */\n\t_getTooltipString( tooltip, label, keystroke ) {\n\t\tif ( tooltip ) {\n\t\t\tif ( typeof tooltip == 'string' ) {\n\t\t\t\treturn tooltip;\n\t\t\t} else {\n\t\t\t\tif ( keystroke ) {\n\t\t\t\t\tkeystroke = getEnvKeystrokeText( keystroke );\n\t\t\t\t}\n\n\t\t\t\tif ( tooltip instanceof Function ) {\n\t\t\t\t\treturn tooltip( label, keystroke );\n\t\t\t\t} else {\n\t\t\t\t\treturn `${ label }${ keystroke ? ` (${ keystroke })` : '' }`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/element\n */\n\nimport Node from './node';\nimport NodeList from './nodelist';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\n/**\n * Model element. Type of {@link module:engine/model/node~Node node} that has a {@link module:engine/model/element~Element#name name} and\n * {@link module:engine/model/element~Element#getChildren child nodes}.\n *\n * **Important**: see {@link module:engine/model/node~Node} to read about restrictions using `Element` and `Node` API.\n *\n * @extends {module:engine/model/node~Node}\n */\nexport default class Element extends Node {\n\t/**\n\t * Creates a model element.\n\t *\n\t * **Note:** Constructor of this class shouldn't be used directly in the code.\n\t * Use the {@link module:engine/model/writer~Writer#createElement} method instead.\n\t *\n\t * @protected\n\t * @param {String} name Element's name.\n\t * @param {Object} [attrs] Element's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t * @param {module:engine/model/node~Node|Iterable.<module:engine/model/node~Node>} [children]\n\t * One or more nodes to be inserted as children of created element.\n\t */\n\tconstructor( name, attrs, children ) {\n\t\tsuper( attrs );\n\n\t\t/**\n\t\t * Element name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} module:engine/model/element~Element#name\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * List of children nodes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/nodelist~NodeList} module:engine/model/element~Element#_children\n\t\t */\n\t\tthis._children = new NodeList();\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\t}\n\n\t/**\n\t * Number of this element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Sum of {@link module:engine/model/node~Node#offsetSize offset sizes} of all of this element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget maxOffset() {\n\t\treturn this._children.maxOffset;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this element, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this.childCount === 0;\n\t}\n\n\t/**\n\t * Checks whether this model object is of the given type.\n\t *\n\t *\t\tobj.name; // 'listItem'\n\t *\t\tobj instanceof Element; // true\n\t *\n\t *\t\tobj.is( 'element' ); // true\n\t *\t\tobj.is( 'listItem' ); // true\n\t *\t\tobj.is( 'element', 'listItem' ); // true\n\t *\t\tobj.is( 'text' ); // false\n\t *\t\tobj.is( 'element', 'image' ); // false\n\t *\n\t * Read more in {@link module:engine/model/node~Node#is `Node#is()`}.\n\t *\n\t * @param {String} type Type to check when `name` parameter is present.\n\t * Otherwise, it acts like the `name` parameter.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'element' || type == this.name || super.is( type );\n\t\t} else {\n\t\t\treturn type == 'element' && name == this.name;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/model/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children.getNode( index );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all of this element's children.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns an index of the given child node. Returns `null` if given node is not a child of this element.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number} Child node's index in this element.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.getNodeIndex( node );\n\t}\n\n\t/**\n\t * Returns the starting offset of given child. Starting offset is equal to the sum of\n\t * {@link module:engine/model/node~Node#offsetSize offset sizes} of all node's siblings that are before it. Returns `null` if\n\t * given node is not a child of this element.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number} Child node's starting offset.\n\t */\n\tgetChildStartOffset( node ) {\n\t\treturn this._children.getNodeStartOffset( node );\n\t}\n\n\t/**\n\t * Returns index of a node that occupies given offset. If given offset is too low, returns `0`. If given offset is\n\t * too high, returns {@link module:engine/model/element~Element#getChildIndex index after last child}.\n\t *\n\t *\t\tconst textNode = new Text( 'foo' );\n\t *\t\tconst pElement = new Element( 'p' );\n\t *\t\tconst divElement = new Element( [ textNode, pElement ] );\n\t *\t\tdivElement.offsetToIndex( -1 ); // Returns 0, because offset is too low.\n\t *\t\tdivElement.offsetToIndex( 0 ); // Returns 0, because offset 0 is taken by `textNode` which is at index 0.\n\t *\t\tdivElement.offsetToIndex( 1 ); // Returns 0, because `textNode` has `offsetSize` equal to 3, so it occupies offset 1 too.\n\t *\t\tdivElement.offsetToIndex( 2 ); // Returns 0.\n\t *\t\tdivElement.offsetToIndex( 3 ); // Returns 1.\n\t *\t\tdivElement.offsetToIndex( 4 ); // Returns 2. There are no nodes at offset 4, so last available index is returned.\n\t *\n\t * @param {Number} offset Offset to look for.\n\t * @returns {Number}\n\t */\n\toffsetToIndex( offset ) {\n\t\treturn this._children.offsetToIndex( offset );\n\t}\n\n\t/**\n\t * Returns a descendant node by its path relative to this element.\n\t *\n\t *\t\t// <this>a<b>c</b></this>\n\t *\t\tthis.getNodeByPath( [ 0 ] );     // -> \"a\"\n\t *\t\tthis.getNodeByPath( [ 1 ] );     // -> <b>\n\t *\t\tthis.getNodeByPath( [ 1, 0 ] );  // -> \"c\"\n\t *\n\t * @param {Array.<Number>} relativePath Path of the node to find, relative to this element.\n\t * @returns {module:engine/model/node~Node}\n\t */\n\tgetNodeByPath( relativePath ) {\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\tfor ( const index of relativePath ) {\n\t\t\tnode = node.getChild( node.offsetToIndex( index ) );\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Converts `Element` instance to plain object and returns it. Takes care of converting all of this element's children.\n\t *\n\t * @returns {Object} `Element` instance converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.name = this.name;\n\n\t\tif ( this._children.length > 0 ) {\n\t\t\tjson.children = [];\n\n\t\t\tfor ( const node of this._children ) {\n\t\t\t\tjson.children.push( node.toJSON() );\n\t\t\t}\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a copy of this element and returns it. Created element has the same name and attributes as the original element.\n\t * If clone is deep, the original element's children are also cloned. If not, then empty element is removed.\n\t *\n\t * @protected\n\t * @param {Boolean} [deep=false] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any child.\n\t */\n\t_clone( deep = false ) {\n\t\tconst children = deep ? Array.from( this._children ).map( node => node._clone( true ) ) : null;\n\n\t\treturn new Element( this.name, this.getAttributes(), children );\n\t}\n\n\t/**\n\t * {@link module:engine/model/element~Element#_insertChild Inserts} one or more nodes at the end of this element.\n\t *\n\t * @see module:engine/model/writer~Writer#append\n\t * @protected\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} nodes Nodes to be inserted.\n\t */\n\t_appendChild( nodes ) {\n\t\tthis._insertChild( this.childCount, nodes );\n\t}\n\n\t/**\n\t * Inserts one or more nodes at the given index and sets {@link module:engine/model/node~Node#parent parent} of these nodes\n\t * to this element.\n\t *\n\t * @see module:engine/model/writer~Writer#insert\n\t * @protected\n\t * @param {Number} index Index at which nodes should be inserted.\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} items Items to be inserted.\n\t */\n\t_insertChild( index, items ) {\n\t\tconst nodes = normalize( items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\t\t}\n\n\t\tthis._children._insertNodes( index, nodes );\n\t}\n\n\t/**\n\t * Removes one or more nodes starting at the given index and sets\n\t * {@link module:engine/model/node~Node#parent parent} of these nodes to `null`.\n\t *\n\t * @see module:engine/model/writer~Writer#remove\n\t * @protected\n\t * @param {Number} index Index of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/model/node~Node>} Array containing removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tconst nodes = this._children._removeNodes( index, howMany );\n\n\t\tfor ( const node of nodes ) {\n\t\t\tnode.parent = null;\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\t/**\n\t * Creates an `Element` instance from given plain object (i.e. parsed JSON string).\n\t * Converts `Element` children to proper nodes.\n\t *\n\t * @param {Object} json Plain object to be converted to `Element`.\n\t * @returns {module:engine/model/element~Element} `Element` instance created using given plain object.\n\t */\n\tstatic fromJSON( json ) {\n\t\tlet children = null;\n\n\t\tif ( json.children ) {\n\t\t\tchildren = [];\n\n\t\t\tfor ( const child of json.children ) {\n\t\t\t\tif ( child.name ) {\n\t\t\t\t\t// If child has name property, it is an Element.\n\t\t\t\t\tchildren.push( Element.fromJSON( child ) );\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, it is a Text node.\n\t\t\t\t\tchildren.push( Text.fromJSON( child ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn new Element( json.name, json.attributes, children );\n\t}\n}\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/model/item~Item|Iterable.<String|module:engine/model/item~Item>}\n// @returns {Iterable.<module:engine/model/node~Node>}\nfunction normalize( nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( node.data, node.getAttributes() );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/text\n */\n\nimport Node from './node';\n\n/**\n * Model text node. Type of {@link module:engine/model/node~Node node} that contains {@link module:engine/model/text~Text#data text data}.\n *\n * **Important:** see {@link module:engine/model/node~Node} to read about restrictions using `Text` and `Node` API.\n *\n * **Note:** keep in mind that `Text` instances might indirectly got removed from model tree when model is changed.\n * This happens when {@link module:engine/model/writer~Writer model writer} is used to change model and the text node is merged with\n * another text node. Then, both text nodes are removed and a new text node is inserted into the model. Because of\n * this behavior, keeping references to `Text` is not recommended. Instead, consider creating\n * {@link module:engine/model/liveposition~LivePosition live position} placed before the text node.\n *\n * @extends {module:engine/model/node~Node}\n */\nexport default class Text extends Node {\n\t/**\n\t * Creates a text node.\n\t *\n\t * **Note:** Constructor of this class shouldn't be used directly in the code.\n\t * Use the {@link module:engine/model/writer~Writer#createText} method instead.\n\t *\n\t * @protected\n\t * @param {String} data Node's text.\n\t * @param {Object} [attrs] Node's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\tconstructor( data, attrs ) {\n\t\tsuper( attrs );\n\n\t\t/**\n\t\t * Text data contained in this text node.\n\t\t *\n\t\t * @protected\n\t\t * @type {String}\n\t\t */\n\t\tthis._data = data || '';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Returns a text data contained in the node.\n\t *\n\t * @readonly\n\t * @type {String}\n\t */\n\tget data() {\n\t\treturn this._data;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type ) {\n\t\treturn type == 'text' || super.is( type );\n\t}\n\n\t/**\n\t * Converts `Text` instance to plain object and returns it.\n\t *\n\t * @returns {Object} `Text` instance converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.data = this.data;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a copy of this text node and returns it. Created text node has same text data and attributes as original text node.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/text~Text} `Text` instance created using given plain object.\n\t */\n\t_clone() {\n\t\treturn new Text( this.data, this.getAttributes() );\n\t}\n\n\t/**\n\t * Creates a `Text` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Text`.\n\t * @returns {module:engine/model/text~Text} `Text` instance created using given plain object.\n\t */\n\tstatic fromJSON( json ) {\n\t\treturn new Text( json.data, json.attributes );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/text\n */\n\nimport Node from './node';\n\n/**\n * Tree view text node.\n *\n * The constructor of this class shouldn't be used directly. To create new Text instances\n * use the {@link module:engine/view/downcastwriter~DowncastWriter#createText `DowncastWriter#createText()`}\n * method when working on data downcasted from the model or the\n * {@link module:engine/view/upcastwriter~UpcastWriter#createText `UpcastWriter#createText()`}\n * method when working on non-semantic views.\n *\n * @extends module:engine/view/node~Node\n */\nexport default class Text extends Node {\n\t/**\n\t * Creates a tree view text node.\n\t *\n\t * @protected\n\t * @param {String} data The text's data.\n\t */\n\tconstructor( data ) {\n\t\tsuper();\n\n\t\t/**\n\t\t * The text content.\n\t\t *\n\t\t * Setting the data fires the {@link module:engine/view/node~Node#event:change:text change event}.\n\t\t *\n\t\t * @protected\n\t\t * @member {String} module:engine/view/text~Text#_textData\n\t\t */\n\t\tthis._textData = data;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type ) {\n\t\treturn type == 'text' || super.is( type );\n\t}\n\n\t/**\n\t * The text content.\n\t *\n\t * @readonly\n\t * @type {String}\n\t */\n\tget data() {\n\t\treturn this._textData;\n\t}\n\n\t/**\n\t * This getter is required when using the addition assignment operator on protected property:\n\t *\n\t *\t\tconst foo = downcastWriter.createText( 'foo' );\n\t *\t\tconst bar = downcastWriter.createText( 'bar' );\n\t *\n\t *\t\tfoo._data += bar.data;   // executes: `foo._data = foo._data + bar.data`\n\t *\t\tconsole.log( foo.data ); // prints: 'foobar'\n\t *\n\t * If the protected getter didn't exist, `foo._data` will return `undefined` and result of the merge will be invalid.\n\t *\n\t * @protected\n\t * @type {String}\n\t */\n\tget _data() {\n\t\treturn this.data;\n\t}\n\n\t/**\n\t * Sets data and fires the {@link module:engine/view/node~Node#event:change:text change event}.\n\t *\n\t * @protected\n\t * @fires change:text\n\t * @param {String} data New data for the text node.\n\t */\n\tset _data( data ) {\n\t\tthis._fireChange( 'text', this );\n\n\t\tthis._textData = data;\n\t}\n\n\t/**\n\t * Checks if this text node is similar to other text node.\n\t * Both nodes should have the same data to be considered as similar.\n\t *\n\t * @param {module:engine/view/text~Text} otherNode Node to check if it is same as this node.\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherNode ) {\n\t\tif ( !( otherNode instanceof Text ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this === otherNode || this.data === otherNode.data;\n\t}\n\n\t/**\n\t * Clones this node.\n\t *\n\t * @protected\n\t * @returns {module:engine/view/text~Text} Text node that is a clone of this node.\n\t */\n\t_clone() {\n\t\treturn new Text( this.data );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/moveoperation\n */\n\nimport Operation from './operation';\nimport Position from '../position';\nimport Range from '../range';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport { _move } from './utils';\n\n/**\n * Operation to move a range of {@link module:engine/model/item~Item model items}\n * to given {@link module:engine/model/position~Position target position}.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class MoveOperation extends Operation {\n\t/**\n\t * Creates a move operation.\n\t *\n\t * @param {module:engine/model/position~Position} sourcePosition\n\t * Position before the first {@link module:engine/model/item~Item model item} to move.\n\t * @param {Number} howMany Offset size of moved range. Moved range will start from `sourcePosition` and end at\n\t * `sourcePosition` with offset shifted by `howMany`.\n\t * @param {module:engine/model/position~Position} targetPosition Position at which moved nodes will be inserted.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( sourcePosition, howMany, targetPosition, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position before the first {@link module:engine/model/item~Item model item} to move.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/moveoperation~MoveOperation#sourcePosition\n\t\t */\n\t\tthis.sourcePosition = sourcePosition.clone();\n\t\t// `'toNext'` because `sourcePosition` is a bit like a start of the moved range.\n\t\tthis.sourcePosition.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Offset size of moved range.\n\t\t *\n\t\t * @member {Number} module:engine/model/operation/moveoperation~MoveOperation#howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\n\t\t/**\n\t\t * Position at which moved nodes will be inserted.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/moveoperation~MoveOperation#targetPosition\n\t\t */\n\t\tthis.targetPosition = targetPosition.clone();\n\t\tthis.targetPosition.stickiness = 'toNone';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\tif ( this.targetPosition.root.rootName == '$graveyard' ) {\n\t\t\treturn 'remove';\n\t\t} else if ( this.sourcePosition.root.rootName == '$graveyard' ) {\n\t\t\treturn 'reinsert';\n\t\t}\n\n\t\treturn 'move';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.sourcePosition, this.howMany, this.targetPosition, this.baseVersion );\n\t}\n\n\t/**\n\t * Returns the start position of the moved range after it got moved. This may be different than\n\t * {@link module:engine/model/operation/moveoperation~MoveOperation#targetPosition} in some cases, i.e. when a range is moved\n\t * inside the same parent but {@link module:engine/model/operation/moveoperation~MoveOperation#targetPosition targetPosition}\n\t * is after {@link module:engine/model/operation/moveoperation~MoveOperation#sourcePosition sourcePosition}.\n\t *\n\t *\t\t vv              vv\n\t *\t\tabcdefg ===> adefbcg\n\t *\t\t     ^          ^\n\t *\t\t     targetPos\tmovedRangeStart\n\t *\t\t     offset 6\toffset 4\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetMovedRangeStart() {\n\t\treturn this.targetPosition._getTransformedByDeletion( this.sourcePosition, this.howMany );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation}\n\t */\n\tgetReversed() {\n\t\tconst newTargetPosition = this.sourcePosition._getTransformedByInsertion( this.targetPosition, this.howMany );\n\n\t\treturn new this.constructor( this.getMovedRangeStart(), this.howMany, newTargetPosition, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst sourceElement = this.sourcePosition.parent;\n\t\tconst targetElement = this.targetPosition.parent;\n\t\tconst sourceOffset = this.sourcePosition.offset;\n\t\tconst targetOffset = this.targetPosition.offset;\n\n\t\t// Validate whether move operation has correct parameters.\n\t\t// Validation is pretty complex but move operation is one of the core ways to manipulate the document state.\n\t\t// We expect that many errors might be connected with one of scenarios described below.\n\t\tif ( !sourceElement || !targetElement ) {\n\t\t\t/**\n\t\t\t * Source position or target position is invalid.\n\t\t\t *\n\t\t\t * @error move-operation-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'move-operation-position-invalid: Source position or target position is invalid.', this\n\t\t\t);\n\t\t} else if ( sourceOffset + this.howMany > sourceElement.maxOffset ) {\n\t\t\t/**\n\t\t\t * The nodes which should be moved do not exist.\n\t\t\t *\n\t\t\t * @error move-operation-nodes-do-not-exist\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.', this\n\t\t\t);\n\t\t} else if ( sourceElement === targetElement && sourceOffset < targetOffset && targetOffset < sourceOffset + this.howMany ) {\n\t\t\t/**\n\t\t\t * Trying to move a range of nodes into the middle of that range.\n\t\t\t *\n\t\t\t * @error move-operation-range-into-itself\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.', this\n\t\t\t);\n\t\t} else if ( this.sourcePosition.root == this.targetPosition.root ) {\n\t\t\tif ( compareArrays( this.sourcePosition.getParentPath(), this.targetPosition.getParentPath() ) == 'prefix' ) {\n\t\t\t\tconst i = this.sourcePosition.path.length - 1;\n\n\t\t\t\tif ( this.targetPosition.path[ i ] >= sourceOffset && this.targetPosition.path[ i ] < sourceOffset + this.howMany ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Trying to move a range of nodes into one of nodes from that range.\n\t\t\t\t\t *\n\t\t\t\t\t * @error move-operation-node-into-itself\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t'move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.', this\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t_move( Range._createFromPositionAndShift( this.sourcePosition, this.howMany ), this.targetPosition );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.sourcePosition = this.sourcePosition.toJSON();\n\t\tjson.targetPosition = this.targetPosition.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'MoveOperation';\n\t}\n\n\t/**\n\t * Creates `MoveOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst sourcePosition = Position.fromJSON( json.sourcePosition, document );\n\t\tconst targetPosition = Position.fromJSON( json.targetPosition, document );\n\n\t\treturn new this( sourcePosition, json.howMany, targetPosition, json.baseVersion );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module widget/highlightstack\n */\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Class used to handle correct order of highlights on elements.\n *\n * When different highlights are applied to same element correct order should be preserved:\n *\n * * highlight with highest priority should be applied,\n * * if two highlights have same priority - sort by CSS class provided in\n * {@link module:engine/conversion/downcasthelpers~HighlightDescriptor}.\n *\n * This way, highlight will be applied with the same rules it is applied on texts.\n */\nexport default class HighlightStack {\n\t/**\n\t * Creates class instance.\n\t */\n\tconstructor() {\n\t\tthis._stack = [];\n\t}\n\n\t/**\n\t * Adds highlight descriptor to the stack.\n\t *\n\t * @fires change:top\n\t * @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} descriptor\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n\t */\n\tadd( descriptor, writer ) {\n\t\tconst stack = this._stack;\n\n\t\t// Save top descriptor and insert new one. If top is changed - fire event.\n\t\tconst oldTop = stack[ 0 ];\n\t\tthis._insertDescriptor( descriptor );\n\t\tconst newTop = stack[ 0 ];\n\n\t\t// When new object is at the top and stores different information.\n\t\tif ( oldTop !== newTop && !compareDescriptors( oldTop, newTop ) ) {\n\t\t\tthis.fire( 'change:top', {\n\t\t\t\toldDescriptor: oldTop,\n\t\t\t\tnewDescriptor: newTop,\n\t\t\t\twriter\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Removes highlight descriptor from the stack.\n\t *\n\t * @fires change:top\n\t * @param {String} id Id of the descriptor to remove.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n\t */\n\tremove( id, writer ) {\n\t\tconst stack = this._stack;\n\n\t\tconst oldTop = stack[ 0 ];\n\t\tthis._removeDescriptor( id );\n\t\tconst newTop = stack[ 0 ];\n\n\t\t// When new object is at the top and stores different information.\n\t\tif ( oldTop !== newTop && !compareDescriptors( oldTop, newTop ) ) {\n\t\t\tthis.fire( 'change:top', {\n\t\t\t\toldDescriptor: oldTop,\n\t\t\t\tnewDescriptor: newTop,\n\t\t\t\twriter\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Inserts given descriptor in correct place in the stack. It also takes care about updating information when\n\t * descriptor with same id is already present.\n\t *\n\t * @private\n\t * @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} descriptor\n\t */\n\t_insertDescriptor( descriptor ) {\n\t\tconst stack = this._stack;\n\t\tconst index = stack.findIndex( item => item.id === descriptor.id );\n\n\t\t// Inserting exact same descriptor - do nothing.\n\t\tif ( compareDescriptors( descriptor, stack[ index ] ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If descriptor with same id but with different information is on the stack - remove it.\n\t\tif ( index > -1 ) {\n\t\t\tstack.splice( index, 1 );\n\t\t}\n\n\t\t// Find correct place to insert descriptor in the stack.\n\t\t// It have different information (for example priority) so it must be re-inserted in correct place.\n\t\tlet i = 0;\n\n\t\twhile ( stack[ i ] && shouldABeBeforeB( stack[ i ], descriptor ) ) {\n\t\t\ti++;\n\t\t}\n\n\t\tstack.splice( i, 0, descriptor );\n\t}\n\n\t/**\n\t * Removes descriptor with given id from the stack.\n\t *\n\t * @private\n\t * @param {String} id Descriptor's id.\n\t */\n\t_removeDescriptor( id ) {\n\t\tconst stack = this._stack;\n\t\tconst index = stack.findIndex( item => item.id === id );\n\n\t\t// If descriptor with same id is on the list - remove it.\n\t\tif ( index > -1 ) {\n\t\t\tstack.splice( index, 1 );\n\t\t}\n\t}\n}\n\nmix( HighlightStack, EmitterMixin );\n\n// Compares two descriptors by checking their priority and class list.\n//\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} a\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} b\n// @returns {Boolean} Returns true if both descriptors are defined and have same priority and classes.\nfunction compareDescriptors( a, b ) {\n\treturn a && b && a.priority == b.priority && classesToString( a.classes ) == classesToString( b.classes );\n}\n\n// Checks whenever first descriptor should be placed in the stack before second one.\n//\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} a\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} b\n// @returns {Boolean}\nfunction shouldABeBeforeB( a, b ) {\n\tif ( a.priority > b.priority ) {\n\t\treturn true;\n\t} else if ( a.priority < b.priority ) {\n\t\treturn false;\n\t}\n\n\t// When priorities are equal and names are different - use classes to compare.\n\treturn classesToString( a.classes ) > classesToString( b.classes );\n}\n\n// Converts CSS classes passed with {@link module:engine/conversion/downcasthelpers~HighlightDescriptor} to\n// sorted string.\n//\n// @param {String|Array<String>} descriptor\n// @returns {String}\nfunction classesToString( classes ) {\n\treturn Array.isArray( classes ) ? classes.sort().join( ',' ) : classes;\n}\n\n/**\n * Fired when top element on {@link module:widget/highlightstack~HighlightStack} has been changed\n *\n * @event change:top\n * @param {Object} data Additional information about the change.\n * @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} [data.newDescriptor] New highlight\n * descriptor. It will be `undefined` when last descriptor is removed from the stack.\n * @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} [data.oldDescriptor] Old highlight\n * descriptor. It will be `undefined` when first descriptor is added to the stack.\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that can be used to modify element.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module widget/utils\n */\n\nimport HighlightStack from './highlightstack';\nimport IconView from '@ckeditor/ckeditor5-ui/src/icon/iconview';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\nimport dragHandlerIcon from '../theme/icons/drag-handler.svg';\n\n/**\n * CSS class added to each widget element.\n *\n * @const {String}\n */\nexport const WIDGET_CLASS_NAME = 'ck-widget';\n\n/**\n * CSS class added to currently selected widget element.\n *\n * @const {String}\n */\nexport const WIDGET_SELECTED_CLASS_NAME = 'ck-widget_selected';\n\n/**\n * Returns `true` if given {@link module:engine/view/node~Node} is an {@link module:engine/view/element~Element} and a widget.\n *\n * @param {module:engine/view/node~Node} node\n * @returns {Boolean}\n */\nexport function isWidget( node ) {\n\tif ( !node.is( 'element' ) ) {\n\t\treturn false;\n\t}\n\n\treturn !!node.getCustomProperty( 'widget' );\n}\n\n/* eslint-disable max-len */\n/**\n * Converts the given {@link module:engine/view/element~Element} to a widget in the following way:\n *\n * * sets the `contenteditable` attribute to `\"true\"`,\n * * adds the `ck-widget` CSS class,\n * * adds a custom {@link module:engine/view/element~Element#getFillerOffset `getFillerOffset()`} method returning `null`,\n * * adds a custom property allowing to recognize widget elements by using {@link ~isWidget `isWidget()`},\n * * implements the {@link ~setHighlightHandling view highlight on widgets}.\n *\n * This function needs to be used in conjunction with\n * {@link module:engine/conversion/downcasthelpers~DowncastHelpers downcast conversion helpers}\n * like {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`}.\n * Moreover, typically you will want to use `toWidget()` only for `editingDowncast`, while keeping the `dataDowncast` clean.\n *\n * For example, in order to convert a `<widget>` model element to `<div class=\"widget\">` in the view, you can define\n * such converters:\n *\n *\t\teditor.conversion.for( 'editingDowncast' )\n *\t\t\t.elementToElement( {\n *\t\t\t\tmodel: 'widget',\n *\t\t\t\tview: ( modelItem, writer ) => {\n *\t\t\t\t\tconst div = writer.createContainerElement( 'div', { class: 'widget' } );\n *\n *\t\t\t\t\treturn toWidget( div, writer, { label: 'some widget' } );\n *\t\t\t\t}\n *\t\t\t} );\n *\n *\t\teditor.conversion.for( 'dataDowncast' )\n *\t\t\t.elementToElement( {\n *\t\t\t\tmodel: 'widget',\n *\t\t\t\tview: ( modelItem, writer ) => {\n *\t\t\t\t\treturn writer.createContainerElement( 'div', { class: 'widget' } );\n *\t\t\t\t}\n *\t\t\t} );\n *\n * See the full source code of the widget (with a nested editable) schema definition and converters in\n * [this sample](https://github.com/ckeditor/ckeditor5-widget/blob/master/tests/manual/widget-with-nestededitable.js).\n *\n * @param {module:engine/view/element~Element} element\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @param {Object} [options={}]\n * @param {String|Function} [options.label] Element's label provided to the {@link ~setLabel} function. It can be passed as\n * a plain string or a function returning a string. It represents the widget for assistive technologies (like screen readers).\n * @param {Boolean} [options.hasSelectionHandler=false] If `true`, the widget will have a selection handler added.\n * @returns {module:engine/view/element~Element} Returns the same element.\n */\n/* eslint-enable max-len */\nexport function toWidget( element, writer, options = {} ) {\n\t// The selection on Edge behaves better when the whole editor contents is in a single contenteditable element.\n\t// https://github.com/ckeditor/ckeditor5/issues/1079\n\tif ( !env.isEdge ) {\n\t\twriter.setAttribute( 'contenteditable', 'false', element );\n\t}\n\n\twriter.addClass( WIDGET_CLASS_NAME, element );\n\twriter.setCustomProperty( 'widget', true, element );\n\telement.getFillerOffset = getFillerOffset;\n\n\tif ( options.label ) {\n\t\tsetLabel( element, options.label, writer );\n\t}\n\n\tif ( options.hasSelectionHandler ) {\n\t\taddSelectionHandler( element, writer );\n\t}\n\n\tsetHighlightHandling(\n\t\telement,\n\t\twriter,\n\t\t( element, descriptor, writer ) => writer.addClass( normalizeToArray( descriptor.classes ), element ),\n\t\t( element, descriptor, writer ) => writer.removeClass( normalizeToArray( descriptor.classes ), element )\n\t);\n\n\treturn element;\n\n\t// Normalizes CSS class in descriptor that can be provided in form of an array or a string.\n\tfunction normalizeToArray( classes ) {\n\t\treturn Array.isArray( classes ) ? classes : [ classes ];\n\t}\n}\n\n/**\n * Sets highlight handling methods. Uses {@link module:widget/highlightstack~HighlightStack} to\n * properly determine which highlight descriptor should be used at given time.\n *\n * @param {module:engine/view/element~Element} element\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @param {Function} add\n * @param {Function} remove\n */\nexport function setHighlightHandling( element, writer, add, remove ) {\n\tconst stack = new HighlightStack();\n\n\tstack.on( 'change:top', ( evt, data ) => {\n\t\tif ( data.oldDescriptor ) {\n\t\t\tremove( element, data.oldDescriptor, data.writer );\n\t\t}\n\n\t\tif ( data.newDescriptor ) {\n\t\t\tadd( element, data.newDescriptor, data.writer );\n\t\t}\n\t} );\n\n\twriter.setCustomProperty( 'addHighlight', ( element, descriptor, writer ) => stack.add( descriptor, writer ), element );\n\twriter.setCustomProperty( 'removeHighlight', ( element, id, writer ) => stack.remove( id, writer ), element );\n}\n\n/**\n * Sets label for given element.\n * It can be passed as a plain string or a function returning a string. Function will be called each time label is retrieved by\n * {@link ~getLabel `getLabel()`}.\n *\n * @param {module:engine/view/element~Element} element\n * @param {String|Function} labelOrCreator\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n */\nexport function setLabel( element, labelOrCreator, writer ) {\n\twriter.setCustomProperty( 'widgetLabel', labelOrCreator, element );\n}\n\n/**\n * Returns the label of the provided element.\n *\n * @param {module:engine/view/element~Element} element\n * @returns {String}\n */\nexport function getLabel( element ) {\n\tconst labelCreator = element.getCustomProperty( 'widgetLabel' );\n\n\tif ( !labelCreator ) {\n\t\treturn '';\n\t}\n\n\treturn typeof labelCreator == 'function' ? labelCreator() : labelCreator;\n}\n\n/**\n * Adds functionality to the provided {@link module:engine/view/editableelement~EditableElement} to act as a widget's editable:\n *\n * * sets the `contenteditable` attribute to `true` when {@link module:engine/view/editableelement~EditableElement#isReadOnly} is `false`,\n * otherwise sets it to `false`,\n * * adds the `ck-editor__editable` and `ck-editor__nested-editable` CSS classes,\n * * adds the `ck-editor__nested-editable_focused` CSS class when the editable is focused and removes it when it is blurred.\n *\n * Similarly to {@link ~toWidget `toWidget()`} this function should be used in `dataDowncast` only and it is usually\n * used together with {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`}.\n *\n * For example, in order to convert a `<nested>` model element to `<div class=\"nested\">` in the view, you can define\n * such converters:\n *\n *\t\teditor.conversion.for( 'editingDowncast' )\n *\t\t\t.elementToElement( {\n *\t\t\t\tmodel: 'nested',\n *\t\t\t\tview: ( modelItem, writer ) => {\n *\t\t\t\t\tconst div = writer.createEditableElement( 'div', { class: 'nested' } );\n *\n *\t\t\t\t\treturn toWidgetEditable( nested, writer );\n *\t\t\t\t}\n *\t\t\t} );\n *\n *\t\teditor.conversion.for( 'dataDowncast' )\n *\t\t\t.elementToElement( {\n *\t\t\t\tmodel: 'nested',\n *\t\t\t\tview: ( modelItem, writer ) => {\n *\t\t\t\t\treturn writer.createContainerElement( 'div', { class: 'nested' } );\n *\t\t\t\t}\n *\t\t\t} );\n *\n * See the full source code of the widget (with nested editable) schema definition and converters in\n * [this sample](https://github.com/ckeditor/ckeditor5-widget/blob/master/tests/manual/widget-with-nestededitable.js).\n *\n * @param {module:engine/view/editableelement~EditableElement} editable\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @returns {module:engine/view/editableelement~EditableElement} Returns the same element that was provided in the `editable` parameter\n */\nexport function toWidgetEditable( editable, writer ) {\n\twriter.addClass( [ 'ck-editor__editable', 'ck-editor__nested-editable' ], editable );\n\n\t// The selection on Edge behaves better when the whole editor contents is in a single contentedible element.\n\t// https://github.com/ckeditor/ckeditor5/issues/1079\n\tif ( !env.isEdge ) {\n\t\t// Set initial contenteditable value.\n\t\twriter.setAttribute( 'contenteditable', editable.isReadOnly ? 'false' : 'true', editable );\n\n\t\t// Bind the contenteditable property to element#isReadOnly.\n\t\teditable.on( 'change:isReadOnly', ( evt, property, is ) => {\n\t\t\twriter.setAttribute( 'contenteditable', is ? 'false' : 'true', editable );\n\t\t} );\n\t}\n\n\teditable.on( 'change:isFocused', ( evt, property, is ) => {\n\t\tif ( is ) {\n\t\t\twriter.addClass( 'ck-editor__nested-editable_focused', editable );\n\t\t} else {\n\t\t\twriter.removeClass( 'ck-editor__nested-editable_focused', editable );\n\t\t}\n\t} );\n\n\treturn editable;\n}\n\n/**\n * Returns a model position which is optimal (in terms of UX) for inserting a widget block.\n *\n * For instance, if a selection is in the middle of a paragraph, the position before this paragraph\n * will be returned so that it is not split. If the selection is at the end of a paragraph,\n * the position after this paragraph will be returned.\n *\n * Note: If the selection is placed in an empty block, that block will be returned. If that position\n * is then passed to {@link module:engine/model/model~Model#insertContent},\n * the block will be fully replaced by the image.\n *\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * The selection based on which the insertion position should be calculated.\n * @param {module:engine/model/model~Model} model Model instance.\n * @returns {module:engine/model/position~Position} The optimal position.\n */\nexport function findOptimalInsertionPosition( selection, model ) {\n\tconst selectedElement = selection.getSelectedElement();\n\n\tif ( selectedElement && model.schema.isBlock( selectedElement ) ) {\n\t\treturn model.createPositionAfter( selectedElement );\n\t}\n\n\tconst firstBlock = selection.getSelectedBlocks().next().value;\n\n\tif ( firstBlock ) {\n\t\t// If inserting into an empty block – return position in that block. It will get\n\t\t// replaced with the image by insertContent(). #42.\n\t\tif ( firstBlock.isEmpty ) {\n\t\t\treturn model.createPositionAt( firstBlock, 0 );\n\t\t}\n\n\t\tconst positionAfter = model.createPositionAfter( firstBlock );\n\n\t\t// If selection is at the end of the block - return position after the block.\n\t\tif ( selection.focus.isTouching( positionAfter ) ) {\n\t\t\treturn positionAfter;\n\t\t}\n\n\t\t// Otherwise return position before the block.\n\t\treturn model.createPositionBefore( firstBlock );\n\t}\n\n\treturn selection.focus;\n}\n\n/**\n * A util to be used in order to map view positions to correct model positions when implementing a widget\n * which renders non-empty view element for an empty model element.\n *\n * For example:\n *\n *\t\t// Model:\n *\t\t<placeholder type=\"name\"></placeholder>\n *\n *\t\t// View:\n *\t\t<span class=\"placeholder\">name</span>\n *\n * In such case, view positions inside `<span>` cannot be correct mapped to the model (because the model element is empty).\n * To handle mapping positions inside `<span class=\"placeholder\">` to the model use this util as follows:\n *\n *\t\teditor.editing.mapper.on(\n *\t\t\t'viewToModelPosition',\n *\t\t\tviewToModelPositionOutsideModelElement( model, viewElement => viewElement.hasClass( 'placeholder' ) )\n *\t\t);\n *\n * The callback will try to map the view offset of selection to an expected model position.\n *\n * 1. When the position is at the end (or in the middle) of the inline widget:\n *\n *\t\t// View:\n *\t\t<p>foo <span class=\"placeholder\">name|</span> bar</p>\n *\n *\t\t// Model:\n *\t\t<paragraph>foo <placeholder type=\"name\"></placeholder>| bar</paragraph>\n *\n * 2. When the position is at the beginning of the inline widget:\n *\n *\t\t// View:\n *\t\t<p>foo <span class=\"placeholder\">|name</span> bar</p>\n *\n *\t\t// Model:\n *\t\t<paragraph>foo |<placeholder type=\"name\"></placeholder> bar</paragraph>\n *\n * @param {module:engine/model/model~Model} model Model instance on which the callback operates.\n * @param {Function} viewElementMatcher Function that is passed a view element and should return `true` if the custom mapping\n * should be applied to the given view element.\n * @return {Function}\n */\nexport function viewToModelPositionOutsideModelElement( model, viewElementMatcher ) {\n\treturn ( evt, data ) => {\n\t\tconst { mapper, viewPosition } = data;\n\n\t\tconst viewParent = mapper.findMappedViewAncestor( viewPosition );\n\n\t\tif ( !viewElementMatcher( viewParent ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst modelParent = mapper.toModelElement( viewParent );\n\n\t\tdata.modelPosition = model.createPositionAt( modelParent, viewPosition.isAtStart ? 'before' : 'after' );\n\t};\n}\n\n// Default filler offset function applied to all widget elements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n\n// Adds a drag handler to the widget.\n//\n// @param {module:engine/view/containerelement~ContainerElement}\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction addSelectionHandler( widgetElement, writer ) {\n\tconst selectionHandler = writer.createUIElement( 'div', { class: 'ck ck-widget__selection-handler' }, function( domDocument ) {\n\t\tconst domElement = this.toDomElement( domDocument );\n\n\t\t// Use the IconView from the ui library.\n\t\tconst icon = new IconView();\n\t\ticon.set( 'content', dragHandlerIcon );\n\n\t\t// Render the icon view right away to append its #element to the selectionHandler DOM element.\n\t\ticon.render();\n\n\t\tdomElement.appendChild( icon.element );\n\n\t\treturn domElement;\n\t} );\n\n\t// Append the selection handler into the widget wrapper.\n\twriter.insert( writer.createPositionAt( widgetElement, 0 ), selectionHandler );\n\twriter.addClass( [ 'ck-widget_with-selection-handler' ], widgetElement );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/splitoperation\n */\n\nimport Operation from './operation';\nimport MergeOperation from './mergeoperation';\nimport Position from '../position';\nimport Range from '../range';\nimport { _insert, _move } from './utils';\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to split {@link module:engine/model/element~Element an element} at given\n * {@link module:engine/model/operation/splitoperation~SplitOperation#splitPosition split position} into two elements,\n * both containing a part of the element's original content.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class SplitOperation extends Operation {\n\t/**\n\t * Creates a split operation.\n\t *\n\t * @param {module:engine/model/position~Position} splitPosition Position at which an element should be split.\n\t * @param {Number} howMany Total offset size of elements that are in the split element after `position`.\n\t * @param {module:engine/model/position~Position|null} graveyardPosition Position in the graveyard root before the element which\n\t * should be used as a parent of the nodes after `position`. If it is not set, a copy of the the `position` parent will be used.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( splitPosition, howMany, graveyardPosition, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position at which an element should be split.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/splitoperation~SplitOperation#splitPosition\n\t\t */\n\t\tthis.splitPosition = splitPosition.clone();\n\t\t// Keep position sticking to the next node. This way any new content added at the place where the element is split\n\t\t// will be left in the original element.\n\t\tthis.splitPosition.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Total offset size of elements that are in the split element after `position`.\n\t\t *\n\t\t * @member {Number} module:engine/model/operation/splitoperation~SplitOperation#howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\n\t\t/**\n\t\t * Position at which the clone of split element (or element from graveyard) will be inserted.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/splitoperation~SplitOperation#insertionPosition\n\t\t */\n\t\tthis.insertionPosition = SplitOperation.getInsertionPosition( splitPosition );\n\t\tthis.insertionPosition.stickiness = 'toNone';\n\n\t\t/**\n\t\t * Position in the graveyard root before the element which should be used as a parent of the nodes after `position`.\n\t\t * If it is not set, a copy of the the `position` parent will be used.\n\t\t *\n\t\t * The default behavior is to clone the split element. Element from graveyard is used during undo.\n\t\t *\n\t\t * @member {module:engine/model/position~Position|null} #graveyardPosition\n\t\t */\n\t\tthis.graveyardPosition = graveyardPosition ? graveyardPosition.clone() : null;\n\n\t\tif ( this.graveyardPosition ) {\n\t\t\tthis.graveyardPosition.stickiness = 'toNext';\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'split';\n\t}\n\n\t/**\n\t * Position inside the new clone of a split element.\n\t *\n\t * This is a position where nodes that are after the split position will be moved to.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/position~Position}\n\t */\n\tget moveTargetPosition() {\n\t\tconst path = this.insertionPosition.path.slice();\n\t\tpath.push( 0 );\n\n\t\treturn new Position( this.insertionPosition.root, path );\n\t}\n\n\t/**\n\t * Artificial range that contains all the nodes from the split element that will be moved to the new element.\n\t * The range starts at {@link ~#splitPosition} and ends in the same parent, at `POSITIVE_INFINITY` offset.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/range~Range}\n\t */\n\tget movedRange() {\n\t\tconst end = this.splitPosition.getShiftedBy( Number.POSITIVE_INFINITY );\n\n\t\treturn new Range( this.splitPosition, end );\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/splitoperation~SplitOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\tconst split = new this.constructor( this.splitPosition, this.howMany, this.graveyardPosition, this.baseVersion );\n\t\tsplit.insertionPosition = this.insertionPosition;\n\n\t\treturn split;\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/mergeoperation~MergeOperation}\n\t */\n\tgetReversed() {\n\t\tconst graveyard = this.splitPosition.root.document.graveyard;\n\t\tconst graveyardPosition = new Position( graveyard, [ 0 ] );\n\n\t\treturn new MergeOperation( this.moveTargetPosition, this.howMany, this.splitPosition, graveyardPosition, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst element = this.splitPosition.parent;\n\t\tconst offset = this.splitPosition.offset;\n\n\t\t// Validate whether split operation has correct parameters.\n\t\tif ( !element || element.maxOffset < offset ) {\n\t\t\t/**\n\t\t\t * Split position is invalid.\n\t\t\t *\n\t\t\t * @error split-operation-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'split-operation-position-invalid: Split position is invalid.', this );\n\t\t} else if ( !element.parent ) {\n\t\t\t/**\n\t\t\t * Cannot split root element.\n\t\t\t *\n\t\t\t * @error split-operation-split-in-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'split-operation-split-in-root: Cannot split root element.', this );\n\t\t} else if ( this.howMany != element.maxOffset - this.splitPosition.offset ) {\n\t\t\t/**\n\t\t\t * Split operation specifies wrong number of nodes to move.\n\t\t\t *\n\t\t\t * @error split-operation-how-many-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.', this );\n\t\t} else if ( this.graveyardPosition && !this.graveyardPosition.nodeAfter ) {\n\t\t\t/**\n\t\t\t * Graveyard position invalid.\n\t\t\t *\n\t\t\t * @error split-operation-graveyard-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'split-operation-graveyard-position-invalid: Graveyard position invalid.', this );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tconst splitElement = this.splitPosition.parent;\n\n\t\tif ( this.graveyardPosition ) {\n\t\t\t_move( Range._createFromPositionAndShift( this.graveyardPosition, 1 ), this.insertionPosition );\n\t\t} else {\n\t\t\tconst newElement = splitElement._clone();\n\n\t\t\t_insert( this.insertionPosition, newElement );\n\t\t}\n\n\t\tconst sourceRange = new Range(\n\t\t\tPosition._createAt( splitElement, this.splitPosition.offset ),\n\t\t\tPosition._createAt( splitElement, splitElement.maxOffset )\n\t\t);\n\n\t\t_move( sourceRange, this.moveTargetPosition );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.splitPosition = this.splitPosition.toJSON();\n\t\tjson.insertionPosition = this.insertionPosition.toJSON();\n\n\t\tif ( this.graveyardPosition ) {\n\t\t\tjson.graveyardPosition = this.graveyardPosition.toJSON();\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'SplitOperation';\n\t}\n\n\t/**\n\t * Helper function that returns a default insertion position basing on given `splitPosition`. The default insertion\n\t * position is after the split element.\n\t *\n\t * @param {module:engine/model/position~Position} splitPosition\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tstatic getInsertionPosition( splitPosition ) {\n\t\tconst path = splitPosition.path.slice( 0, -1 );\n\t\tpath[ path.length - 1 ]++;\n\n\t\treturn new Position( splitPosition.root, path );\n\t}\n\n\t/**\n\t * Creates `SplitOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/splitoperation~SplitOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst splitPosition = Position.fromJSON( json.splitPosition, document );\n\t\tconst insertionPosition = Position.fromJSON( json.insertionPosition, document );\n\t\tconst graveyardPosition = json.graveyardPosition ? Position.fromJSON( json.graveyardPosition, document ) : null;\n\n\t\tconst split = new this( splitPosition, json.howMany, graveyardPosition, json.baseVersion );\n\t\tsplit.insertionPosition = insertionPosition;\n\n\t\treturn split;\n\t}\n}\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/comparearrays\n */\n\n/**\n * Compares how given arrays relate to each other. One array can be: same as another array, prefix of another array\n * or completely different. If arrays are different, first index at which they differ is returned. Otherwise,\n * a flag specifying the relation is returned. Flags are negative numbers, so whenever a number >= 0 is returned\n * it means that arrays differ.\n *\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 2 ] );\t\t// 'same'\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 2, 1 ] );\t\t// 'prefix'\n *\t\tcompareArrays( [ 0, 2 ], [ 0 ] );\t\t\t// 'extension'\n *\t\tcompareArrays( [ 0, 2 ], [ 1, 2 ] );\t\t// 0\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 1 ] );\t\t// 1\n *\n * @param {Array} a Array that is compared.\n * @param {Array} b Array to compare with.\n * @returns {module:utils/comparearrays~ArrayRelation} How array `a` is related to `b`.\n */\nexport default function compareArrays( a, b ) {\n\tconst minLen = Math.min( a.length, b.length );\n\n\tfor ( let i = 0; i < minLen; i++ ) {\n\t\tif ( a[ i ] != b[ i ] ) {\n\t\t\t// The arrays are different.\n\t\t\treturn i;\n\t\t}\n\t}\n\n\t// Both arrays were same at all points.\n\tif ( a.length == b.length ) {\n\t\t// If their length is also same, they are the same.\n\t\treturn 'same';\n\t} else if ( a.length < b.length ) {\n\t\t// Compared array is shorter so it is a prefix of the other array.\n\t\treturn 'prefix';\n\t} else {\n\t\t// Compared array is longer so it is an extension of the other array.\n\t\treturn 'extension';\n\t}\n}\n\n/**\n * @typedef {'extension'|'same'|'prefix'} module:utils/comparearrays~ArrayRelation\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals window, document */\n\n/**\n * @module utils/dom/global\n */\n\n/**\n * A helper (module) giving an access to the global DOM objects such as `window` and\n * `document`. Accessing these objects using this helper allows easy and bulletproof\n * testing, i.e. stubbing native properties:\n *\n *\t\timport global from 'ckeditor5/utils/dom/global.js';\n *\n *\t\t// This stub will work for any code using global module.\n *\t\ttestUtils.sinon.stub( global, 'window', {\n *\t\t\tinnerWidth: 10000\n *\t\t} );\n *\n *\t\tconsole.log( global.window.innerWidth );\n */\nexport default { window, document };\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/istext\n */\n\n/**\n * Checks if the object is a native DOM Text node.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isText( obj ) {\n\treturn Object.prototype.toString.call( obj ) == '[object Text]';\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/mergeoperation\n */\n\nimport Operation from './operation';\nimport SplitOperation from './splitoperation';\nimport Position from '../position';\nimport Range from '../range';\nimport { _move } from './utils';\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to merge two {@link module:engine/model/element~Element elements}.\n *\n * The merged element is the parent of {@link ~MergeOperation#sourcePosition} and it is merged into the parent of\n * {@link ~MergeOperation#targetPosition}. All nodes from the merged element are moved to {@link ~MergeOperation#targetPosition}.\n *\n * The merged element is moved to the graveyard at {@link ~MergeOperation#graveyardPosition}.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class MergeOperation extends Operation {\n\t/**\n\t * Creates a merge operation.\n\t *\n\t * @param {module:engine/model/position~Position} sourcePosition Position inside the merged element. All nodes from that\n\t * element after that position will be moved to {@link ~#targetPosition}.\n\t * @param {Number} howMany Summary offset size of nodes which will be moved from the merged element to the new parent.\n\t * @param {module:engine/model/position~Position} targetPosition Position which the nodes from the merged elements will be moved to.\n\t * @param {module:engine/model/position~Position} graveyardPosition Position in graveyard to which the merged element will be moved.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( sourcePosition, howMany, targetPosition, graveyardPosition, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position inside the merged element. All nodes from that element after that position will be moved to {@link ~#targetPosition}.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/mergeoperation~MergeOperation#sourcePosition\n\t\t */\n\t\tthis.sourcePosition = sourcePosition.clone();\n\t\t// This is, and should always remain, the first position in its parent.\n\t\tthis.sourcePosition.stickiness = 'toPrevious';\n\n\t\t/**\n\t\t * Summary offset size of nodes which will be moved from the merged element to the new parent.\n\t\t *\n\t\t * @member {Number} module:engine/model/operation/mergeoperation~MergeOperation#howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\n\t\t/**\n\t\t * Position which the nodes from the merged elements will be moved to.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/mergeoperation~MergeOperation#targetPosition\n\t\t */\n\t\tthis.targetPosition = targetPosition.clone();\n\t\t// Except of a rare scenario in `MergeOperation` x `MergeOperation` transformation,\n\t\t// this is, and should always remain, the last position in its parent.\n\t\tthis.targetPosition.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Position in graveyard to which the merged element will be moved.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/mergeoperation~MergeOperation#graveyardPosition\n\t\t */\n\t\tthis.graveyardPosition = graveyardPosition.clone();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'merge';\n\t}\n\n\t/**\n\t * Position before the merged element (which will be deleted).\n\t *\n\t * @readonly\n\t * @type {module:engine/model/position~Position}\n\t */\n\tget deletionPosition() {\n\t\treturn new Position( this.sourcePosition.root, this.sourcePosition.path.slice( 0, -1 ) );\n\t}\n\n\t/**\n\t * Artificial range that contains all the nodes from the merged element that will be moved to {@link ~MergeOperation#sourcePosition}.\n\t * The range starts at {@link ~MergeOperation#sourcePosition} and ends in the same parent, at `POSITIVE_INFINITY` offset.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/range~Range}\n\t */\n\tget movedRange() {\n\t\tconst end = this.sourcePosition.getShiftedBy( Number.POSITIVE_INFINITY );\n\n\t\treturn new Range( this.sourcePosition, end );\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/mergeoperation~MergeOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.sourcePosition, this.howMany, this.targetPosition, this.graveyardPosition, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/splitoperation~SplitOperation}\n\t */\n\tgetReversed() {\n\t\t// Positions in this method are transformed by this merge operation because the split operation bases on\n\t\t// the context after this merge operation happened (because split operation reverses it).\n\t\t// So we need to acknowledge that the merge operation happened and those positions changed a little.\n\t\tconst targetPosition = this.targetPosition._getTransformedByMergeOperation( this );\n\n\t\tconst path = this.sourcePosition.path.slice( 0, -1 );\n\t\tconst insertionPosition = new Position( this.sourcePosition.root, path )._getTransformedByMergeOperation( this );\n\n\t\tconst split = new SplitOperation( targetPosition, this.howMany, this.graveyardPosition, this.baseVersion + 1 );\n\t\tsplit.insertionPosition = insertionPosition;\n\n\t\treturn split;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst sourceElement = this.sourcePosition.parent;\n\t\tconst targetElement = this.targetPosition.parent;\n\n\t\t// Validate whether merge operation has correct parameters.\n\t\tif ( !sourceElement || !sourceElement.is( 'element' ) || !sourceElement.parent ) {\n\t\t\t/**\n\t\t\t * Merge source position is invalid.\n\t\t\t *\n\t\t\t * @error merge-operation-source-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'merge-operation-source-position-invalid: Merge source position is invalid.', this );\n\t\t} else if ( !targetElement || !targetElement.is( 'element' ) || !targetElement.parent ) {\n\t\t\t/**\n\t\t\t * Merge target position is invalid.\n\t\t\t *\n\t\t\t * @error merge-operation-target-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'merge-operation-target-position-invalid: Merge target position is invalid.', this );\n\t\t} else if ( this.howMany != sourceElement.maxOffset ) {\n\t\t\t/**\n\t\t\t * Merge operation specifies wrong number of nodes to move.\n\t\t\t *\n\t\t\t * @error merge-operation-how-many-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.', this );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tconst mergedElement = this.sourcePosition.parent;\n\t\tconst sourceRange = Range._createIn( mergedElement );\n\n\t\t_move( sourceRange, this.targetPosition );\n\t\t_move( Range._createOn( mergedElement ), this.graveyardPosition );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.sourcePosition = json.sourcePosition.toJSON();\n\t\tjson.targetPosition = json.targetPosition.toJSON();\n\t\tjson.graveyardPosition = json.graveyardPosition.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'MergeOperation';\n\t}\n\n\t/**\n\t * Creates `MergeOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/mergeoperation~MergeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst sourcePosition = Position.fromJSON( json.sourcePosition, document );\n\t\tconst targetPosition = Position.fromJSON( json.targetPosition, document );\n\t\tconst graveyardPosition = Position.fromJSON( json.graveyardPosition, document );\n\n\t\treturn new this( sourcePosition, json.howMany, targetPosition, graveyardPosition, json.baseVersion );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/operation\n */\n\n/**\n * Abstract base operation class.\n *\n * @abstract\n */\nexport default class Operation {\n\t/**\n\t * Base operation constructor.\n\t *\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( baseVersion ) {\n\t\t/**\n\t\t * {@link module:engine/model/document~Document#version} on which operation can be applied. If you try to\n\t\t * {@link module:engine/model/model~Model#applyOperation apply} operation with different base version than the\n\t\t * {@link module:engine/model/document~Document#version document version} the\n\t\t * {@link module:utils/ckeditorerror~CKEditorError model-document-applyOperation-wrong-version} error is thrown.\n\t\t *\n\t\t * @member {Number}\n\t\t */\n\t\tthis.baseVersion = baseVersion;\n\n\t\t/**\n\t\t * Defines whether operation is executed on attached or detached {@link module:engine/model/item~Item items}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isDocumentOperation\n\t\t */\n\t\tthis.isDocumentOperation = this.baseVersion !== null;\n\n\t\t/**\n\t\t * {@link module:engine/model/batch~Batch Batch} to which the operation is added or `null` if the operation is not\n\t\t * added to any batch yet.\n\t\t *\n\t\t * @member {module:engine/model/batch~Batch|null} #batch\n\t\t */\n\t\tthis.batch = null;\n\n\t\t/**\n\t\t * Operation type.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} #type\n\t\t */\n\n\t\t/**\n\t\t * Creates and returns an operation that has the same parameters as this operation.\n\t\t *\n\t\t * @method #clone\n\t\t * @returns {module:engine/model/operation/operation~Operation} Clone of this operation.\n\t\t */\n\n\t\t/**\n\t\t * Creates and returns a reverse operation. Reverse operation when executed right after\n\t\t * the original operation will bring back tree model state to the point before the original\n\t\t * operation execution. In other words, it reverses changes done by the original operation.\n\t\t *\n\t\t * Keep in mind that tree model state may change since executing the original operation,\n\t\t * so reverse operation will be \"outdated\". In that case you will need to transform it by\n\t\t * all operations that were executed after the original operation.\n\t\t *\n\t\t * @method #getReversed\n\t\t * @returns {module:engine/model/operation/operation~Operation} Reversed operation.\n\t\t */\n\n\t\t/**\n\t\t * Executes the operation - modifications described by the operation properties will be applied to the model tree.\n\t\t *\n\t\t * @protected\n\t\t * @method #_execute\n\t\t */\n\t}\n\n\t/**\n\t * Checks whether the operation's parameters are correct and the operation can be correctly executed. Throws\n\t * an error if operation is not valid.\n\t *\n\t * @protected\n\t * @method #_validate\n\t */\n\t_validate() {\n\t}\n\n\t/**\n\t * Custom toJSON method to solve child-parent circular dependencies.\n\t *\n\t * @method #toJSON\n\t * @returns {Object} Clone of this object with the operation property replaced with string.\n\t */\n\ttoJSON() {\n\t\t// This method creates only a shallow copy, all nested objects should be defined separately.\n\t\t// See https://github.com/ckeditor/ckeditor5-engine/issues/1477.\n\t\tconst json = Object.assign( {}, this );\n\n\t\tjson.__className = this.constructor.className;\n\n\t\t// Remove reference to the parent `Batch` to avoid circular dependencies.\n\t\tdelete json.batch;\n\n\t\t// Only document operations are shared with other clients so it is not necessary to keep this information.\n\t\tdelete json.isDocumentOperation;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Name of the operation class used for serialization.\n\t *\n\t * @type {String}\n\t */\n\tstatic get className() {\n\t\treturn 'Operation';\n\t}\n\n\t/**\n\t * Creates Operation object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} doc Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/operation~Operation}\n\t */\n\tstatic fromJSON( json ) {\n\t\treturn new this( json.baseVersion );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/collection\n */\n\nimport EmitterMixin from './emittermixin';\nimport CKEditorError from './ckeditorerror';\nimport uid from './uid';\nimport mix from './mix';\n\n/**\n * Collections are ordered sets of objects. Items in the collection can be retrieved by their indexes\n * in the collection (like in an array) or by their ids.\n *\n * If an object without an `id` property is being added to the collection, the `id` property will be generated\n * automatically. Note that the automatically generated id is unique only within this single collection instance.\n *\n * By default an item in the collection is identified by its `id` property. The name of the identifier can be\n * configured through the constructor of the collection.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Collection {\n\t/**\n\t * Creates a new Collection instance.\n\t *\n\t * @param {Object} [options={}] The options object.\n\t * @param {String} [options.idProperty='id'] The name of the property which is considered to identify an item.\n\t */\n\tconstructor( options = {} ) {\n\t\t/**\n\t\t * The internal list of items in the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Object[]}\n\t\t */\n\t\tthis._items = [];\n\n\t\t/**\n\t\t * The internal map of items in the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._itemMap = new Map();\n\n\t\t/**\n\t\t * The name of the property which is considered to identify an item.\n\t\t *\n\t\t * @private\n\t\t * @member {String}\n\t\t */\n\t\tthis._idProperty = options.idProperty || 'id';\n\n\t\t/**\n\t\t * A helper mapping external items of a bound collection ({@link #bindTo})\n\t\t * and actual items of this collection. It provides information\n\t\t * necessary to properly remove items bound to another collection.\n\t\t *\n\t\t * See {@link #_bindToInternalToExternalMap}.\n\t\t *\n\t\t * @protected\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._bindToExternalToInternalMap = new WeakMap();\n\n\t\t/**\n\t\t * A helper mapping items of this collection to external items of a bound collection\n\t\t * ({@link #bindTo}). It provides information necessary to manage the bindings, e.g.\n\t\t * to avoid loops in two–way bindings.\n\t\t *\n\t\t * See {@link #_bindToExternalToInternalMap}.\n\t\t *\n\t\t * @protected\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._bindToInternalToExternalMap = new WeakMap();\n\n\t\t/**\n\t\t * Stores indexes of skipped items from bound external collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Array}\n\t\t */\n\t\tthis._skippedIndexesFromExternal = [];\n\n\t\t/**\n\t\t * A collection instance this collection is bound to as a result\n\t\t * of calling {@link #bindTo} method.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:utils/collection~Collection} #_bindToCollection\n\t\t */\n\t}\n\n\t/**\n\t * The number of items available in the collection.\n\t *\n\t * @member {Number} #length\n\t */\n\tget length() {\n\t\treturn this._items.length;\n\t}\n\n\t/**\n\t * Returns the first item from the collection or null when collection is empty.\n\t *\n\t * @returns {Object|null} The first item or `null` if collection is empty.\n\t */\n\tget first() {\n\t\treturn this._items[ 0 ] || null;\n\t}\n\n\t/**\n\t * Returns the last item from the collection or null when collection is empty.\n\t *\n\t * @returns {Object|null} The last item or `null` if collection is empty.\n\t */\n\tget last() {\n\t\treturn this._items[ this.length - 1 ] || null;\n\t}\n\n\t/**\n\t * Adds an item into the collection.\n\t *\n\t * If the item does not have an id, then it will be automatically generated and set on the item.\n\t *\n\t * @chainable\n\t * @param {Object} item\n\t * @param {Number} [index] The position of the item in the collection. The item\n\t * is pushed to the collection when `index` not specified.\n\t * @fires add\n\t */\n\tadd( item, index ) {\n\t\tlet itemId;\n\t\tconst idProperty = this._idProperty;\n\n\t\tif ( ( idProperty in item ) ) {\n\t\t\titemId = item[ idProperty ];\n\n\t\t\tif ( typeof itemId != 'string' ) {\n\t\t\t\t/**\n\t\t\t\t * This item's id should be a string.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-invalid-id\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'collection-add-invalid-id', this );\n\t\t\t}\n\n\t\t\tif ( this.get( itemId ) ) {\n\t\t\t\t/**\n\t\t\t\t * This item already exists in the collection.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-item-already-exists\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'collection-add-item-already-exists', this );\n\t\t\t}\n\t\t} else {\n\t\t\titem[ idProperty ] = itemId = uid();\n\t\t}\n\n\t\t// TODO: Use ES6 default function argument.\n\t\tif ( index === undefined ) {\n\t\t\tindex = this._items.length;\n\t\t} else if ( index > this._items.length || index < 0 ) {\n\t\t\t/**\n\t\t\t * The index number has invalid value.\n\t\t\t *\n\t\t\t * @error collection-add-item-bad-index\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-add-item-invalid-index', this );\n\t\t}\n\n\t\tthis._items.splice( index, 0, item );\n\n\t\tthis._itemMap.set( itemId, item );\n\n\t\tthis.fire( 'add', item, index );\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets item by its id or index.\n\t *\n\t * @param {String|Number} idOrIndex The item id or index in the collection.\n\t * @returns {Object|null} The requested item or `null` if such item does not exist.\n\t */\n\tget( idOrIndex ) {\n\t\tlet item;\n\n\t\tif ( typeof idOrIndex == 'string' ) {\n\t\t\titem = this._itemMap.get( idOrIndex );\n\t\t} else if ( typeof idOrIndex == 'number' ) {\n\t\t\titem = this._items[ idOrIndex ];\n\t\t} else {\n\t\t\t/**\n\t\t\t * Index or id must be given.\n\t\t\t *\n\t\t\t * @error collection-get-invalid-arg\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-get-invalid-arg: Index or id must be given.', this );\n\t\t}\n\n\t\treturn item || null;\n\t}\n\n\t/**\n\t * Returns a boolean indicating whether the collection contains an item.\n\t *\n\t * @param {Object|String} itemOrId The item or its id in the collection.\n\t * @returns {Boolean} `true` if the collection contains the item, `false` otherwise.\n\t */\n\thas( itemOrId ) {\n\t\tif ( typeof itemOrId == 'string' ) {\n\t\t\treturn this._itemMap.has( itemOrId );\n\t\t} else { // Object\n\t\t\tconst idProperty = this._idProperty;\n\t\t\tconst id = itemOrId[ idProperty ];\n\n\t\t\treturn this._itemMap.has( id );\n\t\t}\n\t}\n\n\t/**\n\t * Gets index of item in the collection.\n\t * When item is not defined in the collection then index will be equal -1.\n\t *\n\t * @param {Object|String} itemOrId The item or its id in the collection.\n\t * @returns {Number} Index of given item.\n\t */\n\tgetIndex( itemOrId ) {\n\t\tlet item;\n\n\t\tif ( typeof itemOrId == 'string' ) {\n\t\t\titem = this._itemMap.get( itemOrId );\n\t\t} else {\n\t\t\titem = itemOrId;\n\t\t}\n\n\t\treturn this._items.indexOf( item );\n\t}\n\n\t/**\n\t * Removes an item from the collection.\n\t *\n\t * @param {Object|Number|String} subject The item to remove, its id or index in the collection.\n\t * @returns {Object} The removed item.\n\t * @fires remove\n\t */\n\tremove( subject ) {\n\t\tlet index, id, item;\n\t\tlet itemDoesNotExist = false;\n\t\tconst idProperty = this._idProperty;\n\n\t\tif ( typeof subject == 'string' ) {\n\t\t\tid = subject;\n\t\t\titem = this._itemMap.get( id );\n\t\t\titemDoesNotExist = !item;\n\n\t\t\tif ( item ) {\n\t\t\t\tindex = this._items.indexOf( item );\n\t\t\t}\n\t\t} else if ( typeof subject == 'number' ) {\n\t\t\tindex = subject;\n\t\t\titem = this._items[ index ];\n\t\t\titemDoesNotExist = !item;\n\n\t\t\tif ( item ) {\n\t\t\t\tid = item[ idProperty ];\n\t\t\t}\n\t\t} else {\n\t\t\titem = subject;\n\t\t\tid = item[ idProperty ];\n\t\t\tindex = this._items.indexOf( item );\n\t\t\titemDoesNotExist = ( index == -1 || !this._itemMap.get( id ) );\n\t\t}\n\n\t\tif ( itemDoesNotExist ) {\n\t\t\t/**\n\t\t\t * Item not found.\n\t\t\t *\n\t\t\t * @error collection-remove-404\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-remove-404: Item not found.', this );\n\t\t}\n\n\t\tthis._items.splice( index, 1 );\n\t\tthis._itemMap.delete( id );\n\n\t\tconst externalItem = this._bindToInternalToExternalMap.get( item );\n\t\tthis._bindToInternalToExternalMap.delete( item );\n\t\tthis._bindToExternalToInternalMap.delete( externalItem );\n\n\t\tthis.fire( 'remove', item, index );\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * Executes the callback for each item in the collection and composes an array or values returned by this callback.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Array} The result of mapping.\n\t */\n\tmap( callback, ctx ) {\n\t\treturn this._items.map( callback, ctx );\n\t}\n\n\t/**\n\t * Finds the first item in the collection for which the `callback` returns a true value.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Object} The item for which `callback` returned a true value.\n\t */\n\tfind( callback, ctx ) {\n\t\treturn this._items.find( callback, ctx );\n\t}\n\n\t/**\n\t * Returns an array with items for which the `callback` returned a true value.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Object[]} The array with matching items.\n\t */\n\tfilter( callback, ctx ) {\n\t\treturn this._items.filter( callback, ctx );\n\t}\n\n\t/**\n\t * Removes all items from the collection and destroys the binding created using\n\t * {@link #bindTo}.\n\t */\n\tclear() {\n\t\tif ( this._bindToCollection ) {\n\t\t\tthis.stopListening( this._bindToCollection );\n\t\t\tthis._bindToCollection = null;\n\t\t}\n\n\t\twhile ( this.length ) {\n\t\t\tthis.remove( 0 );\n\t\t}\n\t}\n\n\t/**\n\t * Binds and synchronizes the collection with another one.\n\t *\n\t * The binding can be a simple factory:\n\t *\n\t *\t\tclass FactoryClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).as( FactoryClass );\n\t *\n\t *\t\tsource.add( { label: 'foo' } );\n\t *\t\tsource.add( { label: 'bar' } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 1 ).label ); // 'bar'\n\t *\n\t *\t\tsource.remove( 0 );\n\t *\t\tconsole.log( target.length ); // 1\n\t *\t\tconsole.log( target.get( 0 ).label ); // 'bar'\n\t *\n\t * or the factory driven by a custom callback:\n\t *\n\t *\t\tclass FooClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tclass BarClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( ( item ) => {\n\t *\t\t\tif ( item.label == 'foo' ) {\n\t *\t\t\t\treturn new FooClass( item );\n\t *\t\t\t} else {\n\t *\t\t\t\treturn new BarClass( item );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\tsource.add( { label: 'foo' } );\n\t *\t\tsource.add( { label: 'bar' } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 0 ) instanceof FooClass ); // true\n\t *\t\tconsole.log( target.get( 1 ) instanceof BarClass ); // true\n\t *\n\t * or the factory out of property name:\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( 'label' );\n\t *\n\t *\t\tsource.add( { label: { value: 'foo' } } );\n\t *\t\tsource.add( { label: { value: 'bar' } } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 0 ).value ); // 'foo'\n\t *\t\tconsole.log( target.get( 1 ).value ); // 'bar'\n\t *\n\t * It's possible to skip specified items by returning falsy value:\n\t *\n\t *\t\tconst source = new Collection();\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( item => {\n\t *\t\t\tif ( item.hidden ) {\n\t *\t\t\t\treturn null;\n\t *\t\t\t}\n\t *\n\t *\t\t\treturn item;\n\t *\t\t} );\n\t *\n\t *\t\tsource.add( { hidden: true } );\n\t *\t\tsource.add( { hidden: false } );\n\t *\n\t *\t\tconsole.log( source.length ); // 2\n\t *\t\tconsole.log( target.length ); // 1\n\t *\n\t * **Note**: {@link #clear} can be used to break the binding.\n\t *\n\t * @param {module:utils/collection~Collection} externalCollection A collection to be bound.\n\t * @returns {Object}\n\t * @returns {module:utils/collection~CollectionBindToChain} The binding chain object.\n\t */\n\tbindTo( externalCollection ) {\n\t\tif ( this._bindToCollection ) {\n\t\t\t/**\n\t\t\t * The collection cannot be bound more than once.\n\t\t\t *\n\t\t\t * @error collection-bind-to-rebind\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-bind-to-rebind: The collection cannot be bound more than once.', this );\n\t\t}\n\n\t\tthis._bindToCollection = externalCollection;\n\n\t\treturn {\n\t\t\tas: Class => {\n\t\t\t\tthis._setUpBindToBinding( item => new Class( item ) );\n\t\t\t},\n\n\t\t\tusing: callbackOrProperty => {\n\t\t\t\tif ( typeof callbackOrProperty == 'function' ) {\n\t\t\t\t\tthis._setUpBindToBinding( item => callbackOrProperty( item ) );\n\t\t\t\t} else {\n\t\t\t\t\tthis._setUpBindToBinding( item => item[ callbackOrProperty ] );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Finalizes and activates a binding initiated by {#bindTo}.\n\t *\n\t * @protected\n\t * @param {Function} factory A function which produces collection items.\n\t */\n\t_setUpBindToBinding( factory ) {\n\t\tconst externalCollection = this._bindToCollection;\n\n\t\t// Adds the item to the collection once a change has been done to the external collection.\n\t\t//\n\t\t// @private\n\t\tconst addItem = ( evt, externalItem, index ) => {\n\t\t\tconst isExternalBoundToThis = externalCollection._bindToCollection == this;\n\t\t\tconst externalItemBound = externalCollection._bindToInternalToExternalMap.get( externalItem );\n\n\t\t\t// If an external collection is bound to this collection, which makes it a 2–way binding,\n\t\t\t// and the particular external collection item is already bound, don't add it here.\n\t\t\t// The external item has been created **out of this collection's item** and (re)adding it will\n\t\t\t// cause a loop.\n\t\t\tif ( isExternalBoundToThis && externalItemBound ) {\n\t\t\t\tthis._bindToExternalToInternalMap.set( externalItem, externalItemBound );\n\t\t\t\tthis._bindToInternalToExternalMap.set( externalItemBound, externalItem );\n\t\t\t} else {\n\t\t\t\tconst item = factory( externalItem );\n\n\t\t\t\t// When there is no item we need to remember skipped index first and then we can skip this item.\n\t\t\t\tif ( !item ) {\n\t\t\t\t\tthis._skippedIndexesFromExternal.push( index );\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Lets try to put item at the same index as index in external collection\n\t\t\t\t// but when there are a skipped items in one or both collections we need to recalculate this index.\n\t\t\t\tlet finalIndex = index;\n\n\t\t\t\t// When we try to insert item after some skipped items from external collection we need\n\t\t\t\t// to include this skipped items and decrease index.\n\t\t\t\t//\n\t\t\t\t// For the following example:\n\t\t\t\t// external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal' ]\n\t\t\t\t// internal -> [ A ]\n\t\t\t\t//\n\t\t\t\t// Another item is been added at the end of external collection:\n\t\t\t\t// external.add( 'D' )\n\t\t\t\t// external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal', 'D' ]\n\t\t\t\t//\n\t\t\t\t// We can't just add 'D' to internal at the same index as index in external because\n\t\t\t\t// this will produce empty indexes what is invalid:\n\t\t\t\t// internal -> [ 'A', empty, empty, 'D' ]\n\t\t\t\t//\n\t\t\t\t// So we need to include skipped items and decrease index\n\t\t\t\t// internal -> [ 'A', 'D' ]\n\t\t\t\tfor ( const skipped of this._skippedIndexesFromExternal ) {\n\t\t\t\t\tif ( index > skipped ) {\n\t\t\t\t\t\tfinalIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration that external collection could skip some items from\n\t\t\t\t// internal collection.\n\t\t\t\t//\n\t\t\t\t// For the following example:\n\t\t\t\t// internal -> [ 'A', 'B - skipped for external', 'C - skipped for external' ]\n\t\t\t\t// external -> [ A ]\n\t\t\t\t//\n\t\t\t\t// Another item is been added at the end of external collection:\n\t\t\t\t// external.add( 'D' )\n\t\t\t\t// external -> [ 'A', 'D' ]\n\t\t\t\t//\n\t\t\t\t// We need to include skipped items and place new item after them:\n\t\t\t\t// internal -> [ 'A', 'B - skipped for external', 'C - skipped for external', 'D' ]\n\t\t\t\tfor ( const skipped of externalCollection._skippedIndexesFromExternal ) {\n\t\t\t\t\tif ( finalIndex >= skipped ) {\n\t\t\t\t\t\tfinalIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._bindToExternalToInternalMap.set( externalItem, item );\n\t\t\t\tthis._bindToInternalToExternalMap.set( item, externalItem );\n\t\t\t\tthis.add( item, finalIndex );\n\n\t\t\t\t// After adding new element to internal collection we need update indexes\n\t\t\t\t// of skipped items in external collection.\n\t\t\t\tfor ( let i = 0; i < externalCollection._skippedIndexesFromExternal.length; i++ ) {\n\t\t\t\t\tif ( finalIndex <= externalCollection._skippedIndexesFromExternal[ i ] ) {\n\t\t\t\t\t\texternalCollection._skippedIndexesFromExternal[ i ]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Load the initial content of the collection.\n\t\tfor ( const externalItem of externalCollection ) {\n\t\t\taddItem( null, externalItem, externalCollection.getIndex( externalItem ) );\n\t\t}\n\n\t\t// Synchronize the with collection as new items are added.\n\t\tthis.listenTo( externalCollection, 'add', addItem );\n\n\t\t// Synchronize the with collection as new items are removed.\n\t\tthis.listenTo( externalCollection, 'remove', ( evt, externalItem, index ) => {\n\t\t\tconst item = this._bindToExternalToInternalMap.get( externalItem );\n\n\t\t\tif ( item ) {\n\t\t\t\tthis.remove( item );\n\t\t\t}\n\n\t\t\t// After removing element from external collection we need update/remove indexes\n\t\t\t// of skipped items in internal collection.\n\t\t\tthis._skippedIndexesFromExternal = this._skippedIndexesFromExternal.reduce( ( result, skipped ) => {\n\t\t\t\tif ( index < skipped ) {\n\t\t\t\t\tresult.push( skipped - 1 );\n\t\t\t\t}\n\n\t\t\t\tif ( index > skipped ) {\n\t\t\t\t\tresult.push( skipped );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [] );\n\t\t} );\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._items[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Fired when an item is added to the collection.\n\t *\n\t * @event add\n\t * @param {Object} item The added item.\n\t */\n\n\t/**\n\t * Fired when an item is removed from the collection.\n\t *\n\t * @event remove\n\t * @param {Object} item The removed item.\n\t * @param {Number} index Index from which item was removed.\n\t */\n}\n\nmix( Collection, EmitterMixin );\n\n/**\n * An object returned by the {@link module:utils/collection~Collection#bindTo `bindTo()`} method\n * providing functions that specify the type of the binding.\n *\n * See the {@link module:utils/collection~Collection#bindTo `bindTo()`} documentation for examples.\n *\n * @interface module:utils/collection~CollectionBindToChain\n */\n\n/**\n * Creates a callback or a property binding.\n *\n * @method #using\n * @param {Function|String} callbackOrProperty  When the function is passed, it should return\n * the collection items. When the string is provided, the property value is used to create the bound collection items.\n */\n\n/**\n * Creates the class factory binding in which items of the source collection are passed to\n * the constructor of the specified class.\n *\n * @method #as\n * @param {Function} Class The class constructor used to create instances in the factory.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals navigator:false */\n\n/**\n * @module utils/env\n */\n\nconst userAgent = navigator.userAgent.toLowerCase();\n\n/**\n * A namespace containing environment and browser information.\n *\n * @namespace\n */\nconst env = {\n\t/**\n\t * Indicates that the application is running on Macintosh.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisMac: isMac( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in Microsoft Edge.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisEdge: isEdge( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in Firefox (Gecko).\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisGecko: isGecko( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in Safari.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisSafari: isSafari( userAgent ),\n\n\t/**\n\t * Indicates that the application is running on Android mobile device.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisAndroid: isAndroid( userAgent )\n};\n\nexport default env;\n\n/**\n * Checks if User Agent represented by the string is running on Macintosh.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is running on Macintosh or not.\n */\nexport function isMac( userAgent ) {\n\treturn userAgent.indexOf( 'macintosh' ) > -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Microsoft Edge.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Edge or not.\n */\nexport function isEdge( userAgent ) {\n\treturn !!userAgent.match( /edge\\/(\\d+.?\\d*)/ );\n}\n\n/**\n * Checks if User Agent represented by the string is Firefox (Gecko).\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Firefox or not.\n */\nexport function isGecko( userAgent ) {\n\treturn !!userAgent.match( /gecko\\/\\d+/ );\n}\n\n/**\n * Checks if User Agent represented by the string is Safari.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Safari or not.\n */\nexport function isSafari( userAgent ) {\n\treturn userAgent.indexOf( ' applewebkit/' ) > -1 && userAgent.indexOf( 'chrome' ) === -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Android mobile device.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Safari or not.\n */\nexport function isAndroid( userAgent ) {\n\treturn userAgent.indexOf( 'android' ) > -1;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/element\n */\n\nimport Node from './node';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport objectToMap from '@ckeditor/ckeditor5-utils/src/objecttomap';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport Matcher from './matcher';\nimport { isPlainObject } from 'lodash-es';\n\n/**\n * View element.\n *\n * The editing engine does not define a fixed semantics of its elements (it is \"DTD-free\").\n * This is why the type of the {@link module:engine/view/element~Element} need to\n * be defined by the feature developer. When creating an element you should use one of the following methods:\n *\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createContainerElement `downcastWriter#createContainerElement()`}\n * in order to create a {@link module:engine/view/containerelement~ContainerElement},\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createAttributeElement `downcastWriter#createAttributeElement()`}\n * in order to create a {@link module:engine/view/attributeelement~AttributeElement},\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createEmptyElement `downcastWriter#createEmptyElement()`}\n * in order to create a {@link module:engine/view/emptyelement~EmptyElement}.\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`}\n * in order to create a {@link module:engine/view/uielement~UIElement}.\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createEditableElement `downcastWriter#createEditableElement()`}\n * in order to create a {@link module:engine/view/editableelement~EditableElement}.\n *\n * Note that for view elements which are not created from the model, like elements from mutations, paste or\n * {@link module:engine/controller/datacontroller~DataController#set data.set} it is not possible to define the type of the element.\n * In such cases the {@link module:engine/view/upcastwriter~UpcastWriter#createElement `UpcastWriter#createElement()`} method\n * should be used to create generic view elements.\n *\n * @extends module:engine/view/node~Node\n */\nexport default class Element extends Node {\n\t/**\n\t * Creates a view element.\n\t *\n\t * Attributes can be passed in various formats:\n\t *\n\t *\t\tnew Element( 'div', { class: 'editor', contentEditable: 'true' } ); // object\n\t *\t\tnew Element( 'div', [ [ 'class', 'editor' ], [ 'contentEditable', 'true' ] ] ); // map-like iterator\n\t *\t\tnew Element( 'div', mapOfAttributes ); // map\n\t *\n\t * @protected\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( name, attrs, children ) {\n\t\tsuper();\n\n\t\t/**\n\t\t * Name of the element.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Map of attributes, where attributes names are keys and attributes values are values.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map} #_attrs\n\t\t */\n\t\tthis._attrs = parseAttributes( attrs );\n\n\t\t/**\n\t\t * Array of child nodes.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis._children = [];\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\n\t\t/**\n\t\t * Set of classes associated with element instance.\n\t\t *\n\t\t * @protected\n\t\t * @member {Set}\n\t\t */\n\t\tthis._classes = new Set();\n\n\t\tif ( this._attrs.has( 'class' ) ) {\n\t\t\t// Remove class attribute and handle it by class set.\n\t\t\tconst classString = this._attrs.get( 'class' );\n\t\t\tparseClasses( this._classes, classString );\n\t\t\tthis._attrs.delete( 'class' );\n\t\t}\n\n\t\t/**\n\t\t * Map of styles.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map} module:engine/view/element~Element#_styles\n\t\t */\n\t\tthis._styles = new Map();\n\n\t\tif ( this._attrs.has( 'style' ) ) {\n\t\t\t// Remove style attribute and handle it by styles map.\n\t\t\tparseInlineStyles( this._styles, this._attrs.get( 'style' ) );\n\t\t\tthis._attrs.delete( 'style' );\n\t\t}\n\n\t\t/**\n\t\t * Map of custom properties.\n\t\t * Custom properties can be added to element instance, will be cloned but not rendered into DOM.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map}\n\t\t */\n\t\tthis._customProperties = new Map();\n\t}\n\n\t/**\n\t * Number of element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this element, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this._children.length === 0;\n\t}\n\n\t/**\n\t * Checks whether this view object is of the given type.\n\t *\n\t *\t\tobj.is( 'element' ); // true\n\t *\t\tobj.is( 'li' ); // true\n\t *\t\tobj.is( 'element', 'li' ); // true\n\t *\t\tobj.is( 'text' ); // false\n\t *\t\tobj.is( 'element', 'img' ); // false\n\t *\n\t * Read more in {@link module:engine/view/node~Node#is `Node#is()`}.\n\t *\n\t * @param {String} type\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'element' || type == this.name || super.is( type );\n\t\t} else {\n\t\t\treturn type == 'element' && name == this.name;\n\t\t}\n\t}\n\n\t/**\n\t * Gets child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/view/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children[ index ];\n\t}\n\n\t/**\n\t * Gets index of the given child node. Returns `-1` if child node is not found.\n\t *\n\t * @param {module:engine/view/node~Node} node Child node.\n\t * @returns {Number} Index of the child node.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.indexOf( node );\n\t}\n\n\t/**\n\t * Gets child nodes iterator.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>} Child nodes iterator.\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns an iterator that contains the keys for attributes. Order of inserting attributes is not preserved.\n\t *\n\t * @returns {Iterable.<String>} Keys for attributes.\n\t */\n\t* getAttributeKeys() {\n\t\tif ( this._classes.size > 0 ) {\n\t\t\tyield 'class';\n\t\t}\n\n\t\tif ( this._styles.size > 0 ) {\n\t\t\tyield 'style';\n\t\t}\n\n\t\tyield* this._attrs.keys();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this element's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t* getAttributes() {\n\t\tyield* this._attrs.entries();\n\n\t\tif ( this._classes.size > 0 ) {\n\t\t\tyield [ 'class', this.getAttribute( 'class' ) ];\n\t\t}\n\n\t\tif ( this._styles.size > 0 ) {\n\t\t\tyield [ 'style', this.getAttribute( 'style' ) ];\n\t\t}\n\t}\n\n\t/**\n\t * Gets attribute by key. If attribute is not present - returns undefined.\n\t *\n\t * @param {String} key Attribute key.\n\t * @returns {String|undefined} Attribute value.\n\t */\n\tgetAttribute( key ) {\n\t\tif ( key == 'class' ) {\n\t\t\tif ( this._classes.size > 0 ) {\n\t\t\t\treturn [ ...this._classes ].join( ' ' );\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif ( key == 'style' ) {\n\t\t\tif ( this._styles.size > 0 ) {\n\t\t\t\tlet styleString = '';\n\n\t\t\t\tfor ( const [ property, value ] of this._styles ) {\n\t\t\t\t\tstyleString += `${ property }:${ value };`;\n\t\t\t\t}\n\n\t\t\t\treturn styleString;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns a boolean indicating whether an attribute with the specified key exists in the element.\n\t *\n\t * @param {String} key Attribute key.\n\t * @returns {Boolean} `true` if attribute with the specified key exists in the element, false otherwise.\n\t */\n\thasAttribute( key ) {\n\t\tif ( key == 'class' ) {\n\t\t\treturn this._classes.size > 0;\n\t\t}\n\n\t\tif ( key == 'style' ) {\n\t\t\treturn this._styles.size > 0;\n\t\t}\n\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Checks if this element is similar to other element.\n\t * Both elements should have the same name and attributes to be considered as similar. Two similar elements\n\t * can contain different set of children nodes.\n\t *\n\t * @param {module:engine/view/element~Element} otherElement\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherElement ) {\n\t\tif ( !( otherElement instanceof Element ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If exactly the same Element is provided - return true immediately.\n\t\tif ( this === otherElement ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check element name.\n\t\tif ( this.name != otherElement.name ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check number of attributes, classes and styles.\n\t\tif ( this._attrs.size !== otherElement._attrs.size || this._classes.size !== otherElement._classes.size ||\n\t\t\tthis._styles.size !== otherElement._styles.size ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if attributes are the same.\n\t\tfor ( const [ key, value ] of this._attrs ) {\n\t\t\tif ( !otherElement._attrs.has( key ) || otherElement._attrs.get( key ) !== value ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if classes are the same.\n\t\tfor ( const className of this._classes ) {\n\t\t\tif ( !otherElement._classes.has( className ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if styles are the same.\n\t\tfor ( const [ property, value ] of this._styles ) {\n\t\t\tif ( !otherElement._styles.has( property ) || otherElement._styles.get( property ) !== value ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns true if class is present.\n\t * If more then one class is provided - returns true only when all classes are present.\n\t *\n\t *\t\telement.hasClass( 'foo' ); // Returns true if 'foo' class is present.\n\t *\t\telement.hasClass( 'foo', 'bar' ); // Returns true if 'foo' and 'bar' classes are both present.\n\t *\n\t * @param {...String} className\n\t */\n\thasClass( ...className ) {\n\t\tfor ( const name of className ) {\n\t\t\tif ( !this._classes.has( name ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns iterator that contains all class names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetClassNames() {\n\t\treturn this._classes.keys();\n\t}\n\n\t/**\n\t * Returns style value for given property.\n\t * Undefined is returned if style does not exist.\n\t *\n\t * @param {String} property\n\t * @returns {String|undefined}\n\t */\n\tgetStyle( property ) {\n\t\treturn this._styles.get( property );\n\t}\n\n\t/**\n\t * Returns iterator that contains all style names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetStyleNames() {\n\t\treturn this._styles.keys();\n\t}\n\n\t/**\n\t * Returns true if style keys are present.\n\t * If more then one style property is provided - returns true only when all properties are present.\n\t *\n\t *\t\telement.hasStyle( 'color' ); // Returns true if 'border-top' style is present.\n\t *\t\telement.hasStyle( 'color', 'border-top' ); // Returns true if 'color' and 'border-top' styles are both present.\n\t *\n\t * @param {...String} property\n\t */\n\thasStyle( ...property ) {\n\t\tfor ( const name of property ) {\n\t\t\tif ( !this._styles.has( name ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns ancestor element that match specified pattern.\n\t * Provided patterns should be compatible with {@link module:engine/view/matcher~Matcher Matcher} as it is used internally.\n\t *\n\t * @see module:engine/view/matcher~Matcher\n\t * @param {Object|String|RegExp|Function} patterns Patterns used to match correct ancestor.\n\t * See {@link module:engine/view/matcher~Matcher}.\n\t * @returns {module:engine/view/element~Element|null} Found element or `null` if no matching ancestor was found.\n\t */\n\tfindAncestor( ...patterns ) {\n\t\tconst matcher = new Matcher( ...patterns );\n\t\tlet parent = this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tif ( matcher.match( parent ) ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the custom property value for the given key.\n\t *\n\t * @param {String|Symbol} key\n\t * @returns {*}\n\t */\n\tgetCustomProperty( key ) {\n\t\treturn this._customProperties.get( key );\n\t}\n\n\t/**\n\t * Returns an iterator which iterates over this element's custom properties.\n\t * Iterator provides `[ key, value ]` pairs for each stored property.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t* getCustomProperties() {\n\t\tyield* this._customProperties.entries();\n\t}\n\n\t/**\n\t * Returns identity string based on element's name, styles, classes and other attributes.\n\t * Two elements that {@link #isSimilar are similar} will have same identity string.\n\t * It has the following format:\n\t *\n\t *\t\t'name class=\"class1,class2\" style=\"style1:value1;style2:value2\" attr1=\"val1\" attr2=\"val2\"'\n \t *\n\t * For example:\n\t *\n\t *\t\tconst element = writer.createContainerElement( 'foo', {\n\t *\t\t\tbanana: '10',\n\t *\t\t\tapple: '20',\n\t *\t\t\tstyle: 'color: red; border-color: white;',\n\t *\t\t\tclass: 'baz'\n\t *\t\t} );\n\t *\n\t *\t\t// returns 'foo class=\"baz\" style=\"border-color:white;color:red\" apple=\"20\" banana=\"10\"'\n\t *\t\telement.getIdentity();\n\t *\n\t * NOTE: Classes, styles and other attributes are sorted alphabetically.\n\t *\n\t * @returns {String}\n\t */\n\tgetIdentity() {\n\t\tconst classes = Array.from( this._classes ).sort().join( ',' );\n\t\tconst styles = Array.from( this._styles ).map( i => `${ i[ 0 ] }:${ i[ 1 ] }` ).sort().join( ';' );\n\t\tconst attributes = Array.from( this._attrs ).map( i => `${ i[ 0 ] }=\"${ i[ 1 ] }\"` ).sort().join( ' ' );\n\n\t\treturn this.name +\n\t\t\t( classes == '' ? '' : ` class=\"${ classes }\"` ) +\n\t\t\t( styles == '' ? '' : ` style=\"${ styles }\"` ) +\n\t\t\t( attributes == '' ? '' : ` ${ attributes }` );\n\t}\n\n\t/**\n\t * Clones provided element.\n\t *\n\t * @protected\n\t * @param {Boolean} [deep=false] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any children.\n\t * @returns {module:engine/view/element~Element} Clone of this element.\n\t */\n\t_clone( deep = false ) {\n\t\tconst childrenClone = [];\n\n\t\tif ( deep ) {\n\t\t\tfor ( const child of this.getChildren() ) {\n\t\t\t\tchildrenClone.push( child._clone( deep ) );\n\t\t\t}\n\t\t}\n\n\t\t// ContainerElement and AttributeElement should be also cloned properly.\n\t\tconst cloned = new this.constructor( this.name, this._attrs, childrenClone );\n\n\t\t// Classes and styles are cloned separately - this solution is faster than adding them back to attributes and\n\t\t// parse once again in constructor.\n\t\tcloned._classes = new Set( this._classes );\n\t\tcloned._styles = new Map( this._styles );\n\n\t\t// Clone custom properties.\n\t\tcloned._customProperties = new Map( this._customProperties );\n\n\t\t// Clone filler offset method.\n\t\t// We can't define this method in a prototype because it's behavior which\n\t\t// is changed by e.g. toWidget() function from ckeditor5-widget. Perhaps this should be one of custom props.\n\t\tcloned.getFillerOffset = this.getFillerOffset;\n\n\t\treturn cloned;\n\t}\n\n\t/**\n\t * {@link module:engine/view/element~Element#_insertChild Insert} a child node or a list of child nodes at the end of this node\n\t * and sets the parent of these nodes to this element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#insert\n\t * @protected\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Number} Number of appended nodes.\n\t */\n\t_appendChild( items ) {\n\t\treturn this._insertChild( this.childCount, items );\n\t}\n\n\t/**\n\t * Inserts a child node or a list of child nodes on the given index and sets the parent of these nodes to\n\t * this element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#insert\n\t * @protected\n\t * @param {Number} index Position where nodes should be inserted.\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Number} Number of inserted nodes.\n\t */\n\t_insertChild( index, items ) {\n\t\tthis._fireChange( 'children', this );\n\t\tlet count = 0;\n\n\t\tconst nodes = normalize( items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\n\t\t\tthis._children.splice( index, 0, node );\n\t\t\tindex++;\n\t\t\tcount++;\n\t\t}\n\n\t\treturn count;\n\t}\n\n\t/**\n\t * Removes number of child nodes starting at the given index and set the parent of these nodes to `null`.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#remove\n\t * @protected\n\t * @param {Number} index Number of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Array.<module:engine/view/node~Node>} The array of removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tthis._fireChange( 'children', this );\n\n\t\tfor ( let i = index; i < index + howMany; i++ ) {\n\t\t\tthis._children[ i ].parent = null;\n\t\t}\n\n\t\treturn this._children.splice( index, howMany );\n\t}\n\n\t/**\n\t * Adds or overwrite attribute with a specified key and value.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setAttribute\n\t * @protected\n\t * @param {String} key Attribute key.\n\t * @param {String} value Attribute value.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_setAttribute( key, value ) {\n\t\tvalue = String( value );\n\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tif ( key == 'class' ) {\n\t\t\tparseClasses( this._classes, value );\n\t\t} else if ( key == 'style' ) {\n\t\t\tparseInlineStyles( this._styles, value );\n\t\t} else {\n\t\t\tthis._attrs.set( key, value );\n\t\t}\n\t}\n\n\t/**\n\t * Removes attribute from the element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeAttribute\n\t * @protected\n\t * @param {String} key Attribute key.\n\t * @returns {Boolean} Returns true if an attribute existed and has been removed.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeAttribute( key ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\t// Remove class attribute.\n\t\tif ( key == 'class' ) {\n\t\t\tif ( this._classes.size > 0 ) {\n\t\t\t\tthis._classes.clear();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Remove style attribute.\n\t\tif ( key == 'style' ) {\n\t\t\tif ( this._styles.size > 0 ) {\n\t\t\t\tthis._styles.clear();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Remove other attributes.\n\t\treturn this._attrs.delete( key );\n\t}\n\n\t/**\n\t * Adds specified class.\n\t *\n\t *\t\telement._addClass( 'foo' ); // Adds 'foo' class.\n\t *\t\telement._addClass( [ 'foo', 'bar' ] ); // Adds 'foo' and 'bar' classes.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#addClass\n\t * @protected\n\t * @param {Array.<String>|String} className\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_addClass( className ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tclassName = Array.isArray( className ) ? className : [ className ];\n\t\tclassName.forEach( name => this._classes.add( name ) );\n\t}\n\n\t/**\n\t * Removes specified class.\n\t *\n\t *\t\telement._removeClass( 'foo' );  // Removes 'foo' class.\n\t *\t\telement._removeClass( [ 'foo', 'bar' ] ); // Removes both 'foo' and 'bar' classes.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeClass\n\t * @protected\n\t * @param {Array.<String>|String} className\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeClass( className ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tclassName = Array.isArray( className ) ? className : [ className ];\n\t\tclassName.forEach( name => this._classes.delete( name ) );\n\t}\n\n\t/**\n\t * Adds style to the element.\n\t *\n\t *\t\telement._setStyle( 'color', 'red' );\n\t *\t\telement._setStyle( {\n\t *\t\t\tcolor: 'red',\n\t *\t\t\tposition: 'fixed'\n\t *\t\t} );\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setStyle\n\t * @protected\n\t * @param {String|Object} property Property name or object with key - value pairs.\n\t * @param {String} [value] Value to set. This parameter is ignored if object is provided as the first parameter.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_setStyle( property, value ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tif ( isPlainObject( property ) ) {\n\t\t\tconst keys = Object.keys( property );\n\n\t\t\tfor ( const key of keys ) {\n\t\t\t\tthis._styles.set( key, property[ key ] );\n\t\t\t}\n\t\t} else {\n\t\t\tthis._styles.set( property, value );\n\t\t}\n\t}\n\n\t/**\n\t * Removes specified style.\n\t *\n\t *\t\telement._removeStyle( 'color' );  // Removes 'color' style.\n\t *\t\telement._removeStyle( [ 'color', 'border-top' ] ); // Removes both 'color' and 'border-top' styles.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeStyle\n\t * @protected\n\t * @param {Array.<String>|String} property\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeStyle( property ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tproperty = Array.isArray( property ) ? property : [ property ];\n\t\tproperty.forEach( name => this._styles.delete( name ) );\n\t}\n\n\t/**\n\t * Sets a custom property. Unlike attributes, custom properties are not rendered to the DOM,\n\t * so they can be used to add special data to elements.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setCustomProperty\n\t * @protected\n\t * @param {String|Symbol} key\n\t * @param {*} value\n\t */\n\t_setCustomProperty( key, value ) {\n\t\tthis._customProperties.set( key, value );\n\t}\n\n\t/**\n\t * Removes the custom property stored under the given key.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeCustomProperty\n\t * @protected\n\t * @param {String|Symbol} key\n\t * @returns {Boolean} Returns true if property was removed.\n\t */\n\t_removeCustomProperty( key ) {\n\t\treturn this._customProperties.delete( key );\n\t}\n\n\t/**\n\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t *\n\t * @abstract\n\t * @method module:engine/view/element~Element#getFillerOffset\n\t */\n}\n\n// Parses attributes provided to the element constructor before they are applied to an element. If attributes are passed\n// as an object (instead of `Map`), the object is transformed to the map. Attributes with `null` value are removed.\n// Attributes with non-`String` value are converted to `String`.\n//\n// @param {Object|Map} attrs Attributes to parse.\n// @returns {Map} Parsed attributes.\nfunction parseAttributes( attrs ) {\n\tif ( isPlainObject( attrs ) ) {\n\t\tattrs = objectToMap( attrs );\n\t} else {\n\t\tattrs = new Map( attrs );\n\t}\n\n\tfor ( const [ key, value ] of attrs ) {\n\t\tif ( value === null ) {\n\t\t\tattrs.delete( key );\n\t\t} else if ( typeof value != 'string' ) {\n\t\t\tattrs.set( key, String( value ) );\n\t\t}\n\t}\n\n\treturn attrs;\n}\n\n// Parses inline styles and puts property - value pairs into styles map.\n// Styles map is cleared before insertion.\n//\n// @param {Map.<String, String>} stylesMap Map to insert parsed properties and values.\n// @param {String} stylesString Styles to parse.\nfunction parseInlineStyles( stylesMap, stylesString ) {\n\t// `null` if no quote was found in input string or last found quote was a closing quote. See below.\n\tlet quoteType = null;\n\tlet propertyNameStart = 0;\n\tlet propertyValueStart = 0;\n\tlet propertyName = null;\n\n\tstylesMap.clear();\n\n\t// Do not set anything if input string is empty.\n\tif ( stylesString === '' ) {\n\t\treturn;\n\t}\n\n\t// Fix inline styles that do not end with `;` so they are compatible with algorithm below.\n\tif ( stylesString.charAt( stylesString.length - 1 ) != ';' ) {\n\t\tstylesString = stylesString + ';';\n\t}\n\n\t// Seek the whole string for \"special characters\".\n\tfor ( let i = 0; i < stylesString.length; i++ ) {\n\t\tconst char = stylesString.charAt( i );\n\n\t\tif ( quoteType === null ) {\n\t\t\t// No quote found yet or last found quote was a closing quote.\n\t\t\tswitch ( char ) {\n\t\t\t\tcase ':':\n\t\t\t\t\t// Most of time colon means that property name just ended.\n\t\t\t\t\t// Sometimes however `:` is found inside property value (for example in background image url).\n\t\t\t\t\tif ( !propertyName ) {\n\t\t\t\t\t\t// Treat this as end of property only if property name is not already saved.\n\t\t\t\t\t\t// Save property name.\n\t\t\t\t\t\tpropertyName = stylesString.substr( propertyNameStart, i - propertyNameStart );\n\t\t\t\t\t\t// Save this point as the start of property value.\n\t\t\t\t\t\tpropertyValueStart = i + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '\"':\n\t\t\t\tcase '\\'':\n\t\t\t\t\t// Opening quote found (this is an opening quote, because `quoteType` is `null`).\n\t\t\t\t\tquoteType = char;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ';': {\n\t\t\t\t\t// Property value just ended.\n\t\t\t\t\t// Use previously stored property value start to obtain property value.\n\t\t\t\t\tconst propertyValue = stylesString.substr( propertyValueStart, i - propertyValueStart );\n\n\t\t\t\t\tif ( propertyName ) {\n\t\t\t\t\t\t// Save parsed part.\n\t\t\t\t\t\tstylesMap.set( propertyName.trim(), propertyValue.trim() );\n\t\t\t\t\t}\n\n\t\t\t\t\tpropertyName = null;\n\n\t\t\t\t\t// Save this point as property name start. Property name starts immediately after previous property value ends.\n\t\t\t\t\tpropertyNameStart = i + 1;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( char === quoteType ) {\n\t\t\t// If a quote char is found and it is a closing quote, mark this fact by `null`-ing `quoteType`.\n\t\t\tquoteType = null;\n\t\t}\n\t}\n}\n\n// Parses class attribute and puts all classes into classes set.\n// Classes set s cleared before insertion.\n//\n// @param {Set.<String>} classesSet Set to insert parsed classes.\n// @param {String} classesString String with classes to parse.\nfunction parseClasses( classesSet, classesString ) {\n\tconst classArray = classesString.split( /\\s+/ );\n\tclassesSet.clear();\n\tclassArray.forEach( name => classesSet.add( name ) );\n}\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/view/item~Item|Iterable.<String|module:engine/view/item~Item>}\n// @returns {Iterable.<module:engine/view/node~Node>}\nfunction normalize( nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( node.data );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/image/utils\n */\n\nimport { findOptimalInsertionPosition, isWidget, toWidget } from '@ckeditor/ckeditor5-widget/src/utils';\n\n/**\n * Converts a given {@link module:engine/view/element~Element} to an image widget:\n * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to recognize the image widget element.\n * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer An instance of the view writer.\n * @param {String} label The element's label. It will be concatenated with the image `alt` attribute if one is present.\n * @returns {module:engine/view/element~Element}\n */\nexport function toImageWidget( viewElement, writer, label ) {\n\twriter.setCustomProperty( 'image', true, viewElement );\n\n\treturn toWidget( viewElement, writer, { label: labelCreator } );\n\n\tfunction labelCreator() {\n\t\tconst imgElement = viewElement.getChild( 0 );\n\t\tconst altText = imgElement.getAttribute( 'alt' );\n\n\t\treturn altText ? `${ altText } ${ label }` : label;\n\t}\n}\n\n/**\n * Checks if a given view element is an image widget.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @returns {Boolean}\n */\nexport function isImageWidget( viewElement ) {\n\treturn !!viewElement.getCustomProperty( 'image' ) && isWidget( viewElement );\n}\n\n/**\n * Returns an image widget editing view element if one is selected.\n *\n * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} selection\n * @returns {module:engine/view/element~Element|null}\n */\nexport function getSelectedImageWidget( selection ) {\n\tconst viewElement = selection.getSelectedElement();\n\n\tif ( viewElement && isImageWidget( viewElement ) ) {\n\t\treturn viewElement;\n\t}\n\n\treturn null;\n}\n\n/**\n * Checks if the provided model element is an `image`.\n *\n * @param {module:engine/model/element~Element} modelElement\n * @returns {Boolean}\n */\nexport function isImage( modelElement ) {\n\treturn !!modelElement && modelElement.is( 'image' );\n}\n\n/**\n * Handles inserting single file. This method unifies image insertion using {@link module:widget/utils~findOptimalInsertionPosition} method.\n *\n *\t\tmodel.change( writer => {\n *\t\t\tinsertImage( writer, model, { src: 'path/to/image.jpg' } );\n *\t\t} );\n *\n * @param {module:engine/model/writer~Writer} writer\n * @param {module:engine/model/model~Model} model\n * @param {Object} [attributes={}] Attributes of inserted image\n */\nexport function insertImage( writer, model, attributes = {} ) {\n\tconst imageElement = writer.createElement( 'image', attributes );\n\n\tconst insertAtSelection = findOptimalInsertionPosition( model.document.selection, model );\n\n\tmodel.insertContent( imageElement, insertAtSelection );\n\n\t// Inserting an image might've failed due to schema regulations.\n\tif ( imageElement.parent ) {\n\t\twriter.setSelection( imageElement, 'on' );\n\t}\n}\n\n/**\n * Checks if image can be inserted at current model selection.\n *\n * @param {module:engine/model/model~Model} model\n * @returns {Boolean}\n */\nexport function isImageAllowed( model ) {\n\tconst schema = model.schema;\n\tconst selection = model.document.selection;\n\n\treturn isImageAllowedInParent( selection, schema, model ) &&\n\t\t!checkSelectionOnObject( selection, schema ) &&\n\t\tisInOtherImage( selection );\n}\n\n// Checks if image is allowed by schema in optimal insertion parent.\n//\n// @returns {Boolean}\nfunction isImageAllowedInParent( selection, schema, model ) {\n\tconst parent = getInsertImageParent( selection, model );\n\n\treturn schema.checkChild( parent, 'image' );\n}\n\n// Check if selection is on object.\n//\n// @returns {Boolean}\nfunction checkSelectionOnObject( selection, schema ) {\n\tconst selectedElement = selection.getSelectedElement();\n\n\treturn selectedElement && schema.isObject( selectedElement );\n}\n\n// Checks if selection is placed in other image (ie. in caption).\nfunction isInOtherImage( selection ) {\n\treturn [ ...selection.focus.getAncestors() ].every( ancestor => !ancestor.is( 'image' ) );\n}\n\n// Returns a node that will be used to insert image with `model.insertContent` to check if image can be placed there.\nfunction getInsertImageParent( selection, model ) {\n\tconst insertAt = findOptimalInsertionPosition( selection, model );\n\n\tconst parent = insertAt.parent;\n\n\tif ( parent.isEmpty && !parent.is( '$root' ) ) {\n\t\treturn parent.parent;\n\t}\n\n\treturn parent;\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* global setTimeout, clearTimeout */\n\n/**\n * @module utils/focustracker\n */\n\nimport DomEmitterMixin from './dom/emittermixin';\nimport ObservableMixin from './observablemixin';\nimport CKEditorError from './ckeditorerror';\nimport mix from './mix';\n\n/**\n * Allows observing a group of `HTMLElement`s whether at least one of them is focused.\n *\n * Used by the {@link module:core/editor/editor~Editor} in order to track whether the focus is still within the application,\n * or were used outside of its UI.\n *\n * **Note** `focus` and `blur` listeners use event capturing, so it is only needed to register wrapper `HTMLElement`\n * which contain other `focusable` elements. But note that this wrapper element has to be focusable too\n * (have e.g. `tabindex=\"-1\"`).\n *\n * @mixes module:utils/dom/emittermixin~EmitterMixin\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class FocusTracker {\n\tconstructor() {\n\t\t/**\n\t\t * True when one of the registered elements is focused.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\t/**\n\t\t * The currently focused element.\n\t\t *\n\t\t * While {@link #isFocused `isFocused`} remains `true`, the focus can\n\t\t * move between different UI elements. This property tracks those\n\t\t * elements and tells which one is currently focused.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {HTMLElement|null}\n\t\t */\n\t\tthis.set( 'focusedElement', null );\n\n\t\t/**\n\t\t * List of registered elements.\n\t\t *\n\t\t * @private\n\t\t * @member {Set.<HTMLElement>}\n\t\t */\n\t\tthis._elements = new Set();\n\n\t\t/**\n\t\t * Event loop timeout.\n\t\t *\n\t\t * @private\n\t\t * @member {Number}\n\t\t */\n\t\tthis._nextEventLoopTimeout = null;\n\t}\n\n\t/**\n\t * Starts tracking the specified element.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tadd( element ) {\n\t\tif ( this._elements.has( element ) ) {\n\t\t\tthrow new CKEditorError( 'focusTracker-add-element-already-exist', this );\n\t\t}\n\n\t\tthis.listenTo( element, 'focus', () => this._focus( element ), { useCapture: true } );\n\t\tthis.listenTo( element, 'blur', () => this._blur(), { useCapture: true } );\n\t\tthis._elements.add( element );\n\t}\n\n\t/**\n\t * Stops tracking the specified element and stops listening on this element.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tremove( element ) {\n\t\tif ( element === this.focusedElement ) {\n\t\t\tthis._blur( element );\n\t\t}\n\n\t\tif ( this._elements.has( element ) ) {\n\t\t\tthis.stopListening( element );\n\t\t\tthis._elements.delete( element );\n\t\t}\n\t}\n\n\t/**\n\t * Destroys the focus tracker by:\n\t * - Disabling all event listeners attached to tracked elements.\n\t * - Removing all tracked elements that were previously added.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Stores currently focused element and set {#isFocused} as `true`.\n\t *\n\t * @private\n\t * @param {HTMLElement} element Element which has been focused.\n\t */\n\t_focus( element ) {\n\t\tclearTimeout( this._nextEventLoopTimeout );\n\n\t\tthis.focusedElement = element;\n\t\tthis.isFocused = true;\n\t}\n\n\t/**\n\t * Clears currently focused element and set {@link #isFocused} as `false`.\n\t * This method uses `setTimeout` to change order of fires `blur` and `focus` events.\n\t *\n\t * @private\n\t * @fires blur\n\t */\n\t_blur() {\n\t\tclearTimeout( this._nextEventLoopTimeout );\n\n\t\tthis._nextEventLoopTimeout = setTimeout( () => {\n\t\t\tthis.focusedElement = null;\n\t\t\tthis.isFocused = false;\n\t\t}, 0 );\n\t}\n\n\t/**\n\t * @event focus\n\t */\n\n\t/**\n\t * @event blur\n\t */\n}\n\nmix( FocusTracker, DomEmitterMixin );\nmix( FocusTracker, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/liveposition\n */\n\nimport Position from './position';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * `LivePosition` is a type of {@link module:engine/model/position~Position Position}\n * that updates itself as {@link module:engine/model/document~Document document}\n * is changed through operations. It may be used as a bookmark.\n *\n * **Note:** Contrary to {@link module:engine/model/position~Position}, `LivePosition` works only in roots that are\n * {@link module:engine/model/rootelement~RootElement}.\n * If {@link module:engine/model/documentfragment~DocumentFragment} is passed, error will be thrown.\n *\n * **Note:** Be very careful when dealing with `LivePosition`. Each `LivePosition` instance bind events that might\n * have to be unbound.\n * Use {@link module:engine/model/liveposition~LivePosition#detach} whenever you don't need `LivePosition` anymore.\n *\n * @extends module:engine/model/position~Position\n */\nexport default class LivePosition extends Position {\n\t/**\n\t * Creates a live position.\n\t *\n\t * @see module:engine/model/position~Position\n\t * @param {module:engine/model/rootelement~RootElement} root\n\t * @param {Array.<Number>} path\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness]\n\t */\n\tconstructor( root, path, stickiness = 'toNone' ) {\n\t\tsuper( root, path, stickiness );\n\n\t\tif ( !this.root.is( 'rootElement' ) ) {\n\t\t\t/**\n\t\t\t * LivePosition's root has to be an instance of RootElement.\n\t\t\t *\n\t\t\t * @error liveposition-root-not-rootelement\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-liveposition-root-not-rootelement: LivePosition\\'s root has to be an instance of RootElement.',\n\t\t\t\troot\n\t\t\t);\n\t\t}\n\n\t\tbindWithDocument.call( this );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by `LivePosition`. Use it whenever you don't need `LivePosition` instance\n\t * anymore (i.e. when leaving scope in which it was declared or before re-assigning variable that was\n\t * referring to it).\n\t */\n\tdetach() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/position~Position position instance}, which is equal to this live position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\ttoPosition() {\n\t\treturn new Position( this.root, this.path.slice(), this.stickiness );\n\t}\n\n\t/**\n\t * Creates a `LivePosition` instance that is equal to position.\n\t *\n\t * @param {module:engine/model/position~Position} position\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness]\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tstatic fromPosition( position, stickiness ) {\n\t\treturn new this( position.root, position.path.slice(), stickiness ? stickiness : position.stickiness );\n\t}\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createAfter\n\t * @see module:engine/model/position~Position._createAfter\n\t * @param {module:engine/model/node~Node} node\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createBefore\n\t * @see module:engine/model/position~Position._createBefore\n\t * @param {module:engine/model/node~Node} node\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createAt\n\t * @see module:engine/model/position~Position._createAt\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset]\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * Fired when `LivePosition` instance is changed due to changes on {@link module:engine/model/document~Document}.\n\t *\n\t * @event module:engine/model/liveposition~LivePosition#change\n\t * @param {module:engine/model/position~Position} oldPosition Position equal to this live position before it got changed.\n\t */\n}\n\n// Binds this `LivePosition` to the {@link module:engine/model/document~Document document} that owns\n// this position's {@link module:engine/model/position~Position#root root}.\n//\n// @private\nfunction bindWithDocument() {\n\tthis.listenTo(\n\t\tthis.root.document.model,\n\t\t'applyOperation',\n\t\t( event, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttransform.call( this, operation );\n\t\t},\n\t\t{ priority: 'low' }\n\t);\n}\n\n// Updates this position accordingly to the updates applied to the model. Bases on change events.\n//\n// @private\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\nfunction transform( operation ) {\n\tconst result = this.getTransformedByOperation( operation );\n\n\tif ( !this.isEqual( result ) ) {\n\t\tconst oldPosition = this.toPosition();\n\n\t\tthis.path = result.path;\n\t\tthis.root = result.root;\n\n\t\tthis.fire( 'change', oldPosition );\n\t}\n}\n\nmix( LivePosition, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/isiterable\n */\n\n/**\n * Checks if value implements iterator interface.\n *\n * @param {*} value The value to check.\n * @returns {Boolean} True if value implements iterator interface.\n */\nexport default function isIterable( value ) {\n\treturn !!( value && value[ Symbol.iterator ] );\n}\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/attributeoperation\n */\n\nimport Operation from './operation';\nimport Range from '../range';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport { _setAttribute } from './utils';\nimport { isEqual } from 'lodash-es';\n\n/**\n * Operation to change nodes' attribute.\n *\n * Using this class you can add, remove or change value of the attribute.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class AttributeOperation extends Operation {\n\t/**\n\t * Creates an operation that changes, removes or adds attributes.\n\t *\n\t * If only `newValue` is set, attribute will be added on a node. Note that all nodes in operation's range must not\n\t * have an attribute with the same key as the added attribute.\n\t *\n\t * If only `oldValue` is set, then attribute with given key will be removed. Note that all nodes in operation's range\n\t * must have an attribute with that key added.\n\t *\n\t * If both `newValue` and `oldValue` are set, then the operation will change the attribute value. Note that all nodes in\n\t * operation's ranges must already have an attribute with given key and `oldValue` as value\n\t *\n\t * @param {module:engine/model/range~Range} range Range on which the operation should be applied. Must be a flat range.\n\t * @param {String} key Key of an attribute to change or remove.\n\t * @param {*} oldValue Old value of the attribute with given key or `null`, if attribute was not set before.\n\t * @param {*} newValue New value of the attribute with given key or `null`, if operation should remove attribute.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( range, key, oldValue, newValue, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Range on which operation should be applied.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range}\n\t\t */\n\t\tthis.range = range.clone();\n\n\t\t/**\n\t\t * Key of an attribute to change or remove.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.key = key;\n\n\t\t/**\n\t\t * Old value of the attribute with given key or `null`, if attribute was not set before.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.oldValue = oldValue === undefined ? null : oldValue;\n\n\t\t/**\n\t\t * New value of the attribute with given key or `null`, if operation should remove attribute.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.newValue = newValue === undefined ? null : newValue;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\tif ( this.oldValue === null ) {\n\t\t\treturn 'addAttribute';\n\t\t} else if ( this.newValue === null ) {\n\t\t\treturn 'removeAttribute';\n\t\t} else {\n\t\t\treturn 'changeAttribute';\n\t\t}\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new AttributeOperation( this.range, this.key, this.oldValue, this.newValue, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation}\n\t */\n\tgetReversed() {\n\t\treturn new AttributeOperation( this.range, this.key, this.newValue, this.oldValue, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.range = this.range.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tif ( !this.range.isFlat ) {\n\t\t\t/**\n\t\t\t * The range to change is not flat.\n\t\t\t *\n\t\t\t * @error attribute-operation-range-not-flat\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'attribute-operation-range-not-flat: The range to change is not flat.', this );\n\t\t}\n\n\t\tfor ( const item of this.range.getItems( { shallow: true } ) ) {\n\t\t\tif ( this.oldValue !== null && !isEqual( item.getAttribute( this.key ), this.oldValue ) ) {\n\t\t\t\t/**\n\t\t\t\t * Changed node has different attribute value than operation's old attribute value.\n\t\t\t\t *\n\t\t\t\t * @error attribute-operation-wrong-old-value\n\t\t\t\t * @param {module:engine/model/item~Item} item\n\t\t\t\t * @param {String} key\n\t\t\t\t * @param {*} value\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'attribute-operation-wrong-old-value: Changed node has different attribute value than operation\\'s ' +\n\t\t\t\t\t'old attribute value.',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ item, key: this.key, value: this.oldValue }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( this.oldValue === null && this.newValue !== null && item.hasAttribute( this.key ) ) {\n\t\t\t\t/**\n\t\t\t\t * The attribute with given key already exists for the given node.\n\t\t\t\t *\n\t\t\t\t * @error attribute-operation-attribute-exists\n\t\t\t\t * @param {module:engine/model/node~Node} node\n\t\t\t\t * @param {String} key\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'attribute-operation-attribute-exists: The attribute with given key already exists.',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ node: item, key: this.key }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t// If value to set is same as old value, don't do anything.\n\t\tif ( !isEqual( this.oldValue, this.newValue ) ) {\n\t\t\t// Execution.\n\t\t\t_setAttribute( this.range, this.key, this.newValue );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'AttributeOperation';\n\t}\n\n\t/**\n\t * Creates `AttributeOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\treturn new AttributeOperation( Range.fromJSON( json.range, document ), json.key, json.oldValue, json.newValue, json.baseVersion );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/uid\n */\n\n/**\n * Returns a unique id. This id consist of an 'e' character and a randomly generated string of 32 aphanumeric characters.\n * Each character in uid string represents a hexadecimal digit (base 16).\n *\n * @returns {String} A hexadecimal number representing the id.\n */\nexport default function uid() {\n\tlet uuid = 'e'; // Make sure that id does not start with number.\n\n\tfor ( let i = 0; i < 8; i++ ) {\n\t\tuuid += Math.floor( ( 1 + Math.random() ) * 0x10000 ).toString( 16 ).substring( 1 );\n\t}\n\n\treturn uuid;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/textproxy\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * `TextProxy` represents a part of {@link module:engine/model/text~Text text node}.\n *\n * Since {@link module:engine/model/position~Position positions} can be placed between characters of a text node,\n * {@link module:engine/model/range~Range ranges} may contain only parts of text nodes. When {@link module:engine/model/range~Range#getItems\n * getting items}\n * contained in such range, we need to represent a part of that text node, since returning the whole text node would be incorrect.\n * `TextProxy` solves this issue.\n *\n * `TextProxy` has an API similar to {@link module:engine/model/text~Text Text} and allows to do most of the common tasks performed\n * on model nodes.\n *\n * **Note:** Some `TextProxy` instances may represent whole text node, not just a part of it.\n * See {@link module:engine/model/textproxy~TextProxy#isPartial}.\n *\n * **Note:** `TextProxy` is not an instance of {@link module:engine/model/node~Node node}. Keep this in mind when using it as a\n * parameter of methods.\n *\n * **Note:** `TextProxy` is a readonly interface. If you want to perform changes on model data represented by a `TextProxy`\n * use {@link module:engine/model/writer~Writer model writer API}.\n *\n * **Note:** `TextProxy` instances are created on the fly, basing on the current state of model. Because of this, it is\n * highly unrecommended to store references to `TextProxy` instances. `TextProxy` instances are not refreshed when\n * model changes, so they might get invalidated. Instead, consider creating {@link module:engine/model/liveposition~LivePosition live\n * position}.\n *\n * `TextProxy` instances are created by {@link module:engine/model/treewalker~TreeWalker model tree walker}. You should not need to create\n * an instance of this class by your own.\n */\nexport default class TextProxy {\n\t/**\n\t * Creates a text proxy.\n\t *\n\t * @protected\n\t * @param {module:engine/model/text~Text} textNode Text node which part is represented by this text proxy.\n\t * @param {Number} offsetInText Offset in {@link module:engine/model/textproxy~TextProxy#textNode text node} from which the text proxy\n\t * starts.\n\t * @param {Number} length Text proxy length, that is how many text node's characters, starting from `offsetInText` it represents.\n\t * @constructor\n\t */\n\tconstructor( textNode, offsetInText, length ) {\n\t\t/**\n\t\t * Text node which part is represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/text~Text}\n\t\t */\n\t\tthis.textNode = textNode;\n\n\t\tif ( offsetInText < 0 || offsetInText > textNode.offsetSize ) {\n\t\t\t/**\n\t\t\t * Given `offsetInText` value is incorrect.\n\t\t\t *\n\t\t\t * @error model-textproxy-wrong-offsetintext\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.', this );\n\t\t}\n\n\t\tif ( length < 0 || offsetInText + length > textNode.offsetSize ) {\n\t\t\t/**\n\t\t\t * Given `length` value is incorrect.\n\t\t\t *\n\t\t\t * @error model-textproxy-wrong-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-textproxy-wrong-length: Given length value is incorrect.', this );\n\t\t}\n\n\t\t/**\n\t\t * Text data represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.data = textNode.data.substring( offsetInText, offsetInText + length );\n\n\t\t/**\n\t\t * Offset in {@link module:engine/model/textproxy~TextProxy#textNode text node} from which the text proxy starts.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.offsetInText = offsetInText;\n\t}\n\n\t/**\n\t * Offset at which this text proxy starts in it's parent.\n\t *\n\t * @see module:engine/model/node~Node#startOffset\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget startOffset() {\n\t\treturn this.textNode.startOffset !== null ? this.textNode.startOffset + this.offsetInText : null;\n\t}\n\n\t/**\n\t * Offset size of this text proxy. Equal to the number of characters represented by the text proxy.\n\t *\n\t * @see module:engine/model/node~Node#offsetSize\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Offset at which this text proxy ends in it's parent.\n\t *\n\t * @see module:engine/model/node~Node#endOffset\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget endOffset() {\n\t\treturn this.startOffset !== null ? this.startOffset + this.offsetSize : null;\n\t}\n\n\t/**\n\t * Flag indicating whether `TextProxy` instance covers only part of the original {@link module:engine/model/text~Text text node}\n\t * (`true`) or the whole text node (`false`).\n\t *\n\t * This is `false` when text proxy starts at the very beginning of {@link module:engine/model/textproxy~TextProxy#textNode textNode}\n\t * ({@link module:engine/model/textproxy~TextProxy#offsetInText offsetInText} equals `0`) and text proxy sizes is equal to\n\t * text node size.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isPartial() {\n\t\treturn this.offsetSize !== this.textNode.offsetSize;\n\t}\n\n\t/**\n\t * Parent of this text proxy, which is same as parent of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tget parent() {\n\t\treturn this.textNode.parent;\n\t}\n\n\t/**\n\t * Root of this text proxy, which is same as root of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.textNode.root;\n\t}\n\n\t/**\n\t * {@link module:engine/model/document~Document Document} that owns text node represented by this text proxy or `null` if the text node\n\t * has no parent or is inside a {@link module:engine/model/documentfragment~DocumentFragment DocumentFragment}.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/document~Document|null}\n\t */\n\tget document() {\n\t\treturn this.textNode.document;\n\t}\n\n\t/**\n\t * Checks whether given model tree object is of given type.\n\t *\n\t * Read more in {@link module:engine/model/node~Node#is}.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'textProxy';\n\t}\n\n\t/**\n\t * Gets path to this text proxy.\n\t *\n\t * @see module:engine/model/node~Node#getPath\n\t * @returns {Array.<Number>}\n\t */\n\tgetPath() {\n\t\tconst path = this.textNode.getPath();\n\n\t\tif ( path.length > 0 ) {\n\t\t\tpath[ path.length - 1 ] += this.offsetInText;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this text proxy.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this text proxy will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from text proxy parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Checks if this text proxy has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on text proxy, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this.textNode.hasAttribute( key );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on text proxy.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this.textNode.getAttribute( key );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attributes. Attributes are returned as arrays containing two\n\t * items. First one is attribute key and second is attribute value.\n\t *\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this.textNode.getAttributes();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this.textNode.getAttributeKeys();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/utils\n */\n\nimport Node from '../node';\nimport Text from '../text';\nimport TextProxy from '../textproxy';\nimport Range from '../range';\nimport DocumentFragment from '../documentfragment';\nimport NodeList from '../nodelist';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Contains functions used for composing model tree by {@link module:engine/model/operation/operation~Operation operations}.\n * Those functions are built on top of {@link module:engine/model/node~Node node}, and it's child classes', APIs.\n *\n * @protected\n * @namespace utils\n */\n\n/**\n * Inserts given nodes at given position.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils.insert\n * @param {module:engine/model/position~Position} position Position at which nodes should be inserted.\n * @param {module:engine/model/node~NodeSet} nodes Nodes to insert.\n * @returns {module:engine/model/range~Range} Range spanning over inserted elements.\n */\nexport function _insert( position, nodes ) {\n\tnodes = _normalizeNodes( nodes );\n\n\t// We have to count offset before inserting nodes because they can get merged and we would get wrong offsets.\n\tconst offset = nodes.reduce( ( sum, node ) => sum + node.offsetSize, 0 );\n\tconst parent = position.parent;\n\n\t// Insertion might be in a text node, we should split it if that's the case.\n\t_splitNodeAtPosition( position );\n\tconst index = position.index;\n\n\t// Insert nodes at given index. After splitting we have a proper index and insertion is between nodes,\n\t// using basic `Element` API.\n\tparent._insertChild( index, nodes );\n\n\t// Merge text nodes, if possible. Merging is needed only at points where inserted nodes \"touch\" \"old\" nodes.\n\t_mergeNodesAtIndex( parent, index + nodes.length );\n\t_mergeNodesAtIndex( parent, index );\n\n\treturn new Range( position, position.getShiftedBy( offset ) );\n}\n\n/**\n * Removed nodes in given range. Only {@link module:engine/model/range~Range#isFlat flat} ranges are accepted.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils._remove\n * @param {module:engine/model/range~Range} range Range containing nodes to remove.\n * @returns {Array.<module:engine/model/node~Node>}\n */\nexport function _remove( range ) {\n\tif ( !range.isFlat ) {\n\t\t/**\n\t\t * Trying to remove a range which starts and ends in different element.\n\t\t *\n\t\t * @error operation-utils-remove-range-not-flat\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'operation-utils-remove-range-not-flat: ' +\n\t\t\t'Trying to remove a range which starts and ends in different element.',\n\t\t\tthis\n\t\t);\n\t}\n\n\tconst parent = range.start.parent;\n\n\t// Range may be inside text nodes, we have to split them if that's the case.\n\t_splitNodeAtPosition( range.start );\n\t_splitNodeAtPosition( range.end );\n\n\t// Remove the text nodes using basic `Element` API.\n\tconst removed = parent._removeChildren( range.start.index, range.end.index - range.start.index );\n\n\t// Merge text nodes, if possible. After some nodes were removed, node before and after removed range will be\n\t// touching at the position equal to the removed range beginning. We check merging possibility there.\n\t_mergeNodesAtIndex( parent, range.start.index );\n\n\treturn removed;\n}\n\n/**\n * Moves nodes in given range to given target position. Only {@link module:engine/model/range~Range#isFlat flat} ranges are accepted.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils.move\n * @param {module:engine/model/range~Range} sourceRange Range containing nodes to move.\n * @param {module:engine/model/position~Position} targetPosition Position to which nodes should be moved.\n * @returns {module:engine/model/range~Range} Range containing moved nodes.\n */\nexport function _move( sourceRange, targetPosition ) {\n\tif ( !sourceRange.isFlat ) {\n\t\t/**\n\t\t * Trying to move a range which starts and ends in different element.\n\t\t *\n\t\t * @error operation-utils-move-range-not-flat\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'operation-utils-move-range-not-flat: ' +\n\t\t\t'Trying to move a range which starts and ends in different element.',\n\t\t\tthis\n\t\t);\n\t}\n\n\tconst nodes = _remove( sourceRange );\n\n\t// We have to fix `targetPosition` because model changed after nodes from `sourceRange` got removed and\n\t// that change might have an impact on `targetPosition`.\n\ttargetPosition = targetPosition._getTransformedByDeletion( sourceRange.start, sourceRange.end.offset - sourceRange.start.offset );\n\n\treturn _insert( targetPosition, nodes );\n}\n\n/**\n * Sets given attribute on nodes in given range. The attributes are only set on top-level nodes of the range, not on its children.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils._setAttribute\n * @param {module:engine/model/range~Range} range Range containing nodes that should have the attribute set. Must be a flat range.\n * @param {String} key Key of attribute to set.\n * @param {*} value Attribute value.\n */\nexport function _setAttribute( range, key, value ) {\n\t// Range might start or end in text nodes, so we have to split them.\n\t_splitNodeAtPosition( range.start );\n\t_splitNodeAtPosition( range.end );\n\n\t// Iterate over all items in the range.\n\tfor ( const item of range.getItems( { shallow: true } ) ) {\n\t\t// Iterator will return `TextProxy` instances but we know that those text proxies will\n\t\t// always represent full text nodes (this is guaranteed thanks to splitting we did before).\n\t\t// So, we can operate on those text proxies' text nodes.\n\t\tconst node = item.is( 'textProxy' ) ? item.textNode : item;\n\n\t\tif ( value !== null ) {\n\t\t\tnode._setAttribute( key, value );\n\t\t} else {\n\t\t\tnode._removeAttribute( key );\n\t\t}\n\n\t\t// After attributes changing it may happen that some text nodes can be merged. Try to merge with previous node.\n\t\t_mergeNodesAtIndex( node.parent, node.index );\n\t}\n\n\t// Try to merge last changed node with it's previous sibling (not covered by the loop above).\n\t_mergeNodesAtIndex( range.end.parent, range.end.index );\n}\n\n/**\n * Normalizes given object or an array of objects to an array of {@link module:engine/model/node~Node nodes}. See\n * {@link module:engine/model/node~NodeSet NodeSet} for details on how normalization is performed.\n *\n * @protected\n * @function module:engine/model/operation/utils~utils.normalizeNodes\n * @param {module:engine/model/node~NodeSet} nodes Objects to normalize.\n * @returns {Array.<module:engine/model/node~Node>} Normalized nodes.\n */\nexport function _normalizeNodes( nodes ) {\n\tconst normalized = [];\n\n\tif ( !( nodes instanceof Array ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Convert instances of classes other than Node.\n\tfor ( let i = 0; i < nodes.length; i++ ) {\n\t\tif ( typeof nodes[ i ] == 'string' ) {\n\t\t\tnormalized.push( new Text( nodes[ i ] ) );\n\t\t} else if ( nodes[ i ] instanceof TextProxy ) {\n\t\t\tnormalized.push( new Text( nodes[ i ].data, nodes[ i ].getAttributes() ) );\n\t\t} else if ( nodes[ i ] instanceof DocumentFragment || nodes[ i ] instanceof NodeList ) {\n\t\t\tfor ( const child of nodes[ i ] ) {\n\t\t\t\tnormalized.push( child );\n\t\t\t}\n\t\t} else if ( nodes[ i ] instanceof Node ) {\n\t\t\tnormalized.push( nodes[ i ] );\n\t\t}\n\t\t// Skip unrecognized type.\n\t}\n\n\t// Merge text nodes.\n\tfor ( let i = 1; i < normalized.length; i++ ) {\n\t\tconst node = normalized[ i ];\n\t\tconst prev = normalized[ i - 1 ];\n\n\t\tif ( node instanceof Text && prev instanceof Text && _haveSameAttributes( node, prev ) ) {\n\t\t\t// Doing this instead changing `prev.data` because `data` is readonly.\n\t\t\tnormalized.splice( i - 1, 2, new Text( prev.data + node.data, prev.getAttributes() ) );\n\t\t\ti--;\n\t\t}\n\t}\n\n\treturn normalized;\n}\n\n// Checks if nodes before and after given index in given element are {@link module:engine/model/text~Text text nodes} and\n// merges them into one node if they have same attributes.\n//\n// Merging is done by removing two text nodes and inserting a new text node containing data from both merged text nodes.\n//\n// @private\n// @param {module:engine/model/element~Element} element Parent element of nodes to merge.\n// @param {Number} index Index between nodes to merge.\nfunction _mergeNodesAtIndex( element, index ) {\n\tconst nodeBefore = element.getChild( index - 1 );\n\tconst nodeAfter = element.getChild( index );\n\n\t// Check if both of those nodes are text objects with same attributes.\n\tif ( nodeBefore && nodeAfter && nodeBefore.is( 'text' ) && nodeAfter.is( 'text' ) && _haveSameAttributes( nodeBefore, nodeAfter ) ) {\n\t\t// Append text of text node after index to the before one.\n\t\tconst mergedNode = new Text( nodeBefore.data + nodeAfter.data, nodeBefore.getAttributes() );\n\n\t\t// Remove separate text nodes.\n\t\telement._removeChildren( index - 1, 2 );\n\n\t\t// Insert merged text node.\n\t\telement._insertChild( index - 1, mergedNode );\n\t}\n}\n\n// Checks if given position is in a text node, and if so, splits the text node in two text nodes, each of them\n// containing a part of original text node.\n//\n// @private\n// @param {module:engine/model/position~Position} position Position at which node should be split.\nfunction _splitNodeAtPosition( position ) {\n\tconst textNode = position.textNode;\n\tconst element = position.parent;\n\n\tif ( textNode ) {\n\t\tconst offsetDiff = position.offset - textNode.startOffset;\n\t\tconst index = textNode.index;\n\n\t\telement._removeChildren( index, 1 );\n\n\t\tconst firstPart = new Text( textNode.data.substr( 0, offsetDiff ), textNode.getAttributes() );\n\t\tconst secondPart = new Text( textNode.data.substr( offsetDiff ), textNode.getAttributes() );\n\n\t\telement._insertChild( index, [ firstPart, secondPart ] );\n\t}\n}\n\n// Checks whether two given nodes have same attributes.\n//\n// @private\n// @param {module:engine/model/node~Node} nodeA Node to check.\n// @param {module:engine/model/node~Node} nodeB Node to check.\n// @returns {Boolean} `true` if nodes have same attributes, `false` otherwise.\nfunction _haveSameAttributes( nodeA, nodeB ) {\n\tconst iteratorA = nodeA.getAttributes();\n\tconst iteratorB = nodeB.getAttributes();\n\n\tfor ( const attr of iteratorA ) {\n\t\tif ( attr[ 1 ] !== nodeB.getAttribute( attr[ 0 ] ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\titeratorB.next();\n\t}\n\n\treturn iteratorB.next().done;\n}\n\n/**\n * Value that can be normalized to an array of {@link module:engine/model/node~Node nodes}.\n *\n * Non-arrays are normalized as follows:\n * * {@link module:engine/model/node~Node Node} is left as is,\n * * {@link module:engine/model/textproxy~TextProxy TextProxy} and `String` are normalized to {@link module:engine/model/text~Text Text},\n * * {@link module:engine/model/nodelist~NodeList NodeList} is normalized to an array containing all nodes that are in that node list,\n * * {@link module:engine/model/documentfragment~DocumentFragment DocumentFragment} is normalized to an array containing all of it's\n * * children.\n *\n * Arrays are processed item by item like non-array values and flattened to one array. Normalization always results in\n * a flat array of {@link module:engine/model/node~Node nodes}. Consecutive text nodes (or items normalized to text nodes) will be\n * merged if they have same attributes.\n *\n * @typedef {module:engine/model/node~Node|module:engine/model/textproxy~TextProxy|String|\n * module:engine/model/nodelist~NodeList|module:engine/model/documentfragment~DocumentFragment|Iterable}\n * module:engine/model/node~NodeSet\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/keystrokehandler\n */\n\nimport DomEmitterMixin from './dom/emittermixin';\nimport { getCode, parseKeystroke } from './keyboard';\n\n/**\n * Keystroke handler allows registering callbacks for given keystrokes.\n *\n * The most frequent use of this class is through the {@link module:core/editor/editor~Editor#keystrokes `editor.keystrokes`}\n * property. It allows listening to keystrokes executed in the editing view:\n *\n *\t\teditor.keystrokes.set( 'Ctrl+A', ( keyEvtData, cancel ) => {\n *\t\t\tconsole.log( 'Ctrl+A has been pressed' );\n *\t\t\tcancel();\n *\t\t} );\n *\n * However, this utility class can be used in various part of the UI. For instance, a certain {@link module:ui/view~View}\n * can use it like this:\n *\n *\t\tclass MyView extends View {\n *\t\t\tconstructor() {\n *\t\t\t\tthis.keystrokes = new KeystrokeHandler();\n *\n * \t\t\t\tthis.keystrokes.set( 'tab', handleTabKey );\n *\t\t\t}\n *\n *\t\t\trender() {\n *\t\t\t\tsuper.render();\n *\n *\t\t\t\tthis.keystrokes.listenTo( this.element );\n *\t\t\t}\n *\t\t}\n *\n * That keystroke handler will listen to `keydown` events fired in this view's main element.\n *\n */\nexport default class KeystrokeHandler {\n\t/**\n\t * Creates an instance of the keystroke handler.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Listener used to listen to events for easier keystroke handler destruction.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:utils/dom/emittermixin~Emitter}\n\t\t */\n\t\tthis._listener = Object.create( DomEmitterMixin );\n\t}\n\n\t/**\n\t * Starts listening for `keydown` events from a given emitter.\n\t *\n\t * @param {module:utils/emittermixin~Emitter} emitter\n\t */\n\tlistenTo( emitter ) {\n\t\t// The #_listener works here as a kind of dispatcher. It groups the events coming from the same\n\t\t// keystroke so the listeners can be attached to them with different priorities.\n\t\t//\n\t\t// E.g. all the keystrokes with the `keyCode` of 42 coming from the `emitter` are propagated\n\t\t// as a `_keydown:42` event by the `_listener`. If there's a callback created by the `set`\n\t\t// method for this 42 keystroke, it listens to the `_listener#_keydown:42` event only and interacts\n\t\t// only with other listeners of this particular event, thus making it possible to prioritize\n\t\t// the listeners and safely cancel execution, when needed. Instead of duplicating the Emitter logic,\n\t\t// the KeystrokeHandler re–uses it to do its job.\n\t\tthis._listener.listenTo( emitter, 'keydown', ( evt, keyEvtData ) => {\n\t\t\tthis._listener.fire( '_keydown:' + getCode( keyEvtData ), keyEvtData );\n\t\t} );\n\t}\n\n\t/**\n\t * Registers a handler for the specified keystroke.\n\t *\n\t * @param {String|Array.<String|Number>} keystroke Keystroke defined in a format accepted by\n\t * the {@link module:utils/keyboard~parseKeystroke} function.\n\t * @param {Function} callback A function called with the\n\t * {@link module:engine/view/observer/keyobserver~KeyEventData key event data} object and\n\t * a helper funcion to call both `preventDefault()` and `stopPropagation()` on the underlying event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of the keystroke\n\t * callback. The higher the priority value the sooner the callback will be executed. Keystrokes having the same priority\n\t * are called in the order they were added.\n\t */\n\tset( keystroke, callback, options = {} ) {\n\t\tconst keyCode = parseKeystroke( keystroke );\n\t\tconst priority = options.priority;\n\n\t\t// Execute the passed callback on KeystrokeHandler#_keydown.\n\t\t// TODO: https://github.com/ckeditor/ckeditor5-utils/issues/144\n\t\tthis._listener.listenTo( this._listener, '_keydown:' + keyCode, ( evt, keyEvtData ) => {\n\t\t\tcallback( keyEvtData, () => {\n\t\t\t\t// Stop the event in the DOM: no listener in the web page\n\t\t\t\t// will be triggered by this event.\n\t\t\t\tkeyEvtData.preventDefault();\n\t\t\t\tkeyEvtData.stopPropagation();\n\n\t\t\t\t// Stop the event in the KeystrokeHandler: no more callbacks\n\t\t\t\t// will be executed for this keystroke.\n\t\t\t\tevt.stop();\n\t\t\t} );\n\n\t\t\t// Mark this keystroke as handled by the callback. See: #press.\n\t\t\tevt.return = true;\n\t\t}, { priority } );\n\t}\n\n\t/**\n\t * Triggers a keystroke handler for a specified key combination, if such a keystroke was {@link #set defined}.\n\t *\n\t * @param {module:engine/view/observer/keyobserver~KeyEventData} keyEvtData Key event data.\n\t * @returns {Boolean} Whether the keystroke was handled.\n\t */\n\tpress( keyEvtData ) {\n\t\treturn !!this._listener.fire( '_keydown:' + getCode( keyEvtData ), keyEvtData );\n\t}\n\n\t/**\n\t * Destroys the keystroke handler.\n\t */\n\tdestroy() {\n\t\tthis._listener.stopListening();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/first\n */\n\n/**\n * Returns first item of the given `iterable`.\n *\n * @param {Iterable.<*>} iterable\n * @returns {*}\n */\nexport default function first( iterable ) {\n\tconst iteratorItem = iterable.next();\n\n\tif ( iteratorItem.done ) {\n\t\treturn null;\n\t}\n\n\treturn iteratorItem.value;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/insertoperation\n */\n\nimport Operation from './operation';\nimport Position from '../position';\nimport NodeList from '../nodelist';\nimport MoveOperation from './moveoperation';\nimport { _insert, _normalizeNodes } from './utils';\nimport Text from '../text';\nimport Element from '../element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to insert one or more nodes at given position in the model.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class InsertOperation extends Operation {\n\t/**\n\t * Creates an insert operation.\n\t *\n\t * @param {module:engine/model/position~Position} position Position of insertion.\n\t * @param {module:engine/model/node~NodeSet} nodes The list of nodes to be inserted.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( position, nodes, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position of insertion.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/insertoperation~InsertOperation#position\n\t\t */\n\t\tthis.position = position.clone();\n\t\tthis.position.stickiness = 'toNone';\n\n\t\t/**\n\t\t * List of nodes to insert.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/nodelist~NodeList} module:engine/model/operation/insertoperation~InsertOperation#nodeList\n\t\t */\n\t\tthis.nodes = new NodeList( _normalizeNodes( nodes ) );\n\n\t\t/**\n\t\t * Flag deciding how the operation should be transformed. If set to `true`, nodes might get additional attributes\n\t\t * during operational transformation. This happens when the operation insertion position is inside of a range\n\t\t * where attributes have changed.\n\t\t *\n\t\t * @member {Boolean} module:engine/model/operation/insertoperation~InsertOperation#shouldReceiveAttributes\n\t\t */\n\t\tthis.shouldReceiveAttributes = false;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'insert';\n\t}\n\n\t/**\n\t * Total offset size of inserted nodes.\n\t *\n\t * @returns {Number}\n\t */\n\tget howMany() {\n\t\treturn this.nodes.maxOffset;\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/insertoperation~InsertOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\tconst nodes = new NodeList( [ ...this.nodes ].map( node => node._clone( true ) ) );\n\t\tconst insert = new InsertOperation( this.position, nodes, this.baseVersion );\n\n\t\tinsert.shouldReceiveAttributes = this.shouldReceiveAttributes;\n\n\t\treturn insert;\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation}\n\t */\n\tgetReversed() {\n\t\tconst graveyard = this.position.root.document.graveyard;\n\t\tconst gyPosition = new Position( graveyard, [ 0 ] );\n\n\t\treturn new MoveOperation( this.position, this.nodes.maxOffset, gyPosition, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst targetElement = this.position.parent;\n\n\t\tif ( !targetElement || targetElement.maxOffset < this.position.offset ) {\n\t\t\t/**\n\t\t\t * Insertion position is invalid.\n\t\t\t *\n\t\t\t * @error insert-operation-position-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'insert-operation-position-invalid: Insertion position is invalid.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t// What happens here is that we want original nodes be passed to writer because we want original nodes\n\t\t// to be inserted to the model. But in InsertOperation, we want to keep those nodes as they were added\n\t\t// to the operation, not modified. For example, text nodes can get merged or cropped while Elements can\n\t\t// get children. It is important that InsertOperation has the copy of original nodes in intact state.\n\t\tconst originalNodes = this.nodes;\n\t\tthis.nodes = new NodeList( [ ...originalNodes ].map( node => node._clone( true ) ) );\n\n\t\t_insert( this.position, originalNodes );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.position = this.position.toJSON();\n\t\tjson.nodes = this.nodes.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'InsertOperation';\n\t}\n\n\t/**\n\t * Creates `InsertOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/insertoperation~InsertOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst children = [];\n\n\t\tfor ( const child of json.nodes ) {\n\t\t\tif ( child.name ) {\n\t\t\t\t// If child has name property, it is an Element.\n\t\t\t\tchildren.push( Element.fromJSON( child ) );\n\t\t\t} else {\n\t\t\t\t// Otherwise, it is a Text node.\n\t\t\t\tchildren.push( Text.fromJSON( child ) );\n\t\t\t}\n\t\t}\n\n\t\tconst insert = new InsertOperation( Position.fromJSON( json.position, document ), children, json.baseVersion );\n\t\tinsert.shouldReceiveAttributes = json.shouldReceiveAttributes;\n\n\t\treturn insert;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/selection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Range from './range';\nimport Position from './position';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport Node from './node';\nimport Element from './element';\nimport count from '@ckeditor/ckeditor5-utils/src/count';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport DocumentSelection from './documentselection';\n\n/**\n * Class representing an arbirtary selection in the view.\n * See also {@link module:engine/view/documentselection~DocumentSelection}.\n *\n * New selection instances can be created via the constructor or one these methods:\n *\n * * {@link module:engine/view/view~View#createSelection `View#createSelection()`},\n * * {@link module:engine/view/upcastwriter~UpcastWriter#createSelection `UpcastWriter#createSelection()`}.\n *\n * A selection can consist of {@link module:engine/view/range~Range ranges} that can be set by using\n * the {@link module:engine/view/selection~Selection#setTo `Selection#setTo()`} method.\n */\nexport default class Selection {\n\t/**\n\t * Creates new selection instance.\n\t *\n\t * **Note**: The selection constructor is available as a factory method:\n\t *\n\t * * {@link module:engine/view/view~View#createSelection `View#createSelection()`},\n\t * * {@link module:engine/view/upcastwriter~UpcastWriter#createSelection `UpcastWriter#createSelection()`}.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = writer.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = writer.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tconstructor( selectable = null, placeOrOffset, options ) {\n\t\t/**\n\t\t * Stores all ranges that are selected.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/range~Range>}\n\t\t */\n\t\tthis._ranges = [];\n\n\t\t/**\n\t\t * Specifies whether the last added range was added as a backward or forward range.\n\t\t *\n\t\t * @protected\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._lastRangeBackward = false;\n\n\t\t/**\n\t\t * Specifies whether selection instance is fake.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._isFake = false;\n\n\t\t/**\n\t\t * Fake selection's label.\n\t\t *\n\t\t * @private\n\t\t * @member {String}\n\t\t */\n\t\tthis._fakeSelectionLabel = '';\n\n\t\tthis.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Returns true if selection instance is marked as `fake`.\n\t *\n\t * @see #setTo\n\t * @returns {Boolean}\n\t */\n\tget isFake() {\n\t\treturn this._isFake;\n\t}\n\n\t/**\n\t * Returns fake selection label.\n\t *\n\t * @see #setTo\n\t * @returns {String}\n\t */\n\tget fakeSelectionLabel() {\n\t\treturn this._fakeSelectionLabel;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the selection starts. Together with\n\t * {@link #focus focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always the start or end of the most recent added range.\n\t * It may be a bit unintuitive when there are multiple ranges in selection.\n\t *\n\t * @see #focus\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget anchor() {\n\t\tif ( !this._ranges.length ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\t\tconst anchor = this._lastRangeBackward ? range.end : range.start;\n\n\t\treturn anchor.clone();\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * @see #anchor\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget focus() {\n\t\tif ( !this._ranges.length ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\t\tconst focus = this._lastRangeBackward ? range.start : range.end;\n\n\t\treturn focus.clone();\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.rangeCount === 1 && this._ranges[ 0 ].isCollapsed;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._ranges.length;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus} precedes {@link #anchor}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn !this.isCollapsed && this._lastRangeBackward;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this selection, or `null`\n\t * if the selection is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\tif ( this.anchor ) {\n\t\t\treturn this.anchor.editableElement;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns an iterable that contains copies of all ranges added to the selection.\n\t *\n\t * @returns {Iterable.<module:engine/view/range~Range>}\n\t */\n\t* getRanges() {\n\t\tfor ( const range of this._ranges ) {\n\t\t\tyield range.clone();\n\t\t}\n\t}\n\n\t/**\n\t * Returns copy of the first range in the selection. First range is the one which\n\t * {@link module:engine/view/range~Range#start start} position {@link module:engine/view/position~Position#isBefore is before} start\n\t * position of all other ranges (not to confuse with the first range added to the selection).\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\tlet first = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !first || range.start.isBefore( first.start ) ) {\n\t\t\t\tfirst = range;\n\t\t\t}\n\t\t}\n\n\t\treturn first ? first.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the last range in the selection. Last range is the one which {@link module:engine/view/range~Range#end end}\n\t * position {@link module:engine/view/position~Position#isAfter is after} end position of all other ranges (not to confuse\n\t * with the last range added to the selection). Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\tlet last = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !last || range.end.isAfter( last.end ) ) {\n\t\t\t\tlast = range;\n\t\t\t}\n\t\t}\n\n\t\treturn last ? last.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the first position in the selection. First position is the position that\n\t * {@link module:engine/view/position~Position#isBefore is before} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\tconst firstRange = this.getFirstRange();\n\n\t\treturn firstRange ? firstRange.start.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the last position in the selection. Last position is the position that\n\t * {@link module:engine/view/position~Position#isAfter is after} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\tconst lastRange = this.getLastRange();\n\n\t\treturn lastRange ? lastRange.end.clone() : null;\n\t}\n\n\t/**\n\t * Checks whether, this selection is equal to given selection. Selections are equal if they have same directions,\n\t * same number of ranges and all ranges from one selection equal to a range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\tif ( this.isFake != otherSelection.isFake ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.isFake && this.fakeSelectionLabel != otherSelection.fakeSelectionLabel ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.rangeCount != otherSelection.rangeCount ) {\n\t\t\treturn false;\n\t\t} else if ( this.rangeCount === 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( !this.anchor.isEqual( otherSelection.anchor ) || !this.focus.isEqual( otherSelection.focus ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor ( const thisRange of this._ranges ) {\n\t\t\tlet found = false;\n\n\t\t\tfor ( const otherRange of otherSelection._ranges ) {\n\t\t\t\tif ( thisRange.isEqual( otherRange ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether this selection is similar to given selection. Selections are similar if they have same directions, same\n\t * number of ranges, and all {@link module:engine/view/range~Range#getTrimmed trimmed} ranges from one selection are\n\t * equal to any trimmed range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are similar, `false` otherwise.\n\t */\n\tisSimilar( otherSelection ) {\n\t\tif ( this.isBackward != otherSelection.isBackward ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst numOfRangesA = count( this.getRanges() );\n\t\tconst numOfRangesB = count( otherSelection.getRanges() );\n\n\t\t// If selections have different number of ranges, they cannot be similar.\n\t\tif ( numOfRangesA != numOfRangesB ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If both selections have no ranges, they are similar.\n\t\tif ( numOfRangesA == 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if each range in one selection has a similar range in other selection.\n\t\tfor ( let rangeA of this.getRanges() ) {\n\t\t\trangeA = rangeA.getTrimmed();\n\n\t\t\tlet found = false;\n\n\t\t\tfor ( let rangeB of otherSelection.getRanges() ) {\n\t\t\t\trangeB = rangeB.getTrimmed();\n\n\t\t\t\tif ( rangeA.start.isEqual( rangeB.start ) && rangeA.end.isEqual( rangeB.end ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For `rangeA`, neither range in `otherSelection` was similar. So selections are not similar.\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// There were no ranges that weren't matched. Selections are similar.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/view/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/view/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\tif ( this.rangeCount !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst range = this.getFirstRange();\n\n\t\tlet nodeAfterStart = range.start.nodeAfter;\n\t\tlet nodeBeforeEnd = range.end.nodeBefore;\n\n\t\t// Handle the situation when selection position is at the beginning / at the end of a text node.\n\t\t// In such situation `.nodeAfter` and `.nodeBefore` are `null` but the selection still might be spanning\n\t\t// over one element.\n\t\t//\n\t\t// <p>Foo{<span class=\"widget\"></span>}bar</p> vs <p>Foo[<span class=\"widget\"></span>]bar</p>\n\t\t//\n\t\t// These are basically the same selections, only the difference is if the selection position is at\n\t\t// at the end/at the beginning of a text node or just before/just after the text node.\n\t\t//\n\t\tif ( range.start.parent.is( 'text' ) && range.start.isAtEnd && range.start.parent.nextSibling ) {\n\t\t\tnodeAfterStart = range.start.parent.nextSibling;\n\t\t}\n\n\t\tif ( range.end.parent.is( 'text' ) && range.end.isAtStart && range.end.parent.previousSibling ) {\n\t\t\tnodeBeforeEnd = range.end.parent.previousSibling;\n\t\t}\n\n\t\treturn ( nodeAfterStart instanceof Element && nodeAfterStart == nodeBeforeEnd ) ? nodeAfterStart : null;\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tselection.setTo( otherSelection );\n\t *\n\t *\t \t// Sets selection to contents of DocumentSelection.\n\t *\t\tselection.setTo( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, path );\n\t *\t\tselection.setTo( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tselection.setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t *\t\tselection.setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tselection.setTo( paragraph, 'on' );\n\t *\n\t * \t\t// Clears selection. Removes all ranges.\n\t *\t\tselection.setTo( null );\n\t *\n\t * `Selection#setTo()` method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\tselection.setTo( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tselection.setTo( range, { fake: true, label: 'foo' } );\n\t *\n\t * @fires change\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tsetTo( selectable, placeOrOffset, options ) {\n\t\tif ( selectable === null ) {\n\t\t\tthis._setRanges( [] );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Selection || selectable instanceof DocumentSelection ) {\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t\tthis._setFakeOptions( { fake: selectable.isFake, label: selectable.fakeSelectionLabel } );\n\t\t} else if ( selectable instanceof Range ) {\n\t\t\tthis._setRanges( [ selectable ], placeOrOffset && placeOrOffset.backward );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Position ) {\n\t\t\tthis._setRanges( [ new Range( selectable ) ] );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Node ) {\n\t\t\tconst backward = !!options && !!options.backward;\n\t\t\tlet range;\n\n\t\t\tif ( placeOrOffset === undefined ) {\n\t\t\t\t/**\n\t\t\t\t * selection.setTo requires the second parameter when the first parameter is a node.\n\t\t\t\t *\n\t\t\t\t * @error view-selection-setTo-required-second-parameter\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'view-selection-setTo-required-second-parameter: ' +\n\t\t\t\t\t'selection.setTo requires the second parameter when the first parameter is a node.',\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t} else if ( placeOrOffset == 'in' ) {\n\t\t\t\trange = Range._createIn( selectable );\n\t\t\t} else if ( placeOrOffset == 'on' ) {\n\t\t\t\trange = Range._createOn( selectable );\n\t\t\t} else {\n\t\t\t\trange = new Range( Position._createAt( selectable, placeOrOffset ) );\n\t\t\t}\n\n\t\t\tthis._setRanges( [ range ], backward );\n\t\t\tthis._setFakeOptions( options );\n\t\t} else if ( isIterable( selectable ) ) {\n\t\t\t// We assume that the selectable is an iterable of ranges.\n\t\t\t// Array.from() is used to prevent setting ranges to the old iterable\n\t\t\tthis._setRanges( selectable, placeOrOffset && placeOrOffset.backward );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else {\n\t\t\t/**\n\t\t\t * Cannot set selection to given place.\n\t\t\t *\n\t\t\t * @error view-selection-setTo-not-selectable\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-selection-setTo-not-selectable: Cannot set selection to given place.', this );\n\t\t}\n\n\t\tthis.fire( 'change' );\n\t}\n\n\t/**\n\t * Moves {@link #focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @fires change\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tsetFocus( itemOrPosition, offset ) {\n\t\tif ( this.anchor === null ) {\n\t\t\t/**\n\t\t\t * Cannot set selection focus if there are no ranges in selection.\n\t\t\t *\n\t\t\t * @error view-selection-setFocus-no-ranges\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tconst newFocus = Position._createAt( itemOrPosition, offset );\n\n\t\tif ( newFocus.compareWith( this.focus ) == 'same' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst anchor = this.anchor;\n\n\t\tthis._ranges.pop();\n\n\t\tif ( newFocus.compareWith( anchor ) == 'before' ) {\n\t\t\tthis._addRange( new Range( newFocus, anchor ), true );\n\t\t} else {\n\t\t\tthis._addRange( new Range( anchor, newFocus ) );\n\t\t}\n\n\t\tthis.fire( 'change' );\n\t}\n\n\t/**\n\t * Checks whether object is of given type following the convention set by\n\t * {@link module:engine/view/node~Node#is `Node#is()`}.\n\t *\n\t *\t\tconst selection = new Selection( ... );\n\t *\n\t *\t\tselection.is( 'selection' ); // true\n\t *\t\tselection.is( 'node' ); // false\n\t *\t\tselection.is( 'element' ); // false\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'selection';\n\t}\n\n\t/**\n\t * Replaces all ranges that were added to the selection with given array of ranges. Last range of the array\n\t * is treated like the last added range and is used to set {@link #anchor anchor} and {@link #focus focus}.\n\t * Accepts a flag describing in which way the selection is made.\n\t *\n\t * @private\n\t * @param {Iterable.<module:engine/view/range~Range>} newRanges Iterable object of ranges to set.\n\t * @param {Boolean} [isLastBackward=false] Flag describing if last added range was selected forward - from start to end\n\t * (`false`) or backward - from end to start (`true`). Defaults to `false`.\n\t */\n\t_setRanges( newRanges, isLastBackward = false ) {\n\t\t// New ranges should be copied to prevent removing them by setting them to `[]` first.\n\t\t// Only applies to situations when selection is set to the same selection or same selection's ranges.\n\t\tnewRanges = Array.from( newRanges );\n\n\t\tthis._ranges = [];\n\n\t\tfor ( const range of newRanges ) {\n\t\t\tthis._addRange( range );\n\t\t}\n\n\t\tthis._lastRangeBackward = !!isLastBackward;\n\t}\n\n\t/**\n\t * Sets this selection instance to be marked as `fake`. A fake selection does not render as browser native selection\n\t * over selected elements and is hidden to the user. This way, no native selection UI artifacts are displayed to\n\t * the user and selection over elements can be represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM (and be\n\t * properly handled by screen readers).\n\t *\n\t * @private\n\t * @param {Object} [options] Options.\n\t * @param {Boolean} [options.fake] If set to true selection will be marked as `fake`.\n\t * @param {String} [options.label=''] Fake selection label.\n\t */\n\t_setFakeOptions( options = {} ) {\n\t\tthis._isFake = !!options.fake;\n\t\tthis._fakeSelectionLabel = options.fake ? options.label || '' : '';\n\t}\n\n\t/**\n\t * Adds a range to the selection. Added range is copied. This means that passed range is not saved in the\n\t * selection instance and you can safely operate on it.\n\t *\n\t * Accepts a flag describing in which way the selection is made - passed range might be selected from\n\t * {@link module:engine/view/range~Range#start start} to {@link module:engine/view/range~Range#end end}\n\t * or from {@link module:engine/view/range~Range#end end} to {@link module:engine/view/range~Range#start start}.\n\t * The flag is used to set {@link #anchor anchor} and {@link #focus focus} properties.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-selection-range-intersects` if added range intersects\n\t * with ranges already stored in Selection instance.\n\t *\n\t * @private\n\t * @fires change\n\t * @param {module:engine/view/range~Range} range\n\t * @param {Boolean} [isBackward]\n\t */\n\t_addRange( range, isBackward = false ) {\n\t\tif ( !( range instanceof Range ) ) {\n\t\t\t/**\n\t\t\t * Selection range set to an object that is not an instance of {@link module:engine/view/range~Range}.\n\t\t\t *\n\t\t\t * @error view-selection-add-range-not-range\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-selection-add-range-not-range: ' +\n\t\t\t\t'Selection range set to an object that is not an instance of view.Range',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tthis._pushRange( range );\n\t\tthis._lastRangeBackward = !!isBackward;\n\t}\n\n\t/**\n\t * Adds range to selection - creates copy of given range so it can be safely used and modified.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-selection-range-intersects` if added range intersects\n\t * with ranges already stored in selection instance.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range\n\t */\n\t_pushRange( range ) {\n\t\tfor ( const storedRange of this._ranges ) {\n\t\t\tif ( range.isIntersecting( storedRange ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to add a range that intersects with another range from selection.\n\t\t\t\t *\n\t\t\t\t * @error view-selection-range-intersects\n\t\t\t\t * @param {module:engine/view/range~Range} addedRange Range that was added to the selection.\n\t\t\t\t * @param {module:engine/view/range~Range} intersectingRange Range from selection that intersects with `addedRange`.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'view-selection-range-intersects: Trying to add a range that intersects with another range from selection.',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ addedRange: range, intersectingRange: storedRange }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._ranges.push( new Range( range.start, range.end ) );\n\t}\n\n\t/**\n\t * Fired whenever selection ranges are changed through {@link ~Selection Selection API}.\n\t *\n\t * @event change\n\t */\n}\n\nmix( Selection, EmitterMixin );\n\n/**\n * An entity that is used to set selection.\n *\n * See also {@link module:engine/view/selection~Selection#setTo}\n *\n * @typedef {\n *    module:engine/view/selection~Selection|\n *    module:engine/view/documentselection~DocumentSelection|\n *    module:engine/view/position~Position|\n *    Iterable.<module:engine/view/range~Range>|\n *    module:engine/view/range~Range|\n *    module:engine/view/item~Item|\n *    null\n * } module:engine/view/selection~Selectable\n */\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/rect\n */\n\nimport isRange from './isrange';\nimport isWindow from './iswindow';\nimport getBorderWidths from './getborderwidths';\nimport log from '../log';\nimport isText from './istext';\nimport { isElement } from 'lodash-es';\n\nconst rectProperties = [ 'top', 'right', 'bottom', 'left', 'width', 'height' ];\n\n/**\n * A helper class representing a `ClientRect` object, e.g. value returned by\n * the native `object.getBoundingClientRect()` method. Provides a set of methods\n * to manipulate the rect and compare it against other rect instances.\n */\nexport default class Rect {\n\t/**\n\t * Creates an instance of rect.\n\t *\n\t *\t\t// Rect of an HTMLElement.\n\t *\t\tconst rectA = new Rect( document.body );\n\t *\n\t *\t\t// Rect of a DOM Range.\n\t *\t\tconst rectB = new Rect( document.getSelection().getRangeAt( 0 ) );\n\t *\n\t *\t\t// Rect of a window (web browser viewport).\n\t *\t\tconst rectC = new Rect( window );\n\t *\n\t *\t\t// Rect out of an object.\n\t *\t\tconst rectD = new Rect( { top: 0, right: 10, bottom: 10, left: 0, width: 10, height: 10 } );\n\t *\n\t *\t\t// Rect out of another Rect instance.\n\t *\t\tconst rectE = new Rect( rectD );\n\t *\n\t *\t\t// Rect out of a ClientRect.\n\t *\t\tconst rectF = new Rect( document.body.getClientRects().item( 0 ) );\n\t *\n\t * **Note**: By default a rect of an HTML element includes its CSS borders and scrollbars (if any)\n\t * ant the rect of a `window` includes scrollbars too. Use {@link #excludeScrollbarsAndBorders}\n\t * to get the inner part of the rect.\n\t *\n\t * @param {HTMLElement|Range|Window|ClientRect|module:utils/dom/rect~Rect|Object} source A source object to create the rect.\n\t */\n\tconstructor( source ) {\n\t\tconst isSourceRange = isRange( source );\n\n\t\t/**\n\t\t * The object this rect is for.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {HTMLElement|Range|ClientRect|module:utils/dom/rect~Rect|Object} #_source\n\t\t */\n\t\tObject.defineProperty( this, '_source', {\n\t\t\t// If the source is a Rect instance, copy it's #_source.\n\t\t\tvalue: source._source || source,\n\t\t\twritable: true,\n\t\t\tenumerable: false\n\t\t} );\n\n\t\tif ( isElement( source ) || isSourceRange ) {\n\t\t\tconst sourceNode = isSourceRange ? source.startContainer : source;\n\n\t\t\tif ( !sourceNode.ownerDocument || !sourceNode.ownerDocument.body.contains( sourceNode ) ) {\n\t\t\t\t/**\n\t\t\t\t * The `Rect` class depends on `getBoundingClientRect` and `getClientRects` DOM methods.\n\t\t\t\t * If the {@link #constructor source} of a rect in an HTML element or a DOM range but it does\n\t\t\t\t * not belong to any rendered DOM tree, these methods will fail to obtain the geometry and\n\t\t\t\t * the rect instance makes little sense to the features using it.\n\t\t\t\t *\n\t\t\t\t * To get rid of this warning make sure the source passed to the constructor\n\t\t\t\t * is a descendant of `window.document.body`.\n\t\t\t\t *\n\t\t\t\t * @error rect-source-not-in-dom\n\t\t\t\t * @param {String} source The source of the Rect instance.\n\t\t\t\t */\n\t\t\t\tlog.warn(\n\t\t\t\t\t'rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.',\n\t\t\t\t\t{ source }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( isSourceRange ) {\n\t\t\t\tcopyRectProperties( this, Rect.getDomRangeRects( source )[ 0 ] );\n\t\t\t} else {\n\t\t\t\tcopyRectProperties( this, source.getBoundingClientRect() );\n\t\t\t}\n\t\t} else if ( isWindow( source ) ) {\n\t\t\tconst { innerWidth, innerHeight } = source;\n\n\t\t\tcopyRectProperties( this, {\n\t\t\t\ttop: 0,\n\t\t\t\tright: innerWidth,\n\t\t\t\tbottom: innerHeight,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: innerWidth,\n\t\t\t\theight: innerHeight\n\t\t\t} );\n\t\t} else {\n\t\t\tcopyRectProperties( this, source );\n\t\t}\n\n\t\t/**\n\t\t * The \"top\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #top\n\t\t */\n\n\t\t/**\n\t\t * The \"right\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #right\n\t\t */\n\n\t\t/**\n\t\t * The \"bottom\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #bottom\n\t\t */\n\n\t\t/**\n\t\t * The \"left\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #left\n\t\t */\n\n\t\t/**\n\t\t * The \"width\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #width\n\t\t */\n\n\t\t/**\n\t\t * The \"height\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #height\n\t\t */\n\t}\n\n\t/**\n\t * Returns a clone of the rect.\n\t *\n\t * @returns {module:utils/dom/rect~Rect} A cloned rect.\n\t */\n\tclone() {\n\t\treturn new Rect( this );\n\t}\n\n\t/**\n\t * Moves the rect so that its upper–left corner lands in desired `[ x, y ]` location.\n\t *\n\t * @param {Number} x Desired horizontal location.\n\t * @param {Number} y Desired vertical location.\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been moved.\n\t */\n\tmoveTo( x, y ) {\n\t\tthis.top = y;\n\t\tthis.right = x + this.width;\n\t\tthis.bottom = y + this.height;\n\t\tthis.left = x;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves the rect in–place by a dedicated offset.\n\t *\n\t * @param {Number} x A horizontal offset.\n\t * @param {Number} y A vertical offset\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been moved.\n\t */\n\tmoveBy( x, y ) {\n\t\tthis.top += y;\n\t\tthis.right += x;\n\t\tthis.left += x;\n\t\tthis.bottom += y;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a new rect a a result of intersection with another rect.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect\n\t * @returns {module:utils/dom/rect~Rect}\n\t */\n\tgetIntersection( anotherRect ) {\n\t\tconst rect = {\n\t\t\ttop: Math.max( this.top, anotherRect.top ),\n\t\t\tright: Math.min( this.right, anotherRect.right ),\n\t\t\tbottom: Math.min( this.bottom, anotherRect.bottom ),\n\t\t\tleft: Math.max( this.left, anotherRect.left )\n\t\t};\n\n\t\trect.width = rect.right - rect.left;\n\t\trect.height = rect.bottom - rect.top;\n\n\t\tif ( rect.width < 0 || rect.height < 0 ) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn new Rect( rect );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of intersection with another rect.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect [description]\n\t * @returns {Number} Area of intersection.\n\t */\n\tgetIntersectionArea( anotherRect ) {\n\t\tconst rect = this.getIntersection( anotherRect );\n\n\t\tif ( rect ) {\n\t\t\treturn rect.getArea();\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of the rect.\n\t *\n\t * @returns {Number}\n\t */\n\tgetArea() {\n\t\treturn this.width * this.height;\n\t}\n\n\t/**\n\t * Returns a new rect, a part of the original rect, which is actually visible to the user,\n\t * e.g. an original rect cropped by parent element rects which have `overflow` set in CSS\n\t * other than `\"visible\"`.\n\t *\n\t * If there's no such visible rect, which is when the rect is limited by one or many of\n\t * the ancestors, `null` is returned.\n\t *\n\t * @returns {module:utils/dom/rect~Rect|null} A visible rect instance or `null`, if there's none.\n\t */\n\tgetVisible() {\n\t\tconst source = this._source;\n\t\tlet visibleRect = this.clone();\n\n\t\t// There's no ancestor to crop <body> with the overflow.\n\t\tif ( !isBody( source ) ) {\n\t\t\tlet parent = source.parentNode || source.commonAncestorContainer;\n\n\t\t\t// Check the ancestors all the way up to the <body>.\n\t\t\twhile ( parent && !isBody( parent ) ) {\n\t\t\t\tconst parentRect = new Rect( parent );\n\t\t\t\tconst intersectionRect = visibleRect.getIntersection( parentRect );\n\n\t\t\t\tif ( intersectionRect ) {\n\t\t\t\t\tif ( intersectionRect.getArea() < visibleRect.getArea() ) {\n\t\t\t\t\t\t// Reduce the visible rect to the intersection.\n\t\t\t\t\t\tvisibleRect = intersectionRect;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// There's no intersection, the rect is completely invisible.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\t\t}\n\n\t\treturn visibleRect;\n\t}\n\n\t/**\n\t * Checks if all property values ({@link #top}, {@link #left}, {@link #right},\n\t * {@link #bottom}, {@link #width} and {@link #height}) are the equal in both rect\n\t * instances.\n\t *\n\t * @param {module:utils/dom/rect~Rect} rect A rect instance to compare with.\n\t * @returns {Boolean} `true` when Rects are equal. `false` otherwise.\n\t */\n\tisEqual( anotherRect ) {\n\t\tfor ( const prop of rectProperties ) {\n\t\t\tif ( this[ prop ] !== anotherRect[ prop ] ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether a rect fully contains another rect instance.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect\n\t * @returns {Boolean} `true` if contains, `false` otherwise.\n\t */\n\tcontains( anotherRect ) {\n\t\tconst intersectRect = this.getIntersection( anotherRect );\n\n\t\treturn !!( intersectRect && intersectRect.isEqual( anotherRect ) );\n\t}\n\n\t/**\n\t * Excludes scrollbars and CSS borders from the rect.\n\t *\n\t * * Borders are removed when {@link #_source} is an HTML element.\n\t * * Scrollbars are excluded from HTML elements and the `window`.\n\t *\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been updated.\n\t */\n\texcludeScrollbarsAndBorders() {\n\t\tconst source = this._source;\n\t\tlet scrollBarWidth, scrollBarHeight;\n\n\t\tif ( isWindow( source ) ) {\n\t\t\tscrollBarWidth = source.innerWidth - source.document.documentElement.clientWidth;\n\t\t\tscrollBarHeight = source.innerHeight - source.document.documentElement.clientHeight;\n\t\t} else {\n\t\t\tconst borderWidths = getBorderWidths( this._source );\n\n\t\t\tscrollBarWidth = source.offsetWidth - source.clientWidth;\n\t\t\tscrollBarHeight = source.offsetHeight - source.clientHeight;\n\n\t\t\tthis.moveBy( borderWidths.left, borderWidths.top );\n\t\t}\n\n\t\t// Assuming LTR scrollbars. TODO: RTL.\n\t\tthis.width -= scrollBarWidth;\n\t\tthis.right -= scrollBarWidth;\n\n\t\tthis.height -= scrollBarHeight;\n\t\tthis.bottom -= scrollBarHeight;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of rects of the given native DOM Range.\n\t *\n\t * @param {Range} range A native DOM range.\n\t * @returns {Array.<module:utils/dom/rect~Rect>} DOM Range rects.\n\t */\n\tstatic getDomRangeRects( range ) {\n\t\tconst rects = [];\n\t\t// Safari does not iterate over ClientRectList using for...of loop.\n\t\tconst clientRects = Array.from( range.getClientRects() );\n\n\t\tif ( clientRects.length ) {\n\t\t\tfor ( const rect of clientRects ) {\n\t\t\t\trects.push( new Rect( rect ) );\n\t\t\t}\n\t\t}\n\t\t// If there's no client rects for the Range, use parent container's bounding rect\n\t\t// instead and adjust rect's width to simulate the actual geometry of such range.\n\t\t// https://github.com/ckeditor/ckeditor5-utils/issues/153\n\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/317\n\t\telse {\n\t\t\tlet startContainer = range.startContainer;\n\n\t\t\tif ( isText( startContainer ) ) {\n\t\t\t\tstartContainer = startContainer.parentNode;\n\t\t\t}\n\n\t\t\tconst rect = new Rect( startContainer.getBoundingClientRect() );\n\t\t\trect.right = rect.left;\n\t\t\trect.width = 0;\n\n\t\t\trects.push( rect );\n\t\t}\n\n\t\treturn rects;\n\t}\n}\n\n// Acquires all the rect properties from the passed source.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} rect\n// @param {ClientRect|module:utils/dom/rect~Rect|Object} source\nfunction copyRectProperties( rect, source ) {\n\tfor ( const p of rectProperties ) {\n\t\trect[ p ] = source[ p ];\n\t}\n}\n\n// Checks if provided object is a <body> HTML element.\n//\n// @private\n// @param {HTMLElement|Range} elementOrRange\n// @returns {Boolean}\nfunction isBody( elementOrRange ) {\n\tif ( !isElement( elementOrRange ) ) {\n\t\treturn false;\n\t}\n\n\treturn elementOrRange === elementOrRange.ownerDocument.body;\n}\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/observer\n */\n\nimport DomEmitterMixin from '@ckeditor/ckeditor5-utils/src/dom/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Abstract base observer class. Observers are classes which listen to DOM events, do the preliminary\n * processing and fire events on the {@link module:engine/view/document~Document} objects.\n * Observers can also add features to the view, for instance by updating its status or marking elements\n * which need refresh on DOM events.\n *\n * @abstract\n */\nexport default class Observer {\n\t/**\n\t * Creates an instance of the observer.\n\t *\n\t * @param {module:engine/view/view~View} view\n\t */\n\tconstructor( view ) {\n\t\t/**\n\t\t * Instance of the view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/view~View}\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/document~Document} object.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = view.document;\n\n\t\t/**\n\t\t * State of the observer. If it is disabled events will not be fired.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.isEnabled = false;\n\t}\n\n\t/**\n\t * Enables the observer. This method is called when the observer is registered to the\n\t * {@link module:engine/view/view~View} and after {@link module:engine/view/view~View#forceRender rendering}\n\t * (all observers are {@link #disable disabled} before rendering).\n\t *\n\t * A typical use case for disabling observers is that mutation observers need to be disabled for the rendering.\n\t * However, a child class may not need to be disabled, so it can implement an empty method.\n\t *\n\t * @see module:engine/view/observer/observer~Observer#disable\n\t */\n\tenable() {\n\t\tthis.isEnabled = true;\n\t}\n\n\t/**\n\t * Disables the observer. This method is called before\n\t * {@link module:engine/view/view~View#forceRender rendering} to prevent firing events during rendering.\n\t *\n\t * @see module:engine/view/observer/observer~Observer#enable\n\t */\n\tdisable() {\n\t\tthis.isEnabled = false;\n\t}\n\n\t/**\n\t * Disables and destroys the observer, among others removes event listeners created by the observer.\n\t */\n\tdestroy() {\n\t\tthis.disable();\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Starts observing the given root element.\n\t *\n\t * @method #observe\n\t * @param {HTMLElement} domElement\n\t * @param {String} name The name of the root element.\n\t */\n}\n\nmix( Observer, DomEmitterMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/treewalker\n */\n\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport Element from './element';\nimport Position from './position';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Position iterator class. It allows to iterate forward and backward over the document.\n */\nexport default class TreeWalker {\n\t/**\n\t * Creates a range iterator. All parameters are optional, but you have to specify either `boundaries` or `startPosition`.\n\t *\n\t * @constructor\n\t * @param {Object} [options={}] Object with configuration.\n\t * @param {'forward'|'backward'} [options.direction='forward'] Walking direction.\n\t * @param {module:engine/model/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {module:engine/model/position~Position} [options.startPosition] Starting position.\n\t * @param {Boolean} [options.singleCharacters=false] Flag indicating whether all consecutive characters with the same attributes\n\t * should be returned one by one as multiple {@link module:engine/model/textproxy~TextProxy} (`true`) objects or as one\n\t * {@link module:engine/model/textproxy~TextProxy} (`false`).\n\t * @param {Boolean} [options.shallow=false] Flag indicating whether iterator should enter elements or not. If the\n\t * iterator is shallow child nodes of any iterated node will not be returned along with `elementEnd` tag.\n\t * @param {Boolean} [options.ignoreElementEnd=false] Flag indicating whether iterator should ignore `elementEnd`\n\t * tags. If the option is true walker will not return a parent node of start position. If this option is `true`\n\t * each {@link module:engine/model/element~Element} will be returned once, while if the option is `false` they might be returned\n\t * twice: for `'elementStart'` and `'elementEnd'`.\n\t */\n\tconstructor( options = {} ) {\n\t\tif ( !options.boundaries && !options.startPosition ) {\n\t\t\t/**\n\t\t\t * Neither boundaries nor starting position of a `TreeWalker` have been defined.\n\t\t\t *\n\t\t\t * @error model-tree-walker-no-start-position\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.',\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tconst direction = options.direction || 'forward';\n\n\t\tif ( direction != 'forward' && direction != 'backward' ) {\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.',\n\t\t\t\toptions,\n\t\t\t\t{ direction }\n\t\t\t);\n\t\t}\n\n\t\t/**\n\t\t * Walking direction. Defaults `'forward'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'backward'|'forward'} module:engine/model/treewalker~TreeWalker#direction\n\t\t */\n\t\tthis.direction = direction;\n\n\t\t/**\n\t\t * Iterator boundaries.\n\t\t *\n\t\t * When the iterator is walking `'forward'` on the end of boundary or is walking `'backward'`\n\t\t * on the start of boundary, then `{ done: true }` is returned.\n\t\t *\n\t\t * If boundaries are not defined they are set before first and after last child of the root node.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range} module:engine/model/treewalker~TreeWalker#boundaries\n\t\t */\n\t\tthis.boundaries = options.boundaries || null;\n\n\t\t/**\n\t\t * Iterator position. This is always static position, even if the initial position was a\n\t\t * {@link module:engine/model/liveposition~LivePosition live position}. If start position is not defined then position depends\n\t\t * on {@link #direction}. If direction is `'forward'` position starts form the beginning, when direction\n\t\t * is `'backward'` position starts from the end.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position} module:engine/model/treewalker~TreeWalker#position\n\t\t */\n\t\tif ( options.startPosition ) {\n\t\t\tthis.position = options.startPosition.clone();\n\t\t} else {\n\t\t\tthis.position = Position._createAt( this.boundaries[ this.direction == 'backward' ? 'end' : 'start' ] );\n\t\t}\n\n\t\t// Reset position stickiness in case it was set to other value, as the stickiness is kept after cloning.\n\t\tthis.position.stickiness = 'toNone';\n\n\t\t/**\n\t\t * Flag indicating whether all consecutive characters with the same attributes should be\n\t\t * returned as one {@link module:engine/model/textproxy~TextProxy} (`true`) or one by one (`false`).\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#singleCharacters\n\t\t */\n\t\tthis.singleCharacters = !!options.singleCharacters;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should enter elements or not. If the iterator is shallow child nodes of any\n\t\t * iterated node will not be returned along with `elementEnd` tag.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#shallow\n\t\t */\n\t\tthis.shallow = !!options.shallow;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should ignore `elementEnd` tags. If the option is true walker will not\n\t\t * return a parent node of the start position. If this option is `true` each {@link module:engine/model/element~Element} will\n\t\t * be returned once, while if the option is `false` they might be returned twice:\n\t\t * for `'elementStart'` and `'elementEnd'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#ignoreElementEnd\n\t\t */\n\t\tthis.ignoreElementEnd = !!options.ignoreElementEnd;\n\n\t\t/**\n\t\t * Start boundary cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element} module:engine/model/treewalker~TreeWalker#_boundaryStartParent\n\t\t */\n\t\tthis._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null;\n\n\t\t/**\n\t\t * End boundary cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element} module:engine/model/treewalker~TreeWalker#_boundaryEndParent\n\t\t */\n\t\tthis._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;\n\n\t\t/**\n\t\t * Parent of the most recently visited node. Cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t\t * module:engine/model/treewalker~TreeWalker#_visitedParent\n\t\t */\n\t\tthis._visitedParent = this.position.parent;\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<module:engine/model/treewalker~TreeWalkerValue>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves {@link #position} in the {@link #direction} skipping values as long as the callback function returns `true`.\n\t *\n\t * For example:\n\t *\n\t * \t\twalker.skip( value => value.type == 'text' ); // <paragraph>[]foo</paragraph> -> <paragraph>foo[]</paragraph>\n\t * \t\twalker.skip( () => true ); // Move the position to the end: <paragraph>[]foo</paragraph> -> <paragraph>foo</paragraph>[]\n\t * \t\twalker.skip( () => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/model/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t */\n\tskip( skip ) {\n\t\tlet done, value, prevPosition, prevVisitedParent;\n\n\t\tdo {\n\t\t\tprevPosition = this.position;\n\t\t\tprevVisitedParent = this._visitedParent;\n\n\t\t\t( { done, value } = this.next() );\n\t\t} while ( !done && skip( value ) );\n\n\t\tif ( !done ) {\n\t\t\tthis.position = prevPosition;\n\t\t\tthis._visitedParent = prevVisitedParent;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the next tree walker's value.\n\t *\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} Next tree walker's value.\n\t */\n\tnext() {\n\t\tif ( this.direction == 'forward' ) {\n\t\t\treturn this._next();\n\t\t} else {\n\t\t\treturn this._previous();\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step forward in model. Moves the {@link #position} to the next position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_next() {\n\t\tconst previousPosition = this.position;\n\t\tconst position = this.position.clone();\n\t\tconst parent = this._visitedParent;\n\n\t\t// We are at the end of the root.\n\t\tif ( parent.parent === null && position.offset === parent.maxOffset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent === this._boundaryEndParent && position.offset == this.boundaries.end.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\tconst node = position.textNode ? position.textNode : position.nodeAfter;\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\t// Manual operations on path internals for optimization purposes. Here and in the rest of the method.\n\t\t\t\tposition.path.push( 0 );\n\t\t\t\tthis._visitedParent = node;\n\t\t\t} else {\n\t\t\t\tposition.offset++;\n\t\t\t}\n\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t} else if ( node instanceof Text ) {\n\t\t\tlet charactersCount;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tcharactersCount = 1;\n\t\t\t} else {\n\t\t\t\tlet offset = node.endOffset;\n\n\t\t\t\tif ( this._boundaryEndParent == parent && this.boundaries.end.offset < offset ) {\n\t\t\t\t\toffset = this.boundaries.end.offset;\n\t\t\t\t}\n\n\t\t\t\tcharactersCount = offset - position.offset;\n\t\t\t}\n\n\t\t\tconst offsetInTextNode = position.offset - node.startOffset;\n\t\t\tconst item = new TextProxy( node, offsetInTextNode, charactersCount );\n\n\t\t\tposition.offset += charactersCount;\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the end of current `parent`.\n\t\t\tposition.path.pop();\n\t\t\tposition.offset++;\n\t\t\tthis.position = position;\n\t\t\tthis._visitedParent = parent.parent;\n\n\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\treturn formatReturnValue( 'elementEnd', parent, previousPosition, position );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step backward in model. Moves the {@link #position} to the previous position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_previous() {\n\t\tconst previousPosition = this.position;\n\t\tconst position = this.position.clone();\n\t\tconst parent = this._visitedParent;\n\n\t\t// We are at the beginning of the root.\n\t\tif ( parent.parent === null && position.offset === 0 ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent == this._boundaryStartParent && position.offset == this.boundaries.start.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just before current position\n\t\tconst node = position.textNode ? position.textNode : position.nodeBefore;\n\n\t\tif ( node instanceof Element ) {\n\t\t\tposition.offset--;\n\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition.path.push( node.maxOffset );\n\t\t\t\tthis.position = position;\n\t\t\t\tthis._visitedParent = node;\n\n\t\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\t\treturn this._previous();\n\t\t\t\t} else {\n\t\t\t\t\treturn formatReturnValue( 'elementEnd', node, previousPosition, position );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t\t}\n\t\t} else if ( node instanceof Text ) {\n\t\t\tlet charactersCount;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tcharactersCount = 1;\n\t\t\t} else {\n\t\t\t\tlet offset = node.startOffset;\n\n\t\t\t\tif ( this._boundaryStartParent == parent && this.boundaries.start.offset > offset ) {\n\t\t\t\t\toffset = this.boundaries.start.offset;\n\t\t\t\t}\n\n\t\t\t\tcharactersCount = position.offset - offset;\n\t\t\t}\n\n\t\t\tconst offsetInTextNode = position.offset - node.startOffset;\n\t\t\tconst item = new TextProxy( node, offsetInTextNode - charactersCount, charactersCount );\n\n\t\t\tposition.offset -= charactersCount;\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the beginning of current `parent`.\n\t\t\tposition.path.pop();\n\t\t\tthis.position = position;\n\t\t\tthis._visitedParent = parent.parent;\n\n\t\t\treturn formatReturnValue( 'elementStart', parent, previousPosition, position, 1 );\n\t\t}\n\t}\n}\n\nfunction formatReturnValue( type, item, previousPosition, nextPosition, length ) {\n\treturn {\n\t\tdone: false,\n\t\tvalue: {\n\t\t\ttype,\n\t\t\titem,\n\t\t\tpreviousPosition,\n\t\t\tnextPosition,\n\t\t\tlength\n\t\t}\n\t};\n}\n\n/**\n * Type of the step made by {@link module:engine/model/treewalker~TreeWalker}.\n * Possible values: `'elementStart'` if walker is at the beginning of a node, `'elementEnd'` if walker is at the end of node,\n * `'character'` if walker traversed over a character, or `'text'` if walker traversed over multiple characters (available in\n * character merging mode, see {@link module:engine/model/treewalker~TreeWalker#constructor}).\n *\n * @typedef {'elementStart'|'elementEnd'|'character'|'text'} module:engine/model/treewalker~TreeWalkerValueType\n */\n\n/**\n * Object returned by {@link module:engine/model/treewalker~TreeWalker} when traversing tree model.\n *\n * @typedef {Object} module:engine/model/treewalker~TreeWalkerValue\n * @property {module:engine/model/treewalker~TreeWalkerValueType} type\n * @property {module:engine/model/item~Item} item Item between old and new positions of {@link module:engine/model/treewalker~TreeWalker}.\n * @property {module:engine/model/position~Position} previousPosition Previous position of the iterator.\n * * Forward iteration: For `'elementEnd'` it is the last position inside the element. For all other types it is the\n * position before the item.\n * * Backward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after item.\n * @property {module:engine/model/position~Position} nextPosition Next position of the iterator.\n * * Forward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after the item.\n * * Backward iteration: For `'elementEnd'` it is last position inside element. For all other types it is the position\n * before the item.\n * @property {Number} [length] Length of the item. For `'elementStart'` and `'character'` it is 1. For `'text'` it is\n * the length of the text. For `'elementEnd'` it is `undefined`.\n */\n\n/**\n * Tree walking directions.\n *\n * @typedef {'forward'|'backward'} module:engine/view/treewalker~TreeWalkerDirection\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/domeventobserver\n */\n\nimport Observer from './observer';\nimport DomEventData from './domeventdata';\n\n/**\n * Base class for DOM event observers. This class handles\n * {@link module:engine/view/observer/observer~Observer#observe adding} listeners to DOM elements,\n * {@link module:engine/view/observer/observer~Observer#disable disabling} and\n * {@link module:engine/view/observer/observer~Observer#enable re-enabling} events.\n * Child class needs to define\n * {@link module:engine/view/observer/domeventobserver~DomEventObserver#domEventType DOM event type} and\n * {@link module:engine/view/observer/domeventobserver~DomEventObserver#onDomEvent callback}.\n *\n * For instance:\n *\n *\t\tclass ClickObserver extends DomEventObserver {\n *\t\t\t// It can also be defined as a normal property in the constructor.\n *\t\t\tget domEventType() {\n *\t\t\t\treturn 'click';\n *\t\t\t}\n *\n *\t\t\tonDomEvent( domEvent ) {\n *\t\t\t\tthis.fire( 'click', domEvent );\n *\t\t\t}\n *\t\t}\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class DomEventObserver extends Observer {\n\t/**\n\t * Type of the DOM event the observer should listen on. Array of types can be defined\n\t * if the obsever should listen to multiple DOM events.\n\t *\n\t * @readonly\n\t * @member {String|Array.<String>} #domEventType\n\t */\n\n\t/**\n\t * Callback which should be called when the DOM event occurred. Note that the callback will not be called if\n\t * observer {@link #isEnabled is not enabled}.\n\t *\n\t * @see #domEventType\n\t * @abstract\n\t * @method #onDomEvent\n\t */\n\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * If set to `true` DOM events will be listened on the capturing phase.\n\t\t * Default value is `false`.\n\t\t *\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.useCapture = false;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tconst types = typeof this.domEventType == 'string' ? [ this.domEventType ] : this.domEventType;\n\n\t\ttypes.forEach( type => {\n\t\t\tthis.listenTo( domElement, type, ( eventInfo, domEvent ) => {\n\t\t\t\tif ( this.isEnabled ) {\n\t\t\t\t\tthis.onDomEvent( domEvent );\n\t\t\t\t}\n\t\t\t}, { useCapture: this.useCapture } );\n\t\t} );\n\t}\n\n\t/**\n\t * Calls `Document#fire()` if observer {@link #isEnabled is enabled}.\n\t *\n\t * @see module:utils/emittermixin~EmitterMixin#fire\n\t * @param {String} eventType The event type (name).\n\t * @param {Event} domEvent The DOM event.\n\t * @param {Object} [additionalData] The additional data which should extend the\n\t * {@link module:engine/view/observer/domeventdata~DomEventData event data} object.\n\t */\n\tfire( eventType, domEvent, additionalData ) {\n\t\tif ( this.isEnabled ) {\n\t\t\tthis.document.fire( eventType, new DomEventData( this.view, domEvent, additionalData ) );\n\t\t}\n\t}\n}\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module upload/filereader\n */\n\n/* globals window */\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Wrapper over the native `FileReader`.\n */\nexport default class FileReader {\n\t/**\n\t * Creates an instance of the FileReader.\n\t */\n\tconstructor() {\n\t\tconst reader = new window.FileReader();\n\n\t\t/**\n\t\t * Instance of native FileReader.\n\t\t *\n\t\t * @private\n\t\t * @member {FileReader} #_reader\n\t\t */\n\t\tthis._reader = reader;\n\n\t\t/**\n\t\t * Number of bytes loaded.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Number} #loaded\n\t\t */\n\t\tthis.set( 'loaded', 0 );\n\n\t\treader.onprogress = evt => {\n\t\t\tthis.loaded = evt.loaded;\n\t\t};\n\t}\n\n\t/**\n\t * Returns error that occurred during file reading.\n\t *\n\t * @returns {Error}\n\t */\n\tget error() {\n\t\treturn this._reader.error;\n\t}\n\n\t/**\n\t * Reads the provided file.\n\t *\n\t * @param {File} file Native File object.\n\t * @returns {Promise.<String>} Returns a promise that will be resolved with file's content.\n\t * The promise will be rejected in case of an error or when the reading process is aborted.\n\t */\n\tread( file ) {\n\t\tconst reader = this._reader;\n\t\tthis.total = file.size;\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\treader.onload = () => {\n\t\t\t\tresolve( reader.result );\n\t\t\t};\n\n\t\t\treader.onerror = () => {\n\t\t\t\treject( 'error' );\n\t\t\t};\n\n\t\t\treader.onabort = () => {\n\t\t\t\treject( 'aborted' );\n\t\t\t};\n\n\t\t\tthis._reader.readAsDataURL( file );\n\t\t} );\n\t}\n\n\t/**\n\t * Aborts file reader.\n\t */\n\tabort() {\n\t\tthis._reader.abort();\n\t}\n}\n\nmix( FileReader, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module upload/filerepository\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport PendingActions from '@ckeditor/ckeditor5-core/src/pendingactions';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\nimport FileReader from './filereader.js';\nimport uid from '@ckeditor/ckeditor5-utils/src/uid.js';\n/**\n * File repository plugin. A central point for managing file upload.\n *\n * To use it, first you need an upload adapter. Upload adapter's job is to handle communication with the server\n * (sending the file and handling server's response). You can use one of the existing plugins introducing upload adapters\n * (e.g. {@link module:easy-image/cloudservicesuploadadapter~CloudServicesUploadAdapter} or\n * {@link module:adapter-ckfinder/uploadadapter~CKFinderUploadAdapter}) or write your own one – see\n * the {@glink framework/guides/deep-dive/upload-adapter \"Custom image upload adapter\" deep dive guide}.\n *\n * Then, you can use {@link module:upload/filerepository~FileRepository#createLoader `createLoader()`} and the returned\n * {@link module:upload/filerepository~FileLoader} instance to load and upload files.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class FileRepository extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'FileRepository';\n    }\n    /**\n\t * @inheritDoc\n\t */\n    static get requires() {\n        return [PendingActions];\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        /**\n\t\t * Collection of loaders associated with this repository.\n\t\t *\n\t\t * @member {module:utils/collection~Collection} #loaders\n\t\t */\n        this.loaders = new Collection();\n        // Keeps upload in a sync with pending actions.\n        this.loaders.on('add', () => this._updatePendingAction());\n        this.loaders.on('remove', () => this._updatePendingAction());\n        /**\n\t\t * Loaders mappings used to retrieve loaders references.\n\t\t *\n\t\t * @private\n\t\t * @member {Map<File|Promise, FileLoader>} #_loadersMap\n\t\t */\n        this._loadersMap = new Map();\n        /**\n\t\t * Reference to a pending action registered in a {@link module:core/pendingactions~PendingActions} plugin\n\t\t * while upload is in progress. When there is no upload then value is `null`.\n\t\t *\n\t\t * @private\n\t\t * @member {Object} #_pendingAction\n\t\t */\n        this._pendingAction = null;\n        /**\n\t\t * A factory function which should be defined before using `FileRepository`.\n\t\t *\n\t\t * It should return a new instance of {@link module:upload/filerepository~UploadAdapter} that will be used to upload files.\n\t\t * {@link module:upload/filerepository~FileLoader} instance associated with the adapter\n\t\t * will be passed to that function.\n\t\t *\n\t\t * For more information and example see {@link module:upload/filerepository~UploadAdapter}.\n\t\t *\n\t\t * @member {Function} #createUploadAdapter\n\t\t */\n        /**\n\t\t * Number of bytes uploaded.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Number} #uploaded\n\t\t */\n        this.set('uploaded', 0);\n        /**\n\t\t * Number of total bytes to upload.\n\t\t *\n\t\t * It might be different than the file size because of headers and additional data.\n\t\t * It contains `null` if value is not available yet, so it's better to use {@link #uploadedPercent} to monitor\n\t\t * the progress.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Number|null} #uploadTotal\n\t\t */\n        this.set('uploadTotal', null);\n        /**\n\t\t * Upload progress in percents.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Number} #uploadedPercent\n\t\t */\n        this.bind('uploadedPercent').to(this, 'uploaded', this, 'uploadTotal', (uploaded, total) => {\n            return total ? uploaded / total * 100 : 0;\n        });\n    }\n    /**\n\t * Returns the loader associated with specified file or promise.\n\t *\n\t * To get loader by id use `fileRepository.loaders.get( id )`.\n\t *\n\t * @param {File|Promise.<File>} fileOrPromise Native file or promise handle.\n\t * @returns {module:upload/filerepository~FileLoader|null}\n\t */\n    getLoader(fileOrPromise) {\n        return this._loadersMap.get(fileOrPromise) || null;\n    }\n    /**\n\t * Creates a loader instance for the given file.\n\t *\n\t * Requires {@link #createUploadAdapter} factory to be defined.\n\t *\n\t * @param {File|Promise.<File>} fileOrPromise Native File object or native Promise object which resolves to a File.\n\t * @returns {module:upload/filerepository~FileLoader|null}\n\t */\n    createLoader(fileOrPromise) {\n        if (!this.createUploadAdapter) {\n            /**\n\t\t\t * You need to enable an upload adapter in order to be able to upload files.\n\t\t\t *\n\t\t\t * This warning shows up when {@link module:upload/filerepository~FileRepository} is being used\n\t\t\t * without {@link #createUploadAdapter definining an upload adapter}.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the {@glink builds/index CKEditor 5 Builds}**\n\t\t\t * it means that you did not configure any of the upload adapters available by default in those builds.\n\t\t\t *\n\t\t\t * See the {@glink features/image-upload/image-upload comprehensive \"Image upload overview\"} to learn which upload\n\t\t\t * adapters are available in the builds and how to configure them.\n\t\t\t *\n\t\t\t * **If you see this warning when using a custom build** there is a chance that you enabled\n\t\t\t * a feature like {@link module:image/imageupload~ImageUpload},\n\t\t\t * or {@link module:image/imageupload/imageuploadui~ImageUploadUI} but you did not enable any upload adapter.\n\t\t\t * You can choose one of the existing upload adapters listed in the\n\t\t\t * {@glink features/image-upload/image-upload \"Image upload overview\"}.\n\t\t\t *\n\t\t\t * You can also implement your {@glink framework/guides/deep-dive/upload-adapter own image upload adapter}.\n\t\t\t *\n\t\t\t * @error filerepository-no-upload-adapter\n\t\t\t */\n            log.error('filerepository-no-upload-adapter: Upload adapter is not defined.');\n            return null;\n        }\n        const loader = new FileLoader(Promise.resolve(fileOrPromise), this.createUploadAdapter);\n        this.loaders.add(loader);\n        this._loadersMap.set(fileOrPromise, loader);\n        // Store also file => loader mapping so loader can be retrieved by file instance returned upon Promise resolution.\n        if (fileOrPromise instanceof Promise) {\n            loader.file.then(file => {\n                this._loadersMap.set(file, loader);\n            });\n        }\n        // Catch the file promise rejection. If there are no `catch` clause, the browser\n        // will throw an error (see https://github.com/ckeditor/ckeditor5-upload/pull/90).\n        loader.file.catch(() => {\n        });\n        loader.on('change:uploaded', () => {\n            let aggregatedUploaded = 0;\n            for (const loader of this.loaders) {\n                aggregatedUploaded += loader.uploaded;\n            }\n            this.uploaded = aggregatedUploaded;\n        });\n        loader.on('change:uploadTotal', () => {\n            let aggregatedTotal = 0;\n            for (const loader of this.loaders) {\n                if (loader.uploadTotal) {\n                    aggregatedTotal += loader.uploadTotal;\n                }\n            }\n            this.uploadTotal = aggregatedTotal;\n        });\n        return loader;\n    }\n    /**\n\t * Destroys the given loader.\n\t *\n\t * @param {File|Promise|module:upload/filerepository~FileLoader} fileOrPromiseOrLoader File or Promise associated\n\t * with that loader or loader itself.\n\t */\n    destroyLoader(fileOrPromiseOrLoader) {\n        const loader = fileOrPromiseOrLoader instanceof FileLoader ? fileOrPromiseOrLoader : this.getLoader(fileOrPromiseOrLoader);\n        loader._destroy();\n        this.loaders.remove(loader);\n        this._loadersMap.forEach((value, key) => {\n            if (value === loader) {\n                this._loadersMap.delete(key);\n            }\n        });\n    }\n    /**\n\t * Registers or deregisters pending action bound with upload progress.\n\t *\n\t * @private\n\t */\n    _updatePendingAction() {\n        const pendingActions = this.editor.plugins.get(PendingActions);\n        if (this.loaders.length) {\n            if (!this._pendingAction) {\n                const t = this.editor.t;\n                const getMessage = value => `${ t('Upload in progress') } ${ parseInt(value) }%.`;\n                this._pendingAction = pendingActions.add(getMessage(this.uploadedPercent));\n                this._pendingAction.bind('message').to(this, 'uploadedPercent', getMessage);\n            }\n        } else {\n            pendingActions.remove(this._pendingAction);\n            this._pendingAction = null;\n        }\n    }\n}\nmix(FileRepository, ObservableMixin);\n/**\n * File loader class.\n *\n * It is used to control the process of reading the file and uploading it using the specified upload adapter.\n */\nclass FileLoader {\n    /**\n\t * Creates a new instance of `FileLoader`.\n\t *\n\t * @param {Promise.<File>} filePromise A promise which resolves to a file instance.\n\t * @param {Function} uploadAdapterCreator The function which returns {@link module:upload/filerepository~UploadAdapter} instance.\n\t */\n    constructor(filePromise, uploadAdapterCreator) {\n        /**\n\t\t * Unique id of FileLoader instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n        this.id = uid();\n        /**\n\t\t * Additional wrapper over the initial file promise passed to this loader.\n\t\t *\n\t\t * @private\n\t\t * @member {module:upload/filerepository~FilePromiseWrapper}\n\t\t */\n        this._filePromiseWrapper = this._createFilePromiseWrapper(filePromise);\n        /**\n\t\t * Adapter instance associated with this file loader.\n\t\t *\n\t\t * @private\n\t\t * @member {module:upload/filerepository~UploadAdapter}\n\t\t */\n        this._adapter = uploadAdapterCreator(this);\n        /**\n\t\t * FileReader used by FileLoader.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:upload/filereader~FileReader}\n\t\t */\n        this._reader = new FileReader();\n        /**\n\t\t * Current status of FileLoader. It can be one of the following:\n\t\t *\n\t\t * * 'idle',\n\t\t * * 'reading',\n\t\t * * 'uploading',\n\t\t * * 'aborted',\n\t\t * * 'error'.\n\t\t *\n\t\t * When reading status can change in a following way:\n\t\t *\n\t\t * `idle` -> `reading` -> `idle`\n\t\t * `idle` -> `reading -> `aborted`\n\t\t * `idle` -> `reading -> `error`\n\t\t *\n\t\t * When uploading status can change in a following way:\n\t\t *\n\t\t * `idle` -> `uploading` -> `idle`\n\t\t * `idle` -> `uploading` -> `aborted`\n\t\t * `idle` -> `uploading` -> `error`\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {String} #status\n\t\t */\n        this.set('status', 'idle');\n        /**\n\t\t * Number of bytes uploaded.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Number} #uploaded\n\t\t */\n        this.set('uploaded', 0);\n        /**\n\t\t * Number of total bytes to upload.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Number|null} #uploadTotal\n\t\t */\n        this.set('uploadTotal', null);\n        /**\n\t\t * Upload progress in percents.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Number} #uploadedPercent\n\t\t */\n        this.bind('uploadedPercent').to(this, 'uploaded', this, 'uploadTotal', (uploaded, total) => {\n            return total ? uploaded / total * 100 : 0;\n        });\n        /**\n\t\t * Response of the upload.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Object|null} #uploadResponse\n\t\t */\n        this.set('uploadResponse', null);\n    }\n    /**\n\t * A `Promise` which resolves to a `File` instance associated with this file loader.\n\t *\n\t * @type {Promise.<File|null>}\n\t */\n    get file() {\n        if (!this._filePromiseWrapper) {\n            // Loader was destroyed, return promise which resolves to null.\n            return Promise.resolve(null);\n        } else {\n            // The `this._filePromiseWrapper.promise` is chained and not simply returned to handle a case when:\n            //\n            //\t\t* The `loader.file.then( ... )` is called by external code (returned promise is pending).\n            //\t\t* Then `loader._destroy()` is called (call is synchronous) which destroys the `loader`.\n            //\t\t* Promise returned by the first `loader.file.then( ... )` call is resolved.\n            //\n            // Returning `this._filePromiseWrapper.promise` will still resolve to a `File` instance so there\n            // is an additional check needed in the chain to see if `loader` was destroyed in the meantime.\n            return this._filePromiseWrapper.promise.then(file => this._filePromiseWrapper ? file : null);\n        }\n    }\n    /**\n\t * Reads file using {@link module:upload/filereader~FileReader}.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `filerepository-read-wrong-status` when status\n\t * is different than `idle`.\n\t *\n\t * Example usage:\n\t *\n\t *\tfileLoader.read()\n\t *\t\t.then( data => { ... } )\n\t *\t\t.catch( err => {\n\t *\t\t\tif ( err === 'aborted' ) {\n\t *\t\t\t\tconsole.log( 'Reading aborted.' );\n\t *\t\t\t} else {\n\t *\t\t\t\tconsole.log( 'Reading error.', err );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * @returns {Promise.<String>} Returns promise that will be resolved with read data. Promise will be rejected if error\n\t * occurs or if read process is aborted.\n\t */\n    read() {\n        if (this.status != 'idle') {\n            throw new CKEditorError('filerepository-read-wrong-status: You cannot call read if the status is different than idle.', this);\n        }\n        this.status = 'reading';\n        return this._filePromiseWrapper.promise.then(file => this._reader.read(file)).then(data => {\n            this.status = 'idle';\n            return data;\n        }).catch(err => {\n            if (err === 'aborted') {\n                this.status = 'aborted';\n                throw 'aborted';\n            }\n            this.status = 'error';\n            throw this._reader.error ? this._reader.error : err;\n        });\n    }\n    /**\n\t * Reads file using the provided {@link module:upload/filerepository~UploadAdapter}.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `filerepository-upload-wrong-status` when status\n\t * is different than `idle`.\n\t * Example usage:\n\t *\n\t *\tfileLoader.upload()\n\t *\t\t.then( data => { ... } )\n\t *\t\t.catch( e => {\n\t *\t\t\tif ( e === 'aborted' ) {\n\t *\t\t\t\tconsole.log( 'Uploading aborted.' );\n\t *\t\t\t} else {\n\t *\t\t\t\tconsole.log( 'Uploading error.', e );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * @returns {Promise.<Object>} Returns promise that will be resolved with response data. Promise will be rejected if error\n\t * occurs or if read process is aborted.\n\t */\n    upload() {\n        if (this.status != 'idle') {\n            throw new CKEditorError('filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.', this);\n        }\n        this.status = 'uploading';\n        return this._filePromiseWrapper.promise.then(() => this._adapter.upload()).then(data => {\n            this.uploadResponse = data;\n            this.status = 'idle';\n            return data;\n        }).catch(err => {\n            if (this.status === 'aborted') {\n                throw 'aborted';\n            }\n            this.status = 'error';\n            throw err;\n        });\n    }\n    /**\n\t * Aborts loading process.\n\t */\n    abort() {\n        const status = this.status;\n        this.status = 'aborted';\n        if (!this._filePromiseWrapper.isFulfilled) {\n            this._filePromiseWrapper.rejecter('aborted');\n        } else if (status == 'reading') {\n            this._reader.abort();\n        } else if (status == 'uploading' && this._adapter.abort) {\n            this._adapter.abort();\n        }\n        this._destroy();\n    }\n    /**\n\t * Performs cleanup.\n\t *\n\t * @private\n\t */\n    _destroy() {\n        this._filePromiseWrapper = undefined;\n        this._reader = undefined;\n        this._adapter = undefined;\n        this.data = undefined;\n        this.uploadResponse = undefined;\n    }\n    /**\n\t * Wraps a given file promise into another promise giving additional\n\t * control (resolving, rejecting, checking if fulfilled) over it.\n\t *\n\t * @private\n\t * @param filePromise The initial file promise to be wrapped.\n\t * @returns {module:upload/filerepository~FilePromiseWrapper}\n\t */\n    _createFilePromiseWrapper(filePromise) {\n        const wrapper = {};\n        wrapper.promise = new Promise((resolve, reject) => {\n            wrapper.resolver = resolve;\n            wrapper.rejecter = reject;\n            wrapper.isFulfilled = false;\n            filePromise.then(file => {\n                wrapper.isFulfilled = true;\n                resolve(file);\n            }).catch(err => {\n                wrapper.isFulfilled = true;\n                reject(err);\n            });\n        });\n        return wrapper;\n    }\n}\nmix(FileLoader, ObservableMixin);    /**\n * Upload adapter interface used by the {@link module:upload/filerepository~FileRepository file repository}\n * to handle file upload. An upload adapter is a bridge between the editor and server that handles file uploads.\n * It should contain a logic necessary to initiate an upload process and monitor its progress.\n *\n * Learn how to develop your own upload adapter for CKEditor 5 in the\n * {@glink framework/guides/deep-dive/upload-adapter \"Custom upload adapter\" guide}.\n *\n * @interface UploadAdapter\n */\n                                     /**\n * Executes the upload process.\n * This method should return a promise that will resolve when data will be uploaded to server. Promise should be\n * resolved with an object containing information about uploaded file:\n *\n *\t\t{\n *\t\t\tdefault: 'http://server/default-size.image.png'\n *\t\t}\n *\n * Additionally, other image sizes can be provided:\n *\n *\t\t{\n *\t\t\tdefault: 'http://server/default-size.image.png',\n *\t\t\t'160': 'http://server/size-160.image.png',\n *\t\t\t'500': 'http://server/size-500.image.png',\n *\t\t\t'1000': 'http://server/size-1000.image.png',\n *\t\t\t'1052': 'http://server/default-size.image.png'\n *\t\t}\n *\n * NOTE: When returning multiple images, the widest returned one should equal the default one. It is essential to\n * correctly set `width` attribute of the image. See this discussion:\n * https://github.com/ckeditor/ckeditor5-easy-image/issues/4 for more information.\n *\n * Take a look at {@link module:upload/filerepository~UploadAdapter example Adapter implementation} and\n * {@link module:upload/filerepository~FileRepository#createUploadAdapter createUploadAdapter method}.\n *\n * @method module:upload/filerepository~UploadAdapter#upload\n * @returns {Promise.<Object>} Promise that should be resolved when data is uploaded.\n */\n                                     /**\n * Aborts the upload process.\n * After aborting it should reject promise returned from {@link #upload upload()}.\n *\n * Take a look at {@link module:upload/filerepository~UploadAdapter example Adapter implementation} and\n * {@link module:upload/filerepository~FileRepository#createUploadAdapter createUploadAdapter method}.\n *\n * @method module:upload/filerepository~UploadAdapter#abort\n */\n                                     /**\n * Object returned by {@link module:upload/filerepository~FileLoader#_createFilePromiseWrapper} method\n * to add more control over the initial file promise passed to {@link module:upload/filerepository~FileLoader}.\n *\n * @typedef {Object} module:upload/filerepository~FilePromiseWrapper\n * @property {Promise.<File>} promise Wrapper promise which can be chained for further processing.\n * @property {Function} resolver Resolves the promise when called.\n * @property {Function} rejecter Rejects the promise when called.\n * @property {Boolean} isFulfilled Whether original promise is already fulfilled.\n */","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/textproxy\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * TextProxy is a wrapper for substring of {@link module:engine/view/text~Text}. Instance of this class is created by\n * {@link module:engine/view/treewalker~TreeWalker} when only a part of {@link module:engine/view/text~Text} needs to be returned.\n *\n * `TextProxy` has an API similar to {@link module:engine/view/text~Text Text} and allows to do most of the common tasks performed\n * on view nodes.\n *\n * **Note:** Some `TextProxy` instances may represent whole text node, not just a part of it.\n * See {@link module:engine/view/textproxy~TextProxy#isPartial}.\n *\n * **Note:** `TextProxy` is a readonly interface.\n *\n * **Note:** `TextProxy` instances are created on the fly basing on the current state of parent {@link module:engine/view/text~Text}.\n * Because of this it is highly unrecommended to store references to `TextProxy instances because they might get\n * invalidated due to operations on Document. Also TextProxy is not a {@link module:engine/view/node~Node} so it can not be\n * inserted as a child of {@link module:engine/view/element~Element}.\n *\n * `TextProxy` instances are created by {@link module:engine/view/treewalker~TreeWalker view tree walker}. You should not need to create\n * an instance of this class by your own.\n */\nexport default class TextProxy {\n\t/**\n\t * Creates a text proxy.\n\t *\n\t * @protected\n\t * @param {module:engine/view/text~Text} textNode Text node which part is represented by this text proxy.\n\t * @param {Number} offsetInText Offset in {@link module:engine/view/textproxy~TextProxy#textNode text node}\n\t * from which the text proxy starts.\n\t * @param {Number} length Text proxy length, that is how many text node's characters, starting from `offsetInText` it represents.\n\t * @constructor\n\t */\n\tconstructor( textNode, offsetInText, length ) {\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/text~Text} element which TextProxy is a substring.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/text~Text} module:engine/view/textproxy~TextProxy#textNode\n\t\t */\n\t\tthis.textNode = textNode;\n\n\t\tif ( offsetInText < 0 || offsetInText > textNode.data.length ) {\n\t\t\t/**\n\t\t\t * Given offsetInText value is incorrect.\n\t\t\t *\n\t\t\t * @error view-textproxy-wrong-offsetintext\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.', this );\n\t\t}\n\n\t\tif ( length < 0 || offsetInText + length > textNode.data.length ) {\n\t\t\t/**\n\t\t\t * Given length value is incorrect.\n\t\t\t *\n\t\t\t * @error view-textproxy-wrong-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-textproxy-wrong-length: Given length value is incorrect.', this );\n\t\t}\n\n\t\t/**\n\t\t * Text data represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} module:engine/view/textproxy~TextProxy#data\n\t\t */\n\t\tthis.data = textNode.data.substring( offsetInText, offsetInText + length );\n\n\t\t/**\n\t\t * Offset in the `textNode` where this `TextProxy` instance starts.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} module:engine/view/textproxy~TextProxy#offsetInText\n\t\t */\n\t\tthis.offsetInText = offsetInText;\n\t}\n\n\t/**\n\t * Offset size of this node.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Flag indicating whether `TextProxy` instance covers only part of the original {@link module:engine/view/text~Text text node}\n\t * (`true`) or the whole text node (`false`).\n\t *\n\t * This is `false` when text proxy starts at the very beginning of {@link module:engine/view/textproxy~TextProxy#textNode textNode}\n\t * ({@link module:engine/view/textproxy~TextProxy#offsetInText offsetInText} equals `0`) and text proxy sizes is equal to\n\t * text node size.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isPartial() {\n\t\treturn this.data.length !== this.textNode.data.length;\n\t}\n\n\t/**\n\t * Parent of this text proxy, which is same as parent of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tget parent() {\n\t\treturn this.textNode.parent;\n\t}\n\n\t/**\n\t * Root of this text proxy, which is same as root of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.textNode.root;\n\t}\n\n\t/**\n\t * {@link module:engine/view/document~Document View document} that owns this text proxy, or `null` if the text proxy is inside\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment}.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/document~Document|null}\n\t */\n\tget document() {\n\t\treturn this.textNode.document;\n\t}\n\n\t/**\n\t * Checks whether given view tree object is of given type.\n\t *\n\t * Read more in {@link module:engine/view/node~Node#is}.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'textProxy';\n\t}\n\n\t/**\n\t * Returns ancestors array of this text proxy.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` {#textNode} will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from text proxy parent to\n\t * root element, otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this.textNode : this.parent;\n\n\t\twhile ( parent !== null ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/focuscycler\n */\n\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\n\n/**\n * A utility class that helps cycling over focusable {@link module:ui/view~View views} in a\n * {@link module:ui/viewcollection~ViewCollection} when the focus is tracked by the\n * {@link module:utils/focustracker~FocusTracker} instance. It helps implementing keyboard\n * navigation in HTML forms, toolbars, lists and the like.\n *\n * To work properly it requires:\n * * a collection of focusable (HTML `tabindex` attribute) views that implement the `focus()` method,\n * * an associated focus tracker to determine which view is focused.\n *\n * A simple cycler setup can look like this:\n *\n *\t\tconst focusables = new ViewCollection();\n *\t\tconst focusTracker = new FocusTracker();\n *\n *\t\t// Add focusable views to the focus tracker.\n *\t\tfocusTracker.add( ... );\n *\n * Then, the cycler can be used manually:\n *\n *\t\tconst cycler = new FocusCycler( { focusables, focusTracker } );\n *\n *\t\t// Will focus the first focusable view in #focusables.\n *\t\tcycler.focusFirst();\n *\n *\t\t// Will log the next focusable item in #focusables.\n *\t\tconsole.log( cycler.next );\n *\n * Alternatively, it can work side by side with the {@link module:utils/keystrokehandler~KeystrokeHandler}:\n *\n *\t\tconst keystrokeHandler = new KeystrokeHandler();\n *\n *\t\t// Activate the keystroke handler.\n *\t\tkeystrokeHandler.listenTo( sourceOfEvents );\n *\n *\t\tconst cycler = new FocusCycler( {\n *\t\t\tfocusables, focusTracker, keystrokeHandler,\n *\t\t\tactions: {\n *\t\t\t\t// When arrowup of arrowleft is detected by the #keystrokeHandler,\n *\t\t\t\t// focusPrevious() will be called on the cycler.\n *\t\t\t\tfocusPrevious: [ 'arrowup', 'arrowleft' ],\n *\t\t\t}\n *\t\t} );\n */\nexport default class FocusCycler {\n\t/**\n\t * Creates an instance of the focus cycler utility.\n\t *\n\t * @param {Object} options Configuration options.\n\t * @param {module:utils/collection~Collection|Object} options.focusables\n\t * @param {module:utils/focustracker~FocusTracker} options.focusTracker\n\t * @param {module:utils/keystrokehandler~KeystrokeHandler} [options.keystrokeHandler]\n\t * @param {Object} [options.actions]\n\t */\n\tconstructor( options ) {\n\t\tObject.assign( this, options );\n\n\t\t/**\n\t\t * A {@link module:ui/view~View view} collection that the cycler operates on.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/collection~Collection} #focusables\n\t\t */\n\n\t\t/**\n\t\t * A focus tracker instance that the cycler uses to determine the current focus\n\t\t * state in {@link #focusables}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker} #focusTracker\n\t\t */\n\n\t\t/**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}\n\t\t * which can respond to certain keystrokes and cycle the focus.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler} #keystrokeHandler\n\t\t */\n\n\t\t/**\n\t\t * Actions that the cycler can take when a keystroke is pressed. Requires\n\t\t * `options.keystrokeHandler` to be passed and working. When an action is\n\t\t * performed, `preventDefault` and `stopPropagation` will be called on the event\n\t\t * the keystroke fired in the DOM.\n\t\t *\n\t\t *\t\tactions: {\n\t\t *\t\t\t// Will call #focusPrevious() when arrowleft or arrowup is pressed.\n\t\t *\t\t\tfocusPrevious: [ 'arrowleft', 'arrowup' ],\n\t\t *\n\t\t *\t\t\t// Will call #focusNext() when arrowdown is pressed.\n\t\t *\t\t\tfocusNext: 'arrowdown'\n\t\t *\t\t}\n\t\t *\n\t\t * @readonly\n\t\t * @member {Object} #actions\n\t\t */\n\n\t\tif ( options.actions && options.keystrokeHandler ) {\n\t\t\tfor ( const methodName in options.actions ) {\n\t\t\t\tlet actions = options.actions[ methodName ];\n\n\t\t\t\tif ( typeof actions == 'string' ) {\n\t\t\t\t\tactions = [ actions ];\n\t\t\t\t}\n\n\t\t\t\tfor ( const keystroke of actions ) {\n\t\t\t\t\toptions.keystrokeHandler.set( keystroke, ( data, cancel ) => {\n\t\t\t\t\t\tthis[ methodName ]();\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the first focusable view in {@link #focusables}.\n\t * Returns `null` if there is none.\n\t *\n\t * @readonly\n\t * @member {module:ui/view~View|null} #first\n\t */\n\tget first() {\n\t\treturn this.focusables.find( isFocusable ) || null;\n\t}\n\n\t/**\n\t * Returns the last focusable view in {@link #focusables}.\n\t * Returns `null` if there is none.\n\t *\n\t * @readonly\n\t * @member {module:ui/view~View|null} #last\n\t */\n\tget last() {\n\t\treturn this.focusables.filter( isFocusable ).slice( -1 )[ 0 ] || null;\n\t}\n\n\t/**\n\t * Returns the next focusable view in {@link #focusables} based on {@link #current}.\n\t * Returns `null` if there is none.\n\t *\n\t * @readonly\n\t * @member {module:ui/view~View|null} #next\n\t */\n\tget next() {\n\t\treturn this._getFocusableItem( 1 );\n\t}\n\n\t/**\n\t * Returns the previous focusable view in {@link #focusables} based on {@link #current}.\n\t * Returns `null` if there is none.\n\t *\n\t * @readonly\n\t * @member {module:ui/view~View|null} #previous\n\t */\n\tget previous() {\n\t\treturn this._getFocusableItem( -1 );\n\t}\n\n\t/**\n\t * An index of the view in the {@link #focusables} which is focused according\n\t * to {@link #focusTracker}. Returns `null` when there is no such view.\n\t *\n\t * @readonly\n\t * @member {Number|null} #current\n\t */\n\tget current() {\n\t\tlet index = null;\n\n\t\t// There's no focused view in the focusables.\n\t\tif ( this.focusTracker.focusedElement === null ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.focusables.find( ( view, viewIndex ) => {\n\t\t\tconst focused = view.element === this.focusTracker.focusedElement;\n\n\t\t\tif ( focused ) {\n\t\t\t\tindex = viewIndex;\n\t\t\t}\n\n\t\t\treturn focused;\n\t\t} );\n\n\t\treturn index;\n\t}\n\n\t/**\n\t * Focuses the {@link #first} item in {@link #focusables}.\n\t */\n\tfocusFirst() {\n\t\tthis._focus( this.first );\n\t}\n\n\t/**\n\t * Focuses the {@link #last} item in {@link #focusables}.\n\t */\n\tfocusLast() {\n\t\tthis._focus( this.last );\n\t}\n\n\t/**\n\t * Focuses the {@link #next} item in {@link #focusables}.\n\t */\n\tfocusNext() {\n\t\tthis._focus( this.next );\n\t}\n\n\t/**\n\t * Focuses the {@link #previous} item in {@link #focusables}.\n\t */\n\tfocusPrevious() {\n\t\tthis._focus( this.previous );\n\t}\n\n\t/**\n\t * Focuses the given view if it exists.\n\t *\n\t * @protected\n\t * @param {module:ui/view~View} view\n\t */\n\t_focus( view ) {\n\t\tif ( view ) {\n\t\t\tview.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Returns the next or previous focusable view in {@link #focusables} with respect\n\t * to {@link #current}.\n\t *\n\t * @protected\n\t * @param {Number} step Either `1` for checking forward from {@link #current} or\n\t * `-1` for checking backwards.\n\t * @returns {module:ui/view~View|null}\n\t */\n\t_getFocusableItem( step ) {\n\t\t// Cache for speed.\n\t\tconst current = this.current;\n\t\tconst collectionLength = this.focusables.length;\n\n\t\tif ( !collectionLength ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Start from the beginning if no view is focused.\n\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/206\n\t\tif ( current === null ) {\n\t\t\treturn this[ step === 1 ? 'first' : 'last' ];\n\t\t}\n\n\t\t// Cycle in both directions.\n\t\tlet index = ( current + collectionLength + step ) % collectionLength;\n\n\t\tdo {\n\t\t\tconst view = this.focusables.get( index );\n\n\t\t\t// TODO: Check if view is visible.\n\t\t\tif ( isFocusable( view ) ) {\n\t\t\t\treturn view;\n\t\t\t}\n\n\t\t\t// Cycle in both directions.\n\t\t\tindex = ( index + collectionLength + step ) % collectionLength;\n\t\t} while ( index !== current );\n\n\t\treturn null;\n\t}\n}\n\n// Checks whether a view is focusable.\n//\n// @private\n// @param {module:ui/view~View} view A view to be checked.\n// @returns {Boolean}\nfunction isFocusable( view ) {\n\treturn !!( view.focus && global.window.getComputedStyle( view.element ).display != 'none' );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/matcher\n */\n\n/**\n * View matcher class.\n * Instance of this class can be used to find {@link module:engine/view/element~Element elements} that match given pattern.\n */\nexport default class Matcher {\n\t/**\n\t * Creates new instance of Matcher.\n\t *\n\t * @param {String|RegExp|Object} [pattern] Match patterns. See {@link module:engine/view/matcher~Matcher#add add method} for\n\t * more information.\n\t */\n\tconstructor( ...pattern ) {\n\t\t/**\n\t\t * @private\n\t\t * @type {Array<String|RegExp|Object>}\n\t\t */\n\t\tthis._patterns = [];\n\n\t\tthis.add( ...pattern );\n\t}\n\n\t/**\n\t * Adds pattern or patterns to matcher instance.\n\t *\n\t *\t\t// String.\n\t *\t\tmatcher.add( 'div' );\n\t *\n\t *\t\t// Regular expression.\n\t *\t\tmatcher.add( /^\\w/ );\n\t *\n\t *\t\t// Single class.\n\t *\t\tmatcher.add( {\n\t *\t\t\tclasses: 'foobar'\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/view/matcher~MatcherPattern} for more examples.\n\t *\n\t * Multiple patterns can be added in one call:\n\t *\n\t * \t\tmatcher.add( 'div', { classes: 'foobar' } );\n\t *\n\t * @param {Object|String|RegExp|Function} pattern Object describing pattern details. If string or regular expression\n\t * is provided it will be used to match element's name. Pattern can be also provided in a form\n\t * of a function - then this function will be called with each {@link module:engine/view/element~Element element} as a parameter.\n\t * Function's return value will be stored under `match` key of the object returned from\n\t * {@link module:engine/view/matcher~Matcher#match match} or {@link module:engine/view/matcher~Matcher#matchAll matchAll} methods.\n\t * @param {String|RegExp} [pattern.name] Name or regular expression to match element's name.\n\t * @param {Object} [pattern.attributes] Object with key-value pairs representing attributes to match. Each object key\n\t * represents attribute name. Value under that key can be either:\n\t * * `true` - then attribute is just required (can be empty),\n\t * * a string - then attribute has to be equal, or\n\t * * a regular expression - then attribute has to match the expression.\n\t * @param {String|RegExp|Array} [pattern.classes] Class name or array of class names to match. Each name can be\n\t * provided in a form of string or regular expression.\n\t * @param {Object} [pattern.styles] Object with key-value pairs representing styles to match. Each object key\n\t * represents style name. Value under that key can be either a string or a regular expression and it will be used\n\t * to match style value.\n\t */\n\tadd( ...pattern ) {\n\t\tfor ( let item of pattern ) {\n\t\t\t// String or RegExp pattern is used as element's name.\n\t\t\tif ( typeof item == 'string' || item instanceof RegExp ) {\n\t\t\t\titem = { name: item };\n\t\t\t}\n\n\t\t\t// Single class name/RegExp can be provided.\n\t\t\tif ( item.classes && ( typeof item.classes == 'string' || item.classes instanceof RegExp ) ) {\n\t\t\t\titem.classes = [ item.classes ];\n\t\t\t}\n\n\t\t\tthis._patterns.push( item );\n\t\t}\n\t}\n\n\t/**\n\t * Matches elements for currently stored patterns. Returns match information about first found\n\t * {@link module:engine/view/element~Element element}, otherwise returns `null`.\n\t *\n\t * Example of returned object:\n\t *\n\t *\t\t{\n\t *\t\t\telement: <instance of found element>,\n\t *\t\t\tpattern: <pattern used to match found element>,\n\t *\t\t\tmatch: {\n\t *\t\t\t\tname: true,\n\t *\t\t\t\tattributes: [ 'title', 'href' ],\n\t *\t\t\t\tclasses: [ 'foo' ],\n\t *\t\t\t\tstyles: [ 'color', 'position' ]\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * @see module:engine/view/matcher~Matcher#add\n\t * @see module:engine/view/matcher~Matcher#matchAll\n\t * @param {...module:engine/view/element~Element} element View element to match against stored patterns.\n\t * @returns {Object|null} result\n\t * @returns {module:engine/view/element~Element} result.element Matched view element.\n\t * @returns {Object|String|RegExp|Function} result.pattern Pattern that was used to find matched element.\n\t * @returns {Object} result.match Object representing matched element parts.\n\t * @returns {Boolean} [result.match.name] True if name of the element was matched.\n\t * @returns {Array} [result.match.attributes] Array with matched attribute names.\n\t * @returns {Array} [result.match.classes] Array with matched class names.\n\t * @returns {Array} [result.match.styles] Array with matched style names.\n\t */\n\tmatch( ...element ) {\n\t\tfor ( const singleElement of element ) {\n\t\t\tfor ( const pattern of this._patterns ) {\n\t\t\t\tconst match = isElementMatching( singleElement, pattern );\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\telement: singleElement,\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tmatch\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Matches elements for currently stored patterns. Returns array of match information with all found\n\t * {@link module:engine/view/element~Element elements}. If no element is found - returns `null`.\n\t *\n\t * @see module:engine/view/matcher~Matcher#add\n\t * @see module:engine/view/matcher~Matcher#match\n\t * @param {...module:engine/view/element~Element} element View element to match against stored patterns.\n\t * @returns {Array.<Object>|null} Array with match information about found elements or `null`. For more information\n\t * see {@link module:engine/view/matcher~Matcher#match match method} description.\n\t */\n\tmatchAll( ...element ) {\n\t\tconst results = [];\n\n\t\tfor ( const singleElement of element ) {\n\t\t\tfor ( const pattern of this._patterns ) {\n\t\t\t\tconst match = isElementMatching( singleElement, pattern );\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\tresults.push( {\n\t\t\t\t\t\telement: singleElement,\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tmatch\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn results.length > 0 ? results : null;\n\t}\n\n\t/**\n\t * Returns the name of the element to match if there is exactly one pattern added to the matcher instance\n\t * and it matches element name defined by `string` (not `RegExp`). Otherwise, returns `null`.\n\t *\n\t * @returns {String|null} Element name trying to match.\n\t */\n\tgetElementName() {\n\t\tif ( this._patterns.length !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst pattern = this._patterns[ 0 ];\n\t\tconst name = pattern.name;\n\n\t\treturn ( typeof pattern != 'function' && name && !( name instanceof RegExp ) ) ? name : null;\n\t}\n}\n\n// Returns match information if {@link module:engine/view/element~Element element} is matching provided pattern.\n// If element cannot be matched to provided pattern - returns `null`.\n//\n// @param {module:engine/view/element~Element} element\n// @param {Object|String|RegExp|Function} pattern\n// @returns {Object|null} Returns object with match information or null if element is not matching.\nfunction isElementMatching( element, pattern ) {\n\t// If pattern is provided as function - return result of that function;\n\tif ( typeof pattern == 'function' ) {\n\t\treturn pattern( element );\n\t}\n\n\tconst match = {};\n\t// Check element's name.\n\tif ( pattern.name ) {\n\t\tmatch.name = matchName( pattern.name, element.name );\n\n\t\tif ( !match.name ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// Check element's attributes.\n\tif ( pattern.attributes ) {\n\t\tmatch.attributes = matchAttributes( pattern.attributes, element );\n\n\t\tif ( !match.attributes ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// Check element's classes.\n\tif ( pattern.classes ) {\n\t\tmatch.classes = matchClasses( pattern.classes, element );\n\n\t\tif ( !match.classes ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// Check element's styles.\n\tif ( pattern.styles ) {\n\t\tmatch.styles = matchStyles( pattern.styles, element );\n\n\t\tif ( !match.styles ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if name can be matched by provided pattern.\n//\n// @param {String|RegExp} pattern\n// @param {String} name\n// @returns {Boolean} Returns `true` if name can be matched, `false` otherwise.\nfunction matchName( pattern, name ) {\n\t// If pattern is provided as RegExp - test against this regexp.\n\tif ( pattern instanceof RegExp ) {\n\t\treturn pattern.test( name );\n\t}\n\n\treturn pattern === name;\n}\n\n// Checks if attributes of provided element can be matched against provided patterns.\n//\n// @param {Object} patterns Object with information about attributes to match. Each key of the object will be\n// used as attribute name. Value of each key can be a string or regular expression to match against attribute value.\n// @param {module:engine/view/element~Element} element Element which attributes will be tested.\n// @returns {Array|null} Returns array with matched attribute names or `null` if no attributes were matched.\nfunction matchAttributes( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const name in patterns ) {\n\t\tconst pattern = patterns[ name ];\n\n\t\tif ( element.hasAttribute( name ) ) {\n\t\t\tconst attribute = element.getAttribute( name );\n\n\t\t\tif ( pattern === true ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else if ( pattern instanceof RegExp ) {\n\t\t\t\tif ( pattern.test( attribute ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else if ( attribute === pattern ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if classes of provided element can be matched against provided patterns.\n//\n// @param {Array.<String|RegExp>} patterns Array of strings or regular expressions to match against element's classes.\n// @param {module:engine/view/element~Element} element Element which classes will be tested.\n// @returns {Array|null} Returns array with matched class names or `null` if no classes were matched.\nfunction matchClasses( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const pattern of patterns ) {\n\t\tif ( pattern instanceof RegExp ) {\n\t\t\tconst classes = element.getClassNames();\n\n\t\t\tfor ( const name of classes ) {\n\t\t\t\tif ( pattern.test( name ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( match.length === 0 ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else if ( element.hasClass( pattern ) ) {\n\t\t\tmatch.push( pattern );\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if styles of provided element can be matched against provided patterns.\n//\n// @param {Object} patterns Object with information about styles to match. Each key of the object will be\n// used as style name. Value of each key can be a string or regular expression to match against style value.\n// @param {module:engine/view/element~Element} element Element which styles will be tested.\n// @returns {Array|null} Returns array with matched style names or `null` if no styles were matched.\nfunction matchStyles( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const name in patterns ) {\n\t\tconst pattern = patterns[ name ];\n\n\t\tif ( element.hasStyle( name ) ) {\n\t\t\tconst style = element.getStyle( name );\n\n\t\t\tif ( pattern instanceof RegExp ) {\n\t\t\t\tif ( pattern.test( style ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else if ( style === pattern ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n/**\n * An entity that is a valid pattern recognized by a matcher. `MatcherPattern` is used by {@link ~Matcher} to recognize\n * if a view element fits in a group of view elements described by the pattern.\n *\n * `MatcherPattern` can be given as a `String`, a `RegExp`, an `Object` or a `Function`.\n *\n * If `MatcherPattern` is given as a `String` or `RegExp`, it will match any view element that has a matching name:\n *\n *\t\t// Match any element with name equal to 'div'.\n *\t\tconst pattern = 'div';\n *\n *\t\t// Match any element which name starts on 'p'.\n *\t\tconst pattern = /^p/;\n *\n * If `MatcherPattern` is given as an `Object`, all the object's properties will be matched with view element properties.\n *\n *\t\t// Match view element's name.\n *\t\tconst pattern = { name: /^p/ };\n *\n *\t\t// Match view element which has matching attributes.\n *\t\tconst pattern = {\n *\t\t\tattributes: {\n *\t\t\t\ttitle: 'foobar',\t// Attribute title should equal 'foobar'.\n *\t\t\t\tfoo: /^\\w+/,\t\t// Attribute foo should match /^\\w+/ regexp.\n *\t\t\t\tbar: true\t\t\t// Attribute bar should be set (can be empty).\n *\t\t\t}\n *\t\t};\n *\n *\t\t// Match view element which has given class.\n *\t\tconst pattern = {\n *\t\t\tclasses: 'foobar'\n *\t\t};\n *\n *\t\t// Match view element class using regular expression.\n *\t\tconst pattern = {\n *\t\t\tclasses: /foo.../\n *\t\t};\n *\n *\t\t// Multiple classes to match.\n *\t\tconst pattern = {\n *\t\t\tclasses: [ 'baz', 'bar', /foo.../ ]\n *\t\t};\n *\n *\t\t// Match view element which has given styles.\n *\t\tconst pattern = {\n *\t\t\tstyles: {\n *\t\t\t\tposition: 'absolute',\n *\t\t\t\tcolor: /^\\w*blue$/\n *\t\t\t}\n *\t\t};\n *\n *\t\t// Pattern with multiple properties.\n *\t\tconst pattern = {\n *\t\t\tname: 'span',\n *\t\t\tstyles: {\n *\t\t\t\t'font-weight': 'bold'\n *\t\t\t},\n *\t\t\tclasses: 'highlighted'\n *\t\t};\n *\n * If `MatcherPattern` is given as a `Function`, the function takes a view element as a first and only parameter and\n * the function should decide whether that element matches. If so, it should return what part of the view element has been matched.\n * Otherwise, the function should return `null`. The returned result will be included in `match` property of the object\n * returned by {@link ~Matcher#match} call.\n *\n *\t\t// Match an empty <div> element.\n *\t\tconst pattern = element => {\n *\t\t\tif ( element.name == 'div' && element.childCount > 0 ) {\n *\t\t\t\t// Return which part of the element was matched.\n *\t\t\t\treturn { name: true };\n *\t\t\t}\n *\n *\t\t\treturn null;\n *\t\t};\n *\n *\t\t// Match a <p> element with big font (\"heading-like\" element).\n *\t\tconst pattern = element => {\n *\t\t\tif ( element.name == 'p' ) {\n *\t\t\t\tconst fontSize = element.getStyle( 'font-size' );\n *\t\t\t\tconst size = fontSize.match( /(\\d+)/px );\n *\n *\t\t\t\tif ( size && Number( size[ 1 ] ) > 26 ) {\n *\t\t\t\t\treturn { name: true, attribute: [ 'font-size' ] };\n *\t\t\t\t}\n *\t\t\t}\n *\n *\t\t\treturn null;\n *\t\t};\n *\n * `MatcherPattern` is defined in a way that it is a superset of {@link module:engine/view/elementdefinition~ElementDefinition},\n * that is, every `ElementDefinition` also can be used as a `MatcherPattern`.\n *\n * @typedef {String|RegExp|Object|Function} module:engine/view/matcher~MatcherPattern\n *\n * @property {String|RegExp} [name] View element name to match.\n * @property {String|RegExp|Array.<String|RegExp>} [classes] View element's class name(s) to match.\n * @property {Object} [styles] Object with key-value pairs representing styles to match.\n * Each object key represents style name. Value can be given as `String` or `RegExp`.\n * @property {Object} [attributes] Object with key-value pairs representing attributes to match.\n * Each object key represents attribute name. Value can be given as `String` or `RegExp`.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/viewcollection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\n\n/**\n * Collects {@link module:ui/view~View} instances.\n *\n *\t\tconst parentView = new ParentView( locale );\n *\t\tconst collection = new ViewCollection( locale );\n *\n *\t\tcollection.setParent( parentView.element );\n *\n *\t\tconst viewA = new ChildView( locale );\n *\t\tconst viewB = new ChildView( locale );\n *\n * View collection renders and manages view {@link module:ui/view~View#element elements}:\n *\n *\t\tcollection.add( viewA );\n *\t\tcollection.add( viewB );\n *\n *\t\tconsole.log( parentView.element.firsChild ); // -> viewA.element\n *\t\tconsole.log( parentView.element.lastChild ); // -> viewB.element\n *\n * It {@link module:ui/viewcollection~ViewCollection#delegate propagates} DOM events too:\n *\n *\t\t// Delegate #click and #keydown events from viewA and viewB to the parentView.\n *\t\tcollection.delegate( 'click' ).to( parentView );\n *\n *\t\tparentView.on( 'click', ( evt ) => {\n *\t\t\tconsole.log( `${ evt.source } has been clicked.` );\n *\t\t} );\n *\n *\t\t// This event will be delegated to the parentView.\n *\t\tviewB.fire( 'click' );\n *\n * **Note**: A view collection can be used directly in the {@link module:ui/template~TemplateDefinition definition}\n * of a {@link module:ui/template~Template template}.\n *\n * @extends module:utils/collection~Collection\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class ViewCollection extends Collection {\n\t/**\n\t * Creates a new instance of the {@link module:ui/viewcollection~ViewCollection}.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The {@link module:core/editor/editor~Editor editor's locale} instance.\n\t */\n\tconstructor( locale ) {\n\t\tsuper( {\n\t\t\t// An #id Number attribute should be legal and not break the `ViewCollection` instance.\n\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/93\n\t\t\tidProperty: 'viewUid'\n\t\t} );\n\n\t\t// Handle {@link module:ui/view~View#element} in DOM when a new view is added to the collection.\n\t\tthis.on( 'add', ( evt, view, index ) => {\n\t\t\tif ( !view.isRendered ) {\n\t\t\t\tview.render();\n\t\t\t}\n\n\t\t\tif ( view.element && this._parentElement ) {\n\t\t\t\tthis._parentElement.insertBefore( view.element, this._parentElement.children[ index ] );\n\t\t\t}\n\t\t} );\n\n\t\t// Handle {@link module:ui/view~View#element} in DOM when a view is removed from the collection.\n\t\tthis.on( 'remove', ( evt, view ) => {\n\t\t\tif ( view.element && this._parentElement ) {\n\t\t\t\tview.element.remove();\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * The {@link module:core/editor/editor~Editor#locale editor's locale} instance.\n\t\t * See the view {@link module:ui/view~View#locale locale} property.\n\t\t *\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = locale;\n\n\t\t/**\n\t\t * A parent element within which child views are rendered and managed in DOM.\n\t\t *\n\t\t * @protected\n\t\t * @member {HTMLElement}\n\t\t */\n\t\tthis._parentElement = null;\n\t}\n\n\t/**\n\t * Destroys the view collection along with child views.\n\t * See the view {@link module:ui/view~View#destroy} method.\n\t */\n\tdestroy() {\n\t\tthis.map( view => view.destroy() );\n\t}\n\n\t/**\n\t * Sets the parent HTML element of this collection. When parent is set, {@link #add adding} and\n\t * {@link #remove removing} views in the collection synchronizes their\n\t * {@link module:ui/view~View#element elements} in the parent element.\n\t *\n\t * @param {HTMLElement} element A new parent element.\n\t */\n\tsetParent( elementOrDocFragment ) {\n\t\tthis._parentElement = elementOrDocFragment;\n\t}\n\n\t/**\n\t * Delegates selected events coming from within views in the collection to any\n\t * {@link module:utils/emittermixin~Emitter}.\n\t *\n\t * For the following views and collection:\n\t *\n\t *\t\tconst viewA = new View();\n\t *\t\tconst viewB = new View();\n\t *\t\tconst viewC = new View();\n\t *\n\t *\t\tconst views = parentView.createCollection();\n\t *\n\t *\t\tviews.delegate( 'eventX' ).to( viewB );\n\t *\t\tviews.delegate( 'eventX', 'eventY' ).to( viewC );\n\t *\n\t *\t\tviews.add( viewA );\n\t *\n\t * the `eventX` is delegated (fired by) `viewB` and `viewC` along with `customData`:\n\t *\n\t *\t\tviewA.fire( 'eventX', customData );\n\t *\n\t * and `eventY` is delegated (fired by) `viewC` along with `customData`:\n\t *\n\t *\t\tviewA.fire( 'eventY', customData );\n\t *\n\t * See {@link module:utils/emittermixin~EmitterMixin#delegate}.\n\t *\n\t * @param {...String} events {@link module:ui/view~View} event names to be delegated to another\n\t * {@link module:utils/emittermixin~Emitter}.\n\t * @returns {Object}\n\t * @returns {Function} return.to A function which accepts the destination of\n\t * {@link module:utils/emittermixin~EmitterMixin#delegate delegated} events.\n\t */\n\tdelegate( ...events ) {\n\t\tif ( !events.length || !isStringArray( events ) ) {\n\t\t\t/**\n\t\t\t * All event names must be strings.\n\t\t\t *\n\t\t\t * @error ui-viewcollection-delegate-wrong-events\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-viewcollection-delegate-wrong-events: All event names must be strings.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Selects destination for {@link module:utils/emittermixin~EmitterMixin#delegate} events.\n\t\t\t *\n\t\t\t * @memberOf module:ui/viewcollection~ViewCollection#delegate\n\t\t\t * @function module:ui/viewcollection~ViewCollection#delegate.to\n\t\t\t * @param {module:utils/emittermixin~EmitterMixin} dest An `EmitterMixin` instance which is\n\t\t\t * the destination for delegated events.\n\t\t\t */\n\t\t\tto: dest => {\n\t\t\t\t// Activate delegating on existing views in this collection.\n\t\t\t\tfor ( const view of this ) {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.delegate( evtName ).to( dest );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Activate delegating on future views in this collection.\n\t\t\t\tthis.on( 'add', ( evt, view ) => {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.delegate( evtName ).to( dest );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// Deactivate delegating when view is removed from this collection.\n\t\t\t\tthis.on( 'remove', ( evt, view ) => {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.stopDelegating( evtName, dest );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Removes a child view from the collection. If the {@link #setParent parent element} of the\n\t * collection has been set, the {@link module:ui/view~View#element element} of the view is also removed\n\t * in DOM, reflecting the order of the collection.\n\t *\n\t * See the {@link #add} method.\n\t *\n\t * @method #remove\n\t * @param {module:ui/view~View|Number|String} subject The view to remove, its id or index in the collection.\n\t * @returns {Object} The removed view.\n\t */\n}\n\n// Check if all entries of the array are of `String` type.\n//\n// @private\n// @param {Array} arr An array to be checked.\n// @returns {Boolean}\nfunction isStringArray( arr ) {\n\treturn arr.every( a => typeof a == 'string' );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/tomap\n */\n\nimport objectToMap from './objecttomap';\nimport { isPlainObject } from 'lodash-es';\n\n/**\n * Transforms object or iterable to map. Iterable needs to be in the format acceptable by the `Map` constructor.\n *\n *\t\tmap = toMap( { 'foo': 1, 'bar': 2 } );\n *\t\tmap = toMap( [ [ 'foo', 1 ], [ 'bar', 2 ] ] );\n *\t\tmap = toMap( anotherMap );\n *\n * @param {Object|Iterable} data Object or iterable to transform.\n * @returns {Map} Map created from data.\n */\nexport default function toMap( data ) {\n\tif ( isPlainObject( data ) ) {\n\t\treturn objectToMap( data );\n\t} else {\n\t\treturn new Map( data );\n\t}\n}\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/template\n */\n\n/* global document */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport View from './view';\nimport ViewCollection from './viewcollection';\nimport isNode from '@ckeditor/ckeditor5-utils/src/dom/isnode';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\nimport { isObject, cloneDeepWith } from 'lodash-es';\n\nconst xhtmlNs = 'http://www.w3.org/1999/xhtml';\n\n/**\n * A basic Template class. It renders a DOM HTML element or text from a\n * {@link module:ui/template~TemplateDefinition definition} and supports element attributes, children,\n * bindings to {@link module:utils/observablemixin~Observable observables} and DOM event propagation.\n *\n * A simple template can look like this:\n *\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\tattributes: {\n *\t\t\t\tclass: 'foo',\n *\t\t\t\tstyle: {\n *\t\t\t\t\tbackgroundColor: 'yellow'\n *\t\t\t\t}\n *\t\t\t},\n *\t\t\ton: {\n *\t\t\t\tclick: bind.to( 'clicked' )\n *\t\t\t}\n *\t\t\tchildren: [\n *\t\t\t\t'A paragraph.'\n *\t\t\t]\n *\t\t} ).render();\n *\n * and it will render the following HTML element:\n *\n *\t\t<p class=\"foo\" style=\"background-color: yellow;\">A paragraph.</p>\n *\n * Additionally, the `observable` will always fire `clicked` upon clicking `<p>` in the DOM.\n *\n * See {@link module:ui/template~TemplateDefinition} to know more about templates and complex\n * template definitions.\n *\n* @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Template {\n\t/**\n\t * Creates an instance of the {@link ~Template} class.\n\t *\n\t * @param {module:ui/template~TemplateDefinition} def The definition of the template.\n\t */\n\tconstructor( def ) {\n\t\tObject.assign( this, normalize( clone( def ) ) );\n\n\t\t/**\n\t\t * Indicates whether this particular Template instance has been\n\t\t * {@link #render rendered}.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._isRendered = false;\n\n\t\t/**\n\t\t * The tag (`tagName`) of this template, e.g. `div`. It also indicates that the template\n\t\t * renders to an HTML element.\n\t\t *\n\t\t * @member {String} #tag\n\t\t */\n\n\t\t/**\n\t\t * The text of the template. It also indicates that the template renders to a DOM text node.\n\t\t *\n\t\t * @member {Array.<String|module:ui/template~TemplateValueSchema>} #text\n\t\t */\n\n\t\t/**\n\t\t * The attributes of the template, e.g. `{ id: [ 'ck-id' ] }`, corresponding with\n\t\t * the attributes of an HTML element.\n\t\t *\n\t\t * **Note**: This property only makes sense when {@link #tag} is defined.\n\t\t *\n\t\t * @member {Object} #attributes\n\t\t */\n\n\t\t/**\n\t\t * The children of the template. They can be either:\n\t\t * * independent instances of {@link ~Template} (sub–templates),\n\t\t * * native DOM Nodes.\n\t\t *\n\t\t * **Note**: This property only makes sense when {@link #tag} is defined.\n\t\t *\n\t\t * @member {Array.<module:ui/template~Template|Node>} #children\n\t\t */\n\n\t\t/**\n\t\t * The DOM event listeners of the template.\n\t\t *\n\t\t * @member {Object} #eventListeners\n\t\t */\n\n\t\t/**\n\t\t * The data used by the {@link #revert} method to restore a node to its original state.\n\t\t *\n\t\t * See: {@link #apply}.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/template~RenderData}\n\t\t */\n\t\tthis._revertData = null;\n\t}\n\n\t/**\n\t * Renders a DOM Node (an HTML element or text) out of the template.\n\t *\n\t *\t\tconst domNode = new Template( { ... } ).render();\n\t *\n\t * See: {@link #apply}.\n\t *\n\t * @returns {HTMLElement|Text}\n\t */\n\trender() {\n\t\tconst node = this._renderNode( {\n\t\t\tintoFragment: true\n\t\t} );\n\n\t\tthis._isRendered = true;\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Applies the template to an existing DOM Node, either HTML element or text.\n\t *\n\t * **Note:** No new DOM nodes will be created. Applying extends:\n\t *\n\t * {@link module:ui/template~TemplateDefinition attributes},\n\t * {@link module:ui/template~TemplateDefinition event listeners}, and\n\t * `textContent` of {@link module:ui/template~TemplateDefinition children} only.\n\t *\n\t * **Note:** Existing `class` and `style` attributes are extended when a template\n\t * is applied to an HTML element, while other attributes and `textContent` are overridden.\n\t *\n\t * **Note:** The process of applying a template can be easily reverted using the\n\t * {@link module:ui/template~Template#revert} method.\n\t *\n\t *\t\tconst element = document.createElement( 'div' );\n\t *\t\tconst observable = new Model( { divClass: 'my-div' } );\n\t *\t\tconst emitter = Object.create( EmitterMixin );\n\t *\t\tconst bind = Template.bind( observable, emitter );\n\t *\n\t *\t\tnew Template( {\n\t *\t\t\tattributes: {\n\t *\t\t\t\tid: 'first-div',\n\t *\t\t\t\tclass: bind.to( 'divClass' )\n\t *\t\t\t},\n\t *\t\t\ton: {\n\t *\t\t\t\tclick: bind( 'elementClicked' ) // Will be fired by the observable.\n\t *\t\t\t},\n\t *\t\t\tchildren: [\n\t *\t\t\t\t'Div text.'\n\t *\t\t\t]\n\t *\t\t} ).apply( element );\n\t *\n\t *\t\tconsole.log( element.outerHTML ); // -> '<div id=\"first-div\" class=\"my-div\"></div>'\n\t *\n\t * @see module:ui/template~Template#render\n\t * @see module:ui/template~Template#revert\n\t * @param {Node} node Root node for the template to apply.\n\t */\n\tapply( node ) {\n\t\tthis._revertData = getEmptyRevertData();\n\n\t\tthis._renderNode( {\n\t\t\tnode,\n\t\t\tisApplying: true,\n\t\t\trevertData: this._revertData\n\t\t} );\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Reverts a template {@link module:ui/template~Template#apply applied} to a DOM node.\n\t *\n\t * @param {Node} node The root node for the template to revert. In most of the cases, it is the\n\t * same node used by {@link module:ui/template~Template#apply}.\n\t */\n\trevert( node ) {\n\t\tif ( !this._revertData ) {\n\t\t\t/**\n\t\t\t * Attempting to revert a template which has not been applied yet.\n\t\t\t *\n\t\t\t * @error ui-template-revert-not-applied\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.',\n\t\t\t\t[ this, node ]\n\t\t\t);\n\t\t}\n\n\t\tthis._revertTemplateFromNode( node, this._revertData );\n\t}\n\n\t/**\n\t * Returns an iterator which traverses the template in search of {@link module:ui/view~View}\n\t * instances and returns them one by one.\n\t *\n\t *\t\tconst viewFoo = new View();\n\t *\t\tconst viewBar = new View();\n\t *\t\tconst viewBaz = new View();\n\t *\t\tconst template = new Template( {\n\t *\t\t\ttag: 'div',\n\t *\t\t\tchildren: [\n\t *\t\t\t\tviewFoo,\n\t *\t\t\t\t{\n\t *\t\t\t\t\ttag: 'div',\n\t *\t\t\t\t\tchildren: [\n\t *\t\t\t\t\t\tviewBar\n\t *\t\t\t\t\t]\n\t *\t\t\t\t},\n\t *\t\t\t\tviewBaz\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t *\t\t// Logs: viewFoo, viewBar, viewBaz\n\t *\t\tfor ( const view of template.getViews() ) {\n\t *\t\t\tconsole.log( view );\n\t *\t\t}\n\t *\n\t * @returns {Iterable.<module:ui/view~View>}\n\t */\n\t* getViews() {\n\t\tfunction* search( def ) {\n\t\t\tif ( def.children ) {\n\t\t\t\tfor ( const child of def.children ) {\n\t\t\t\t\tif ( isView( child ) ) {\n\t\t\t\t\t\tyield child;\n\t\t\t\t\t} else if ( isTemplate( child ) ) {\n\t\t\t\t\t\tyield* search( child );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tyield* search( this );\n\t}\n\n\t/**\n\t * An entry point to the interface which binds DOM nodes to\n\t * {@link module:utils/observablemixin~Observable observables}.\n\t * There are two types of bindings:\n\t *\n\t * * HTML element attributes or text `textContent` synchronized with attributes of an\n\t * {@link module:utils/observablemixin~Observable}. Learn more about {@link module:ui/template~BindChain#to}\n\t * and {@link module:ui/template~BindChain#if}.\n\t *\n\t *\t\tconst bind = Template.bind( observable, emitter );\n\t *\n\t *\t\tnew Template( {\n\t *\t\t\tattributes: {\n\t *\t\t\t\t// Binds the element \"class\" attribute to observable#classAttribute.\n\t *\t\t\t\tclass: bind.to( 'classAttribute' )\n\t *\t\t\t}\n\t *\t\t} ).render();\n\t *\n\t * * DOM events fired on HTML element propagated through\n\t * {@link module:utils/observablemixin~Observable}. Learn more about {@link module:ui/template~BindChain#to}.\n\t *\n\t *\t\tconst bind = Template.bind( observable, emitter );\n\t *\n\t *\t\tnew Template( {\n\t *\t\t\ton: {\n\t *\t\t\t\t// Will be fired by the observable.\n\t *\t\t\t\tclick: bind( 'elementClicked' )\n\t *\t\t\t}\n\t *\t\t} ).render();\n\t *\n\t * Also see {@link module:ui/view~View#bindTemplate}.\n\t *\n\t * @param {module:utils/observablemixin~Observable} observable An observable which provides boundable attributes.\n\t * @param {module:utils/emittermixin~Emitter} emitter An emitter that listens to observable attribute\n\t * changes or DOM Events (depending on the kind of the binding). Usually, a {@link module:ui/view~View} instance.\n\t * @returns {module:ui/template~BindChain}\n\t */\n\tstatic bind( observable, emitter ) {\n\t\treturn {\n\t\t\tto( eventNameOrFunctionOrAttribute, callback ) {\n\t\t\t\treturn new TemplateToBinding( {\n\t\t\t\t\teventNameOrFunction: eventNameOrFunctionOrAttribute,\n\t\t\t\t\tattribute: eventNameOrFunctionOrAttribute,\n\t\t\t\t\tobservable, emitter, callback\n\t\t\t\t} );\n\t\t\t},\n\n\t\t\tif( attribute, valueIfTrue, callback ) {\n\t\t\t\treturn new TemplateIfBinding( {\n\t\t\t\t\tobservable, emitter, attribute, valueIfTrue, callback\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Extends an existing {@link module:ui/template~Template} instance with some additional content\n\t * from another {@link module:ui/template~TemplateDefinition}.\n\t *\n\t *\t\tconst bind = Template.bind( observable, emitter );\n\t *\n\t *\t\tconst template = new Template( {\n\t *\t\t\ttag: 'p',\n\t *\t\t\tattributes: {\n\t *\t\t\t\tclass: 'a',\n\t *\t\t\t\tdata-x: bind.to( 'foo' )\n\t *\t\t\t},\n\t *\t\t\tchildren: [\n\t *\t\t\t\t{\n\t *\t\t\t\t\ttag: 'span',\n\t *\t\t\t\t\tattributes: {\n\t *\t\t\t\t\t\tclass: 'b'\n\t *\t\t\t\t\t},\n\t *\t\t\t\t\tchildren: [\n\t *\t\t\t\t\t\t'Span'\n\t *\t\t\t\t\t]\n\t *\t\t\t\t}\n\t *\t\t\t]\n\t *\t\t } );\n\t *\n\t *\t\t// Instance-level extension.\n\t *\t\tTemplate.extend( template, {\n\t *\t\t\tattributes: {\n\t *\t\t\t\tclass: 'b',\n\t *\t\t\t\tdata-x: bind.to( 'bar' )\n\t *\t\t\t},\n\t *\t\t\tchildren: [\n\t *\t\t\t\t{\n\t *\t\t\t\t\tattributes: {\n\t *\t\t\t\t\t\tclass: 'c'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t *\t\t// Child extension.\n\t *\t\tTemplate.extend( template.children[ 0 ], {\n\t *\t\t\tattributes: {\n\t *\t\t\t\tclass: 'd'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * the `outerHTML` of `template.render()` is:\n\t *\n\t *\t\t<p class=\"a b\" data-x=\"{ observable.foo } { observable.bar }\">\n\t *\t\t\t<span class=\"b c d\">Span</span>\n\t *\t\t</p>\n\t *\n\t * @param {module:ui/template~Template} template An existing template instance to be extended.\n\t * @param {module:ui/template~TemplateDefinition} def Additional definition to be applied to a template.\n\t */\n\tstatic extend( template, def ) {\n\t\tif ( template._isRendered ) {\n\t\t\t/**\n\t\t\t * Extending a template after rendering may not work as expected. To make sure\n\t\t\t * the {@link module:ui/template~Template.extend extending} works for an element,\n\t\t\t * make sure it happens before {@link #render} is called.\n\t\t\t *\n\t\t\t * @error template-extend-render\n\t\t\t */\n\t\t\tlog.warn( 'template-extend-render: Attempting to extend a template which has already been rendered.' );\n\t\t}\n\n\t\textendTemplate( template, normalize( clone( def ) ) );\n\t}\n\n\t/**\n\t * Renders a DOM Node (either an HTML element or text) out of the template.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderNode( data ) {\n\t\tlet isInvalid;\n\n\t\tif ( data.node ) {\n\t\t\t// When applying, a definition cannot have \"tag\" and \"text\" at the same time.\n\t\t\tisInvalid = this.tag && this.text;\n\t\t} else {\n\t\t\t// When rendering, a definition must have either \"tag\" or \"text\": XOR( this.tag, this.text ).\n\t\t\tisInvalid = this.tag ? this.text : !this.text;\n\t\t}\n\n\t\tif ( isInvalid ) {\n\t\t\t/**\n\t\t\t * Node definition cannot have the \"tag\" and \"text\" properties at the same time.\n\t\t\t * Node definition must have either \"tag\" or \"text\" when rendering a new Node.\n\t\t\t *\n\t\t\t * @error ui-template-wrong-syntax\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-template-wrong-syntax: Node definition must have either \"tag\" or \"text\" when rendering a new Node.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tif ( this.text ) {\n\t\t\treturn this._renderText( data );\n\t\t} else {\n\t\t\treturn this._renderElement( data );\n\t\t}\n\t}\n\n\t/**\n\t * Renders an HTML element out of the template.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderElement( data ) {\n\t\tlet node = data.node;\n\n\t\tif ( !node ) {\n\t\t\tnode = data.node = document.createElementNS( this.ns || xhtmlNs, this.tag );\n\t\t}\n\n\t\tthis._renderAttributes( data );\n\t\tthis._renderElementChildren( data );\n\t\tthis._setUpListeners( data );\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Renders a text node out of {@link module:ui/template~Template#text}.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderText( data ) {\n\t\tlet node = data.node;\n\n\t\t// Save the original textContent to revert it in #revert().\n\t\tif ( node ) {\n\t\t\tdata.revertData.text = node.textContent;\n\t\t} else {\n\t\t\tnode = data.node = document.createTextNode( '' );\n\t\t}\n\n\t\t// Check if this Text Node is bound to Observable. Cases:\n\t\t//\n\t\t//\t\ttext: [ Template.bind( ... ).to( ... ) ]\n\t\t//\n\t\t//\t\ttext: [\n\t\t//\t\t\t'foo',\n\t\t//\t\t\tTemplate.bind( ... ).to( ... ),\n\t\t//\t\t\t...\n\t\t//\t\t]\n\t\t//\n\t\tif ( hasTemplateBinding( this.text ) ) {\n\t\t\tthis._bindToObservable( {\n\t\t\t\tschema: this.text,\n\t\t\t\tupdater: getTextUpdater( node ),\n\t\t\t\tdata\n\t\t\t} );\n\t\t}\n\t\t// Simply set text. Cases:\n\t\t//\n\t\t//\t\ttext: [ 'all', 'are', 'static' ]\n\t\t//\n\t\t//\t\ttext: [ 'foo' ]\n\t\t//\n\t\telse {\n\t\t\tnode.textContent = this.text.join( '' );\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Renders HTML element attributes out of {@link module:ui/template~Template#attributes}.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderAttributes( data ) {\n\t\tlet attrName, attrValue, domAttrValue, attrNs;\n\n\t\tif ( !this.attributes ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = data.node;\n\t\tconst revertData = data.revertData;\n\n\t\tfor ( attrName in this.attributes ) {\n\t\t\t// Current attribute value in DOM.\n\t\t\tdomAttrValue = node.getAttribute( attrName );\n\n\t\t\t// The value to be set.\n\t\t\tattrValue = this.attributes[ attrName ];\n\n\t\t\t// Save revert data.\n\t\t\tif ( revertData ) {\n\t\t\t\trevertData.attributes[ attrName ] = domAttrValue;\n\t\t\t}\n\n\t\t\t// Detect custom namespace:\n\t\t\t//\n\t\t\t//\t\tclass: {\n\t\t\t//\t\t\tns: 'abc',\n\t\t\t//\t\t\tvalue: Template.bind( ... ).to( ... )\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\tattrNs = ( isObject( attrValue[ 0 ] ) && attrValue[ 0 ].ns ) ? attrValue[ 0 ].ns : null;\n\n\t\t\t// Activate binding if one is found. Cases:\n\t\t\t//\n\t\t\t//\t\tclass: [\n\t\t\t//\t\t\tTemplate.bind( ... ).to( ... )\n\t\t\t//\t\t]\n\t\t\t//\n\t\t\t//\t\tclass: [\n\t\t\t//\t\t\t'bar',\n\t\t\t//\t\t\tTemplate.bind( ... ).to( ... ),\n\t\t\t//\t\t\t'baz'\n\t\t\t//\t\t]\n\t\t\t//\n\t\t\t//\t\tclass: {\n\t\t\t//\t\t\tns: 'abc',\n\t\t\t//\t\t\tvalue: Template.bind( ... ).to( ... )\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\tif ( hasTemplateBinding( attrValue ) ) {\n\t\t\t\t// Normalize attributes with additional data like namespace:\n\t\t\t\t//\n\t\t\t\t//\t\tclass: {\n\t\t\t\t//\t\t\tns: 'abc',\n\t\t\t\t//\t\t\tvalue: [ ... ]\n\t\t\t\t//\t\t}\n\t\t\t\t//\n\t\t\t\tconst valueToBind = attrNs ? attrValue[ 0 ].value : attrValue;\n\n\t\t\t\t// Extend the original value of attributes like \"style\" and \"class\",\n\t\t\t\t// don't override them.\n\t\t\t\tif ( revertData && shouldExtend( attrName ) ) {\n\t\t\t\t\tvalueToBind.unshift( domAttrValue );\n\t\t\t\t}\n\n\t\t\t\tthis._bindToObservable( {\n\t\t\t\t\tschema: valueToBind,\n\t\t\t\t\tupdater: getAttributeUpdater( node, attrName, attrNs ),\n\t\t\t\t\tdata\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Style attribute could be an Object so it needs to be parsed in a specific way.\n\t\t\t//\n\t\t\t//\t\tstyle: {\n\t\t\t//\t\t\twidth: '100px',\n\t\t\t//\t\t\theight: Template.bind( ... ).to( ... )\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\telse if ( attrName == 'style' && typeof attrValue[ 0 ] !== 'string' ) {\n\t\t\t\tthis._renderStyleAttribute( attrValue[ 0 ], data );\n\t\t\t}\n\n\t\t\t// Otherwise simply set the static attribute:\n\t\t\t//\n\t\t\t//\t\tclass: [ 'foo' ]\n\t\t\t//\n\t\t\t//\t\tclass: [ 'all', 'are', 'static' ]\n\t\t\t//\n\t\t\t//\t\tclass: [\n\t\t\t//\t\t\t{\n\t\t\t//\t\t\t\tns: 'abc',\n\t\t\t//\t\t\t\tvalue: [ 'foo' ]\n\t\t\t//\t\t\t}\n\t\t\t//\t\t]\n\t\t\t//\n\t\t\telse {\n\t\t\t\t// Extend the original value of attributes like \"style\" and \"class\",\n\t\t\t\t// don't override them.\n\t\t\t\tif ( revertData && domAttrValue && shouldExtend( attrName ) ) {\n\t\t\t\t\tattrValue.unshift( domAttrValue );\n\t\t\t\t}\n\n\t\t\t\tattrValue = attrValue\n\t\t\t\t\t// Retrieve \"values\" from:\n\t\t\t\t\t//\n\t\t\t\t\t//\t\tclass: [\n\t\t\t\t\t//\t\t\t{\n\t\t\t\t\t//\t\t\t\tns: 'abc',\n\t\t\t\t\t//\t\t\t\tvalue: [ ... ]\n\t\t\t\t\t//\t\t\t}\n\t\t\t\t\t//\t\t]\n\t\t\t\t\t//\n\t\t\t\t\t.map( val => val ? ( val.value || val ) : val )\n\t\t\t\t\t// Flatten the array.\n\t\t\t\t\t.reduce( ( prev, next ) => prev.concat( next ), [] )\n\t\t\t\t\t// Convert into string.\n\t\t\t\t\t.reduce( arrayValueReducer, '' );\n\n\t\t\t\tif ( !isFalsy( attrValue ) ) {\n\t\t\t\t\tnode.setAttributeNS( attrNs, attrName, attrValue );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Renders the `style` attribute of an HTML element based on\n\t * {@link module:ui/template~Template#attributes}.\n\t *\n\t * A style attribute is an {Object} with static values:\n\t *\n\t *\t\tattributes: {\n\t *\t\t\tstyle: {\n\t *\t\t\t\tcolor: 'red'\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * or values bound to {@link module:ui/model~Model} properties:\n\t *\n\t *\t\tattributes: {\n\t *\t\t\tstyle: {\n\t *\t\t\t\tcolor: bind.to( ... )\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * Note: The `style` attribute is rendered without setting the namespace. It does not seem to be\n\t * needed.\n\t *\n\t * @private\n\t * @param {Object} styles Styles located in `attributes.style` of {@link module:ui/template~TemplateDefinition}.\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderStyleAttribute( styles, data ) {\n\t\tconst node = data.node;\n\n\t\tfor ( const styleName in styles ) {\n\t\t\tconst styleValue = styles[ styleName ];\n\n\t\t\t// Cases:\n\t\t\t//\n\t\t\t//\t\tstyle: {\n\t\t\t//\t\t\tcolor: bind.to( 'attribute' )\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\tif ( hasTemplateBinding( styleValue ) ) {\n\t\t\t\tthis._bindToObservable( {\n\t\t\t\t\tschema: [ styleValue ],\n\t\t\t\t\tupdater: getStyleUpdater( node, styleName ),\n\t\t\t\t\tdata\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Cases:\n\t\t\t//\n\t\t\t//\t\tstyle: {\n\t\t\t//\t\t\tcolor: 'red'\n\t\t\t//\t\t}\n\t\t\t//\n\t\t\telse {\n\t\t\t\tnode.style[ styleName ] = styleValue;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Recursively renders HTML element's children from {@link module:ui/template~Template#children}.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_renderElementChildren( data ) {\n\t\tconst node = data.node;\n\t\tconst container = data.intoFragment ? document.createDocumentFragment() : node;\n\t\tconst isApplying = data.isApplying;\n\t\tlet childIndex = 0;\n\n\t\tfor ( const child of this.children ) {\n\t\t\tif ( isViewCollection( child ) ) {\n\t\t\t\tif ( !isApplying ) {\n\t\t\t\t\tchild.setParent( node );\n\n\t\t\t\t\t// Note: ViewCollection renders its children.\n\t\t\t\t\tfor ( const view of child ) {\n\t\t\t\t\t\tcontainer.appendChild( view.element );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if ( isView( child ) ) {\n\t\t\t\tif ( !isApplying ) {\n\t\t\t\t\tif ( !child.isRendered ) {\n\t\t\t\t\t\tchild.render();\n\t\t\t\t\t}\n\n\t\t\t\t\tcontainer.appendChild( child.element );\n\t\t\t\t}\n\t\t\t} else if ( isNode( child ) ) {\n\t\t\t\tcontainer.appendChild( child );\n\t\t\t} else {\n\t\t\t\tif ( isApplying ) {\n\t\t\t\t\tconst revertData = data.revertData;\n\t\t\t\t\tconst childRevertData = getEmptyRevertData();\n\n\t\t\t\t\trevertData.children.push( childRevertData );\n\n\t\t\t\t\tchild._renderNode( {\n\t\t\t\t\t\tnode: container.childNodes[ childIndex++ ],\n\t\t\t\t\t\tisApplying: true,\n\t\t\t\t\t\trevertData: childRevertData\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.appendChild( child.render() );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( data.intoFragment ) {\n\t\t\tnode.appendChild( container );\n\t\t}\n\t}\n\n\t/**\n\t * Activates `on` event listeners from the {@link module:ui/template~TemplateDefinition}\n\t * on an HTML element.\n\t *\n\t * @protected\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t */\n\t_setUpListeners( data ) {\n\t\tif ( !this.eventListeners ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const key in this.eventListeners ) {\n\t\t\tconst revertBindings = this.eventListeners[ key ].map( schemaItem => {\n\t\t\t\tconst [ domEvtName, domSelector ] = key.split( '@' );\n\n\t\t\t\treturn schemaItem.activateDomEventListener( domEvtName, domSelector, data );\n\t\t\t} );\n\n\t\t\tif ( data.revertData ) {\n\t\t\t\tdata.revertData.bindings.push( revertBindings );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * For a given {@link module:ui/template~TemplateValueSchema} containing {@link module:ui/template~TemplateBinding}\n\t * activates the binding and sets its initial value.\n\t *\n\t * Note: {@link module:ui/template~TemplateValueSchema} can be for HTML element attributes or\n\t * text node `textContent`.\n\t *\n\t * @protected\n\t * @param {Object} options Binding options.\n\t * @param {module:ui/template~TemplateValueSchema} options.schema\n\t * @param {Function} options.updater A function which updates the DOM (like attribute or text).\n\t * @param {module:ui/template~RenderData} options.data Rendering data.\n\t */\n\t_bindToObservable( { schema, updater, data } ) {\n\t\tconst revertData = data.revertData;\n\n\t\t// Set initial values.\n\t\tsyncValueSchemaValue( schema, updater, data );\n\n\t\tconst revertBindings = schema\n\t\t\t// Filter \"falsy\" (false, undefined, null, '') value schema components out.\n\t\t\t.filter( item => !isFalsy( item ) )\n\t\t\t// Filter inactive bindings from schema, like static strings ('foo'), numbers (42), etc.\n\t\t\t.filter( item => item.observable )\n\t\t\t// Once only the actual binding are left, let the emitter listen to observable change:attribute event.\n\t\t\t// TODO: Reduce the number of listeners attached as many bindings may listen\n\t\t\t// to the same observable attribute.\n\t\t\t.map( templateBinding => templateBinding.activateAttributeListener( schema, updater, data ) );\n\n\t\tif ( revertData ) {\n\t\t\trevertData.bindings.push( revertBindings );\n\t\t}\n\t}\n\n\t/**\n\t * Reverts {@link module:ui/template~RenderData#revertData template data} from a node to\n\t * return it to the original state.\n\t *\n\t * @protected\n\t * @param {HTMLElement|Text} node A node to be reverted.\n\t * @param {module:ui/template~RenderData#revertData} revertData Stores information about\n\t * what changes have been made by {@link #apply} to the node.\n\t */\n\t_revertTemplateFromNode( node, revertData ) {\n\t\tfor ( const binding of revertData.bindings ) {\n\t\t\t// Each binding may consist of several observable+observable#attribute.\n\t\t\t// like the following has 2:\n\t\t\t//\n\t\t\t//\t\tclass: [\n\t\t\t//\t\t\t'x',\n\t\t\t//\t\t\tbind.to( 'foo' ),\n\t\t\t//\t\t\t'y',\n\t\t\t//\t\t\tbind.to( 'bar' )\n\t\t\t//\t\t]\n\t\t\t//\n\t\t\tfor ( const revertBinding of binding ) {\n\t\t\t\trevertBinding();\n\t\t\t}\n\t\t}\n\n\t\tif ( revertData.text ) {\n\t\t\tnode.textContent = revertData.text;\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const attrName in revertData.attributes ) {\n\t\t\tconst attrValue = revertData.attributes[ attrName ];\n\n\t\t\t// When the attribute has **not** been set before #apply().\n\t\t\tif ( attrValue === null ) {\n\t\t\t\tnode.removeAttribute( attrName );\n\t\t\t} else {\n\t\t\t\tnode.setAttribute( attrName, attrValue );\n\t\t\t}\n\t\t}\n\n\t\tfor ( let i = 0; i < revertData.children.length; ++i ) {\n\t\t\tthis._revertTemplateFromNode( node.childNodes[ i ], revertData.children[ i ] );\n\t\t}\n\t}\n}\n\nmix( Template, EmitterMixin );\n\n/**\n * Describes a binding created by the {@link module:ui/template~Template.bind} interface.\n *\n * @protected\n */\nexport class TemplateBinding {\n\t/**\n\t * Creates an instance of the {@link module:ui/template~TemplateBinding} class.\n\t *\n\t * @param {module:ui/template~TemplateDefinition} def The definition of the binding.\n\t */\n\tconstructor( def ) {\n\t\tObject.assign( this, def );\n\n\t\t/**\n\t\t * An observable instance of the binding. It either:\n\t\t *\n\t\t * * provides the attribute with the value,\n\t\t * * or passes the event when a corresponding DOM event is fired.\n\t\t *\n\t\t * @member {module:utils/observablemixin~ObservableMixin} module:ui/template~TemplateBinding#observable\n\t\t */\n\n\t\t/**\n\t\t * An {@link module:utils/emittermixin~Emitter} used by the binding to:\n\t\t *\n\t\t * * listen to the attribute change in the {@link module:ui/template~TemplateBinding#observable},\n\t\t * * or listen to the event in the DOM.\n\t\t *\n\t\t * @member {module:utils/emittermixin~EmitterMixin} module:ui/template~TemplateBinding#emitter\n\t\t */\n\n\t\t/**\n\t\t * The name of the {@link module:ui/template~TemplateBinding#observable observed attribute}.\n\t\t *\n\t\t * @member {String} module:ui/template~TemplateBinding#attribute\n\t\t */\n\n\t\t/**\n\t\t * A custom function to process the value of the {@link module:ui/template~TemplateBinding#attribute}.\n\t\t *\n\t\t * @member {Function} [module:ui/template~TemplateBinding#callback]\n\t\t */\n\t}\n\n\t/**\n\t * Returns the value of the binding. It is the value of the {@link module:ui/template~TemplateBinding#attribute} in\n\t * {@link module:ui/template~TemplateBinding#observable}. The value may be processed by the\n\t * {@link module:ui/template~TemplateBinding#callback}, if such has been passed to the binding.\n\t *\n\t * @param {Node} [node] A native DOM node, passed to the custom {@link module:ui/template~TemplateBinding#callback}.\n\t * @returns {*} The value of {@link module:ui/template~TemplateBinding#attribute} in\n\t * {@link module:ui/template~TemplateBinding#observable}.\n\t */\n\tgetValue( node ) {\n\t\tconst value = this.observable[ this.attribute ];\n\n\t\treturn this.callback ? this.callback( value, node ) : value;\n\t}\n\n\t/**\n\t * Activates the listener which waits for changes of the {@link module:ui/template~TemplateBinding#attribute} in\n\t * {@link module:ui/template~TemplateBinding#observable}, then updates the DOM with the aggregated\n\t * value of {@link module:ui/template~TemplateValueSchema}.\n\t *\n\t * @param {module:ui/template~TemplateValueSchema} schema A full schema to generate an attribute or text in the DOM.\n\t * @param {Function} updater A DOM updater function used to update the native DOM attribute or text.\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t * @returns {Function} A function to sever the listener binding.\n\t */\n\tactivateAttributeListener( schema, updater, data ) {\n\t\tconst callback = () => syncValueSchemaValue( schema, updater, data );\n\n\t\tthis.emitter.listenTo( this.observable, 'change:' + this.attribute, callback );\n\n\t\t// Allows revert of the listener.\n\t\treturn () => {\n\t\t\tthis.emitter.stopListening( this.observable, 'change:' + this.attribute, callback );\n\t\t};\n\t}\n}\n\n/**\n * Describes either:\n *\n * * a binding to an {@link module:utils/observablemixin~Observable},\n * * or a native DOM event binding.\n *\n * It is created by the {@link module:ui/template~BindChain#to} method.\n *\n * @protected\n */\nexport class TemplateToBinding extends TemplateBinding {\n\t/**\n\t * Activates the listener for the native DOM event, which when fired, is propagated by\n\t * the {@link module:ui/template~TemplateBinding#emitter}.\n\t *\n\t * @param {String} domEvtName The name of the native DOM event.\n\t * @param {String} domSelector The selector in the DOM to filter delegated events.\n\t * @param {module:ui/template~RenderData} data Rendering data.\n\t * @returns {Function} A function to sever the listener binding.\n\t */\n\tactivateDomEventListener( domEvtName, domSelector, data ) {\n\t\tconst callback = ( evt, domEvt ) => {\n\t\t\tif ( !domSelector || domEvt.target.matches( domSelector ) ) {\n\t\t\t\tif ( typeof this.eventNameOrFunction == 'function' ) {\n\t\t\t\t\tthis.eventNameOrFunction( domEvt );\n\t\t\t\t} else {\n\t\t\t\t\tthis.observable.fire( this.eventNameOrFunction, domEvt );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.emitter.listenTo( data.node, domEvtName, callback );\n\n\t\t// Allows revert of the listener.\n\t\treturn () => {\n\t\t\tthis.emitter.stopListening( data.node, domEvtName, callback );\n\t\t};\n\t}\n}\n\n/**\n * Describes a binding to {@link module:utils/observablemixin~ObservableMixin} created by the {@link module:ui/template~BindChain#if}\n * method.\n *\n * @protected\n */\nexport class TemplateIfBinding extends TemplateBinding {\n\t/**\n\t * @inheritDoc\n\t */\n\tgetValue( node ) {\n\t\tconst value = super.getValue( node );\n\n\t\treturn isFalsy( value ) ? false : ( this.valueIfTrue || true );\n\t}\n\n\t/**\n\t * The value of the DOM attribute or text to be set if the {@link module:ui/template~TemplateBinding#attribute} in\n\t * {@link module:ui/template~TemplateBinding#observable} is `true`.\n\t *\n\t * @member {String} [module:ui/template~TemplateIfBinding#valueIfTrue]\n\t */\n}\n\n// Checks whether given {@link module:ui/template~TemplateValueSchema} contains a\n// {@link module:ui/template~TemplateBinding}.\n//\n// @param {module:ui/template~TemplateValueSchema} schema\n// @returns {Boolean}\nfunction hasTemplateBinding( schema ) {\n\tif ( !schema ) {\n\t\treturn false;\n\t}\n\n\t// Normalize attributes with additional data like namespace:\n\t//\n\t//\t\tclass: {\n\t//\t\t\tns: 'abc',\n\t//\t\t\tvalue: [ ... ]\n\t//\t\t}\n\t//\n\tif ( schema.value ) {\n\t\tschema = schema.value;\n\t}\n\n\tif ( Array.isArray( schema ) ) {\n\t\treturn schema.some( hasTemplateBinding );\n\t} else if ( schema instanceof TemplateBinding ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// Assembles the value using {@link module:ui/template~TemplateValueSchema} and stores it in a form of\n// an Array. Each entry of the Array corresponds to one of {@link module:ui/template~TemplateValueSchema}\n// items.\n//\n// @param {module:ui/template~TemplateValueSchema} schema\n// @param {Node} node DOM Node updated when {@link module:utils/observablemixin~ObservableMixin} changes.\n// @returns {Array}\nfunction getValueSchemaValue( schema, node ) {\n\treturn schema.map( schemaItem => {\n\t\t// Process {@link module:ui/template~TemplateBinding} bindings.\n\t\tif ( schemaItem instanceof TemplateBinding ) {\n\t\t\treturn schemaItem.getValue( node );\n\t\t}\n\n\t\t// All static values like strings, numbers, and \"falsy\" values (false, null, undefined, '', etc.) just pass.\n\t\treturn schemaItem;\n\t} );\n}\n\n// A function executed each time the bound Observable attribute changes, which updates the DOM with a value\n// constructed from {@link module:ui/template~TemplateValueSchema}.\n//\n// @param {module:ui/template~TemplateValueSchema} schema\n// @param {Function} updater A function which updates the DOM (like attribute or text).\n// @param {Node} node DOM Node updated when {@link module:utils/observablemixin~ObservableMixin} changes.\nfunction syncValueSchemaValue( schema, updater, { node } ) {\n\tlet value = getValueSchemaValue( schema, node );\n\n\t// Check if schema is a single Template.bind.if, like:\n\t//\n\t//\t\tclass: Template.bind.if( 'foo' )\n\t//\n\tif ( schema.length == 1 && schema[ 0 ] instanceof TemplateIfBinding ) {\n\t\tvalue = value[ 0 ];\n\t} else {\n\t\tvalue = value.reduce( arrayValueReducer, '' );\n\t}\n\n\tif ( isFalsy( value ) ) {\n\t\tupdater.remove();\n\t} else {\n\t\tupdater.set( value );\n\t}\n}\n\n// Returns an object consisting of `set` and `remove` functions, which\n// can be used in the context of DOM Node to set or reset `textContent`.\n// @see module:ui/view~View#_bindToObservable\n//\n// @param {Node} node DOM Node to be modified.\n// @returns {Object}\nfunction getTextUpdater( node ) {\n\treturn {\n\t\tset( value ) {\n\t\t\tnode.textContent = value;\n\t\t},\n\n\t\tremove() {\n\t\t\tnode.textContent = '';\n\t\t}\n\t};\n}\n\n// Returns an object consisting of `set` and `remove` functions, which\n// can be used in the context of DOM Node to set or reset an attribute.\n// @see module:ui/view~View#_bindToObservable\n//\n// @param {Node} node DOM Node to be modified.\n// @param {String} attrName Name of the attribute to be modified.\n// @param {String} [ns=null] Namespace to use.\n// @returns {Object}\nfunction getAttributeUpdater( el, attrName, ns ) {\n\treturn {\n\t\tset( value ) {\n\t\t\tel.setAttributeNS( ns, attrName, value );\n\t\t},\n\n\t\tremove() {\n\t\t\tel.removeAttributeNS( ns, attrName );\n\t\t}\n\t};\n}\n\n// Returns an object consisting of `set` and `remove` functions, which\n// can be used in the context of CSSStyleDeclaration to set or remove a style.\n// @see module:ui/view~View#_bindToObservable\n//\n// @param {Node} node DOM Node to be modified.\n// @param {String} styleName Name of the style to be modified.\n// @returns {Object}\nfunction getStyleUpdater( el, styleName ) {\n\treturn {\n\t\tset( value ) {\n\t\t\tel.style[ styleName ] = value;\n\t\t},\n\n\t\tremove() {\n\t\t\tel.style[ styleName ] = null;\n\t\t}\n\t};\n}\n\n// Clones definition of the template.\n//\n// @param {module:ui/template~TemplateDefinition} def\n// @returns {module:ui/template~TemplateDefinition}\nfunction clone( def ) {\n\tconst clone = cloneDeepWith( def, value => {\n\t\t// Don't clone the `Template.bind`* bindings because of the references to Observable\n\t\t// and DomEmitterMixin instances inside, which would also be traversed and cloned by greedy\n\t\t// cloneDeepWith algorithm. There's no point in cloning Observable/DomEmitterMixins\n\t\t// along with the definition.\n\t\t//\n\t\t// Don't clone Template instances if provided as a child. They're simply #render()ed\n\t\t// and nothing should interfere.\n\t\t//\n\t\t// Also don't clone View instances if provided as a child of the Template. The template\n\t\t// instance will be extracted from the View during the normalization and there's no need\n\t\t// to clone it.\n\t\tif ( value && ( value instanceof TemplateBinding || isTemplate( value ) || isView( value ) || isViewCollection( value ) ) ) {\n\t\t\treturn value;\n\t\t}\n\t} );\n\n\treturn clone;\n}\n\n// Normalizes given {@link module:ui/template~TemplateDefinition}.\n//\n// See:\n//  * {@link normalizeAttributes}\n//  * {@link normalizeListeners}\n//  * {@link normalizePlainTextDefinition}\n//  * {@link normalizeTextDefinition}\n//\n// @param {module:ui/template~TemplateDefinition} def\n// @returns {module:ui/template~TemplateDefinition} Normalized definition.\nfunction normalize( def ) {\n\tif ( typeof def == 'string' ) {\n\t\tdef = normalizePlainTextDefinition( def );\n\t} else if ( def.text ) {\n\t\tnormalizeTextDefinition( def );\n\t}\n\n\tif ( def.on ) {\n\t\tdef.eventListeners = normalizeListeners( def.on );\n\n\t\t// Template mixes EmitterMixin, so delete #on to avoid collision.\n\t\tdelete def.on;\n\t}\n\n\tif ( !def.text ) {\n\t\tif ( def.attributes ) {\n\t\t\tnormalizeAttributes( def.attributes );\n\t\t}\n\n\t\tconst children = [];\n\n\t\tif ( def.children ) {\n\t\t\tif ( isViewCollection( def.children ) ) {\n\t\t\t\tchildren.push( def.children );\n\t\t\t} else {\n\t\t\t\tfor ( const child of def.children ) {\n\t\t\t\t\tif ( isTemplate( child ) || isView( child ) || isNode( child ) ) {\n\t\t\t\t\t\tchildren.push( child );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchildren.push( new Template( child ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdef.children = children;\n\t}\n\n\treturn def;\n}\n\n// Normalizes \"attributes\" section of {@link module:ui/template~TemplateDefinition}.\n//\n//\t\tattributes: {\n//\t\t\ta: 'bar',\n//\t\t\tb: {@link module:ui/template~TemplateBinding},\n//\t\t\tc: {\n//\t\t\t\tvalue: 'bar'\n//\t\t\t}\n//\t\t}\n//\n// becomes\n//\n//\t\tattributes: {\n//\t\t\ta: [ 'bar' ],\n//\t\t\tb: [ {@link module:ui/template~TemplateBinding} ],\n//\t\t\tc: {\n//\t\t\t\tvalue: [ 'bar' ]\n//\t\t\t}\n//\t\t}\n//\n// @param {Object} attributes\nfunction normalizeAttributes( attributes ) {\n\tfor ( const a in attributes ) {\n\t\tif ( attributes[ a ].value ) {\n\t\t\tattributes[ a ].value = [].concat( attributes[ a ].value );\n\t\t}\n\n\t\tarrayify( attributes, a );\n\t}\n}\n\n// Normalizes \"on\" section of {@link module:ui/template~TemplateDefinition}.\n//\n//\t\ton: {\n//\t\t\ta: 'bar',\n//\t\t\tb: {@link module:ui/template~TemplateBinding},\n//\t\t\tc: [ {@link module:ui/template~TemplateBinding}, () => { ... } ]\n//\t\t}\n//\n// becomes\n//\n//\t\ton: {\n//\t\t\ta: [ 'bar' ],\n//\t\t\tb: [ {@link module:ui/template~TemplateBinding} ],\n//\t\t\tc: [ {@link module:ui/template~TemplateBinding}, () => { ... } ]\n//\t\t}\n//\n// @param {Object} listeners\n// @returns {Object} Object containing normalized listeners.\nfunction normalizeListeners( listeners ) {\n\tfor ( const l in listeners ) {\n\t\tarrayify( listeners, l );\n\t}\n\n\treturn listeners;\n}\n\n// Normalizes \"string\" {@link module:ui/template~TemplateDefinition}.\n//\n//\t\t\"foo\"\n//\n// becomes\n//\n//\t\t{ text: [ 'foo' ] },\n//\n// @param {String} def\n// @returns {module:ui/template~TemplateDefinition} Normalized template definition.\nfunction normalizePlainTextDefinition( def ) {\n\treturn {\n\t\ttext: [ def ]\n\t};\n}\n\n// Normalizes text {@link module:ui/template~TemplateDefinition}.\n//\n//\t\tchildren: [\n//\t\t\t{ text: 'def' },\n//\t\t\t{ text: {@link module:ui/template~TemplateBinding} }\n//\t\t]\n//\n// becomes\n//\n//\t\tchildren: [\n//\t\t\t{ text: [ 'def' ] },\n//\t\t\t{ text: [ {@link module:ui/template~TemplateBinding} ] }\n//\t\t]\n//\n// @param {module:ui/template~TemplateDefinition} def\nfunction normalizeTextDefinition( def ) {\n\tif ( !Array.isArray( def.text ) ) {\n\t\tdef.text = [ def.text ];\n\t}\n}\n\n// Wraps an entry in Object in an Array, if not already one.\n//\n//\t\t{\n//\t\t\tx: 'y',\n//\t\t\ta: [ 'b' ]\n//\t\t}\n//\n// becomes\n//\n//\t\t{\n//\t\t\tx: [ 'y' ],\n//\t\t\ta: [ 'b' ]\n//\t\t}\n//\n// @param {Object} obj\n// @param {String} key\nfunction arrayify( obj, key ) {\n\tif ( !Array.isArray( obj[ key ] ) ) {\n\t\tobj[ key ] = [ obj[ key ] ];\n\t}\n}\n\n// A helper which concatenates the value avoiding unwanted\n// leading white spaces.\n//\n// @param {String} prev\n// @param {String} cur\n// @returns {String}\nfunction arrayValueReducer( prev, cur ) {\n\tif ( isFalsy( cur ) ) {\n\t\treturn prev;\n\t} else if ( isFalsy( prev ) ) {\n\t\treturn cur;\n\t} else {\n\t\treturn `${ prev } ${ cur }`;\n\t}\n}\n\n// Extends one object defined in the following format:\n//\n//\t\t{\n//\t\t\tkey1: [Array1],\n//\t\t\tkey2: [Array2],\n//\t\t\t...\n//\t\t\tkeyN: [ArrayN]\n//\t\t}\n//\n// with another object of the same data format.\n//\n// @param {Object} obj Base object.\n// @param {Object} ext Object extending base.\n// @returns {String}\nfunction extendObjectValueArray( obj, ext ) {\n\tfor ( const a in ext ) {\n\t\tif ( obj[ a ] ) {\n\t\t\tobj[ a ].push( ...ext[ a ] );\n\t\t} else {\n\t\t\tobj[ a ] = ext[ a ];\n\t\t}\n\t}\n}\n\n// A helper for {@link module:ui/template~Template#extend}. Recursively extends {@link module:ui/template~Template} instance\n// with content from {@link module:ui/template~TemplateDefinition}. See {@link module:ui/template~Template#extend} to learn more.\n//\n// @param {module:ui/template~Template} def A template instance to be extended.\n// @param {module:ui/template~TemplateDefinition} def A definition which is to extend the template instance.\n// @param {Object} Error context.\nfunction extendTemplate( template, def ) {\n\tif ( def.attributes ) {\n\t\tif ( !template.attributes ) {\n\t\t\ttemplate.attributes = {};\n\t\t}\n\n\t\textendObjectValueArray( template.attributes, def.attributes );\n\t}\n\n\tif ( def.eventListeners ) {\n\t\tif ( !template.eventListeners ) {\n\t\t\ttemplate.eventListeners = {};\n\t\t}\n\n\t\textendObjectValueArray( template.eventListeners, def.eventListeners );\n\t}\n\n\tif ( def.text ) {\n\t\ttemplate.text.push( ...def.text );\n\t}\n\n\tif ( def.children && def.children.length ) {\n\t\tif ( template.children.length != def.children.length ) {\n\t\t\t/**\n\t\t\t * The number of children in extended definition does not match.\n\t\t\t *\n\t\t\t * @error ui-template-extend-children-mismatch\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-template-extend-children-mismatch: The number of children in extended definition does not match.',\n\t\t\t\ttemplate\n\t\t\t);\n\t\t}\n\n\t\tlet childIndex = 0;\n\n\t\tfor ( const childDef of def.children ) {\n\t\t\textendTemplate( template.children[ childIndex++ ], childDef );\n\t\t}\n\t}\n}\n\n// Checks if value is \"falsy\".\n// Note: 0 (Number) is not \"falsy\" in this context.\n//\n// @private\n// @param {*} value Value to be checked.\nfunction isFalsy( value ) {\n\treturn !value && value !== 0;\n}\n\n// Checks if the item is an instance of {@link module:ui/view~View}\n//\n// @private\n// @param {*} value Value to be checked.\nfunction isView( item ) {\n\treturn item instanceof View;\n}\n\n// Checks if the item is an instance of {@link module:ui/template~Template}\n//\n// @private\n// @param {*} value Value to be checked.\nfunction isTemplate( item ) {\n\treturn item instanceof Template;\n}\n\n// Checks if the item is an instance of {@link module:ui/viewcollection~ViewCollection}\n//\n// @private\n// @param {*} value Value to be checked.\nfunction isViewCollection( item ) {\n\treturn item instanceof ViewCollection;\n}\n\n// Creates an empty skeleton for {@link module:ui/template~Template#revert}\n// data.\n//\n// @private\nfunction getEmptyRevertData() {\n\treturn {\n\t\tchildren: [],\n\t\tbindings: [],\n\t\tattributes: {}\n\t};\n}\n\n// Checks whether an attribute should be extended when\n// {@link module:ui/template~Template#apply} is called.\n//\n// @private\n// @param {String} attrName Attribute name to check.\nfunction shouldExtend( attrName ) {\n\treturn attrName == 'class' || attrName == 'style';\n}\n\n/**\n * A definition of the {@link module:ui/template~Template}. It describes what kind of\n * node a template will render (HTML element or text), attributes of an element, DOM event\n * listeners and children.\n *\n * Also see:\n * * {@link module:ui/template~TemplateValueSchema} to learn about HTML element attributes,\n * * {@link module:ui/template~TemplateListenerSchema} to learn about DOM event listeners.\n *\n * A sample definition on an HTML element can look like this:\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\tchildren: [\n *\t\t\t\t{\n *\t\t\t\t\ttag: 'span',\n *\t\t\t\t\tattributes: { ... },\n *\t\t\t\t\tchildren: [ ... ],\n *\t\t\t\t},\n *\t\t\t\t{\n *\t\t\t\t\ttext: 'static–text'\n *\t\t\t\t},\n *\t\t\t\t'also-static–text',\n *\t\t\t],\n *\t\t\tattributes: {\n *\t\t\t\tclass: {@link module:ui/template~TemplateValueSchema},\n *\t\t\t\tid: {@link module:ui/template~TemplateValueSchema},\n *\t\t\t\tstyle: {@link module:ui/template~TemplateValueSchema}\n *\n *\t\t\t\t// ...\n *\t\t\t},\n *\t\t\ton: {\n *\t\t\t\t'click': {@link module:ui/template~TemplateListenerSchema}\n *\n *\t\t\t\t// Document.querySelector format is also accepted.\n *\t\t\t\t'keyup@a.some-class': {@link module:ui/template~TemplateListenerSchema}\n *\n *\t\t\t\t// ...\n *\t\t\t}\n *\t\t} );\n *\n * A {@link module:ui/view~View}, another {@link module:ui/template~Template} or a native DOM node\n * can also become a child of a template. When a view is passed, its {@link module:ui/view~View#element} is used:\n *\n *\t\tconst view = new SomeView();\n *\t\tconst childTemplate = new Template( { ... } );\n *\t\tconst childNode = document.createElement( 'b' );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\n *\t\t\tchildren: [\n *\t\t\t\t// view#element will be added as a child of this <p>.\n *\t\t\t\tview,\n *\n * \t\t\t\t// The output of childTemplate.render() will be added here.\n *\t\t\t\tchildTemplate,\n *\n *\t\t\t\t// Native DOM nodes are included directly in the rendered output.\n *\t\t\t\tchildNode\n *\t\t\t]\n *\t\t} );\n *\n * An entire {@link module:ui/viewcollection~ViewCollection} can be used as a child in the definition:\n *\n *\t\tconst collection = new ViewCollection();\n *\t\tcollection.add( someView );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\n *\t\t\tchildren: collection\n *\t\t} );\n *\n * @typedef module:ui/template~TemplateDefinition\n * @type Object\n *\n * @property {String} tag See the template {@link module:ui/template~Template#tag} property.\n *\n * @property {Array.<module:ui/template~TemplateDefinition>} [children]\n * See the template {@link module:ui/template~Template#children} property.\n *\n * @property {Object.<String, module:ui/template~TemplateValueSchema>} [attributes]\n * See the template {@link module:ui/template~Template#attributes} property.\n *\n * @property {String|module:ui/template~TemplateValueSchema|Array.<String|module:ui/template~TemplateValueSchema>} [text]\n * See the template {@link module:ui/template~Template#text} property.\n *\n * @property {Object.<String, module:ui/template~TemplateListenerSchema>} [on]\n * See the template {@link module:ui/template~Template#eventListeners} property.\n */\n\n/**\n * Describes a value of an HTML element attribute or `textContent`. It allows combining multiple\n * data sources like static values and {@link module:utils/observablemixin~Observable} attributes.\n *\n * Also see:\n * * {@link module:ui/template~TemplateDefinition} to learn where to use it,\n * * {@link module:ui/template~Template.bind} to learn how to configure\n * {@link module:utils/observablemixin~Observable} attribute bindings,\n * * {@link module:ui/template~Template#render} to learn how to render a template,\n * * {@link module:ui/template~BindChain#to `to()`} and {@link module:ui/template~BindChain#if `if()`}\n * methods to learn more about bindings.\n *\n * Attribute values can be described in many different ways:\n *\n *\t\t// Bind helper will create bindings to attributes of the observable.\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\tattributes: {\n *\t\t\t\t// A plain string schema.\n *\t\t\t\t'class': 'static-text',\n *\n *\t\t\t\t// An object schema, binds to the \"foo\" attribute of the\n *\t\t\t\t// observable and follows its value.\n *\t\t\t\t'class': bind.to( 'foo' ),\n *\n *\t\t\t\t// An array schema, combines the above.\n *\t\t\t\t'class': [\n *\t\t\t\t\t'static-text',\n *\t\t\t\t\tbind.to( 'bar', () => { ... } ),\n *\n * \t\t\t\t\t// Bindings can also be conditional.\n *\t\t\t\t\tbind.if( 'baz', 'class-when-baz-is-true' )\n *\t\t\t\t],\n *\n *\t\t\t\t// An array schema, with a custom namespace, e.g. useful for creating SVGs.\n *\t\t\t\t'class': {\n *\t\t\t\t\tns: 'http://ns.url',\n *\t\t\t\t\tvalue: [\n *\t\t\t\t\t\tbind.if( 'baz', 'value-when-true' ),\n *\t\t\t\t\t\t'static-text'\n *\t\t\t\t\t]\n *\t\t\t\t},\n *\n *\t\t\t\t// An object schema, specific for styles.\n *\t\t\t\tstyle: {\n *\t\t\t\t\tcolor: 'red',\n *\t\t\t\t\tbackgroundColor: bind.to( 'qux', () => { ... } )\n *\t\t\t\t}\n *\t\t\t}\n *\t\t} );\n *\n * Text nodes can also have complex values:\n *\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\t// Will render a \"foo\" text node.\n *\t\tnew Template( {\n *\t\t\ttext: 'foo'\n *\t\t} );\n *\n *\t\t// Will render a \"static text: {observable.foo}\" text node.\n *\t\t// The text of the node will be updated as the \"foo\" attribute changes.\n *\t\tnew Template( {\n *\t\t\ttext: [\n *\t\t\t\t'static text: ',\n *\t\t\t\tbind.to( 'foo', () => { ... } )\n *\t\t\t]\n *\t\t} );\n *\n * @typedef module:ui/template~TemplateValueSchema\n * @type {Object|String|Array}\n */\n\n/**\n * Describes an event listener attached to an HTML element. Such listener can propagate DOM events\n * through an {@link module:utils/observablemixin~Observable} instance, execute custom callbacks\n * or both, if necessary.\n *\n * Also see:\n * * {@link module:ui/template~TemplateDefinition} to learn more about template definitions,\n * * {@link module:ui/template~BindChain#to `to()`} method to learn more about bindings.\n *\n * Check out different ways of attaching event listeners below:\n *\n *\t\t// Bind helper will propagate events through the observable.\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\ton: {\n *\t\t\t\t// An object schema. The observable will fire the \"clicked\" event upon DOM \"click\".\n *\t\t\t\tclick: bind.to( 'clicked' )\n *\n *\t\t\t\t// An object schema. It will work for \"click\" event on \"a.foo\" children only.\n *\t\t\t\t'click@a.foo': bind.to( 'clicked' )\n *\n *\t\t\t\t// An array schema, makes the observable propagate multiple events.\n *\t\t\t\tclick: [\n *\t\t\t\t\tbind.to( 'clicked' ),\n *\t\t\t\t\tbind.to( 'executed' )\n *\t\t\t\t],\n *\n *\t\t\t\t// An array schema with a custom callback.\n *\t\t\t\t'click@a.foo': {\n *\t\t\t\t\tbind.to( 'clicked' ),\n *\t\t\t\t\tbind.to( evt => {\n *\t\t\t\t\t\tconsole.log( `${ evt.target } has been clicked!` );\n *\t\t\t\t\t} }\n *\t\t\t\t}\n *\t\t\t}\n *\t\t} );\n *\n * @typedef module:ui/template~TemplateListenerSchema\n * @type {Object|String|Array}\n */\n\n/**\n * The return value of {@link ~Template.bind `Template.bind()`}. It provides `to()` and `if()`\n * methods to create the {@link module:utils/observablemixin~Observable observable} attribute and event bindings.\n *\n * @interface module:ui/template~BindChain\n */\n\n/**\n * Binds an {@link module:utils/observablemixin~Observable observable} to either:\n *\n * * an HTML element attribute or a text node `textContent`, so it remains in sync with the observable\n * attribute as it changes,\n * * or an HTML element DOM event, so the DOM events are propagated through an observable.\n *\n * Some common use cases of `to()` bindings are presented below:\n *\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'p',\n *\t\t\tattributes: {\n *\t\t\t\t// class=\"...\" attribute gets bound to `observable#a`\n *\t\t\t\tclass: bind.to( 'a' )\n *\t\t\t},\n *\t\t\tchildren: [\n *\t\t\t\t// <p>...</p> gets bound to observable#b; always `toUpperCase()`.\n *\t\t\t\t{\n *\t\t\t\t\ttext: bind.to( 'b', ( value, node ) => value.toUpperCase() )\n *\t\t\t\t}\n *\t\t\t],\n *\t\t\ton: {\n *\t\t\t\tclick: [\n *\t\t\t\t\t// An observable will fire \"clicked\" upon \"click\" in the DOM.\n *\t\t\t\t\tbind.to( 'clicked' ),\n *\n *\t\t\t\t\t// A custom callback will be executed upon \"click\" in the DOM.\n *\t\t\t\t\tbind.to( () => {\n *\t\t\t\t\t\t...\n *\t\t\t\t\t} )\n *\t\t\t\t]\n *\t\t\t}\n *\t\t} ).render();\n *\n * Learn more about using `to()` in the {@link module:ui/template~TemplateValueSchema} and\n * {@link module:ui/template~TemplateListenerSchema}.\n *\n * @method #to\n * @param {String|Function} eventNameOrFunctionOrAttribute An attribute name of\n * {@link module:utils/observablemixin~Observable} or a DOM event name or an event callback.\n * @param {Function} [callback] Allows for processing of the value. Accepts `Node` and `value` as arguments.\n * @returns {module:ui/template~TemplateBinding}\n */\n\n/**\n * Binds an {@link module:utils/observablemixin~Observable observable} to an HTML element attribute or a text\n * node `textContent` so it remains in sync with the observable attribute as it changes.\n *\n * Unlike {@link module:ui/template~BindChain#to}, it controls the presence of the attribute or `textContent`\n * depending on the \"falseness\" of an {@link module:utils/observablemixin~Observable} attribute.\n *\n *\t\tconst bind = Template.bind( observable, emitter );\n *\n *\t\tnew Template( {\n *\t\t\ttag: 'input',\n *\t\t\tattributes: {\n *\t\t\t\t// <input checked> when `observable#a` is not undefined/null/false/''\n *\t\t\t\t// <input> when `observable#a` is undefined/null/false\n *\t\t\t\tchecked: bind.if( 'a' )\n *\t\t\t},\n *\t\t\tchildren: [\n *\t\t\t\t{\n *\t\t\t\t\t// <input>\"b-is-not-set\"</input> when `observable#b` is undefined/null/false/''\n *\t\t\t\t\t// <input></input> when `observable#b` is not \"falsy\"\n *\t\t\t\t\ttext: bind.if( 'b', 'b-is-not-set', ( value, node ) => !value )\n *\t\t\t\t}\n *\t\t\t]\n *\t\t} ).render();\n *\n * Learn more about using `if()` in the {@link module:ui/template~TemplateValueSchema}.\n *\n * @method #if\n * @param {String} attribute An attribute name of {@link module:utils/observablemixin~Observable} used in the binding.\n * @param {String} [valueIfTrue] Value set when the {@link module:utils/observablemixin~Observable} attribute is not\n * undefined/null/false/'' (empty string).\n * @param {Function} [callback] Allows for processing of the value. Accepts `Node` and `value` as arguments.\n * @returns {module:ui/template~TemplateBinding}\n */\n\n/**\n * The {@link module:ui/template~Template#_renderNode} configuration.\n *\n * @private\n * @interface module:ui/template~RenderData\n */\n\n/**\n * Tells {@link module:ui/template~Template#_renderNode} to render\n * children into `DocumentFragment` first and then append the fragment\n * to the parent element. It is a speed optimization.\n *\n * @member {Boolean} #intoFragment\n */\n\n/**\n * A node which is being rendered.\n *\n * @member {HTMLElement|Text} #node\n */\n\n/**\n * Indicates whether the {@module:ui/template~RenderNodeOptions#node} has\n * been provided by {@module:ui/template~Template#apply}.\n *\n * @member {Boolean} #isApplying\n */\n\n/**\n * An object storing the data that helps {@module:ui/template~Template#revert}\n * bringing back an element to its initial state, i.e. before\n * {@module:ui/template~Template#apply} was called.\n *\n * @member {Object} #revertData\n */\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/node\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport { clone } from 'lodash-es';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Abstract tree view node class.\n *\n * This is an abstract class. Its constructor should not be used directly.\n * Use the {@link module:engine/view/element~Element} class to create view elements\n * or {@link module:engine/view/text~Text} class to create view text nodes.\n *\n * @abstract\n */\nexport default class Node {\n\t/**\n\t * Creates a tree view node.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Parent element. Null by default. Set by {@link module:engine/view/element~Element#_insertChild}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t\t */\n\t\tthis.parent = null;\n\t}\n\n\t/**\n\t * Index of the node in the parent element or null if the node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that view tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget index() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// No parent or child doesn't exist in parent's children.\n\t\tif ( ( pos = this.parent.getChildIndex( this ) ) == -1 ) {\n\t\t\t/**\n\t\t\t * The node's parent does not contain this node. It means that the document tree is corrupted.\n\t\t\t *\n\t\t\t * @error view-node-not-found-in-parent\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-node-not-found-in-parent: The node\\'s parent does not contain this node.', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Node's next sibling, or `null` if it is the last child.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nextSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index + 1 ) ) || null;\n\t}\n\n\t/**\n\t * Node's previous sibling, or `null` if it is the first child.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget previousSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index - 1 ) ) || null;\n\t}\n\n\t/**\n\t * Top-most ancestor of the node. If the node has no parent it is the root itself.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\tlet root = this; // eslint-disable-line consistent-this\n\n\t\twhile ( root.parent ) {\n\t\t\troot = root.parent;\n\t\t}\n\n\t\treturn root;\n\t}\n\n\t/**\n\t * {@link module:engine/view/document~Document View document} that owns this node, or `null` if the node is inside\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment}.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/document~Document|null}\n\t */\n\tget document() {\n\t\t// Parent might be Node, null or DocumentFragment.\n\t\tif ( this.parent instanceof Node ) {\n\t\t\treturn this.parent.document;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Gets a path to the node. The path is an array containing indices of consecutive ancestors of this node,\n\t * beginning from {@link module:engine/view/node~Node#root root}, down to this node's index.\n\t *\n\t *\t\tconst abc = downcastWriter.createText( 'abc' );\n\t *\t\tconst foo = downcastWriter.createText( 'foo' );\n\t *\t\tconst h1 = downcastWriter.createElement( 'h1', null, downcastWriter.createText( 'header' ) );\n\t *\t\tconst p = downcastWriter.createElement( 'p', null, [ abc, foo ] );\n\t *\t\tconst div = downcastWriter.createElement( 'div', null, [ h1, p ] );\n\t *\t\tfoo.getPath(); // Returns [ 1, 3 ]. `foo` is in `p` which is in `div`. `p` starts at offset 1, while `foo` at 3.\n\t *\t\th1.getPath(); // Returns [ 0 ].\n\t *\t\tdiv.getPath(); // Returns [].\n\t *\n\t * @returns {Array.<Number>} The path.\n\t */\n\tgetPath() {\n\t\tconst path = [];\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\twhile ( node.parent ) {\n\t\t\tpath.unshift( node.index );\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this node.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this node will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from node's parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/element~Element} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both nodes.\n\t *\n\t * @param {module:engine/view/node~Node} node The second node.\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` both nodes will be considered \"ancestors\" too.\n\t * Which means that if e.g. node A is inside B, then their common ancestor will be B.\n\t * @returns {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( node, options = {} ) {\n\t\tconst ancestorsA = this.getAncestors( options );\n\t\tconst ancestorsB = node.getAncestors( options );\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns whether this node is before given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/view/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/view/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisBefore( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisPath = this.getPath();\n\t\tconst nodePath = node.getPath();\n\n\t\tconst result = compareArrays( thisPath, nodePath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn true;\n\n\t\t\tcase 'extension':\n\t\t\t\treturn false;\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < nodePath[ result ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns whether this node is after given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/view/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/view/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisAfter( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// In other cases, just check if the `node` is before, and return the opposite.\n\t\treturn !this.isBefore( node );\n\t}\n\n\t/**\n\t * Removes node from parent.\n\t *\n\t * @protected\n\t */\n\t_remove() {\n\t\tthis.parent._removeChildren( this.index );\n\t}\n\n\t/**\n\t * @protected\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Changed node.\n\t * @fires change\n\t */\n\t_fireChange( type, node ) {\n\t\tthis.fire( 'change:' + type, node );\n\n\t\tif ( this.parent ) {\n\t\t\tthis.parent._fireChange( type, node );\n\t\t}\n\t}\n\n\t/**\n\t * Custom toJSON method to solve child-parent circular dependencies.\n\t *\n\t * @returns {Object} Clone of this object with the parent property removed.\n\t */\n\ttoJSON() {\n\t\tconst json = clone( this );\n\n\t\t// Due to circular references we need to remove parent reference.\n\t\tdelete json.parent;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Checks whether this view object is of the given type.\n\t *\n\t * This method is useful when processing view tree objects that are of unknown type. For example, a function\n\t * may return {@link module:engine/view/documentfragment~DocumentFragment} or {@link module:engine/view/node~Node}\n\t * that can be either text node or element. This method can be used to check what kind of object is returned.\n\t *\n\t *\t\tobj.is( 'node' ); // true for any node, false for document fragment and text fragment\n\t *\t\tobj.is( 'documentFragment' ); // true for document fragment, false for any node\n\t *\t\tobj.is( 'element' ); // true for any element, false for text node or document fragment\n\t *\t\tobj.is( 'element', 'p' ); // true only for element which name is 'p'\n\t *\t\tobj.is( 'p' ); // shortcut for obj.is( 'element', 'p' )\n\t *\t\tobj.is( 'text' ); // true for text node, false for element and document fragment\n\t *\n\t * @param {'element'|'containerElement'|'attributeElement'|'emptyElement'|'uiElement'|\n\t * 'rootElement'|'documentFragment'|'text'|'textProxy'} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'node';\n\t}\n\n\t/**\n\t * Clones this node.\n\t *\n\t * @protected\n\t * @method #_clone\n\t * @returns {module:engine/view/node~Node} Clone of this node.\n\t */\n\n\t/**\n\t * Checks if provided node is similar to this node.\n\t *\n\t * @method #isSimilar\n\t * @returns {Boolean} True if nodes are similar.\n\t */\n}\n\n/**\n * Fired when list of {@link module:engine/view/element~Element elements} children changes.\n *\n * Change event is bubbled – it is fired on all ancestors.\n *\n * @event change:children\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * Fired when list of {@link module:engine/view/element~Element elements} attributes changes.\n *\n * Change event is bubbled – it is fired on all ancestors.\n *\n * @event change:attributes\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * Fired when {@link module:engine/view/text~Text text nodes} data changes.\n *\n * Change event is bubbled – it is fired on all ancestors.\n *\n * @event change:text\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * @event change\n */\n\nmix( Node, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/node\n */\n\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Model node. Most basic structure of model tree.\n *\n * This is an abstract class that is a base for other classes representing different nodes in model.\n *\n * **Note:** If a node is detached from the model tree, you can manipulate it using it's API.\n * However, it is **very important** that nodes already attached to model tree should be only changed through\n * {@link module:engine/model/writer~Writer Writer API}.\n *\n * Changes done by `Node` methods, like {@link module:engine/model/element~Element#_insertChild _insertChild} or\n * {@link module:engine/model/node~Node#_setAttribute _setAttribute}\n * do not generate {@link module:engine/model/operation/operation~Operation operations}\n * which are essential for correct editor work if you modify nodes in {@link module:engine/model/document~Document document} root.\n *\n * The flow of working on `Node` (and classes that inherits from it) is as such:\n * 1. You can create a `Node` instance, modify it using it's API.\n * 2. Add `Node` to the model using `Batch` API.\n * 3. Change `Node` that was already added to the model using `Batch` API.\n *\n * Similarly, you cannot use `Batch` API on a node that has not been added to the model tree, with the exception\n * of {@link module:engine/model/writer~Writer#insert inserting} that node to the model tree.\n *\n * Be aware that using {@link module:engine/model/writer~Writer#remove remove from Batch API} does not allow to use `Node` API because\n * the information about `Node` is still kept in model document.\n *\n * In case of {@link module:engine/model/element~Element element node}, adding and removing children also counts as changing a node and\n * follows same rules.\n */\nexport default class Node {\n\t/**\n\t * Creates a model node.\n\t *\n\t * This is an abstract class, so this constructor should not be used directly.\n\t *\n\t * @abstract\n\t * @param {Object} [attrs] Node's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\tconstructor( attrs ) {\n\t\t/**\n\t\t * Parent of this node. It could be {@link module:engine/model/element~Element}\n\t\t * or {@link module:engine/model/documentfragment~DocumentFragment}.\n\t\t * Equals to `null` if the node has no parent.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t\t */\n\t\tthis.parent = null;\n\n\t\t/**\n\t\t * Attributes set on this node.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/model/node~Node#_attrs\n\t\t */\n\t\tthis._attrs = toMap( attrs );\n\t}\n\n\t/**\n\t * Index of this node in it's parent or `null` if the node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that model tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget index() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( ( pos = this.parent.getChildIndex( this ) ) === null ) {\n\t\t\tthrow new CKEditorError( 'model-node-not-found-in-parent: The node\\'s parent does not contain this node.', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Offset at which this node starts in it's parent. It is equal to the sum of {@link #offsetSize offsetSize}\n\t * of all it's previous siblings. Equals to `null` if node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that model tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget startOffset() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( ( pos = this.parent.getChildStartOffset( this ) ) === null ) {\n\t\t\tthrow new CKEditorError( 'model-node-not-found-in-parent: The node\\'s parent does not contain this node.', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Offset size of this node. Represents how much \"offset space\" is occupied by the node in it's parent.\n\t * It is important for {@link module:engine/model/position~Position position}. When node has `offsetSize` greater than `1`, position\n\t * can be placed between that node start and end. `offsetSize` greater than `1` is for nodes that represents more\n\t * than one entity, i.e. {@link module:engine/model/text~Text text node}.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn 1;\n\t}\n\n\t/**\n\t * Offset at which this node ends in it's parent. It is equal to the sum of this node's\n\t * {@link module:engine/model/node~Node#startOffset start offset} and {@link #offsetSize offset size}.\n\t * Equals to `null` if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget endOffset() {\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.startOffset + this.offsetSize;\n\t}\n\n\t/**\n\t * Node's next sibling or `null` if the node is a last child of it's parent or if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget nextSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index + 1 ) ) || null;\n\t}\n\n\t/**\n\t * Node's previous sibling or `null` if the node is a first child of it's parent or if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget previousSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index - 1 ) ) || null;\n\t}\n\n\t/**\n\t * The top-most ancestor of the node. If node has no parent it is the root itself. If the node is a part\n\t * of {@link module:engine/model/documentfragment~DocumentFragment}, it's `root` is equal to that `DocumentFragment`.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\tlet root = this; // eslint-disable-line consistent-this\n\n\t\twhile ( root.parent ) {\n\t\t\troot = root.parent;\n\t\t}\n\n\t\treturn root;\n\t}\n\n\t/**\n\t * {@link module:engine/model/document~Document Document} that owns this node or `null` if the node has no parent or is inside\n\t * a {@link module:engine/model/documentfragment~DocumentFragment DocumentFragment}.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/document~Document|null}\n\t */\n\tget document() {\n\t\t// This is a top element of a sub-tree.\n\t\tif ( this.root == this ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Root may be `DocumentFragment` which does not have document property.\n\t\treturn this.root.document || null;\n\t}\n\n\t/**\n\t * Gets path to the node. The path is an array containing starting offsets of consecutive ancestors of this node,\n\t * beginning from {@link module:engine/model/node~Node#root root}, down to this node's starting offset. The path can be used to\n\t * create {@link module:engine/model/position~Position Position} instance.\n\t *\n\t *\t\tconst abc = new Text( 'abc' );\n\t *\t\tconst foo = new Text( 'foo' );\n\t *\t\tconst h1 = new Element( 'h1', null, new Text( 'header' ) );\n\t *\t\tconst p = new Element( 'p', null, [ abc, foo ] );\n\t *\t\tconst div = new Element( 'div', null, [ h1, p ] );\n\t *\t\tfoo.getPath(); // Returns [ 1, 3 ]. `foo` is in `p` which is in `div`. `p` starts at offset 1, while `foo` at 3.\n\t *\t\th1.getPath(); // Returns [ 0 ].\n\t *\t\tdiv.getPath(); // Returns [].\n\t *\n\t * @returns {Array.<Number>} The path.\n\t */\n\tgetPath() {\n\t\tconst path = [];\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\twhile ( node.parent ) {\n\t\t\tpath.unshift( node.startOffset );\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this node.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this node will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from node's parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both nodes.\n\t *\n\t * @param {module:engine/model/node~Node} node The second node.\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` both nodes will be considered \"ancestors\" too.\n\t * Which means that if e.g. node A is inside B, then their common ancestor will be B.\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( node, options = {} ) {\n\t\tconst ancestorsA = this.getAncestors( options );\n\t\tconst ancestorsB = node.getAncestors( options );\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns whether this node is before given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/model/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/model/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisBefore( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisPath = this.getPath();\n\t\tconst nodePath = node.getPath();\n\n\t\tconst result = compareArrays( thisPath, nodePath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn true;\n\n\t\t\tcase 'extension':\n\t\t\t\treturn false;\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < nodePath[ result ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns whether this node is after given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/model/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/model/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisAfter( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// In other cases, just check if the `node` is before, and return the opposite.\n\t\treturn !this.isBefore( node );\n\t}\n\n\t/**\n\t * Checks if the node has an attribute with given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on node, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on node.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._attrs.entries();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._attrs.keys();\n\t}\n\n\t/**\n\t * Converts `Node` to plain object and returns it.\n\t *\n\t * @returns {Object} `Node` converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = {};\n\n\t\t// Serializes attributes to the object.\n\t\t// attributes = { a: 'foo', b: 1, c: true }.\n\t\tif ( this._attrs.size ) {\n\t\t\tjson.attributes = Array.from( this._attrs ).reduce( ( result, attr ) => {\n\t\t\t\tresult[ attr[ 0 ] ] = attr[ 1 ];\n\n\t\t\t\treturn result;\n\t\t\t}, {} );\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a copy of this node, that is a node with exactly same attributes, and returns it.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/node~Node} Node with same attributes as this node.\n\t */\n\t_clone() {\n\t\treturn new Node( this._attrs );\n\t}\n\n\t/**\n\t * Removes this node from it's parent.\n\t *\n\t * @see module:engine/model/writer~Writer#remove\n\t * @protected\n\t */\n\t_remove() {\n\t\tthis.parent._removeChildren( this.index );\n\t}\n\n\t/**\n\t * Sets attribute on the node. If attribute with the same key already is set, it's value is overwritten.\n\t *\n\t * @see module:engine/model/writer~Writer#setAttribute\n\t * @protected\n\t * @param {String} key Key of attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\t_setAttribute( key, value ) {\n\t\tthis._attrs.set( key, value );\n\t}\n\n\t/**\n\t * Removes all attributes from the node and sets given attributes.\n\t *\n\t * @see module:engine/model/writer~Writer#setAttributes\n\t * @protected\n\t * @param {Object} [attrs] Attributes to set. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\t_setAttributesTo( attrs ) {\n\t\tthis._attrs = toMap( attrs );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the node.\n\t *\n\t * @see module:engine/model/writer~Writer#removeAttribute\n\t * @protected\n\t * @param {String} key Key of attribute to remove.\n\t * @returns {Boolean} `true` if the attribute was set on the element, `false` otherwise.\n\t */\n\t_removeAttribute( key ) {\n\t\treturn this._attrs.delete( key );\n\t}\n\n\t/**\n\t * Removes all attributes from the node.\n\t *\n\t * @see module:engine/model/writer~Writer#clearAttributes\n\t * @protected\n\t */\n\t_clearAttributes() {\n\t\tthis._attrs.clear();\n\t}\n\n\t/**\n\t * Checks whether given model tree object is of given type.\n\t *\n\t * This method is useful when processing model tree objects that are of unknown type. For example, a function\n\t * may return {@link module:engine/model/documentfragment~DocumentFragment} or {@link module:engine/model/node~Node}\n\t * that can be either text node or element. This method can be used to check what kind of object is returned.\n\t *\n\t *\t\tobj.is( 'node' ); // true for any node, false for document fragment and text fragment\n\t *\t\tobj.is( 'documentFragment' ); // true for document fragment, false for any node\n\t *\t\tobj.is( 'element' ); // true for any element, false for text node or document fragment\n\t *\t\tobj.is( 'element', 'paragraph' ); // true only for element which name is 'paragraph'\n\t *\t\tobj.is( 'paragraph' ); // shortcut for obj.is( 'element', 'paragraph' )\n\t *\t\tobj.is( 'text' ); // true for text node, false for element and document fragment\n\t *\t\tobj.is( 'textProxy' ); // true for text proxy object\n\t *\n\t * @method #is\n\t * @param {'element'|'rootElement'|'text'|'textProxy'|'documentFragment'} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'node';\n\t}\n}\n\n/**\n * The node's parent does not contain this node.\n *\n * This error may be thrown from corrupted trees.\n *\n * @error model-node-not-found-in-parent\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/nodelist\n */\n\nimport Node from './node';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Provides an interface to operate on a list of {@link module:engine/model/node~Node nodes}. `NodeList` is used internally\n * in classes like {@link module:engine/model/element~Element Element}\n * or {@link module:engine/model/documentfragment~DocumentFragment DocumentFragment}.\n */\nexport default class NodeList {\n\t/**\n\t * Creates an empty node list.\n\t *\n\t * @protected\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes contained in this node list.\n\t */\n\tconstructor( nodes ) {\n\t\t/**\n\t\t * Nodes contained in this node list.\n\t\t *\n\t\t * @private\n\t\t * @member {Array.<module:engine/model/node~Node>}\n\t\t */\n\t\tthis._nodes = [];\n\n\t\tif ( nodes ) {\n\t\t\tthis._insertNodes( 0, nodes );\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all nodes contained inside this node list.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._nodes[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Number of nodes contained inside this node list.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget length() {\n\t\treturn this._nodes.length;\n\t}\n\n\t/**\n\t * Sum of {@link module:engine/model/node~Node#offsetSize offset sizes} of all nodes contained inside this node list.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget maxOffset() {\n\t\treturn this._nodes.reduce( ( sum, node ) => sum + node.offsetSize, 0 );\n\t}\n\n\t/**\n\t * Gets the node at the given index. Returns `null` if incorrect index was passed.\n\t *\n\t * @param {Number} index Index of node.\n\t * @returns {module:engine/model/node~Node|null} Node at given index.\n\t */\n\tgetNode( index ) {\n\t\treturn this._nodes[ index ] || null;\n\t}\n\n\t/**\n\t * Returns an index of the given node. Returns `null` if given node is not inside this node list.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number|null} Child node's index.\n\t */\n\tgetNodeIndex( node ) {\n\t\tconst index = this._nodes.indexOf( node );\n\n\t\treturn index == -1 ? null : index;\n\t}\n\n\t/**\n\t * Returns the starting offset of given node. Starting offset is equal to the sum of\n\t * {@link module:engine/model/node~Node#offsetSize offset sizes} of all nodes that are before this node in this node list.\n\t *\n\t * @param {module:engine/model/node~Node} node Node to look for.\n\t * @returns {Number|null} Node's starting offset.\n\t */\n\tgetNodeStartOffset( node ) {\n\t\tconst index = this.getNodeIndex( node );\n\n\t\treturn index === null ? null : this._nodes.slice( 0, index ).reduce( ( sum, node ) => sum + node.offsetSize, 0 );\n\t}\n\n\t/**\n\t * Converts index to offset in node list.\n\t *\n\t * Returns starting offset of a node that is at given index. Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * `model-nodelist-index-out-of-bounds` if given index is less than `0` or more than {@link #length}.\n\t *\n\t * @param {Number} index Node's index.\n\t * @returns {Number} Node's starting offset.\n\t */\n\tindexToOffset( index ) {\n\t\tif ( index == this._nodes.length ) {\n\t\t\treturn this.maxOffset;\n\t\t}\n\n\t\tconst node = this._nodes[ index ];\n\n\t\tif ( !node ) {\n\t\t\t/**\n\t\t\t * Given index cannot be found in the node list.\n\t\t\t *\n\t\t\t * @error nodelist-index-out-of-bounds\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.', this );\n\t\t}\n\n\t\treturn this.getNodeStartOffset( node );\n\t}\n\n\t/**\n\t * Converts offset in node list to index.\n\t *\n\t * Returns index of a node that occupies given offset. Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * `model-nodelist-offset-out-of-bounds` if given offset is less than `0` or more than {@link #maxOffset}.\n\t *\n\t * @param {Number} offset Offset to look for.\n\t * @returns {Number} Index of a node that occupies given offset.\n\t */\n\toffsetToIndex( offset ) {\n\t\tlet totalOffset = 0;\n\n\t\tfor ( const node of this._nodes ) {\n\t\t\tif ( offset >= totalOffset && offset < totalOffset + node.offsetSize ) {\n\t\t\t\treturn this.getNodeIndex( node );\n\t\t\t}\n\n\t\t\ttotalOffset += node.offsetSize;\n\t\t}\n\n\t\tif ( totalOffset != offset ) {\n\t\t\t/**\n\t\t\t * Given offset cannot be found in the node list.\n\t\t\t *\n\t\t\t * @error model-nodelist-offset-out-of-bounds\n\t\t\t * @param {Number} offset\n\t\t\t * @param {module:engine/model/nodelist~NodeList} nodeList Stringified node list.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.',\n\t\t\t\tthis,\n\t\t\t\t{\n\t\t\t\t\toffset,\n\t\t\t\t\tnodeList: this\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn this.length;\n\t}\n\n\t/**\n\t * Inserts given nodes at given index.\n\t *\n\t * @protected\n\t * @param {Number} index Index at which nodes should be inserted.\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes to be inserted.\n\t */\n\t_insertNodes( index, nodes ) {\n\t\t// Validation.\n\t\tfor ( const node of nodes ) {\n\t\t\tif ( !( node instanceof Node ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to insert an object which is not a Node instance.\n\t\t\t\t *\n\t\t\t\t * @error nodelist-insertNodes-not-node\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.',\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._nodes.splice( index, 0, ...nodes );\n\t}\n\n\t/**\n\t * Removes one or more nodes starting at the given index.\n\t *\n\t * @protected\n\t * @param {Number} indexStart Index of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/model/node~Node>} Array containing removed nodes.\n\t */\n\t_removeNodes( indexStart, howMany = 1 ) {\n\t\treturn this._nodes.splice( indexStart, howMany );\n\t}\n\n\t/**\n\t * Converts `NodeList` instance to an array containing nodes that were inserted in the node list. Nodes\n\t * are also converted to their plain object representation.\n\t *\n\t * @returns {Array.<module:engine/model/node~Node>} `NodeList` instance converted to `Array`.\n\t */\n\ttoJSON() {\n\t\treturn this._nodes.map( node => node.toJSON() );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/treewalker\n */\n\nimport Element from './element';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport Position from './position';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Position iterator class. It allows to iterate forward and backward over the document.\n */\nexport default class TreeWalker {\n\t/**\n\t * Creates a range iterator. All parameters are optional, but you have to specify either `boundaries` or `startPosition`.\n\t *\n\t * @constructor\n\t * @param {Object} options Object with configuration.\n\t * @param {module:engine/view/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {module:engine/view/position~Position} [options.startPosition] Starting position.\n\t * @param {'forward'|'backward'} [options.direction='forward'] Walking direction.\n\t * @param {Boolean} [options.singleCharacters=false] Flag indicating whether all characters from\n\t * {@link module:engine/view/text~Text} should be returned as one {@link module:engine/view/text~Text} (`false`) ore one by one as\n\t * {@link module:engine/view/textproxy~TextProxy} (`true`).\n\t * @param {Boolean} [options.shallow=false] Flag indicating whether iterator should enter elements or not. If the\n\t * iterator is shallow child nodes of any iterated node will not be returned along with `elementEnd` tag.\n\t * @param {Boolean} [options.ignoreElementEnd=false] Flag indicating whether iterator should ignore `elementEnd`\n\t * tags. If the option is true walker will not return a parent node of start position. If this option is `true`\n\t * each {@link module:engine/view/element~Element} will be returned once, while if the option is `false` they might be returned\n\t * twice: for `'elementStart'` and `'elementEnd'`.\n\t */\n\tconstructor( options = {} ) {\n\t\tif ( !options.boundaries && !options.startPosition ) {\n\t\t\t/**\n\t\t\t * Neither boundaries nor starting position have been defined.\n\t\t\t *\n\t\t\t * @error view-tree-walker-no-start-position\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.',\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tif ( options.direction && options.direction != 'forward' && options.direction != 'backward' ) {\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.',\n\t\t\t\toptions.startPosition,\n\t\t\t\t{ direction: options.direction }\n\t\t\t);\n\t\t}\n\n\t\t/**\n\t\t * Iterator boundaries.\n\t\t *\n\t\t * When the iterator is walking `'forward'` on the end of boundary or is walking `'backward'`\n\t\t * on the start of boundary, then `{ done: true }` is returned.\n\t\t *\n\t\t * If boundaries are not defined they are set before first and after last child of the root node.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/range~Range} module:engine/view/treewalker~TreeWalker#boundaries\n\t\t */\n\t\tthis.boundaries = options.boundaries || null;\n\n\t\t/**\n\t\t * Iterator position. If start position is not defined then position depends on {@link #direction}. If direction is\n\t\t * `'forward'` position starts form the beginning, when direction is `'backward'` position starts from the end.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position} module:engine/view/treewalker~TreeWalker#position\n\t\t */\n\t\tif ( options.startPosition ) {\n\t\t\tthis.position = Position._createAt( options.startPosition );\n\t\t} else {\n\t\t\tthis.position = Position._createAt( options.boundaries[ options.direction == 'backward' ? 'end' : 'start' ] );\n\t\t}\n\n\t\t/**\n\t\t * Walking direction. Defaults `'forward'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'backward'|'forward'} module:engine/view/treewalker~TreeWalker#direction\n\t\t */\n\t\tthis.direction = options.direction || 'forward';\n\n\t\t/**\n\t\t * Flag indicating whether all characters from {@link module:engine/view/text~Text} should be returned as one\n\t\t * {@link module:engine/view/text~Text} or one by one as {@link module:engine/view/textproxy~TextProxy}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#singleCharacters\n\t\t */\n\t\tthis.singleCharacters = !!options.singleCharacters;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should enter elements or not. If the iterator is shallow child nodes of any\n\t\t * iterated node will not be returned along with `elementEnd` tag.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#shallow\n\t\t */\n\t\tthis.shallow = !!options.shallow;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should ignore `elementEnd` tags. If set to `true`, walker will not\n\t\t * return a parent node of the start position. Each {@link module:engine/view/element~Element} will be returned once.\n\t\t * When set to `false` each element might be returned twice: for `'elementStart'` and `'elementEnd'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#ignoreElementEnd\n\t\t */\n\t\tthis.ignoreElementEnd = !!options.ignoreElementEnd;\n\n\t\t/**\n\t\t * Start boundary parent.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/node~Node} module:engine/view/treewalker~TreeWalker#_boundaryStartParent\n\t\t */\n\t\tthis._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null;\n\n\t\t/**\n\t\t * End boundary parent.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/node~Node} module:engine/view/treewalker~TreeWalker#_boundaryEndParent\n\t\t */\n\t\tthis._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<module:engine/view/treewalker~TreeWalkerValue>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves {@link #position} in the {@link #direction} skipping values as long as the callback function returns `true`.\n\t *\n\t * For example:\n\t *\n\t * \t\twalker.skip( value => value.type == 'text' ); // <p>{}foo</p> -> <p>foo[]</p>\n\t * \t\twalker.skip( value => true ); // Move the position to the end: <p>{}foo</p> -> <p>foo</p>[]\n\t * \t\twalker.skip( value => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/view/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t */\n\tskip( skip ) {\n\t\tlet done, value, prevPosition;\n\n\t\tdo {\n\t\t\tprevPosition = this.position;\n\n\t\t\t( { done, value } = this.next() );\n\t\t} while ( !done && skip( value ) );\n\n\t\tif ( !done ) {\n\t\t\tthis.position = prevPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the next tree walker's value.\n\t *\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} Object implementing iterator interface, returning\n\t * information about taken step.\n\t */\n\tnext() {\n\t\tif ( this.direction == 'forward' ) {\n\t\t\treturn this._next();\n\t\t} else {\n\t\t\treturn this._previous();\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step forward in view. Moves the {@link #position} to the next position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done `true` if iterator is done, `false` otherwise.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_next() {\n\t\tlet position = this.position.clone();\n\t\tconst previousPosition = this.position;\n\t\tconst parent = position.parent;\n\n\t\t// We are at the end of the root.\n\t\tif ( parent.parent === null && position.offset === parent.childCount ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent === this._boundaryEndParent && position.offset == this.boundaries.end.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just after current position.\n\t\tlet node;\n\n\t\t// Text is a specific parent because it contains string instead of child nodes.\n\t\tif ( parent instanceof Text ) {\n\t\t\tif ( position.isAtEnd ) {\n\t\t\t\t// Prevent returning \"elementEnd\" for Text node. Skip that value and return the next walker step.\n\t\t\t\tthis.position = Position._createAfter( parent );\n\n\t\t\t\treturn this._next();\n\t\t\t}\n\n\t\t\tnode = parent.data[ position.offset ];\n\t\t} else {\n\t\t\tnode = parent.getChild( position.offset );\n\t\t}\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition = new Position( node, 0 );\n\t\t\t} else {\n\t\t\t\tposition.offset++;\n\t\t\t}\n\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t} else if ( node instanceof Text ) {\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tposition = new Position( node, 0 );\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\tlet charactersCount = node.data.length;\n\t\t\t\tlet item;\n\n\t\t\t\t// If text stick out of walker range, we need to cut it and wrap in TextProxy.\n\t\t\t\tif ( node == this._boundaryEndParent ) {\n\t\t\t\t\tcharactersCount = this.boundaries.end.offset;\n\t\t\t\t\titem = new TextProxy( node, 0, charactersCount );\n\t\t\t\t\tposition = Position._createAfter( item );\n\t\t\t\t} else {\n\t\t\t\t\titem = new TextProxy( node, 0, node.data.length );\n\t\t\t\t\t// If not just keep moving forward.\n\t\t\t\t\tposition.offset++;\n\t\t\t\t}\n\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t\t}\n\t\t} else if ( typeof node == 'string' ) {\n\t\t\tlet textLength;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\ttextLength = 1;\n\t\t\t} else {\n\t\t\t\t// Check if text stick out of walker range.\n\t\t\t\tconst endOffset = parent === this._boundaryEndParent ? this.boundaries.end.offset : parent.data.length;\n\n\t\t\t\ttextLength = endOffset - position.offset;\n\t\t\t}\n\n\t\t\tconst textProxy = new TextProxy( parent, position.offset, textLength );\n\n\t\t\tposition.offset += textLength;\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'text', textProxy, previousPosition, position, textLength );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the end of current `parent`.\n\t\t\tposition = Position._createAfter( parent );\n\t\t\tthis.position = position;\n\n\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\treturn this._formatReturnValue( 'elementEnd', parent, previousPosition, position );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step backward in view. Moves the {@link #position} to the previous position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_previous() {\n\t\tlet position = this.position.clone();\n\t\tconst previousPosition = this.position;\n\t\tconst parent = position.parent;\n\n\t\t// We are at the beginning of the root.\n\t\tif ( parent.parent === null && position.offset === 0 ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent == this._boundaryStartParent && position.offset == this.boundaries.start.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just before current position.\n\t\tlet node;\n\n\t\t// Text {@link module:engine/view/text~Text} element is a specific parent because contains string instead of child nodes.\n\t\tif ( parent instanceof Text ) {\n\t\t\tif ( position.isAtStart ) {\n\t\t\t\t// Prevent returning \"elementStart\" for Text node. Skip that value and return the next walker step.\n\t\t\t\tthis.position = Position._createBefore( parent );\n\n\t\t\t\treturn this._previous();\n\t\t\t}\n\n\t\t\tnode = parent.data[ position.offset - 1 ];\n\t\t} else {\n\t\t\tnode = parent.getChild( position.offset - 1 );\n\t\t}\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition = new Position( node, node.childCount );\n\t\t\t\tthis.position = position;\n\n\t\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\t\treturn this._previous();\n\t\t\t\t} else {\n\t\t\t\t\treturn this._formatReturnValue( 'elementEnd', node, previousPosition, position );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tposition.offset--;\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t\t}\n\t\t} else if ( node instanceof Text ) {\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tposition = new Position( node, node.data.length );\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._previous();\n\t\t\t} else {\n\t\t\t\tlet charactersCount = node.data.length;\n\t\t\t\tlet item;\n\n\t\t\t\t// If text stick out of walker range, we need to cut it and wrap in TextProxy.\n\t\t\t\tif ( node == this._boundaryStartParent ) {\n\t\t\t\t\tconst offset = this.boundaries.start.offset;\n\n\t\t\t\t\titem = new TextProxy( node, offset, node.data.length - offset );\n\t\t\t\t\tcharactersCount = item.data.length;\n\t\t\t\t\tposition = Position._createBefore( item );\n\t\t\t\t} else {\n\t\t\t\t\titem = new TextProxy( node, 0, node.data.length );\n\t\t\t\t\t// If not just keep moving backward.\n\t\t\t\t\tposition.offset--;\n\t\t\t\t}\n\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t\t}\n\t\t} else if ( typeof node == 'string' ) {\n\t\t\tlet textLength;\n\n\t\t\tif ( !this.singleCharacters ) {\n\t\t\t\t// Check if text stick out of walker range.\n\t\t\t\tconst startOffset = parent === this._boundaryStartParent ? this.boundaries.start.offset : 0;\n\n\t\t\t\ttextLength = position.offset - startOffset;\n\t\t\t} else {\n\t\t\t\ttextLength = 1;\n\t\t\t}\n\n\t\t\tposition.offset -= textLength;\n\n\t\t\tconst textProxy = new TextProxy( parent, position.offset, textLength );\n\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'text', textProxy, previousPosition, position, textLength );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the beginning of current `parent`.\n\t\t\tposition = Position._createBefore( parent );\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'elementStart', parent, previousPosition, position, 1 );\n\t\t}\n\t}\n\n\t/**\n\t * Format returned data and adjust `previousPosition` and `nextPosition` if reach the bound of the {@link module:engine/view/text~Text}.\n\t *\n\t * @private\n\t * @param {module:engine/view/treewalker~TreeWalkerValueType} type Type of step.\n\t * @param {module:engine/view/item~Item} item Item between old and new position.\n\t * @param {module:engine/view/position~Position} previousPosition Previous position of iterator.\n\t * @param {module:engine/view/position~Position} nextPosition Next position of iterator.\n\t * @param {Number} [length] Length of the item.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue}\n\t */\n\t_formatReturnValue( type, item, previousPosition, nextPosition, length ) {\n\t\t// Text is a specific parent, because contains string instead of children.\n\t\t// Walker doesn't enter to the Text except situations when walker is iterating over every single character,\n\t\t// or the bound starts/ends inside the Text. So when the position is at the beginning or at the end of the Text\n\t\t// we move it just before or just after Text.\n\t\tif ( item instanceof TextProxy ) {\n\t\t\t// Position is at the end of Text.\n\t\t\tif ( item.offsetInText + item.data.length == item.textNode.data.length ) {\n\t\t\t\tif ( this.direction == 'forward' && !( this.boundaries && this.boundaries.end.isEqual( this.position ) ) ) {\n\t\t\t\t\tnextPosition = Position._createAfter( item.textNode );\n\t\t\t\t\t// When we change nextPosition of returned value we need also update walker current position.\n\t\t\t\t\tthis.position = nextPosition;\n\t\t\t\t} else {\n\t\t\t\t\tpreviousPosition = Position._createAfter( item.textNode );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Position is at the begining ot the text.\n\t\t\tif ( item.offsetInText === 0 ) {\n\t\t\t\tif ( this.direction == 'backward' && !( this.boundaries && this.boundaries.start.isEqual( this.position ) ) ) {\n\t\t\t\t\tnextPosition = Position._createBefore( item.textNode );\n\t\t\t\t\t// When we change nextPosition of returned value we need also update walker current position.\n\t\t\t\t\tthis.position = nextPosition;\n\t\t\t\t} else {\n\t\t\t\t\tpreviousPosition = Position._createBefore( item.textNode );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdone: false,\n\t\t\tvalue: {\n\t\t\t\ttype,\n\t\t\t\titem,\n\t\t\t\tpreviousPosition,\n\t\t\t\tnextPosition,\n\t\t\t\tlength\n\t\t\t}\n\t\t};\n\t}\n}\n\n/**\n * Type of the step made by {@link module:engine/view/treewalker~TreeWalker}.\n * Possible values: `'elementStart'` if walker is at the beginning of a node, `'elementEnd'` if walker is at the end\n * of node, or `'text'` if walker traversed over single and multiple characters.\n * For {@link module:engine/view/text~Text} `elementStart` and `elementEnd` is not returned.\n *\n * @typedef {String} module:engine/view/treewalker~TreeWalkerValueType\n */\n\n/**\n * Object returned by {@link module:engine/view/treewalker~TreeWalker} when traversing tree view.\n *\n * @typedef {Object} module:engine/view/treewalker~TreeWalkerValue\n * @property {module:engine/view/treewalker~TreeWalkerValueType} type\n * @property {module:engine/view/item~Item} item Item between the old and the new positions\n * of the tree walker.\n * @property {module:engine/view/position~Position} previousPosition Previous position of the iterator.\n * * Forward iteration: For `'elementEnd'` it is the last position inside the element. For all other types it is the\n * position before the item.\n * * Backward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after item.\n * * If the position is at the beginning or at the end of the {@link module:engine/view/text~Text} it is always moved from the\n * inside of the text to its parent just before or just after that text.\n * @property {module:engine/view/position~Position} nextPosition Next position of the iterator.\n * * Forward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after the item.\n * * Backward iteration: For `'elementEnd'` it is last position inside element. For all other types it is the position\n * before the item.\n * * If the position is at the beginning or at the end of the {@link module:engine/view/text~Text} it is always moved from the\n * inside of the text to its parent just before or just after that text.\n * @property {Number} [length] Length of the item. For `'elementStart'` it is `1`. For `'text'` it is\n * the length of that text. For `'elementEnd'` it is `undefined`.\n */\n\n/**\n * Tree walking directions.\n *\n * @typedef {'forward'|'backward'} module:engine/view/treewalker~TreeWalkerDirection\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/markeroperation\n */\n\nimport Operation from './operation';\nimport Range from '../range';\n\n/**\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class MarkerOperation extends Operation {\n\t/**\n\t * @param {String} name Marker name.\n\t * @param {module:engine/model/range~Range} oldRange Marker range before the change.\n\t * @param {module:engine/model/range~Range} newRange Marker range after the change.\n\t * @param {module:engine/model/markercollection~MarkerCollection} markers Marker collection on which change should be executed.\n\t * @param {Boolean} affectsData Specifies whether the marker operation affects the data produced by the data pipeline\n\t * (is persisted in the editor's data).\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( name, oldRange, newRange, markers, affectsData, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Marker name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Marker range before the change.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range}\n\t\t */\n\t\tthis.oldRange = oldRange ? oldRange.clone() : null;\n\n\t\t/**\n\t\t * Marker range after the change.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range}\n\t\t */\n\t\tthis.newRange = newRange ? newRange.clone() : null;\n\n\t\t/**\n\t\t * Specifies whether the marker operation affects the data produced by the data pipeline\n\t\t * (is persisted in the editor's data).\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.affectsData = affectsData;\n\n\t\t/**\n\t\t * Marker collection on which change should be executed.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/markercollection~MarkerCollection}\n\t\t */\n\t\tthis._markers = markers;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'marker';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/markeroperation~MarkerOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new MarkerOperation( this.name, this.oldRange, this.newRange, this._markers, this.affectsData, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/markeroperation~MarkerOperation}\n\t */\n\tgetReversed() {\n\t\treturn new MarkerOperation( this.name, this.newRange, this.oldRange, this._markers, this.affectsData, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tconst type = this.newRange ? '_set' : '_remove';\n\n\t\tthis._markers[ type ]( this.name, this.newRange, true, this.affectsData );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tif ( this.oldRange ) {\n\t\t\tjson.oldRange = this.oldRange.toJSON();\n\t\t}\n\n\t\tif ( this.newRange ) {\n\t\t\tjson.newRange = this.newRange.toJSON();\n\t\t}\n\n\t\tdelete json._markers;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'MarkerOperation';\n\t}\n\n\t/**\n\t * Creates `MarkerOperation` object from deserialized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/markeroperation~MarkerOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\treturn new MarkerOperation(\n\t\t\tjson.name,\n\t\t\tjson.oldRange ? Range.fromJSON( json.oldRange, document ) : null,\n\t\t\tjson.newRange ? Range.fromJSON( json.newRange, document ) : null,\n\t\t\tdocument.model.markers,\n\t\t\tjson.affectsData,\n\t\t\tjson.baseVersion\n\t\t);\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/renameoperation\n */\n\nimport Operation from './operation';\nimport Element from '../element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Position from '../position';\n\n/**\n * Operation to change element's name.\n *\n * Using this class you can change element's name.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class RenameOperation extends Operation {\n\t/**\n\t * Creates an operation that changes element's name.\n\t *\n\t * @param {module:engine/model/position~Position} position Position before an element to change.\n\t * @param {String} oldName Current name of the element.\n\t * @param {String} newName New name for the element.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( position, oldName, newName, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position before an element to change.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/renameoperation~RenameOperation#position\n\t\t */\n\t\tthis.position = position;\n\t\t// This position sticks to the next node because it is a position before the node that we want to change.\n\t\tthis.position.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Current name of the element.\n\t\t *\n\t\t * @member {String} module:engine/model/operation/renameoperation~RenameOperation#oldName\n\t\t */\n\t\tthis.oldName = oldName;\n\n\t\t/**\n\t\t * New name for the element.\n\t\t *\n\t\t * @member {String} module:engine/model/operation/renameoperation~RenameOperation#newName\n\t\t */\n\t\tthis.newName = newName;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'rename';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/renameoperation~RenameOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new RenameOperation( this.position.clone(), this.oldName, this.newName, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/renameoperation~RenameOperation}\n\t */\n\tgetReversed() {\n\t\treturn new RenameOperation( this.position.clone(), this.newName, this.oldName, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst element = this.position.nodeAfter;\n\n\t\tif ( !( element instanceof Element ) ) {\n\t\t\t/**\n\t\t\t * Given position is invalid or node after it is not instance of Element.\n\t\t\t *\n\t\t\t * @error rename-operation-wrong-position\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.',\n\t\t\t\tthis\n\t\t\t);\n\t\t} else if ( element.name !== this.oldName ) {\n\t\t\t/**\n\t\t\t * Element to change has different name than operation's old name.\n\t\t\t *\n\t\t\t * @error rename-operation-wrong-name\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rename-operation-wrong-name: Element to change has different name than operation\\'s old name.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tconst element = this.position.nodeAfter;\n\n\t\telement.name = this.newName;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.position = this.position.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'RenameOperation';\n\t}\n\n\t/**\n\t * Creates `RenameOperation` object from deserialized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\treturn new RenameOperation( Position.fromJSON( json.position, document ), json.oldName, json.newName, json.baseVersion );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/dropdown/dropdownpanelview\n */\n\nimport View from '../view';\n\n/**\n * The dropdown panel view class.\n *\n * See {@link module:ui/dropdown/dropdownview~DropdownView} to learn about the common usage.\n *\n * @extends module:ui/view~View\n */\nexport default class DropdownPanelView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * Controls whether the panel is visible.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isVisible\n\t\t */\n\t\tthis.set( 'isVisible', false );\n\n\t\t/**\n\t\t * The position of the panel, relative to the parent.\n\t\t *\n\t\t * This property is reflected in the CSS class set to {@link #element} that controls\n\t\t * the position of the panel.\n\t\t *\n\t\t * @observable\n\t\t * @default 'se'\n\t\t * @member {'se'|'sw'|'ne'|'nw'} #position\n\t\t */\n\t\tthis.set( 'position', 'se' );\n\n\t\t/**\n\t\t * Collection of the child views in this panel.\n\t\t *\n\t\t * A common child type is the {@link module:ui/list/listview~ListView} and {@link module:ui/toolbar/toolbarview~ToolbarView}.\n\t\t * See {@link module:ui/dropdown/utils~addListToDropdown} and\n\t\t * {@link module:ui/dropdown/utils~addToolbarToDropdown} to learn more about child views of dropdowns.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-reset',\n\t\t\t\t\t'ck-dropdown__panel',\n\t\t\t\t\tbind.to( 'position', value => `ck-dropdown__panel_${ value }` ),\n\t\t\t\t\tbind.if( 'isVisible', 'ck-dropdown__panel-visible' )\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchildren: this.children,\n\n\t\t\ton: {\n\t\t\t\t// Drag and drop in the panel should not break the selection in the editor.\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/228\n\t\t\t\tselectstart: bind.to( evt => evt.preventDefault() )\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Focuses the view element or first item in view collection on opening dropdown's panel.\n\t *\n\t * See also {@link module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable}.\n\t */\n\tfocus() {\n\t\tif ( this.children.length ) {\n\t\t\tthis.children.first.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Focuses the view element or last item in view collection on opening dropdown's panel.\n\t *\n\t * See also {@link module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable}.\n\t */\n\tfocusLast() {\n\t\tif ( this.children.length ) {\n\t\t\tconst lastChild = this.children.last;\n\n\t\t\tif ( typeof lastChild.focusLast === 'function' ) {\n\t\t\t\tlastChild.focusLast();\n\t\t\t} else {\n\t\t\t\tlastChild.focus();\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/dropdown/dropdownview\n */\n\nimport View from '../view';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\n\nimport '../../theme/components/dropdown/dropdown.css';\n\nimport { getOptimalPosition } from '@ckeditor/ckeditor5-utils/src/dom/position';\n\n/**\n * The dropdown view class. It manages the dropdown button and dropdown panel.\n *\n * In most cases, the easiest way to create a dropdown is by using the {@link module:ui/dropdown/utils~createDropdown}\n * util:\n *\n *\t\tconst dropdown = createDropdown( locale );\n *\n *\t\t// Configure dropdown's button properties:\n *\t\tdropdown.buttonView.set( {\n *\t\t\tlabel: 'A dropdown',\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tdropdown.render();\n *\n *\t\tdropdown.panelView.element.textContent = 'Content of the panel';\n *\n *\t\t// Will render a dropdown with a panel containing a \"Content of the panel\" text.\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * If you want to add a richer content to the dropdown panel, you can use the {@link module:ui/dropdown/utils~addListToDropdown}\n * and {@link module:ui/dropdown/utils~addToolbarToDropdown} helpers. See more examples in\n * {@link module:ui/dropdown/utils~createDropdown} documentation.\n *\n * If you want to create a completely custom dropdown, then you can compose it manually:\n *\n *\t\tconst button = new DropdownButtonView( locale );\n *\t\tconst panel = new DropdownPanelView( locale );\n *\t\tconst dropdown = new DropdownView( locale, button, panel );\n *\n *\t\tbutton.set( {\n *\t\t\tlabel: 'A dropdown',\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tdropdown.render();\n *\n *\t\tpanel.element.textContent = 'Content of the panel';\n *\n *\t\t// Will render a dropdown with a panel containing a \"Content of the panel\" text.\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * However, dropdown created this way will contain little behavior. You will need to implement handlers for actions\n * such as {@link module:ui/bindings/clickoutsidehandler~clickOutsideHandler clicking outside an open dropdown}\n * (which should close it) and support for arrow keys inside the panel. Therefore, unless you really know what\n * you do and you really need to do it, it is recommended to use the {@link module:ui/dropdown/utils~createDropdown} helper.\n *\n * @extends module:ui/view~View\n */\nexport default class DropdownView extends View {\n\t/**\n\t * Creates an instance of the dropdown.\n\t *\n\t * Also see {@link #render}.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The localization services instance.\n\t * @param {module:ui/dropdown/button/dropdownbutton~DropdownButton} buttonView\n\t * @param {module:ui/dropdown/dropdownpanelview~DropdownPanelView} panelView\n\t */\n\tconstructor( locale, buttonView, panelView ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * Button of the dropdown view. Clicking the button opens the {@link #panelView}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/button/buttonview~ButtonView} #buttonView\n\t\t */\n\t\tthis.buttonView = buttonView;\n\n\t\t/**\n\t\t * Panel of the dropdown. It opens when the {@link #buttonView} is\n\t\t * {@link module:ui/button/buttonview~ButtonView#event:execute executed} (i.e. clicked).\n\t\t *\n\t\t * Child views can be added to the panel's `children` collection:\n\t\t *\n\t\t *\t\tdropdown.panelView.children.add( childView );\n\t\t *\n\t\t * See {@link module:ui/dropdown/dropdownpanelview~DropdownPanelView#children} and\n\t\t * {@link module:ui/viewcollection~ViewCollection#add}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/dropdown/dropdownpanelview~DropdownPanelView} #panelView\n\t\t */\n\t\tthis.panelView = panelView;\n\n\t\t/**\n\t\t * Controls whether the dropdown view is open, i.e. shows or hides the {@link #panelView panel}.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isOpen\n\t\t */\n\t\tthis.set( 'isOpen', false );\n\n\t\t/**\n\t\t * Controls whether the dropdown is enabled, i.e. it can be clicked and execute an action.\n\t\t *\n\t\t * See {@link module:ui/button/buttonview~ButtonView#isEnabled}.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isEnabled\n\t\t */\n\t\tthis.set( 'isEnabled', true );\n\n\t\t/**\n\t\t * (Optional) The additional CSS class set on the dropdown {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #class\n\t\t */\n\t\tthis.set( 'class' );\n\n\t\t/**\n\t\t * The position of the panel, relative to the dropdown.\n\t\t *\n\t\t * **Note**: When `'auto'`, the panel will use one of the remaining positions to stay\n\t\t * in the viewport, visible to the user. The positions correspond directly to\n\t\t * {@link module:ui/dropdown/dropdownview~DropdownView.defaultPanelPositions default panel positions}.\n\t\t *\n\t\t * **Note**: This value has an impact on the\n\t\t * {@link module:ui/dropdown/dropdownpanelview~DropdownPanelView#position} property\n\t\t * each time the panel becomes {@link #isOpen open}.\n\t\t *\n\t\t * @observable\n\t\t * @default 'auto'\n\t\t * @member {'auto'|'se'|'sw'|'ne'|'nw'} #panelPosition\n\t\t */\n\t\tthis.set( 'panelPosition', 'auto' );\n\n\t\t/**\n\t\t * Tracks information about DOM focus in the dropdown.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.focusTracker = new FocusTracker();\n\n\t\t/**\n\t\t * Instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}. It manages\n\t\t * keystrokes of the dropdown:\n\t\t *\n\t\t * * <kbd>▼</kbd> opens the dropdown,\n\t\t * * <kbd>◀</kbd> and <kbd>Esc</kbd> closes the dropdown.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new KeystrokeHandler();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-dropdown',\n\t\t\t\t\tbind.to( 'class' ),\n\t\t\t\t\tbind.if( 'isEnabled', 'ck-disabled', value => !value )\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\tbuttonView,\n\t\t\t\tpanelView\n\t\t\t]\n\t\t} );\n\n\t\tbuttonView.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck-dropdown__button',\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * A child {@link module:ui/list/listview~ListView list view} of the dropdown located\n\t\t * in its {@link module:ui/dropdown/dropdownview~DropdownView#panelView panel}.\n\t\t *\n\t\t * **Note**: Only supported when dropdown has list view added using {@link module:ui/dropdown/utils~addListToDropdown}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/list/listview~ListView} #listView\n\t\t */\n\n\t\t/**\n\t\t * A child toolbar of the dropdown located in the\n\t\t * {@link module:ui/dropdown/dropdownview~DropdownView#panelView panel}.\n\t\t *\n\t\t * **Note**: Only supported when dropdown has list view added using {@link module:ui/dropdown/utils~addToolbarToDropdown}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarView} #toolbarView\n\t\t */\n\n\t\t/**\n\t\t * Fired when the toolbar button or list item is executed.\n\t\t *\n\t\t * For {@link #listView} It fires when a child of some {@link module:ui/list/listitemview~ListItemView}\n\t\t * fired `execute`.\n\t\t *\n\t\t * For {@link #toolbarView} It fires when one of the buttons has been\n\t\t * {@link module:ui/button/buttonview~ButtonView#event:execute executed}.\n\t\t *\n\t\t * **Note**: Only supported when dropdown has list view added using {@link module:ui/dropdown/utils~addListToDropdown}\n\t\t * or {@link module:ui/dropdown/utils~addToolbarToDropdown}.\n\t\t *\n\t\t * @event execute\n\t\t */\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Toggle the dropdown when its button has been clicked.\n\t\tthis.listenTo( this.buttonView, 'open', () => {\n\t\t\tthis.isOpen = !this.isOpen;\n\t\t} );\n\n\t\t// Toggle the visibility of the panel when the dropdown becomes open.\n\t\tthis.panelView.bind( 'isVisible' ).to( this, 'isOpen' );\n\n\t\t// Let the dropdown control the position of the panel. The position must\n\t\t// be updated every time the dropdown is open.\n\t\tthis.on( 'change:isOpen', () => {\n\t\t\tif ( !this.isOpen ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If \"auto\", find the best position of the panel to fit into the viewport.\n\t\t\t// Otherwise, simply assign the static position.\n\t\t\tif ( this.panelPosition === 'auto' ) {\n\t\t\t\tconst defaultPanelPositions = DropdownView.defaultPanelPositions;\n\n\t\t\t\tthis.panelView.position = getOptimalPosition( {\n\t\t\t\t\telement: this.panelView.element,\n\t\t\t\t\ttarget: this.buttonView.element,\n\t\t\t\t\tfitInViewport: true,\n\t\t\t\t\tpositions: [\n\t\t\t\t\t\tdefaultPanelPositions.southEast,\n\t\t\t\t\t\tdefaultPanelPositions.southWest,\n\t\t\t\t\t\tdefaultPanelPositions.northEast,\n\t\t\t\t\t\tdefaultPanelPositions.northWest\n\t\t\t\t\t]\n\t\t\t\t} ).name;\n\t\t\t} else {\n\t\t\t\tthis.panelView.position = this.panelPosition;\n\t\t\t}\n\t\t} );\n\n\t\t// Listen for keystrokes coming from within #element.\n\t\tthis.keystrokes.listenTo( this.element );\n\n\t\t// Register #element in the focus tracker.\n\t\tthis.focusTracker.add( this.element );\n\n\t\tconst closeDropdown = ( data, cancel ) => {\n\t\t\tif ( this.isOpen ) {\n\t\t\t\tthis.buttonView.focus();\n\t\t\t\tthis.isOpen = false;\n\t\t\t\tcancel();\n\t\t\t}\n\t\t};\n\n\t\t// Open the dropdown panel using the arrow down key, just like with return or space.\n\t\tthis.keystrokes.set( 'arrowdown', ( data, cancel ) => {\n\t\t\t// Don't open if the dropdown is disabled or already open.\n\t\t\tif ( this.buttonView.isEnabled && !this.isOpen ) {\n\t\t\t\tthis.isOpen = true;\n\t\t\t\tcancel();\n\t\t\t}\n\t\t} );\n\n\t\t// Block the right arrow key (until nested dropdowns are implemented).\n\t\tthis.keystrokes.set( 'arrowright', ( data, cancel ) => {\n\t\t\tif ( this.isOpen ) {\n\t\t\t\tcancel();\n\t\t\t}\n\t\t} );\n\n\t\t// Close the dropdown using the arrow left/escape key.\n\t\tthis.keystrokes.set( 'arrowleft', closeDropdown );\n\t\tthis.keystrokes.set( 'esc', closeDropdown );\n\t}\n\n\t/**\n\t * Focuses the {@link #buttonView}.\n\t */\n\tfocus() {\n\t\tthis.buttonView.focus();\n\t}\n}\n\n/**\n * A set of positioning functions used by the dropdown view to determine\n * the optimal position (i.e. fitting into the browser viewport) of its\n * {@link module:ui/dropdown/dropdownview~DropdownView#panelView panel} when\n * {@link module:ui/dropdown/dropdownview~DropdownView#panelPosition} is set to 'auto'`.\n *\n * The available positioning functions are as follow:\n *\n * **South**\n *\n * * `southEast`\n *\n *\t\t[ Button ]\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\n * * `southWest`\n *\n *\t\t         [ Button ]\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\n * **North**\n *\n * * `northEast`\n *\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\t\t[ Button ]\n *\n * * `northWest`\n *\n *\t\t+-----------------+\n *\t\t|      Panel      |\n *\t\t+-----------------+\n *\t\t         [ Button ]\n *\n * Positioning functions are compatible with {@link module:utils/dom/position~Position}.\n *\n * The name that position function returns will be reflected in dropdown panel's class that\n * controls its placement. See {@link module:ui/dropdown/dropdownview~DropdownView#panelPosition}\n * to learn more.\n *\n * @member {Object} module:ui/dropdown/dropdownview~DropdownView.defaultPanelPositions\n */\nDropdownView.defaultPanelPositions = {\n\tsouthEast: buttonRect => {\n\t\treturn {\n\t\t\ttop: buttonRect.bottom,\n\t\t\tleft: buttonRect.left,\n\t\t\tname: 'se'\n\t\t};\n\t},\n\tsouthWest: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.bottom,\n\t\t\tleft: buttonRect.left - panelRect.width + buttonRect.width,\n\t\t\tname: 'sw'\n\t\t};\n\t},\n\tnorthEast: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.top - panelRect.height,\n\t\t\tleft: buttonRect.left,\n\t\t\tname: 'ne'\n\t\t};\n\t},\n\tnorthWest: ( buttonRect, panelRect ) => {\n\t\treturn {\n\t\t\ttop: buttonRect.bottom - panelRect.height,\n\t\t\tleft: buttonRect.left - panelRect.width + buttonRect.width,\n\t\t\tname: 'nw'\n\t\t};\n\t}\n};\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/dropdown/button/dropdownbuttonview\n */\n\nimport ButtonView from '../../button/buttonview';\n\nimport dropdownArrowIcon from '../../../theme/icons/dropdown-arrow.svg';\nimport IconView from '../../icon/iconview';\n\n/**\n * The default dropdown button view class.\n *\n *\t\tconst view = new DropdownButtonView();\n *\n *\t\tview.set( {\n *\t\t\tlabel: 'A button',\n *\t\t\tkeystroke: 'Ctrl+B',\n *\t\t\ttooltip: true\n *\t\t} );\n *\n *\t\tview.render();\n *\n *\t\tdocument.body.append( view.element );\n *\n * Also see the {@link module:ui/dropdown/utils~createDropdown `createDropdown()` util}.\n *\n * @implements module:ui/dropdown/button/dropdownbutton~DropdownButton\n * @extends module:ui/button/buttonview~ButtonView\n */\nexport default class DropdownButtonView extends ButtonView {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * An icon that displays arrow to indicate a dropdown button.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/icon/iconview~IconView}\n\t\t */\n\t\tthis.arrowView = this._createArrowView();\n\n\t\tthis.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\t'aria-haspopup': true\n\t\t\t}\n\t\t} );\n\n\t\t// The DropdownButton interface expects the open event upon which will open the dropdown.\n\t\tthis.delegate( 'execute' ).to( this, 'open' );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.children.add( this.arrowView );\n\t}\n\n\t/**\n\t * Creates a {@link module:ui/icon/iconview~IconView} instance as {@link #arrowView}.\n\t *\n\t * @private\n\t * @returns {module:ui/icon/iconview~IconView}\n\t */\n\t_createArrowView() {\n\t\tconst arrowView = new IconView();\n\n\t\tarrowView.content = dropdownArrowIcon;\n\n\t\tarrowView.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck-dropdown__arrow'\n\t\t\t}\n\t\t} );\n\n\t\treturn arrowView;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/list/listseparatorview\n */\n\nimport View from '../view';\n\n/**\n * The list separator view class.\n *\n * @extends module:ui/view~View\n */\nexport default class ListSeparatorView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'li',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-list__separator'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/dropdown/utils\n */\n\nimport DropdownPanelView from './dropdownpanelview';\nimport DropdownView from './dropdownview';\nimport DropdownButtonView from './button/dropdownbuttonview';\nimport ToolbarView from '../toolbar/toolbarview';\nimport ListView from '../list/listview';\nimport ListItemView from '../list/listitemview';\nimport ListSeparatorView from '../list/listseparatorview';\nimport ButtonView from '../button/buttonview';\nimport SwitchButtonView from '../button/switchbuttonview';\n\nimport clickOutsideHandler from '../bindings/clickoutsidehandler';\n\nimport '../../theme/components/dropdown/toolbardropdown.css';\nimport '../../theme/components/dropdown/listdropdown.css';\n\n/**\n * A helper for creating dropdowns. It creates an instance of a {@link module:ui/dropdown/dropdownview~DropdownView dropdown},\n * with a {@link module:ui/dropdown/button/dropdownbutton~DropdownButton button},\n * {@link module:ui/dropdown/dropdownpanelview~DropdownPanelView panel} and all standard dropdown's behaviors.\n *\n * # Creating dropdowns\n *\n * By default, the default {@link module:ui/dropdown/button/dropdownbuttonview~DropdownButtonView} class is used as\n * definition of the button:\n *\n *\t\tconst dropdown = createDropdown( model );\n *\n *\t\t// Configure dropdown's button properties:\n *\t\tdropdown.buttonView.set( {\n *\t\t\tlabel: 'A dropdown',\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tdropdown.render();\n *\n *\t\t// Will render a dropdown labeled \"A dropdown\" with an empty panel.\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * You can also provide other button views (they need to implement the\n * {@link module:ui/dropdown/button/dropdownbutton~DropdownButton} interface). For instance, you can use\n * {@link module:ui/dropdown/button/splitbuttonview~SplitButtonView} to create a dropdown with a split button.\n *\n *\t\tconst dropdown = createDropdown( model, SplitButtonView );\n *\n *\t\t// Configure dropdown's button properties:\n *\t\tdropdown.buttonView.set( {\n *\t\t\tlabel: 'A dropdown',\n *\t\t\twithText: true\n *\t\t} );\n *\n *\t\tdropdown.buttonView.on( 'execute', () => {\n *\t\t\t// Add the behavior of the \"action part\" of the split button.\n *\t\t\t// Split button consists of the \"action part\" and \"arrow part\".\n *\t\t\t// The arrow opens the dropdown while the action part can have some other behavior.\n * \t\t} );\n *\n *\t\tdropdown.render();\n *\n *\t\t// Will render a dropdown labeled \"A dropdown\" with an empty panel.\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * # Adding content to the dropdown's panel\n *\n * The content of the panel can be inserted directly into the `dropdown.panelView.element`:\n *\n *\t\tdropdown.panelView.element.textContent = 'Content of the panel';\n *\n * However, most of the time you will want to add there either a {@link module:ui/list/listview~ListView list of options}\n * or a list of buttons (i.e. a {@link module:ui/toolbar/toolbarview~ToolbarView toolbar}).\n * To simplify the task, you can use, respectively, {@link module:ui/dropdown/utils~addListToDropdown} or\n * {@link module:ui/dropdown/utils~addToolbarToDropdown} utils.\n *\n * @param {module:utils/locale~Locale} locale The locale instance.\n * @param {Function} ButtonClass The dropdown button view class. Needs to implement the\n * {@link module:ui/dropdown/button/dropdownbutton~DropdownButton} interface.\n * @returns {module:ui/dropdown/dropdownview~DropdownView} The dropdown view instance.\n */\nexport function createDropdown( locale, ButtonClass = DropdownButtonView ) {\n\tconst buttonView = new ButtonClass( locale );\n\n\tconst panelView = new DropdownPanelView( locale );\n\tconst dropdownView = new DropdownView( locale, buttonView, panelView );\n\n\tbuttonView.bind( 'isEnabled' ).to( dropdownView );\n\n\tif ( buttonView instanceof DropdownButtonView ) {\n\t\tbuttonView.bind( 'isOn' ).to( dropdownView, 'isOpen' );\n\t} else {\n\t\tbuttonView.arrowView.bind( 'isOn' ).to( dropdownView, 'isOpen' );\n\t}\n\n\taddDefaultBehavior( dropdownView );\n\n\treturn dropdownView;\n}\n\n/**\n * Adds an instance of {@link module:ui/toolbar/toolbarview~ToolbarView} to a dropdown.\n *\n *\t\tconst buttons = [];\n *\n *\t\t// Either create a new ButtonView instance or create existing.\n *\t\tbuttons.push( new ButtonView() );\n *\t\tbuttons.push( editor.ui.componentFactory.get( 'someButton' ) );\n *\n *\t\tconst dropdown = createDropdown( locale );\n *\n *\t\taddToolbarToDropdown( dropdown, buttons );\n *\n *\t\tdropdown.toolbarView.isVertical = true;\n *\n *\t\t// Will render a vertical button dropdown labeled \"A button dropdown\"\n *\t\t// with a button group in the panel containing two buttons.\n *\t\tdropdown.render()\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * See {@link module:ui/dropdown/utils~createDropdown} and {@link module:ui/toolbar/toolbarview~ToolbarView}.\n *\n * @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView A dropdown instance to which `ToolbarView` will be added.\n * @param {Iterable.<module:ui/button/buttonview~ButtonView>} buttons\n */\nexport function addToolbarToDropdown( dropdownView, buttons ) {\n\tconst toolbarView = dropdownView.toolbarView = new ToolbarView();\n\n\tdropdownView.extendTemplate( {\n\t\tattributes: {\n\t\t\tclass: [ 'ck-toolbar-dropdown' ]\n\t\t}\n\t} );\n\n\tbuttons.map( view => toolbarView.items.add( view ) );\n\n\tdropdownView.panelView.children.add( toolbarView );\n\ttoolbarView.items.delegate( 'execute' ).to( dropdownView );\n}\n\n/**\n * Adds an instance of {@link module:ui/list/listview~ListView} to a dropdown.\n *\n *\t\tconst items = new Collection();\n *\n *\t\titems.add( {\n *\t\t\ttype: 'button',\n *\t\t\tmodel: new Model( {\n *\t\t\t\twithText: true,\n *\t\t\t\tlabel: 'First item',\n *\t\t\t\tlabelStyle: 'color: red'\n *\t\t\t} )\n *\t\t} );\n *\n *\t\titems.add( {\n *\t\t\t type: 'button',\n *\t\t\t model: new Model( {\n *\t\t\t\twithText: true,\n *\t\t\t\tlabel: 'Second item',\n *\t\t\t\tlabelStyle: 'color: green',\n *\t\t\t\tclass: 'foo'\n *\t\t\t} )\n *\t\t} );\n *\n *\t\tconst dropdown = createDropdown( locale );\n *\n *\t\taddListToDropdown( dropdown, items );\n *\n *\t\t// Will render a dropdown with a list in the panel containing two items.\n *\t\tdropdown.render()\n *\t\tdocument.body.appendChild( dropdown.element );\n *\n * The `items` collection passed to this methods controls the presence and attributes of respective\n * {@link module:ui/list/listitemview~ListItemView list items}.\n *\n *\n * See {@link module:ui/dropdown/utils~createDropdown} and {@link module:list/list~List}.\n *\n * @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView A dropdown instance to which `ListVIew` will be added.\n * @param {Iterable.<module:ui/dropdown/utils~ListDropdownItemDefinition>} items\n * A collection of the list item definitions to populate the list.\n */\nexport function addListToDropdown( dropdownView, items ) {\n\tconst locale = dropdownView.locale;\n\tconst listView = dropdownView.listView = new ListView( locale );\n\n\tlistView.items.bindTo( items ).using( ( { type, model } ) => {\n\t\tif ( type === 'separator' ) {\n\t\t\treturn new ListSeparatorView( locale );\n\t\t} else if ( type === 'button' || type === 'switchbutton' ) {\n\t\t\tconst listItemView = new ListItemView( locale );\n\t\t\tlet buttonView;\n\n\t\t\tif ( type === 'button' ) {\n\t\t\t\tbuttonView = new ButtonView( locale );\n\t\t\t} else {\n\t\t\t\tbuttonView = new SwitchButtonView( locale );\n\t\t\t}\n\n\t\t\t// Bind all model properties to the button view.\n\t\t\tbuttonView.bind( ...Object.keys( model ) ).to( model );\n\t\t\tbuttonView.delegate( 'execute' ).to( listItemView );\n\n\t\t\tlistItemView.children.add( buttonView );\n\n\t\t\treturn listItemView;\n\t\t}\n\t} );\n\n\tdropdownView.panelView.children.add( listView );\n\n\tlistView.items.delegate( 'execute' ).to( dropdownView );\n}\n\n// Add a set of default behaviors to dropdown view.\n//\n// @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView\nfunction addDefaultBehavior( dropdownView ) {\n\tcloseDropdownOnBlur( dropdownView );\n\tcloseDropdownOnExecute( dropdownView );\n\tfocusDropdownContentsOnArrows( dropdownView );\n}\n\n// Adds a behavior to a dropdownView that closes opened dropdown when user clicks outside the dropdown.\n//\n// @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView\nfunction closeDropdownOnBlur( dropdownView ) {\n\tdropdownView.on( 'render', () => {\n\t\tclickOutsideHandler( {\n\t\t\temitter: dropdownView,\n\t\t\tactivator: () => dropdownView.isOpen,\n\t\t\tcallback: () => {\n\t\t\t\tdropdownView.isOpen = false;\n\t\t\t},\n\t\t\tcontextElements: [ dropdownView.element ]\n\t\t} );\n\t} );\n}\n\n// Adds a behavior to a dropdownView that closes the dropdown view on \"execute\" event.\n//\n// @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView\nfunction closeDropdownOnExecute( dropdownView ) {\n\t// Close the dropdown when one of the list items has been executed.\n\tdropdownView.on( 'execute', evt => {\n\t\t// Toggling a switch button view should not close the dropdown.\n\t\tif ( evt.source instanceof SwitchButtonView ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdropdownView.isOpen = false;\n\t} );\n}\n\n// Adds a behavior to a dropdownView that focuses the dropdown's panel view contents on keystrokes.\n//\n// @param {module:ui/dropdown/dropdownview~DropdownView} dropdownView\nfunction focusDropdownContentsOnArrows( dropdownView ) {\n\t// If the dropdown panel is already open, the arrow down key should focus the first child of the #panelView.\n\tdropdownView.keystrokes.set( 'arrowdown', ( data, cancel ) => {\n\t\tif ( dropdownView.isOpen ) {\n\t\t\tdropdownView.panelView.focus();\n\t\t\tcancel();\n\t\t}\n\t} );\n\n\t// If the dropdown panel is already open, the arrow up key should focus the last child of the #panelView.\n\tdropdownView.keystrokes.set( 'arrowup', ( data, cancel ) => {\n\t\tif ( dropdownView.isOpen ) {\n\t\t\tdropdownView.panelView.focusLast();\n\t\t\tcancel();\n\t\t}\n\t} );\n}\n\n/**\n * A definition of the list item used by the {@link module:ui/dropdown/utils~addListToDropdown}\n * utility.\n *\n * @typedef {Object} module:ui/dropdown/utils~ListDropdownItemDefinition\n *\n * @property {String} type Either `'separator'`, `'button'` or `'switchbutton'`.\n * @property {module:ui/model~Model} [model] Model of the item (when **not** `'separator'`).\n * Its properties fuel the newly created list item (or its children, depending on the `type`).\n */\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/diff\n */\n\nimport fastDiff from '../src/fastdiff';\n\n// The following code is based on the \"O(NP) Sequence Comparison Algorithm\"\n// by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n\n/**\n * Calculates the difference between two arrays or strings producing an array containing a list of changes\n * necessary to transform input into output.\n *\n *\t\tdiff( 'aba', 'acca' ); // [ 'equal', 'insert', 'insert', 'delete', 'equal' ]\n *\n * This function is based on the \"O(NP) Sequence Comparison Algorithm\" by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n * Unfortunately, while it gives the most precise results, its to complex for longer strings/arrow (above 200 items).\n * Therefore, `diff()` automatically switches to {@link module:utils/fastdiff~fastDiff `fastDiff()`} when detecting\n * such a scenario. The return formats of both functions are identical.\n *\n * @param {Array|String} a Input array or string.\n * @param {Array|String} b Output array or string.\n * @param {Function} [cmp] Optional function used to compare array values, by default === is used.\n * @returns {Array} Array of changes.\n */\nexport default function diff( a, b, cmp ) {\n\t// Set the comparator function.\n\tcmp = cmp || function( a, b ) {\n\t\treturn a === b;\n\t};\n\n\tconst aLength = a.length;\n\tconst bLength = b.length;\n\n\t// Perform `fastDiff` for longer strings/arrays (see #269).\n\tif ( aLength > 200 || bLength > 200 || aLength + bLength > 300 ) {\n\t\treturn diff.fastDiff( a, b, cmp, true );\n\t}\n\n\t// Temporary action type statics.\n\tlet _insert, _delete;\n\n\t// Swapped the arrays to use the shorter one as the first one.\n\tif ( bLength < aLength ) {\n\t\tconst tmp = a;\n\n\t\ta = b;\n\t\tb = tmp;\n\n\t\t// We swap the action types as well.\n\t\t_insert = 'delete';\n\t\t_delete = 'insert';\n\t} else {\n\t\t_insert = 'insert';\n\t\t_delete = 'delete';\n\t}\n\n\tconst m = a.length;\n\tconst n = b.length;\n\tconst delta = n - m;\n\n\t// Edit scripts, for each diagonal.\n\tconst es = {};\n\t// Furthest points, the furthest y we can get on each diagonal.\n\tconst fp = {};\n\n\tfunction snake( k ) {\n\t\t// We use -1 as an alternative below to handle initial values ( instead of filling the fp with -1 first ).\n\t\t// Furthest points (y) on the diagonal below k.\n\t\tconst y1 = ( fp[ k - 1 ] !== undefined ? fp[ k - 1 ] : -1 ) + 1;\n\t\t// Furthest points (y) on the diagonal above k.\n\t\tconst y2 = fp[ k + 1 ] !== undefined ? fp[ k + 1 ] : -1;\n\t\t// The way we should go to get further.\n\t\tconst dir = y1 > y2 ? -1 : 1;\n\n\t\t// Clone previous changes array (if any).\n\t\tif ( es[ k + dir ] ) {\n\t\t\tes[ k ] = es[ k + dir ].slice( 0 );\n\t\t}\n\n\t\t// Create changes array.\n\t\tif ( !es[ k ] ) {\n\t\t\tes[ k ] = [];\n\t\t}\n\n\t\t// Push the action.\n\t\tes[ k ].push( y1 > y2 ? _insert : _delete );\n\n\t\t// Set the beginning coordinates.\n\t\tlet y = Math.max( y1, y2 );\n\t\tlet x = y - k;\n\n\t\t// Traverse the diagonal as long as the values match.\n\t\twhile ( x < m && y < n && cmp( a[ x ], b[ y ] ) ) {\n\t\t\tx++;\n\t\t\ty++;\n\t\t\t// Push no change action.\n\t\t\tes[ k ].push( 'equal' );\n\t\t}\n\n\t\treturn y;\n\t}\n\n\tlet p = 0;\n\tlet k;\n\n\t// Traverse the graph until we reach the end of the longer string.\n\tdo {\n\t\t// Updates furthest points and edit scripts for diagonals below delta.\n\t\tfor ( k = -p; k < delta; k++ ) {\n\t\t\tfp[ k ] = snake( k );\n\t\t}\n\n\t\t// Updates furthest points and edit scripts for diagonals above delta.\n\t\tfor ( k = delta + p; k > delta; k-- ) {\n\t\t\tfp[ k ] = snake( k );\n\t\t}\n\n\t\t// Updates furthest point and edit script for the delta diagonal.\n\t\t// note that the delta diagonal is the one which goes through the sink (m, n).\n\t\tfp[ delta ] = snake( delta );\n\n\t\tp++;\n\t} while ( fp[ delta ] !== n );\n\n\t// Return the final list of edit changes.\n\t// We remove the first item that represents the action for the injected nulls.\n\treturn es[ delta ].slice( 1 );\n}\n\n// Store the API in static property to easily overwrite it in tests.\n// Too bad dependency injection does not work in Webpack + ES 6 (const) + Babel.\ndiff.fastDiff = fastDiff;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/isnode\n */\n\n/**\n * Checks if the object is a native DOM Node.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isNode( obj ) {\n\tif ( obj ) {\n\t\tif ( obj.defaultView ) {\n\t\t\treturn obj instanceof obj.defaultView.Document;\n\t\t} else if ( obj.ownerDocument && obj.ownerDocument.defaultView ) {\n\t\t\treturn obj instanceof obj.ownerDocument.defaultView.Node;\n\t\t}\n\t}\n\n\treturn false;\n}\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module module:engine/model/documentfragment\n */\n\nimport NodeList from './nodelist';\nimport Element from './element';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\n/**\n * DocumentFragment represents a part of model which does not have a common root but it's top-level nodes\n * can be seen as siblings. In other words, it is a detached part of model tree, without a root.\n *\n * DocumentFragment has own {@link module:engine/model/markercollection~MarkerCollection}. Markers from this collection\n * will be set to the {@link module:engine/model/model~Model#markers model markers} by a\n * {@link module:engine/model/writer~Writer#insert} function.\n */\nexport default class DocumentFragment {\n\t/**\n\t * Creates an empty `DocumentFragment`.\n\t *\n\t * **Note:** Constructor of this class shouldn't be used directly in the code.\n\t * Use the {@link module:engine/model/writer~Writer#createDocumentFragment} method instead.\n\t *\n\t * @protected\n\t * @param {module:engine/model/node~Node|Iterable.<module:engine/model/node~Node>} [children]\n\t * Nodes to be contained inside the `DocumentFragment`.\n\t */\n\tconstructor( children ) {\n\t\t/**\n\t\t * DocumentFragment static markers map. This is a list of names and {@link module:engine/model/range~Range ranges}\n\t\t * which will be set as Markers to {@link module:engine/model/model~Model#markers model markers collection}\n\t\t * when DocumentFragment will be inserted to the document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Map<String,module:engine/model/range~Range>} module:engine/model/documentfragment~DocumentFragment#markers\n\t\t */\n\t\tthis.markers = new Map();\n\n\t\t/**\n\t\t * List of nodes contained inside the document fragment.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/nodelist~NodeList} module:engine/model/documentfragment~DocumentFragment#_children\n\t\t */\n\t\tthis._children = new NodeList();\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all nodes contained inside this document fragment.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this.getChildren();\n\t}\n\n\t/**\n\t * Number of this document fragment's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Sum of {@link module:engine/model/node~Node#offsetSize offset sizes} of all of this document fragment's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget maxOffset() {\n\t\treturn this._children.maxOffset;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this document fragment, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this.childCount === 0;\n\t}\n\n\t/**\n\t * Artificial root of `DocumentFragment`. Returns itself. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Artificial parent of `DocumentFragment`. Returns `null`. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {null}\n\t */\n\tget parent() {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks whether given model tree object is of given type.\n\t *\n\t * Read more in {@link module:engine/model/node~Node#is}.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'documentFragment';\n\t}\n\n\t/**\n\t * Gets the child at the given index. Returns `null` if incorrect index was passed.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/model/node~Node|null} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children.getNode( index );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all of this document fragment's children.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns an index of the given child node. Returns `null` if given node is not a child of this document fragment.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number|null} Child node's index.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.getNodeIndex( node );\n\t}\n\n\t/**\n\t * Returns the starting offset of given child. Starting offset is equal to the sum of\n\t * {@link module:engine/model/node~Node#offsetSize offset sizes} of all node's siblings that are before it. Returns `null` if\n\t * given node is not a child of this document fragment.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number|null} Child node's starting offset.\n\t */\n\tgetChildStartOffset( node ) {\n\t\treturn this._children.getNodeStartOffset( node );\n\t}\n\n\t/**\n\t * Returns path to a `DocumentFragment`, which is an empty array. Added for compatibility reasons.\n\t *\n\t * @returns {Array}\n\t */\n\tgetPath() {\n\t\treturn [];\n\t}\n\n\t/**\n\t * Returns a descendant node by its path relative to this element.\n\t *\n\t *\t\t// <this>a<b>c</b></this>\n\t *\t\tthis.getNodeByPath( [ 0 ] );     // -> \"a\"\n\t *\t\tthis.getNodeByPath( [ 1 ] );     // -> <b>\n\t *\t\tthis.getNodeByPath( [ 1, 0 ] );  // -> \"c\"\n\t *\n\t * @param {Array.<Number>} relativePath Path of the node to find, relative to this element.\n\t * @returns {module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tgetNodeByPath( relativePath ) {\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\tfor ( const index of relativePath ) {\n\t\t\tnode = node.getChild( node.offsetToIndex( index ) );\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Converts offset \"position\" to index \"position\".\n\t *\n\t * Returns index of a node that occupies given offset. If given offset is too low, returns `0`. If given offset is\n\t * too high, returns index after last child}.\n\t *\n\t *\t\tconst textNode = new Text( 'foo' );\n\t *\t\tconst pElement = new Element( 'p' );\n\t *\t\tconst docFrag = new DocumentFragment( [ textNode, pElement ] );\n\t *\t\tdocFrag.offsetToIndex( -1 ); // Returns 0, because offset is too low.\n\t *\t\tdocFrag.offsetToIndex( 0 ); // Returns 0, because offset 0 is taken by `textNode` which is at index 0.\n\t *\t\tdocFrag.offsetToIndex( 1 ); // Returns 0, because `textNode` has `offsetSize` equal to 3, so it occupies offset 1 too.\n\t *\t\tdocFrag.offsetToIndex( 2 ); // Returns 0.\n\t *\t\tdocFrag.offsetToIndex( 3 ); // Returns 1.\n\t *\t\tdocFrag.offsetToIndex( 4 ); // Returns 2. There are no nodes at offset 4, so last available index is returned.\n\t *\n\t * @param {Number} offset Offset to look for.\n\t * @returns {Number} Index of a node that occupies given offset.\n\t */\n\toffsetToIndex( offset ) {\n\t\treturn this._children.offsetToIndex( offset );\n\t}\n\n\t/**\n\t * Converts `DocumentFragment` instance to plain object and returns it.\n\t * Takes care of converting all of this document fragment's children.\n\t *\n\t * @returns {Object} `DocumentFragment` instance converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = [];\n\n\t\tfor ( const node of this._children ) {\n\t\t\tjson.push( node.toJSON() );\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a `DocumentFragment` instance from given plain object (i.e. parsed JSON string).\n\t * Converts `DocumentFragment` children to proper nodes.\n\t *\n\t * @param {Object} json Plain object to be converted to `DocumentFragment`.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} `DocumentFragment` instance created using given plain object.\n\t */\n\tstatic fromJSON( json ) {\n\t\tconst children = [];\n\n\t\tfor ( const child of json ) {\n\t\t\tif ( child.name ) {\n\t\t\t\t// If child has name property, it is an Element.\n\t\t\t\tchildren.push( Element.fromJSON( child ) );\n\t\t\t} else {\n\t\t\t\t// Otherwise, it is a Text node.\n\t\t\t\tchildren.push( Text.fromJSON( child ) );\n\t\t\t}\n\t\t}\n\n\t\treturn new DocumentFragment( children );\n\t}\n\n\t/**\n\t * {@link #_insertChild Inserts} one or more nodes at the end of this document fragment.\n\t *\n\t * @protected\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} items Items to be inserted.\n\t */\n\t_appendChild( items ) {\n\t\tthis._insertChild( this.childCount, items );\n\t}\n\n\t/**\n\t * Inserts one or more nodes at the given index and sets {@link module:engine/model/node~Node#parent parent} of these nodes\n\t * to this document fragment.\n\t *\n\t * @protected\n\t * @param {Number} index Index at which nodes should be inserted.\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} items Items to be inserted.\n\t */\n\t_insertChild( index, items ) {\n\t\tconst nodes = normalize( items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\t\t}\n\n\t\tthis._children._insertNodes( index, nodes );\n\t}\n\n\t/**\n\t * Removes one or more nodes starting at the given index\n\t * and sets {@link module:engine/model/node~Node#parent parent} of these nodes to `null`.\n\t *\n\t * @protected\n\t * @param {Number} index Index of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/model/node~Node>} Array containing removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tconst nodes = this._children._removeNodes( index, howMany );\n\n\t\tfor ( const node of nodes ) {\n\t\t\tnode.parent = null;\n\t\t}\n\n\t\treturn nodes;\n\t}\n}\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>}\n// @returns {Iterable.<module:engine/model/node~Node>}\nfunction normalize( nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( node.data, node.getAttributes() );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/documentfragment\n */\n\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\n/**\n * Document fragment.\n *\n * To create a new document fragment instance use the\n * {@link module:engine/view/upcastwriter~UpcastWriter#createDocumentFragment `UpcastWriter#createDocumentFragment()`}\n * method.\n */\nexport default class DocumentFragment {\n\t/**\n\t * Creates new DocumentFragment instance.\n\t *\n\t * @protected\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into the created document fragment.\n\t */\n\tconstructor( children ) {\n\t\t/**\n\t\t * Array of child nodes.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/element~Element>} module:engine/view/documentfragment~DocumentFragment#_children\n\t\t */\n\t\tthis._children = [];\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over nodes added to this document fragment.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Number of child nodes in this document fragment.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this document fragment, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this.childCount === 0;\n\t}\n\n\t/**\n\t * Artificial root of `DocumentFragment`. Returns itself. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Artificial parent of `DocumentFragment`. Returns `null`. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {null}\n\t */\n\tget parent() {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks whether given view tree object is of given type.\n\t *\n\t * Read more in {@link module:engine/view/node~Node#is}.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'documentFragment';\n\t}\n\n\t/**\n\t * {@link module:engine/view/documentfragment~DocumentFragment#_insertChild Insert} a child node or a list of child nodes at the end\n\t * and sets the parent of these nodes to this fragment.\n\t *\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @returns {Number} Number of appended nodes.\n\t */\n\t_appendChild( items ) {\n\t\treturn this._insertChild( this.childCount, items );\n\t}\n\n\t/**\n\t * Gets child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/view/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children[ index ];\n\t}\n\n\t/**\n\t * Gets index of the given child node. Returns `-1` if child node is not found.\n\t *\n\t * @param {module:engine/view/node~Node} node Child node.\n\t * @returns {Number} Index of the child node.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.indexOf( node );\n\t}\n\n\t/**\n\t * Gets child nodes iterator.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>} Child nodes iterator.\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Inserts a child node or a list of child nodes on the given index and sets the parent of these nodes to\n\t * this fragment.\n\t *\n\t * @param {Number} index Position where nodes should be inserted.\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @returns {Number} Number of inserted nodes.\n\t */\n\t_insertChild( index, items ) {\n\t\tthis._fireChange( 'children', this );\n\t\tlet count = 0;\n\n\t\tconst nodes = normalize( items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\n\t\t\tthis._children.splice( index, 0, node );\n\t\t\tindex++;\n\t\t\tcount++;\n\t\t}\n\n\t\treturn count;\n\t}\n\n\t/**\n\t * Removes number of child nodes starting at the given index and set the parent of these nodes to `null`.\n\t *\n\t * @param {Number} index Number of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/view/node~Node>} The array of removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tthis._fireChange( 'children', this );\n\n\t\tfor ( let i = index; i < index + howMany; i++ ) {\n\t\t\tthis._children[ i ].parent = null;\n\t\t}\n\n\t\treturn this._children.splice( index, howMany );\n\t}\n\n\t/**\n\t * Fires `change` event with given type of the change.\n\t *\n\t * @private\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Changed node.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_fireChange( type, node ) {\n\t\tthis.fire( 'change:' + type, node );\n\t}\n}\n\nmix( DocumentFragment, EmitterMixin );\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/view/item~Item|Iterable.<String|module:engine/view/item~Item>}\n// @returns {Iterable.<module:engine/view/node~Node>}\nfunction normalize( nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( node.data );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/liverange\n */\n\nimport Range from './range';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * `LiveRange` is a type of {@link module:engine/model/range~Range Range}\n * that updates itself as {@link module:engine/model/document~Document document}\n * is changed through operations. It may be used as a bookmark.\n *\n * **Note:** Be very careful when dealing with `LiveRange`. Each `LiveRange` instance bind events that might\n * have to be unbound. Use {@link module:engine/model/liverange~LiveRange#detach detach} whenever you don't need `LiveRange` anymore.\n */\nexport default class LiveRange extends Range {\n\t/**\n\t * Creates a live range.\n\t *\n\t * @see module:engine/model/range~Range\n\t */\n\tconstructor( start, end ) {\n\t\tsuper( start, end );\n\n\t\tbindWithDocument.call( this );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by `LiveRange`. Use it whenever you don't need `LiveRange` instance\n\t * anymore (i.e. when leaving scope in which it was declared or before re-assigning variable that was\n\t * referring to it).\n\t */\n\tdetach() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/range~Range range instance} that is equal to this live range.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\ttoRange() {\n\t\treturn new Range( this.start, this.end );\n\t}\n\n\t/**\n\t * Creates a `LiveRange` instance that is equal to the given range.\n\t *\n\t * @param {module:engine/model/range~Range} range\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\tstatic fromRange( range ) {\n\t\treturn new LiveRange( range.start, range.end );\n\t}\n\n\t/**\n\t * @see module:engine/model/range~Range._createIn\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createIn\n\t * @param {module:engine/model/element~Element} element\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * @see module:engine/model/range~Range._createOn\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createOn\n\t * @param {module:engine/model/element~Element} element\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * @see module:engine/model/range~Range._createFromPositionAndShift\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createFromPositionAndShift\n\t * @param {module:engine/model/position~Position} position\n\t * @param {Number} shift\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * Fired when `LiveRange` instance boundaries have changed due to changes in the\n\t * {@link module:engine/model/document~Document document}.\n\t *\n\t * @event change:range\n\t * @param {module:engine/model/range~Range} oldRange Range with start and end position equal to start and end position of this live\n\t * range before it got changed.\n\t * @param {Object} data Object with additional information about the change.\n\t * @param {module:engine/model/position~Position|null} data.deletionPosition Source position for remove and merge changes.\n\t * Available if the range was moved to the graveyard root, `null` otherwise.\n\t */\n\n\t/**\n\t * Fired when `LiveRange` instance boundaries have not changed after a change in {@link module:engine/model/document~Document document}\n\t * but the change took place inside the range, effectively changing its content.\n\t *\n\t * @event change:content\n\t * @param {module:engine/model/range~Range} range Range with start and end position equal to start and end position of\n\t * change range.\n\t * @param {Object} data Object with additional information about the change.\n\t * @param {null} data.deletionPosition Due to the nature of this event, this property is always set to `null`. It is passed\n\t * for compatibility with the {@link module:engine/model/liverange~LiveRange#event:change:range} event.\n\t */\n}\n\n// Binds this `LiveRange` to the {@link module:engine/model/document~Document document}\n// that owns this range's {@link module:engine/model/range~Range#root root}.\n//\n// @private\nfunction bindWithDocument() {\n\tthis.listenTo(\n\t\tthis.root.document.model,\n\t\t'applyOperation',\n\t\t( event, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttransform.call( this, operation );\n\t\t},\n\t\t{ priority: 'low' }\n\t);\n}\n\n// Updates this range accordingly to the updates applied to the model. Bases on change events.\n//\n// @private\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\nfunction transform( operation ) {\n\t// Transform the range by the operation. Join the result ranges if needed.\n\tconst ranges = this.getTransformedByOperation( operation );\n\tconst result = Range._createFromRanges( ranges );\n\n\tconst boundariesChanged = !result.isEqual( this );\n\tconst contentChanged = doesOperationChangeRangeContent( this, operation );\n\n\tlet deletionPosition = null;\n\n\tif ( boundariesChanged ) {\n\t\t// If range boundaries have changed, fire `change:range` event.\n\t\t//\n\t\tif ( result.root.rootName == '$graveyard' ) {\n\t\t\t// If the range was moved to the graveyard root, set `deletionPosition`.\n\t\t\tif ( operation.type == 'remove' ) {\n\t\t\t\tdeletionPosition = operation.sourcePosition;\n\t\t\t} else {\n\t\t\t\t// Merge operation.\n\t\t\t\tdeletionPosition = operation.deletionPosition;\n\t\t\t}\n\t\t}\n\n\t\tconst oldRange = this.toRange();\n\n\t\tthis.start = result.start;\n\t\tthis.end = result.end;\n\n\t\tthis.fire( 'change:range', oldRange, { deletionPosition } );\n\t} else if ( contentChanged ) {\n\t\t// If range boundaries have not changed, but there was change inside the range, fire `change:content` event.\n\t\tthis.fire( 'change:content', this.toRange(), { deletionPosition } );\n\t}\n}\n\n// Checks whether given operation changes something inside the range (even if it does not change boundaries).\n//\n// @private\n// @param {module:engine/model/range~Range} range Range to check.\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\n// @returns {Boolean}\nfunction doesOperationChangeRangeContent( range, operation ) {\n\tswitch ( operation.type ) {\n\t\tcase 'insert':\n\t\t\treturn range.containsPosition( operation.position );\n\t\tcase 'move':\n\t\tcase 'remove':\n\t\tcase 'reinsert':\n\t\tcase 'merge':\n\t\t\treturn range.containsPosition( operation.sourcePosition ) ||\n\t\t\t\trange.start.isEqual( operation.sourcePosition ) ||\n\t\t\t\trange.containsPosition( operation.targetPosition );\n\t\tcase 'split':\n\t\t\treturn range.containsPosition( operation.splitPosition ) || range.containsPosition( operation.insertionPosition );\n\t}\n\n\treturn false;\n}\n\nmix( LiveRange, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/emittermixin\n */\n\nimport { default as EmitterMixin, _getEmitterListenedTo, _setEmitterId } from '../emittermixin';\nimport uid from '../uid';\nimport isNode from './isnode';\nimport isWindow from './iswindow';\nimport { extend } from 'lodash-es';\n\n/**\n * Mixin that injects the DOM events API into its host. It provides the API\n * compatible with {@link module:utils/emittermixin~EmitterMixin}.\n *\n * DOM emitter mixin is by default available in the {@link module:ui/view~View} class,\n * but it can also be mixed into any other class:\n *\n *\t\timport mix from '../utils/mix.js';\n *\t\timport DomEmitterMixin from '../utils/dom/emittermixin.js';\n *\n *\t\tclass SomeView {}\n *\t\tmix( SomeView, DomEmitterMixin );\n *\n *\t\tconst view = new SomeView();\n *\t\tview.listenTo( domElement, ( evt, domEvt ) => {\n *\t\t\tconsole.log( evt, domEvt );\n *\t\t} );\n *\n * @mixin EmitterMixin\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/dom/emittermixin~Emitter\n */\nconst DomEmitterMixin = extend( {}, EmitterMixin, {\n\t/**\n\t * Registers a callback function to be executed when an event is fired in a specific Emitter or DOM Node.\n\t * It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#listenTo}.\n\t *\n\t * @param {module:utils/emittermixin~Emitter|Node} emitter The object that fires the event.\n\t * @param {String} event The name of the event.\n\t * @param {Function} callback The function to be called on event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n\t * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n\t * order they were added.\n\t * @param {Boolean} [options.useCapture=false] Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t */\n\tlistenTo( emitter, ...rest ) {\n\t\t// Check if emitter is an instance of DOM Node. If so, replace the argument with\n\t\t// corresponding ProxyEmitter (or create one if not existing).\n\t\tif ( isNode( emitter ) || isWindow( emitter ) ) {\n\t\t\tconst proxy = this._getProxyEmitter( emitter ) || new ProxyEmitter( emitter );\n\n\t\t\tproxy.attach( ...rest );\n\n\t\t\temitter = proxy;\n\t\t}\n\n\t\t// Execute parent class method with Emitter (or ProxyEmitter) instance.\n\t\tEmitterMixin.listenTo.call( this, emitter, ...rest );\n\t},\n\n\t/**\n\t * Stops listening for events. It can be used at different levels:\n\t * It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#listenTo}.\n\t *\n\t * * To stop listening to a specific callback.\n\t * * To stop listening to a specific event.\n\t * * To stop listening to all events fired by a specific object.\n\t * * To stop listening to all events fired by all object.\n\t *\n\t * @param {module:utils/emittermixin~Emitter|Node} [emitter] The object to stop listening to. If omitted, stops it for all objects.\n\t * @param {String} [event] (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n\t * for all events from `emitter`.\n\t * @param {Function} [callback] (Requires the `event`) The function to be removed from the call list for the given\n\t * `event`.\n\t */\n\tstopListening( emitter, event, callback ) {\n\t\t// Check if emitter is an instance of DOM Node. If so, replace the argument with corresponding ProxyEmitter.\n\t\tif ( isNode( emitter ) || isWindow( emitter ) ) {\n\t\t\tconst proxy = this._getProxyEmitter( emitter );\n\n\t\t\t// Element has no listeners.\n\t\t\tif ( !proxy ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\temitter = proxy;\n\t\t}\n\n\t\t// Execute parent class method with Emitter (or ProxyEmitter) instance.\n\t\tEmitterMixin.stopListening.call( this, emitter, event, callback );\n\n\t\tif ( emitter instanceof ProxyEmitter ) {\n\t\t\temitter.detach( event );\n\t\t}\n\t},\n\n\t/**\n\t * Retrieves ProxyEmitter instance for given DOM Node residing in this Host.\n\t *\n\t * @pivate\n\t * @param {Node} node DOM Node of the ProxyEmitter.\n\t * @returns {module:utils/dom/emittermixin~ProxyEmitter} ProxyEmitter instance or null.\n\t */\n\t_getProxyEmitter( node ) {\n\t\treturn _getEmitterListenedTo( this, getNodeUID( node ) );\n\t}\n} );\n\nexport default DomEmitterMixin;\n\n/**\n * Creates a ProxyEmitter instance. Such an instance is a bridge between a DOM Node firing events\n * and any Host listening to them. It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#on}.\n *\n *                                  listenTo( click, ... )\n *                    +-----------------------------------------+\n *                    |              stopListening( ... )       |\n *     +----------------------------+                           |             addEventListener( click, ... )\n *     | Host                       |                           |   +---------------------------------------------+\n *     +----------------------------+                           |   |       removeEventListener( click, ... )     |\n *     | _listeningTo: {            |                +----------v-------------+                                   |\n *     |   UID: {                   |                | ProxyEmitter           |                                   |\n *     |     emitter: ProxyEmitter, |                +------------------------+                      +------------v----------+\n *     |     callbacks: {           |                | events: {              |                      | Node (HTMLElement)    |\n *     |       click: [ callbacks ] |                |   click: [ callbacks ] |                      +-----------------------+\n *     |     }                      |                | },                     |                      | data-ck-expando: UID  |\n *     |   }                        |                | _domNode: Node,        |                      +-----------------------+\n *     | }                          |                | _domListeners: {},     |                                   |\n *     | +------------------------+ |                | _emitterId: UID        |                                   |\n *     | | DomEmitterMixin        | |                +--------------^---------+                                   |\n *     | +------------------------+ |                           |   |                                             |\n *     +--------------^-------------+                           |   +---------------------------------------------+\n *                    |                                         |                  click (DOM Event)\n *                    +-----------------------------------------+\n *                                fire( click, DOM Event )\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/dom/emittermixin~Emitter\n * @private\n */\nclass ProxyEmitter {\n\t/**\n\t * @param {Node} node DOM Node that fires events.\n\t * @returns {Object} ProxyEmitter instance bound to the DOM Node.\n\t */\n\tconstructor( node ) {\n\t\t// Set emitter ID to match DOM Node \"expando\" property.\n\t\t_setEmitterId( this, getNodeUID( node ) );\n\n\t\t// Remember the DOM Node this ProxyEmitter is bound to.\n\t\tthis._domNode = node;\n\t}\n}\n\nextend( ProxyEmitter.prototype, EmitterMixin, {\n\t/**\n\t * Collection of native DOM listeners.\n\t *\n\t * @private\n\t * @member {Object} module:utils/dom/emittermixin~ProxyEmitter#_domListeners\n\t */\n\n\t/**\n\t * Registers a callback function to be executed when an event is fired.\n\t *\n\t * It attaches a native DOM listener to the DOM Node. When fired,\n\t * a corresponding Emitter event will also fire with DOM Event object as an argument.\n\t *\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#attach\n\t * @param {String} event The name of the event.\n\t * @param {Function} callback The function to be called on event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {Boolean} [options.useCapture=false] Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t */\n\tattach( event, callback, options = {} ) {\n\t\t// If the DOM Listener for given event already exist it is pointless\n\t\t// to attach another one.\n\t\tif ( this._domListeners && this._domListeners[ event ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domListener = this._createDomListener( event, !!options.useCapture );\n\n\t\t// Attach the native DOM listener to DOM Node.\n\t\tthis._domNode.addEventListener( event, domListener, !!options.useCapture );\n\n\t\tif ( !this._domListeners ) {\n\t\t\tthis._domListeners = {};\n\t\t}\n\n\t\t// Store the native DOM listener in this ProxyEmitter. It will be helpful\n\t\t// when stopping listening to the event.\n\t\tthis._domListeners[ event ] = domListener;\n\t},\n\n\t/**\n\t * Stops executing the callback on the given event.\n\t *\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#detach\n\t * @param {String} event The name of the event.\n\t */\n\tdetach( event ) {\n\t\tlet events;\n\n\t\t// Remove native DOM listeners which are orphans. If no callbacks\n\t\t// are awaiting given event, detach native DOM listener from DOM Node.\n\t\t// See: {@link attach}.\n\n\t\tif ( this._domListeners[ event ] && ( !( events = this._events[ event ] ) || !events.callbacks.length ) ) {\n\t\t\tthis._domListeners[ event ].removeListener();\n\t\t}\n\t},\n\n\t/**\n\t * Creates a native DOM listener callback. When the native DOM event\n\t * is fired it will fire corresponding event on this ProxyEmitter.\n\t * Note: A native DOM Event is passed as an argument.\n\t *\n\t * @private\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#_createDomListener\n\t * @param {String} event The name of the event.\n\t * @param {Boolean} useCapture Indicates whether the listener was created for capturing event.\n\t * @returns {Function} The DOM listener callback.\n\t */\n\t_createDomListener( event, useCapture ) {\n\t\tconst domListener = domEvt => {\n\t\t\tthis.fire( event, domEvt );\n\t\t};\n\n\t\t// Supply the DOM listener callback with a function that will help\n\t\t// detach it from the DOM Node, when it is no longer necessary.\n\t\t// See: {@link detach}.\n\t\tdomListener.removeListener = () => {\n\t\t\tthis._domNode.removeEventListener( event, domListener, useCapture );\n\t\t\tdelete this._domListeners[ event ];\n\t\t};\n\n\t\treturn domListener;\n\t}\n} );\n\n// Gets an unique DOM Node identifier. The identifier will be set if not defined.\n//\n// @private\n// @param {Node} node\n// @returns {String} UID for given DOM Node.\nfunction getNodeUID( node ) {\n\treturn node[ 'data-ck-expando' ] || ( node[ 'data-ck-expando' ] = uid() );\n}\n\n/**\n * Interface representing classes which mix in {@link module:utils/dom/emittermixin~EmitterMixin}.\n *\n * @interface Emitter\n */\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/containerelement\n */\n\nimport Element from './element';\n\n/**\n * Containers are elements which define document structure. They define boundaries for\n * {@link module:engine/view/attributeelement~AttributeElement attributes}. They are mostly used for block elements like `<p>` or `<div>`.\n *\n * Editing engine does not define a fixed HTML DTD. This is why a feature developer needs to choose between various\n * types (container element, {@link module:engine/view/attributeelement~AttributeElement attribute element},\n * {@link module:engine/view/emptyelement~EmptyElement empty element}, etc) when developing a feature.\n *\n * The container element should be your default choice when writing a converter, unless:\n *\n * * this element represents a model text attribute (then use {@link module:engine/view/attributeelement~AttributeElement}),\n * * this is an empty element like `<img>` (then use {@link module:engine/view/emptyelement~EmptyElement}),\n * * this is a root element,\n * * this is a nested editable element (then use  {@link module:engine/view/editableelement~EditableElement}).\n *\n * To create a new container element instance use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createContainerElement `DowncastWriter#createContainerElement()`}\n * method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class ContainerElement extends Element {\n\t/**\n\t * Creates a container element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createContainerElement\n\t * @see module:engine/view/element~Element\n\t * @protected\n\t */\n\tconstructor( name, attrs, children ) {\n\t\tsuper( name, attrs, children );\n\n\t\t/**\n\t\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'containerElement' || super.is( type );\n\t\t} else {\n\t\t\treturn ( type == 'containerElement' && name == this.name ) || super.is( type, name );\n\t\t}\n\t}\n}\n\n/**\n * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n *\n * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n */\nexport function getFillerOffset() {\n\tconst children = [ ...this.getChildren() ];\n\tconst lastChild = children[ this.childCount - 1 ];\n\n\t// Block filler is required after a `<br>` if it's the last element in its container. See #1422.\n\tif ( lastChild && lastChild.is( 'element', 'br' ) ) {\n\t\treturn this.childCount;\n\t}\n\n\tfor ( const child of children ) {\n\t\t// If there's any non-UI element – don't render the bogus.\n\t\tif ( !child.is( 'uiElement' ) ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// If there are only UI elements – render the bogus at the end of the element.\n\treturn this.childCount;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* global DOMParser */\n\n/**\n * @module ui/icon/iconview\n */\n\nimport View from '../view';\n\nimport '../../theme/components/icon/icon.css';\n\n/**\n * The icon view class.\n *\n * @extends module:ui/view~View\n */\nexport default class IconView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * The SVG source of the icon.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #content\n\t\t */\n\t\tthis.set( 'content', '' );\n\n\t\t/**\n\t\t * This attribute specifies the boundaries to which the\n\t\t * icon content should stretch.\n\t\t *\n\t\t * @observable\n\t\t * @default '0 0 20 20'\n\t\t * @member {String} #viewBox\n\t\t */\n\t\tthis.set( 'viewBox', '0 0 20 20' );\n\n\t\t/**\n\t\t * The fill color of the child `path.ck-icon__fill`.\n\t\t *\n\t\t * @observable\n\t\t * @default ''\n\t\t * @member {String} #fillColor\n\t\t */\n\t\tthis.set( 'fillColor', '' );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'svg',\n\t\t\tns: 'http://www.w3.org/2000/svg',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-icon'\n\t\t\t\t],\n\t\t\t\tviewBox: bind.to( 'viewBox' )\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tthis._updateXMLContent();\n\t\tthis._colorFillPaths();\n\n\t\t// This is a hack for lack of innerHTML binding.\n\t\t// See: https://github.com/ckeditor/ckeditor5-ui/issues/99.\n\t\tthis.on( 'change:content', () => {\n\t\t\tthis._updateXMLContent();\n\t\t\tthis._colorFillPaths();\n\t\t} );\n\n\t\tthis.on( 'change:fillColor', () => {\n\t\t\tthis._colorFillPaths();\n\t\t} );\n\t}\n\n\t/**\n\t * Updates the {@link #element} with the value of {@link #content}.\n\t *\n\t * @private\n\t */\n\t_updateXMLContent() {\n\t\tif ( this.content ) {\n\t\t\tconst parsed = new DOMParser().parseFromString( this.content.trim(), 'image/svg+xml' );\n\t\t\tconst svg = parsed.querySelector( 'svg' );\n\t\t\tconst viewBox = svg.getAttribute( 'viewBox' );\n\n\t\t\tif ( viewBox ) {\n\t\t\t\tthis.viewBox = viewBox;\n\t\t\t}\n\n\t\t\tthis.element.innerHTML = '';\n\n\t\t\twhile ( svg.childNodes.length > 0 ) {\n\t\t\t\tthis.element.appendChild( svg.childNodes[ 0 ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Fills all child `path.ck-icon__fill` with the `#fillColor`.\n\t *\n\t * @private\n\t */\n\t_colorFillPaths() {\n\t\tif ( this.fillColor ) {\n\t\t\tthis.element.querySelectorAll( '.ck-icon__fill' ).forEach( path => {\n\t\t\t\tpath.style.fill = this.fillColor;\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/indexof\n */\n\n/**\n * Returns index of the node in the parent element.\n *\n * @param {Node} node Node which index is tested.\n * @returns {Number} Index of the node in the parent element. Returns 0 if node has no parent.\n */\nexport default function indexOf( node ) {\n\tlet index = 0;\n\n\twhile ( node.previousSibling ) {\n\t\tnode = node.previousSibling;\n\t\tindex++;\n\t}\n\n\treturn index;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals Node */\n\n/**\n * @module utils/dom/getancestors\n */\n\n/**\n * Returns all ancestors of given DOM node, starting from the top-most (root). Includes the given node itself. If the\n * node is a part of `DocumentFragment` that `DocumentFragment` will be returned. In contrary, if the node is\n * appended to a `Document`, that `Document` will not be returned (algorithms operating on DOM tree care for `Document#documentElement`\n * at most, which will be returned).\n *\n * @param {Node} node DOM node.\n * @returns {Array.<Node|DocumentFragment>} Array of given `node` parents.\n */\nexport default function getAncestors( node ) {\n\tconst nodes = [];\n\n\t// We are interested in `Node`s `DocumentFragment`s only.\n\twhile ( node && node.nodeType != Node.DOCUMENT_NODE ) {\n\t\tnodes.unshift( node );\n\t\tnode = node.parentNode;\n\t}\n\n\treturn nodes;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/domconverter\n */\n\n/* globals document, Node, NodeFilter, Text */\n\nimport ViewText from './text';\nimport ViewElement from './element';\nimport ViewPosition from './position';\nimport ViewRange from './range';\nimport ViewSelection from './selection';\nimport ViewDocumentFragment from './documentfragment';\nimport ViewTreeWalker from './treewalker';\nimport { BR_FILLER, INLINE_FILLER_LENGTH, isBlockFiller, isInlineFiller, startsWithFiller, getDataWithoutFiller } from './filler';\n\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport indexOf from '@ckeditor/ckeditor5-utils/src/dom/indexof';\nimport getAncestors from '@ckeditor/ckeditor5-utils/src/dom/getancestors';\nimport getCommonAncestor from '@ckeditor/ckeditor5-utils/src/dom/getcommonancestor';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\nimport { isElement } from 'lodash-es';\n\n/**\n * DomConverter is a set of tools to do transformations between DOM nodes and view nodes. It also handles\n * {@link module:engine/view/domconverter~DomConverter#bindElements binding} these nodes.\n *\n * The instance of DOMConverter is available in {@link module:engine/view/view~View#domConverter `editor.editing.view.domConverter`}.\n *\n * DomConverter does not check which nodes should be rendered (use {@link module:engine/view/renderer~Renderer}), does not keep a\n * state of a tree nor keeps synchronization between tree view and DOM tree (use {@link module:engine/view/document~Document}).\n *\n * DomConverter keeps DOM elements to View element bindings, so when the converter will be destroyed, the binding will\n * be lost. Two converters will keep separate binding maps, so one tree view can be bound with two DOM trees.\n */\nexport default class DomConverter {\n\t/**\n\t * Creates DOM converter.\n\t *\n\t * @param {Object} options Object with configuration options.\n\t * @param {Function} [options.blockFiller=module:engine/view/filler~BR_FILLER] Block filler creator.\n\t */\n\tconstructor( options = {} ) {\n\t\t// Using WeakMap prevent memory leaks: when the converter will be destroyed all referenced between View and DOM\n\t\t// will be removed. Also because it is a *Weak*Map when both view and DOM elements will be removed referenced\n\t\t// will be also removed, isn't it brilliant?\n\t\t//\n\t\t// Yes, PJ. It is.\n\t\t//\n\t\t// You guys so smart.\n\t\t//\n\t\t// I've been here. Seen stuff. Afraid of code now.\n\n\t\t/**\n\t\t * Block {@link module:engine/view/filler filler} creator, which is used to create all block fillers during the\n\t\t * view to DOM conversion and to recognize block fillers during the DOM to view conversion.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Function} module:engine/view/domconverter~DomConverter#blockFiller\n\t\t */\n\t\tthis.blockFiller = options.blockFiller || BR_FILLER;\n\n\t\t/**\n\t\t * Tag names of DOM `Element`s which are considered pre-formatted elements.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<String>} module:engine/view/domconverter~DomConverter#preElements\n\t\t */\n\t\tthis.preElements = [ 'pre' ];\n\n\t\t/**\n\t\t * Tag names of DOM `Element`s which are considered block elements.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<String>} module:engine/view/domconverter~DomConverter#blockElements\n\t\t */\n\t\tthis.blockElements = [ 'p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6' ];\n\n\t\t/**\n\t\t * DOM to View mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_domToViewMapping\n\t\t */\n\t\tthis._domToViewMapping = new WeakMap();\n\n\t\t/**\n\t\t * View to DOM mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_viewToDomMapping\n\t\t */\n\t\tthis._viewToDomMapping = new WeakMap();\n\n\t\t/**\n\t\t * Holds mapping between fake selection containers and corresponding view selections.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_fakeSelectionMapping\n\t\t */\n\t\tthis._fakeSelectionMapping = new WeakMap();\n\t}\n\n\t/**\n\t * Binds given DOM element that represents fake selection to {@link module:engine/view/documentselection~DocumentSelection\n\t * document selection}. Document selection copy is stored and can be retrieved by\n\t * {@link module:engine/view/domconverter~DomConverter#fakeSelectionToView} method.\n\t *\n\t * @param {HTMLElement} domElement\n\t * @param {module:engine/view/documentselection~DocumentSelection} viewDocumentSelection\n\t */\n\tbindFakeSelection( domElement, viewDocumentSelection ) {\n\t\tthis._fakeSelectionMapping.set( domElement, new ViewSelection( viewDocumentSelection ) );\n\t}\n\n\t/**\n\t * Returns {@link module:engine/view/selection~Selection view selection} instance corresponding to\n\t * given DOM element that represents fake selection. Returns `undefined` if binding to given DOM element does not exists.\n\t *\n\t * @param {HTMLElement} domElement\n\t * @returns {module:engine/view/selection~Selection|undefined}\n\t */\n\tfakeSelectionToView( domElement ) {\n\t\treturn this._fakeSelectionMapping.get( domElement );\n\t}\n\n\t/**\n\t * Binds DOM and View elements, so it will be possible to get corresponding elements using\n\t * {@link module:engine/view/domconverter~DomConverter#mapDomToView} and\n\t * {@link module:engine/view/domconverter~DomConverter#mapViewToDom}.\n\t *\n\t * @param {HTMLElement} domElement DOM element to bind.\n\t * @param {module:engine/view/element~Element} viewElement View element to bind.\n\t */\n\tbindElements( domElement, viewElement ) {\n\t\tthis._domToViewMapping.set( domElement, viewElement );\n\t\tthis._viewToDomMapping.set( viewElement, domElement );\n\t}\n\n\t/**\n\t * Unbinds given `domElement` from the view element it was bound to. Unbinding is deep, meaning that all children of\n\t * `domElement` will be unbound too.\n\t *\n\t * @param {HTMLElement} domElement DOM element to unbind.\n\t */\n\tunbindDomElement( domElement ) {\n\t\tconst viewElement = this._domToViewMapping.get( domElement );\n\n\t\tif ( viewElement ) {\n\t\t\tthis._domToViewMapping.delete( domElement );\n\t\t\tthis._viewToDomMapping.delete( viewElement );\n\n\t\t\t// Use Array.from because of MS Edge (#923).\n\t\t\tfor ( const child of Array.from( domElement.childNodes ) ) {\n\t\t\t\tthis.unbindDomElement( child );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Binds DOM and View document fragments, so it will be possible to get corresponding document fragments using\n\t * {@link module:engine/view/domconverter~DomConverter#mapDomToView} and\n\t * {@link module:engine/view/domconverter~DomConverter#mapViewToDom}.\n\t *\n\t * @param {DocumentFragment} domFragment DOM document fragment to bind.\n\t * @param {module:engine/view/documentfragment~DocumentFragment} viewFragment View document fragment to bind.\n\t */\n\tbindDocumentFragments( domFragment, viewFragment ) {\n\t\tthis._domToViewMapping.set( domFragment, viewFragment );\n\t\tthis._viewToDomMapping.set( viewFragment, domFragment );\n\t}\n\n\t/**\n\t * Converts view to DOM. For all text nodes, not bound elements and document fragments new items will\n\t * be created. For bound elements and document fragments function will return corresponding items.\n\t *\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} viewNode\n\t * View node or document fragment to transform.\n\t * @param {Document} domDocument Document which will be used to create DOM nodes.\n\t * @param {Object} [options] Conversion options.\n\t * @param {Boolean} [options.bind=false] Determines whether new elements will be bound.\n\t * @param {Boolean} [options.withChildren=true] If `true`, node's and document fragment's children will be converted too.\n\t * @returns {Node|DocumentFragment} Converted node or DocumentFragment.\n\t */\n\tviewToDom( viewNode, domDocument, options = {} ) {\n\t\tif ( viewNode.is( 'text' ) ) {\n\t\t\tconst textData = this._processDataFromViewText( viewNode );\n\n\t\t\treturn domDocument.createTextNode( textData );\n\t\t} else {\n\t\t\tif ( this.mapViewToDom( viewNode ) ) {\n\t\t\t\treturn this.mapViewToDom( viewNode );\n\t\t\t}\n\n\t\t\tlet domElement;\n\n\t\t\tif ( viewNode.is( 'documentFragment' ) ) {\n\t\t\t\t// Create DOM document fragment.\n\t\t\t\tdomElement = domDocument.createDocumentFragment();\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindDocumentFragments( domElement, viewNode );\n\t\t\t\t}\n\t\t\t} else if ( viewNode.is( 'uiElement' ) ) {\n\t\t\t\t// UIElement has its own render() method (see #799).\n\t\t\t\tdomElement = viewNode.render( domDocument );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domElement, viewNode );\n\t\t\t\t}\n\n\t\t\t\treturn domElement;\n\t\t\t} else {\n\t\t\t\t// Create DOM element.\n\t\t\t\tdomElement = domDocument.createElement( viewNode.name );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domElement, viewNode );\n\t\t\t\t}\n\n\t\t\t\t// Copy element's attributes.\n\t\t\t\tfor ( const key of viewNode.getAttributeKeys() ) {\n\t\t\t\t\tdomElement.setAttribute( key, viewNode.getAttribute( key ) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( options.withChildren || options.withChildren === undefined ) {\n\t\t\t\tfor ( const child of this.viewChildrenToDom( viewNode, domDocument, options ) ) {\n\t\t\t\t\tdomElement.appendChild( child );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn domElement;\n\t\t}\n\t}\n\n\t/**\n\t * Converts children of the view element to DOM using the\n\t * {@link module:engine/view/domconverter~DomConverter#viewToDom} method.\n\t * Additionally, this method adds block {@link module:engine/view/filler filler} to the list of children, if needed.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} viewElement Parent view element.\n\t * @param {Document} domDocument Document which will be used to create DOM nodes.\n\t * @param {Object} options See {@link module:engine/view/domconverter~DomConverter#viewToDom} options parameter.\n\t * @returns {Iterable.<Node>} DOM nodes.\n\t */\n\t* viewChildrenToDom( viewElement, domDocument, options = {} ) {\n\t\tconst fillerPositionOffset = viewElement.getFillerOffset && viewElement.getFillerOffset();\n\t\tlet offset = 0;\n\n\t\tfor ( const childView of viewElement.getChildren() ) {\n\t\t\tif ( fillerPositionOffset === offset ) {\n\t\t\t\tyield this.blockFiller( domDocument );\n\t\t\t}\n\n\t\t\tyield this.viewToDom( childView, domDocument, options );\n\n\t\t\toffset++;\n\t\t}\n\n\t\tif ( fillerPositionOffset === offset ) {\n\t\t\tyield this.blockFiller( domDocument );\n\t\t}\n\t}\n\n\t/**\n\t * Converts view {@link module:engine/view/range~Range} to DOM range.\n\t * Inline and block {@link module:engine/view/filler fillers} are handled during the conversion.\n\t *\n\t * @param {module:engine/view/range~Range} viewRange View range.\n\t * @returns {Range} DOM range.\n\t */\n\tviewRangeToDom( viewRange ) {\n\t\tconst domStart = this.viewPositionToDom( viewRange.start );\n\t\tconst domEnd = this.viewPositionToDom( viewRange.end );\n\n\t\tconst domRange = document.createRange();\n\t\tdomRange.setStart( domStart.parent, domStart.offset );\n\t\tdomRange.setEnd( domEnd.parent, domEnd.offset );\n\n\t\treturn domRange;\n\t}\n\n\t/**\n\t * Converts view {@link module:engine/view/position~Position} to DOM parent and offset.\n\t *\n\t * Inline and block {@link module:engine/view/filler fillers} are handled during the conversion.\n\t * If the converted position is directly before inline filler it is moved inside the filler.\n\t *\n\t * @param {module:engine/view/position~Position} viewPosition View position.\n\t * @returns {Object|null} position DOM position or `null` if view position could not be converted to DOM.\n\t * @returns {Node} position.parent DOM position parent.\n\t * @returns {Number} position.offset DOM position offset.\n\t */\n\tviewPositionToDom( viewPosition ) {\n\t\tconst viewParent = viewPosition.parent;\n\n\t\tif ( viewParent.is( 'text' ) ) {\n\t\t\tconst domParent = this.findCorrespondingDomText( viewParent );\n\n\t\t\tif ( !domParent ) {\n\t\t\t\t// Position is in a view text node that has not been rendered to DOM yet.\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet offset = viewPosition.offset;\n\n\t\t\tif ( startsWithFiller( domParent ) ) {\n\t\t\t\toffset += INLINE_FILLER_LENGTH;\n\t\t\t}\n\n\t\t\treturn { parent: domParent, offset };\n\t\t} else {\n\t\t\t// viewParent is instance of ViewElement.\n\t\t\tlet domParent, domBefore, domAfter;\n\n\t\t\tif ( viewPosition.offset === 0 ) {\n\t\t\t\tdomParent = this.mapViewToDom( viewParent );\n\n\t\t\t\tif ( !domParent ) {\n\t\t\t\t\t// Position is in a view element that has not been rendered to DOM yet.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tdomAfter = domParent.childNodes[ 0 ];\n\t\t\t} else {\n\t\t\t\tconst nodeBefore = viewPosition.nodeBefore;\n\n\t\t\t\tdomBefore = nodeBefore.is( 'text' ) ?\n\t\t\t\t\tthis.findCorrespondingDomText( nodeBefore ) :\n\t\t\t\t\tthis.mapViewToDom( viewPosition.nodeBefore );\n\n\t\t\t\tif ( !domBefore ) {\n\t\t\t\t\t// Position is after a view element that has not been rendered to DOM yet.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tdomParent = domBefore.parentNode;\n\t\t\t\tdomAfter = domBefore.nextSibling;\n\t\t\t}\n\n\t\t\t// If there is an inline filler at position return position inside the filler. We should never return\n\t\t\t// the position before the inline filler.\n\t\t\tif ( isText( domAfter ) && startsWithFiller( domAfter ) ) {\n\t\t\t\treturn { parent: domAfter, offset: INLINE_FILLER_LENGTH };\n\t\t\t}\n\n\t\t\tconst offset = domBefore ? indexOf( domBefore ) + 1 : 0;\n\n\t\t\treturn { parent: domParent, offset };\n\t\t}\n\t}\n\n\t/**\n\t * Converts DOM to view. For all text nodes, not bound elements and document fragments new items will\n\t * be created. For bound elements and document fragments function will return corresponding items. For\n\t * {@link module:engine/view/filler fillers} `null` will be returned.\n\t * For all DOM elements rendered by {@link module:engine/view/uielement~UIElement} that UIElement will be returned.\n\t *\n\t * @param {Node|DocumentFragment} domNode DOM node or document fragment to transform.\n\t * @param {Object} [options] Conversion options.\n\t * @param {Boolean} [options.bind=false] Determines whether new elements will be bound.\n\t * @param {Boolean} [options.withChildren=true] If `true`, node's and document fragment's children will be converted too.\n\t * @param {Boolean} [options.keepOriginalCase=false] If `false`, node's tag name will be converter to lower case.\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null} Converted node or document fragment\n\t * or `null` if DOM node is a {@link module:engine/view/filler filler} or the given node is an empty text node.\n\t */\n\tdomToView( domNode, options = {} ) {\n\t\tif ( isBlockFiller( domNode, this.blockFiller ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// When node is inside UIElement return that UIElement as it's view representation.\n\t\tconst uiElement = this.getParentUIElement( domNode, this._domToViewMapping );\n\n\t\tif ( uiElement ) {\n\t\t\treturn uiElement;\n\t\t}\n\n\t\tif ( isText( domNode ) ) {\n\t\t\tif ( isInlineFiller( domNode ) ) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tconst textData = this._processDataFromDomText( domNode );\n\n\t\t\t\treturn textData === '' ? null : new ViewText( textData );\n\t\t\t}\n\t\t} else if ( this.isComment( domNode ) ) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tif ( this.mapDomToView( domNode ) ) {\n\t\t\t\treturn this.mapDomToView( domNode );\n\t\t\t}\n\n\t\t\tlet viewElement;\n\n\t\t\tif ( this.isDocumentFragment( domNode ) ) {\n\t\t\t\t// Create view document fragment.\n\t\t\t\tviewElement = new ViewDocumentFragment();\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindDocumentFragments( domNode, viewElement );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Create view element.\n\t\t\t\tconst viewName = options.keepOriginalCase ? domNode.tagName : domNode.tagName.toLowerCase();\n\t\t\t\tviewElement = new ViewElement( viewName );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domNode, viewElement );\n\t\t\t\t}\n\n\t\t\t\t// Copy element's attributes.\n\t\t\t\tconst attrs = domNode.attributes;\n\n\t\t\t\tfor ( let i = attrs.length - 1; i >= 0; i-- ) {\n\t\t\t\t\tviewElement._setAttribute( attrs[ i ].name, attrs[ i ].value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( options.withChildren || options.withChildren === undefined ) {\n\t\t\t\tfor ( const child of this.domChildrenToView( domNode, options ) ) {\n\t\t\t\t\tviewElement._appendChild( child );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn viewElement;\n\t\t}\n\t}\n\n\t/**\n\t * Converts children of the DOM element to view nodes using\n\t * the {@link module:engine/view/domconverter~DomConverter#domToView} method.\n\t * Additionally this method omits block {@link module:engine/view/filler filler}, if it exists in the DOM parent.\n\t *\n\t * @param {HTMLElement} domElement Parent DOM element.\n\t * @param {Object} options See {@link module:engine/view/domconverter~DomConverter#domToView} options parameter.\n\t * @returns {Iterable.<module:engine/view/node~Node>} View nodes.\n\t */\n\t* domChildrenToView( domElement, options = {} ) {\n\t\tfor ( let i = 0; i < domElement.childNodes.length; i++ ) {\n\t\t\tconst domChild = domElement.childNodes[ i ];\n\t\t\tconst viewChild = this.domToView( domChild, options );\n\n\t\t\tif ( viewChild !== null ) {\n\t\t\t\tyield viewChild;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Converts DOM selection to view {@link module:engine/view/selection~Selection}.\n\t * Ranges which cannot be converted will be omitted.\n\t *\n\t * @param {Selection} domSelection DOM selection.\n\t * @returns {module:engine/view/selection~Selection} View selection.\n\t */\n\tdomSelectionToView( domSelection ) {\n\t\t// DOM selection might be placed in fake selection container.\n\t\t// If container contains fake selection - return corresponding view selection.\n\t\tif ( domSelection.rangeCount === 1 ) {\n\t\t\tlet container = domSelection.getRangeAt( 0 ).startContainer;\n\n\t\t\t// The DOM selection might be moved to the text node inside the fake selection container.\n\t\t\tif ( isText( container ) ) {\n\t\t\t\tcontainer = container.parentNode;\n\t\t\t}\n\n\t\t\tconst viewSelection = this.fakeSelectionToView( container );\n\n\t\t\tif ( viewSelection ) {\n\t\t\t\treturn viewSelection;\n\t\t\t}\n\t\t}\n\n\t\tconst isBackward = this.isDomSelectionBackward( domSelection );\n\n\t\tconst viewRanges = [];\n\n\t\tfor ( let i = 0; i < domSelection.rangeCount; i++ ) {\n\t\t\t// DOM Range have correct start and end, no matter what is the DOM Selection direction. So we don't have to fix anything.\n\t\t\tconst domRange = domSelection.getRangeAt( i );\n\t\t\tconst viewRange = this.domRangeToView( domRange );\n\n\t\t\tif ( viewRange ) {\n\t\t\t\tviewRanges.push( viewRange );\n\t\t\t}\n\t\t}\n\n\t\treturn new ViewSelection( viewRanges, { backward: isBackward } );\n\t}\n\n\t/**\n\t * Converts DOM Range to view {@link module:engine/view/range~Range}.\n\t * If the start or end position can not be converted `null` is returned.\n\t *\n\t * @param {Range} domRange DOM range.\n\t * @returns {module:engine/view/range~Range|null} View range.\n\t */\n\tdomRangeToView( domRange ) {\n\t\tconst viewStart = this.domPositionToView( domRange.startContainer, domRange.startOffset );\n\t\tconst viewEnd = this.domPositionToView( domRange.endContainer, domRange.endOffset );\n\n\t\tif ( viewStart && viewEnd ) {\n\t\t\treturn new ViewRange( viewStart, viewEnd );\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Converts DOM parent and offset to view {@link module:engine/view/position~Position}.\n\t *\n\t * If the position is inside a {@link module:engine/view/filler filler} which has no corresponding view node,\n\t * position of the filler will be converted and returned.\n\t *\n\t * If the position is inside DOM element rendered by {@link module:engine/view/uielement~UIElement}\n\t * that position will be converted to view position before that UIElement.\n\t *\n\t * If structures are too different and it is not possible to find corresponding position then `null` will be returned.\n\t *\n\t * @param {Node} domParent DOM position parent.\n\t * @param {Number} domOffset DOM position offset.\n\t * @returns {module:engine/view/position~Position} viewPosition View position.\n\t */\n\tdomPositionToView( domParent, domOffset ) {\n\t\tif ( isBlockFiller( domParent, this.blockFiller ) ) {\n\t\t\treturn this.domPositionToView( domParent.parentNode, indexOf( domParent ) );\n\t\t}\n\n\t\t// If position is somewhere inside UIElement - return position before that element.\n\t\tconst viewElement = this.mapDomToView( domParent );\n\n\t\tif ( viewElement && viewElement.is( 'uiElement' ) ) {\n\t\t\treturn ViewPosition._createBefore( viewElement );\n\t\t}\n\n\t\tif ( isText( domParent ) ) {\n\t\t\tif ( isInlineFiller( domParent ) ) {\n\t\t\t\treturn this.domPositionToView( domParent.parentNode, indexOf( domParent ) );\n\t\t\t}\n\n\t\t\tconst viewParent = this.findCorrespondingViewText( domParent );\n\t\t\tlet offset = domOffset;\n\n\t\t\tif ( !viewParent ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( startsWithFiller( domParent ) ) {\n\t\t\t\toffset -= INLINE_FILLER_LENGTH;\n\t\t\t\toffset = offset < 0 ? 0 : offset;\n\t\t\t}\n\n\t\t\treturn new ViewPosition( viewParent, offset );\n\t\t}\n\t\t// domParent instanceof HTMLElement.\n\t\telse {\n\t\t\tif ( domOffset === 0 ) {\n\t\t\t\tconst viewParent = this.mapDomToView( domParent );\n\n\t\t\t\tif ( viewParent ) {\n\t\t\t\t\treturn new ViewPosition( viewParent, 0 );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst domBefore = domParent.childNodes[ domOffset - 1 ];\n\t\t\t\tconst viewBefore = isText( domBefore ) ?\n\t\t\t\t\tthis.findCorrespondingViewText( domBefore ) :\n\t\t\t\t\tthis.mapDomToView( domBefore );\n\n\t\t\t\t// TODO #663\n\t\t\t\tif ( viewBefore && viewBefore.parent ) {\n\t\t\t\t\treturn new ViewPosition( viewBefore.parent, viewBefore.index + 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Returns corresponding view {@link module:engine/view/element~Element Element} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment} for provided DOM element or\n\t * document fragment. If there is no view item {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * to the given DOM - `undefined` is returned.\n\t * For all DOM elements rendered by {@link module:engine/view/uielement~UIElement} that UIElement will be returned.\n\t *\n\t * @param {DocumentFragment|Element} domElementOrDocumentFragment DOM element or document fragment.\n\t * @returns {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|undefined}\n\t * Corresponding view element, document fragment or `undefined` if no element was bound.\n\t */\n\tmapDomToView( domElementOrDocumentFragment ) {\n\t\treturn this.getParentUIElement( domElementOrDocumentFragment ) || this._domToViewMapping.get( domElementOrDocumentFragment );\n\t}\n\n\t/**\n\t * Finds corresponding text node. Text nodes are not {@link module:engine/view/domconverter~DomConverter#bindElements bound},\n\t * corresponding text node is returned based on the sibling or parent.\n\t *\n\t * If the directly previous sibling is a {@link module:engine/view/domconverter~DomConverter#bindElements bound} element, it is used\n\t * to find the corresponding text node.\n\t *\n\t * If this is a first child in the parent and the parent is a {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * element, it is used to find the corresponding text node.\n\t *\n\t * For all text nodes rendered by {@link module:engine/view/uielement~UIElement} that UIElement will be returned.\n\t *\n\t * Otherwise `null` is returned.\n\t *\n\t * Note that for the block or inline {@link module:engine/view/filler filler} this method returns `null`.\n\t *\n\t * @param {Text} domText DOM text node.\n\t * @returns {module:engine/view/text~Text|null} Corresponding view text node or `null`, if it was not possible to find a\n\t * corresponding node.\n\t */\n\tfindCorrespondingViewText( domText ) {\n\t\tif ( isInlineFiller( domText ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// If DOM text was rendered by UIElement - return that element.\n\t\tconst uiElement = this.getParentUIElement( domText );\n\n\t\tif ( uiElement ) {\n\t\t\treturn uiElement;\n\t\t}\n\n\t\tconst previousSibling = domText.previousSibling;\n\n\t\t// Try to use previous sibling to find the corresponding text node.\n\t\tif ( previousSibling ) {\n\t\t\tif ( !( this.isElement( previousSibling ) ) ) {\n\t\t\t\t// The previous is text or comment.\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst viewElement = this.mapDomToView( previousSibling );\n\n\t\t\tif ( viewElement ) {\n\t\t\t\tconst nextSibling = viewElement.nextSibling;\n\n\t\t\t\t// It might be filler which has no corresponding view node.\n\t\t\t\tif ( nextSibling instanceof ViewText ) {\n\t\t\t\t\treturn viewElement.nextSibling;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Try to use parent to find the corresponding text node.\n\t\telse {\n\t\t\tconst viewElement = this.mapDomToView( domText.parentNode );\n\n\t\t\tif ( viewElement ) {\n\t\t\t\tconst firstChild = viewElement.getChild( 0 );\n\n\t\t\t\t// It might be filler which has no corresponding view node.\n\t\t\t\tif ( firstChild instanceof ViewText ) {\n\t\t\t\t\treturn firstChild;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns corresponding DOM item for provided {@link module:engine/view/element~Element Element} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment}.\n\t * To find a corresponding text for {@link module:engine/view/text~Text view Text instance}\n\t * use {@link #findCorrespondingDomText}.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} viewNode\n\t * View element or document fragment.\n\t * @returns {Node|DocumentFragment|undefined} Corresponding DOM node or document fragment.\n\t */\n\tmapViewToDom( documentFragmentOrElement ) {\n\t\treturn this._viewToDomMapping.get( documentFragmentOrElement );\n\t}\n\n\t/**\n\t * Finds corresponding text node. Text nodes are not {@link module:engine/view/domconverter~DomConverter#bindElements bound},\n\t * corresponding text node is returned based on the sibling or parent.\n\t *\n\t * If the directly previous sibling is a {@link module:engine/view/domconverter~DomConverter#bindElements bound} element, it is used\n\t * to find the corresponding text node.\n\t *\n\t * If this is a first child in the parent and the parent is a {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * element, it is used to find the corresponding text node.\n\t *\n\t * Otherwise `null` is returned.\n\t *\n\t * @param {module:engine/view/text~Text} viewText View text node.\n\t * @returns {Text|null} Corresponding DOM text node or `null`, if it was not possible to find a corresponding node.\n\t */\n\tfindCorrespondingDomText( viewText ) {\n\t\tconst previousSibling = viewText.previousSibling;\n\n\t\t// Try to use previous sibling to find the corresponding text node.\n\t\tif ( previousSibling && this.mapViewToDom( previousSibling ) ) {\n\t\t\treturn this.mapViewToDom( previousSibling ).nextSibling;\n\t\t}\n\n\t\t// If this is a first node, try to use parent to find the corresponding text node.\n\t\tif ( !previousSibling && viewText.parent && this.mapViewToDom( viewText.parent ) ) {\n\t\t\treturn this.mapViewToDom( viewText.parent ).childNodes[ 0 ];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Focuses DOM editable that is corresponding to provided {@link module:engine/view/editableelement~EditableElement}.\n\t *\n\t * @param {module:engine/view/editableelement~EditableElement} viewEditable\n\t */\n\tfocus( viewEditable ) {\n\t\tconst domEditable = this.mapViewToDom( viewEditable );\n\n\t\tif ( domEditable && domEditable.ownerDocument.activeElement !== domEditable ) {\n\t\t\t// Save the scrollX and scrollY positions before the focus.\n\t\t\tconst { scrollX, scrollY } = global.window;\n\t\t\tconst scrollPositions = [];\n\n\t\t\t// Save all scrollLeft and scrollTop values starting from domEditable up to\n\t\t\t// document#documentElement.\n\t\t\tforEachDomNodeAncestor( domEditable, node => {\n\t\t\t\tconst { scrollLeft, scrollTop } = node;\n\n\t\t\t\tscrollPositions.push( [ scrollLeft, scrollTop ] );\n\t\t\t} );\n\n\t\t\tdomEditable.focus();\n\n\t\t\t// Restore scrollLeft and scrollTop values starting from domEditable up to\n\t\t\t// document#documentElement.\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/951\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/957\n\t\t\tforEachDomNodeAncestor( domEditable, node => {\n\t\t\t\tconst [ scrollLeft, scrollTop ] = scrollPositions.shift();\n\n\t\t\t\tnode.scrollLeft = scrollLeft;\n\t\t\t\tnode.scrollTop = scrollTop;\n\t\t\t} );\n\n\t\t\t// Restore the scrollX and scrollY positions after the focus.\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/951\n\t\t\tglobal.window.scrollTo( scrollX, scrollY );\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.ELEMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisElement( node ) {\n\t\treturn node && node.nodeType == Node.ELEMENT_NODE;\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.DOCUMENT_FRAGMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisDocumentFragment( node ) {\n\t\treturn node && node.nodeType == Node.DOCUMENT_FRAGMENT_NODE;\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.COMMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisComment( node ) {\n\t\treturn node && node.nodeType == Node.COMMENT_NODE;\n\t}\n\n\t/**\n\t * Returns `true` if given selection is a backward selection, that is, if it's `focus` is before `anchor`.\n\t *\n\t * @param {Selection} DOM Selection instance to check.\n\t * @returns {Boolean}\n\t */\n\tisDomSelectionBackward( selection ) {\n\t\tif ( selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Since it takes multiple lines of code to check whether a \"DOM Position\" is before/after another \"DOM Position\",\n\t\t// we will use the fact that range will collapse if it's end is before it's start.\n\t\tconst range = document.createRange();\n\n\t\trange.setStart( selection.anchorNode, selection.anchorOffset );\n\t\trange.setEnd( selection.focusNode, selection.focusOffset );\n\n\t\tconst backward = range.collapsed;\n\n\t\trange.detach();\n\n\t\treturn backward;\n\t}\n\n\t/**\n\t * Returns parent {@link module:engine/view/uielement~UIElement} for provided DOM node. Returns `null` if there is no\n\t * parent UIElement.\n\t *\n\t * @param {Node} domNode\n\t * @returns {module:engine/view/uielement~UIElement|null}\n\t */\n\tgetParentUIElement( domNode ) {\n\t\tconst ancestors = getAncestors( domNode );\n\n\t\t// Remove domNode from the list.\n\t\tancestors.pop();\n\n\t\twhile ( ancestors.length ) {\n\t\t\tconst domNode = ancestors.pop();\n\t\t\tconst viewNode = this._domToViewMapping.get( domNode );\n\n\t\t\tif ( viewNode && viewNode.is( 'uiElement' ) ) {\n\t\t\t\treturn viewNode;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks if given selection's boundaries are at correct places.\n\t *\n\t * The following places are considered as incorrect for selection boundaries:\n\t * * before or in the middle of the inline filler sequence,\n\t * * inside the DOM element which represents {@link module:engine/view/uielement~UIElement a view ui element}.\n\t *\n\t * @param {Selection} domSelection DOM Selection object to be checked.\n\t * @returns {Boolean} `true` if the given selection is at a correct place, `false` otherwise.\n\t */\n\tisDomSelectionCorrect( domSelection ) {\n\t\treturn this._isDomSelectionPositionCorrect( domSelection.anchorNode, domSelection.anchorOffset ) &&\n\t\t\tthis._isDomSelectionPositionCorrect( domSelection.focusNode, domSelection.focusOffset );\n\t}\n\n\t/**\n\t * Checks if the given DOM position is a correct place for selection boundary. See {@link #isDomSelectionCorrect}.\n\t *\n\t * @private\n\t * @param {Element} domParent Position parent.\n\t * @param {Number} offset Position offset.\n\t * @returns {Boolean} `true` if given position is at a correct place for selection boundary, `false` otherwise.\n\t */\n\t_isDomSelectionPositionCorrect( domParent, offset ) {\n\t\t// If selection is before or in the middle of inline filler string, it is incorrect.\n\t\tif ( isText( domParent ) && startsWithFiller( domParent ) && offset < INLINE_FILLER_LENGTH ) {\n\t\t\t// Selection in a text node, at wrong position (before or in the middle of filler).\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.isElement( domParent ) && startsWithFiller( domParent.childNodes[ offset ] ) ) {\n\t\t\t// Selection in an element node, before filler text node.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst viewParent = this.mapDomToView( domParent );\n\n\t\t// If selection is in `view.UIElement`, it is incorrect. Note that `mapDomToView()` returns `view.UIElement`\n\t\t// also for any dom element that is inside the view ui element (so we don't need to perform any additional checks).\n\t\tif ( viewParent && viewParent.is( 'uiElement' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Takes text data from a given {@link module:engine/view/text~Text#data} and processes it so\n\t * it is correctly displayed in the DOM.\n\t *\n\t * Following changes are done:\n\t *\n\t * * a space at the beginning is changed to `&nbsp;` if this is the first text node in its container\n\t * element or if a previous text node ends with a space character,\n\t * * space at the end of the text node is changed to `&nbsp;` if there are two spaces at the end of a node or if next node\n\t * starts with a space or if it is the last text node in its container,\n\t * * remaining spaces are replaced to a chain of spaces and `&nbsp;` (e.g. `'x   x'` becomes `'x &nbsp; x'`).\n\t *\n\t * Content of {@link #preElements} is not processed.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} node View text node to process.\n\t * @returns {String} Processed text data.\n\t */\n\t_processDataFromViewText( node ) {\n\t\tlet data = node.data;\n\n\t\t// If any of node ancestors has a name which is in `preElements` array, then currently processed\n\t\t// view text node is (will be) in preformatted element. We should not change whitespaces then.\n\t\tif ( node.getAncestors().some( parent => this.preElements.includes( parent.name ) ) ) {\n\t\t\treturn data;\n\t\t}\n\n\t\t// 1. Replace the first space with a nbsp if the previous node ends with a space or there is no previous node\n\t\t// (container element boundary).\n\t\tif ( data.charAt( 0 ) == ' ' ) {\n\t\t\tconst prevNode = this._getTouchingViewTextNode( node, false );\n\t\t\tconst prevEndsWithSpace = prevNode && this._nodeEndsWithSpace( prevNode );\n\n\t\t\tif ( prevEndsWithSpace || !prevNode ) {\n\t\t\t\tdata = '\\u00A0' + data.substr( 1 );\n\t\t\t}\n\t\t}\n\n\t\t// 2. Replace the last space with nbsp if there are two spaces at the end or if the next node starts with space or there is no\n\t\t// next node (container element boundary).\n\t\t//\n\t\t// Keep in mind that Firefox prefers $nbsp; before tag, not inside it:\n\t\t//\n\t\t// Foo <span>&nbsp;bar</span>  <-- bad.\n\t\t// Foo&nbsp;<span> bar</span>  <-- good.\n\t\t//\n\t\t// More here: https://github.com/ckeditor/ckeditor5-engine/issues/1747.\n\t\tif ( data.charAt( data.length - 1 ) == ' ' ) {\n\t\t\tconst nextNode = this._getTouchingViewTextNode( node, true );\n\n\t\t\tif ( data.charAt( data.length - 2 ) == ' ' || !nextNode || nextNode.data.charAt( 0 ) == ' ' ) {\n\t\t\t\tdata = data.substr( 0, data.length - 1 ) + '\\u00A0';\n\t\t\t}\n\t\t}\n\n\t\t// 3. Create space+nbsp pairs.\n\t\treturn data.replace( / {2}/g, ' \\u00A0' );\n\t}\n\n\t/**\n\t * Checks whether given node ends with a space character after changing appropriate space characters to `&nbsp;`s.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} node Node to check.\n\t * @returns {Boolean} `true` if given `node` ends with space, `false` otherwise.\n\t */\n\t_nodeEndsWithSpace( node ) {\n\t\tif ( node.getAncestors().some( parent => this.preElements.includes( parent.name ) ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = this._processDataFromViewText( node );\n\n\t\treturn data.charAt( data.length - 1 ) == ' ';\n\t}\n\n\t/**\n\t * Takes text data from native `Text` node and processes it to a correct {@link module:engine/view/text~Text view text node} data.\n\t *\n\t * Following changes are done:\n\t *\n\t * * multiple whitespaces are replaced to a single space,\n\t * * space at the beginning of a text node is removed if it is the first text node in its container\n\t * element or if the previous text node ends with a space character,\n\t * * space at the end of the text node is removed if there are two spaces at the end of a node or if next node\n\t * starts with a space or if it is the last text node in its container\n\t * * nbsps are converted to spaces.\n\t *\n\t * @param {Node} node DOM text node to process.\n\t * @returns {String} Processed data.\n\t * @private\n\t */\n\t_processDataFromDomText( node ) {\n\t\tlet data = node.data;\n\n\t\tif ( _hasDomParentOfType( node, this.preElements ) ) {\n\t\t\treturn getDataWithoutFiller( node );\n\t\t}\n\n\t\t// Change all consecutive whitespace characters (from the [ \\n\\t\\r] set –\n\t\t// see https://github.com/ckeditor/ckeditor5-engine/issues/822#issuecomment-311670249) to a single space character.\n\t\t// That's how multiple whitespaces are treated when rendered, so we normalize those whitespaces.\n\t\t// We're replacing 1+ (and not 2+) to also normalize singular \\n\\t\\r characters (#822).\n\t\tdata = data.replace( /[ \\n\\t\\r]{1,}/g, ' ' );\n\n\t\tconst prevNode = this._getTouchingInlineDomNode( node, false );\n\t\tconst nextNode = this._getTouchingInlineDomNode( node, true );\n\n\t\tconst shouldLeftTrim = this._checkShouldLeftTrimDomText( prevNode );\n\t\tconst shouldRightTrim = this._checkShouldRightTrimDomText( node, nextNode );\n\n\t\t// If the previous dom text node does not exist or it ends by whitespace character, remove space character from the beginning\n\t\t// of this text node. Such space character is treated as a whitespace.\n\t\tif ( shouldLeftTrim ) {\n\t\t\tdata = data.replace( /^ /, '' );\n\t\t}\n\n\t\t// If the next text node does not exist remove space character from the end of this text node.\n\t\tif ( shouldRightTrim ) {\n\t\t\tdata = data.replace( / $/, '' );\n\t\t}\n\n\t\t// At the beginning and end of a block element, Firefox inserts normal space + <br> instead of non-breaking space.\n\t\t// This means that the text node starts/end with normal space instead of non-breaking space.\n\t\t// This causes a problem because the normal space would be removed in `.replace` calls above. To prevent that,\n\t\t// the inline filler is removed only after the data is initially processed (by the `.replace` above). See ckeditor5#692.\n\t\tdata = getDataWithoutFiller( new Text( data ) );\n\n\t\t// At this point we should have removed all whitespaces from DOM text data.\n\t\t//\n\t\t// Now, We will reverse the process that happens in `_processDataFromViewText`.\n\t\t//\n\t\t// We have to change &nbsp; chars, that were in DOM text data because of rendering reasons, to spaces.\n\t\t// First, change all ` \\u00A0` pairs (space + &nbsp;) to two spaces. DOM converter changes two spaces from model/view to\n\t\t// ` \\u00A0` to ensure proper rendering. Since here we convert back, we recognize those pairs and change them back to `  `.\n\t\tdata = data.replace( / \\u00A0/g, '  ' );\n\n\t\t// Then, let's change the last nbsp to a space.\n\t\tif ( /( |\\u00A0)\\u00A0$/.test( data ) || !nextNode || ( nextNode.data && nextNode.data.charAt( 0 ) == ' ' ) ) {\n\t\t\tdata = data.replace( /\\u00A0$/, ' ' );\n\t\t}\n\n\t\t// Then, change &nbsp; character that is at the beginning of the text node to space character.\n\t\t// We do that replacement only if this is the first node or the previous node ends on whitespace character.\n\t\tif ( shouldLeftTrim ) {\n\t\t\tdata = data.replace( /^\\u00A0/, ' ' );\n\t\t}\n\n\t\t// At this point, all whitespaces should be removed and all &nbsp; created for rendering reasons should be\n\t\t// changed to normal space. All left &nbsp; are &nbsp; inserted intentionally.\n\t\treturn data;\n\t}\n\n\t/**\n\t * Helper function which checks if a DOM text node, preceded by the given `prevNode` should\n\t * be trimmed from the left side.\n\t *\n\t * @param {Node} prevNode\n\t */\n\t_checkShouldLeftTrimDomText( prevNode ) {\n\t\tif ( !prevNode ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( isElement( prevNode ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn /[^\\S\\u00A0]/.test( prevNode.data.charAt( prevNode.data.length - 1 ) );\n\t}\n\n\t/**\n\t * Helper function which checks if a DOM text node, succeeded by the given `nextNode` should\n\t * be trimmed from the right side.\n\t *\n\t * @param {Node} node\n\t * @param {Node} nextNode\n\t */\n\t_checkShouldRightTrimDomText( node, nextNode ) {\n\t\tif ( nextNode ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !startsWithFiller( node );\n\t}\n\n\t/**\n\t * Helper function. For given {@link module:engine/view/text~Text view text node}, it finds previous or next sibling\n\t * that is contained in the same container element. If there is no such sibling, `null` is returned.\n\t *\n\t * @param {module:engine/view/text~Text} node Reference node.\n\t * @param {Boolean} getNext\n\t * @returns {module:engine/view/text~Text|null} Touching text node or `null` if there is no next or previous touching text node.\n\t */\n\t_getTouchingViewTextNode( node, getNext ) {\n\t\tconst treeWalker = new ViewTreeWalker( {\n\t\t\tstartPosition: getNext ? ViewPosition._createAfter( node ) : ViewPosition._createBefore( node ),\n\t\t\tdirection: getNext ? 'forward' : 'backward'\n\t\t} );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\t// ViewContainerElement is found on a way to next ViewText node, so given `node` was first/last\n\t\t\t// text node in its container element.\n\t\t\tif ( value.item.is( 'containerElement' ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// <br> found – it works like a block boundary, so do not scan further.\n\t\t\telse if ( value.item.is( 'br' ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// Found a text node in the same container element.\n\t\t\telse if ( value.item.is( 'textProxy' ) ) {\n\t\t\t\treturn value.item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Helper function. For the given text node, it finds the closest touching node which is either\n\t * a text node or a `<br>`. The search is terminated at block element boundaries and if a matching node\n\t * wasn't found so far, `null` is returned.\n\t *\n\t * In the following DOM structure:\n\t *\n\t *\t\t<p>foo<b>bar</b><br>bom</p>\n\t *\n\t * * `foo` doesn't have its previous touching inline node (`null` is returned),\n\t * * `foo`'s next touching inline node is `bar`\n\t * * `bar`'s next touching inline node is `<br>`\n\t *\n\t * This method returns text nodes and `<br>` elements because these types of nodes affect how\n\t * spaces in the given text node need to be converted.\n\t *\n\t * @private\n\t * @param {Text} node\n\t * @param {Boolean} getNext\n\t * @returns {Text|Element|null}\n\t */\n\t_getTouchingInlineDomNode( node, getNext ) {\n\t\tif ( !node.parentNode ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst direction = getNext ? 'nextNode' : 'previousNode';\n\t\tconst document = node.ownerDocument;\n\t\tconst topmostParent = getAncestors( node )[ 0 ];\n\n\t\tconst treeWalker = document.createTreeWalker( topmostParent, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, {\n\t\t\tacceptNode( node ) {\n\t\t\t\tif ( isText( node ) ) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\n\t\t\t\tif ( node.tagName == 'BR' ) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\n\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t}\n\t\t} );\n\n\t\ttreeWalker.currentNode = node;\n\n\t\tconst touchingNode = treeWalker[ direction ]();\n\n\t\tif ( touchingNode !== null ) {\n\t\t\tconst lca = getCommonAncestor( node, touchingNode );\n\n\t\t\t// If there is common ancestor between the text node and next/prev text node,\n\t\t\t// and there are no block elements on a way from the text node to that ancestor,\n\t\t\t// and there are no block elements on a way from next/prev text node to that ancestor...\n\t\t\tif (\n\t\t\t\tlca &&\n\t\t\t\t!_hasDomParentOfType( node, this.blockElements, lca ) &&\n\t\t\t\t!_hasDomParentOfType( touchingNode, this.blockElements, lca )\n\t\t\t) {\n\t\t\t\t// Then they are in the same container element.\n\t\t\t\treturn touchingNode;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n// Helper function.\n// Used to check if given native `Element` or `Text` node has parent with tag name from `types` array.\n//\n// @param {Node} node\n// @param {Array.<String>} types\n// @param {Boolean} [boundaryParent] Can be given if parents should be checked up to a given element (excluding that element).\n// @returns {Boolean} `true` if such parent exists or `false` if it does not.\nfunction _hasDomParentOfType( node, types, boundaryParent ) {\n\tlet parents = getAncestors( node );\n\n\tif ( boundaryParent ) {\n\t\tparents = parents.slice( parents.indexOf( boundaryParent ) + 1 );\n\t}\n\n\treturn parents.some( parent => parent.tagName && types.includes( parent.tagName.toLowerCase() ) );\n}\n\n// A helper that executes given callback for each DOM node's ancestor, starting from the given node\n// and ending in document#documentElement.\n//\n// @param {Node} node\n// @param {Function} callback A callback to be executed for each ancestor.\nfunction forEachDomNodeAncestor( node, callback ) {\n\twhile ( node && node != global.document ) {\n\t\tcallback( node );\n\t\tnode = node.parentNode;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/getcommonancestor\n */\n\nimport getAncestors from './getancestors';\n\n/**\n * Searches and returns the lowest common ancestor of two given nodes.\n *\n * @param {Node} nodeA First node.\n * @param {Node} nodeB Second node.\n * @returns {Node|DocumentFragment|Document|null} Lowest common ancestor of both nodes or `null` if nodes do not have a common ancestor.\n */\nexport default function getCommonAncestor( nodeA, nodeB ) {\n\tconst ancestorsA = getAncestors( nodeA );\n\tconst ancestorsB = getAncestors( nodeB );\n\n\tlet i = 0;\n\n\t// It does not matter which array is shorter.\n\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\ti++;\n\t}\n\n\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n}\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/isrange\n */\n\n/**\n * Checks if the object is a native DOM Range.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isRange( obj ) {\n\treturn Object.prototype.toString.apply( obj ) == '[object Range]';\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module ui/panel/balloon/contextualballoon\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport BalloonPanelView from './balloonpanelview';\nimport View from '../../view';\nimport ButtonView from '../../button/buttonview';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport toUnit from '@ckeditor/ckeditor5-utils/src/dom/tounit';\nimport Rect from '@ckeditor/ckeditor5-utils/src/dom/rect';\nimport prevIcon from '../../../theme/icons/previous-arrow.svg';\nimport nextIcon from '../../../theme/icons/next-arrow.svg';\nimport '../../../theme/components/panel/balloonrotator.css';\nimport '../../../theme/components/panel/fakepanel.css';\nconst toPx = toUnit('px');\n/**\n * Provides the common contextual balloon for the editor.\n *\n * The role of this plugin is to unify the contextual balloons logic, simplify views management and help\n * avoid the unnecessary complexity of handling multiple {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView}\n * instances in the editor.\n *\n * This plugin allows for creating single or multiple panel stacks.\n *\n * Each stack may have multiple views, with the one on the top being visible. When the visible view is removed from the stack,\n * the previous view becomes visible.\n *\n * It might be useful to implement nested navigation in a balloon. For instance, a toolbar view may contain a link button.\n * When you click it, a link view (which lets you set the URL) is created and put on top of the toolbar view, so the link panel\n * is displayed. When you finish editing the link and close (remove) the link view, the toolbar view is visible again.\n *\n * However, there are cases when there are multiple independent balloons to be displayed, for instance, if the selection\n * is inside two inline comments at the same time. For such cases, you can create two independent panel stacks.\n * The contextual balloon plugin will create a navigation bar to let the users switch between these panel stacks using the \"Next\"\n * and \"Previous\" buttons.\n *\n * If there are no views in the current stack, the balloon panel will try to switch to the next stack. If there are no\n * panels in any stack, the balloon panel will be hidden.\n *\n * **Note**: To force the balloon panel to show only one view, even if there are other stacks, use the `singleViewMode=true` option\n * when {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon#add adding} a view to a panel.\n *\n * From the implementation point of view, the contextual ballon plugin is reusing a single\n * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView} instance to display multiple contextual balloon\n * panels in the editor. It also creates a special {@link module:ui/panel/balloon/contextualballoon~RotatorView rotator view},\n * used to manage multiple panel stacks. Rotator view is a child of the balloon panel view and the parent of the specific\n * view you want to display. If there is more than one panel stack to be displayed, the rotator view will add a\n * navigation bar. If there is only one stack, the rotator view is transparent (it does not add any UI elements).\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ContextualBalloon extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'ContextualBalloon';\n    }\n    /**\n\t * @inheritDoc\n\t */\n    constructor(editor) {\n        super(editor);\n        /**\n\t\t * The {@link module:utils/dom/position~Options#limiter position limiter}\n\t\t * for the {@link #view balloon}, used when no `limiter` has been passed into {@link #add}\n\t\t * or {@link #updatePosition}.\n\t\t *\n\t\t * By default, a function that obtains the farthest DOM\n\t\t * {@link module:engine/view/rooteditableelement~RootEditableElement}\n\t\t * of the {@link module:engine/view/document~Document#selection}.\n\t\t *\n\t\t * @member {module:utils/dom/position~Options#limiter} #positionLimiter\n\t\t */\n        this.positionLimiter = () => {\n            const view = this.editor.editing.view;\n            const viewDocument = view.document;\n            const editableElement = viewDocument.selection.editableElement;\n            if (editableElement) {\n                return view.domConverter.mapViewToDom(editableElement.root);\n            }\n            return null;\n        };\n        /**\n\t\t * The currently visible view or `null` when there are no views in any stack.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {module:ui/view~View|null} #visibleView\n\t\t */\n        this.set('visibleView', null);\n        /**\n\t\t * The common balloon panel view.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/panel/balloon/balloonpanelview~BalloonPanelView} #view\n\t\t */\n        this.view = new BalloonPanelView(editor.locale);\n        editor.ui.view.body.add(this.view);\n        editor.ui.focusTracker.add(this.view.element);\n        /**\n\t\t * The map of views and their stacks.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<module:ui/view~View,Set>}\n\t\t */\n        this._viewToStack = new Map();\n        /**\n\t\t * The map of IDs and stacks.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<String,Set>}\n\t\t */\n        this._idToStack = new Map();\n        /**\n\t\t * A total number of all stacks in the balloon.\n\t\t *\n\t\t * @private\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Number} #_numberOfStacks\n\t\t */\n        this.set('_numberOfStacks', 0);\n        /**\n\t\t * A flag that controls the single view mode.\n\t\t *\n\t\t * @private\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #_singleViewMode\n\t\t */\n        this.set('_singleViewMode', false);\n        /**\n\t\t * Rotator view embedded in the contextual balloon.\n\t\t * Displays the currently visible view in the balloon and provides navigation for switching stacks.\n\t\t *\n\t\t * @private\n\t\t * @type {module:ui/panel/balloon/contextualballoon~RotatorView}\n\t\t */\n        this._rotatorView = this._createRotatorView();\n        /**\n\t\t * Displays fake panels under the balloon panel view when multiple stacks are added to the balloon.\n\t\t *\n\t\t * @private\n\t\t * @type {module:ui/view~View}\n\t\t */\n        this._fakePanelsView = this._createFakePanelsView();\n    }\n    /**\n\t * Returns `true` when the given view is in one of the stacks. Otherwise returns `false`.\n\t *\n\t * @param {module:ui/view~View} view\n\t * @returns {Boolean}\n\t */\n    hasView(view) {\n        return Array.from(this._viewToStack.keys()).includes(view);\n    }\n    /**\n\t * Adds a new view to the stack and makes it visible if the current stack is visible\n\t * or it is the first view in the balloon.\n\t *\n\t * @param {Object} data The configuration of the view.\n\t * @param {String} [data.stackId='main'] The ID of the stack that the view is added to.\n\t * @param {module:ui/view~View} [data.view] The content of the balloon.\n\t * @param {module:utils/dom/position~Options} [data.position] Positioning options.\n\t * @param {String} [data.balloonClassName] An additional CSS class added to the {@link #view balloon} when visible.\n\t * @param {Boolean} [data.withArrow=true] Whether the {@link #view balloon} should be rendered with an arrow.\n\t * @param {Boolean} [data.singleViewMode=false] Whether the view should be the only visible view even if other stacks were added.\n\t */\n    add(data) {\n        if (this.hasView(data.view)) {\n            /**\n\t\t\t * Trying to add configuration of the same view more than once.\n\t\t\t *\n\t\t\t * @error contextualballoon-add-view-exist\n\t\t\t */\n            throw new CKEditorError('contextualballoon-add-view-exist: Cannot add configuration of the same view twice.', [\n                this,\n                data\n            ]);\n        }\n        const stackId = data.stackId || 'main';\n        // If new stack is added, creates it and show view from this stack.\n        if (!this._idToStack.has(stackId)) {\n            this._idToStack.set(stackId, new Map([[\n                    data.view,\n                    data\n                ]]));\n            this._viewToStack.set(data.view, this._idToStack.get(stackId));\n            this._numberOfStacks = this._idToStack.size;\n            if (!this._visibleStack || data.singleViewMode) {\n                this.showStack(stackId);\n            }\n            return;\n        }\n        const stack = this._idToStack.get(stackId);\n        if (data.singleViewMode) {\n            this.showStack(stackId);\n        }\n        // Add new view to the stack.\n        stack.set(data.view, data);\n        this._viewToStack.set(data.view, stack);\n        // And display it if is added to the currently visible stack.\n        if (stack === this._visibleStack) {\n            this._showView(data);\n        }\n    }\n    /**\n\t * Removes the given view from the stack. If the removed view was visible,\n\t * the view preceding it in the stack will become visible instead.\n\t * When there is no view in the stack, the next stack will be displayed.\n\t * When there are no more stacks, the balloon will hide.\n\t *\n\t * @param {module:ui/view~View} view A view to be removed from the balloon.\n\t */\n    remove(view) {\n        if (!this.hasView(view)) {\n            /**\n\t\t\t * Trying to remove the configuration of the view not defined in the stack.\n\t\t\t *\n\t\t\t * @error contextualballoon-remove-view-not-exist\n\t\t\t */\n            throw new CKEditorError('contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.', [\n                this,\n                view\n            ]);\n        }\n        const stack = this._viewToStack.get(view);\n        if (this._singleViewMode && this.visibleView === view) {\n            this._singleViewMode = false;\n        }\n        // When visible view will be removed we need to show a preceding view or next stack\n        // if a view is the only view in the stack.\n        if (this.visibleView === view) {\n            if (stack.size === 1) {\n                if (this._idToStack.size > 1) {\n                    this._showNextStack();\n                } else {\n                    this.view.hide();\n                    this.visibleView = null;\n                    this._rotatorView.hideView();\n                }\n            } else {\n                this._showView(Array.from(stack.values())[stack.size - 2]);\n            }\n        }\n        if (stack.size === 1) {\n            this._idToStack.delete(this._getStackId(stack));\n            this._numberOfStacks = this._idToStack.size;\n        } else {\n            stack.delete(view);\n        }\n        this._viewToStack.delete(view);\n    }\n    /**\n\t * Updates the position of the balloon using the position data of the first visible view in the stack.\n\t * When new position data is given, the position data of the currently visible view will be updated.\n\t *\n\t * @param {module:utils/dom/position~Options} [position] position options.\n\t */\n    updatePosition(position) {\n        if (position) {\n            this._visibleStack.get(this.visibleView).position = position;\n        }\n        this.view.pin(this._getBalloonPosition());\n        this._fakePanelsView.updatePosition();\n    }\n    /**\n\t * Shows the last view from the stack of a given ID.\n\t *\n\t * @param {String} id\n\t */\n    showStack(id) {\n        this.visibleStack = id;\n        const stack = this._idToStack.get(id);\n        if (!stack) {\n            /**\n\t\t\t * Trying to show a stack that does not exist.\n\t\t\t *\n\t\t\t * @error contextualballoon-showstack-stack-not-exist\n\t\t\t */\n            throw new CKEditorError('contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.', this);\n        }\n        if (this._visibleStack === stack) {\n            return;\n        }\n        this._showView(Array.from(stack.values()).pop());\n    }\n    /**\n\t * Returns the stack of the currently visible view.\n\t *\n\t * @private\n\t * @type {Set}\n\t */\n    get _visibleStack() {\n        return this._viewToStack.get(this.visibleView);\n    }\n    /**\n\t * Returns the ID of the given stack.\n\t *\n\t * @private\n\t * @param {Set} stack\n\t * @returns {String}\n\t */\n    _getStackId(stack) {\n        const entry = Array.from(this._idToStack.entries()).find(entry => entry[1] === stack);\n        return entry[0];\n    }\n    /**\n\t * Shows the last view from the next stack.\n\t *\n\t * @private\n\t */\n    _showNextStack() {\n        const stacks = Array.from(this._idToStack.values());\n        let nextIndex = stacks.indexOf(this._visibleStack) + 1;\n        if (!stacks[nextIndex]) {\n            nextIndex = 0;\n        }\n        this.showStack(this._getStackId(stacks[nextIndex]));\n    }\n    /**\n\t * Shows the last view from the previous stack.\n\t *\n\t * @private\n\t */\n    _showPrevStack() {\n        const stacks = Array.from(this._idToStack.values());\n        let nextIndex = stacks.indexOf(this._visibleStack) - 1;\n        if (!stacks[nextIndex]) {\n            nextIndex = stacks.length - 1;\n        }\n        this.showStack(this._getStackId(stacks[nextIndex]));\n    }\n    /**\n\t * Creates a rotator view.\n\t *\n\t * @private\n\t * @returns {module:ui/panel/balloon/contextualballoon~RotatorView}\n\t */\n    _createRotatorView() {\n        const view = new RotatorView(this.editor.locale);\n        const t = this.editor.locale.t;\n        this.view.content.add(view);\n        // Hide navigation when there is only a one stack & not in single view mode.\n        view.bind('isNavigationVisible').to(this, '_numberOfStacks', this, '_singleViewMode', (value, isSingleViewMode) => {\n            return !isSingleViewMode && value > 1;\n        });\n        // Update balloon position after toggling navigation.\n        view.on('change:isNavigationVisible', () => this.updatePosition(), { priority: 'low' });\n        // Update stacks counter value.\n        view.bind('counter').to(this, 'visibleView', this, '_numberOfStacks', (visibleView, numberOfStacks) => {\n            if (numberOfStacks < 2) {\n                return '';\n            }\n            const current = Array.from(this._idToStack.values()).indexOf(this._visibleStack) + 1;\n            return t('%0 of %1', [\n                current,\n                numberOfStacks\n            ]);\n        });\n        view.buttonNextView.on('execute', () => {\n            // When current view has a focus then move focus to the editable before removing it,\n            // otherwise editor will lost focus.\n            if (view.focusTracker.isFocused) {\n                this.editor.editing.view.focus();\n            }\n            this._showNextStack();\n        });\n        view.buttonPrevView.on('execute', () => {\n            // When current view has a focus then move focus to the editable before removing it,\n            // otherwise editor will lost focus.\n            if (view.focusTracker.isFocused) {\n                this.editor.editing.view.focus();\n            }\n            this._showPrevStack();\n        });\n        return view;\n    }\n    /**\n\t * @returns {module:ui/view~View}\n\t */\n    _createFakePanelsView() {\n        const view = new FakePanelsView(this.editor.locale, this.view);\n        view.bind('numberOfPanels').to(this, '_numberOfStacks', this, '_singleViewMode', (number, isSingleViewMode) => {\n            const showPanels = !isSingleViewMode && number >= 2;\n            return showPanels ? Math.min(number - 1, 2) : 0;\n        });\n        view.listenTo(this.view, 'change:top', () => view.updatePosition());\n        view.listenTo(this.view, 'change:left', () => view.updatePosition());\n        this.editor.ui.view.body.add(view);\n        return view;\n    }\n    /**\n\t * Sets the view as the content of the balloon and attaches the balloon using position\n\t * options of the first view.\n\t *\n\t * @private\n\t * @param {Object} data Configuration.\n\t * @param {module:ui/view~View} [data.view] The view to show in the balloon.\n\t * @param {String} [data.balloonClassName=''] Additional class name which will be added to the {@link #view balloon}.\n\t * @param {Boolean} [data.withArrow=true] Whether the {@link #view balloon} should be rendered with an arrow.\n\t */\n    _showView({view, balloonClassName = '', withArrow = true, singleViewMode = false}) {\n        this.view.class = balloonClassName;\n        this.view.withArrow = withArrow;\n        this._rotatorView.showView(view);\n        this.visibleView = view;\n        this.view.pin(this._getBalloonPosition());\n        this._fakePanelsView.updatePosition();\n        if (singleViewMode) {\n            this._singleViewMode = true;\n        }\n    }\n    /**\n\t * Returns position options of the last view in the stack.\n\t * This keeps the balloon in the same position when the view is changed.\n\t *\n\t * @private\n\t * @returns {module:utils/dom/position~Options}\n\t */\n    _getBalloonPosition() {\n        let position = Array.from(this._visibleStack.values()).pop().position;\n        // Use the default limiter if none has been specified.\n        if (position && !position.limiter) {\n            // Don't modify the original options object.\n            position = Object.assign({}, position, { limiter: this.positionLimiter });\n        }\n        return position;\n    }\n}\n/**\n * Rotator view is a helper class for the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon ContextualBalloon}.\n * It is used for displaying the last view from the current stack and providing navigation buttons for switching stacks.\n * See the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon ContextualBalloon} documentation to learn more.\n *\n * @extends module:ui/view~View\n */\nclass RotatorView extends View {\n    /**\n\t * @inheritDoc\n\t */\n    constructor(locale) {\n        super(locale);\n        const t = locale.t;\n        const bind = this.bindTemplate;\n        /**\n\t\t * Defines whether navigation is visible or not.\n\t\t *\n\t\t * @member {Boolean} #isNavigationVisible\n\t\t */\n        this.set('isNavigationVisible', true);\n        /**\n\t\t * Used for checking if a view is focused or not.\n\t\t *\n\t\t * @type {module:utils/focustracker~FocusTracker}\n\t\t */\n        this.focusTracker = new FocusTracker();\n        /**\n\t\t * Navigation button for switching the stack to the previous one.\n\t\t *\n\t\t * @type {module:ui/button/buttonview~ButtonView}\n\t\t */\n        this.buttonPrevView = this._createButtonView(t('Previous'), prevIcon);\n        /**\n\t\t * Navigation button for switching the stack to the next one.\n\t\t *\n\t\t * @type {module:ui/button/buttonview~ButtonView}\n\t\t */\n        this.buttonNextView = this._createButtonView(t('Next'), nextIcon);\n        /**\n\t\t * A collection of the child views that creates the rotator content.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this.content = this.createCollection();\n        this.setTemplate({\n            tag: 'div',\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-balloon-rotator'\n                ],\n                'z-index': '-1'\n            },\n            children: [\n                {\n                    tag: 'div',\n                    attributes: {\n                        class: [\n                            'ck-balloon-rotator__navigation',\n                            bind.to('isNavigationVisible', value => value ? '' : 'ck-hidden')\n                        ]\n                    },\n                    children: [\n                        this.buttonPrevView,\n                        {\n                            tag: 'span',\n                            attributes: { class: ['ck-balloon-rotator__counter'] },\n                            children: [{ text: bind.to('counter') }]\n                        },\n                        this.buttonNextView\n                    ]\n                },\n                {\n                    tag: 'div',\n                    attributes: { class: 'ck-balloon-rotator__content' },\n                    children: this.content\n                }\n            ]\n        });\n    }\n    /**\n\t * @inheritDoc\n\t */\n    render() {\n        super.render();\n        this.focusTracker.add(this.element);\n    }\n    /**\n\t * Shows a given view.\n\t *\n\t * @param {module:ui/view~View} view The view to show.\n\t */\n    showView(view) {\n        this.hideView();\n        this.content.add(view);\n    }\n    /**\n\t * Hides the currently displayed view.\n\t */\n    hideView() {\n        this.content.clear();\n    }\n    /**\n\t * Creates a navigation button view.\n\t *\n\t * @private\n\t * @param {String} label The button label.\n\t * @param {String} icon The button icon.\n\t * @returns {module:ui/button/buttonview~ButtonView}\n\t */\n    _createButtonView(label, icon) {\n        const view = new ButtonView(this.locale);\n        view.set({\n            label,\n            icon,\n            tooltip: true\n        });\n        return view;\n    }\n}\n// Displays additional layers under the balloon when multiple stacks are added to the balloon.\n//\n// @private\n// @extends module:ui/view~View\nclass FakePanelsView extends View {\n    // @inheritDoc\n    constructor(locale, balloonPanelView) {\n        super(locale);\n        const bind = this.bindTemplate;\n        // Fake panels top offset.\n        //\n        // @observable\n        // @member {Number} #top\n        this.set('top', 0);\n        // Fake panels left offset.\n        //\n        // @observable\n        // @member {Number} #left\n        this.set('left', 0);\n        // Fake panels height.\n        //\n        // @observable\n        // @member {Number} #height\n        this.set('height', 0);\n        // Fake panels width.\n        //\n        // @observable\n        // @member {Number} #width\n        this.set('width', 0);\n        // Number of rendered fake panels.\n        //\n        // @observable\n        // @member {Number} #numberOfPanels\n        this.set('numberOfPanels', 0);\n        // Collection of the child views which creates fake panel content.\n        //\n        // @readonly\n        // @type {module:ui/viewcollection~ViewCollection}\n        this.content = this.createCollection();\n        // Context.\n        //\n        // @private\n        // @type {module:ui/panel/balloon/balloonpanelview~BalloonPanelView}\n        this._balloonPanelView = balloonPanelView;\n        this.setTemplate({\n            tag: 'div',\n            attributes: {\n                class: [\n                    'ck-fake-panel',\n                    bind.to('numberOfPanels', number => number ? '' : 'ck-hidden')\n                ],\n                style: {\n                    top: bind.to('top', toPx),\n                    left: bind.to('left', toPx),\n                    width: bind.to('width', toPx),\n                    height: bind.to('height', toPx)\n                }\n            },\n            children: this.content\n        });\n        this.on('change:numberOfPanels', (evt, name, next, prev) => {\n            if (next > prev) {\n                this._addPanels(next - prev);\n            } else {\n                this._removePanels(prev - next);\n            }\n            this.updatePosition();\n        });\n    }\n    // @private\n    // @param {Number} number\n    _addPanels(number) {\n        while (number--) {\n            const view = new View();\n            view.setTemplate({ tag: 'div' });\n            this.content.add(view);\n            this.registerChild(view);\n        }\n    }\n    // @private\n    // @param {Number} number\n    _removePanels(number) {\n        while (number--) {\n            const view = this.content.last;\n            this.content.remove(view);\n            this.deregisterChild(view);\n            view.destroy();\n        }\n    }\n    // Updates coordinates of fake panels.\n    updatePosition() {\n        if (this.numberOfPanels) {\n            const {top, left} = this._balloonPanelView;\n            const {width, height} = new Rect(this._balloonPanelView.element);\n            Object.assign(this, {\n                top,\n                left,\n                width,\n                height\n            });\n        }\n    }\n}","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/editableelement\n */\n\nimport ContainerElement from './containerelement';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\n\nconst documentSymbol = Symbol( 'document' );\n\n/**\n * Editable element which can be a {@link module:engine/view/rooteditableelement~RootEditableElement root}\n * or nested editable area in the editor.\n *\n * Editable is automatically read-only when its {@link module:engine/view/document~Document Document} is read-only.\n *\n * The constructor of this class shouldn't be used directly. To create new `EditableElement` use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createEditableElement `downcastWriter#createEditableElement()`} method.\n *\n * @extends module:engine/view/containerelement~ContainerElement\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class EditableElement extends ContainerElement {\n\t/**\n\t * Creates an editable element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createEditableElement\n\t * @protected\n\t */\n\tconstructor( name, attrs, children ) {\n\t\tsuper( name, attrs, children );\n\n\t\t/**\n\t\t * Whether the editable is in read-write or read-only mode.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/editableelement~EditableElement#isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * Whether the editable is focused.\n\t\t *\n\t\t * This property updates when {@link module:engine/view/document~Document#isFocused document.isFocused} or view\n\t\t * selection is changed.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/editableelement~EditableElement#isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\t/**\n\t\t * The {@link module:engine/view/document~Document} which is an owner of this root.\n\t\t * Can only by set once.\n\t\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-editableelement-document-already-set`\n\t\t * when document is already set.\n\t\t *\n\t\t * @member {module:engine/view/document~Document} #document\n\t\t */\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'editableElement' || super.is( type );\n\t\t} else {\n\t\t\treturn ( type == 'editableElement' && name == this.name ) || super.is( type, name );\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Returns document associated with the editable.\n\t *\n\t * @readonly\n\t * @returns {module:engine/view/document~Document}\n\t */\n\tget document() {\n\t\treturn this.getCustomProperty( documentSymbol );\n\t}\n\n\t/**\n\t * Sets document of this editable element.\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document\n\t */\n\tset _document( document ) {\n\t\tif ( this.getCustomProperty( documentSymbol ) ) {\n\t\t\t/**\n\t\t\t * View document is already set. It can only be set once.\n\t\t\t *\n\t\t\t * @error view-editableelement-document-already-set\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-editableelement-document-already-set: View document is already set.', this );\n\t\t}\n\n\t\tthis._setCustomProperty( documentSymbol, document );\n\n\t\tthis.bind( 'isReadOnly' ).to( document );\n\n\t\tthis.bind( 'isFocused' ).to(\n\t\t\tdocument,\n\t\t\t'isFocused',\n\t\t\tisFocused => isFocused && document.selection.editableElement == this\n\t\t);\n\n\t\t// Update focus state based on selection changes.\n\t\tthis.listenTo( document.selection, 'change', () => {\n\t\t\tthis.isFocused = document.isFocused && document.selection.editableElement == this;\n\t\t} );\n\t}\n}\n\nmix( EditableElement, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/domeventdata\n */\n\nimport { extend } from 'lodash-es';\n\n/**\n * Information about a DOM event in context of the {@link module:engine/view/document~Document}.\n * It wraps the native event, which usually should not be used as the wrapper contains\n * additional data (like key code for keyboard events).\n */\nexport default class DomEventData {\n\t/**\n\t * @param {module:engine/view/view~View} view The instance of the view controller.\n\t * @param {Event} domEvent The DOM event.\n\t * @param {Object} [additionalData] Additional properties that the instance should contain.\n\t */\n\tconstructor( view, domEvent, additionalData ) {\n\t\t/**\n\t\t * Instance of the view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/view~View} module:engine/view/observer/observer~Observer.DomEvent#view\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * The instance of the document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document} module:engine/view/observer/observer~Observer.DomEvent#document\n\t\t */\n\t\tthis.document = view.document;\n\n\t\t/**\n\t\t * The DOM event.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Event} module:engine/view/observer/observer~Observer.DomEvent#domEvent\n\t\t */\n\t\tthis.domEvent = domEvent;\n\n\t\t/**\n\t\t * The DOM target.\n\t\t *\n\t\t * @readonly\n\t\t * @member {HTMLElement} module:engine/view/observer/observer~Observer.DomEvent#target\n\t\t */\n\t\tthis.domTarget = domEvent.target;\n\n\t\textend( this, additionalData );\n\t}\n\n\t/**\n\t * The tree view element representing the target.\n\t *\n\t * @readonly\n\t * @type module:engine/view/element~Element\n\t */\n\tget target() {\n\t\treturn this.view.domConverter.mapDomToView( this.domTarget );\n\t}\n\n\t/**\n\t * Prevents the native's event default action.\n\t */\n\tpreventDefault() {\n\t\tthis.domEvent.preventDefault();\n\t}\n\n\t/**\n\t * Stops native event propagation.\n\t */\n\tstopPropagation() {\n\t\tthis.domEvent.stopPropagation();\n\t}\n}\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n\n    return result;\n  }\n\n  if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n\n    return result;\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/iswindow\n */\n\n/**\n * Checks if the object is a native DOM Window.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isWindow( obj ) {\n\tconst stringifiedObject = Object.prototype.toString.apply( obj );\n\n\t// Returns `true` for the `window` object in browser environments.\n\tif ( stringifiedObject == '[object Window]' ) {\n\t\treturn true;\n\t}\n\n\t// Returns `true` for the `window` object in the Electron environment.\n\tif ( stringifiedObject == '[object global]' ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/spy\n */\n\n/**\n * Creates a spy function (ala Sinon.js) that can be used to inspect call to it.\n *\n * The following are the present features:\n *\n * * spy.called: property set to `true` if the function has been called at least once.\n *\n * @returns {Function} The spy function.\n */\nfunction spy() {\n\treturn function spy() {\n\t\tspy.called = true;\n\t};\n}\n\nexport default spy;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/eventinfo\n */\n\nimport spy from './spy';\n\n/**\n * The event object passed to event callbacks. It is used to provide information about the event as well as a tool to\n * manipulate it.\n */\nexport default class EventInfo {\n\t/**\n\t * @param {Object} source The emitter.\n\t * @param {String} name The event name.\n\t */\n\tconstructor( source, name ) {\n\t\t/**\n\t\t * The object that fired the event.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Object}\n\t\t */\n\t\tthis.source = source;\n\n\t\t/**\n\t\t * The event name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Path this event has followed. See {@link module:utils/emittermixin~EmitterMixin#delegate}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<Object>}\n\t\t */\n\t\tthis.path = [];\n\n\t\t// The following methods are defined in the constructor because they must be re-created per instance.\n\n\t\t/**\n\t\t * Stops the event emitter to call further callbacks for this event interaction.\n\t\t *\n\t\t * @method #stop\n\t\t */\n\t\tthis.stop = spy();\n\n\t\t/**\n\t\t * Removes the current callback from future interactions of this event.\n\t\t *\n\t\t * @method #off\n\t\t */\n\t\tthis.off = spy();\n\n\t\t/**\n\t\t * The value which will be returned by {@link module:utils/emittermixin~EmitterMixin#fire}.\n\t\t *\n\t\t * It's `undefined` by default and can be changed by an event listener:\n\t\t *\n\t\t *\t\tdataController.fire( 'getSelectedContent', ( evt ) => {\n\t\t *\t\t\t// This listener will make `dataController.fire( 'getSelectedContent' )`\n\t\t *\t\t\t// always return an empty DocumentFragment.\n\t\t *\t\t\tevt.return = new DocumentFragment();\n\t\t *\n\t\t *\t\t\t// Make sure no other listeners are executed.\n\t\t *\t\t\tevt.stop();\n\t\t *\t\t} );\n\t\t *\n\t\t * @member #return\n\t\t */\n\t}\n}\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/bindings/clickoutsidehandler\n */\n\n/* global document */\n\n/**\n * Handles clicking **outside** of a specified set of elements, then fires an action.\n *\n * **Note**: Actually, the action is executed upon `mousedown`, not `click`. It prevents\n * certain issues when the user keeps holding the mouse button and the UI cannot react\n * properly.\n *\n * @param {Object} options Configuration options.\n * @param {module:utils/dom/emittermixin~Emitter} options.emitter The emitter to which this behavior\n * should be added.\n * @param {Function} options.activator Function returning a `Boolean`, to determine whether the handler is active.\n * @param {Array.<HTMLElement>} options.contextElements HTML elements that determine the scope of the\n * handler. Clicking any of them or their descendants will **not** fire the callback.\n * @param {Function} options.callback An action executed by the handler.\n */\nexport default function clickOutsideHandler( { emitter, activator, callback, contextElements } ) {\n\temitter.listenTo( document, 'mousedown', ( evt, { target } ) => {\n\t\tif ( !activator() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const contextElement of contextElements ) {\n\t\t\tif ( contextElement.contains( target ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tcallback();\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module paragraph/paragraphcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * The paragraph command.\n *\n * @extends module:core/command~Command\n */\nexport default class ParagraphCommand extends Command {\n\t/**\n\t * The value of the command. Indicates whether the selection start is placed in a paragraph.\n\t *\n\t * @readonly\n\t * @observable\n\t * @member {Boolean} #value\n\t */\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst document = model.document;\n\t\tconst block = first( document.selection.getSelectedBlocks() );\n\n\t\tthis.value = !!block && block.is( 'paragraph' );\n\t\tthis.isEnabled = !!block && checkCanBecomeParagraph( block, model.schema );\n\t}\n\n\t/**\n\t * Executes the command. All the blocks (see {@link module:engine/model/schema~Schema}) in the selection\n\t * will be turned to paragraphs.\n\t *\n\t * @fires execute\n\t * @param {Object} [options] Options for the executed command.\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} [options.selection]\n\t * The selection that the command should be applied to.\n\t * By default, if not provided, the command is applied to the {@link module:engine/model/document~Document#selection}.\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst document = model.document;\n\n\t\tmodel.change( writer => {\n\t\t\tconst blocks = ( options.selection || document.selection ).getSelectedBlocks();\n\n\t\t\tfor ( const block of blocks ) {\n\t\t\t\tif ( !block.is( 'paragraph' ) && checkCanBecomeParagraph( block, model.schema ) ) {\n\t\t\t\t\twriter.rename( block, 'paragraph' );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n}\n\n// Checks whether the given block can be replaced by a paragraph.\n//\n// @private\n// @param {module:engine/model/element~Element} block A block to be tested.\n// @param {module:engine/model/schema~Schema} schema The schema of the document.\n// @returns {Boolean}\nfunction checkCanBecomeParagraph( block, schema ) {\n\treturn schema.checkChild( block.parent, 'paragraph' ) && !schema.isObject( block );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module paragraph/paragraph\n */\n\nimport ParagraphCommand from './paragraphcommand';\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\n/**\n * The paragraph feature for the editor.\n *\n * It introduces the `<paragraph>` element in the model which renders as a `<p>` element in the DOM and data.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Paragraph extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Paragraph';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst model = editor.model;\n\t\tconst data = editor.data;\n\n\t\teditor.commands.add( 'paragraph', new ParagraphCommand( editor ) );\n\n\t\t// Schema.\n\t\tmodel.schema.register( 'paragraph', { inheritAllFrom: '$block' } );\n\n\t\teditor.conversion.elementToElement( { model: 'paragraph', view: 'p' } );\n\n\t\t// Content autoparagraphing. --------------------------------------------------\n\n\t\t// Handles element which has not been converted by any plugin and checks if it would be converted if\n\t\t// we wrap it in a paragraph or change it to a paragraph.\n\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t\t\tmodel: ( viewElement, modelWriter ) => {\n\t\t\t\tif ( !Paragraph.paragraphLikeElements.has( viewElement.name ) ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\t// Do not auto-paragraph empty elements.\n\t\t\t\tif ( viewElement.isEmpty ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn modelWriter.createElement( 'paragraph' );\n\t\t\t},\n\t\t\tconverterPriority: 'low'\n\t\t} );\n\n\t\tdata.upcastDispatcher.on( 'element', ( evt, data, conversionApi ) => {\n\t\t\t// Do not try auto-paragraphing if the element was already converted.\n\t\t\tif ( !conversionApi.consumable.test( data.viewItem, { name: data.viewItem.name } ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the element is not paragraph-like try wrapping it in a paragraph.\n\t\t\tif ( isParagraphable( data.viewItem, data.modelCursor, conversionApi.schema ) ) {\n\t\t\t\tObject.assign( data, wrapInParagraph( data.viewItem, data.modelCursor, conversionApi ) );\n\t\t\t}\n\t\t}, { priority: 'low' } );\n\n\t\t// Handles not converted text nodes and checks if would be converted if we wraps then by a paragraph.\n\t\tdata.upcastDispatcher.on( 'text', ( evt, data, conversionApi ) => {\n\t\t\t// When node is already converted then do nothing.\n\t\t\tif ( data.modelRange ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isParagraphable( data.viewItem, data.modelCursor, conversionApi.schema ) ) {\n\t\t\t\tObject.assign( data, wrapInParagraph( data.viewItem, data.modelCursor, conversionApi ) );\n\t\t\t}\n\t\t}, { priority: 'lowest' } );\n\n\t\t// Empty roots autoparagraphing. -----------------------------------------------\n\n\t\t// Post-fixer which takes care of adding empty paragraph elements to empty roots.\n\t\t// Besides fixing content on #changesDone we also need to handle editor.data#ready event because\n\t\t// if initial data is empty or setData() wasn't even called there will be no #change fired.\n\t\tmodel.document.registerPostFixer( writer => this._autoparagraphEmptyRoots( writer ) );\n\n\t\teditor.data.on( 'ready', () => {\n\t\t\tmodel.enqueueChange( 'transparent', writer => this._autoparagraphEmptyRoots( writer ) );\n\t\t}, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * Fixes all empty roots.\n\t *\n\t * @private\n\t * @returns {Boolean} `true` if any change has been applied, `false` otherwise.\n\t */\n\t_autoparagraphEmptyRoots( writer ) {\n\t\tconst model = this.editor.model;\n\n\t\tfor ( const rootName of model.document.getRootNames() ) {\n\t\t\tconst root = model.document.getRoot( rootName );\n\n\t\t\tif ( root.isEmpty && root.rootName != '$graveyard' ) {\n\t\t\t\t// If paragraph element is allowed in the root, create paragraph element.\n\t\t\t\tif ( model.schema.checkChild( root, 'paragraph' ) ) {\n\t\t\t\t\twriter.insertElement( 'paragraph', root );\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * A list of element names which should be treated by the autoparagraphing algorithms as\n * paragraph-like. This means that e.g. the following content:\n *\n *\t\t<h1>Foo</h1>\n *\t\t<table>\n *\t\t\t<tr>\n *\t\t\t\t<td>X</td>\n *\t\t\t\t<td>\n *\t\t\t\t\t<ul>\n *\t\t\t\t\t\t<li>Y</li>\n *\t\t\t\t\t\t<li>Z</li>\n *\t\t\t\t\t</ul>\n *\t\t\t\t</td>\n *\t\t\t</tr>\n *\t\t</table>\n *\n * contains five paragraph-like elements: `<h1>`, two `<td>`s and two `<li>`s.\n * Hence, if none of the features is going to convert those elements the above content will be automatically handled\n * by the paragraph feature and converted to:\n *\n *\t\t<p>Foo</p>\n *\t\t<p>X</p>\n *\t\t<p>Y</p>\n *\t\t<p>Z</p>\n *\n * Note: The `<td>` containing two `<li>` elements was ignored as the innermost paragraph-like elements\n * have a priority upon conversion.\n *\n * @member {Set.<String>} module:paragraph/paragraph~Paragraph.paragraphLikeElements\n */\nParagraph.paragraphLikeElements = new Set( [\n\t'blockquote',\n\t'dd',\n\t'div',\n\t'dt',\n\t'h1',\n\t'h2',\n\t'h3',\n\t'h4',\n\t'h5',\n\t'h6',\n\t'li',\n\t'p',\n\t'td'\n] );\n\nfunction wrapInParagraph( input, position, conversionApi ) {\n\tconst paragraph = conversionApi.writer.createElement( 'paragraph' );\n\n\tconversionApi.writer.insert( paragraph, position );\n\treturn conversionApi.convertItem( input, conversionApi.writer.createPositionAt( paragraph, 0 ) );\n}\n\nfunction isParagraphable( node, position, schema ) {\n\tconst context = schema.createContext( position );\n\n\t// When paragraph is allowed in this context...\n\tif ( !schema.checkChild( context, 'paragraph' ) ) {\n\t\treturn false;\n\t}\n\n\t// And a node would be allowed in this paragraph...\n\tif ( !schema.checkChild( context.push( 'paragraph' ), node ) ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module ui/panel/balloon/balloonpanelview\n */\n\nimport View from '../../view';\nimport { getOptimalPosition } from '@ckeditor/ckeditor5-utils/src/dom/position';\nimport isRange from '@ckeditor/ckeditor5-utils/src/dom/isrange';\nimport toUnit from '@ckeditor/ckeditor5-utils/src/dom/tounit';\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport { isElement } from 'lodash-es';\n\nimport '../../../theme/components/panel/balloonpanel.css';\n\nconst toPx = toUnit( 'px' );\nconst defaultLimiterElement = global.document.body;\n\n/**\n * The balloon panel view class.\n *\n * A floating container which can\n * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView#pin pin} to any\n * {@link module:utils/dom/position~Options#target target} in the DOM and remain in that position\n * e.g. when the web page is scrolled.\n *\n * The balloon panel can be used to display contextual, non-blocking UI like forms, toolbars and\n * the like in its {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView#content} view\n * collection.\n *\n * There is a number of {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}\n * that the balloon can use, automatically switching from one to another when the viewport space becomes\n * scarce to keep the balloon visible to the user as long as it is possible. The balloon will also\n * accept any custom position set provided by the user compatible with the\n * {@link module:utils/dom/position~Options options}.\n *\n *\t\tconst panel = new BalloonPanelView( locale );\n *\t\tconst childView = new ChildView();\n *\t\tconst positions = BalloonPanelView.defaultPositions;\n *\n *\t\tpanel.render();\n *\n *\t\t// Add a child view to the panel's content collection.\n *\t\tpanel.content.add( childView );\n *\n *\t\t// Start pinning the panel to an element with the \"target\" id DOM.\n *\t\t// The balloon will remain pinned until unpin() is called.\n *\t\tpanel.pin( {\n *\t\t\ttarget: document.querySelector( '#target' ),\n *\t\t\tpositions: [\n *\t\t\t\tpositions.northArrowSouth,\n *\t\t\t\tpositions.southArrowNorth\n *\t\t\t]\n *\t\t} );\n *\n * @extends module:ui/view~View\n */\nexport default class BalloonPanelView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * The absolute top position of the balloon panel in pixels.\n\t\t *\n\t\t * @observable\n\t\t * @default 0\n\t\t * @member {Number} #top\n\t\t */\n\t\tthis.set( 'top', 0 );\n\n\t\t/**\n\t\t * The absolute left position of the balloon panel in pixels.\n\t\t *\n\t\t * @observable\n\t\t * @default 0\n\t\t * @member {Number} #left\n\t\t */\n\t\tthis.set( 'left', 0 );\n\n\t\t/**\n\t\t * The balloon panel's current position. The position name is reflected in the CSS class set\n\t\t * to the balloon, i.e. `.ck-balloon-panel_arrow_nw` for the \"arrow_nw\" position. The class\n\t\t * controls the minor aspects of the balloon's visual appearance like the placement\n\t\t * of an {@link #withArrow arrow}. To support a new position, an additional CSS must be created.\n\t\t *\n\t\t * Default position names correspond with\n\t\t * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.\n\t\t *\n\t\t * See the {@link #attachTo} and {@link #pin} methods to learn about custom balloon positions.\n\t\t *\n\t\t * @observable\n\t\t * @default 'arrow_nw'\n\t\t * @member {'arrow_nw'|'arrow_ne'|'arrow_sw'|'arrow_se'} #position\n\t\t */\n\t\tthis.set( 'position', 'arrow_nw' );\n\n\t\t/**\n\t\t * Controls whether the balloon panel is visible or not.\n\t\t *\n\t\t * @observable\n\t\t * @default false\n\t\t * @member {Boolean} #isVisible\n\t\t */\n\t\tthis.set( 'isVisible', false );\n\n\t\t/**\n\t\t * Controls whether the balloon panel has an arrow. The presence of the arrow\n\t\t * is reflected in the `ck-balloon-panel_with-arrow` CSS class.\n\t\t *\n\t\t * @observable\n\t\t * @default true\n\t\t * @member {Boolean} #withArrow\n\t\t */\n\t\tthis.set( 'withArrow', true );\n\n\t\t/**\n\t\t * An additional CSS class added to the {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #class\n\t\t */\n\t\tthis.set( 'class' );\n\n\t\t/**\n\t\t * A callback that starts pinning the panel when {@link #isVisible} gets\n\t\t * `true`. Used by {@link #pin}.\n\t\t *\n\t\t * @private\n\t\t * @member {Function} #_pinWhenIsVisibleCallback\n\t\t */\n\n\t\t/**\n\t\t * A collection of the child views that creates the balloon panel contents.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.content = this.createCollection();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-balloon-panel',\n\t\t\t\t\tbind.to( 'position', value => `ck-balloon-panel_${ value }` ),\n\t\t\t\t\tbind.if( 'isVisible', 'ck-balloon-panel_visible' ),\n\t\t\t\t\tbind.if( 'withArrow', 'ck-balloon-panel_with-arrow' ),\n\t\t\t\t\tbind.to( 'class' )\n\t\t\t\t],\n\n\t\t\t\tstyle: {\n\t\t\t\t\ttop: bind.to( 'top', toPx ),\n\t\t\t\t\tleft: bind.to( 'left', toPx )\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tchildren: this.content\n\t\t} );\n\t}\n\n\t/**\n\t * Shows the panel.\n\t *\n\t * See {@link #isVisible}.\n\t */\n\tshow() {\n\t\tthis.isVisible = true;\n\t}\n\n\t/**\n\t * Hides the panel.\n\t *\n\t * See {@link #isVisible}.\n\t */\n\thide() {\n\t\tthis.isVisible = false;\n\t}\n\n\t/**\n\t * Attaches the panel to a specified {@link module:utils/dom/position~Options#target} with a\n\t * smart positioning heuristics that chooses from available positions to make sure the panel\n\t * is visible to the user i.e. within the limits of the viewport.\n\t *\n\t * This method accepts configuration {@link module:utils/dom/position~Options options}\n\t * to set the `target`, optional `limiter` and `positions` the balloon should choose from.\n\t *\n\t *\t\tconst panel = new BalloonPanelView( locale );\n\t *\t\tconst positions = BalloonPanelView.defaultPositions;\n\t *\n\t *\t\tpanel.render();\n\t *\n\t *\t\t// Attach the panel to an element with the \"target\" id DOM.\n\t *\t\tpanel.attachTo( {\n\t *\t\t\ttarget: document.querySelector( '#target' ),\n\t *\t\t\tpositions: [\n\t *\t\t\t\tpositions.northArrowSouth,\n\t *\t\t\t\tpositions.southArrowNorth\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t * **Note**: Attaching the panel will also automatically {@link #show} it.\n\t *\n\t * **Note**: An attached panel will not follow its target when the window is scrolled or resized.\n\t * See the {@link #pin} method for a more permanent positioning strategy.\n\t *\n\t * @param {module:utils/dom/position~Options} options Positioning options compatible with\n\t * {@link module:utils/dom/position~getOptimalPosition}. Default `positions` array is\n\t * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.\n\t */\n\tattachTo( options ) {\n\t\tthis.show();\n\n\t\tconst defaultPositions = BalloonPanelView.defaultPositions;\n\t\tconst positionOptions = Object.assign( {}, {\n\t\t\telement: this.element,\n\t\t\tpositions: [\n\t\t\t\tdefaultPositions.southArrowNorth,\n\t\t\t\tdefaultPositions.southArrowNorthWest,\n\t\t\t\tdefaultPositions.southArrowNorthEast,\n\t\t\t\tdefaultPositions.northArrowSouth,\n\t\t\t\tdefaultPositions.northArrowSouthWest,\n\t\t\t\tdefaultPositions.northArrowSouthEast\n\t\t\t],\n\t\t\tlimiter: defaultLimiterElement,\n\t\t\tfitInViewport: true\n\t\t}, options );\n\n\t\tconst optimalPosition = BalloonPanelView._getOptimalPosition( positionOptions );\n\n\t\t// Usually browsers make some problems with super accurate values like 104.345px\n\t\t// so it is better to use int values.\n\t\tconst left = parseInt( optimalPosition.left );\n\t\tconst top = parseInt( optimalPosition.top );\n\t\tconst position = optimalPosition.name;\n\n\t\tObject.assign( this, { top, left, position } );\n\t}\n\n\t/**\n\t * Works the same way as the {@link #attachTo} method except that the position of the panel is\n\t * continuously updated when:\n\t *\n\t * * any ancestor of the {@link module:utils/dom/position~Options#target}\n\t * or {@link module:utils/dom/position~Options#limiter} is scrolled,\n\t * * the browser window gets resized or scrolled.\n\t *\n\t * Thanks to that, the panel always sticks to the {@link module:utils/dom/position~Options#target}\n\t * and is immune to the changing environment.\n\t *\n\t *\t\tconst panel = new BalloonPanelView( locale );\n\t *\t\tconst positions = BalloonPanelView.defaultPositions;\n\t *\n\t *\t\tpanel.render();\n\t *\n\t *\t\t// Pin the panel to an element with the \"target\" id DOM.\n\t *\t\tpanel.pin( {\n\t *\t\t\ttarget: document.querySelector( '#target' ),\n\t *\t\t\tpositions: [\n\t *\t\t\t\tpositions.northArrowSouth,\n\t *\t\t\t\tpositions.southArrowNorth\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t * To leave the pinned state, use the {@link #unpin} method.\n\t *\n\t * **Note**: Pinning the panel will also automatically {@link #show} it.\n\t *\n\t * @param {module:utils/dom/position~Options} options Positioning options compatible with\n\t * {@link module:utils/dom/position~getOptimalPosition}. Default `positions` array is\n\t * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.\n\t */\n\tpin( options ) {\n\t\tthis.unpin();\n\n\t\tthis._pinWhenIsVisibleCallback = () => {\n\t\t\tif ( this.isVisible ) {\n\t\t\t\tthis._startPinning( options );\n\t\t\t} else {\n\t\t\t\tthis._stopPinning();\n\t\t\t}\n\t\t};\n\n\t\tthis._startPinning( options );\n\n\t\t// Control the state of the listeners depending on whether the panel is visible\n\t\t// or not.\n\t\t// TODO: Use on() (https://github.com/ckeditor/ckeditor5-utils/issues/144).\n\t\tthis.listenTo( this, 'change:isVisible', this._pinWhenIsVisibleCallback );\n\t}\n\n\t/**\n\t * Stops pinning the panel, as set up by {@link #pin}.\n\t */\n\tunpin() {\n\t\tif ( this._pinWhenIsVisibleCallback ) {\n\t\t\t// Deactivate listeners attached by pin().\n\t\t\tthis._stopPinning();\n\n\t\t\t// Deactivate the panel pin() control logic.\n\t\t\t// TODO: Use off() (https://github.com/ckeditor/ckeditor5-utils/issues/144).\n\t\t\tthis.stopListening( this, 'change:isVisible', this._pinWhenIsVisibleCallback );\n\n\t\t\tthis._pinWhenIsVisibleCallback = null;\n\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t/**\n\t * Starts managing the pinned state of the panel. See {@link #pin}.\n\t *\n\t * @private\n\t * @param {module:utils/dom/position~Options} options Positioning options compatible with\n\t * {@link module:utils/dom/position~getOptimalPosition}.\n\t */\n\t_startPinning( options ) {\n\t\tthis.attachTo( options );\n\n\t\tconst targetElement = getDomElement( options.target );\n\t\tconst limiterElement = options.limiter ? getDomElement( options.limiter ) : defaultLimiterElement;\n\n\t\t// Then we need to listen on scroll event of eny element in the document.\n\t\tthis.listenTo( global.document, 'scroll', ( evt, domEvt ) => {\n\t\t\tconst scrollTarget = domEvt.target;\n\n\t\t\t// The position needs to be updated if the positioning target is within the scrolled element.\n\t\t\tconst isWithinScrollTarget = targetElement && scrollTarget.contains( targetElement );\n\n\t\t\t// The position needs to be updated if the positioning limiter is within the scrolled element.\n\t\t\tconst isLimiterWithinScrollTarget = limiterElement && scrollTarget.contains( limiterElement );\n\n\t\t\t// The positioning target and/or limiter can be a Rect, object etc..\n\t\t\t// There's no way to optimize the listener then.\n\t\t\tif ( isWithinScrollTarget || isLimiterWithinScrollTarget || !targetElement || !limiterElement ) {\n\t\t\t\tthis.attachTo( options );\n\t\t\t}\n\t\t}, { useCapture: true } );\n\n\t\t// We need to listen on window resize event and update position.\n\t\tthis.listenTo( global.window, 'resize', () => {\n\t\t\tthis.attachTo( options );\n\t\t} );\n\t}\n\n\t/**\n\t * Stops managing the pinned state of the panel. See {@link #pin}.\n\t *\n\t * @private\n\t */\n\t_stopPinning() {\n\t\tthis.stopListening( global.document, 'scroll' );\n\t\tthis.stopListening( global.window, 'resize' );\n\t}\n}\n\n// Returns the DOM element for given object or null, if there is none,\n// e.g. when the passed object is a Rect instance or so.\n//\n// @private\n// @param {*} object\n// @returns {HTMLElement|null}\nfunction getDomElement( object ) {\n\tif ( isElement( object ) ) {\n\t\treturn object;\n\t}\n\n\tif ( isRange( object ) ) {\n\t\treturn object.commonAncestorContainer;\n\t}\n\n\tif ( typeof object == 'function' ) {\n\t\treturn getDomElement( object() );\n\t}\n\n\treturn null;\n}\n\n/**\n * A horizontal offset of the arrow tip from the edge of the balloon. Controlled by CSS.\n *\n *\t\t +-----|---------...\n *\t\t |     |\n *\t\t |     |\n *\t\t |     |\n *\t\t |     |\n *\t\t +--+  |  +------...\n *\t\t     \\ | /\n *\t\t      \\|/\n *\t    >|-----|<---------------- horizontal offset\n *\n * @default 30\n * @member {Number} module:ui/panel/balloon/balloonpanelview~BalloonPanelView.arrowHorizontalOffset\n */\nBalloonPanelView.arrowHorizontalOffset = 25;\n\n/**\n * A vertical offset of the arrow from the edge of the balloon. Controlled by CSS.\n *\n *\t\t +-------------...\n *\t\t |\n *\t\t |\n *\t\t |                      /-- vertical offset\n *\t\t |                     V\n *\t\t +--+    +-----...    ---------\n *\t\t     \\  /              |\n *\t\t      \\/               |\n *\t\t-------------------------------\n *\t\t                       ^\n *\n * @default 15\n * @member {Number} module:ui/panel/balloon/balloonpanelview~BalloonPanelView.arrowVerticalOffset\n */\nBalloonPanelView.arrowVerticalOffset = 10;\n\n/**\n * Function used to calculate the optimal position for the balloon.\n *\n * @protected\n * @member {Function} module:ui/panel/balloon/balloonpanelview~BalloonPanelView._getOptimalPosition\n */\nBalloonPanelView._getOptimalPosition = getOptimalPosition;\n\n/**\n * A default set of positioning functions used by the balloon panel view\n * when attaching using the {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView#attachTo} method.\n *\n * The available positioning functions are as follows:\n *\n * **North**\n *\n * * `northArrowSouth`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t         V\n * \t\t    [ Target ]\n *\n * * `northArrowSouthEast`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t               V\n * \t\t          [ Target ]\n *\n * * `northArrowSouthWest`\n *\n * \t\t  +-----------------+\n * \t\t  |     Balloon     |\n * \t\t  +-----------------+\n * \t\t     V\n * \t\t[ Target ]\n *\n * **North west**\n *\n * * `northWestArrowSouth`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t         V\n * \t\t         [ Target ]\n *\n * * `northWestArrowSouthWest`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t   V\n * \t\t   [ Target ]\n *\n * * `northWestArrowSouthEast`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t               V\n * \t\t               [ Target ]\n *\n * **North east**\n *\n * * `northEastArrowSouth`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t         V\n * \t\t[ Target ]\n *\n * * `northEastArrowSouthEast`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t               V\n * \t\t      [ Target ]\n *\n * * `northEastArrowSouthWest`\n *\n * \t\t      +-----------------+\n * \t\t      |     Balloon     |\n * \t\t      +-----------------+\n * \t\t         V\n * \t\t[ Target ]\n *\n * **South**\n *\n * * `southArrowNorth`\n *\n *\t\t    [ Target ]\n *\t\t         ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southArrowNorthEast`\n *\n *\t\t          [ Target ]\n *\t\t               ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southArrowNorthWest`\n *\n *\t\t[ Target ]\n *\t\t     ^\n *\t\t   +-----------------+\n *\t\t   |     Balloon     |\n *\t\t   +-----------------+\n *\n * **South west**\n *\n * * `southWestArrowNorth`\n *\n *\t\t         [ Target ]\n *\t\t         ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southWestArrowNorthWest`\n *\n *\t\t  [ Target ]\n *\t\t  ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southWestArrowNorthEast`\n *\n *\t\t               [ Target ]\n *\t\t               ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * **South east**\n *\n * * `southEastArrowNorth`\n *\n *\t\t[ Target ]\n *\t\t         ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southEastArrowNorthEast`\n *\n *\t\t       [ Target ]\n *\t\t                ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southEastArrowNorthWest`\n *\n *\t\t[ Target ]\n *\t\t         ^\n *\t\t       +-----------------+\n *\t\t       |     Balloon     |\n *\t\t       +-----------------+\n *\n * See {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView#attachTo}.\n *\n * Positioning functions must be compatible with {@link module:utils/dom/position~Position}.\n *\n * The name that the position function returns will be reflected in the balloon panel's class that\n * controls the placement of the \"arrow\". See {@link #position} to learn more.\n *\n * @member {Object} module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions\n */\nBalloonPanelView.defaultPositions = {\n\t// ------- North\n\n\tnorthArrowSouth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - balloonRect.width / 2,\n\t\tname: 'arrow_s'\n\t} ),\n\n\tnorthArrowSouthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_se'\n\t} ),\n\n\tnorthArrowSouthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_sw'\n\t} ),\n\n\t// ------- North west\n\n\tnorthWestArrowSouth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - balloonRect.width / 2,\n\t\tname: 'arrow_s'\n\t} ),\n\n\tnorthWestArrowSouthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_sw'\n\t} ),\n\n\tnorthWestArrowSouthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_se'\n\t} ),\n\n\t// ------- North east\n\n\tnorthEastArrowSouth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - balloonRect.width / 2,\n\t\tname: 'arrow_s'\n\t} ),\n\n\tnorthEastArrowSouthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_se'\n\t} ),\n\n\tnorthEastArrowSouthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_sw'\n\t} ),\n\n\t// ------- South\n\n\tsouthArrowNorth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - balloonRect.width / 2,\n\t\tname: 'arrow_n'\n\t} ),\n\n\tsouthArrowNorthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_ne'\n\t} ),\n\n\tsouthArrowNorthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_nw'\n\t} ),\n\n\t// ------- South west\n\n\tsouthWestArrowNorth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - balloonRect.width / 2,\n\t\tname: 'arrow_n'\n\t} ),\n\n\tsouthWestArrowNorthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_nw'\n\t} ),\n\n\tsouthWestArrowNorthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_ne'\n\t} ),\n\n\t// ------- South east\n\n\tsouthEastArrowNorth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - balloonRect.width / 2,\n\t\tname: 'arrow_n'\n\t} ),\n\n\tsouthEastArrowNorthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_ne'\n\t} ),\n\n\tsouthEastArrowNorthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_nw'\n\t} ),\n};\n\n// Returns the top coordinate for positions starting with `north*`.\n//\n// @private\n// @param {utils/dom/rect~Rect} targetRect A rect of the target.\n// @param {utils/dom/rect~Rect} elementRect A rect of the balloon.\n// @returns {Number}\nfunction getNorthTop( targetRect, balloonRect ) {\n\treturn targetRect.top - balloonRect.height - BalloonPanelView.arrowVerticalOffset;\n}\n\n// Returns the top coordinate for positions starting with `south*`.\n//\n// @private\n// @param {utils/dom/rect~Rect} targetRect A rect of the target.\n// @param {utils/dom/rect~Rect} elementRect A rect of the balloon.\n// @returns {Number}\nfunction getSouthTop( targetRect ) {\n\treturn targetRect.bottom + BalloonPanelView.arrowVerticalOffset;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/toolbarview\n */\n\nimport View from '../view';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '../focuscycler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\nimport ToolbarSeparatorView from './toolbarseparatorview';\nimport preventDefault from '../bindings/preventdefault.js';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\n\nimport '../../theme/components/toolbar/toolbar.css';\n\n/**\n * The toolbar view class.\n *\n * @extends module:ui/view~View\n * @implements module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable\n */\nexport default class ToolbarView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * Collection of the toolbar items (like buttons).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.items = this.createCollection();\n\n\t\t/**\n\t\t * Tracks information about DOM focus in the list.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.focusTracker = new FocusTracker();\n\n\t\t/**\n\t\t * Instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new KeystrokeHandler();\n\n\t\t/**\n\t\t * Controls the orientation of toolbar items.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isVertical\n\t\t */\n\t\tthis.set( 'isVertical', false );\n\n\t\t/**\n\t\t * An additional CSS class added to the {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #class\n\t\t */\n\t\tthis.set( 'class' );\n\n\t\t/**\n\t\t * Helps cycling over focusable {@link #items} in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n\t\tthis._focusCycler = new FocusCycler( {\n\t\t\tfocusables: this.items,\n\t\t\tfocusTracker: this.focusTracker,\n\t\t\tkeystrokeHandler: this.keystrokes,\n\t\t\tactions: {\n\t\t\t\t// Navigate toolbar items backwards using the arrow[left,up] keys.\n\t\t\t\tfocusPrevious: [ 'arrowleft', 'arrowup' ],\n\n\t\t\t\t// Navigate toolbar items forwards using the arrow[right,down] keys.\n\t\t\t\tfocusNext: [ 'arrowright', 'arrowdown' ]\n\t\t\t}\n\t\t} );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar',\n\t\t\t\t\tbind.if( 'isVertical', 'ck-toolbar_vertical' ),\n\t\t\t\t\tbind.to( 'class' )\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchildren: this.items,\n\n\t\t\ton: {\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/206\n\t\t\t\tmousedown: preventDefault( this )\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Items added before rendering should be known to the #focusTracker.\n\t\tfor ( const item of this.items ) {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t}\n\n\t\tthis.items.on( 'add', ( evt, item ) => {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t} );\n\n\t\tthis.items.on( 'remove', ( evt, item ) => {\n\t\t\tthis.focusTracker.remove( item.element );\n\t\t} );\n\n\t\t// Start listening for the keystrokes coming from #element.\n\t\tthis.keystrokes.listenTo( this.element );\n\t}\n\n\t/**\n\t * Focuses the first focusable in {@link #items}.\n\t */\n\tfocus() {\n\t\tthis._focusCycler.focusFirst();\n\t}\n\n\t/**\n\t * Focuses the last focusable in {@link #items}.\n\t */\n\tfocusLast() {\n\t\tthis._focusCycler.focusLast();\n\t}\n\n\t/**\n\t * A utility which expands a plain toolbar configuration into\n\t * {@link module:ui/toolbar/toolbarview~ToolbarView#items} using a given component factory.\n\t *\n\t * @param {Array.<String>} config The toolbar items config.\n\t * @param {module:ui/componentfactory~ComponentFactory} factory A factory producing toolbar items.\n\t */\n\tfillFromConfig( config, factory ) {\n\t\tconfig.map( name => {\n\t\t\tif ( name == '|' ) {\n\t\t\t\tthis.items.add( new ToolbarSeparatorView() );\n\t\t\t} else if ( factory.has( name ) ) {\n\t\t\t\tthis.items.add( factory.create( name ) );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * There was a problem processing the configuration of the toolbar. The item with the given\n\t\t\t\t * name does not exist so it was omitted when rendering the toolbar.\n\t\t\t\t *\n\t\t\t\t * This warning usually shows up when the {@link module:core/plugin~Plugin} which is supposed\n\t\t\t\t * to provide a toolbar item has not been loaded or there is a typo in the configuration.\n\t\t\t\t *\n\t\t\t\t * Make sure the plugin responsible for this toolbar item is loaded and the toolbar configuration\n\t\t\t\t * is correct, e.g. {@link module:basic-styles/bold~Bold} is loaded for the `'bold'` toolbar item.\n\t\t\t\t *\n\t\t\t\t * You can use the following snippet to retrieve all available toolbar items:\n\t\t\t\t *\n\t\t\t\t *\t\tArray.from( editor.ui.componentFactory.names() );\n\t\t\t\t *\n\t\t\t\t * @error toolbarview-item-unavailable\n\t\t\t\t * @param {String} name The name of the component.\n\t\t\t\t */\n\t\t\t\tlog.warn(\n\t\t\t\t\t'toolbarview-item-unavailable: The requested toolbar item is unavailable.',\n\t\t\t\t\t{ name }\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}\n}\n\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/bindings/preventdefault\n */\n\n/**\n * A helper which executes a native `Event.preventDefault()` if the target of an event equals the\n * {@link module:ui/view~View#element element of the view}. It shortens the definition of a\n * {@link module:ui/view~View#template template}.\n *\n *\t\t// In a class extending View.\n *\t\timport preventDefault from '@ckeditor/ckeditor5-ui/src/bindings/preventdefault';\n *\n *\t\t// ...\n *\n *\t\tthis.setTemplate( {\n *\t\t\ttag: 'div',\n *\n *\t\t\ton: {\n *\t\t\t\t// Prevent the default mousedown action on this view.\n *\t\t\t\tmousedown: preventDefault( this )\n *\t\t\t}\n *\t\t} );\n *\n * @param {module:ui/view~View} view View instance that defines the template.\n * @returns {module:ui/template~TemplateToBinding}\n */\nexport default function preventDefault( view ) {\n\treturn view.bindTemplate.to( evt => {\n\t\tif ( evt.target === view.element ) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/priorities\n */\n\n/**\n * String representing a priority value.\n *\n * @typedef {'highest'|'high'|'normal'|'low'|'lowest'} module:utils/priorities~PriorityString\n */\n\n/**\n * Provides group of constants to use instead of hardcoding numeric priority values.\n *\n * @namespace\n */\nconst priorities = {\n\t/**\n\t * Converts a string with priority name to it's numeric value. If `Number` is given, it just returns it.\n\t *\n\t * @static\n\t * @param {module:utils/priorities~PriorityString|Number} priority Priority to convert.\n\t * @returns {Number} Converted priority.\n\t */\n\tget( priority ) {\n\t\tif ( typeof priority != 'number' ) {\n\t\t\treturn this[ priority ] || this.normal;\n\t\t} else {\n\t\t\treturn priority;\n\t\t}\n\t},\n\n\thighest: 100000,\n\thigh: 1000,\n\tnormal: 0,\n\tlow: -1000,\n\tlowest: -100000\n};\n\nexport default priorities;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/mouseobserver\n */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * Mouse events observer.\n *\n * Note that this observer is not available by default. To make it available it needs to be added to\n * {@link module:engine/view/view~View} by {@link module:engine/view/view~View#addObserver} method.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class MouseObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = 'mousedown';\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n}\n\n/**\n * Fired when mouse button is pressed down on one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/mouseobserver~MouseObserver}.\n *\n * Note that this event is not available by default. To make it available {@link module:engine/view/observer/mouseobserver~MouseObserver}\n * needs to be added to {@link module:engine/view/view~View} by a {@link module:engine/view/view~View#addObserver} method.\n *\n * @see module:engine/view/observer/mouseobserver~MouseObserver\n * @event module:engine/view/document~Document#event:mousedown\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module widget/widget\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport MouseObserver from '@ckeditor/ckeditor5-engine/src/view/observer/mouseobserver';\nimport { getLabel, isWidget, WIDGET_SELECTED_CLASS_NAME } from './utils';\nimport { getCode, keyCodes, parseKeystroke } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\nimport '../theme/widget.css';\n\nconst selectAllKeystrokeCode = parseKeystroke( 'Ctrl+A' );\n\n/**\n * The widget plugin. It enables base support for widgets.\n *\n * See {@glink api/widget package page} for more details and documentation.\n *\n * This plugin enables multiple behaviors required by widgets:\n *\n * * The model to view selection converter for the editing pipeline (it handles widget custom selection rendering).\n * If a converted selection wraps around a widget element, that selection is marked as\n * {@link module:engine/view/selection~Selection#isFake fake}. Additionally, the `ck-widget_selected` CSS class\n * is added to indicate that widget has been selected.\n * * The mouse and keyboard events handling on and around widget elements.\n *\n * @extends module:core/plugin~Plugin.\n */\nexport default class Widget extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Widget';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst view = this.editor.editing.view;\n\t\tconst viewDocument = view.document;\n\n\t\t/**\n\t\t * Holds previously selected widgets.\n\t\t *\n\t\t * @private\n\t\t * @type {Set.<module:engine/view/element~Element>}\n\t\t */\n\t\tthis._previouslySelected = new Set();\n\n\t\t// Model to view selection converter.\n\t\t// Converts selection placed over widget element to fake selection\n\t\tthis.editor.editing.downcastDispatcher.on( 'selection', ( evt, data, conversionApi ) => {\n\t\t\t// Remove selected class from previously selected widgets.\n\t\t\tthis._clearPreviouslySelectedWidgets( conversionApi.writer );\n\n\t\t\tconst viewWriter = conversionApi.writer;\n\t\t\tconst viewSelection = viewWriter.document.selection;\n\t\t\tconst selectedElement = viewSelection.getSelectedElement();\n\t\t\tlet lastMarked = null;\n\n\t\t\tfor ( const range of viewSelection.getRanges() ) {\n\t\t\t\tfor ( const value of range ) {\n\t\t\t\t\tconst node = value.item;\n\n\t\t\t\t\t// Do not mark nested widgets in selected one. See: #57.\n\t\t\t\t\tif ( isWidget( node ) && !isChild( node, lastMarked ) ) {\n\t\t\t\t\t\tviewWriter.addClass( WIDGET_SELECTED_CLASS_NAME, node );\n\n\t\t\t\t\t\tthis._previouslySelected.add( node );\n\t\t\t\t\t\tlastMarked = node;\n\n\t\t\t\t\t\t// Check if widget is a single element selected.\n\t\t\t\t\t\tif ( node == selectedElement ) {\n\t\t\t\t\t\t\tviewWriter.setSelection( viewSelection.getRanges(), { fake: true, label: getLabel( selectedElement ) } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, { priority: 'low' } );\n\n\t\t// If mouse down is pressed on widget - create selection over whole widget.\n\t\tview.addObserver( MouseObserver );\n\t\tthis.listenTo( viewDocument, 'mousedown', ( ...args ) => this._onMousedown( ...args ) );\n\n\t\t// Handle custom keydown behaviour.\n\t\tthis.listenTo( viewDocument, 'keydown', ( ...args ) => this._onKeydown( ...args ), { priority: 'high' } );\n\n\t\t// Handle custom delete behaviour.\n\t\tthis.listenTo( viewDocument, 'delete', ( evt, data ) => {\n\t\t\tif ( this._handleDelete( data.direction == 'forward' ) ) {\n\t\t\t\tdata.preventDefault();\n\t\t\t\tevt.stop();\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\t}\n\n\t/**\n\t * Handles {@link module:engine/view/document~Document#event:mousedown mousedown} events on widget elements.\n\t *\n\t * @private\n\t * @param {module:utils/eventinfo~EventInfo} eventInfo\n\t * @param {module:engine/view/observer/domeventdata~DomEventData} domEventData\n\t */\n\t_onMousedown( eventInfo, domEventData ) {\n\t\tconst editor = this.editor;\n\t\tconst view = editor.editing.view;\n\t\tconst viewDocument = view.document;\n\t\tlet element = domEventData.target;\n\n\t\t// Do nothing for single or double click inside nested editable.\n\t\tif ( isInsideNestedEditable( element ) ) {\n\t\t\t// But at least triple click inside nested editable causes broken selection in Safari.\n\t\t\t// For such event, we select the entire nested editable element.\n\t\t\t// See: https://github.com/ckeditor/ckeditor5/issues/1463.\n\t\t\tif ( env.isSafari && domEventData.domEvent.detail >= 3 ) {\n\t\t\t\tconst mapper = editor.editing.mapper;\n\t\t\t\tconst modelElement = mapper.toModelElement( element );\n\n\t\t\t\tthis.editor.model.change( writer => {\n\t\t\t\t\tdomEventData.preventDefault();\n\t\t\t\t\twriter.setSelection( modelElement, 'in' );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// If target is not a widget element - check if one of the ancestors is.\n\t\tif ( !isWidget( element ) ) {\n\t\t\telement = element.findAncestor( isWidget );\n\n\t\t\tif ( !element ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tdomEventData.preventDefault();\n\n\t\t// Focus editor if is not focused already.\n\t\tif ( !viewDocument.isFocused ) {\n\t\t\tview.focus();\n\t\t}\n\n\t\t// Create model selection over widget.\n\t\tconst modelElement = editor.editing.mapper.toModelElement( element );\n\n\t\tthis._setSelectionOverElement( modelElement );\n\t}\n\n\t/**\n\t * Handles {@link module:engine/view/document~Document#event:keydown keydown} events.\n\t *\n\t * @private\n\t * @param {module:utils/eventinfo~EventInfo} eventInfo\n\t * @param {module:engine/view/observer/domeventdata~DomEventData} domEventData\n\t */\n\t_onKeydown( eventInfo, domEventData ) {\n\t\tconst keyCode = domEventData.keyCode;\n\t\tconst isForward = keyCode == keyCodes.arrowdown || keyCode == keyCodes.arrowright;\n\t\tlet wasHandled = false;\n\n\t\t// Checks if the keys were handled and then prevents the default event behaviour and stops\n\t\t// the propagation.\n\t\tif ( isArrowKeyCode( keyCode ) ) {\n\t\t\twasHandled = this._handleArrowKeys( isForward );\n\t\t} else if ( isSelectAllKeyCode( domEventData ) ) {\n\t\t\twasHandled = this._selectAllNestedEditableContent() || this._selectAllContent();\n\t\t} else if ( keyCode === keyCodes.enter ) {\n\t\t\twasHandled = this._handleEnterKey( domEventData.shiftKey );\n\t\t}\n\n\t\tif ( wasHandled ) {\n\t\t\tdomEventData.preventDefault();\n\t\t\teventInfo.stop();\n\t\t}\n\t}\n\n\t/**\n\t * Handles delete keys: backspace and delete.\n\t *\n\t * @private\n\t * @param {Boolean} isForward Set to true if delete was performed in forward direction.\n\t * @returns {Boolean|undefined} Returns `true` if keys were handled correctly.\n\t */\n\t_handleDelete( isForward ) {\n\t\t// Do nothing when the read only mode is enabled.\n\t\tif ( this.editor.isReadOnly ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst modelDocument = this.editor.model.document;\n\t\tconst modelSelection = modelDocument.selection;\n\n\t\t// Do nothing on non-collapsed selection.\n\t\tif ( !modelSelection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst objectElement = this._getObjectElementNextToSelection( isForward );\n\n\t\tif ( objectElement ) {\n\t\t\tthis.editor.model.change( writer => {\n\t\t\t\tlet previousNode = modelSelection.anchor.parent;\n\n\t\t\t\t// Remove previous element if empty.\n\t\t\t\twhile ( previousNode.isEmpty ) {\n\t\t\t\t\tconst nodeToRemove = previousNode;\n\t\t\t\t\tpreviousNode = nodeToRemove.parent;\n\n\t\t\t\t\twriter.remove( nodeToRemove );\n\t\t\t\t}\n\n\t\t\t\tthis._setSelectionOverElement( objectElement );\n\t\t\t} );\n\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t/**\n\t * Handles arrow keys.\n\t *\n\t * @private\n\t * @param {Boolean} isForward Set to true if arrow key should be handled in forward direction.\n\t * @returns {Boolean|undefined} Returns `true` if keys were handled correctly.\n\t */\n\t_handleArrowKeys( isForward ) {\n\t\tconst model = this.editor.model;\n\t\tconst schema = model.schema;\n\t\tconst modelDocument = model.document;\n\t\tconst modelSelection = modelDocument.selection;\n\t\tconst objectElement = modelSelection.getSelectedElement();\n\n\t\t// If object element is selected.\n\t\tif ( objectElement && schema.isObject( objectElement ) ) {\n\t\t\tconst position = isForward ? modelSelection.getLastPosition() : modelSelection.getFirstPosition();\n\t\t\tconst newRange = schema.getNearestSelectionRange( position, isForward ? 'forward' : 'backward' );\n\n\t\t\tif ( newRange ) {\n\t\t\t\tmodel.change( writer => {\n\t\t\t\t\twriter.setSelection( newRange );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\t// If selection is next to object element.\n\t\t// Return if not collapsed.\n\t\tif ( !modelSelection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst objectElement2 = this._getObjectElementNextToSelection( isForward );\n\n\t\tif ( !!objectElement2 && schema.isObject( objectElement2 ) ) {\n\t\t\tthis._setSelectionOverElement( objectElement2 );\n\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t/**\n\t * Handles the enter key, giving users and access to positions in the editable directly before\n\t * (<kbd>Shift</kbd>+<kbd>Enter</kbd>) or after (<kbd>Enter</kbd>) the selected widget.\n\t * It improves the UX, mainly when the widget is the first or last child of the root editable\n\t * and there's no other way to type after or before it.\n\t *\n\t * @private\n\t * @param {Boolean} isBackwards Set to true if the new paragraph is to be inserted before\n\t * the selected widget (<kbd>Shift</kbd>+<kbd>Enter</kbd>).\n\t * @returns {Boolean|undefined} Returns `true` if keys were handled correctly.\n\t */\n\t_handleEnterKey( isBackwards ) {\n\t\tconst model = this.editor.model;\n\t\tconst modelSelection = model.document.selection;\n\t\tconst selectedElement = modelSelection.getSelectedElement();\n\n\t\tif ( shouldInsertParagraph( selectedElement, model.schema ) ) {\n\t\t\tmodel.change( writer => {\n\t\t\t\tlet position = writer.createPositionAt( selectedElement, isBackwards ? 'before' : 'after' );\n\t\t\t\tconst paragraph = writer.createElement( 'paragraph' );\n\n\t\t\t\t// Split the parent when inside a block element.\n\t\t\t\t// https://github.com/ckeditor/ckeditor5/issues/1529\n\t\t\t\tif ( model.schema.isBlock( selectedElement.parent ) ) {\n\t\t\t\t\tconst paragraphLimit = model.schema.findAllowedParent( position, paragraph );\n\n\t\t\t\t\tposition = writer.split( position, paragraphLimit ).position;\n\t\t\t\t}\n\n\t\t\t\twriter.insert( paragraph, position );\n\t\t\t\twriter.setSelection( paragraph, 'in' );\n\t\t\t} );\n\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t/**\n\t * Extends the {@link module:engine/model/selection~Selection document's selection} to span the entire\n\t * content of the nested editable if already anchored in one.\n\t *\n\t * See: {@link module:engine/model/schema~Schema#getLimitElement}.\n\t *\n\t * @private\n\t */\n\t_selectAllNestedEditableContent() {\n\t\tconst model = this.editor.model;\n\t\tconst documentSelection = model.document.selection;\n\t\tconst limitElement = model.schema.getLimitElement( documentSelection );\n\n\t\tif ( documentSelection.getFirstRange().root == limitElement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tmodel.change( writer => {\n\t\t\twriter.setSelection( writer.createRangeIn( limitElement ) );\n\t\t} );\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Handles <kbd>CTRL + A</kbd> when widget is selected.\n\t *\n\t * @private\n\t * @returns {Boolean} Returns true if widget was selected and selecting all was handled by this method.\n\t */\n\t_selectAllContent() {\n\t\tconst model = this.editor.model;\n\t\tconst editing = this.editor.editing;\n\t\tconst view = editing.view;\n\t\tconst viewDocument = view.document;\n\t\tconst viewSelection = viewDocument.selection;\n\n\t\tconst selectedElement = viewSelection.getSelectedElement();\n\n\t\t// Only widget is selected.\n\t\t// https://github.com/ckeditor/ckeditor5-widget/issues/23\n\t\tif ( selectedElement && isWidget( selectedElement ) ) {\n\t\t\tconst widgetParent = editing.mapper.toModelElement( selectedElement.parent );\n\n\t\t\tmodel.change( writer => {\n\t\t\t\twriter.setSelection( writer.createRangeIn( widgetParent ) );\n\t\t\t} );\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Sets {@link module:engine/model/selection~Selection document's selection} over given element.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} element\n\t */\n\t_setSelectionOverElement( element ) {\n\t\tthis.editor.model.change( writer => {\n\t\t\twriter.setSelection( writer.createRangeOn( element ) );\n\t\t} );\n\t}\n\n\t/**\n\t * Checks if {@link module:engine/model/element~Element element} placed next to the current\n\t * {@link module:engine/model/selection~Selection model selection} exists and is marked in\n\t * {@link module:engine/model/schema~Schema schema} as `object`.\n\t *\n\t * @private\n\t * @param {Boolean} forward Direction of checking.\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\t_getObjectElementNextToSelection( forward ) {\n\t\tconst model = this.editor.model;\n\t\tconst schema = model.schema;\n\t\tconst modelSelection = model.document.selection;\n\n\t\t// Clone current selection to use it as a probe. We must leave default selection as it is so it can return\n\t\t// to its current state after undo.\n\t\tconst probe = model.createSelection( modelSelection );\n\t\tmodel.modifySelection( probe, { direction: forward ? 'forward' : 'backward' } );\n\t\tconst objectElement = forward ? probe.focus.nodeBefore : probe.focus.nodeAfter;\n\n\t\tif ( !!objectElement && schema.isObject( objectElement ) ) {\n\t\t\treturn objectElement;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Removes CSS class from previously selected widgets.\n\t *\n\t * @private\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n\t */\n\t_clearPreviouslySelectedWidgets( writer ) {\n\t\tfor ( const widget of this._previouslySelected ) {\n\t\t\twriter.removeClass( WIDGET_SELECTED_CLASS_NAME, widget );\n\t\t}\n\n\t\tthis._previouslySelected.clear();\n\t}\n}\n\n// Returns 'true' if provided key code represents one of the arrow keys.\n//\n// @param {Number} keyCode\n// @returns {Boolean}\nfunction isArrowKeyCode( keyCode ) {\n\treturn keyCode == keyCodes.arrowright ||\n\t\tkeyCode == keyCodes.arrowleft ||\n\t\tkeyCode == keyCodes.arrowup ||\n\t\tkeyCode == keyCodes.arrowdown;\n}\n\n// Returns 'true' if provided (DOM) key event data corresponds with the Ctrl+A keystroke.\n//\n// @param {module:engine/view/observer/keyobserver~KeyEventData} domEventData\n// @returns {Boolean}\nfunction isSelectAllKeyCode( domEventData ) {\n\treturn getCode( domEventData ) == selectAllKeystrokeCode;\n}\n\n// Returns `true` when element is a nested editable or is placed inside one.\n//\n// @param {module:engine/view/element~Element}\n// @returns {Boolean}\nfunction isInsideNestedEditable( element ) {\n\twhile ( element ) {\n\t\tif ( element.is( 'editableElement' ) && !element.is( 'rootElement' ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Click on nested widget should select it.\n\t\tif ( isWidget( element ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\telement = element.parent;\n\t}\n\n\treturn false;\n}\n\n// Checks whether the specified `element` is a child of the `parent` element.\n//\n// @param {module:engine/view/element~Element} element An element to check.\n// @param {module:engine/view/element~Element|null} parent A parent for the element.\n// @returns {Boolean}\nfunction isChild( element, parent ) {\n\tif ( !parent ) {\n\t\treturn false;\n\t}\n\n\treturn Array.from( element.getAncestors() ).includes( parent );\n}\n\n// Checks if enter key should insert paragraph. This should be done only on elements of type object (excluding inline objects).\n//\n// @param {module:engine/model/element~Element} element And element to check.\n// @param {module:engine/model/schema~Schema} schema\nfunction shouldInsertParagraph( element, schema ) {\n\treturn element && schema.isObject( element ) && !schema.isInline( element );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/tounit\n */\n\n/**\n * Returns a helper function, which adds a desired trailing\n * `unit` to the passed value.\n *\n * @param {String} unit An unit like \"px\" or \"em\".\n * @returns {module:utils/dom/tounit~helper}\n */\nexport default function toUnit( unit ) {\n\t/**\n\t * A function, which adds a pre–defined trailing `unit`\n\t * to the passed `value`.\n\t *\n\t * @function helper\n \t * @param {*} value A value to be given the unit.\n \t * @returns {String} A value with the trailing unit.\n\t */\n\treturn value => value + unit;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/labeledinput/labeledinputview\n */\n\nimport View from '../view';\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\nimport LabelView from '../label/labelview';\nimport '../../theme/components/labeledinput/labeledinput.css';\n\n/**\n * The labeled input view class.\n *\n * @extends module:ui/view~View\n */\nexport default class LabeledInputView extends View {\n\t/**\n\t * Creates an instance of the labeled input view class.\n\t *\n\t * @param {module:utils/locale~Locale} locale The locale instance.\n\t * @param {Function} InputView Constructor of the input view.\n\t */\n\tconstructor( locale, InputView ) {\n\t\tsuper( locale );\n\n\t\tconst inputUid = `ck-input-${ uid() }`;\n\t\tconst statusUid = `ck-status-${ uid() }`;\n\n\t\t/**\n\t\t * The text of the label.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #label\n\t\t */\n\t\tthis.set( 'label' );\n\n\t\t/**\n\t\t * The value of the input.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #value\n\t\t */\n\t\tthis.set( 'value' );\n\n\t\t/**\n\t\t * Controls whether the component is in read-only mode.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * The validation error text. When set, it will be displayed\n\t\t * next to the {@link #inputView} as a typical validation error message.\n\t\t * Set it to `null` to hide the message.\n\t\t *\n\t\t * **Note:** Setting this property to anything but `null` will automatically\n\t\t * make the {@link module:ui/inputtext/inputtextview~InputTextView#hasError `hasError`}\n\t\t * of the {@link #inputView} `true`.\n\t\t *\n\t\t * **Note:** Typing in the {@link #inputView} which fires the\n\t\t * {@link module:ui/inputtext/inputtextview~InputTextView#event:input `input` event}\n\t\t * resets this property back to `null`, indicating that the input field can be re–validated.\n\t\t *\n\t\t * @observable\n\t\t * @member {String|null} #errorText\n\t\t */\n\t\tthis.set( 'errorText', null );\n\n\t\t/**\n\t\t * The additional information text displayed next to the {@link #inputView} which can\n\t\t * be used to inform the user about the purpose of the input, provide help or hints.\n\t\t *\n\t\t * Set it to `null` to hide the message.\n\t\t *\n\t\t * **Note:** This text will be displayed in the same place as {@link #errorText} but the\n\t\t * latter always takes precedence: if the {@link #errorText} is set, it replaces\n\t\t * {@link #errorText} for as long as the value of the input is invalid.\n\t\t *\n\t\t * @observable\n\t\t * @member {String|null} #infoText\n\t\t */\n\t\tthis.set( 'infoText', null );\n\n\t\t/**\n\t\t * The label view.\n\t\t *\n\t\t * @member {module:ui/label/labelview~LabelView} #labelView\n\t\t */\n\t\tthis.labelView = this._createLabelView( inputUid );\n\n\t\t/**\n\t\t * The input view.\n\t\t *\n\t\t * @member {module:ui/inputtext/inputtextview~InputTextView} #inputView\n\t\t */\n\t\tthis.inputView = this._createInputView( InputView, inputUid, statusUid );\n\n\t\t/**\n\t\t * The status view for the {@link #inputView}. It displays {@link #errorText} and\n\t\t * {@link #infoText}.\n\t\t *\n\t\t * @member {module:ui/view~View} #statusView\n\t\t */\n\t\tthis.statusView = this._createStatusView( statusUid );\n\n\t\t/**\n\t\t * The combined status text made of {@link #errorText} and {@link #infoText}.\n\t\t * Note that when present, {@link #errorText} always takes precedence in the\n\t\t * status.\n\t\t *\n\t\t * @see #errorText\n\t\t * @see #infoText\n\t\t * @see #statusView\n\t\t * @private\n\t\t * @observable\n\t\t * @member {String|null} #_statusText\n\t\t */\n\t\tthis.bind( '_statusText' ).to(\n\t\t\tthis, 'errorText',\n\t\t\tthis, 'infoText',\n\t\t\t( errorText, infoText ) => errorText || infoText\n\t\t);\n\n\t\tconst bind = this.bindTemplate;\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-labeled-input',\n\t\t\t\t\tbind.if( 'isReadOnly', 'ck-disabled' )\n\t\t\t\t]\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tthis.labelView,\n\t\t\t\tthis.inputView,\n\t\t\t\tthis.statusView\n\t\t\t]\n\t\t} );\n\t}\n\n\t/**\n\t * Creates label view class instance and bind with view.\n\t *\n\t * @private\n\t * @param {String} id Unique id to set as labelView#for attribute.\n\t * @returns {module:ui/label/labelview~LabelView}\n\t */\n\t_createLabelView( id ) {\n\t\tconst labelView = new LabelView( this.locale );\n\n\t\tlabelView.for = id;\n\t\tlabelView.bind( 'text' ).to( this, 'label' );\n\n\t\treturn labelView;\n\t}\n\n\t/**\n\t * Creates input view class instance and bind with view.\n\t *\n\t * @private\n\t * @param {Function} InputView Input view constructor.\n\t * @param {String} inputUid Unique id to set as inputView#id attribute.\n\t * @param {String} statusUid Unique id of the status for the input's `aria-describedby` attribute.\n\t * @returns {module:ui/inputtext/inputtextview~InputTextView}\n\t */\n\t_createInputView( InputView, inputUid, statusUid ) {\n\t\tconst inputView = new InputView( this.locale, statusUid );\n\n\t\tinputView.id = inputUid;\n\t\tinputView.ariaDescribedById = statusUid;\n\t\tinputView.bind( 'value' ).to( this );\n\t\tinputView.bind( 'isReadOnly' ).to( this );\n\t\tinputView.bind( 'hasError' ).to( this, 'errorText', value => !!value );\n\n\t\tinputView.on( 'input', () => {\n\t\t\t// UX: Make the error text disappear and disable the error indicator as the user\n\t\t\t// starts fixing the errors.\n\t\t\tthis.errorText = null;\n\t\t} );\n\n\t\treturn inputView;\n\t}\n\n\t/**\n\t * Creates the status view instance. It displays {@link #errorText} and {@link #infoText}\n\t * next to the {@link #inputView}. See {@link #_statusText}.\n\t *\n\t * @private\n\t * @param {String} statusUid Unique id of the status, shared with the input's `aria-describedby` attribute.\n\t * @returns {module:ui/view~View}\n\t */\n\t_createStatusView( statusUid ) {\n\t\tconst statusView = new View( this.locale );\n\t\tconst bind = this.bindTemplate;\n\n\t\tstatusView.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-labeled-input__status',\n\t\t\t\t\tbind.if( 'errorText', 'ck-labeled-input__status_error' ),\n\t\t\t\t\tbind.if( '_statusText', 'ck-hidden', value => !value )\n\t\t\t\t],\n\t\t\t\tid: statusUid\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttext: bind.to( '_statusText' )\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\n\t\treturn statusView;\n\t}\n\n\t/**\n\t * Moves the focus to the input and selects the value.\n\t */\n\tselect() {\n\t\tthis.inputView.select();\n\t}\n\n\t/**\n\t * Focuses the input.\n\t */\n\tfocus() {\n\t\tthis.inputView.focus();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/inputtext/inputtextview\n */\n\nimport View from '../view';\nimport '../../theme/components/inputtext/inputtext.css';\n\n/**\n * The text input view class.\n *\n * @extends module:ui/view~View\n */\nexport default class InputTextView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * The value of the input.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #value\n\t\t */\n\t\tthis.set( 'value' );\n\n\t\t/**\n\t\t * The `id` attribute of the input (i.e. to pair with a `<label>` element).\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #id\n\t\t */\n\t\tthis.set( 'id' );\n\n\t\t/**\n\t\t * The `placeholder` attribute of the input.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #placeholder\n\t\t */\n\t\tthis.set( 'placeholder' );\n\n\t\t/**\n\t\t * Controls whether the input view is in read-only mode.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * Set to `true` when the field has some error. Usually controlled via\n\t\t * {@link module:ui/labeledinput/labeledinputview~LabeledInputView#errorText}.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #hasError\n\t\t */\n\t\tthis.set( 'hasError', false );\n\n\t\t/**\n\t\t * The `id` of the element describing this field, e.g. when it has\n\t\t * some error, it helps screen readers read the error text.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #ariaDescribedById\n\t\t */\n\t\tthis.set( 'ariaDescribedById' );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'input',\n\t\t\tattributes: {\n\t\t\t\ttype: 'text',\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-input',\n\t\t\t\t\t'ck-input-text',\n\t\t\t\t\tbind.if( 'hasError', 'ck-error' )\n\t\t\t\t],\n\t\t\t\tid: bind.to( 'id' ),\n\t\t\t\tplaceholder: bind.to( 'placeholder' ),\n\t\t\t\treadonly: bind.to( 'isReadOnly' ),\n\t\t\t\t'aria-invalid': bind.if( 'hasError', true ),\n\t\t\t\t'aria-describedby': bind.to( 'ariaDescribedById' )\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tinput: bind.to( 'input' )\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * Fired when the user types in the input. Corresponds to the native\n\t\t * DOM `input` event.\n\t\t *\n\t\t * @event input\n\t\t */\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tconst setValue = value => {\n\t\t\tthis.element.value = ( !value && value !== 0 ) ? '' : value;\n\t\t};\n\n\t\tsetValue( this.value );\n\n\t\t// Bind `this.value` to the DOM element's value.\n\t\t// We cannot use `value` DOM attribute because removing it on Edge does not clear the DOM element's value property.\n\t\tthis.on( 'change:value', ( evt, name, value ) => {\n\t\t\tsetValue( value );\n\t\t} );\n\t}\n\n\t/**\n\t * Moves the focus to the input and selects the value.\n\t */\n\tselect() {\n\t\tthis.element.select();\n\t}\n\n\t/**\n\t * Focuses the input.\n\t */\n\tfocus() {\n\t\tthis.element.focus();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/bindings/submithandler\n */\n\n/**\n * A handler useful for {@link module:ui/view~View views} working as HTML forms. It intercepts a native DOM\n * `submit` event, prevents the default web browser behavior (navigation and page reload) and\n * fires the `submit` event on a view instead. Such a custom event can be then used by any\n * {@link module:utils/dom/emittermixin~Emitter emitter}, e.g. to serialize the form data.\n *\n *\t\timport submitHandler from '@ckeditor/ckeditor5-ui/src/bindings/submithandler';\n *\n *\t\t// ...\n *\n *\t\tclass AnyFormView extends View {\n *\t\t\tconstructor() {\n *\t\t\t\tsuper();\n *\n *\t\t\t\t// ...\n *\n *\t\t\t\tsubmitHandler( {\n *\t\t\t\t\tview: this\n *\t\t\t\t} );\n *\t\t\t}\n *\t\t}\n *\n *\t\t// ...\n *\n *\t\tconst view = new AnyFormView();\n *\n *\t\t// A sample listener attached by an emitter working with the view.\n *\t\tthis.listenTo( view, 'submit', () => {\n *\t\t\tsaveTheFormData();\n *\t\t\thideTheForm();\n *\t\t} );\n *\n * @param {Object} [options] Configuration options.\n * @param {module:ui/view~View} options.view The view which DOM `submit` events should be handled.\n */\nexport default function submitHandler( { view } ) {\n\tview.listenTo( view.element, 'submit', ( evt, domEvt ) => {\n\t\tdomEvt.preventDefault();\n\t\tview.fire( 'submit' );\n\t}, { useCapture: true } );\n}\n","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z\\\"/></svg>\"","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module basic-styles/attributecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\n/**\n * An extension of the base {@link module:core/command~Command} class, which provides utilities for a command\n * that toggles a single attribute on a text or an element.\n *\n * `AttributeCommand` uses {@link module:engine/model/document~Document#selection}\n * to decide which nodes (if any) should be changed, and applies or removes the attribute from them.\n *\n * The command checks the {@link module:engine/model/model~Model#schema} to decide if it can be enabled\n * for the current selection and to which nodes the attribute can be applied.\n *\n * @extends module:core/command~Command\n */\nexport default class AttributeCommand extends Command {\n\t/**\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {String} attributeKey Attribute that will be set by the command.\n\t */\n\tconstructor( editor, attributeKey ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The attribute that will be set by the command.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.attributeKey = attributeKey;\n\n\t\t/**\n\t\t * Flag indicating whether the command is active. The command is active when the\n\t\t * {@link module:engine/model/selection~Selection#hasAttribute selection has the attribute} which means that:\n\t\t *\n\t\t * * If the selection is not empty &ndash; That the attribute is set on the first node in the selection that allows this attribute.\n\t\t * * If the selection is empty &ndash; That the selection has the attribute itself (which means that newly typed\n\t\t * text will have this attribute, too).\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #value\n\t\t */\n\t}\n\n\t/**\n\t * Updates the command's {@link #value} and {@link #isEnabled} based on the current selection.\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tthis.value = this._getValueFromFirstAllowedNode();\n\t\tthis.isEnabled = model.schema.checkAttributeInSelection( doc.selection, this.attributeKey );\n\t}\n\n\t/**\n\t * Executes the command &mdash; applies the attribute to the selection or removes it from the selection.\n\t *\n\t * If the command is active (`value == true`), it will remove attributes. Otherwise, it will set attributes.\n\t *\n\t * The execution result differs, depending on the {@link module:engine/model/document~Document#selection}:\n\t *\n\t * * If the selection is on a range, the command applies the attribute to all nodes in that range\n\t * (if they are allowed to have this attribute by the {@link module:engine/model/schema~Schema schema}).\n\t * * If the selection is collapsed in a non-empty node, the command applies the attribute to the\n\t * {@link module:engine/model/document~Document#selection} itself (note that typed characters copy attributes from the selection).\n\t * * If the selection is collapsed in an empty node, the command applies the attribute to the parent node of the selection (note\n\t * that the selection inherits all attributes from a node if it is in an empty node).\n\t *\n\t * @fires execute\n\t * @param {Object} [options] Command options.\n\t * @param {Boolean} [options.forceValue] If set, it will force the command behavior. If `true`, the command will apply the attribute,\n\t * otherwise the command will remove the attribute.\n\t * If not set, the command will look for its current value to decide what it should do.\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\t\tconst value = ( options.forceValue === undefined ) ? !this.value : options.forceValue;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( selection.isCollapsed ) {\n\t\t\t\tif ( value ) {\n\t\t\t\t\twriter.setSelectionAttribute( this.attributeKey, true );\n\t\t\t\t} else {\n\t\t\t\t\twriter.removeSelectionAttribute( this.attributeKey );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst ranges = model.schema.getValidRanges( selection.getRanges(), this.attributeKey );\n\n\t\t\t\tfor ( const range of ranges ) {\n\t\t\t\t\tif ( value ) {\n\t\t\t\t\t\twriter.setAttribute( this.attributeKey, value, range );\n\t\t\t\t\t} else {\n\t\t\t\t\t\twriter.removeAttribute( this.attributeKey, range );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Checks the attribute value of the first node in the selection that allows the attribute.\n\t * For the collapsed selection returns the selection attribute.\n\t *\n\t * @private\n\t * @returns {Boolean} The attribute value.\n\t */\n\t_getValueFromFirstAllowedNode() {\n\t\tconst model = this.editor.model;\n\t\tconst schema = model.schema;\n\t\tconst selection = model.document.selection;\n\n\t\tif ( selection.isCollapsed ) {\n\t\t\treturn selection.hasAttribute( this.attributeKey );\n\t\t}\n\n\t\tfor ( const range of selection.getRanges() ) {\n\t\t\tfor ( const item of range.getItems() ) {\n\t\t\t\tif ( schema.checkAttribute( item, this.attributeKey ) ) {\n\t\t\t\t\treturn item.hasAttribute( this.attributeKey );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module widget/widgettoolbarrepository\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ContextualBalloon from '@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon';\nimport ToolbarView from '@ckeditor/ckeditor5-ui/src/toolbar/toolbarview';\nimport BalloonPanelView from '@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview';\nimport { isWidget } from './utils';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Widget toolbar repository plugin. A central point for registering widget toolbars. This plugin handles the whole\n * toolbar rendering process and exposes a concise API.\n *\n * To add a toolbar for your widget use the {@link ~WidgetToolbarRepository#register `WidgetToolbarRepository#register()`} method.\n *\n * The following example comes from the {@link module:image/imagetoolbar~ImageToolbar} plugin:\n *\n * \t\tclass ImageToolbar extends Plugin {\n *\t\t\tstatic get requires() {\n *\t\t\t\treturn [ WidgetToolbarRepository ];\n *\t\t\t}\n *\n *\t\t\tafterInit() {\n *\t\t\t\tconst editor = this.editor;\n *\t\t\t\tconst widgetToolbarRepository = editor.plugins.get( WidgetToolbarRepository );\n *\n *\t\t\t\twidgetToolbarRepository.register( 'image', {\n *\t\t\t\t\titems: editor.config.get( 'image.toolbar' ),\n *\t\t\t\t\tgetRelatedElement: getSelectedImageWidget\n *\t\t\t\t} );\n *\t\t\t}\n *\t\t}\n */\nexport default class WidgetToolbarRepository extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ContextualBalloon ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'WidgetToolbarRepository';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\t// Disables the default balloon toolbar for all widgets.\n\t\tif ( editor.plugins.has( 'BalloonToolbar' ) ) {\n\t\t\tconst balloonToolbar = editor.plugins.get( 'BalloonToolbar' );\n\n\t\t\tthis.listenTo( balloonToolbar, 'show', evt => {\n\t\t\t\tif ( isWidgetSelected( editor.editing.view.document.selection ) ) {\n\t\t\t\t\tevt.stop();\n\t\t\t\t}\n\t\t\t}, { priority: 'high' } );\n\t\t}\n\n\t\t/**\n\t\t * A map of toolbar definitions.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map.<String,module:widget/widgettoolbarrepository~WidgetRepositoryToolbarDefinition>} #_toolbarDefinitions\n\t\t */\n\t\tthis._toolbarDefinitions = new Map();\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tthis._balloon = this.editor.plugins.get( 'ContextualBalloon' );\n\n\t\tthis.listenTo( editor.ui, 'update', () => {\n\t\t\tthis._updateToolbarsVisibility();\n\t\t} );\n\n\t\t// UI#update is not fired after focus is back in editor, we need to check if balloon panel should be visible.\n\t\tthis.listenTo( editor.ui.focusTracker, 'change:isFocused', () => {\n\t\t\tthis._updateToolbarsVisibility();\n\t\t}, { priority: 'low' } );\n\t}\n\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tfor ( const toolbarConfig of this._toolbarDefinitions.values() ) {\n\t\t\ttoolbarConfig.view.destroy();\n\t\t}\n\t}\n\n\t/**\n\t * Registers toolbar in the WidgetToolbarRepository. It renders it in the `ContextualBalloon` based on the value of the invoked\n\t * `getRelatedElement` function. Toolbar items are gathered from `items` array.\n\t * The balloon's CSS class is by default `ck-toolbar-container` and may be override with the `balloonClassName` option.\n\t *\n\t * Note: This method should be called in the {@link module:core/plugin~PluginInterface#afterInit `Plugin#afterInit()`}\n\t * callback (or later) to make sure that the given toolbar items were already registered by other plugins.\n\t *\n\t * @param {String} toolbarId An id for the toolbar. Used to\n\t * @param {Object} options\n\t * @param {Array.<String>} options.items Array of toolbar items.\n\t * @param {Function} options.getRelatedElement Callback which returns an element the toolbar should be attached to.\n\t * @param {String} [options.balloonClassName='ck-toolbar-container'] CSS class for the widget balloon.\n\t */\n\tregister( toolbarId, { items, getRelatedElement, balloonClassName = 'ck-toolbar-container' } ) {\n\t\tconst editor = this.editor;\n\t\tconst toolbarView = new ToolbarView();\n\n\t\tif ( this._toolbarDefinitions.has( toolbarId ) ) {\n\t\t\t/**\n\t\t\t * Toolbar with the given id was already added.\n\t\t\t *\n\t\t\t * @error widget-toolbar-duplicated\n\t\t\t * @param toolbarId Toolbar id.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'widget-toolbar-duplicated: Toolbar with the given id was already added.', this, { toolbarId } );\n\t\t}\n\n\t\ttoolbarView.fillFromConfig( items, editor.ui.componentFactory );\n\n\t\tthis._toolbarDefinitions.set( toolbarId, {\n\t\t\tview: toolbarView,\n\t\t\tgetRelatedElement,\n\t\t\tballoonClassName,\n\t\t} );\n\t}\n\n\t/**\n\t * Iterates over stored toolbars and makes them visible or hidden.\n\t *\n\t * @private\n\t */\n\t_updateToolbarsVisibility() {\n\t\tlet maxRelatedElementDepth = 0;\n\t\tlet deepestRelatedElement = null;\n\t\tlet deepestToolbarDefinition = null;\n\n\t\tfor ( const definition of this._toolbarDefinitions.values() ) {\n\t\t\tconst relatedElement = definition.getRelatedElement( this.editor.editing.view.document.selection );\n\n\t\t\tif ( !this.editor.ui.focusTracker.isFocused ) {\n\t\t\t\tif ( this._isToolbarVisible( definition ) ) {\n\t\t\t\t\tthis._hideToolbar( definition );\n\t\t\t\t}\n\t\t\t} else if ( !relatedElement ) {\n\t\t\t\tif ( this._isToolbarInBalloon( definition ) ) {\n\t\t\t\t\tthis._hideToolbar( definition );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst relatedElementDepth = relatedElement.getAncestors().length;\n\n\t\t\t\t// Many toolbars can express willingness to be displayed but they do not know about\n\t\t\t\t// each other. Figure out which toolbar is deepest in the view tree to decide which\n\t\t\t\t// should be displayed. For instance, if a selected image is inside a table cell, display\n\t\t\t\t// the ImageToolbar rather than the TableToolbar (#60).\n\t\t\t\tif ( relatedElementDepth > maxRelatedElementDepth ) {\n\t\t\t\t\tmaxRelatedElementDepth = relatedElementDepth;\n\t\t\t\t\tdeepestRelatedElement = relatedElement;\n\t\t\t\t\tdeepestToolbarDefinition = definition;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( deepestToolbarDefinition ) {\n\t\t\tthis._showToolbar( deepestToolbarDefinition, deepestRelatedElement );\n\t\t}\n\t}\n\n\t/**\n\t * Hides the given toolbar.\n\t *\n\t * @private\n\t * @param {module:widget/widgettoolbarrepository~WidgetRepositoryToolbarDefinition} toolbarDefinition\n\t */\n\t_hideToolbar( toolbarDefinition ) {\n\t\tthis._balloon.remove( toolbarDefinition.view );\n\t}\n\n\t/**\n\t * Shows up the toolbar if the toolbar is not visible.\n\t * Otherwise, repositions the toolbar's balloon when toolbar's view is the most top view in balloon stack.\n\t *\n\t * It might happen here that the toolbar's view is under another view. Then do nothing as the other toolbar view\n\t * should be still visible after the {@link module:core/editor/editorui~EditorUI#event:update}.\n\t *\n\t * @private\n\t * @param {module:widget/widgettoolbarrepository~WidgetRepositoryToolbarDefinition} toolbarDefinition\n\t * @param {module:engine/view/element~Element} relatedElement\n\t */\n\t_showToolbar( toolbarDefinition, relatedElement ) {\n\t\tif ( this._isToolbarVisible( toolbarDefinition ) ) {\n\t\t\trepositionContextualBalloon( this.editor, relatedElement );\n\t\t} else if ( !this._isToolbarInBalloon( toolbarDefinition ) ) {\n\t\t\tthis._balloon.add( {\n\t\t\t\tview: toolbarDefinition.view,\n\t\t\t\tposition: getBalloonPositionData( this.editor, relatedElement ),\n\t\t\t\tballoonClassName: toolbarDefinition.balloonClassName,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Object} toolbar\n\t * @returns {Boolean}\n\t */\n\t_isToolbarVisible( toolbar ) {\n\t\treturn this._balloon.visibleView === toolbar.view;\n\t}\n\n\t/**\n\t * @private\n\t * @param {Object} toolbar\n\t * @returns {Boolean}\n\t */\n\t_isToolbarInBalloon( toolbar ) {\n\t\treturn this._balloon.hasView( toolbar.view );\n\t}\n}\n\nfunction repositionContextualBalloon( editor, relatedElement ) {\n\tconst balloon = editor.plugins.get( 'ContextualBalloon' );\n\tconst position = getBalloonPositionData( editor, relatedElement );\n\n\tballoon.updatePosition( position );\n}\n\nfunction getBalloonPositionData( editor, relatedElement ) {\n\tconst editingView = editor.editing.view;\n\tconst defaultPositions = BalloonPanelView.defaultPositions;\n\n\treturn {\n\t\ttarget: editingView.domConverter.mapViewToDom( relatedElement ),\n\t\tpositions: [\n\t\t\tdefaultPositions.northArrowSouth,\n\t\t\tdefaultPositions.northArrowSouthWest,\n\t\t\tdefaultPositions.northArrowSouthEast,\n\t\t\tdefaultPositions.southArrowNorth,\n\t\t\tdefaultPositions.southArrowNorthWest,\n\t\t\tdefaultPositions.southArrowNorthEast\n\t\t]\n\t};\n}\n\nfunction isWidgetSelected( selection ) {\n\tconst viewElement = selection.getSelectedElement();\n\n\treturn !!( viewElement && isWidget( viewElement ) );\n}\n\n/**\n * The toolbar definition object used by the toolbar repository to manage toolbars.\n * It contains information necessary to display the toolbar in the\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} and\n * update it during its life (display) cycle.\n *\n * @typedef {Object} module:widget/widgettoolbarrepository~WidgetRepositoryToolbarDefinition\n *\n * @property {module:ui/view~View} view The UI view of the toolbar.\n * @property {Function} getRelatedElement A function that returns an engine {@link module:engine/view/view~View}\n * element the toolbar is to be attached to. For instance, an image widget or a table widget (or `null` when\n * there is no such element). The function accepts an instance of {@link module:engine/view/selection~Selection}.\n * @property {String} balloonClassName CSS class for the widget balloon when a toolbar is displayed.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/version\n */\n\n/* globals window, global */\n\nimport log from './log';\nimport { version } from 'ckeditor5/package.json';\n\nconst windowOrGlobal = typeof window === 'object' ? window : global;\n\nif ( windowOrGlobal.CKEDITOR_VERSION ) {\n\t/**\n\t * This error is thrown when due to a mistake in how CKEditor 5 was installed or initialized, some\n\t * of its modules were duplicated (evaluated and executed twice). Module duplication leads to inevitable runtime\n\t * errors.\n\t *\n\t * There are many situations in which some modules can be loaded twice. In the worst case scenario,\n\t * you may need to check your project for each of these issues and fix them all.\n\t *\n\t * # Trying to add a plugin to an existing build\n\t *\n\t * If you import an existing CKEditor 5 build and a plugin like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\t *\t\timport Highlight from '@ckeditor/ckeditor5-highlight/src/highlight';\n\t *\n\t * Then your project loads some CKEditor 5 packages twice. How does it happen?\n\t *\n\t * The build package contains a file which is already compiled with webpack. This means\n\t * that it contains all the necessary code from e.g. `@ckeditor/ckeditor5-engine` and `@ckeditor/ckeditor5-utils`.\n\t *\n\t * However, the `Highlight` plugin imports some of the modules from these packages, too. If you ask webpack to\n\t * build such a project, you will end up with the modules being included (and run) twice &mdash; first, because they are\n\t * included inside the build package, and second, because they are required by the `Highlight` plugin.\n\t *\n\t * Therefore, **you must never add plugins to an existing build** unless your plugin has no dependencies.\n\t *\n\t * Adding plugins to a build is done by taking the source version of this build (so, before it was built with webpack)\n\t * and adding plugins there. In this situation, webpack will know that it only needs to load each plugin once.\n\t *\n\t * Read more in the {@glink builds/guides/integration/installing-plugins \"Installing plugins\"} guide.\n\t *\n\t * # Confused an editor build with an editor implementation\n\t *\n\t * This scenario is very similar to the previous one, but has a different origin.\n\t *\n\t * Let's assume that you wanted to use CKEditor 5 from source, as explained in the\n\t * {@glink builds/guides/integration/advanced-setup#scenario-2-building-from-source \"Building from source\"} section\n\t * or in the {@glink framework/guides/quick-start \"Quick start\"} guide of CKEditor 5 Framework.\n\t *\n\t * The correct way to do so is to import an editor and plugins and run them together like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-editor-classic/src/classiceditor';\n\t *\t\timport Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';\n\t *\t\timport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\n\t *\t\timport Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';\n\t *\t\timport Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( document.querySelector( '#editor' ), {\n\t *\t\t\t\tplugins: [ Essentials, Paragraph, Bold, Italic ],\n\t *\t\t\t\ttoolbar: [ 'bold', 'italic' ]\n\t *\t\t\t} )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\t\t\t} )\n\t *\t\t\t.catch( error => {\n\t *\t\t\t\tconsole.error( error.stack );\n\t *\t\t\t} );\n\t *\n\t * However, you might have mistakenly imported a build instead of the source `ClassicEditor`. In this case\n\t * your imports will look like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\t *\t\timport Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';\n\t *\t\timport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\n\t *\t\timport Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';\n\t *\t\timport Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';\n\t *\n\t * This creates the same situation as in the previous section because you use a build together with source plugins.\n\t *\n\t * Remember: `@ckeditor/ckeditor5-build-*` packages contain editor builds and `@ckeditor/ckeditor5-editor-*` contain source editors.\n\t *\n\t * # Loading two or more builds on one page\n\t *\n\t * If you use CKEditor 5 builds, you might have loaded two (or more) `ckeditor.js` files on one web page.\n\t * Check your web page for duplicated `<script>` elements or make sure your page builder/bundler includes CKEditor only once.\n\t *\n\t * If you want to use two different types of editors at once, see the\n\t * {@glink builds/guides/integration/advanced-setup#scenario-3-using-two-different-editors \"Using two different editors\"}\n\t * section.\n\t *\n\t * # Using outdated packages\n\t *\n\t * Building CKEditor 5 from source requires using multiple npm packages. These packages have their dependencies\n\t * to other packages. If you use the latest version of, for example, `@ckeditor/ckeditor5-editor-classic` with\n\t * an outdated version of `@ckeditor/ckeditor5-image`, npm or yarn will need to install two different versions of\n\t * `@ckeditor/ckeditor5-core` because `@ckeditor/ckeditor5-editor-classic` and `@ckeditor/ckeditor5-image` may require\n\t * different versions of the core package.\n\t *\n\t * The solution to this issue is to update all packages to their latest version. We recommend\n\t * using tools like [`node-check-updates`](https://www.npmjs.com/package/npm-check-updates) which simplify this process.\n\t *\n\t * # Conflicting version of dependencies\n\t *\n\t * This is a special case of the previous scenario. If you use CKEditor 5 with some third-party plugins,\n\t * it may happen that even if you use the latest versions of the official packages and the latest version of\n\t * these third-party packages, there will be a conflict between some of their dependencies.\n\t *\n\t * Such a problem can be resolved by either downgrading CKEditor 5 packages (which we do not recommend) or\n\t * asking the author of the third-party package to upgrade its depdendencies (or forking their project and doing this yourself).\n\t *\n\t * # Packages were duplicated in `node_modules`\n\t *\n\t * In some situations, especially when calling `npm install` multiple times, it may happen\n\t * that npm will not correctly \"deduplicate\" packages.\n\t *\n\t * Normally, npm deduplicates all packages so, for example, `@ckeditor/ckeditor5-core` is installed only once in `node_modules/`.\n\t * However, it is known to fail to do so from time to time.\n\t *\n\t * We recommend checking if any of the steps listed below help:\n\t *\n\t * * `rm -rf node_modules && npm install` to make sure you have a clean `node_modules/` directory. This step\n\t * is known to help in most cases.\n\t * * If you use `yarn.lock` or `package-lock.json`, remove it before `npm install`.\n\t * * Check whether all CKEditor 5 packages are up to date and reinstall them\n\t * if you changed anything (`rm -rf node_modules && npm install`).\n\t *\n\t * If all packages are correct and compatible with each other, the steps above are known to help. If not, you may\n\t * try to check with `npm ls` how many times packages like `@ckeditor/ckeditor5-core`, `@ckeditor/ckeditor5-engine` and\n\t *`@ckeditor/ckeditor5-utils` are installed. If more than once, verify which package causes that.\n\t *\n\t * @error ckeditor-duplicated-modules\n\t */\n\tlog.error( 'ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.' );\n} else {\n\twindowOrGlobal.CKEDITOR_VERSION = version;\n}\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/count\n */\n\n/**\n * Returns the number of items return by the iterator.\n *\n *\t\tcount( [ 1, 2, 3, 4, 5 ] ); // 5;\n *\n * @param {Iterable.<*>} iterator Any iterator.\n * @returns {Number} Number of items returned by that iterator.\n */\nexport default function count( iterator ) {\n\tlet count = 0;\n\n\tfor ( const _ of iterator ) { // eslint-disable-line no-unused-vars\n\t\tcount++;\n\t}\n\n\treturn count;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/rootattributeoperation\n */\n\nimport Operation from './operation';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to change root element's attribute. Using this class you can add, remove or change value of the attribute.\n *\n * This operation is needed, because root elements can't be changed through\n * @link module:engine/model/operation/attributeoperation~AttributeOperation}.\n * It is because {@link module:engine/model/operation/attributeoperation~AttributeOperation}\n * requires a range to change and root element can't\n * be a part of range because every {@link module:engine/model/position~Position} has to be inside a root.\n * {@link module:engine/model/position~Position} can't be created before a root element.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class RootAttributeOperation extends Operation {\n\t/**\n\t * Creates an operation that changes, removes or adds attributes on root element.\n\t *\n\t * @see module:engine/model/operation/attributeoperation~AttributeOperation\n\t * @param {module:engine/model/rootelement~RootElement} root Root element to change.\n\t * @param {String} key Key of an attribute to change or remove.\n\t * @param {*} oldValue Old value of the attribute with given key or `null` if adding a new attribute.\n\t * @param {*} newValue New value to set for the attribute. If `null`, then the operation just removes the attribute.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( root, key, oldValue, newValue, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Root element to change.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/rootelement~RootElement}\n\t\t */\n\t\tthis.root = root;\n\n\t\t/**\n\t\t * Key of an attribute to change or remove.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.key = key;\n\n\t\t/**\n\t\t * Old value of the attribute with given key or `null` if adding a new attribute.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.oldValue = oldValue;\n\n\t\t/**\n\t\t * New value to set for the attribute. If `null`, then the operation just removes the attribute.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.newValue = newValue;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\tif ( this.oldValue === null ) {\n\t\t\treturn 'addRootAttribute';\n\t\t} else if ( this.newValue === null ) {\n\t\t\treturn 'removeRootAttribute';\n\t\t} else {\n\t\t\treturn 'changeRootAttribute';\n\t\t}\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/rootattributeoperation~RootAttributeOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new RootAttributeOperation( this.root, this.key, this.oldValue, this.newValue, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/rootattributeoperation~RootAttributeOperation}\n\t */\n\tgetReversed() {\n\t\treturn new RootAttributeOperation( this.root, this.key, this.newValue, this.oldValue, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tif ( this.root != this.root.root || this.root.is( 'documentFragment' ) ) {\n\t\t\t/**\n\t\t\t * The element to change is not a root element.\n\t\t\t *\n\t\t\t * @error rootattribute-operation-not-a-root\n\t\t\t * @param {module:engine/model/rootelement~RootElement} root\n\t\t\t * @param {String} key\n\t\t\t * @param {*} value\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rootattribute-operation-not-a-root: The element to change is not a root element.',\n\t\t\t\tthis,\n\t\t\t\t{ root: this.root, key: this.key }\n\t\t\t);\n\t\t}\n\n\t\tif ( this.oldValue !== null && this.root.getAttribute( this.key ) !== this.oldValue ) {\n\t\t\t/**\n\t\t\t * The attribute which should be removed does not exists for the given node.\n\t\t\t *\n\t\t\t * @error rootattribute-operation-wrong-old-value\n\t\t\t * @param {module:engine/model/rootelement~RootElement} root\n\t\t\t * @param {String} key\n\t\t\t * @param {*} value\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation\\'s ' +\n\t\t\t\t'old attribute value.',\n\t\t\t\tthis,\n\t\t\t\t{ root: this.root, key: this.key }\n\t\t\t);\n\t\t}\n\n\t\tif ( this.oldValue === null && this.newValue !== null && this.root.hasAttribute( this.key ) ) {\n\t\t\t/**\n\t\t\t * The attribute with given key already exists for the given node.\n\t\t\t *\n\t\t\t * @error rootattribute-operation-attribute-exists\n\t\t\t * @param {module:engine/model/rootelement~RootElement} root\n\t\t\t * @param {String} key\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rootattribute-operation-attribute-exists: The attribute with given key already exists.',\n\t\t\t\tthis,\n\t\t\t\t{ root: this.root, key: this.key }\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\tif ( this.newValue !== null ) {\n\t\t\tthis.root._setAttribute( this.key, this.newValue );\n\t\t} else {\n\t\t\tthis.root._removeAttribute( this.key );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.root = this.root.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'RootAttributeOperation';\n\t}\n\n\t/**\n\t * Creates RootAttributeOperation object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/rootattributeoperation~RootAttributeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tif ( !document.getRoot( json.root ) ) {\n\t\t\t/**\n\t\t\t * Cannot create RootAttributeOperation for document. Root with specified name does not exist.\n\t\t\t *\n\t\t\t * @error rootattributeoperation-fromjson-no-root\n\t\t\t * @param {String} rootName\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.',\n\t\t\t\tthis,\n\t\t\t\t{ rootName: json.root }\n\t\t\t);\n\t\t}\n\n\t\treturn new RootAttributeOperation( document.getRoot( json.root ), json.key, json.oldValue, json.newValue, json.baseVersion );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module module:engine/view/upcastwriter\n */\n\nimport DocumentFragment from './documentfragment';\nimport Element from './element';\nimport Text from './text';\nimport { isPlainObject } from 'lodash-es';\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\n\n/**\n * View upcast writer. It provides a set of methods used to manipulate non-semantic view trees.\n *\n * It should be used only while working on a non-semantic view\n * (e.g. a view created from HTML string on paste).\n * To manipulate a view which was or is being downcasted from the the model use the\n * {@link module:engine/view/downcastwriter~DowncastWriter downcast writer}.\n *\n * Read more about changing the view in the {@glink framework/guides/architecture/editing-engine#changing-the-view Changing the view}\n * section of the {@glink framework/guides/architecture/editing-engine Editing engine architecture} guide.\n *\n * Unlike `DowncastWriter`, which is available in the {@link module:engine/view/view~View#change `View#change()`} block,\n * `UpcastWriter` can wherever you need it:\n *\n *\t\tconst writer = new UpcastWriter();\n *\t\tconst text = writer.createText( 'foo!' );\n *\n *\t\twriter.appendChild( text, someViewElement );\n */\nexport default class UpcastWriter {\n\t/**\n\t * Creates a new {@link module:engine/view/documentfragment~DocumentFragment} instance.\n\t *\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into the created document fragment.\n\t * @returns {module:engine/view/documentfragment~DocumentFragment} The created document fragment.\n\t */\n\tcreateDocumentFragment( children ) {\n\t\treturn new DocumentFragment( children );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/element~Element} instance.\n\t *\n\t * Attributes can be passed in various formats:\n\t *\n\t *\t\tupcastWriter.createElement( 'div', { class: 'editor', contentEditable: 'true' } ); // object\n\t *\t\tupcastWriter.createElement( 'div', [ [ 'class', 'editor' ], [ 'contentEditable', 'true' ] ] ); // map-like iterator\n\t *\t\tupcastWriter.createElement( 'div', mapOfAttributes ); // map\n\t *\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t * @returns {module:engine/view/element~Element} Created element.\n\t */\n\tcreateElement( name, attrs, children ) {\n\t\treturn new Element( name, attrs, children );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/text~Text} instance.\n\t *\n\t * @param {String} data The text's data.\n\t * @returns {module:engine/view/text~Text} The created text node.\n\t */\n\tcreateText( data ) {\n\t\treturn new Text( data );\n\t}\n\n\t/**\n\t * Clones the provided element.\n\t *\n\t * @see module:engine/view/element~Element#_clone\n\t * @param {module:engine/view/element~Element} element Element to be cloned.\n\t * @param {Boolean} [deep=false] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any children.\n\t * @returns {module:engine/view/element~Element} Clone of this element.\n\t */\n\tclone( element, deep = false ) {\n\t\treturn element._clone( deep );\n\t}\n\n\t/**\n\t * Appends a child node or a list of child nodes at the end of this node\n\t * and sets the parent of these nodes to this element.\n\t *\n\t * @see module:engine/view/element~Element#_appendChild\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} element Element\n\t * to which items will be appended.\n\t * @fires module:engine/view/node~Node#event:change\n\t * @returns {Number} Number of appended nodes.\n\t */\n\tappendChild( items, element ) {\n\t\treturn element._appendChild( items );\n\t}\n\n\t/**\n\t * Inserts a child node or a list of child nodes on the given index and sets the parent of these nodes to\n\t * this element.\n\t *\n\t * @see module:engine/view/element~Element#_insertChild\n\t * @param {Number} index Offset at which nodes should be inserted.\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} element Element\n\t * to which items will be inserted.\n\t * @fires module:engine/view/node~Node#event:change\n\t * @returns {Number} Number of inserted nodes.\n\t */\n\tinsertChild( index, items, element ) {\n\t\treturn element._insertChild( index, items );\n\t}\n\n\t/**\n\t * Removes the given number of child nodes starting at the given index and set the parent of these nodes to `null`.\n\t *\n\t * @see module:engine/view/element~Element#_removeChildren\n\t * @param {Number} index Offset from which nodes will be removed.\n\t * @param {Number} howMany Number of nodes to remove.\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} element Element\n\t * which children will be removed.\n\t * @fires module:engine/view/node~Node#event:change\n\t * @returns {Array.<module:engine/view/node~Node>} The array containing removed nodes.\n\t */\n\tremoveChildren( index, howMany, element ) {\n\t\treturn element._removeChildren( index, howMany );\n\t}\n\n\t/**\n\t * Removes given element from the view structure. Will not have effect on detached elements.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which will be removed.\n\t * @returns {Array.<module:engine/view/node~Node>} The array containing removed nodes.\n\t */\n\tremove( element ) {\n\t\tconst parent = element.parent;\n\n\t\tif ( parent ) {\n\t\t\treturn this.removeChildren( parent.getChildIndex( element ), 1, parent );\n\t\t}\n\n\t\treturn [];\n\t}\n\n\t/**\n\t * Replaces given element with the new one in the view structure. Will not have effect on detached elements.\n\t *\n\t * @param {module:engine/view/element~Element} oldElement Element which will be replaced.\n\t * @param {module:engine/view/element~Element} newElement Element which will be inserted in the place of the old element.\n\t * @returns {Boolean} Whether old element was successfully replaced.\n\t */\n\treplace( oldElement, newElement ) {\n\t\tconst parent = oldElement.parent;\n\n\t\tif ( parent ) {\n\t\t\tconst index = parent.getChildIndex( oldElement );\n\n\t\t\tthis.removeChildren( index, 1, parent );\n\t\t\tthis.insertChild( index, newElement, parent );\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Renames element by creating a copy of a given element but with its name changed and then moving contents of the\n\t * old element to the new one.\n\t *\n\t * Since this function creates a new element and removes the given one, the new element is returned to keep reference.\n\t *\n\t * @param {String} newName New element name.\n\t * @param {module:engine/view/element~Element} element Element to be renamed.\n\t * @returns {module:engine/view/element~Element|null} New element or null if the old element\n\t * was not replaced (happens for detached elements).\n\t */\n\trename( newName, element ) {\n\t\tconst newElement = new Element( newName, element.getAttributes(), element.getChildren() );\n\n\t\treturn this.replace( element, newElement ) ? newElement : null;\n\t}\n\n\t/**\n\t * Adds or overwrites element's attribute with a specified key and value.\n\t *\n\t *\t\twriter.setAttribute( linkElement, 'href', 'http://ckeditor.com' );\n\t *\n\t * @see module:engine/view/element~Element#_setAttribute\n\t * @param {String} key Attribute key.\n\t * @param {String} value Attribute value.\n\t * @param {module:engine/view/element~Element} element Element for which attribute will be set.\n\t */\n\tsetAttribute( key, value, element ) {\n\t\telement._setAttribute( key, value );\n\t}\n\n\t/**\n\t * Removes attribute from the element.\n\t *\n\t *\t\twriter.removeAttribute( linkElement, 'href' );\n\t *\n\t * @see module:engine/view/element~Element#_removeAttribute\n\t * @param {String} key Attribute key.\n\t * @param {module:engine/view/element~Element} element Element from which attribute will be removed.\n\t */\n\tremoveAttribute( key, element ) {\n\t\telement._removeAttribute( key );\n\t}\n\n\t/**\n\t * Adds specified class to the element.\n\t *\n\t *\t\twriter.addClass( linkElement, 'foo' );\n\t *\t\twriter.addClass( linkElement, [ 'foo', 'bar' ] );\n\t *\n\t * @see module:engine/view/element~Element#_addClass\n\t * @param {Array.<String>|String} className Single class name or array of class names which will be added.\n\t * @param {module:engine/view/element~Element} element Element for which class will be added.\n\t */\n\taddClass( className, element ) {\n\t\telement._addClass( className );\n\t}\n\n\t/**\n\t * Removes specified class from the element.\n\t *\n\t *\t\twriter.removeClass( linkElement, 'foo' );\n\t *\t\twriter.removeClass( linkElement, [ 'foo', 'bar' ] );\n\t *\n\t * @see module:engine/view/element~Element#_removeClass\n\t * @param {Array.<String>|String} className Single class name or array of class names which will be removed.\n\t * @param {module:engine/view/element~Element} element Element from which class will be removed.\n\t */\n\tremoveClass( className, element ) {\n\t\telement._removeClass( className );\n\t}\n\n\t/**\n\t * Adds style to the element.\n\t *\n\t *\t\twriter.setStyle( element, 'color', 'red' );\n\t *\t\twriter.setStyle( element, {\n\t *\t\t\tcolor: 'red',\n\t *\t\t\tposition: 'fixed'\n\t *\t\t} );\n\t *\n\t * @see module:engine/view/element~Element#_setStyle\n\t * @param {String|Object} property Property name or object with key - value pairs.\n\t * @param {String} [value] Value to set. This parameter is ignored if object is provided as the first parameter.\n\t * @param {module:engine/view/element~Element} element Element for which style will be added.\n\t */\n\tsetStyle( property, value, element ) {\n\t\tif ( isPlainObject( property ) && element === undefined ) {\n\t\t\telement = value;\n\t\t}\n\t\telement._setStyle( property, value );\n\t}\n\n\t/**\n\t * Removes specified style from the element.\n\t *\n\t *\t\twriter.removeStyle( element, 'color' );  // Removes 'color' style.\n\t *\t\twriter.removeStyle( element, [ 'color', 'border-top' ] ); // Removes both 'color' and 'border-top' styles.\n\t *\n\t * @see module:engine/view/element~Element#_removeStyle\n\t * @param {Array.<String>|String} property Style property name or names to be removed.\n\t * @param {module:engine/view/element~Element} element Element from which style will be removed.\n\t */\n\tremoveStyle( property, element ) {\n\t\telement._removeStyle( property );\n\t}\n\n\t/**\n\t * Sets a custom property on element. Unlike attributes, custom properties are not rendered to the DOM,\n\t * so they can be used to add special data to elements.\n\t *\n\t * @see module:engine/view/element~Element#_setCustomProperty\n\t * @param {String|Symbol} key Custom property name/key.\n\t * @param {*} value Custom property value to be stored.\n\t * @param {module:engine/view/element~Element} element Element for which custom property will be set.\n\t */\n\tsetCustomProperty( key, value, element ) {\n\t\telement._setCustomProperty( key, value );\n\t}\n\n\t/**\n\t * Removes a custom property stored under the given key.\n\t *\n\t * @see module:engine/view/element~Element#_removeCustomProperty\n\t * @param {String|Symbol} key Name/key of the custom property to be removed.\n\t * @param {module:engine/view/element~Element} element Element from which the custom property will be removed.\n\t * @returns {Boolean} Returns true if property was removed.\n\t */\n\tremoveCustomProperty( key, element ) {\n\t\treturn element._removeCustomProperty( key );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = writer.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = writer.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n}\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport keysIn from './keysIn.js';\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\nexport default assignIn;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module clipboard/datatransfer\n */\n\n/**\n * Facade over the native [`DataTransfer`](https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer) object.\n */\nexport default class DataTransfer {\n\tconstructor( nativeDataTransfer ) {\n\t\t/**\n\t\t * The array of files created from the native `DataTransfer#files` or `DataTransfer#items`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<File>} #files\n\t\t */\n\t\tthis.files = getFiles( nativeDataTransfer );\n\n\t\t/**\n\t\t * The native DataTransfer object.\n\t\t *\n\t\t * @private\n\t\t * @member {DataTransfer} #_native\n\t\t */\n\t\tthis._native = nativeDataTransfer;\n\t}\n\n\t/**\n\t * Returns an array of available native content types.\n\t *\n\t * @returns {Array.<String>}\n\t */\n\tget types() {\n\t\treturn this._native.types;\n\t}\n\n\t/**\n\t * Gets data from the data transfer by its mime type.\n\t *\n\t *\t\tdataTransfer.getData( 'text/plain' );\n\t *\n\t * @param {String} type The mime type. E.g. `text/html` or `text/plain`.\n\t * @returns {String}\n\t */\n\tgetData( type ) {\n\t\treturn this._native.getData( type );\n\t}\n\n\t/**\n\t * Sets data in the data transfer.\n\t *\n\t * @param {String} type The mime type. E.g. `text/html` or `text/plain`.\n\t * @param {String} data\n\t */\n\tsetData( type, data ) {\n\t\tthis._native.setData( type, data );\n\t}\n}\n\nfunction getFiles( nativeDataTransfer ) {\n\t// DataTransfer.files and items are Array-like and might not have an iterable interface.\n\tconst files = nativeDataTransfer.files ? Array.from( nativeDataTransfer.files ) : [];\n\tconst items = nativeDataTransfer.items ? Array.from( nativeDataTransfer.items ) : [];\n\n\tif ( files.length ) {\n\t\treturn files;\n\t}\n\t// Chrome have empty DataTransfer.files, but let get files through the items interface.\n\treturn items\n\t\t.filter( item => item.kind === 'file' )\n\t\t.map( item => item.getAsFile() );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module clipboard/clipboardobserver\n */\n\nimport DomEventObserver from '@ckeditor/ckeditor5-engine/src/view/observer/domeventobserver';\nimport EventInfo from '@ckeditor/ckeditor5-utils/src/eventinfo';\nimport DataTransfer from './datatransfer';\n\n/**\n * Clipboard events observer.\n *\n * Fires the following events:\n *\n * * {@link module:engine/view/document~Document#event:clipboardInput}\n * * {@link module:engine/view/document~Document#event:dragover}\n * * {@link module:engine/view/document~Document#event:drop}\n * * {@link module:engine/view/document~Document#event:paste}\n * * {@link module:engine/view/document~Document#event:copy}\n * * {@link module:engine/view/document~Document#event:cut}\n *\n * Note that this observer is not available by default (it is not added by the engine).\n * To make it available it needs to be added to {@link module:engine/view/document~Document} by\n * the {@link module:engine/view/view~View#addObserver `View#addObserver()`} method. You can also load the\n * {@link module:clipboard/clipboard~Clipboard} plugin which adds this observer automatically (because it uses it).\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class ClipboardObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tconst viewDocument = this.document;\n\n\t\tthis.domEventType = [ 'paste', 'copy', 'cut', 'drop', 'dragover' ];\n\n\t\tthis.listenTo( viewDocument, 'paste', handleInput, { priority: 'low' } );\n\t\tthis.listenTo( viewDocument, 'drop', handleInput, { priority: 'low' } );\n\n\t\tfunction handleInput( evt, data ) {\n\t\t\tdata.preventDefault();\n\n\t\t\tconst targetRanges = data.dropRange ? [ data.dropRange ] : Array.from( viewDocument.selection.getRanges() );\n\n\t\t\tconst eventInfo = new EventInfo( viewDocument, 'clipboardInput' );\n\n\t\t\tviewDocument.fire( eventInfo, {\n\t\t\t\tdataTransfer: data.dataTransfer,\n\t\t\t\ttargetRanges\n\t\t\t} );\n\n\t\t\t// If CKEditor handled the input, do not bubble the original event any further.\n\t\t\t// This helps external integrations recognize that fact and act accordingly.\n\t\t\t// https://github.com/ckeditor/ckeditor5-upload/issues/92\n\t\t\tif ( eventInfo.stop.called ) {\n\t\t\t\tdata.stopPropagation();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tconst evtData = {\n\t\t\tdataTransfer: new DataTransfer( domEvent.clipboardData ? domEvent.clipboardData : domEvent.dataTransfer )\n\t\t};\n\n\t\tif ( domEvent.type == 'drop' ) {\n\t\t\tevtData.dropRange = getDropViewRange( this.view, domEvent );\n\t\t}\n\n\t\tthis.fire( domEvent.type, domEvent, evtData );\n\t}\n}\n\nfunction getDropViewRange( view, domEvent ) {\n\tconst domDoc = domEvent.target.ownerDocument;\n\tconst x = domEvent.clientX;\n\tconst y = domEvent.clientY;\n\tlet domRange;\n\n\t// Webkit & Blink.\n\tif ( domDoc.caretRangeFromPoint && domDoc.caretRangeFromPoint( x, y ) ) {\n\t\tdomRange = domDoc.caretRangeFromPoint( x, y );\n\t}\n\t// FF.\n\telse if ( domEvent.rangeParent ) {\n\t\tdomRange = domDoc.createRange();\n\t\tdomRange.setStart( domEvent.rangeParent, domEvent.rangeOffset );\n\t\tdomRange.collapse( true );\n\t}\n\n\tif ( domRange ) {\n\t\treturn view.domConverter.domRangeToView( domRange );\n\t} else {\n\t\treturn view.document.selection.getFirstRange();\n\t}\n}\n\n/**\n * Fired as a continuation of {@link #event:paste} and {@link #event:drop} events.\n *\n * It is a part of the {@glink framework/guides/deep-dive/clipboard#input-pipeline \"clipboard input pipeline\"}.\n *\n * Fired with a `dataTransfer` which comes from the clipboard and which content should be processed\n * and inserted into the editor.\n *\n * Note that this event is not available by default. To make it available {@link module:clipboard/clipboardobserver~ClipboardObserver}\n * needs to be added to {@link module:engine/view/document~Document} by the {@link module:engine/view/view~View#addObserver} method.\n * It's done by the {@link module:clipboard/clipboard~Clipboard} feature. If it's not loaded, it must be done manually.\n *\n * @see module:clipboard/clipboardobserver~ClipboardObserver\n * @see module:clipboard/clipboard~Clipboard\n * @event module:engine/view/document~Document#event:clipboardInput\n * @param {Object} data Event data.\n * @param {module:clipboard/datatransfer~DataTransfer} data.dataTransfer Data transfer instance.\n * @param {Array.<module:engine/view/range~Range>} data.targetRanges Ranges which are the target of the operation\n * (usually – into which the content should be inserted).\n * If clipboard input was triggered by a paste operation, then these are the selection ranges. If by a drop operation,\n * then it's the drop position (which can be different than the selection at the moment of drop).\n */\n\n/**\n * Fired when user drags content over one of the editables.\n *\n * Introduced by {@link module:clipboard/clipboardobserver~ClipboardObserver}.\n *\n * Note that this event is not available by default. To make it available {@link module:clipboard/clipboardobserver~ClipboardObserver}\n * needs to be added to {@link module:engine/view/document~Document} by the {@link module:engine/view/view~View#addObserver} method.\n * It's done by the {@link module:clipboard/clipboard~Clipboard} feature. If it's not loaded, it must be done manually.\n *\n * @see module:engine/view/document~Document#event:clipboardInput\n * @event module:engine/view/document~Document#event:dragover\n * @param {module:clipboard/clipboardobserver~ClipboardEventData} data Event data.\n */\n\n/**\n * Fired when user dropped content into one of the editables.\n *\n * Introduced by {@link module:clipboard/clipboardobserver~ClipboardObserver}.\n *\n * Note that this event is not available by default. To make it available {@link module:clipboard/clipboardobserver~ClipboardObserver}\n * needs to be added to {@link module:engine/view/document~Document} by the {@link module:engine/view/view~View#addObserver} method.\n * It's done by the {@link module:clipboard/clipboard~Clipboard} feature. If it's not loaded, it must be done manually.\n *\n * @see module:engine/view/document~Document#event:clipboardInput\n * @event module:engine/view/document~Document#event:drop\n * @param {module:clipboard/clipboardobserver~ClipboardEventData} data Event data.\n * @param {module:engine/view/range~Range} dropRange The position into which the content is dropped.\n */\n\n/**\n * Fired when user pasted content into one of the editables.\n *\n * Introduced by {@link module:clipboard/clipboardobserver~ClipboardObserver}.\n *\n * Note that this event is not available by default. To make it available {@link module:clipboard/clipboardobserver~ClipboardObserver}\n * needs to be added to {@link module:engine/view/document~Document} by the {@link module:engine/view/view~View#addObserver} method.\n * It's done by the {@link module:clipboard/clipboard~Clipboard} feature. If it's not loaded, it must be done manually.\n *\n * @see module:engine/view/document~Document#event:clipboardInput\n * @event module:engine/view/document~Document#event:paste\n * @param {module:clipboard/clipboardobserver~ClipboardEventData} data Event data.\n */\n\n/**\n * Fired when user copied content from one of the editables.\n *\n * Introduced by {@link module:clipboard/clipboardobserver~ClipboardObserver}.\n *\n * Note that this event is not available by default. To make it available {@link module:clipboard/clipboardobserver~ClipboardObserver}\n * needs to be added to {@link module:engine/view/document~Document} by the {@link module:engine/view/view~View#addObserver} method.\n * It's done by the {@link module:clipboard/clipboard~Clipboard} feature. If it's not loaded, it must be done manually.\n *\n * @see module:clipboard/clipboardobserver~ClipboardObserver\n * @event module:engine/view/document~Document#event:copy\n * @param {module:clipboard/clipboardobserver~ClipboardEventData} data Event data.\n */\n\n/**\n * Fired when user cut content from one of the editables.\n *\n * Introduced by {@link module:clipboard/clipboardobserver~ClipboardObserver}.\n *\n * Note that this event is not available by default. To make it available {@link module:clipboard/clipboardobserver~ClipboardObserver}\n * needs to be added to {@link module:engine/view/document~Document} by the {@link module:engine/view/view~View#addObserver} method.\n * It's done by the {@link module:clipboard/clipboard~Clipboard} feature. If it's not loaded, it must be done manually.\n *\n * @see module:clipboard/clipboardobserver~ClipboardObserver\n * @event module:engine/view/document~Document#event:cut\n * @param {module:clipboard/clipboardobserver~ClipboardEventData} data Event data.\n */\n\n/**\n * The value of the {@link module:engine/view/document~Document#event:paste},\n * {@link module:engine/view/document~Document#event:copy} and {@link module:engine/view/document~Document#event:cut} events.\n *\n * In order to access clipboard data use `dataTransfer` property.\n *\n * @class module:clipboard/clipboardobserver~ClipboardEventData\n * @extends module:engine/view/observer/domeventdata~DomEventData\n */\n\n/**\n * Data transfer instance.\n *\n * @readonly\n * @member {module:clipboard/datatransfer~DataTransfer} module:clipboard/clipboardobserver~ClipboardEventData#dataTransfer\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module clipboard/utils/viewtoplaintext\n */\n\n// Elements which should not have empty-line padding.\n// Most `view.ContainerElement` want to be separate by new-line, but some are creating one structure\n// together (like `<li>`) so it is better to separate them by only one \"\\n\".\nconst smallPaddingElements = [ 'figcaption', 'li' ];\n\n/**\n * Converts {@link module:engine/view/item~Item view item} and all of its children to plain text.\n *\n * @param {module:engine/view/item~Item} viewItem View item to convert.\n * @returns {String} Plain text representation of `viewItem`.\n */\nexport default function viewToPlainText( viewItem ) {\n\tlet text = '';\n\n\tif ( viewItem.is( 'text' ) || viewItem.is( 'textProxy' ) ) {\n\t\t// If item is `Text` or `TextProxy` simple take its text data.\n\t\ttext = viewItem.data;\n\t} else if ( viewItem.is( 'img' ) && viewItem.hasAttribute( 'alt' ) ) {\n\t\t// Special case for images - use alt attribute if it is provided.\n\t\ttext = viewItem.getAttribute( 'alt' );\n\t} else {\n\t\t// Other elements are document fragments, attribute elements or container elements.\n\t\t// They don't have their own text value, so convert their children.\n\t\tlet prev = null;\n\n\t\tfor ( const child of viewItem.getChildren() ) {\n\t\t\tconst childText = viewToPlainText( child );\n\n\t\t\t// Separate container element children with one or more new-line characters.\n\t\t\tif ( prev && ( prev.is( 'containerElement' ) || child.is( 'containerElement' ) ) ) {\n\t\t\t\tif ( smallPaddingElements.includes( prev.name ) || smallPaddingElements.includes( child.name ) ) {\n\t\t\t\t\ttext += '\\n';\n\t\t\t\t} else {\n\t\t\t\t\ttext += '\\n\\n';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttext += childText;\n\t\t\tprev = child;\n\t\t}\n\t}\n\n\treturn text;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module clipboard/clipboard\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport ClipboardObserver from './clipboardobserver';\n\nimport plainTextToHtml from './utils/plaintexttohtml';\nimport normalizeClipboardHtml from './utils/normalizeclipboarddata';\nimport viewToPlainText from './utils/viewtoplaintext.js';\n\nimport HtmlDataProcessor from '@ckeditor/ckeditor5-engine/src/dataprocessor/htmldataprocessor';\n\n/**\n * The clipboard feature. It is responsible for intercepting the `paste` and `drop` events and\n * passing the pasted content through the clipboard pipeline in order to insert it into the editor's content.\n * It also handles the `cut` and `copy` events to fill the native clipboard with serialized editor's data.\n *\n * Read more about the clipboard integration in {@glink framework/guides/deep-dive/clipboard \"Clipboard\" deep dive} guide.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Clipboard extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Clipboard';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst modelDocument = editor.model.document;\n\t\tconst view = editor.editing.view;\n\t\tconst viewDocument = view.document;\n\n\t\t/**\n\t\t * Data processor used to convert pasted HTML to a view structure.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/dataprocessor/htmldataprocessor~HtmlDataProcessor} #_htmlDataProcessor\n\t\t */\n\t\tthis._htmlDataProcessor = new HtmlDataProcessor();\n\n\t\tview.addObserver( ClipboardObserver );\n\n\t\t// The clipboard paste pipeline.\n\n\t\t// Pasting and dropping is disabled when editor is read-only.\n\t\t// See: https://github.com/ckeditor/ckeditor5-clipboard/issues/26.\n\t\tthis.listenTo( viewDocument, 'clipboardInput', evt => {\n\t\t\tif ( editor.isReadOnly ) {\n\t\t\t\tevt.stop();\n\t\t\t}\n\t\t}, { priority: 'highest' } );\n\n\t\tthis.listenTo( viewDocument, 'clipboardInput', ( evt, data ) => {\n\t\t\tconst dataTransfer = data.dataTransfer;\n\t\t\tlet content = '';\n\n\t\t\tif ( dataTransfer.getData( 'text/html' ) ) {\n\t\t\t\tcontent = normalizeClipboardHtml( dataTransfer.getData( 'text/html' ) );\n\t\t\t} else if ( dataTransfer.getData( 'text/plain' ) ) {\n\t\t\t\tcontent = plainTextToHtml( dataTransfer.getData( 'text/plain' ) );\n\t\t\t}\n\n\t\t\tcontent = this._htmlDataProcessor.toView( content );\n\n\t\t\tthis.fire( 'inputTransformation', { content, dataTransfer } );\n\n\t\t\tview.scrollToTheSelection();\n\t\t}, { priority: 'low' } );\n\n\t\tthis.listenTo( this, 'inputTransformation', ( evt, data ) => {\n\t\t\tif ( !data.content.isEmpty ) {\n\t\t\t\tconst dataController = this.editor.data;\n\t\t\t\tconst model = this.editor.model;\n\n\t\t\t\t// Convert the pasted content to a model document fragment.\n\t\t\t\t// Conversion is contextual, but in this case we need an \"all allowed\" context and for that\n\t\t\t\t// we use the $clipboardHolder item.\n\t\t\t\tconst modelFragment = dataController.toModel( data.content, '$clipboardHolder' );\n\n\t\t\t\tif ( modelFragment.childCount == 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tmodel.insertContent( modelFragment );\n\t\t\t}\n\t\t}, { priority: 'low' } );\n\n\t\t// The clipboard copy/cut pipeline.\n\n\t\tfunction onCopyCut( evt, data ) {\n\t\t\tconst dataTransfer = data.dataTransfer;\n\n\t\t\tdata.preventDefault();\n\n\t\t\tconst content = editor.data.toView( editor.model.getSelectedContent( modelDocument.selection ) );\n\n\t\t\tviewDocument.fire( 'clipboardOutput', { dataTransfer, content, method: evt.name } );\n\t\t}\n\n\t\tthis.listenTo( viewDocument, 'copy', onCopyCut, { priority: 'low' } );\n\t\tthis.listenTo( viewDocument, 'cut', ( evt, data ) => {\n\t\t\t// Cutting is disabled when editor is read-only.\n\t\t\t// See: https://github.com/ckeditor/ckeditor5-clipboard/issues/26.\n\t\t\tif ( editor.isReadOnly ) {\n\t\t\t\tdata.preventDefault();\n\t\t\t} else {\n\t\t\t\tonCopyCut( evt, data );\n\t\t\t}\n\t\t}, { priority: 'low' } );\n\n\t\tthis.listenTo( viewDocument, 'clipboardOutput', ( evt, data ) => {\n\t\t\tif ( !data.content.isEmpty ) {\n\t\t\t\tdata.dataTransfer.setData( 'text/html', this._htmlDataProcessor.toData( data.content ) );\n\t\t\t\tdata.dataTransfer.setData( 'text/plain', viewToPlainText( data.content ) );\n\t\t\t}\n\n\t\t\tif ( data.method == 'cut' ) {\n\t\t\t\teditor.model.deleteContent( modelDocument.selection );\n\t\t\t}\n\t\t}, { priority: 'low' } );\n\t}\n}\n\n/**\n * Fired with a `content` and `dataTransfer` objects. The `content` which comes from the clipboard (was pasted or dropped)\n * should be processed in order to be inserted into the editor. The `dataTransfer` object is available\n * in case the transformation functions needs access to a raw clipboard data.\n *\n * It is a part of the {@glink framework/guides/deep-dive/clipboard#input-pipeline \"clipboard input pipeline\"}.\n *\n * @see module:clipboard/clipboardobserver~ClipboardObserver\n * @see module:clipboard/clipboard~Clipboard\n * @event module:clipboard/clipboard~Clipboard#event:inputTransformation\n * @param {Object} data Event data.\n * @param {module:engine/view/documentfragment~DocumentFragment} data.content Event data. Content to be inserted into the editor.\n * It can be modified by the event listeners. Read more about the clipboard pipelines in\n * {@glink framework/guides/deep-dive/clipboard \"Clipboard\" deep dive}.\n * @param {module:clipboard/datatransfer~DataTransfer} data.dataTransfer Data transfer instance.\n */\n\n/**\n * Fired on {@link module:engine/view/document~Document#event:copy} and {@link module:engine/view/document~Document#event:cut}\n * with a copy of selected content. The content can be processed before it ends up in the clipboard.\n *\n * It is a part of the {@glink framework/guides/deep-dive/clipboard#output-pipeline \"clipboard output pipeline\"}.\n *\n * @see module:clipboard/clipboardobserver~ClipboardObserver\n * @see module:clipboard/clipboard~Clipboard\n * @event module:engine/view/document~Document#event:clipboardOutput\n * @param {module:clipboard/clipboard~ClipboardOutputEventData} data Event data.\n */\n\n/**\n * The value of the {@link module:engine/view/document~Document#event:clipboardOutput} event.\n *\n * @class module:clipboard/clipboard~ClipboardOutputEventData\n */\n\n/**\n * Data transfer instance.\n *\n * @readonly\n * @member {module:clipboard/datatransfer~DataTransfer} module:clipboard/clipboard~ClipboardOutputEventData#dataTransfer\n */\n\n/**\n * Content to be put into the clipboard. It can be modified by the event listeners.\n * Read more about the clipboard pipelines in {@glink framework/guides/deep-dive/clipboard \"Clipboard\" deep dive}.\n *\n * @member {module:engine/view/documentfragment~DocumentFragment} module:clipboard/clipboard~ClipboardOutputEventData#content\n */\n\n/**\n * Whether the event was triggered by copy or cut operation.\n *\n * @member {'copy'|'cut'} module:clipboard/clipboard~ClipboardOutputEventData#method\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module clipboard/utils/normalizeclipboarddata\n */\n\n/**\n * Removes some popular browser quirks out of the clipboard data (HTML).\n *\n * @param {String} data The HTML data to normalize.\n * @returns {String} Normalized HTML.\n */\nexport default function normalizeClipboardData( data ) {\n\treturn data\n\t\t.replace( /<span(?: class=\"Apple-converted-space\"|)>(\\s+)<\\/span>/g, ( fullMatch, spaces ) => {\n\t\t\t// Handle the most popular and problematic case when even a single space becomes an nbsp;.\n\t\t\t// Decode those to normal spaces. Read more in https://github.com/ckeditor/ckeditor5-clipboard/issues/2.\n\t\t\tif ( spaces.length == 1 ) {\n\t\t\t\treturn ' ';\n\t\t\t}\n\n\t\t\treturn spaces;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module clipboard/utils/plaintexttohtml\n */\n\n/**\n * Converts plain text to its HTML-ized version.\n *\n * @param {String} text The plain text to convert.\n * @returns {String} HTML generated from the plain text.\n */\nexport default function plainTextToHtml( text ) {\n\ttext = text\n\t\t// Encode <>.\n\t\t.replace( /</g, '&lt;' )\n\t\t.replace( />/g, '&gt;' )\n\t\t// Creates paragraphs for every line breaks.\n\t\t.replace( /\\n/g, '</p><p>' )\n\t\t// Preserve trailing spaces (only the first and last one – the rest is handled below).\n\t\t.replace( /^\\s/, '&nbsp;' )\n\t\t.replace( /\\s$/, '&nbsp;' )\n\t\t// Preserve other subsequent spaces now.\n\t\t.replace( /\\s\\s/g, ' &nbsp;' );\n\n\tif ( text.indexOf( '</p><p>' ) > -1 ) {\n\t\t// If we created paragraphs above, add the trailing ones.\n\t\ttext = `<p>${ text }</p>`;\n\t}\n\n\t// TODO:\n\t// * What about '\\nfoo' vs ' foo'?\n\n\treturn text;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/button/switchbuttonview\n */\n\nimport View from '../view';\nimport ButtonView from './buttonview';\n\nimport '../../theme/components/button/switchbutton.css';\n\n/**\n * The switch button view class.\n *\n *\t\tconst view = new SwitchButtonView();\n *\n *\t\tview.set( {\n *\t\t\twithText: true,\n *\t\t\tlabel: 'Switch me!'\n *\t\t} );\n *\n *\t\tview.render();\n *\n *\t\tdocument.body.append( view.element );\n *\n * @extends module:ui/button/buttonview~ButtonView\n */\nexport default class SwitchButtonView extends ButtonView {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * The toggle switch of the button.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/view~View} #toggleSwitchView\n\t\t */\n\t\tthis.toggleSwitchView = this._createToggleView();\n\n\t\tthis.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck-switchbutton'\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.children.add( this.toggleSwitchView );\n\t}\n\n\t/**\n\t * Creates a toggle child view.\n\t *\n\t * @private\n\t * @returns {module:ui/view~View}\n\t */\n\t_createToggleView() {\n\t\tconst toggleSwitchView = new View();\n\n\t\ttoggleSwitchView.setTemplate( {\n\t\t\ttag: 'span',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-button__toggle'\n\t\t\t\t],\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'span',\n\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: [\n\t\t\t\t\t\t\t'ck',\n\t\t\t\t\t\t\t'ck-button__toggle__inner'\n\t\t\t\t\t\t],\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\n\t\treturn toggleSwitchView;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/notification/notification\n */\n\n/* globals window */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\n/**\n * The Notification plugin.\n *\n * This plugin sends a few types of notifications: `success`, `info` and `warning`. The notifications need to be\n * handled and displayed by a plugin responsible for showing the UI of the notifications. Using this plugin for dispatching\n * notifications makes it possible to switch the notifications UI.\n *\n * Note that every unhandled and not stopped `warning` notification will be displayed as a system alert.\n * See {@link module:ui/notification/notification~Notification#showWarning}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Notification extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Notification';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\t// Each unhandled and not stopped `show:warning` event is displayed as a system alert.\n\t\tthis.on( 'show:warning', ( evt, data ) => {\n\t\t\twindow.alert( data.message ); // eslint-disable-line no-alert\n\t\t}, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * Shows a success notification.\n\t *\n\t * By default, it fires the {@link #event:show:success `show:success` event} with the given `data`. The event namespace can be extended\n\t * using the `data.namespace` option. For example:\n\t *\n\t * \t\tshowSuccess( 'Image is uploaded.', {\n\t * \t\t\tnamespace: 'upload:image'\n\t * \t\t} );\n\t *\n\t * will fire the `show:success:upload:image` event.\n\t *\n\t * You can provide the title of the notification:\n\t *\n\t *\t\tshowSuccess( 'Image is uploaded.', {\n\t *\t\t\ttitle: 'Image upload success'\n\t *\t\t} );\n\t *\n\t * @param {String} message The content of the notification.\n\t * @param {Object} [data={}] Additional data.\n\t * @param {String} [data.namespace] Additional event namespace.\n\t * @param {String} [data.title] The title of the notification.\n\t */\n\tshowSuccess( message, data = {} ) {\n\t\tthis._showNotification( {\n\t\t\tmessage,\n\t\t\ttype: 'success',\n\t\t\tnamespace: data.namespace,\n\t\t\ttitle: data.title\n\t\t} );\n\t}\n\n\t/**\n\t * Shows an information notification.\n\t *\n\t * By default, it fires the {@link #event:show:info `show:info` event} with the given `data`. The event namespace can be extended\n\t * using the `data.namespace` option. For example:\n\t *\n\t * \t\tshowInfo( 'Editor is offline.', {\n\t * \t\t\tnamespace: 'editor:status'\n\t * \t\t} );\n\t *\n\t * will fire the `show:info:editor:status` event.\n\t *\n\t * You can provide the title of the notification:\n\t *\n\t *\t\tshowInfo( 'Editor is offline.', {\n\t *\t\t\ttitle: 'Network information'\n\t *\t\t} );\n\t *\n\t * @param {String} message The content of the notification.\n\t * @param {Object} [data={}] Additional data.\n\t * @param {String} [data.namespace] Additional event namespace.\n\t * @param {String} [data.title] The title of the notification.\n\t */\n\tshowInfo( message, data = {} ) {\n\t\tthis._showNotification( {\n\t\t\tmessage,\n\t\t\ttype: 'info',\n\t\t\tnamespace: data.namespace,\n\t\t\ttitle: data.title\n\t\t} );\n\t}\n\n\t/**\n\t * Shows a warning notification.\n\t *\n\t * By default, it fires the {@link #event:show:warning `show:warning` event}\n\t * with the given `data`. The event namespace can be extended using the `data.namespace` option. For example:\n\t *\n\t * \t\tshowWarning( 'Image upload error.', {\n\t * \t\t\tnamespace: 'upload:image'\n\t * \t\t} );\n\t *\n\t * will fire the `show:warning:upload:image` event.\n\t *\n\t * You can provide the title of the notification:\n\t *\n\t *\t\tshowWarning( 'Image upload error.', {\n\t *\t\t\ttitle: 'Upload failed'\n\t *\t\t} );\n\t *\n\t * Note that each unhandled and not stopped `warning` notification will be displayed as a system alert.\n\t * The plugin responsible for displaying warnings should `stop()` the event to prevent displaying it as an alert:\n\t *\n\t * \t\tnotifications.on( 'show:warning', ( evt, data ) => {\n\t * \t\t\t// Do something with the data.\n\t *\n\t * \t\t\t// Stop this event to prevent displaying it as an alert.\n\t * \t\t\tevt.stop();\n\t * \t\t} );\n\t *\n\t * You can attach many listeners to the same event and `stop()` this event in a listener with a low priority:\n\t *\n\t * \t\tnotifications.on( 'show:warning', ( evt, data ) => {\n\t * \t\t\t// Show the warning in the UI, but do not stop it.\n\t * \t\t} );\n\t *\n\t * \t\tnotifications.on( 'show:warning', ( evt, data ) => {\n\t * \t\t\t// Log the warning to some error tracker.\n\t *\n\t * \t\t\t// Stop this event to prevent displaying it as an alert.\n\t * \t\t\tevt.stop();\n\t * \t\t}, { priority: 'low' } );\n\t *\n\t * @param {String} message The content of the notification.\n\t * @param {Object} [data={}] Additional data.\n\t * @param {String} [data.namespace] Additional event namespace.\n\t * @param {String} [data.title] The title of the notification.\n\t */\n\tshowWarning( message, data = {} ) {\n\t\tthis._showNotification( {\n\t\t\tmessage,\n\t\t\ttype: 'warning',\n\t\t\tnamespace: data.namespace,\n\t\t\ttitle: data.title\n\t\t} );\n\t}\n\n\t/**\n\t * Fires the `show` event with the specified type, namespace and message.\n\t *\n\t * @private\n\t * @param {Object} data The message data.\n\t * @param {String} data.message The content of the notification.\n\t * @param {'success'|'info'|'warning'} data.type The type of the message.\n\t * @param {String} [data.namespace] Additional event namespace.\n\t * @param {String} [data.title=''] The title of the notification.\n\t */\n\t_showNotification( data ) {\n\t\tconst event = `show:${ data.type }` + ( data.namespace ? `:${ data.namespace }` : '' );\n\n\t\tthis.fire( event, {\n\t\t\tmessage: data.message,\n\t\t\ttype: data.type,\n\t\t\ttitle: data.title || ''\n\t\t} );\n\t}\n\n\t/**\n\t * Fired when one of the `showSuccess()`, `showInfo()`, `showWarning()` methods is called.\n\t *\n\t * @event show\n\t * @param {Object} data The notification data.\n\t * @param {String} data.message The content of the notification.\n\t * @param {String} data.title The title of the notification.\n\t * @param {'success'|'info'|'warning'} data.type The type of the notification.\n\t */\n\n\t/**\n\t * Fired when the `showSuccess()` method is called.\n\t *\n\t * @event show:success\n\t * @param {Object} data The notification data.\n\t * @param {String} data.message The content of the notification.\n\t * @param {String} data.title The title of the notification.\n\t * @param {'success'} data.type The type of the notification.\n\t */\n\n\t/**\n\t * Fired when the `showInfo()` method is called.\n\t *\n\t * @event show:info\n\t * @param {Object} data The notification data.\n\t * @param {String} data.message The content of the notification.\n\t * @param {String} data.title The title of the notification.\n\t * @param {'info'} data.type The type of the notification.\n\t */\n\n\t/**\n\t * Fired when the `showWarning()` method is called.\n\t *\n\t * When this event is not handled or stopped by `event.stop()`, the `data.message` of this event will\n\t * be automatically displayed as a system alert.\n\t *\n\t * @event show:warning\n\t * @param {Object} data The notification data.\n\t * @param {String} data.message The content of the notification.\n\t * @param {String} data.title The title of the notification.\n\t * @param {'warning'} data.type The type of the notification.\n\t */\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/utils\n */\n\nimport { isWidget, toWidget } from '@ckeditor/ckeditor5-widget/src/utils';\nimport { findAncestor } from './commands/utils';\n\n/**\n * Converts a given {@link module:engine/view/element~Element} to a table widget:\n * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to recognize the table widget element.\n * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer An instance of the view writer.\n * @param {String} label The element's label. It will be concatenated with the table `alt` attribute if one is present.\n * @returns {module:engine/view/element~Element}\n */\nexport function toTableWidget( viewElement, writer ) {\n\twriter.setCustomProperty( 'table', true, viewElement );\n\n\treturn toWidget( viewElement, writer, { hasSelectionHandler: true } );\n}\n\n/**\n * Checks if a given view element is a table widget.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @returns {Boolean}\n */\nexport function isTableWidget( viewElement ) {\n\treturn !!viewElement.getCustomProperty( 'table' ) && isWidget( viewElement );\n}\n\n/**\n * Returns a table widget editing view element if one is selected.\n *\n * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} selection\n * @returns {module:engine/view/element~Element|null}\n */\nexport function getSelectedTableWidget( selection ) {\n\tconst viewElement = selection.getSelectedElement();\n\n\tif ( viewElement && isTableWidget( viewElement ) ) {\n\t\treturn viewElement;\n\t}\n\n\treturn null;\n}\n\n/**\n * Returns a table widget editing view element if one is among selection's ancestors.\n *\n * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} selection\n * @returns {module:engine/view/element~Element|null}\n */\nexport function getTableWidgetAncestor( selection ) {\n\tconst parentTable = findAncestor( 'table', selection.getFirstPosition() );\n\n\tif ( parentTable && isTableWidget( parentTable.parent ) ) {\n\t\treturn parentTable.parent;\n\t}\n\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/dataprocessor/basichtmlwriter\n */\n\n/* globals document */\n\n/**\n * Basic HTML writer. It uses the native `innerHTML` property for basic conversion\n * from a document fragment to an HTML string.\n *\n * @implements module:engine/dataprocessor/htmlwriter~HtmlWriter\n */\nexport default class BasicHtmlWriter {\n\t/**\n\t * Returns an HTML string created from the document fragment.\n\t *\n\t * @param {DocumentFragment} fragment\n\t * @returns {String}\n\t */\n\tgetHtml( fragment ) {\n\t\tconst doc = document.implementation.createHTMLDocument( '' );\n\t\tconst container = doc.createElement( 'div' );\n\t\tcontainer.appendChild( fragment );\n\n\t\treturn container.innerHTML;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/dataprocessor/htmldataprocessor\n */\n\n/* globals document, DOMParser */\n\nimport BasicHtmlWriter from './basichtmlwriter';\nimport DomConverter from '../view/domconverter';\nimport { NBSP_FILLER } from '../view/filler';\n\n/**\n * The HTML data processor class.\n * This data processor implementation uses HTML as input and output data.\n *\n * @implements module:engine/dataprocessor/dataprocessor~DataProcessor\n */\nexport default class HtmlDataProcessor {\n\t/**\n\t * Creates a new instance of the HTML data processor class.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * A DOM parser instance used to parse an HTML string to an HTML document.\n\t\t *\n\t\t * @private\n\t\t * @member {DOMParser}\n\t\t */\n\t\tthis._domParser = new DOMParser();\n\n\t\t/**\n\t\t * A DOM converter used to convert DOM elements to view elements.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis._domConverter = new DomConverter( { blockFiller: NBSP_FILLER } );\n\n\t\t/**\n\t\t * A basic HTML writer instance used to convert DOM elements to an HTML string.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/dataprocessor/basichtmlwriter~BasicHtmlWriter}\n\t\t */\n\t\tthis._htmlWriter = new BasicHtmlWriter();\n\t}\n\n\t/**\n\t * Converts a provided {@link module:engine/view/documentfragment~DocumentFragment document fragment}\n\t * to data format &mdash; in this case to an HTML string.\n\t *\n\t * @param {module:engine/view/documentfragment~DocumentFragment} viewFragment\n\t * @returns {String} HTML string.\n\t */\n\ttoData( viewFragment ) {\n\t\t// Convert view DocumentFragment to DOM DocumentFragment.\n\t\tconst domFragment = this._domConverter.viewToDom( viewFragment, document );\n\n\t\t// Convert DOM DocumentFragment to HTML output.\n\t\treturn this._htmlWriter.getHtml( domFragment );\n\t}\n\n\t/**\n\t * Converts the provided HTML string to a view tree.\n\t *\n\t * @param {String} data An HTML string.\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null} A converted view element.\n\t */\n\ttoView( data ) {\n\t\t// Convert input HTML data to DOM DocumentFragment.\n\t\tconst domFragment = this._toDom( data );\n\n\t\t// Convert DOM DocumentFragment to view DocumentFragment.\n\t\treturn this._domConverter.domToView( domFragment );\n\t}\n\n\t/**\n\t * Converts an HTML string to its DOM representation. Returns a document fragment containing nodes parsed from\n\t * the provided data.\n\t *\n\t * @private\n\t * @param {String} data\n\t * @returns {DocumentFragment}\n\t */\n\t_toDom( data ) {\n\t\tconst document = this._domParser.parseFromString( data, 'text/html' );\n\t\tconst fragment = document.createDocumentFragment();\n\t\tconst nodes = document.body.childNodes;\n\n\t\twhile ( nodes.length > 0 ) {\n\t\t\tfragment.appendChild( nodes[ 0 ] );\n\t\t}\n\n\t\treturn fragment;\n\t}\n}\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/objecttomap\n */\n\n/**\n * Transforms object to map.\n *\n *\t\tconst map = objectToMap( { 'foo': 1, 'bar': 2 } );\n *\t\tmap.get( 'foo' ); // 1\n *\n * @param {Object} obj Object to transform.\n * @returns {Map} Map created from object.\n */\nexport default function objectToMap( obj ) {\n\tconst map = new Map();\n\n\tfor ( const key in obj ) {\n\t\tmap.set( key, obj[ key ] );\n\t}\n\n\treturn map;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/documentselection\n */\n\nimport Selection from './selection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\n/**\n * Class representing the document selection in the view.\n *\n * Its instance is available in {@link module:engine/view/document~Document#selection `Document#selection`}.\n *\n * It is similar to {@link module:engine/view/selection~Selection} but\n * it has a read-only API and can be modified only by the writer available in\n * the {@link module:engine/view/view~View#change `View#change()`} block\n * (so via {@link module:engine/view/downcastwriter~DowncastWriter#setSelection `DowncastWriter#setSelection()`}).\n */\nexport default class DocumentSelection {\n\t/**\n\t * Creates new DocumentSelection instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = new DocumentSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = new DocumentSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( start2, end2 ) ];\n\t *\t\tconst selection = new DocumentSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = new DocumentSelection( otherSelection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, offset );\n\t *\t\tconst selection = new DocumentSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = new DocumentSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = new DocumentSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = new DocumentSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = new DocumentSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = new DocumentSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tconstructor( selectable = null, placeOrOffset, options ) {\n\t\t/**\n\t\t * Selection is used internally (`DocumentSelection` is a proxy to that selection).\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/selection~Selection}\n\t\t */\n\t\tthis._selection = new Selection();\n\n\t\t// Delegate change event to be fired on DocumentSelection instance.\n\t\tthis._selection.delegate( 'change' ).to( this );\n\n\t\t// Set selection data.\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Returns true if selection instance is marked as `fake`.\n\t *\n\t * @see #_setTo\n\t * @returns {Boolean}\n\t */\n\tget isFake() {\n\t\treturn this._selection.isFake;\n\t}\n\n\t/**\n\t * Returns fake selection label.\n\t *\n\t * @see #_setTo\n\t * @returns {String}\n\t */\n\tget fakeSelectionLabel() {\n\t\treturn this._selection.fakeSelectionLabel;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the selection starts. Together with\n\t * {@link #focus focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always the start or end of the most recent added range.\n\t * It may be a bit unintuitive when there are multiple ranges in selection.\n\t *\n\t * @see #focus\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget anchor() {\n\t\treturn this._selection.anchor;\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * @see #anchor\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget focus() {\n\t\treturn this._selection.focus;\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this._selection.isCollapsed;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._selection.rangeCount;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus} precedes {@link #anchor}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn this._selection.isBackward;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this selection, or `null`\n\t * if the selection is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\treturn this._selection.editableElement;\n\t}\n\n\t/**\n\t * Used for the compatibility with the {@link module:engine/view/selection~Selection#isEqual} method.\n\t *\n\t * @protected\n\t */\n\tget _ranges() {\n\t\treturn this._selection._ranges;\n\t}\n\n\t/**\n\t * Returns an iterable that contains copies of all ranges added to the selection.\n\t *\n\t * @returns {Iterable.<module:engine/view/range~Range>}\n\t */\n\t* getRanges() {\n\t\tyield* this._selection.getRanges();\n\t}\n\n\t/**\n\t * Returns copy of the first range in the selection. First range is the one which\n\t * {@link module:engine/view/range~Range#start start} position {@link module:engine/view/position~Position#isBefore is before} start\n\t * position of all other ranges (not to confuse with the first range added to the selection).\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\treturn this._selection.getFirstRange();\n\t}\n\n\t/**\n\t * Returns copy of the last range in the selection. Last range is the one which {@link module:engine/view/range~Range#end end}\n\t * position {@link module:engine/view/position~Position#isAfter is after} end position of all other ranges (not to confuse\n\t * with the last range added to the selection). Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\treturn this._selection.getLastRange();\n\t}\n\n\t/**\n\t * Returns copy of the first position in the selection. First position is the position that\n\t * {@link module:engine/view/position~Position#isBefore is before} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\treturn this._selection.getFirstPosition();\n\t}\n\n\t/**\n\t * Returns copy of the last position in the selection. Last position is the position that\n\t * {@link module:engine/view/position~Position#isAfter is after} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\treturn this._selection.getLastPosition();\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/view/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/view/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\treturn this._selection.getSelectedElement();\n\t}\n\n\t/**\n\t * Checks whether, this selection is equal to given selection. Selections are equal if they have same directions,\n\t * same number of ranges and all ranges from one selection equal to a range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\treturn this._selection.isEqual( otherSelection );\n\t}\n\n\t/**\n\t * Checks whether this selection is similar to given selection. Selections are similar if they have same directions, same\n\t * number of ranges, and all {@link module:engine/view/range~Range#getTrimmed trimmed} ranges from one selection are\n\t * equal to any trimmed range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are similar, `false` otherwise.\n\t */\n\tisSimilar( otherSelection ) {\n\t\treturn this._selection.isSimilar( otherSelection );\n\t}\n\n\t/**\n\t * Checks whether object is of given type following the convention set by\n\t * {@link module:engine/view/node~Node#is `Node#is()`}.\n\t *\n\t *\t\tconst selection = new DocumentSelection( ... );\n\t *\n\t *\t\tselection.is( 'selection' ); // true\n\t *\t\tselection.is( 'documentSelection' ); // true\n\t *\t\tselection.is( 'node' ); // false\n\t *\t\tselection.is( 'element' ); // false\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'selection' || type == 'documentSelection';\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tdocumentSelection._setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( start2, end2 ) ];\n\t *\t\tdocumentSelection._setTo( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tdocumentSelection._setTo( otherSelection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, offset );\n\t *\t\tdocumentSelection._setTo( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tdocumentSelection._setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t *\t\tdocumentSelection._setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tdocumentSelection._setTo( paragraph, 'on' );\n\t *\n\t * \t\t// Clears selection. Removes all ranges.\n\t *\t\tdocumentSelection._setTo( null );\n\t *\n\t * `Selection#_setTo()` method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\tdocumentSelection._setTo( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to des cribe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tdocumentSelection._setTo( range, { fake: true, label: 'foo' } );\n\t *\n\t * @protected\n\t * @fires change\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\t_setTo( selectable, placeOrOffset, options ) {\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Moves {@link #focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @protected\n\t * @fires change\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\t_setFocus( itemOrPosition, offset ) {\n\t\tthis._selection.setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Fired whenever selection ranges are changed through {@link ~DocumentSelection Selection API}.\n\t *\n\t * @event change\n\t */\n}\n\nmix( DocumentSelection, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/fastdiff\n */\n\n/**\n * Finds positions of the first and last change in the given string/array and generates a set of changes:\n *\n *\t\tfastDiff( '12a', '12xyza' );\n *\t\t// [ { index: 2, type: 'insert', values: [ 'x', 'y', 'z' ] } ]\n *\n *\t\tfastDiff( '12a', '12aa' );\n *\t\t// [ { index: 3, type: 'insert', values: [ 'a' ] } ]\n *\n *\t\tfastDiff( '12xyza', '12a' );\n *\t\t// [ { index: 2, type: 'delete', howMany: 3 } ]\n *\n *\t\tfastDiff( [ '1', '2', 'a', 'a' ], [ '1', '2', 'a' ] );\n *\t\t// [ { index: 3, type: 'delete', howMany: 1 } ]\n *\n *\t\tfastDiff( [ '1', '2', 'a', 'b', 'c', '3' ], [ '2', 'a', 'b' ] );\n *\t\t// [ { index: 0, type: 'insert', values: [ '2', 'a', 'b' ] }, { index: 3, type: 'delete', howMany: 6 } ]\n *\n * Passed arrays can contain any type of data, however to compare them correctly custom comparator function\n * should be passed as a third parameter:\n *\n *\t\tfastDiff( [ { value: 1 }, { value: 2 } ], [ { value: 1 }, { value: 3 } ], ( a, b ) => {\n *\t\t\treturn a.value === b.value;\n *\t\t} );\n *\t\t// [ { index: 1, type: 'insert', values: [ { value: 3 } ] }, { index: 2, type: 'delete', howMany: 1 } ]\n *\n * The resulted set of changes can be applied to the input in order to transform it into the output, for example:\n *\n *\t\tlet input = '12abc3';\n *\t\tconst output = '2ab';\n *\t\tconst changes = fastDiff( input, output );\n *\n *\t\tchanges.forEach( change => {\n *\t\t\tif ( change.type == 'insert' ) {\n *\t\t\t\tinput = input.substring( 0, change.index ) + change.values.join( '' ) + input.substring( change.index );\n *\t\t\t} else if ( change.type == 'delete' ) {\n *\t\t\t\tinput = input.substring( 0, change.index ) + input.substring( change.index + change.howMany );\n *\t\t\t}\n *\t\t} );\n *\n *\t\t// input equals output now\n *\n * or in case of arrays:\n *\n *\t\tlet input = [ '1', '2', 'a', 'b', 'c', '3' ];\n *\t\tconst output = [ '2', 'a', 'b' ];\n *\t\tconst changes = fastDiff( input, output );\n *\n *\t\tchanges.forEach( change => {\n *\t\t\tif ( change.type == 'insert' ) {\n *\t\t\t\tinput = input.slice( 0, change.index ).concat( change.values, input.slice( change.index ) );\n *\t\t\t} else if ( change.type == 'delete' ) {\n *\t\t\t\tinput = input.slice( 0, change.index ).concat( input.slice( change.index + change.howMany ) );\n *\t\t\t}\n *\t\t} );\n *\n *\t\t// input equals output now\n *\n * By passing `true` as the fourth parameter (`atomicChanges`) the output of this function will become compatible with\n * the {@link module:utils/diff~diff `diff()`} function:\n *\n *\t\tfastDiff( '12a', '12xyza' );\n *\t\t// [ 'equal', 'equal', 'insert', 'insert', 'insert', 'equal' ]\n *\n * The default output format of this function is compatible with the output format of\n * {@link module:utils/difftochanges~diffToChanges `diffToChanges()`}. The `diffToChanges()` input format is, in turn,\n * compatible with the output of {@link module:utils/diff~diff `diff()`}:\n *\n *\t\tconst a = '1234';\n *\t\tconst b = '12xyz34';\n *\n *\t\t// Both calls will return the same results (grouped changes format).\n *\t\tfastDiff( a, b );\n *\t\tdiffToChanges( diff( a, b ) );\n *\n *\t\t// Again, both calls will return the same results (atomic changes format).\n *\t\tfastDiff( a, b, null, true );\n *\t\tdiff( a, b );\n *\n *\n * @param {Array|String} a Input array or string.\n * @param {Array|String} b Input array or string.\n * @param {Function} [cmp] Optional function used to compare array values, by default `===` (strict equal operator) is used.\n * @param {Boolean} [atomicChanges=false] Whether an array of `inset|delete|equal` operations should\n * be returned instead of changes set. This makes this function compatible with {@link module:utils/diff~diff `diff()`}.\n * @returns {Array} Array of changes.\n */\nexport default function fastDiff( a, b, cmp, atomicChanges = false ) {\n\t// Set the comparator function.\n\tcmp = cmp || function( a, b ) {\n\t\treturn a === b;\n\t};\n\n\t// Transform text or any iterable into arrays for easier, consistent processing.\n\tif ( !Array.isArray( a ) ) {\n\t\ta = Array.from( a );\n\t}\n\n\tif ( !Array.isArray( b ) ) {\n\t\tb = Array.from( b );\n\t}\n\n\t// Find first and last change.\n\tconst changeIndexes = findChangeBoundaryIndexes( a, b, cmp );\n\n\t// Transform into changes array.\n\treturn atomicChanges ? changeIndexesToAtomicChanges( changeIndexes, b.length ) : changeIndexesToChanges( b, changeIndexes );\n}\n\n// Finds position of the first and last change in the given arrays. For example:\n//\n//\t\tconst indexes = findChangeBoundaryIndexes( [ '1', '2', '3', '4' ], [ '1', '3', '4', '2', '4' ] );\n//\t\tconsole.log( indexes ); // { firstIndex: 1, lastIndexOld: 3, lastIndexNew: 4 }\n//\n// The above indexes means that in the first array the modified part is `1[23]4` and in the second array it is `1[342]4`.\n// Based on such indexes, array with `insert`/`delete` operations which allows transforming first value into the second one\n// can be generated.\n//\n// @param {Array} arr1\n// @param {Array} arr2\n// @param {Function} cmp Comparator function.\n// @returns {Object}\n// @returns {Number} return.firstIndex Index of the first change in both values (always the same for both).\n// @returns {Number} result.lastIndexOld Index of the last common value in `arr1`.\n// @returns {Number} result.lastIndexNew Index of the last common value in `arr2`.\nfunction findChangeBoundaryIndexes( arr1, arr2, cmp ) {\n\t// Find the first difference between passed values.\n\tconst firstIndex = findFirstDifferenceIndex( arr1, arr2, cmp );\n\n\t// If arrays are equal return -1 indexes object.\n\tif ( firstIndex === -1 ) {\n\t\treturn { firstIndex: -1, lastIndexOld: -1, lastIndexNew: -1 };\n\t}\n\n\t// Remove the common part of each value and reverse them to make it simpler to find the last difference between them.\n\tconst oldArrayReversed = cutAndReverse( arr1, firstIndex );\n\tconst newArrayReversed = cutAndReverse( arr2, firstIndex );\n\n\t// Find the first difference between reversed values.\n\t// It should be treated as \"how many elements from the end the last difference occurred\".\n\t//\n\t// For example:\n\t//\n\t// \t\t\t\tinitial\t->\tafter cut\t-> reversed:\n\t// oldValue:\t'321ba'\t->\t'21ba'\t\t-> 'ab12'\n\t// newValue:\t'31xba'\t->\t'1xba'\t\t-> 'abx1'\n\t// lastIndex:\t\t\t\t\t\t\t-> 2\n\t//\n\t// So the last change occurred two characters from the end of the arrays.\n\tconst lastIndex = findFirstDifferenceIndex( oldArrayReversed, newArrayReversed, cmp );\n\n\t// Use `lastIndex` to calculate proper offset, starting from the beginning (`lastIndex` kind of starts from the end).\n\tconst lastIndexOld = arr1.length - lastIndex;\n\tconst lastIndexNew = arr2.length - lastIndex;\n\n\treturn { firstIndex, lastIndexOld, lastIndexNew };\n}\n\n// Returns a first index on which given arrays differ. If both arrays are the same, -1 is returned.\n//\n// @param {Array} arr1\n// @param {Array} arr2\n// @param {Function} cmp Comparator function.\n// @returns {Number}\nfunction findFirstDifferenceIndex( arr1, arr2, cmp ) {\n\tfor ( let i = 0; i < Math.max( arr1.length, arr2.length ); i++ ) {\n\t\tif ( arr1[ i ] === undefined || arr2[ i ] === undefined || !cmp( arr1[ i ], arr2[ i ] ) ) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1; // Return -1 if arrays are equal.\n}\n\n// Returns a copy of the given array with `howMany` elements removed starting from the beginning and in reversed order.\n//\n// @param {Array} arr Array to be processed.\n// @param {Number} howMany How many elements from array beginning to remove.\n// @returns {Array} Shortened and reversed array.\nfunction cutAndReverse( arr, howMany ) {\n\treturn arr.slice( howMany ).reverse();\n}\n\n// Generates changes array based on change indexes from `findChangeBoundaryIndexes` function. This function will\n// generate array with 0 (no changes), 1 (deletion or insertion) or 2 records (insertion and deletion).\n//\n// @param {Array} newArray New array for which change indexes were calculated.\n// @param {Object} changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n// @returns {Array.<Object>} Array of changes compatible with {@link module:utils/difftochanges~diffToChanges} format.\nfunction changeIndexesToChanges( newArray, changeIndexes ) {\n\tconst result = [];\n\tconst { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n\n\t// Order operations as 'insert', 'delete' array to keep compatibility with {@link module:utils/difftochanges~diffToChanges}\n\t// in most cases. However, 'diffToChanges' does not stick to any order so in some cases\n\t// (for example replacing '12345' with 'abcd') it will generate 'delete', 'insert' order.\n\tif ( lastIndexNew - firstIndex > 0 ) {\n\t\tresult.push( {\n\t\t\tindex: firstIndex,\n\t\t\ttype: 'insert',\n\t\t\tvalues: newArray.slice( firstIndex, lastIndexNew )\n\t\t} );\n\t}\n\n\tif ( lastIndexOld - firstIndex > 0 ) {\n\t\tresult.push( {\n\t\t\tindex: firstIndex + ( lastIndexNew - firstIndex ), // Increase index of what was inserted.\n\t\t\ttype: 'delete',\n\t\t\thowMany: lastIndexOld - firstIndex\n\t\t} );\n\t}\n\n\treturn result;\n}\n\n// Generates array with set `equal|insert|delete` operations based on change indexes from `findChangeBoundaryIndexes` function.\n//\n// @param {Object} changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n// @param {Number} newLength Length of the new array on which `findChangeBoundaryIndexes` calculated change indexes.\n// @returns {Array.<String>} Array of changes compatible with {@link module:utils/diff~diff} format.\nfunction changeIndexesToAtomicChanges( changeIndexes, newLength ) {\n\tconst { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n\n\t// No changes.\n\tif ( firstIndex === -1 ) {\n\t\treturn Array( newLength ).fill( 'equal' );\n\t}\n\n\tlet result = [];\n\tif ( firstIndex > 0 ) {\n\t\tresult = result.concat( Array( firstIndex ).fill( 'equal' ) );\n\t}\n\n\tif ( lastIndexNew - firstIndex > 0 ) {\n\t\tresult = result.concat( Array( lastIndexNew - firstIndex ).fill( 'insert' ) );\n\t}\n\n\tif ( lastIndexOld - firstIndex > 0 ) {\n\t\tresult = result.concat( Array( lastIndexOld - firstIndex ).fill( 'delete' ) );\n\t}\n\n\tif ( lastIndexNew < newLength ) {\n\t\tresult = result.concat( Array( newLength - lastIndexNew ).fill( 'equal' ) );\n\t}\n\n\treturn result;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/getborderwidths\n */\n\n/**\n * Returns an object containing CSS border widths of a specified HTML element.\n *\n * @param {HTMLElement} element An element which has CSS borders.\n * @returns {Object} An object containing `top`, `left`, `right` and `bottom` properties\n * with numerical values of the `border-[top,left,right,bottom]-width` CSS styles.\n */\nexport default function getBorderWidths( element ) {\n\t// Call getComputedStyle on the window the element document belongs to.\n\tconst style = element.ownerDocument.defaultView.getComputedStyle( element );\n\n\treturn {\n\t\ttop: parseInt( style.borderTopWidth, 10 ),\n\t\tright: parseInt( style.borderRightWidth, 10 ),\n\t\tbottom: parseInt( style.borderBottomWidth, 10 ),\n\t\tleft: parseInt( style.borderLeftWidth, 10 )\n\t};\n}\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/model\n */\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport { extend } from 'lodash-es';\n\n/**\n * The base MVC model class.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Model {\n\t/**\n\t * Creates a new Model instance.\n\t *\n\t * @param {Object} [attributes] The model state attributes to be defined during the instance creation.\n\t * @param {Object} [properties] The (out of state) properties to be appended to the instance during creation.\n\t */\n\tconstructor( attributes, properties ) {\n\t\t// Extend this instance with the additional (out of state) properties.\n\t\tif ( properties ) {\n\t\t\textend( this, properties );\n\t\t}\n\n\t\t// Initialize the attributes.\n\t\tif ( attributes ) {\n\t\t\tthis.set( attributes );\n\t\t}\n\t}\n}\n\nmix( Model, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module enter/enterobserver\n */\n\nimport Observer from '@ckeditor/ckeditor5-engine/src/view/observer/observer';\nimport DomEventData from '@ckeditor/ckeditor5-engine/src/view/observer/domeventdata';\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\n/**\n * Enter observer introduces the {@link module:engine/view/document~Document#event:enter} event.\n *\n * @extends module:engine/view/observer~Observer\n */\nexport default class EnterObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tconst doc = this.document;\n\n\t\tdoc.on( 'keydown', ( evt, data ) => {\n\t\t\tif ( this.isEnabled && data.keyCode == keyCodes.enter ) {\n\t\t\t\t// Save the event object to check later if it was stopped or not.\n\t\t\t\tlet event;\n\t\t\t\tdoc.once( 'enter', evt => ( event = evt ), { priority: 'highest' } );\n\n\t\t\t\tdoc.fire( 'enter', new DomEventData( doc, data.domEvent, {\n\t\t\t\t\tisSoft: data.shiftKey\n\t\t\t\t} ) );\n\n\t\t\t\t// Stop `keydown` event if `enter` event was stopped.\n\t\t\t\t// https://github.com/ckeditor/ckeditor5/issues/753\n\t\t\t\tif ( event && event.stop.called ) {\n\t\t\t\t\tevt.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve() {}\n}\n\n/**\n * Event fired when the user presses the <kbd>Enter</kbd> key.\n *\n * Note: This event is fired by the {@link module:enter/enterobserver~EnterObserver observer}\n * (usually registered by the {@link module:enter/enter~Enter Enter feature} and\n * {@link module:enter/shiftenter~ShiftEnter ShiftEnter feature}).\n *\n * @event module:engine/view/document~Document#event:enter\n * @param {module:engine/view/observer/domeventdata~DomEventData} data\n * @param {Boolean} data.isSoft Whether it's a soft enter (<kbd>Shift</kbd>+<kbd>Enter</kbd>) or hard enter (<kbd>Enter</kbd>).\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/position\n */\n\nimport global from './global';\nimport Rect from './rect';\nimport getPositionedAncestor from './getpositionedancestor';\nimport getBorderWidths from './getborderwidths';\nimport { isFunction } from 'lodash-es';\n\n/**\n * Calculates the `position: absolute` coordinates of a given element so it can be positioned with respect to the\n * target in the visually most efficient way, taking various restrictions like viewport or limiter geometry\n * into consideration.\n *\n *\t\t// The element which is to be positioned.\n *\t\tconst element = document.body.querySelector( '#toolbar' );\n *\n *\t\t// A target to which the element is positioned relatively.\n *\t\tconst target = document.body.querySelector( '#container' );\n *\n *\t\t// Finding the optimal coordinates for the positioning.\n *\t\tconst { left, top, name } = getOptimalPosition( {\n *\t\t\telement: element,\n *\t\t\ttarget: target,\n *\n * \t\t\t// The algorithm will chose among these positions to meet the requirements such\n * \t\t\t// as \"limiter\" element or \"fitInViewport\", set below. The positions are considered\n * \t\t\t// in the order of the array.\n *\t\t\tpositions: [\n *\t\t\t\t//\n *\t\t\t \t//\t[ Target ]\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t|     Element     |\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\n *\t\t\t\ttargetRect => ( {\n *\t\t\t\t\ttop: targetRect.bottom,\n *\t\t\t\t\tleft: targetRect.left,\n *\t\t\t\t\tname: 'mySouthEastPosition'\n *\t\t\t\t} ),\n *\n *\t\t\t\t//\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t|     Element     |\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t[ Target ]\n *\t\t\t\t//\n *\t\t\t\t( targetRect, elementRect ) => ( {\n *\t\t\t\t\ttop: targetRect.top - elementRect.height,\n *\t\t\t\t\tleft: targetRect.left,\n *\t\t\t\t\tname: 'myNorthEastPosition'\n *\t\t\t\t} )\n *\t\t\t],\n *\n *\t\t\t// Find a position such guarantees the element remains within visible boundaries of <body>.\n *\t\t\tlimiter: document.body,\n *\n *\t\t\t// Find a position such guarantees the element remains within visible boundaries of the browser viewport.\n *\t\t\tfitInViewport: true\n *\t\t} );\n *\n *\t\t// The best position which fits into document.body and the viewport. May be useful\n *\t\t// to set proper class on the `element`.\n *\t\tconsole.log( name ); // -> \"myNorthEastPosition\"\n *\n *\t\t// Using the absolute coordinates which has been found to position the element\n *\t\t// as in the diagram depicting the \"myNorthEastPosition\" position.\n *\t\telement.style.top = top;\n *\t\telement.style.left = left;\n *\n * @param {module:utils/dom/position~Options} options Positioning options object.\n * @returns {module:utils/dom/position~Position}\n */\nexport function getOptimalPosition( { element, target, positions, limiter, fitInViewport } ) {\n\t// If the {@link module:utils/dom/position~Options#target} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-utils/issues/157\n\tif ( isFunction( target ) ) {\n\t\ttarget = target();\n\t}\n\n\t// If the {@link module:utils/dom/position~Options#limiter} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-ui/issues/260\n\tif ( isFunction( limiter ) ) {\n\t\tlimiter = limiter();\n\t}\n\n\tconst positionedElementAncestor = getPositionedAncestor( element.parentElement );\n\tconst elementRect = new Rect( element );\n\tconst targetRect = new Rect( target );\n\n\tlet bestPosition;\n\tlet name;\n\n\t// If there are no limits, just grab the very first position and be done with that drama.\n\tif ( !limiter && !fitInViewport ) {\n\t\t[ name, bestPosition ] = getPosition( positions[ 0 ], targetRect, elementRect );\n\t} else {\n\t\tconst limiterRect = limiter && new Rect( limiter ).getVisible();\n\t\tconst viewportRect = fitInViewport && new Rect( global.window );\n\n\t\t[ name, bestPosition ] =\n\t\t\tgetBestPosition( positions, targetRect, elementRect, limiterRect, viewportRect ) ||\n\t\t\t// If there's no best position found, i.e. when all intersections have no area because\n\t\t\t// rects have no width or height, then just use the first available position.\n\t\t\tgetPosition( positions[ 0 ], targetRect, elementRect );\n\t}\n\n\tlet { left, top } = getAbsoluteRectCoordinates( bestPosition );\n\n\tif ( positionedElementAncestor ) {\n\t\tconst ancestorPosition = getAbsoluteRectCoordinates( new Rect( positionedElementAncestor ) );\n\t\tconst ancestorBorderWidths = getBorderWidths( positionedElementAncestor );\n\n\t\t// (https://github.com/ckeditor/ckeditor5-ui-default/issues/126)\n\t\t// If there's some positioned ancestor of the panel, then its `Rect` must be taken into\n\t\t// consideration. `Rect` is always relative to the viewport while `position: absolute` works\n\t\t// with respect to that positioned ancestor.\n\t\tleft -= ancestorPosition.left;\n\t\ttop -= ancestorPosition.top;\n\n\t\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t\t// If there's some positioned ancestor of the panel, not only its position must be taken into\n\t\t// consideration (see above) but also its internal scrolls. Scroll have an impact here because `Rect`\n\t\t// is relative to the viewport (it doesn't care about scrolling), while `position: absolute`\n\t\t// must compensate that scrolling.\n\t\tleft += positionedElementAncestor.scrollLeft;\n\t\ttop += positionedElementAncestor.scrollTop;\n\n\t\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t\t// If there's some positioned ancestor of the panel, then its `Rect` includes its CSS `borderWidth`\n\t\t// while `position: absolute` positioning does not consider it.\n\t\t// E.g. `{ position: absolute, top: 0, left: 0 }` means upper left corner of the element,\n\t\t// not upper-left corner of its border.\n\t\tleft -= ancestorBorderWidths.left;\n\t\ttop -= ancestorBorderWidths.top;\n\t}\n\n\treturn { left, top, name };\n}\n\n// For given position function, returns a corresponding `Rect` instance.\n//\n// @private\n// @param {Function} position A function returning {@link module:utils/dom/position~Position}.\n// @param {utils/dom/rect~Rect} targetRect A rect of the target.\n// @param {utils/dom/rect~Rect} elementRect A rect of positioned element.\n// @returns {Array} An array containing position name and its Rect.\nfunction getPosition( position, targetRect, elementRect ) {\n\tconst { left, top, name } = position( targetRect, elementRect );\n\n\treturn [ name, elementRect.clone().moveTo( left, top ) ];\n}\n\n// For a given array of positioning functions, returns such that provides the best\n// fit of the `elementRect` into the `limiterRect` and `viewportRect`.\n//\n// @private\n// @param {module:utils/dom/position~Options#positions} positions Functions returning\n// {@link module:utils/dom/position~Position} to be checked, in the order of preference.\n// @param {utils/dom/rect~Rect} targetRect A rect of the {@link module:utils/dom/position~Options#target}.\n// @param {utils/dom/rect~Rect} elementRect A rect of positioned {@link module:utils/dom/position~Options#element}.\n// @param {utils/dom/rect~Rect} limiterRect A rect of the {@link module:utils/dom/position~Options#limiter}.\n// @param {utils/dom/rect~Rect} viewportRect A rect of the viewport.\n// @returns {Array} An array containing the name of the position and it's rect.\nfunction getBestPosition( positions, targetRect, elementRect, limiterRect, viewportRect ) {\n\tlet maxLimiterIntersectArea = 0;\n\tlet maxViewportIntersectArea = 0;\n\tlet bestPositionRect;\n\tlet bestPositionName;\n\n\t// This is when element is fully visible.\n\tconst elementRectArea = elementRect.getArea();\n\n\tpositions.some( position => {\n\t\tconst [ positionName, positionRect ] = getPosition( position, targetRect, elementRect );\n\t\tlet limiterIntersectArea;\n\t\tlet viewportIntersectArea;\n\n\t\tif ( limiterRect ) {\n\t\t\tif ( viewportRect ) {\n\t\t\t\t// Consider only the part of the limiter which is visible in the viewport. So the limiter is getting limited.\n\t\t\t\tconst limiterViewportIntersectRect = limiterRect.getIntersection( viewportRect );\n\n\t\t\t\tif ( limiterViewportIntersectRect ) {\n\t\t\t\t\t// If the limiter is within the viewport, then check the intersection between that part of the\n\t\t\t\t\t// limiter and actual position.\n\t\t\t\t\tlimiterIntersectArea = limiterViewportIntersectRect.getIntersectionArea( positionRect );\n\t\t\t\t} else {\n\t\t\t\t\tlimiterIntersectArea = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlimiterIntersectArea = limiterRect.getIntersectionArea( positionRect );\n\t\t\t}\n\t\t}\n\n\t\tif ( viewportRect ) {\n\t\t\tviewportIntersectArea = viewportRect.getIntersectionArea( positionRect );\n\t\t}\n\n\t\t// The only criterion: intersection with the viewport.\n\t\tif ( viewportRect && !limiterRect ) {\n\t\t\tif ( viewportIntersectArea > maxViewportIntersectArea ) {\n\t\t\t\tsetBestPosition();\n\t\t\t}\n\t\t}\n\t\t// The only criterion: intersection with the limiter.\n\t\telse if ( !viewportRect && limiterRect ) {\n\t\t\tif ( limiterIntersectArea > maxLimiterIntersectArea ) {\n\t\t\t\tsetBestPosition();\n\t\t\t}\n\t\t}\n\t\t// Two criteria: intersection with the viewport and the limiter visible in the viewport.\n\t\telse {\n\t\t\tif ( viewportIntersectArea > maxViewportIntersectArea && limiterIntersectArea >= maxLimiterIntersectArea ) {\n\t\t\t\tsetBestPosition();\n\t\t\t} else if ( viewportIntersectArea >= maxViewportIntersectArea && limiterIntersectArea > maxLimiterIntersectArea ) {\n\t\t\t\tsetBestPosition();\n\t\t\t}\n\t\t}\n\n\t\tfunction setBestPosition() {\n\t\t\tmaxViewportIntersectArea = viewportIntersectArea;\n\t\t\tmaxLimiterIntersectArea = limiterIntersectArea;\n\t\t\tbestPositionRect = positionRect;\n\t\t\tbestPositionName = positionName;\n\t\t}\n\n\t\t// If a such position is found that element is fully container by the limiter then, obviously,\n\t\t// there will be no better one, so finishing.\n\t\treturn limiterIntersectArea === elementRectArea;\n\t} );\n\n\treturn bestPositionRect ? [ bestPositionName, bestPositionRect ] : null;\n}\n\n// DOMRect (also Rect) works in a scroll–independent geometry but `position: absolute` doesn't.\n// This function converts Rect to `position: absolute` coordinates.\n//\n// @private\n// @param {utils/dom/rect~Rect} rect A rect to be converted.\n// @returns {Object} Object containing `left` and `top` properties, in absolute coordinates.\nfunction getAbsoluteRectCoordinates( { left, top } ) {\n\tconst { scrollX, scrollY } = global.window;\n\n\treturn {\n\t\tleft: left + scrollX,\n\t\ttop: top + scrollY,\n\t};\n}\n\n/**\n * The `getOptimalPosition` helper options.\n *\n * @interface module:utils/dom/position~Options\n */\n\n/**\n * Element that is to be positioned.\n *\n * @member {HTMLElement} #element\n */\n\n/**\n * Target with respect to which the `element` is to be positioned.\n *\n * @member {HTMLElement|Range|ClientRect|Rect|Function} #target\n */\n\n/**\n * An array of functions which return {@link module:utils/dom/position~Position} relative\n * to the `target`, in the order of preference.\n *\n * @member {Array.<Function>} #positions\n */\n\n/**\n * When set, the algorithm will chose position which fits the most in the\n * limiter's bounding rect.\n *\n * @member {HTMLElement|Range|ClientRect|Rect|Function} #limiter\n */\n\n/**\n * When set, the algorithm will chose such a position which fits `element`\n * the most inside visible viewport.\n *\n * @member {Boolean} #fitInViewport\n */\n\n/**\n * An object describing a position in `position: absolute` coordinate\n * system, along with position name.\n *\n * @typedef {Object} module:utils/dom/position~Position\n *\n * @property {Number} top Top position offset.\n * @property {Number} left Left position offset.\n * @property {String} name Name of the position.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/getpositionedancestor\n */\n\nimport global from './global';\n\n/**\n * For a given element, returns the nearest ancestor element which CSS position is not \"static\".\n *\n * @param {HTMLElement} element The native DOM element to be checked.\n * @returns {HTMLElement|null}\n */\nexport default function getPositionedAncestor( element ) {\n\twhile ( element && element.tagName.toLowerCase() != 'html' ) {\n\t\tif ( global.window.getComputedStyle( element ).position != 'static' ) {\n\t\t\treturn element;\n\t\t}\n\n\t\telement = element.parentElement;\n\t}\n\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n// WARNING: The URLs below should not be used for any other purpose than Easy Image plugin development.\n// Images uploaded using the testing token service may be deleted automatically at any moment.\n// If you would like to try the Easy Image service, please sign up for a free trial (https://ckeditor.com/ckeditor-cloud-services/).\n// Images uploaded during the free trial will not be deleted for the whole trial period and additionally the trial service can be converted\n// into a subscription at any moment, allowing you to preserve all uploaded images.\n\nexport const TOKEN_URL = 'https://33333.cke-cs.com/token/dev/ijrDsqFix838Gh3wGO3F77FSW94BwcLXprJ4APSp3XQ26xsUHTi0jcb1hoBt';\n\nexport const UPLOAD_URL = 'https://33333.cke-cs.com/easyimage/upload/';\n\nexport const CS_CONFIG = {\n\ttokenUrl: TOKEN_URL,\n\tuploadUrl: UPLOAD_URL\n};\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/tooltip/tooltipview\n */\n\nimport View from '../view';\n\nimport '../../theme/components/tooltip/tooltip.css';\n\n/**\n * The tooltip view class.\n *\n * @extends module:ui/view~View\n */\nexport default class TooltipView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * The text of the tooltip visible to the user.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #text\n\t\t */\n\t\tthis.set( 'text', '' );\n\n\t\t/**\n\t\t * The position of the tooltip (south or north).\n\t\t *\n\t\t *\t\t+-----------+\n\t\t *\t\t|   north   |\n\t\t *\t\t+-----------+\n\t\t *\t\t      V\n\t\t *\t\t  [element]\n\t\t *\n\t\t *\t\t  [element]\n\t\t *\t\t      ^\n\t\t *\t\t+-----------+\n\t\t *\t\t|   south   |\n\t\t *\t\t+-----------+\n\t\t *\n\t\t * @observable\n\t\t * @default 's'\n\t\t * @member {'s'|'n'} #position\n\t\t */\n\t\tthis.set( 'position', 's' );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'span',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-tooltip',\n\t\t\t\t\tbind.to( 'position', position => 'ck-tooltip_' + position ),\n\t\t\t\t\tbind.if( 'text', 'ck-hidden', value => !value.trim() )\n\t\t\t\t]\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'span',\n\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: [\n\t\t\t\t\t\t\t'ck',\n\t\t\t\t\t\t\t'ck-tooltip__text'\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: bind.to( 'text' ),\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/placeholder\n */\n\nimport '../../theme/placeholder.css';\n\n// Each document stores information about its placeholder elements and check functions.\nconst documentPlaceholders = new WeakMap();\n\n/**\n * A helper that enables a placeholder on the provided view element (also updates its visibility).\n * The placeholder is a CSS pseudo–element (with a text content) attached to the element.\n *\n * To change the placeholder text, simply call this method again with new options.\n *\n * To disable the placeholder, use {@link module:engine/view/placeholder~disablePlaceholder `disablePlaceholder()`} helper.\n *\n * @param {Object} [options] Configuration options of the placeholder.\n * @param {module:engine/view/view~View} options.view Editing view instance.\n * @param {module:engine/view/element~Element} options.element Element that will gain a placeholder.\n * See `options.isDirectHost` to learn more.\n * @param {String} options.text Placeholder text.\n * @param {Boolean} [options.isDirectHost=true] If set `false`, the placeholder will not be enabled directly\n * in the passed `element` but in one of its children (selected automatically, i.e. a first empty child element).\n * Useful when attaching placeholders to elements that can host other elements (not just text), for instance,\n * editable root elements.\n */\nexport function enablePlaceholder( options ) {\n\tconst { view, element, text, isDirectHost = true } = options;\n\tconst doc = view.document;\n\n\t// Use a single a single post fixer per—document to update all placeholders.\n\tif ( !documentPlaceholders.has( doc ) ) {\n\t\tdocumentPlaceholders.set( doc, new Map() );\n\n\t\t// If a post-fixer callback makes a change, it should return `true` so other post–fixers\n\t\t// can re–evaluate the document again.\n\t\tdoc.registerPostFixer( writer => updateDocumentPlaceholders( doc, writer ) );\n\t}\n\n\t// Store information about the element placeholder under its document.\n\tdocumentPlaceholders.get( doc ).set( element, {\n\t\ttext,\n\t\tisDirectHost\n\t} );\n\n\t// Update the placeholders right away.\n\tview.change( writer => updateDocumentPlaceholders( doc, writer ) );\n}\n\n/**\n * Disables the placeholder functionality from a given element.\n *\n * See {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`} to learn more.\n *\n * @param {module:engine/view/view~View} view\n * @param {module:engine/view/element~Element} element\n */\nexport function disablePlaceholder( view, element ) {\n\tconst doc = element.document;\n\n\tview.change( writer => {\n\t\tif ( !documentPlaceholders.has( doc ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst placeholders = documentPlaceholders.get( doc );\n\t\tconst config = placeholders.get( element );\n\n\t\twriter.removeAttribute( 'data-placeholder', config.hostElement );\n\t\thidePlaceholder( writer, config.hostElement );\n\n\t\tplaceholders.delete( element );\n\t} );\n}\n\n/**\n * Shows a placeholder in the provided element by changing related attributes and CSS classes.\n *\n * **Note**: This helper will not update the placeholder visibility nor manage the\n * it in any way in the future. What it does is a one–time state change of an element. Use\n * {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`} and\n * {@link module:engine/view/placeholder~disablePlaceholder `disablePlaceholder()`} for full\n * placeholder functionality.\n *\n * **Note**: This helper will blindly show the placeholder directly in the root editable element if\n * one is passed, which could result in a visual clash if the editable element has some children\n * (for instance, an empty paragraph). Use {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`}\n * in that case or make sure the correct element is passed to the helper.\n *\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @param {module:engine/view/element~Element} element\n * @returns {Boolean} `true`, if any changes were made to the `element`.\n */\nexport function showPlaceholder( writer, element ) {\n\tif ( !element.hasClass( 'ck-placeholder' ) ) {\n\t\twriter.addClass( 'ck-placeholder', element );\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Hides a placeholder in the element by changing related attributes and CSS classes.\n *\n * **Note**: This helper will not update the placeholder visibility nor manage the\n * it in any way in the future. What it does is a one–time state change of an element. Use\n * {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`} and\n * {@link module:engine/view/placeholder~disablePlaceholder `disablePlaceholder()`} for full\n * placeholder functionality.\n *\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @param {module:engine/view/element~Element} element\n * @returns {Boolean} `true`, if any changes were made to the `element`.\n */\nexport function hidePlaceholder( writer, element ) {\n\tif ( element.hasClass( 'ck-placeholder' ) ) {\n\t\twriter.removeClass( 'ck-placeholder', element );\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n/**\n * Checks if a placeholder should be displayed in the element.\n *\n * **Note**: This helper will blindly check the possibility of showing a placeholder directly in the\n * root editable element if one is passed, which may not be the expected result. If an element can\n * host other elements (not just text), most likely one of its children should be checked instead\n * because it will be the final host for the placeholder. Use\n * {@link module:engine/view/placeholder~enablePlaceholder `enablePlaceholder()`} in that case or make\n * sure the correct element is passed to the helper.\n *\n * @param {module:engine/view/element~Element} element\n * @returns {Boolean}\n */\nexport function needsPlaceholder( element ) {\n\tconst doc = element.document;\n\n\t// The element was removed from document.\n\tif ( !doc ) {\n\t\treturn false;\n\t}\n\n\t// The element is empty only as long as it contains nothing but uiElements.\n\tconst isEmptyish = !Array.from( element.getChildren() )\n\t\t.some( element => !element.is( 'uiElement' ) );\n\n\t// If the element is empty and the document is blurred.\n\tif ( !doc.isFocused && isEmptyish ) {\n\t\treturn true;\n\t}\n\n\tconst viewSelection = doc.selection;\n\tconst selectionAnchor = viewSelection.anchor;\n\n\t// If document is focused and the element is empty but the selection is not anchored inside it.\n\tif ( isEmptyish && selectionAnchor && selectionAnchor.parent !== element ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// Updates all placeholders associated with a document in a post–fixer callback.\n//\n// @private\n// @param { module:engine/view/document~Document} doc\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {Boolean} True if any changes were made to the view document.\nfunction updateDocumentPlaceholders( doc, writer ) {\n\tconst placeholders = documentPlaceholders.get( doc );\n\tlet wasViewModified = false;\n\n\tfor ( const [ element, config ] of placeholders ) {\n\t\tif ( updatePlaceholder( writer, element, config ) ) {\n\t\t\twasViewModified = true;\n\t\t}\n\t}\n\n\treturn wasViewModified;\n}\n\n// Updates a single placeholder in a post–fixer callback.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {module:engine/view/element~Element} element\n// @param {Object} config Configuration of the placeholder\n// @param {String} config.text\n// @param {Boolean} config.isDirectHost\n// @returns {Boolean} True if any changes were made to the view document.\nfunction updatePlaceholder( writer, element, config ) {\n\tconst { text, isDirectHost } = config;\n\tconst hostElement = isDirectHost ? element : getChildPlaceholderHostSubstitute( element );\n\tlet wasViewModified = false;\n\n\t// When not a direct host, it could happen that there is no child element\n\t// capable of displaying a placeholder.\n\tif ( !hostElement ) {\n\t\treturn false;\n\t}\n\n\t// Cache the host element. It will be necessary for disablePlaceholder() to know\n\t// which element should have class and attribute removed because, depending on\n\t// the config.isDirectHost value, it could be the element or one of its descendants.\n\tconfig.hostElement = hostElement;\n\n\t// This may be necessary when updating the placeholder text to something else.\n\tif ( hostElement.getAttribute( 'data-placeholder' ) !== text ) {\n\t\twriter.setAttribute( 'data-placeholder', text, hostElement );\n\t\twasViewModified = true;\n\t}\n\n\tif ( needsPlaceholder( hostElement ) ) {\n\t\tif ( showPlaceholder( writer, hostElement ) ) {\n\t\t\twasViewModified = true;\n\t\t}\n\t} else if ( hidePlaceholder( writer, hostElement ) ) {\n\t\twasViewModified = true;\n\t}\n\n\treturn wasViewModified;\n}\n\n// Gets a child element capable of displaying a placeholder if a parent element can host more\n// than just text (for instance, when it is a root editable element). The child element\n// can then be used in other placeholder helpers as a substitute of its parent.\n//\n// @private\n// @param {module:engine/view/element~Element} parent\n// @returns {module:engine/view/element~Element|null}\nfunction getChildPlaceholderHostSubstitute( parent ) {\n\tif ( parent.childCount === 1 ) {\n\t\tconst firstChild = parent.getChild( 0 );\n\n\t\tif ( firstChild.is( 'element' ) && !firstChild.is( 'uiElement' ) ) {\n\t\t\treturn firstChild;\n\t\t}\n\t}\n\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module undo/undoui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport undoIcon from '../theme/icons/undo.svg';\nimport redoIcon from '../theme/icons/redo.svg';\n/**\n * The undo UI feature. It introduces the `'undo'` and `'redo'` buttons to the editor.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class UndoUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const t = editor.t;\n        this._addButton('undo', t('Undo'), 'CTRL+Z', undoIcon);\n        this._addButton('redo', t('Redo'), 'CTRL+Y', redoIcon);\n    }\n    /**\n\t * Creates a button for the specified command.\n\t *\n\t * @private\n\t * @param {String} name Command name.\n\t * @param {String} label Button label.\n\t * @param {String} keystroke Command keystroke.\n\t * @param {String} Icon Source of the icon.\n\t */\n    _addButton(name, label, keystroke, Icon) {\n        const editor = this.editor;\n        editor.ui.componentFactory.add(name, locale => {\n            const command = editor.commands.get(name);\n            const view = new ButtonView(locale);\n            view.set({\n                label,\n                icon: Icon,\n                keystroke,\n                tooltip: true\n            });\n            view.bind('isEnabled').to(command, 'isEnabled');\n            this.listenTo(view, 'execute', () => editor.execute(name));\n            return view;\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module undo/undo\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport UndoEditing from './undoediting';\nimport UndoUI from './undoui';\n\n/**\n * The undo feature.\n *\n * This is a \"glue\" plugin which loads the {@link module:undo/undoediting~UndoEditing undo editing feature}\n * and {@link module:undo/undoui~UndoUI undo UI feature}.\n *\n * Below is the explanation of the undo mechanism working together with {@link module:engine/model/history~History History}:\n *\n * Whenever a {@link module:engine/model/operation/operation~Operation operation} is applied to the\n * {@link module:engine/model/document~Document document}, it is saved to `History` as is.\n * The {@link module:engine/model/batch~Batch batch} that owns that operation is also saved, in\n * {@link module:undo/undocommand~UndoCommand}, together with the selection that was present in the document before the\n * operation was applied. A batch is saved instead of the operation because changes are undone batch-by-batch, not operation-by-operation\n * and a batch is seen as one undo step.\n *\n * After some changes happen to the document, the `History` and `UndoCommand` stack can be represented as follows:\n *\n *\t\t    History                            Undo stack\n *\t\t==============             ==================================\n *\t\t[operation A1]                         [batch A]\n *\t\t[operation B1]                         [batch B]\n *\t\t[operation B2]                         [batch C]\n *\t\t[operation C1]\n *\t\t[operation C2]\n *\t\t[operation B3]\n *\t\t[operation C3]\n *\n * Where operations starting with the same letter are from same batch.\n *\n * Undoing a batch means that a set of operations which will reverse the effects of that batch needs to be generated.\n * For example, if a batch added several letters, undoing the batch should remove them. It is important to apply undoing\n * operations in the reversed order, so if a batch has operation `X`, `Y`, `Z`, reversed operations `Zr`, `Yr` and `Xr`\n * need to be applied. Otherwise reversed operation `Xr` would operate on a wrong document state, because operation `X`\n * does not know that operations `Y` and `Z` happened.\n *\n * After operations from an undone batch got {@link module:engine/model/operation/operation~Operation#getReversed reversed},\n * one needs to make sure if they are ready to be applied. In the scenario above, operation `C3` is the last operation and `C3r`\n * bases on up-to-date document state, so it can be applied to the document.\n *\n *\t\t     History                             Undo stack\n *\t\t=================             ==================================\n *\t\t[ operation A1  ]                      [  batch A  ]\n *\t\t[ operation B1  ]                      [  batch B  ]\n *\t\t[ operation B2  ]             [   processing undoing batch C   ]\n *\t\t[ operation C1  ]\n *\t\t[ operation C2  ]\n *\t\t[ operation B3  ]\n *\t\t[ operation C3  ]\n *\t\t[ operation C3r ]\n *\n * Next is operation `C2`, reversed to `C2r`. `C2r` bases on `C2`, so it bases on the wrong document state. It needs to be\n * transformed by operations from history that happened after it, so it \"knows\" about them. Let us assume that `C2' = C2r * B3 * C3 * C3r`,\n * where `*` means \"transformed by\". Rest of operations from that batch are processed in the same fashion.\n *\n *\t\t     History                             Undo stack                                      Redo stack\n *\t\t=================             ==================================             ==================================\n *\t\t[ operation A1  ]                      [  batch A  ]                                    [ batch Cr ]\n *\t\t[ operation B1  ]                      [  batch B  ]\n *\t\t[ operation B2  ]\n *\t\t[ operation C1  ]\n *\t\t[ operation C2  ]\n *\t\t[ operation B3  ]\n *\t\t[ operation C3  ]\n *\t\t[ operation C3r ]\n *\t\t[ operation C2' ]\n *\t\t[ operation C1' ]\n *\n * Selective undo works on the same basis, however, instead of undoing the last batch in the undo stack, any batch can be undone.\n * The same algorithm applies: operations from a batch (i.e. `A1`) are reversed and then transformed by operations stored in history.\n *\n * Redo also is very similar to undo. It has its own stack that is filled with undoing (reversed batches). Operations from\n * batch that is re-done are reversed-back, transformed in proper order and applied to the document.\n *\n *\t\t     History                             Undo stack                                      Redo stack\n *\t\t=================             ==================================             ==================================\n *\t\t[ operation A1  ]                      [  batch A  ]\n *\t\t[ operation B1  ]                      [  batch B  ]\n *\t\t[ operation B2  ]                      [ batch Crr ]\n *\t\t[ operation C1  ]\n *\t\t[ operation C2  ]\n *\t\t[ operation B3  ]\n *\t\t[ operation C3  ]\n *\t\t[ operation C3r ]\n *\t\t[ operation C2' ]\n *\t\t[ operation C1' ]\n *\t\t[ operation C1'r]\n *\t\t[ operation C2'r]\n *\t\t[ operation C3rr]\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Undo extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ UndoEditing, UndoUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Undo';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/label/labelview\n */\n\nimport View from '../view';\n\nimport '../../theme/components/label/label.css';\n\n/**\n * The label view class.\n *\n * @extends module:ui/view~View\n */\nexport default class LabelView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * The text of the label.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #text\n\t\t */\n\t\tthis.set( 'text' );\n\n\t\t/**\n\t\t * The `for` attribute of the label (i.e. to pair with an `<input>` element).\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #for\n\t\t */\n\t\tthis.set( 'for' );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'label',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-label'\n\t\t\t\t],\n\t\t\t\tfor: bind.to( 'for' )\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttext: bind.to( 'text' )\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/image/imageloadobserver\n */\n\nimport Observer from '@ckeditor/ckeditor5-engine/src/view/observer/observer';\n\n/**\n * Observes all new images added to the {@link module:engine/view/document~Document},\n * fires {@link module:engine/view/document~Document#event:imageLoaded} and\n * {@link module:engine/view/document~Document#event:layoutChanged} event every time when the new image\n * has been loaded.\n *\n * **Note:** This event is not fired for images that has been added to the document and rendered as `complete` (already loaded).\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class ImageLoadObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * List of img DOM elements that are observed by this observer.\n\t\t *\n\t\t * @private\n\t\t * @type {Set.<HTMLElement>}\n\t\t */\n\t\tthis._observedElements = new Set();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domRoot, name ) {\n\t\tconst viewRoot = this.document.getRoot( name );\n\n\t\t// When there is a change in one of the view element\n\t\t// we need to check if there are any new `<img/>` elements to observe.\n\t\tviewRoot.on( 'change:children', ( evt, node ) => {\n\t\t\t// Wait for the render to be sure that `<img/>` elements are rendered in the DOM root.\n\t\t\tthis.view.once( 'render', () => this._updateObservedElements( domRoot, node ) );\n\t\t} );\n\t}\n\n\t/**\n\t * Updates the list of observed `<img/>` elements.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot DOM root element.\n\t * @param {module:engine/view/element~Element} viewNode View element where children have changed.\n\t */\n\t_updateObservedElements( domRoot, viewNode ) {\n\t\tif ( !viewNode.is( 'element' ) || viewNode.is( 'attributeElement' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domNode = this.view.domConverter.mapViewToDom( viewNode );\n\n\t\t// If there is no `domNode` it means that it was removed from the DOM in the meanwhile.\n\t\tif ( !domNode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const domElement of domNode.querySelectorAll( 'img' ) ) {\n\t\t\tif ( !this._observedElements.has( domElement ) ) {\n\t\t\t\tthis.listenTo( domElement, 'load', ( evt, domEvt ) => this._fireEvents( domEvt ) );\n\t\t\t\tthis._observedElements.add( domElement );\n\t\t\t}\n\t\t}\n\n\t\t// Clean up the list of observed elements from elements that has been removed from the root.\n\t\tfor ( const domElement of this._observedElements ) {\n\t\t\tif ( !domRoot.contains( domElement ) ) {\n\t\t\t\tthis.stopListening( domElement );\n\t\t\t\tthis._observedElements.delete( domElement );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Fires {@link module:engine/view/document~Document#event:layoutChanged} and\n\t * {@link module:engine/view/document~Document#event:imageLoaded}\n\t * if observer {@link #isEnabled is enabled}.\n\t *\n\t * @protected\n\t * @param {Event} domEvent The DOM event.\n\t */\n\t_fireEvents( domEvent ) {\n\t\tif ( this.isEnabled ) {\n\t\t\tthis.document.fire( 'layoutChanged' );\n\t\t\tthis.document.fire( 'imageLoaded', domEvent );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis._observedElements.clear();\n\t\tsuper.destroy();\n\t}\n}\n\n/**\n * Fired when an <img/> DOM element has been loaded in the DOM root.\n *\n * Introduced by {@link module:image/image/imageloadobserver~ImageLoadObserver}.\n *\n * @see module:image/image/imageloadobserver~ImageLoadObserver\n * @event module:engine/view/document~Document#event:imageLoaded\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/image/converters\n */\n\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * Returns a function that converts the image view representation:\n *\n *\t\t<figure class=\"image\"><img src=\"...\" alt=\"...\"></img></figure>\n *\n * to the model representation:\n *\n *\t\t<image src=\"...\" alt=\"...\"></image>\n *\n * The entire content of the `<figure>` element except the first `<img>` is being converted as children\n * of the `<image>` model element.\n *\n * @returns {Function}\n */\nexport function viewFigureToModel() {\n\treturn dispatcher => {\n\t\tdispatcher.on( 'element:figure', converter );\n\t};\n\n\tfunction converter( evt, data, conversionApi ) {\n\t\t// Do not convert if this is not an \"image figure\".\n\t\tif ( !conversionApi.consumable.test( data.viewItem, { name: true, classes: 'image' } ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find an image element inside the figure element.\n\t\tconst viewImage = Array.from( data.viewItem.getChildren() ).find( viewChild => viewChild.is( 'img' ) );\n\n\t\t// Do not convert if image element is absent, is missing src attribute or was already converted.\n\t\tif ( !viewImage || !viewImage.hasAttribute( 'src' ) || !conversionApi.consumable.test( viewImage, { name: true } ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Convert view image to model image.\n\t\tconst conversionResult = conversionApi.convertItem( viewImage, data.modelCursor );\n\n\t\t// Get image element from conversion result.\n\t\tconst modelImage = first( conversionResult.modelRange.getItems() );\n\n\t\t// When image wasn't successfully converted then finish conversion.\n\t\tif ( !modelImage ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Convert rest of the figure element's children as an image children.\n\t\tconversionApi.convertChildren( data.viewItem, conversionApi.writer.createPositionAt( modelImage, 0 ) );\n\n\t\t// Set image range as conversion result.\n\t\tdata.modelRange = conversionResult.modelRange;\n\n\t\t// Continue conversion where image conversion ends.\n\t\tdata.modelCursor = conversionResult.modelCursor;\n\t}\n}\n\n/**\n * Converter used to convert the `srcset` model image attribute to the `srcset`, `sizes` and `width` attributes in the view.\n *\n * @returns {Function}\n */\nexport function srcsetAttributeConverter() {\n\treturn dispatcher => {\n\t\tdispatcher.on( 'attribute:srcset:image', converter );\n\t};\n\n\tfunction converter( evt, data, conversionApi ) {\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst writer = conversionApi.writer;\n\t\tconst figure = conversionApi.mapper.toViewElement( data.item );\n\t\tconst img = figure.getChild( 0 );\n\n\t\tif ( data.attributeNewValue === null ) {\n\t\t\tconst srcset = data.attributeOldValue;\n\n\t\t\tif ( srcset.data ) {\n\t\t\t\twriter.removeAttribute( 'srcset', img );\n\t\t\t\twriter.removeAttribute( 'sizes', img );\n\n\t\t\t\tif ( srcset.width ) {\n\t\t\t\t\twriter.removeAttribute( 'width', img );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst srcset = data.attributeNewValue;\n\n\t\t\tif ( srcset.data ) {\n\t\t\t\twriter.setAttribute( 'srcset', srcset.data, img );\n\t\t\t\t// Always outputting `100vw`. See https://github.com/ckeditor/ckeditor5-image/issues/2.\n\t\t\t\twriter.setAttribute( 'sizes', '100vw', img );\n\n\t\t\t\tif ( srcset.width ) {\n\t\t\t\t\twriter.setAttribute( 'width', srcset.width, img );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function modelToViewAttributeConverter( attributeKey ) {\n\treturn dispatcher => {\n\t\tdispatcher.on( `attribute:${ attributeKey }:image`, converter );\n\t};\n\n\tfunction converter( evt, data, conversionApi ) {\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst figure = conversionApi.mapper.toViewElement( data.item );\n\t\tconst img = figure.getChild( 0 );\n\n\t\tif ( data.attributeNewValue !== null ) {\n\t\t\tviewWriter.setAttribute( data.attributeKey, data.attributeNewValue, img );\n\t\t} else {\n\t\t\tviewWriter.removeAttribute( data.attributeKey, img );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { insertImage, isImageAllowed } from './utils';\n\n/**\n * @module image/image/imageinsertcommand\n */\n\n/**\n * Insert image command.\n *\n * The command is registered by the {@link module:image/image/imageediting~ImageEditing} plugin as `'imageInsert'`.\n *\n * In order to insert an image at the current selection position\n * (according to the {@link module:widget/utils~findOptimalInsertionPosition} algorithm),\n * execute the command and specify the image source:\n *\n *\t\teditor.execute( 'imageInsert', { source: 'http://url.to.the/image' } );\n *\n * It is also possible to insert multiple images at once:\n *\n *\t\teditor.execute( 'imageInsert', {\n *\t\t\tsource:  [\n *\t\t\t\t'path/to/image.jpg',\n *\t\t\t\t'path/to/other-image.jpg'\n *\t\t\t]\n *\t\t} );\n *\n * @extends module:core/command~Command\n */\nexport default class ImageInsertCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tthis.isEnabled = isImageAllowed( this.editor.model );\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * @fires execute\n\t * @param {Object} options Options for the executed command.\n\t * @param {String|Array.<String>} options.source The image source or an array of image sources to insert.\n\t */\n\texecute( options ) {\n\t\tconst model = this.editor.model;\n\n\t\tmodel.change( writer => {\n\t\t\tconst sources = Array.isArray( options.source ) ? options.source : [ options.source ];\n\n\t\t\tfor ( const src of sources ) {\n\t\t\t\tinsertImage( writer, model, { src } );\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/image/imageediting\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ImageLoadObserver from './imageloadobserver';\nimport {\n    viewFigureToModel,\n    modelToViewAttributeConverter,\n    srcsetAttributeConverter\n} from './converters';\nimport { toImageWidget } from './utils';\nimport ImageInsertCommand from './imageinsertcommand';\n/**\n * The image engine plugin.\n *\n * It registers:\n *\n * * `<image>` as a block element in the document schema, and allows `alt`, `src` and `srcset` attributes.\n * * converters for editing and data pipelines.\n * * `'imageInsert'` command.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageEditing extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const schema = editor.model.schema;\n        const t = editor.t;\n        const conversion = editor.conversion;\n        // See https://github.com/ckeditor/ckeditor5-image/issues/142.\n        editor.editing.view.addObserver(ImageLoadObserver);\n        // Configure schema.\n        schema.register('image', {\n            isObject: true,\n            isBlock: true,\n            allowWhere: '$block',\n            allowAttributes: [\n                'alt',\n                'src',\n                'srcset'\n            ]\n        });\n        conversion.for('dataDowncast').elementToElement({\n            model: 'image',\n            view: (modelElement, viewWriter) => createImageViewElement(viewWriter)\n        });\n        conversion.for('editingDowncast').elementToElement({\n            model: 'image',\n            view: (modelElement, viewWriter) => toImageWidget(createImageViewElement(viewWriter), viewWriter, t('image widget'))\n        });\n        conversion.for('downcast').add(modelToViewAttributeConverter('src')).add(modelToViewAttributeConverter('alt')).add(srcsetAttributeConverter());\n        conversion.for('upcast').elementToElement({\n            view: {\n                name: 'img',\n                attributes: { src: true }\n            },\n            model: (viewImage, modelWriter) => modelWriter.createElement('image', { src: viewImage.getAttribute('src') })\n        }).attributeToAttribute({\n            view: {\n                name: 'img',\n                key: 'alt'\n            },\n            model: 'alt'\n        }).attributeToAttribute({\n            view: {\n                name: 'img',\n                key: 'srcset'\n            },\n            model: {\n                key: 'srcset',\n                value: viewImage => {\n                    const value = { data: viewImage.getAttribute('srcset') };\n                    if (viewImage.hasAttribute('width')) {\n                        value.width = viewImage.getAttribute('width');\n                    }\n                    return value;\n                }\n            }\n        }).add(viewFigureToModel());\n        // Register imageUpload command.\n        editor.commands.add('imageInsert', new ImageInsertCommand(editor));\n    }\n}\n// Creates a view element representing the image.\n//\n//\t\t<figure class=\"image\"><img></img></figure>\n//\n// Note that `alt` and `src` attributes are converted separately, so they are not included.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {module:engine/view/containerelement~ContainerElement}\nexport function createImageViewElement(writer) {\n    const emptyElement = writer.createEmptyElement('img');\n    const figure = writer.createContainerElement('figure', { class: 'image' });\n    writer.insert(writer.createPositionAt(figure, 0), emptyElement);\n    return figure;\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagetextalternative/imagetextalternativecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { isImage } from '../image/utils';\n\n/**\n * The image text alternative command. It is used to change the `alt` attribute of `<image>` elements.\n *\n * @extends module:core/command~Command\n */\nexport default class ImageTextAlternativeCommand extends Command {\n\t/**\n\t * The command value: `false` if there is no `alt` attribute, otherwise the value of the `alt` attribute.\n\t *\n\t * @readonly\n\t * @observable\n\t * @member {String|Boolean} #value\n\t */\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst element = this.editor.model.document.selection.getSelectedElement();\n\n\t\tthis.isEnabled = isImage( element );\n\n\t\tif ( isImage( element ) && element.hasAttribute( 'alt' ) ) {\n\t\t\tthis.value = element.getAttribute( 'alt' );\n\t\t} else {\n\t\t\tthis.value = false;\n\t\t}\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * @fires execute\n\t * @param {Object} options\n\t * @param {String} options.newValue The new value of the `alt` attribute to set.\n\t */\n\texecute( options ) {\n\t\tconst model = this.editor.model;\n\t\tconst imageElement = model.document.selection.getSelectedElement();\n\n\t\tmodel.change( writer => {\n\t\t\twriter.setAttribute( 'alt', options.newValue, imageElement );\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagetextalternative/imagetextalternativeediting\n */\n\nimport ImageTextAlternativeCommand from './imagetextalternativecommand';\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\n/**\n * The image text alternative editing plugin.\n *\n * Registers the `'imageTextAlternative'` command.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageTextAlternativeEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tthis.editor.commands.add( 'imageTextAlternative', new ImageTextAlternativeCommand( this.editor ) );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagetextalternative/ui/textalternativeformview\n */\nimport View from '@ckeditor/ckeditor5-ui/src/view';\nimport ViewCollection from '@ckeditor/ckeditor5-ui/src/viewcollection';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport LabeledInputView from '@ckeditor/ckeditor5-ui/src/labeledinput/labeledinputview';\nimport InputTextView from '@ckeditor/ckeditor5-ui/src/inputtext/inputtextview';\nimport submitHandler from '@ckeditor/ckeditor5-ui/src/bindings/submithandler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '@ckeditor/ckeditor5-ui/src/focuscycler';\nimport checkIcon from '@ckeditor/ckeditor5-core/theme/icons/check.svg';\nimport cancelIcon from '@ckeditor/ckeditor5-core/theme/icons/cancel.svg';\nimport '../../../theme/textalternativeform.css';\n/**\n * The TextAlternativeFormView class.\n *\n * @extends module:ui/view~View\n */\nexport default class TextAlternativeFormView extends View {\n    /**\n\t * @inheritDoc\n\t */\n    constructor(locale) {\n        super(locale);\n        const t = this.locale.t;\n        /**\n\t\t * Tracks information about the DOM focus in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n        this.focusTracker = new FocusTracker();\n        /**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n        this.keystrokes = new KeystrokeHandler();\n        /**\n\t\t * A textarea with a label.\n\t\t *\n\t\t * @member {module:ui/labeledinput/labeledinputview~LabeledInputView} #labeledTextarea\n\t\t */\n        this.labeledInput = this._createLabeledInputView();\n        /**\n\t\t * A button used to submit the form.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView} #saveButtonView\n\t\t */\n        this.saveButtonView = this._createButton(t('Save'), checkIcon, 'ck-button-save');\n        this.saveButtonView.type = 'submit';\n        /**\n\t\t * A button used to cancel the form.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView} #cancelButtonView\n\t\t */\n        this.cancelButtonView = this._createButton(t('Cancel'), cancelIcon, 'ck-button-cancel', 'cancel');\n        /**\n\t\t * A collection of views which can be focused in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this._focusables = new ViewCollection();\n        /**\n\t\t * Helps cycling over {@link #_focusables} in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n        this._focusCycler = new FocusCycler({\n            focusables: this._focusables,\n            focusTracker: this.focusTracker,\n            keystrokeHandler: this.keystrokes,\n            actions: {\n                // Navigate form fields backwards using the Shift + Tab keystroke.\n                focusPrevious: 'shift + tab',\n                // Navigate form fields forwards using the Tab key.\n                focusNext: 'tab'\n            }\n        });\n        this.setTemplate({\n            tag: 'form',\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-text-alternative-form'\n                ],\n                // https://github.com/ckeditor/ckeditor5-image/issues/40\n                tabindex: '-1'\n            },\n            children: [\n                this.labeledInput,\n                this.saveButtonView,\n                this.cancelButtonView\n            ]\n        });\n    }\n    /**\n\t * @inheritDoc\n\t */\n    render() {\n        super.render();\n        this.keystrokes.listenTo(this.element);\n        submitHandler({ view: this });\n        [\n            this.labeledInput,\n            this.saveButtonView,\n            this.cancelButtonView\n        ].forEach(v => {\n            // Register the view as focusable.\n            this._focusables.add(v);\n            // Register the view in the focus tracker.\n            this.focusTracker.add(v.element);\n        });\n    }\n    /**\n\t * Creates the button view.\n\t *\n\t * @private\n\t * @param {String} label The button label\n\t * @param {String} icon The button's icon.\n\t * @param {String} className The additional button CSS class name.\n\t * @param {String} [eventName] The event name that the ButtonView#execute event will be delegated to.\n\t * @returns {module:ui/button/buttonview~ButtonView} The button view instance.\n\t */\n    _createButton(label, icon, className, eventName) {\n        const button = new ButtonView(this.locale);\n        button.set({\n            label,\n            icon,\n            tooltip: true\n        });\n        button.extendTemplate({ attributes: { class: className } });\n        if (eventName) {\n            button.delegate('execute').to(this, eventName);\n        }\n        return button;\n    }\n    /**\n\t * Creates an input with a label.\n\t *\n\t * @private\n\t * @returns {module:ui/labeledinput/labeledinputview~LabeledInputView}\n\t */\n    _createLabeledInputView() {\n        const t = this.locale.t;\n        const labeledInput = new LabeledInputView(this.locale, InputTextView);\n        labeledInput.label = t('Text alternative');\n        labeledInput.inputView.placeholder = t('Text alternative');\n        return labeledInput;\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/image/ui/utils\n */\n\nimport BalloonPanelView from '@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview';\nimport { getSelectedImageWidget } from '../utils';\n\n/**\n * A helper utility that positions the\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} instance\n * with respect to the image in the editor content, if one is selected.\n *\n * @param {module:core/editor/editor~Editor} editor The editor instance.\n */\nexport function repositionContextualBalloon( editor ) {\n\tconst balloon = editor.plugins.get( 'ContextualBalloon' );\n\n\tif ( getSelectedImageWidget( editor.editing.view.document.selection ) ) {\n\t\tconst position = getBalloonPositionData( editor );\n\n\t\tballoon.updatePosition( position );\n\t}\n}\n\n/**\n * Returns the positioning options that control the geometry of the\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} with respect\n * to the selected element in the editor content.\n *\n * @param {module:core/editor/editor~Editor} editor The editor instance.\n * @returns {module:utils/dom/position~Options}\n */\nexport function getBalloonPositionData( editor ) {\n\tconst editingView = editor.editing.view;\n\tconst defaultPositions = BalloonPanelView.defaultPositions;\n\n\treturn {\n\t\ttarget: editingView.domConverter.viewToDom( editingView.document.selection.getSelectedElement() ),\n\t\tpositions: [\n\t\t\tdefaultPositions.northArrowSouth,\n\t\t\tdefaultPositions.northArrowSouthWest,\n\t\t\tdefaultPositions.northArrowSouthEast,\n\t\t\tdefaultPositions.southArrowNorth,\n\t\t\tdefaultPositions.southArrowNorthWest,\n\t\t\tdefaultPositions.southArrowNorthEast\n\t\t]\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagetextalternative/imagetextalternativeui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport clickOutsideHandler from '@ckeditor/ckeditor5-ui/src/bindings/clickoutsidehandler';\nimport TextAlternativeFormView from './ui/textalternativeformview';\nimport ContextualBalloon from '@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon';\nimport textAlternativeIcon from '@ckeditor/ckeditor5-core/theme/icons/low-vision.svg';\nimport {\n    repositionContextualBalloon,\n    getBalloonPositionData\n} from '../image/ui/utils';\nimport { getSelectedImageWidget } from '../image/utils';\n/**\n * The image text alternative UI plugin.\n *\n * The plugin uses the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageTextAlternativeUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get requires() {\n        return [ContextualBalloon];\n    }\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'ImageTextAlternativeUI';\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        this._createButton();\n        this._createForm();\n    }\n    /**\n\t * @inheritDoc\n\t */\n    destroy() {\n        super.destroy();\n        // Destroy created UI components as they are not automatically destroyed (see ckeditor5#1341).\n        this._form.destroy();\n    }\n    /**\n\t * Creates a button showing the balloon panel for changing the image text alternative and\n\t * registers it in the editor {@link module:ui/componentfactory~ComponentFactory ComponentFactory}.\n\t *\n\t * @private\n\t */\n    _createButton() {\n        const editor = this.editor;\n        const t = editor.t;\n        editor.ui.componentFactory.add('imageTextAlternative', locale => {\n            const command = editor.commands.get('imageTextAlternative');\n            const view = new ButtonView(locale);\n            view.set({\n                label: t('Change image text alternative'),\n                icon: textAlternativeIcon,\n                tooltip: true\n            });\n            view.bind('isEnabled').to(command, 'isEnabled');\n            this.listenTo(view, 'execute', () => this._showForm());\n            return view;\n        });\n    }\n    /**\n\t * Creates the {@link module:image/imagetextalternative/ui/textalternativeformview~TextAlternativeFormView}\n\t * form.\n\t *\n\t * @private\n\t */\n    _createForm() {\n        const editor = this.editor;\n        const view = editor.editing.view;\n        const viewDocument = view.document;\n        /**\n\t\t * The contextual balloon plugin instance.\n\t\t *\n\t\t * @private\n\t\t * @member {module:ui/panel/balloon/contextualballoon~ContextualBalloon}\n\t\t */\n        this._balloon = this.editor.plugins.get('ContextualBalloon');\n        /**\n\t\t * A form containing a textarea and buttons, used to change the `alt` text value.\n\t\t *\n\t\t * @member {module:image/imagetextalternative/ui/textalternativeformview~TextAlternativeFormView}\n\t\t */\n        this._form = new TextAlternativeFormView(editor.locale);\n        // Render the form so its #element is available for clickOutsideHandler.\n        this._form.render();\n        this.listenTo(this._form, 'submit', () => {\n            editor.execute('imageTextAlternative', { newValue: this._form.labeledInput.inputView.element.value });\n            this._hideForm(true);\n        });\n        this.listenTo(this._form, 'cancel', () => {\n            this._hideForm(true);\n        });\n        // Close the form on Esc key press.\n        this._form.keystrokes.set('Esc', (data, cancel) => {\n            this._hideForm(true);\n            cancel();\n        });\n        // Reposition the balloon or hide the form if an image widget is no longer selected.\n        this.listenTo(editor.ui, 'update', () => {\n            if (!getSelectedImageWidget(viewDocument.selection)) {\n                this._hideForm(true);\n            } else if (this._isVisible) {\n                repositionContextualBalloon(editor);\n            }\n        });\n        // Close on click outside of balloon panel element.\n        clickOutsideHandler({\n            emitter: this._form,\n            activator: () => this._isVisible,\n            contextElements: [this._balloon.view.element],\n            callback: () => this._hideForm()\n        });\n    }\n    /**\n\t * Shows the {@link #_form} in the {@link #_balloon}.\n\t *\n\t * @private\n\t */\n    _showForm() {\n        if (this._isVisible) {\n            return;\n        }\n        const editor = this.editor;\n        const command = editor.commands.get('imageTextAlternative');\n        const labeledInput = this._form.labeledInput;\n        if (!this._balloon.hasView(this._form)) {\n            this._balloon.add({\n                view: this._form,\n                position: getBalloonPositionData(editor)\n            });\n        }\n        // Make sure that each time the panel shows up, the field remains in sync with the value of\n        // the command. If the user typed in the input, then canceled the balloon (`labeledInput#value`\n        // stays unaltered) and re-opened it without changing the value of the command, they would see the\n        // old value instead of the actual value of the command.\n        // https://github.com/ckeditor/ckeditor5-image/issues/114\n        labeledInput.value = labeledInput.inputView.element.value = command.value || '';\n        this._form.labeledInput.select();\n    }\n    /**\n\t * Removes the {@link #_form} from the {@link #_balloon}.\n\t *\n\t * @param {Boolean} [focusEditable=false] Controls whether the editing view is focused afterwards.\n\t * @private\n\t */\n    _hideForm(focusEditable) {\n        if (!this._isVisible) {\n            return;\n        }\n        // Blur the input element before removing it from DOM to prevent issues in some browsers.\n        // See https://github.com/ckeditor/ckeditor5/issues/1501.\n        this._form.saveButtonView.focus();\n        this._balloon.remove(this._form);\n        if (focusEditable) {\n            this.editor.editing.view.focus();\n        }\n    }\n    /**\n\t * Returns `true` when the {@link #_form} is the visible view in the {@link #_balloon}.\n\t *\n\t * @private\n\t * @type {Boolean}\n\t */\n    get _isVisible() {\n        return this._balloon.visibleView == this._form;\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagetextalternative\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ImageTextAlternativeEditing from './imagetextalternative/imagetextalternativeediting';\nimport ImageTextAlternativeUI from './imagetextalternative/imagetextalternativeui';\n\n/**\n * The image text alternative plugin.\n *\n * For a detailed overview, check the {@glink features/image#image-styles image styles} documentation.\n *\n * This is a \"glue\" plugin which loads the\n *  {@link module:image/imagetextalternative/imagetextalternativeediting~ImageTextAlternativeEditing}\n * and {@link module:image/imagetextalternative/imagetextalternativeui~ImageTextAlternativeUI} plugins.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageTextAlternative extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ImageTextAlternativeEditing, ImageTextAlternativeUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageTextAlternative';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/image\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ImageEditing from '../src/image/imageediting';\nimport Widget from '@ckeditor/ckeditor5-widget/src/widget';\nimport ImageTextAlternative from './imagetextalternative';\n\nimport '../theme/image.css';\n\n/**\n * The image plugin.\n *\n * For a detailed overview, check the {@glink features/image image feature} documentation.\n *\n * This is a \"glue\" plugin which loads the following plugins:\n *\n * * {@link module:image/image/imageediting~ImageEditing},\n * * {@link module:image/imagetextalternative~ImageTextAlternative}.\n *\n * Usually, it is used in conjuction with other plugins from this package. See the {@glink api/image package page}\n * for more information.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Image extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ImageEditing, Widget, ImageTextAlternative ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Image';\n\t}\n}\n\n/**\n * The configuration of the image features. Used by the image features in the `@ckeditor/ckeditor5-image` package.\n *\n * Read more in {@link module:image/image~ImageConfig}.\n *\n * @member {module:image/image~ImageConfig} module:core/editor/editorconfig~EditorConfig#image\n */\n\n/**\n * The configuration of the image features. Used by the image features in the `@ckeditor/ckeditor5-image` package.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n * \t\t\t\timage: ... // Image feature options.\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See {@link module:core/editor/editorconfig~EditorConfig all editor options}.\n *\n * @interface ImageConfig\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module upload/ui/filedialogbuttonview\n */\n\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport View from '@ckeditor/ckeditor5-ui/src/view';\n\n/**\n * The file dialog button view.\n *\n * This component provides a button that opens the native file selection dialog.\n * It can be used to implement the UI of a file upload feature.\n *\n *\t\tconst view = new FileDialogButtonView( locale );\n *\n *\t\tview.set( {\n *\t\t\tacceptedType: 'image/*',\n *\t\t\tallowMultipleFiles: true\n *\t\t} );\n *\n *\t\tview.buttonView.set( {\n *\t\t\tlabel: t( 'Insert image' ),\n *\t\t\ticon: imageIcon,\n *\t\t\ttooltip: true\n *\t\t} );\n *\n *\t\tview.on( 'done', ( evt, files ) => {\n *\t\t\tfor ( const file of Array.from( files ) ) {\n *\t\t\t\tconsole.log( 'Selected file', file );\n *\t\t\t}\n *\t\t} );\n *\n * @extends module:ui/view~View\n */\nexport default class FileDialogButtonView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * The button view of the component.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView}\n\t\t */\n\t\tthis.buttonView = new ButtonView( locale );\n\n\t\t/**\n\t\t * A hidden `<input>` view used to execute file dialog.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:upload/ui/filedialogbuttonview~FileInputView}\n\t\t */\n\t\tthis._fileInputView = new FileInputView( locale );\n\n\t\t/**\n\t\t * Accepted file types. Can be provided in form of file extensions, media type or one of:\n\t\t * * `audio/*`,\n\t\t * * `video/*`,\n\t\t * * `image/*`.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #acceptedType\n\t\t */\n\t\tthis._fileInputView.bind( 'acceptedType' ).to( this );\n\n\t\t/**\n\t\t * Indicates if multiple files can be selected. Defaults to `true`.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #allowMultipleFiles\n\t\t */\n\t\tthis._fileInputView.bind( 'allowMultipleFiles' ).to( this );\n\n\t\t/**\n\t\t * Fired when file dialog is closed with file selected.\n\t\t *\n\t\t *\t\tview.on( 'done', ( evt, files ) => {\n\t\t *\t\t\tfor ( const file of files ) {\n\t\t *\t\t\t\tconsole.log( 'Selected file', file );\n\t\t *\t\t\t}\n\t\t *\t\t}\n\t\t *\n\t\t * @event done\n\t\t * @param {Array.<File>} files Array of selected files.\n\t\t */\n\t\tthis._fileInputView.delegate( 'done' ).to( this );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'span',\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck-file-dialog-button',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tthis.buttonView,\n\t\t\t\tthis._fileInputView\n\t\t\t]\n\t\t} );\n\n\t\tthis.buttonView.on( 'execute', () => {\n\t\t\tthis._fileInputView.open();\n\t\t} );\n\t}\n\n\t/**\n\t * Focuses the {@link #buttonView}.\n\t */\n\tfocus() {\n\t\tthis.buttonView.focus();\n\t}\n}\n\n/**\n * The hidden file input view class.\n *\n * @private\n * @extends {module:ui/view~View}\n */\nclass FileInputView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * Accepted file types. Can be provided in form of file extensions, media type or one of:\n\t\t * * `audio/*`,\n\t\t * * `video/*`,\n\t\t * * `image/*`.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #acceptedType\n\t\t */\n\t\tthis.set( 'acceptedType' );\n\n\t\t/**\n\t\t * Indicates if multiple files can be selected. Defaults to `false`.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #allowMultipleFiles\n\t\t */\n\t\tthis.set( 'allowMultipleFiles', false );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'input',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck-hidden'\n\t\t\t\t],\n\t\t\t\ttype: 'file',\n\t\t\t\ttabindex: '-1',\n\t\t\t\taccept: bind.to( 'acceptedType' ),\n\t\t\t\tmultiple: bind.to( 'allowMultipleFiles' )\n\t\t\t},\n\n\t\t\ton: {\n\t\t\t\t// Removing from code coverage since we cannot programmatically set input element files.\n\t\t\t\tchange: bind.to( /* istanbul ignore next */ () => {\n\t\t\t\t\tif ( this.element && this.element.files && this.element.files.length ) {\n\t\t\t\t\t\tthis.fire( 'done', this.element.files );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.element.value = '';\n\t\t\t\t} )\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Opens file dialog.\n\t */\n\topen() {\n\t\tthis.element.click();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageupload/utils\n */\n\n/* global fetch, File */\n\n/**\n * Checks if a given file is an image.\n *\n * @param {File} file\n * @returns {Boolean}\n */\nexport function isImageType( file ) {\n\tconst types = /^image\\/(jpeg|png|gif|bmp)$/;\n\n\treturn types.test( file.type );\n}\n\n/**\n * Creates a promise which fetches the image local source (base64 or blob) and resolves with a `File` object.\n *\n * @param {module:engine/view/element~Element} image Image which source to fetch.\n * @returns {Promise.<File>} A promise which resolves when image source is fetched and converted to `File` instance.\n * It resolves with a `File` object. If there were any errors during file processing the promise will be rejected.\n */\nexport function fetchLocalImage( image ) {\n\treturn new Promise( ( resolve, reject ) => {\n\t\tconst imageSrc = image.getAttribute( 'src' );\n\n\t\t// Fetch works asynchronously and so does not block browser UI when processing data.\n\t\tfetch( imageSrc )\n\t\t\t.then( resource => resource.blob() )\n\t\t\t.then( blob => {\n\t\t\t\tconst mimeType = getImageMimeType( blob, imageSrc );\n\t\t\t\tconst ext = mimeType.replace( 'image/', '' );\n\t\t\t\tconst filename = `image.${ ext }`;\n\t\t\t\tconst file = createFileFromBlob( blob, filename, mimeType );\n\n\t\t\t\tfile ? resolve( file ) : reject();\n\t\t\t} )\n\t\t\t.catch( reject );\n\t} );\n}\n\n/**\n * Checks whether given node is an image element with local source (base64 or blob).\n *\n * @param {module:engine/view/node~Node} node Node to check.\n * @returns {Boolean}\n */\nexport function isLocalImage( node ) {\n\tif ( !node.is( 'element', 'img' ) || !node.getAttribute( 'src' ) ) {\n\t\treturn false;\n\t}\n\n\treturn node.getAttribute( 'src' ).match( /^data:image\\/\\w+;base64,/g ) ||\n\t\tnode.getAttribute( 'src' ).match( /^blob:/g );\n}\n\n// Extracts image type based on its blob representation or its source.\n//\n// @param {String} src Image src attribute value.\n// @param {Blob} blob Image blob representation.\n// @returns {String}\nfunction getImageMimeType( blob, src ) {\n\tif ( blob.type ) {\n\t\treturn blob.type;\n\t} else if ( src.match( /data:(image\\/\\w+);base64/ ) ) {\n\t\treturn src.match( /data:(image\\/\\w+);base64/ )[ 1 ].toLowerCase();\n\t} else {\n\t\t// Fallback to 'jpeg' as common extension.\n\t\treturn 'image/jpeg';\n\t}\n}\n\n// Creates `File` instance from the given `Blob` instance using specified filename.\n//\n// @param {Blob} blob The `Blob` instance from which file will be created.\n// @param {String} filename Filename used during file creation.\n// @param {String} mimeType File mime type.\n// @returns {File|null} The `File` instance created from the given blob or `null` if `File API` is not available.\nfunction createFileFromBlob( blob, filename, mimeType ) {\n\ttry {\n\t\treturn new File( [ blob ], filename, { type: mimeType } );\n\t} catch ( err ) {\n\t\t// Edge does not support `File` constructor ATM, see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/9551546/.\n\t\t// However, the `File` function is present (so cannot be checked with `!window.File` or `typeof File === 'function'`), but\n\t\t// calling it with `new File( ... )` throws an error. This try-catch prevents that. Also when the function will\n\t\t// be implemented correctly in Edge the code will start working without any changes (see #247).\n\t\treturn null;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageupload/imageuploadui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileDialogButtonView from '@ckeditor/ckeditor5-upload/src/ui/filedialogbuttonview';\nimport imageIcon from '@ckeditor/ckeditor5-core/theme/icons/image.svg';\nimport { isImageType } from './utils';\n/**\n * The image upload button plugin.\n *\n * For a detailed overview, check the {@glink features/image-upload/image-upload Image upload feature} documentation.\n *\n * Adds the `'imageUpload'` button to the {@link module:ui/componentfactory~ComponentFactory UI component factory}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageUploadUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const t = editor.t;\n        // Setup `imageUpload` button.\n        editor.ui.componentFactory.add('imageUpload', locale => {\n            const view = new FileDialogButtonView(locale);\n            const command = editor.commands.get('imageUpload');\n            view.set({\n                acceptedType: 'image/*',\n                allowMultipleFiles: true\n            });\n            view.buttonView.set({\n                label: t('Insert image'),\n                icon: imageIcon,\n                tooltip: true\n            });\n            view.buttonView.bind('isEnabled').to(command);\n            view.on('done', (evt, files) => {\n                const imagesToUpload = Array.from(files).filter(isImageType);\n                if (imagesToUpload.length) {\n                    editor.execute('imageUpload', { file: imagesToUpload });\n                }\n            });\n            return view;\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageupload/imageuploadprogress\n */\n\n/* globals setTimeout */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileRepository from '@ckeditor/ckeditor5-upload/src/filerepository';\nimport uploadingPlaceholder from '../../theme/icons/image_placeholder.svg';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\nimport '../../theme/imageuploadprogress.css';\nimport '../../theme/imageuploadicon.css';\nimport '../../theme/imageuploadloader.css';\n\n/**\n * The image upload progress plugin.\n * It shows a placeholder when the image is read from the disk and a progress bar while the image is uploading.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageUploadProgress extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The image placeholder that is displayed before real image data can be accessed.\n\t\t *\n\t\t * @protected\n\t\t * @member {String} #placeholder\n\t\t */\n\t\tthis.placeholder = 'data:image/svg+xml;utf8,' + encodeURIComponent( uploadingPlaceholder );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\t// Upload status change - update image's view according to that status.\n\t\teditor.editing.downcastDispatcher.on( 'attribute:uploadStatus:image', ( ...args ) => this.uploadStatusChange( ...args ) );\n\t}\n\n\t/**\n\t * This method is called each time the image `uploadStatus` attribute is changed.\n\t *\n\t * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\n\t */\n\tuploadStatusChange( evt, data, conversionApi ) {\n\t\tconst editor = this.editor;\n\t\tconst modelImage = data.item;\n\t\tconst uploadId = modelImage.getAttribute( 'uploadId' );\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fileRepository = editor.plugins.get( FileRepository );\n\t\tconst status = uploadId ? data.attributeNewValue : null;\n\t\tconst placeholder = this.placeholder;\n\t\tconst viewFigure = editor.editing.mapper.toViewElement( modelImage );\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\tif ( status == 'reading' ) {\n\t\t\t// Start \"appearing\" effect and show placeholder with infinite progress bar on the top\n\t\t\t// while image is read from disk.\n\t\t\t_startAppearEffect( viewFigure, viewWriter );\n\t\t\t_showPlaceholder( placeholder, viewFigure, viewWriter );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Show progress bar on the top of the image when image is uploading.\n\t\tif ( status == 'uploading' ) {\n\t\t\tconst loader = fileRepository.loaders.get( uploadId );\n\n\t\t\t// Start appear effect if needed - see https://github.com/ckeditor/ckeditor5-image/issues/191.\n\t\t\t_startAppearEffect( viewFigure, viewWriter );\n\n\t\t\tif ( !loader ) {\n\t\t\t\t// There is no loader associated with uploadId - this means that image came from external changes.\n\t\t\t\t// In such cases we still want to show the placeholder until image is fully uploaded.\n\t\t\t\t// Show placeholder if needed - see https://github.com/ckeditor/ckeditor5-image/issues/191.\n\t\t\t\t_showPlaceholder( placeholder, viewFigure, viewWriter );\n\t\t\t} else {\n\t\t\t\t// Hide placeholder and initialize progress bar showing upload progress.\n\t\t\t\t_hidePlaceholder( viewFigure, viewWriter );\n\t\t\t\t_showProgressBar( viewFigure, viewWriter, loader, editor.editing.view );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Because in Edge there is no way to show fancy animation of completeIcon we need to skip it.\n\t\tif ( status == 'complete' && fileRepository.loaders.get( uploadId ) && !env.isEdge ) {\n\t\t\t_showCompleteIcon( viewFigure, viewWriter, editor.editing.view );\n\t\t}\n\n\t\t// Clean up.\n\t\t_hideProgressBar( viewFigure, viewWriter );\n\t\t_hidePlaceholder( viewFigure, viewWriter );\n\t\t_stopAppearEffect( viewFigure, viewWriter );\n\t}\n}\n\n// Adds ck-appear class to the image figure if one is not already applied.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _startAppearEffect( viewFigure, writer ) {\n\tif ( !viewFigure.hasClass( 'ck-appear' ) ) {\n\t\twriter.addClass( 'ck-appear', viewFigure );\n\t}\n}\n\n// Removes ck-appear class to the image figure if one is not already removed.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _stopAppearEffect( viewFigure, writer ) {\n\twriter.removeClass( 'ck-appear', viewFigure );\n}\n\n// Shows placeholder together with infinite progress bar on given image figure.\n//\n// @param {String} Data-uri with a svg placeholder.\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _showPlaceholder( placeholder, viewFigure, writer ) {\n\tif ( !viewFigure.hasClass( 'ck-image-upload-placeholder' ) ) {\n\t\twriter.addClass( 'ck-image-upload-placeholder', viewFigure );\n\t}\n\n\tconst viewImg = viewFigure.getChild( 0 );\n\n\tif ( viewImg.getAttribute( 'src' ) !== placeholder ) {\n\t\twriter.setAttribute( 'src', placeholder, viewImg );\n\t}\n\n\tif ( !_getUIElement( viewFigure, 'placeholder' ) ) {\n\t\twriter.insert( writer.createPositionAfter( viewImg ), _createPlaceholder( writer ) );\n\t}\n}\n\n// Removes placeholder together with infinite progress bar on given image figure.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _hidePlaceholder( viewFigure, writer ) {\n\tif ( viewFigure.hasClass( 'ck-image-upload-placeholder' ) ) {\n\t\twriter.removeClass( 'ck-image-upload-placeholder', viewFigure );\n\t}\n\n\t_removeUIElement( viewFigure, writer, 'placeholder' );\n}\n\n// Shows progress bar displaying upload progress.\n// Attaches it to the file loader to update when upload percentace is changed.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {module:upload/filerepository~FileLoader} loader\n// @param {module:engine/view/view~View} view\nfunction _showProgressBar( viewFigure, writer, loader, view ) {\n\tconst progressBar = _createProgressBar( writer );\n\twriter.insert( writer.createPositionAt( viewFigure, 'end' ), progressBar );\n\n\t// Update progress bar width when uploadedPercent is changed.\n\tloader.on( 'change:uploadedPercent', ( evt, name, value ) => {\n\t\tview.change( writer => {\n\t\t\twriter.setStyle( 'width', value + '%', progressBar );\n\t\t} );\n\t} );\n}\n\n// Hides upload progress bar.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _hideProgressBar( viewFigure, writer ) {\n\t_removeUIElement( viewFigure, writer, 'progressBar' );\n}\n\n// Shows complete icon and hides after a certain amount of time.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {module:engine/view/view~View} view\nfunction _showCompleteIcon( viewFigure, writer, view ) {\n\tconst completeIcon = writer.createUIElement( 'div', { class: 'ck-image-upload-complete-icon' } );\n\n\twriter.insert( writer.createPositionAt( viewFigure, 'end' ), completeIcon );\n\n\tsetTimeout( () => {\n\t\tview.change( writer => writer.remove( writer.createRangeOn( completeIcon ) ) );\n\t}, 3000 );\n}\n\n// Create progress bar element using {@link module:engine/view/uielement~UIElement}.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {module:engine/view/uielement~UIElement}\nfunction _createProgressBar( writer ) {\n\tconst progressBar = writer.createUIElement( 'div', { class: 'ck-progress-bar' } );\n\n\twriter.setCustomProperty( 'progressBar', true, progressBar );\n\n\treturn progressBar;\n}\n\n// Create placeholder element using {@link module:engine/view/uielement~UIElement}.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {module:engine/view/uielement~UIElement}\nfunction _createPlaceholder( writer ) {\n\tconst placeholder = writer.createUIElement( 'div', { class: 'ck-upload-placeholder-loader' } );\n\n\twriter.setCustomProperty( 'placeholder', true, placeholder );\n\n\treturn placeholder;\n}\n\n// Returns {@link module:engine/view/uielement~UIElement} of given unique property from image figure element.\n// Returns `undefined` if element is not found.\n//\n// @private\n// @param {module:engine/view/element~Element} imageFigure\n// @param {String} uniqueProperty\n// @returns {module:engine/view/uielement~UIElement|undefined}\nfunction _getUIElement( imageFigure, uniqueProperty ) {\n\tfor ( const child of imageFigure.getChildren() ) {\n\t\tif ( child.getCustomProperty( uniqueProperty ) ) {\n\t\t\treturn child;\n\t\t}\n\t}\n}\n\n// Removes {@link module:engine/view/uielement~UIElement} of given unique property from image figure element.\n//\n// @private\n// @param {module:engine/view/element~Element} imageFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {String} uniqueProperty\nfunction _removeUIElement( viewFigure, writer, uniqueProperty ) {\n\tconst element = _getUIElement( viewFigure, uniqueProperty );\n\n\tif ( element ) {\n\t\twriter.remove( writer.createRangeOn( element ) );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport FileRepository from '@ckeditor/ckeditor5-upload/src/filerepository';\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { insertImage, isImageAllowed } from '../image/utils';\n\n/**\n * @module image/imageupload/imageuploadcommand\n */\n\n/**\n * Image upload command.\n *\n * The command is registered by the {@link module:image/imageupload/imageuploadediting~ImageUploadEditing} plugin as `'imageUpload'`.\n *\n * In order to upload an image at the current selection position\n * (according to the {@link module:widget/utils~findOptimalInsertionPosition} algorithm),\n * execute the command and pass the native image file instance:\n *\n *\t\tthis.listenTo( editor.editing.view.document, 'clipboardInput', ( evt, data ) => {\n *\t\t\t// Assuming that only images were pasted:\n *\t\t\tconst images = Array.from( data.dataTransfer.files );\n *\n *\t\t\t// Upload the first image:\n *\t\t\teditor.execute( 'imageUpload', { file: images[ 0 ] } );\n *\t\t} );\n *\n * It is also possible to insert multiple images at once:\n *\n *\t\teditor.execute( 'imageUpload', {\n *\t\t\tfile: [\n *\t\t\t\tfile1,\n *\t\t\t\tfile2\n *\t\t\t]\n *\t\t} );\n *\n * @extends module:core/command~Command\n */\nexport default class ImageUploadCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tthis.isEnabled = isImageAllowed( this.editor.model );\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * @fires execute\n\t * @param {Object} options Options for the executed command.\n\t * @param {File|Array.<File>} options.file The image file or an array of image files to upload.\n\t */\n\texecute( options ) {\n\t\tconst editor = this.editor;\n\t\tconst model = editor.model;\n\n\t\tconst fileRepository = editor.plugins.get( FileRepository );\n\n\t\tmodel.change( writer => {\n\t\t\tconst filesToUpload = Array.isArray( options.file ) ? options.file : [ options.file ];\n\n\t\t\tfor ( const file of filesToUpload ) {\n\t\t\t\tuploadImage( writer, model, fileRepository, file );\n\t\t\t}\n\t\t} );\n\t}\n}\n\n// Handles uploading single file.\n//\n// @param {module:engine/model/writer~writer} writer\n// @param {module:engine/model/model~Model} model\n// @param {File} file\nfunction uploadImage( writer, model, fileRepository, file ) {\n\tconst loader = fileRepository.createLoader( file );\n\n\t// Do not throw when upload adapter is not set. FileRepository will log an error anyway.\n\tif ( !loader ) {\n\t\treturn;\n\t}\n\n\tinsertImage( writer, model, { uploadId: loader.id } );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageupload/imageuploadediting\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileRepository from '@ckeditor/ckeditor5-upload/src/filerepository';\nimport Notification from '@ckeditor/ckeditor5-ui/src/notification/notification';\nimport UpcastWriter from '@ckeditor/ckeditor5-engine/src/view/upcastwriter';\nimport ImageUploadCommand from '../../src/imageupload/imageuploadcommand';\nimport {\n    isImageType,\n    isLocalImage,\n    fetchLocalImage\n} from '../../src/imageupload/utils';\n/**\n * The editing part of the image upload feature. It registers the `'imageUpload'` command.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageUploadEditing extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get requires() {\n        return [\n            FileRepository,\n            Notification\n        ];\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const doc = editor.model.document;\n        const schema = editor.model.schema;\n        const conversion = editor.conversion;\n        const fileRepository = editor.plugins.get(FileRepository);\n        // Setup schema to allow uploadId and uploadStatus for images.\n        schema.extend('image', {\n            allowAttributes: [\n                'uploadId',\n                'uploadStatus'\n            ]\n        });\n        // Register imageUpload command.\n        editor.commands.add('imageUpload', new ImageUploadCommand(editor));\n        // Register upcast converter for uploadId.\n        conversion.for('upcast').attributeToAttribute({\n            view: {\n                name: 'img',\n                key: 'uploadId'\n            },\n            model: 'uploadId'\n        });\n        // Handle pasted images.\n        // For every image file, a new file loader is created and a placeholder image is\n        // inserted into the content. Then, those images are uploaded once they appear in the model\n        // (see Document#change listener below).\n        this.listenTo(editor.editing.view.document, 'clipboardInput', (evt, data) => {\n            // Skip if non empty HTML data is included.\n            // https://github.com/ckeditor/ckeditor5-upload/issues/68\n            if (isHtmlIncluded(data.dataTransfer)) {\n                return;\n            }\n            const images = Array.from(data.dataTransfer.files).filter(file => {\n                // See https://github.com/ckeditor/ckeditor5-image/pull/254.\n                if (!file) {\n                    return false;\n                }\n                return isImageType(file);\n            });\n            const ranges = data.targetRanges.map(viewRange => editor.editing.mapper.toModelRange(viewRange));\n            editor.model.change(writer => {\n                // Set selection to paste target.\n                writer.setSelection(ranges);\n                if (images.length) {\n                    evt.stop();\n                    // Upload images after the selection has changed in order to ensure the command's state is refreshed.\n                    editor.model.enqueueChange('default', () => {\n                        editor.execute('imageUpload', { file: images });\n                    });\n                }\n            });\n        });\n        // Handle HTML pasted with images with base64 or blob sources.\n        // For every image file, a new file loader is created and a placeholder image is\n        // inserted into the content. Then, those images are uploaded once they appear in the model\n        // (see Document#change listener below).\n        if (editor.plugins.has('Clipboard')) {\n            this.listenTo(editor.plugins.get('Clipboard'), 'inputTransformation', (evt, data) => {\n                const fetchableImages = Array.from(editor.editing.view.createRangeIn(data.content)).filter(value => isLocalImage(value.item) && !value.item.getAttribute('uploadProcessed')).map(value => {\n                    return {\n                        promise: fetchLocalImage(value.item),\n                        imageElement: value.item\n                    };\n                });\n                if (!fetchableImages.length) {\n                    return;\n                }\n                const writer = new UpcastWriter();\n                for (const fetchableImage of fetchableImages) {\n                    // Set attribute marking that the image was processed already.\n                    writer.setAttribute('uploadProcessed', true, fetchableImage.imageElement);\n                    const loader = fileRepository.createLoader(fetchableImage.promise);\n                    if (loader) {\n                        writer.setAttribute('src', '', fetchableImage.imageElement);\n                        writer.setAttribute('uploadId', loader.id, fetchableImage.imageElement);\n                    }\n                }\n            });\n        }\n        // Prevents from the browser redirecting to the dropped image.\n        editor.editing.view.document.on('dragover', (evt, data) => {\n            data.preventDefault();\n        });\n        // Upload placeholder images that appeared in the model.\n        doc.on('change', () => {\n            const changes = doc.differ.getChanges({ includeChangesInGraveyard: true });\n            for (const entry of changes) {\n                if (entry.type == 'insert' && entry.name == 'image') {\n                    const item = entry.position.nodeAfter;\n                    const isInGraveyard = entry.position.root.rootName == '$graveyard';\n                    // Check if the image element still has upload id.\n                    const uploadId = item.getAttribute('uploadId');\n                    if (!uploadId) {\n                        continue;\n                    }\n                    // Check if the image is loaded on this client.\n                    const loader = fileRepository.loaders.get(uploadId);\n                    if (!loader) {\n                        continue;\n                    }\n                    if (isInGraveyard) {\n                        // If the image was inserted to the graveyard - abort the loading process.\n                        loader.abort();\n                    } else if (loader.status == 'idle') {\n                        // If the image was inserted into content and has not been loaded yet, start loading it.\n                        this._readAndUpload(loader, item);\n                    }\n                }\n            }\n        });\n    }\n    /**\n\t * Read and upload an image.\n\t *\n\t * The image is read from the disk and as a base64 encoded string it is set temporarily to\n\t * `image[src]`. When the image is successfully uploaded the temporary data is replaced with the target\n\t * image's URL (the URL to the uploaded image on the server).\n\t *\n\t * @protected\n\t * @param {module:upload/filerepository~FileLoader} loader\n\t * @param {module:engine/model/element~Element} imageElement\n\t * @returns {Promise}\n\t */\n    _readAndUpload(loader, imageElement) {\n        const editor = this.editor;\n        const model = editor.model;\n        const t = editor.locale.t;\n        const fileRepository = editor.plugins.get(FileRepository);\n        const notification = editor.plugins.get(Notification);\n        model.enqueueChange('transparent', writer => {\n            writer.setAttribute('uploadStatus', 'reading', imageElement);\n        });\n        return loader.read().then(data => {\n            const viewFigure = editor.editing.mapper.toViewElement(imageElement);\n            const viewImg = viewFigure.getChild(0);\n            const promise = loader.upload();\n            editor.editing.view.change(writer => {\n                writer.setAttribute('src', data, viewImg);\n            });\n            model.enqueueChange('transparent', writer => {\n                writer.setAttribute('uploadStatus', 'uploading', imageElement);\n            });\n            return promise;\n        }).then(data => {\n            model.enqueueChange('transparent', writer => {\n                writer.setAttributes({\n                    uploadStatus: 'complete',\n                    src: data.default\n                }, imageElement);\n                this._parseAndSetSrcsetAttributeOnImage(data, imageElement, writer);\n            });\n            clean();\n        }).catch(error => {\n            // If status is not 'error' nor 'aborted' - throw error because it means that something else went wrong,\n            // it might be generic error and it would be real pain to find what is going on.\n            if (loader.status !== 'error' && loader.status !== 'aborted') {\n                throw error;\n            }\n            // Might be 'aborted'.\n            if (loader.status == 'error' && error) {\n                notification.showWarning(error, {\n                    title: t('Upload failed'),\n                    namespace: 'upload'\n                });\n            }\n            clean();\n            // Permanently remove image from insertion batch.\n            model.enqueueChange('transparent', writer => {\n                writer.remove(imageElement);\n            });\n        });\n        function clean() {\n            model.enqueueChange('transparent', writer => {\n                writer.removeAttribute('uploadId', imageElement);\n                writer.removeAttribute('uploadStatus', imageElement);\n            });\n            fileRepository.destroyLoader(loader);\n        }\n    }\n    /**\n\t * Creates `srcset` attribute based on a given file upload response and sets it as an attribute to a specific image element.\n\t *\n\t * @protected\n\t * @param {Object} data Data object from which `srcset` will be created.\n\t * @param {module:engine/model/element~Element} image The image element on which `srcset` attribute will be set.\n\t * @param {module:engine/model/writer~Writer} writer\n\t */\n    _parseAndSetSrcsetAttributeOnImage(data, image, writer) {\n        // Srcset attribute for responsive images support.\n        let maxWidth = 0;\n        const srcsetAttribute = Object.keys(data)    // Filter out keys that are not integers.\n.filter(key => {\n            const width = parseInt(key, 10);\n            if (!isNaN(width)) {\n                maxWidth = Math.max(maxWidth, width);\n                return true;\n            }\n        })    // Convert each key to srcset entry.\n.map(key => `${ data[key] } ${ key }w`)    // Join all entries.\n.join(', ');\n        if (srcsetAttribute != '') {\n            writer.setAttribute('srcset', {\n                data: srcsetAttribute,\n                width: maxWidth\n            }, image);\n        }\n    }\n}\n// Returns `true` if non-empty `text/html` is included in the data transfer.\n//\n// @param {module:clipboard/datatransfer~DataTransfer} dataTransfer\n// @returns {Boolean}\nexport function isHtmlIncluded(dataTransfer) {\n    return Array.from(dataTransfer.types).includes('text/html') && dataTransfer.getData('text/html') !== '';\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageupload\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ImageUploadUI from './imageupload/imageuploadui';\nimport ImageUploadProgress from './imageupload/imageuploadprogress';\nimport ImageUploadEditing from './imageupload/imageuploadediting';\n\n/**\n * The image upload plugin.\n *\n * For a detailed overview, check the {@glink features/image-upload/image-upload image upload feature} documentation.\n *\n * This plugin does not do anything directly, but it loads a set of specific plugins to enable image uploading:\n *\n * * {@link module:image/imageupload/imageuploadediting~ImageUploadEditing},\n * * {@link module:image/imageupload/imageuploadui~ImageUploadUI},\n * * {@link module:image/imageupload/imageuploadprogress~ImageUploadProgress}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageUpload extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageUpload';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ImageUploadEditing, ImageUploadUI, ImageUploadProgress ];\n\t}\n}\n","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z\\\"/></svg>\"","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/**\n * Checks if `value` is likely a DOM element.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n * @example\n *\n * _.isElement(document.body);\n * // => true\n *\n * _.isElement('<body>');\n * // => false\n */\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nexport default isElement;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals window, document */\n\n/**\n * @module adapter-ckfinder/utils\n */\n\nconst TOKEN_COOKIE_NAME = 'ckCsrfToken';\nconst TOKEN_LENGTH = 40;\nconst tokenCharset = 'abcdefghijklmnopqrstuvwxyz0123456789';\n\n/**\n * Returns the CSRF token value. The value is a hash stored in `document.cookie`\n * under the `ckCsrfToken` key. The CSRF token can be used to secure the communication\n * between the web browser and the CKFinder server.\n *\n * @returns {String}\n */\nexport function getCsrfToken() {\n\tlet token = getCookie( TOKEN_COOKIE_NAME );\n\n\tif ( !token || token.length != TOKEN_LENGTH ) {\n\t\ttoken = generateToken( TOKEN_LENGTH );\n\t\tsetCookie( TOKEN_COOKIE_NAME, token );\n\t}\n\n\treturn token;\n}\n\n/**\n * Returns the value of the cookie with a given name or `null` if the cookie is not found.\n *\n * @param {String} name\n * @returns {String|null}\n */\nexport function getCookie( name ) {\n\tname = name.toLowerCase();\n\tconst parts = document.cookie.split( ';' );\n\n\tfor ( const part of parts ) {\n\t\tconst pair = part.split( '=' );\n\t\tconst key = decodeURIComponent( pair[ 0 ].trim().toLowerCase() );\n\n\t\tif ( key === name ) {\n\t\t\treturn decodeURIComponent( pair[ 1 ] );\n\t\t}\n\t}\n\n\treturn null;\n}\n\n/**\n * Sets the value of the cookie with a given name.\n *\n * @param {String} name\n * @param {String} value\n */\nexport function setCookie( name, value ) {\n\tdocument.cookie = encodeURIComponent( name ) + '=' + encodeURIComponent( value ) + ';path=/';\n}\n\n// Generates the CSRF token with the given length.\n//\n// @private\n// @param {Number} length\n// @returns {string}\nfunction generateToken( length ) {\n\tlet result = '';\n\tconst randValues = new Uint8Array( length );\n\n\twindow.crypto.getRandomValues( randValues );\n\n\tfor ( let j = 0; j < randValues.length; j++ ) {\n\t\tconst character = tokenCharset.charAt( randValues[ j ] % tokenCharset.length );\n\t\tresult += Math.random() > 0.5 ? character.toUpperCase() : character;\n\t}\n\n\treturn result;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/* globals XMLHttpRequest, FormData */\n/**\n * @module adapter-ckfinder/uploadadapter\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileRepository from '@ckeditor/ckeditor5-upload/src/filerepository';\nimport { getCsrfToken } from './utils';\n/**\n * A plugin that enables file uploads in CKEditor 5 using the CKFinder server–side connector.\n *\n * See the {@glink features/image-upload/ckfinder \"CKFinder file manager integration\" guide} to learn how to configure\n * and use this feature as well as find out more about the full integration with the file manager\n * provided by the {@link module:ckfinder/ckfinder~CKFinder} plugin.\n *\n * Check out the {@glink features/image-upload/image-upload comprehensive \"Image upload overview\"} to learn about\n * other ways to upload images into CKEditor 5.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class CKFinderUploadAdapter extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get requires() {\n        return [FileRepository];\n    }\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'CKFinderUploadAdapter';\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const url = this.editor.config.get('ckfinder.uploadUrl');\n        if (!url) {\n            return;\n        }\n        // Register CKFinderAdapter\n        this.editor.plugins.get(FileRepository).createUploadAdapter = loader => new UploadAdapter(loader, url, this.editor.t);\n    }\n}\n/**\n * Upload adapter for CKFinder.\n *\n * @private\n * @implements module:upload/filerepository~UploadAdapter\n */\nclass UploadAdapter {\n    /**\n\t * Creates a new adapter instance.\n\t *\n\t * @param {module:upload/filerepository~FileLoader} loader\n\t * @param {String} url\n\t * @param {module:utils/locale~Locale#t} t\n\t */\n    constructor(loader, url, t) {\n        /**\n\t\t * FileLoader instance to use during the upload.\n\t\t *\n\t\t * @member {module:upload/filerepository~FileLoader} #loader\n\t\t */\n        this.loader = loader;\n        /**\n\t\t * Upload URL.\n\t\t *\n\t\t * @member {String} #url\n\t\t */\n        this.url = url;\n        /**\n\t\t * Locale translation method.\n\t\t *\n\t\t * @member {module:utils/locale~Locale#t} #t\n\t\t */\n        this.t = t;\n    }\n    /**\n\t * Starts the upload process.\n\t *\n\t * @see module:upload/filerepository~UploadAdapter#upload\n\t * @returns {Promise.<Object>}\n\t */\n    upload() {\n        return this.loader.file.then(file => {\n            return new Promise((resolve, reject) => {\n                this._initRequest();\n                this._initListeners(resolve, reject, file);\n                this._sendRequest(file);\n            });\n        });\n    }\n    /**\n\t * Aborts the upload process.\n\t *\n\t * @see module:upload/filerepository~UploadAdapter#abort\n\t */\n    abort() {\n        if (this.xhr) {\n            this.xhr.abort();\n        }\n    }\n    /**\n\t * Initializes the XMLHttpRequest object.\n\t *\n\t * @private\n\t */\n    _initRequest() {\n        const xhr = this.xhr = new XMLHttpRequest();\n        xhr.open('POST', this.url, true);\n        xhr.responseType = 'json';\n    }\n    /**\n\t * Initializes XMLHttpRequest listeners.\n\t *\n\t * @private\n\t * @param {Function} resolve Callback function to be called when the request is successful.\n\t * @param {Function} reject Callback function to be called when the request cannot be completed.\n\t * @param {File} file File instance to be uploaded.\n\t */\n    _initListeners(resolve, reject, file) {\n        const xhr = this.xhr;\n        const loader = this.loader;\n        const t = this.t;\n        const genericError = t('Cannot upload file:') + ` ${ file.name }.`;\n        xhr.addEventListener('error', () => reject(genericError));\n        xhr.addEventListener('abort', () => reject());\n        xhr.addEventListener('load', () => {\n            const response = xhr.response;\n            if (!response || !response.uploaded) {\n                return reject(response && response.error && response.error.message ? response.error.message : genericError);\n            }\n            resolve({ default: response.url });\n        });\n        // Upload progress when it's supported.\n        /* istanbul ignore else */\n        if (xhr.upload) {\n            xhr.upload.addEventListener('progress', evt => {\n                if (evt.lengthComputable) {\n                    loader.uploadTotal = evt.total;\n                    loader.uploaded = evt.loaded;\n                }\n            });\n        }\n    }\n    /**\n\t * Prepares the data and sends the request.\n\t *\n\t * @private\n\t * @param {File} file File instance to be uploaded.\n\t */\n    _sendRequest(file) {\n        // Prepare form data.\n        const data = new FormData();\n        data.append('upload', file);\n        data.append('ckCsrfToken', getCsrfToken());\n        // Send request.\n        this.xhr.send(data);\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/pendingactions\n */\n\nimport Plugin from './plugin';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * The list of pending editor actions.\n *\n * This plugin should be used to synchronise plugins that execute long-lasting actions\n * (e.g. file upload) with the editor integration. It gives the developer who integrates the editor\n * an easy way to check if there are any actions pending whenever such information is needed.\n * All plugins that register a pending action also provide a message about the action that is ongoing\n * which can be displayed to the user. This lets them decide if they want to interrupt the action or wait.\n *\n * Adding and updating a pending action:\n *\n * \t\tconst pendingActions = editor.plugins.get( 'PendingActions' );\n * \t\tconst action = pendingActions.add( 'Upload in progress: 0%.' );\n *\n *\t\t// You can update the message:\n * \t\taction.message = 'Upload in progress: 10%.';\n *\n * Removing a pending action:\n *\n * \t\tconst pendingActions = editor.plugins.get( 'PendingActions' );\n * \t\tconst action = pendingActions.add( 'Unsaved changes.' );\n *\n * \t\tpendingActions.remove( action );\n *\n * Getting pending actions:\n *\n * \t\tconst pendingActions = editor.plugins.get( 'PendingActions' );\n *\n * \t\tconst action1 = pendingActions.add( 'Action 1' );\n * \t\tconst action2 = pendingActions.add( 'Action 2' );\n *\n * \t\tpendingActions.first; // Returns action1\n * \t\tArray.from( pendingActions ); // Returns [ action1, action2 ]\n *\n * This plugin is used by features like {@link module:upload/filerepository~FileRepository} to register their ongoing actions\n * and by features like {@link module:autosave/autosave~Autosave} to detect whether there are any ongoing actions.\n * Read more about saving the data in the {@glink builds/guides/integration/saving-data Saving and getting data} guide.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class PendingActions extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'PendingActions';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\t/**\n\t\t * Defines whether there is any registered pending action.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #hasAny\n\t\t */\n\t\tthis.set( 'hasAny', false );\n\n\t\t/**\n\t\t * A list of pending actions.\n\t\t *\n\t\t * @private\n\t\t * @type {module:utils/collection~Collection}\n\t\t */\n\t\tthis._actions = new Collection( { idProperty: '_id' } );\n\t\tthis._actions.delegate( 'add', 'remove' ).to( this );\n\t}\n\n\t/**\n\t * Adds an action to the list of pending actions.\n\t *\n\t * This method returns an action object with an observable message property.\n\t * The action object can be later used in the {@link #remove} method. It also allows you to change the message.\n\t *\n\t * @param {String} message The action message.\n\t * @returns {Object} An observable object that represents a pending action.\n\t */\n\tadd( message ) {\n\t\tif ( typeof message !== 'string' ) {\n\t\t\t/**\n\t\t\t * The message must be a string.\n\t\t\t *\n\t\t\t * @error pendingactions-add-invalid-message\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'pendingactions-add-invalid-message: The message must be a string.', this );\n\t\t}\n\n\t\tconst action = Object.create( ObservableMixin );\n\n\t\taction.set( 'message', message );\n\t\tthis._actions.add( action );\n\t\tthis.hasAny = true;\n\n\t\treturn action;\n\t}\n\n\t/**\n\t * Removes an action from the list of pending actions.\n\t *\n\t * @param {Object} action An action object.\n\t */\n\tremove( action ) {\n\t\tthis._actions.remove( action );\n\t\tthis.hasAny = !!this._actions.length;\n\t}\n\n\t/**\n\t * Returns the first action from the list or null when list is empty\n\t *\n\t * returns {Object|null} The pending action object.\n\t */\n\tget first() {\n\t\treturn this._actions.get( 0 );\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._actions[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Fired when an action is added to the list.\n\t *\n\t * @event add\n\t * @param {Object} action The added action.\n\t */\n\n\t/**\n\t * Fired when an action is removed from the list.\n\t *\n\t * @event remove\n\t * @param {Object} action The removed action.\n\t */\n}\n","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" clip-rule=\\\"evenodd\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"1.414\\\"><path d=\\\"M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z\\\"/></svg>\"","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/setdatainelement\n */\n\n/* globals HTMLTextAreaElement */\n\n/**\n * Sets data in a given element.\n *\n * @param {HTMLElement} el The element in which the data will be set.\n * @param {String} data The data string.\n */\nexport default function setDataInElement( el, data ) {\n\tif ( el instanceof HTMLTextAreaElement ) {\n\t\tel.value = data;\n\t}\n\n\tel.innerHTML = data;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/toolbarseparatorview\n */\n\nimport View from '../view';\n\n/**\n * The toolbar separator view class.\n *\n * @extends module:ui/view~View\n */\nexport default class ToolbarSeparatorView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'span',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar__separator'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n}\n","module.exports = \"<svg viewBox=\\\"0 0 10 10\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z\\\"/></svg>\"","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/list/listview\n */\n\nimport View from '../view';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '../focuscycler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\n\nimport '../../theme/components/list/list.css';\n\n/**\n * The list view class.\n *\n * @extends module:ui/view~View\n * @implements module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable\n */\nexport default class ListView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\t/**\n\t\t * Collection of the child list views.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.items = this.createCollection();\n\n\t\t/**\n\t\t * Tracks information about DOM focus in the list.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.focusTracker = new FocusTracker();\n\n\t\t/**\n\t\t * Instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new KeystrokeHandler();\n\n\t\t/**\n\t\t * Helps cycling over focusable {@link #items} in the list.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n\t\tthis._focusCycler = new FocusCycler( {\n\t\t\tfocusables: this.items,\n\t\t\tfocusTracker: this.focusTracker,\n\t\t\tkeystrokeHandler: this.keystrokes,\n\t\t\tactions: {\n\t\t\t\t// Navigate list items backwards using the arrowup key.\n\t\t\t\tfocusPrevious: 'arrowup',\n\n\t\t\t\t// Navigate toolbar items forwards using the arrowdown key.\n\t\t\t\tfocusNext: 'arrowdown',\n\t\t\t}\n\t\t} );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'ul',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-reset',\n\t\t\t\t\t'ck-list'\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchildren: this.items\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Items added before rendering should be known to the #focusTracker.\n\t\tfor ( const item of this.items ) {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t}\n\n\t\tthis.items.on( 'add', ( evt, item ) => {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t} );\n\n\t\tthis.items.on( 'remove', ( evt, item ) => {\n\t\t\tthis.focusTracker.remove( item.element );\n\t\t} );\n\n\t\t// Start listening for the keystrokes coming from #element.\n\t\tthis.keystrokes.listenTo( this.element );\n\t}\n\n\t/**\n\t * Focuses the first focusable in {@link #items}.\n\t */\n\tfocus() {\n\t\tthis._focusCycler.focusFirst();\n\t}\n\n\t/**\n\t * Focuses the last focusable in {@link #items}.\n\t */\n\tfocusLast() {\n\t\tthis._focusCycler.focusLast();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/list/listitemview\n */\n\nimport View from '../view';\n\n/**\n * The list item view class.\n *\n * @extends module:ui/view~View\n */\nexport default class ListItemView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * Collection of the child views inside of the list item {@link #element}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'li',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-list__item'\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchildren: this.children\n\t\t} );\n\t}\n\n\t/**\n\t * Focuses the list item.\n\t */\n\tfocus() {\n\t\tthis.children.first.focus();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module basic-styles/italic/italicui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport italicIcon from '../../theme/icons/italic.svg';\nconst ITALIC = 'italic';\n/**\n * The italic UI feature. It introduces the Italic button.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ItalicUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const t = editor.t;\n        // Add bold button to feature components.\n        editor.ui.componentFactory.add(ITALIC, locale => {\n            const command = editor.commands.get(ITALIC);\n            const view = new ButtonView(locale);\n            view.set({\n                label: t('Italic'),\n                icon: italicIcon,\n                keystroke: 'CTRL+I',\n                tooltip: true\n            });\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n            // Execute command.\n            this.listenTo(view, 'execute', () => editor.execute(ITALIC));\n            return view;\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module basic-styles/italic\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ItalicEditing from './italic/italicediting';\nimport ItalicUI from './italic/italicui';\n\n/**\n * The italic feature.\n *\n * For a detailed overview check the {@glink features/basic-styles Basic styles feature documentation}\n * and the {@glink api/basic-styles package page}.\n *\n * This is a \"glue\" plugin which loads the {@link module:basic-styles/italic/italicediting~ItalicEditing} and\n * {@link module:basic-styles/italic/italicui~ItalicUI} plugins.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Italic extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ItalicEditing, ItalicUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Italic';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module basic-styles/bold/boldui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport boldIcon from '../../theme/icons/bold.svg';\nconst BOLD = 'bold';\n/**\n * The bold UI feature. It introduces the Bold button.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class BoldUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const t = editor.t;\n        // Add bold button to feature components.\n        editor.ui.componentFactory.add(BOLD, locale => {\n            const command = editor.commands.get(BOLD);\n            const view = new ButtonView(locale);\n            view.set({\n                label: t('Bold'),\n                icon: boldIcon,\n                keystroke: 'CTRL+B',\n                tooltip: true\n            });\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n            // Execute command.\n            this.listenTo(view, 'execute', () => editor.execute(BOLD));\n            return view;\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module basic-styles/bold\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport BoldEditing from './bold/boldediting';\nimport BoldUI from './bold/boldui';\n\n/**\n * The bold feature.\n *\n * For a detailed overview check the {@glink features/basic-styles Basic styles feature documentation}\n * and the {@glink api/basic-styles package page}.\n *\n * This is a \"glue\" plugin which loads the {@link module:basic-styles/bold/boldediting~BoldEditing bold editing feature}\n * and {@link module:basic-styles/bold/boldui~BoldUI bold UI feature}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Bold extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ BoldEditing, BoldUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Bold';\n\t}\n}\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editor/utils/dataapimixin\n */\n\n/**\n * Implementation of the {@link module:core/editor/utils/dataapimixin~DataApi}.\n *\n * @mixin DataApiMixin\n * @implements module:core/editor/utils/dataapimixin~DataApi\n */\nconst DataApiMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\tsetData( data ) {\n\t\tthis.data.set( data );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tgetData( options ) {\n\t\treturn this.data.get( options );\n\t}\n};\n\nexport default DataApiMixin;\n\n/**\n * Interface defining editor methods for setting and getting data to and from the editor's main root element\n * using the {@link module:core/editor/editor~Editor#data data pipeline}.\n *\n * This interface is not a part of the {@link module:core/editor/editor~Editor} class because one may want to implement\n * an editor with multiple root elements, in which case the methods for setting and getting data will need to be implemented\n * differently.\n *\n * @interface DataApi\n */\n\n/**\n * Sets the data in the editor.\n *\n *\t\teditor.setData( '<p>This is editor!</p>' );\n *\n * By default the editor accepts HTML. This can be controlled by injecting a different data processor.\n * See the {@glink features/markdown Markdown output} guide for more details.\n *\n * Note: Not only is the format of the data configurable, but the type of the `setData()`'s parameter does not\n * have to be a string either. You can e.g. accept an object or a DOM `DocumentFragment` if you consider this\n * the right format for you.\n *\n * @method #setData\n * @param {String} data Input data.\n */\n\n/**\n * Gets the data from the editor.\n *\n *\t\teditor.getData(); // -> '<p>This is editor!</p>'\n *\n * By default the editor outputs HTML. This can be controlled by injecting a different data processor.\n * See the {@glink features/markdown Markdown output} guide for more details.\n *\n * Note: Not only is the format of the data configurable, but the type of the `getData()`'s return value does not\n * have to be a string either. You can e.g. return an object or a DOM `DocumentFragment` if you consider this\n * the right format for you.\n *\n * @method #getData\n * @param {Object} [options]\n * @param {String} [options.rootName='main'] Root name.\n * @param {String} [options.trim='empty'] Whether returned data should be trimmed. This option is set to `'empty'` by default,\n * which means that whenever editor content is considered empty, an empty string is returned. To turn off trimming\n * use `'none'`. In such cases exact content will be returned (for example `'<p>&nbsp;</p>'` for an empty editor).\n * @returns {String} Output data.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/editorui/editoruiview\n */\n\n/* globals document */\n\nimport View from '../view';\nimport Template from '../template';\n\nimport '../../theme/components/editorui/editorui.css';\n\n/**\n * The editor UI view class. Base class for the editor main views.\n *\n * @extends module:ui/view~View\n */\nexport default class EditorUIView extends View {\n\t/**\n\t * Creates an instance of the editor UI view class.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The locale instance.\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * Collection of the child views, detached from the DOM\n\t\t * structure of the editor, like panels, icons etc.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection} #body\n\t\t */\n\t\tthis.body = this.createCollection();\n\n\t\t/**\n\t\t * The element holding elements of the 'body' region.\n\t\t *\n\t\t * @private\n\t\t * @member {HTMLElement} #_bodyCollectionContainer\n\t\t */\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tthis._renderBodyCollection();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis._bodyCollectionContainer.remove();\n\n\t\treturn super.destroy();\n\t}\n\n\t/**\n\t * Creates and appends to `<body>` the {@link #body} collection container.\n\t *\n\t * @private\n\t */\n\t_renderBodyCollection() {\n\t\tconst bodyElement = this._bodyCollectionContainer = new Template( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-reset_all',\n\t\t\t\t\t'ck-body',\n\t\t\t\t\t'ck-rounded-corners'\n\t\t\t\t]\n\t\t\t},\n\t\t\tchildren: this.body\n\t\t} ).render();\n\n\t\tdocument.body.appendChild( bodyElement );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals HTMLTextAreaElement */\n\n/**\n * @module utils/dom/getdatafromelement\n */\n\n/**\n * Gets data from a given source element.\n *\n * @param {HTMLElement} el The element from which the data will be retrieved.\n * @returns {String} The data string.\n */\nexport default function getDataFromElement( el ) {\n\tif ( el instanceof HTMLTextAreaElement ) {\n\t\treturn el.value;\n\t}\n\n\treturn el.innerHTML;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module basic-styles/bold/boldediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport AttributeCommand from '../attributecommand';\n\nconst BOLD = 'bold';\n\n/**\n * The bold editing feature.\n *\n * It registers the `'bold'` command and introduces the `bold` attribute in the model which renders to the view\n * as a `<strong>` element.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class BoldEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\t// Allow bold attribute on text nodes.\n\t\teditor.model.schema.extend( '$text', { allowAttributes: BOLD } );\n\t\teditor.model.schema.setAttributeProperties( BOLD, { isFormatting: true } );\n\n\t\t// Build converter from model to view for data and editing pipelines.\n\n\t\teditor.conversion.attributeToElement( {\n\t\t\tmodel: BOLD,\n\t\t\tview: 'strong',\n\t\t\tupcastAlso: [\n\t\t\t\t'b',\n\t\t\t\t{\n\t\t\t\t\tstyles: {\n\t\t\t\t\t\t'font-weight': 'bold'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\n\t\t// Create bold command.\n\t\teditor.commands.add( BOLD, new AttributeCommand( editor, BOLD ) );\n\n\t\t// Set the Ctrl+B keystroke.\n\t\teditor.keystrokes.set( 'CTRL+B', BOLD );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module basic-styles/italic/italicediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport AttributeCommand from '../attributecommand';\n\nconst ITALIC = 'italic';\n\n/**\n * The italic editing feature.\n *\n * It registers the `'italic'` command, the <kbd>Ctrl+I</kbd> keystroke and introduces the `italic` attribute in the model\n * which renders to the view as an `<i>` element.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ItalicEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\t// Allow italic attribute on text nodes.\n\t\teditor.model.schema.extend( '$text', { allowAttributes: ITALIC } );\n\t\teditor.model.schema.setAttributeProperties( ITALIC, { isFormatting: true } );\n\n\t\teditor.conversion.attributeToElement( {\n\t\t\tmodel: ITALIC,\n\t\t\tview: 'i',\n\t\t\tupcastAlso: [\n\t\t\t\t'em',\n\t\t\t\t{\n\t\t\t\t\tstyles: {\n\t\t\t\t\t\t'font-style': 'italic'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\n\t\t// Create italic command.\n\t\teditor.commands.add( ITALIC, new AttributeCommand( editor, ITALIC ) );\n\n\t\t// Set the Ctrl+I keystroke.\n\t\teditor.keystrokes.set( 'CTRL+I', ITALIC );\n\t}\n}\n","module.exports = \"<svg viewBox=\\\"0 0 16 16\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z\\\"/><path fill-opacity=\\\".256\\\" d=\\\"M1 1h14v14H1z\\\"/><g class=\\\"ck-icon__selected-indicator\\\"><path d=\\\"M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z\\\"/><path fill-opacity=\\\".254\\\" d=\\\"M1 1h14v14H1z\\\"/></g></svg>\"","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/config\n */\n\nimport { isPlainObject, isElement, cloneDeepWith } from 'lodash-es';\n\n/**\n * Handles a configuration dictionary.\n */\nexport default class Config {\n\t/**\n\t * Creates an instance of the {@link ~Config} class.\n\t *\n\t * @param {Object} [configurations] The initial configurations to be set. Usually, provided by the user.\n\t * @param {Object} [defaultConfigurations] The default configurations. Usually, provided by the system.\n\t */\n\tconstructor( configurations, defaultConfigurations ) {\n\t\t/**\n\t\t * Store for the whole configuration.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._config = {};\n\n\t\t// Set default configuration.\n\t\tif ( defaultConfigurations ) {\n\t\t\tthis.define( defaultConfigurations );\n\t\t}\n\n\t\t// Set initial configuration.\n\t\tif ( configurations ) {\n\t\t\tthis._setObjectToTarget( this._config, configurations );\n\t\t}\n\t}\n\n\t/**\n\t * Set configuration values.\n\t *\n\t * It accepts both a name/value pair or an object, which properties and values will be used to set\n\t * configurations.\n\t *\n\t * It also accepts setting a \"deep configuration\" by using dots in the name. For example, `'resize.width'` sets\n\t * the value for the `width` configuration in the `resize` subset.\n\t *\n\t *\t\tconfig.set( 'width', 500 );\n\t *\t\tconfig.set( 'toolbar.collapsed', true );\n\t *\n\t *\t\t// Equivalent to:\n\t *\t\tconfig.set( {\n\t *\t\t\twidth: 500\n\t *\t\t\ttoolbar: {\n\t *\t\t\t\tcollapsed: true\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Passing an object as the value will amend the configuration, not replace it.\n\t *\n\t *\t\tconfig.set( 'toolbar', {\n\t *\t\t\tcollapsed: true,\n\t *\t\t} );\n\t *\n\t *\t\tconfig.set( 'toolbar', {\n\t *\t\t\tcolor: 'red',\n\t *\t\t} );\n\t *\n\t *\t\tconfig.get( 'toolbar.collapsed' ); // true\n\t *\t\tconfig.get( 'toolbar.color' ); // 'red'\n\t *\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t */\n\tset( name, value ) {\n\t\tthis._setToTarget( this._config, name, value );\n\t}\n\n\t/**\n\t * Does exactly the same as {@link #set} with one exception – passed configuration extends\n\t * existing one, but does not overwrite already defined values.\n\t *\n\t * This method is supposed to be called by plugin developers to setup plugin's configurations. It would be\n\t * rarely used for other needs.\n\t *\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t */\n\tdefine( name, value ) {\n\t\tconst isDefine = true;\n\n\t\tthis._setToTarget( this._config, name, value, isDefine );\n\t}\n\n\t/**\n\t * Gets the value for a configuration entry.\n\t *\n\t *\t\tconfig.get( 'name' );\n\t *\n\t * Deep configurations can be retrieved by separating each part with a dot.\n\t *\n\t *\t\tconfig.get( 'toolbar.collapsed' );\n\t *\n\t * @param {String} name The configuration name. Configuration names are case-sensitive.\n\t * @returns {*} The configuration value or `undefined` if the configuration entry was not found.\n\t */\n\tget( name ) {\n\t\treturn this._getFromSource( this._config, name );\n\t}\n\n\t/**\n\t * Saves passed configuration to the specified target (nested object).\n\t *\n\t * @private\n\t * @param {Object} target Nested config object.\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t * @param {Boolean} [isDefine=false] Define if passed configuration should overwrite existing one.\n\t */\n\t_setToTarget( target, name, value, isDefine = false ) {\n\t\t// In case of an object, iterate through it and call `_setToTarget` again for each property.\n\t\tif ( isPlainObject( name ) ) {\n\t\t\tthis._setObjectToTarget( target, name, isDefine );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n\t\tconst parts = name.split( '.' );\n\n\t\t// Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n\t\tname = parts.pop();\n\n\t\t// Iterate over parts to check if currently stored configuration has proper structure.\n\t\tfor ( const part of parts ) {\n\t\t\t// If there is no object for specified part then create one.\n\t\t\tif ( !isPlainObject( target[ part ] ) ) {\n\t\t\t\ttarget[ part ] = {};\n\t\t\t}\n\n\t\t\t// Nested object becomes a target.\n\t\t\ttarget = target[ part ];\n\t\t}\n\n\t\t// In case of value is an object.\n\t\tif ( isPlainObject( value ) ) {\n\t\t\t// We take care of proper config structure.\n\t\t\tif ( !isPlainObject( target[ name ] ) ) {\n\t\t\t\ttarget[ name ] = {};\n\t\t\t}\n\n\t\t\ttarget = target[ name ];\n\n\t\t\t// And iterate through this object calling `_setToTarget` again for each property.\n\t\t\tthis._setObjectToTarget( target, value, isDefine );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Do nothing if we are defining configuration for non empty name.\n\t\tif ( isDefine && typeof target[ name ] != 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttarget[ name ] = value;\n\t}\n\n\t/**\n\t * Get specified configuration from specified source (nested object).\n\t *\n\t * @private\n\t * @param {Object} source level of nested object.\n\t * @param {String} name The configuration name. Configuration names are case-sensitive.\n\t * @returns {*} The configuration value or `undefined` if the configuration entry was not found.\n\t */\n\t_getFromSource( source, name ) {\n\t\t// The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n\t\tconst parts = name.split( '.' );\n\n\t\t// Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n\t\tname = parts.pop();\n\n\t\t// Iterate over parts to check if currently stored configuration has proper structure.\n\t\tfor ( const part of parts ) {\n\t\t\tif ( !isPlainObject( source[ part ] ) ) {\n\t\t\t\tsource = null;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Nested object becomes a source.\n\t\t\tsource = source[ part ];\n\t\t}\n\n\t\t// Always returns undefined for non existing configuration.\n\t\treturn source ? cloneConfig( source[ name ] ) : undefined;\n\t}\n\n\t/**\n\t * Iterates through passed object and calls {@link #_setToTarget} method with object key and value for each property.\n\t *\n\t * @private\n\t * @param {Object} target Nested config object.\n\t * @param {Object} configuration Configuration data set\n\t * @param {Boolean} [isDefine] Defines if passed configuration is default configuration or not.\n\t */\n\t_setObjectToTarget( target, configuration, isDefine ) {\n\t\tObject.keys( configuration ).forEach( key => {\n\t\t\tthis._setToTarget( target, key, configuration[ key ], isDefine );\n\t\t} );\n\t}\n}\n\n// Clones configuration object or value.\n// @param {*} source Source configuration\n// @returns {*} Cloned configuration value.\nfunction cloneConfig( source ) {\n\treturn cloneDeepWith( source, leaveDOMReferences );\n}\n\n// A customizer function for cloneDeepWith.\n// It will leave references to DOM Elements instead of cloning them.\n//\n// @param {*} value\n// @returns {Element|undefined}\nfunction leaveDOMReferences( value ) {\n\treturn isElement( value ) ? value : undefined;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/rooteditableelement\n */\n\nimport EditableElement from './editableelement';\n\nconst rootNameSymbol = Symbol( 'rootName' );\n\n/**\n * Class representing a single root in the data view. A root can be either {@link ~RootEditableElement#isReadOnly editable or read-only},\n * but in both cases it is called \"an editable\". Roots can contain other {@link module:engine/view/editableelement~EditableElement\n * editable elements} making them \"nested editables\".\n *\n * @extends module:engine/view/editableelement~EditableElement\n */\nexport default class RootEditableElement extends EditableElement {\n\t/**\n\t * Creates root editable element.\n\t *\n\t * @param {String} name Node name.\n\t */\n\tconstructor( name ) {\n\t\tsuper( name );\n\n\t\t/**\n\t\t * Name of this root inside {@link module:engine/view/document~Document} that is an owner of this root. If no\n\t\t * other name is set, `main` name is used.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.rootName = 'main';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'rootElement' || super.is( type );\n\t\t} else {\n\t\t\treturn ( type == 'rootElement' && name == this.name ) || super.is( type, name );\n\t\t}\n\t}\n\n\tget rootName() {\n\t\treturn this.getCustomProperty( rootNameSymbol );\n\t}\n\n\tset rootName( rootName ) {\n\t\tthis._setCustomProperty( rootNameSymbol, rootName );\n\t}\n\n\t/**\n\t * Overrides old element name and sets new one.\n\t * This is needed because view roots are created before they are attached to the DOM.\n\t * The name of the root element is temporary at this stage. It has to be changed when the\n\t * view root element is attached to the DOM element.\n\t *\n\t * @protected\n\t * @param {String} name The new name of element.\n\t */\n\tset _name( name ) {\n\t\tthis.name = name;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/document\n */\n\nimport DocumentSelection from './documentselection';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\n\n/**\n * Document class creates an abstract layer over the content editable area, contains a tree of view elements and\n * {@link module:engine/view/documentselection~DocumentSelection view selection} associated with this document.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Document {\n\t/**\n\t * Creates a Document instance.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Selection done on this document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection} module:engine/view/document~Document#selection\n\t\t */\n\t\tthis.selection = new DocumentSelection();\n\n\t\t/**\n\t\t * Roots of the view tree. Collection of the {@link module:engine/view/element~Element view elements}.\n\t\t *\n\t\t * View roots are created as a result of binding between {@link module:engine/view/document~Document#roots} and\n\t\t * {@link module:engine/model/document~Document#roots} and this is handled by\n\t\t * {@link module:engine/controller/editingcontroller~EditingController}, so to create view root we need to create\n\t\t * model root using {@link module:engine/model/document~Document#createRoot}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/collection~Collection} module:engine/view/document~Document#roots\n\t\t */\n\t\tthis.roots = new Collection( { idProperty: 'rootName' } );\n\n\t\t/**\n\t\t * Defines whether document is in read-only mode.\n\t\t *\n\t\t * When document is read-ony then all roots are read-only as well and caret placed inside this root is hidden.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * True if document is focused.\n\t\t *\n\t\t * This property is updated by the {@link module:engine/view/observer/focusobserver~FocusObserver}.\n\t\t * If the {@link module:engine/view/observer/focusobserver~FocusObserver} is disabled this property will not change.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/document~Document#isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\t/**\n\t\t * True if composition is in progress inside the document.\n\t\t *\n\t\t * This property is updated by the {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n\t\t * If the {@link module:engine/view/observer/compositionobserver~CompositionObserver} is disabled this property will not change.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/document~Document#isComposing\n\t\t */\n\t\tthis.set( 'isComposing', false );\n\n\t\t/**\n\t\t * Post-fixer callbacks registered to the view document.\n\t\t *\n\t\t * @private\n\t\t * @member {Set}\n\t\t */\n\t\tthis._postFixers = new Set();\n\t}\n\n\t/**\n\t * Gets a {@link module:engine/view/document~Document#roots view root element} with the specified name. If the name is not\n\t * specific \"main\" root is returned.\n\t *\n\t * @param {String} [name='main'] Name of the root.\n\t * @returns {module:engine/view/rooteditableelement~RootEditableElement|null} The view root element with the specified name\n\t * or null when there is no root of given name.\n\t */\n\tgetRoot( name = 'main' ) {\n\t\treturn this.roots.get( name );\n\t}\n\n\t/**\n\t * Used to register a post-fixer callback. A post-fixers mechanism allows to update view tree just before rendering\n\t * to the DOM.\n\t *\n\t * Post-fixers are fired just after all changes from the outermost change block were applied but\n\t * before the {@link module:engine/view/view~View#event:render render event} is fired. If a post-fixer callback made\n\t * a change, it should return `true`. When this happens, all post-fixers are fired again to check if something else should\n\t * not be fixed in the new document tree state.\n\t *\n\t * View post-fixers are useful when you wants to update view structure whenever it changes, for instance add some classes\n\t * to elements based on the view structure or selection. However, is you need DOM elements to be already updated, use\n\t * {@link module:engine/view/view~View#event:render render event}.\n\t *\n\t * As a parameter, a post-fixer callback receives a {@link module:engine/view/downcastwriter~DowncastWriter downcast writer}\n\t * instance connected with the executed changes block.\n\t *\n\t * Note that registering a post-fixer won't re-render the editor's view. If the view should change after registering the post-fixer then\n\t * it should be done manually calling `view.forceRender();`.\n\t *\n\t * @param {Function} postFixer\n\t */\n\tregisterPostFixer( postFixer ) {\n\t\tthis._postFixers.add( postFixer );\n\t}\n\n\t/**\n\t * Destroys this instance. Makes sure that all observers are destroyed and listeners removed.\n\t */\n\tdestroy() {\n\t\tthis.roots.map( root => root.destroy() );\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Performs post-fixer loops. Executes post-fixer callbacks as long as none of them has done any changes to the model.\n\t *\n\t * @protected\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n\t */\n\t_callPostFixers( writer ) {\n\t\tlet wasFixed = false;\n\n\t\tdo {\n\t\t\tfor ( const callback of this._postFixers ) {\n\t\t\t\twasFixed = callback( writer );\n\n\t\t\t\tif ( wasFixed ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} while ( wasFixed );\n\t}\n\n\t/**\n\t * Event fired whenever document content layout changes. It is fired whenever content is\n\t * {@link module:engine/view/view~View#event:render rendered}, but should be also fired by observers in case of\n\t * other actions which may change layout, for instance when image loads.\n\t *\n\t * @event layoutChanged\n\t */\n}\n\nmix( Document, ObservableMixin );\n\n/**\n * Enum representing type of the change.\n *\n * Possible values:\n *\n * * `children` - for child list changes,\n * * `attributes` - for element attributes changes,\n * * `text` - for text nodes changes.\n *\n * @typedef {String} module:engine/view/document~ChangeType\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/attributeelement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// Default attribute priority.\nconst DEFAULT_PRIORITY = 10;\n\n/**\n * Attribute elements are used to represent formatting elements in the view (think – `<b>`, `<span style=\"font-size: 2em\">`, etc.).\n * Most often they are created when downcasting model text attributes.\n *\n * Editing engine does not define a fixed HTML DTD. This is why a feature developer needs to choose between various\n * types (container element, {@link module:engine/view/attributeelement~AttributeElement attribute element},\n * {@link module:engine/view/emptyelement~EmptyElement empty element}, etc) when developing a feature.\n *\n * To create a new attribute element instance use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createAttributeElement `DowncastWriter#createAttributeElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class AttributeElement extends Element {\n\t/**\n\t * Creates an attribute element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createAttributeElement\n\t * @see module:engine/view/element~Element\n\t * @protected\n\t */\n\tconstructor( name, attrs, children ) {\n\t\tsuper( name, attrs, children );\n\n\t\t/**\n\t\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\n\t\t/**\n\t\t * Element priority. Decides in what order elements are wrapped by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t\t *\n\t\t * @protected\n\t\t * @member {Number}\n\t\t */\n\t\tthis._priority = DEFAULT_PRIORITY;\n\n\t\t/**\n\t\t * Element identifier. If set, it is used by {@link module:engine/view/element~Element#isSimilar},\n\t\t * and then two elements are considered similar if, and only if they have the same `_id`.\n\t\t *\n\t\t * @protected\n\t\t * @member {String|Number}\n\t\t */\n\t\tthis._id = null;\n\n\t\t/**\n\t\t * Keeps all the attribute elements that have the same {@link module:engine/view/attributeelement~AttributeElement#id ids}\n\t\t * and still exist in the view tree.\n\t\t *\n\t\t * This property is managed by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t\t *\n\t\t * @protected\n\t\t * @member {Set.<module:engine/view/attributeelement~AttributeElement>|null}\n\t\t */\n\t\tthis._clonesGroup = null;\n\t}\n\n\t/**\n\t * Element priority. Decides in what order elements are wrapped by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\t/**\n\t * Element identifier. If set, it is used by {@link module:engine/view/element~Element#isSimilar},\n\t * and then two elements are considered similar if, and only if they have the same `id`.\n\t *\n\t * @readonly\n\t * @type {String|Number}\n\t */\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\t/**\n\t * Returns all {@link module:engine/view/attributeelement~AttributeElement attribute elements} that has the\n\t * same {@link module:engine/view/attributeelement~AttributeElement#id id} and are in the view tree (were not removed).\n\t *\n\t * Note: If this element has been removed from the tree, returned set will not include it.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError attribute-element-get-elements-with-same-id-no-id}\n\t * if this element has no `id`.\n\t *\n\t * @returns {Set.<module:engine/view/attributeelement~AttributeElement>} Set containing all the attribute elements\n\t * with the same `id` that were added and not removed from the view tree.\n\t */\n\tgetElementsWithSameId() {\n\t\tif ( this.id === null ) {\n\t\t\t/**\n\t\t\t * Cannot get elements with the same id for an attribute element without id.\n\t\t\t *\n\t\t\t * @error attribute-element-get-elements-with-same-id-no-id\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'attribute-element-get-elements-with-same-id-no-id: ' +\n\t\t\t\t'Cannot get elements with the same id for an attribute element without id.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\treturn new Set( this._clonesGroup );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'attributeElement' || super.is( type );\n\t\t} else {\n\t\t\treturn ( type == 'attributeElement' && name == this.name ) || super.is( type, name );\n\t\t}\n\t}\n\n\t/**\n\t * Checks if this element is similar to other element.\n\t *\n\t * If none of elements has set {@link module:engine/view/attributeelement~AttributeElement#id}, then both elements\n\t * should have the same name, attributes and priority to be considered as similar. Two similar elements can contain\n\t * different set of children nodes.\n\t *\n\t * If at least one element has {@link module:engine/view/attributeelement~AttributeElement#id} set, then both\n\t * elements have to have the same {@link module:engine/view/attributeelement~AttributeElement#id} value to be\n\t * considered similar.\n\t *\n\t * Similarity is important for {@link module:engine/view/downcastwriter~DowncastWriter}. For example:\n\t *\n\t * * two following similar elements can be merged together into one, longer element,\n\t * * {@link module:engine/view/downcastwriter~DowncastWriter#unwrap} checks similarity of passed element and processed element to\n\t * decide whether processed element should be unwrapped,\n\t * * etc.\n\t *\n\t * @param {module:engine/view/element~Element} otherElement\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherElement ) {\n\t\t// If any element has an `id` set, just compare the ids.\n\t\tif ( this.id !== null || otherElement.id !== null ) {\n\t\t\treturn this.id === otherElement.id;\n\t\t}\n\n\t\treturn super.isSimilar( otherElement ) && this.priority == otherElement.priority;\n\t}\n\n\t/**\n\t * Clones provided element with priority.\n\t *\n\t * @protected\n\t * @param {Boolean} deep If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any children.\n\t * @returns {module:engine/view/attributeelement~AttributeElement} Clone of this element.\n\t */\n\t_clone( deep ) {\n\t\tconst cloned = super._clone( deep );\n\n\t\t// Clone priority too.\n\t\tcloned._priority = this._priority;\n\n\t\t// And id too.\n\t\tcloned._id = this._id;\n\n\t\treturn cloned;\n\t}\n}\n\n/**\n * Default attribute priority.\n *\n * @member {Number} module:engine/view/attributeelement~AttributeElement.DEFAULT_PRIORITY\n */\nAttributeElement.DEFAULT_PRIORITY = DEFAULT_PRIORITY;\n\n// Returns block {@link module:engine/view/filler~Filler filler} offset or `null` if block filler is not needed.\n//\n// @returns {Number|null} Block filler offset or `null` if block filler is not needed.\nfunction getFillerOffset() {\n\t// <b>foo</b> does not need filler.\n\tif ( nonUiChildrenCount( this ) ) {\n\t\treturn null;\n\t}\n\n\tlet element = this.parent;\n\n\t// <p><b></b></p> needs filler -> <p><b><br></b></p>\n\twhile ( element && element.is( 'attributeElement' ) ) {\n\t\tif ( nonUiChildrenCount( element ) > 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\telement = element.parent;\n\t}\n\n\tif ( !element || nonUiChildrenCount( element ) > 1 ) {\n\t\treturn null;\n\t}\n\n\t// Render block filler at the end of element (after all ui elements).\n\treturn this.childCount;\n}\n\n// Returns total count of children that are not {@link module:engine/view/uielement~UIElement UIElements}.\n//\n// @param {module:engine/view/element~Element} element\n// @returns {Number}\nfunction nonUiChildrenCount( element ) {\n\treturn Array.from( element.getChildren() ).filter( element => !element.is( 'uiElement' ) ).length;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/emptyelement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Node from './node';\n\n/**\n * Empty element class. It is used to represent elements that cannot contain any child nodes (for example `<img>` elements).\n *\n * To create a new empty element use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createEmptyElement `downcastWriter#createEmptyElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class EmptyElement extends Element {\n\t/**\n\t * Creates new instance of EmptyElement.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-emptyelement-cannot-add` when third parameter is passed,\n\t * to inform that usage of EmptyElement is incorrect (adding child nodes to EmptyElement is forbidden).\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createEmptyElement\n\t * @protected\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attributes] Collection of attributes.\n\t */\n\tconstructor( name, attributes, children ) {\n\t\tsuper( name, attributes, children );\n\n\t\t/**\n\t\t * Returns `null` because filler is not needed for EmptyElements.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {null} Always returns null.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'emptyElement' || super.is( type );\n\t\t} else {\n\t\t\treturn ( type == 'emptyElement' && name == this.name ) || super.is( type, name );\n\t\t}\n\t}\n\n\t/**\n\t * Overrides {@link module:engine/view/element~Element#_insertChild} method.\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-emptyelement-cannot-add` to prevent\n\t * adding any child nodes to EmptyElement.\n\t *\n\t * @protected\n\t */\n\t_insertChild( index, nodes ) {\n\t\tif ( nodes && ( nodes instanceof Node || Array.from( nodes ).length > 0 ) ) {\n\t\t\t/**\n\t\t\t * Cannot add children to {@link module:engine/view/emptyelement~EmptyElement}.\n\t\t\t *\n\t\t\t * @error view-emptyelement-cannot-add\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.',\n\t\t\t\t[ this, nodes ]\n\t\t\t);\n\t\t}\n\t}\n}\n\n// Returns `null` because block filler is not needed for EmptyElements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/uielement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Node from './node';\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\n/**\n * UI element class. It should be used to represent editing UI which needs to be injected into the editing view\n * If possible, you should keep your UI outside the editing view. However, if that is not possible,\n * UI elements can be used.\n *\n * How a UI element is rendered is in your control (you pass a callback to\n * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`}).\n * The editor will ignore your UI element – the selection cannot be placed in it, it is skipped (invisible) when\n * the user modifies the selection by using arrow keys and the editor does not listen to any mutations which\n * happen inside your UI elements.\n *\n * The limitation is that you cannot convert a model element to a UI element. UI elements need to be\n * created for {@link module:engine/model/markercollection~Marker markers} or as additinal elements\n * inside normal {@link module:engine/view/containerelement~ContainerElement container elements}.\n *\n * To create a new UI element use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class UIElement extends Element {\n\t/**\n\t * Creates new instance of UIElement.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-uielement-cannot-add` when third parameter is passed,\n\t * to inform that usage of UIElement is incorrect (adding child nodes to UIElement is forbidden).\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createUIElement\n\t * @protected\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attributes] Collection of attributes.\n\t */\n\tconstructor( name, attributes, children ) {\n\t\tsuper( name, attributes, children );\n\n\t\t/**\n\t\t * Returns `null` because filler is not needed for UIElements.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {null} Always returns null.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'uiElement' || super.is( type );\n\t\t} else {\n\t\t\treturn ( type == 'uiElement' && name == this.name ) || super.is( type, name );\n\t\t}\n\t}\n\n\t/**\n\t * Overrides {@link module:engine/view/element~Element#_insertChild} method.\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-uielement-cannot-add` to prevent adding any child nodes\n\t * to UIElement.\n\t *\n\t * @protected\n\t */\n\t_insertChild( index, nodes ) {\n\t\tif ( nodes && ( nodes instanceof Node || Array.from( nodes ).length > 0 ) ) {\n\t\t\t/**\n\t\t\t * Cannot add children to {@link module:engine/view/uielement~UIElement}.\n\t\t\t *\n\t\t\t * @error view-uielement-cannot-add\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-uielement-cannot-add: Cannot add child nodes to UIElement instance.', this );\n\t\t}\n\t}\n\n\t/**\n\t * Renders this {@link module:engine/view/uielement~UIElement} to DOM. This method is called by\n\t * {@link module:engine/view/domconverter~DomConverter}.\n\t * Do not use inheritance to create custom rendering method, replace `render()` method instead:\n\t *\n\t *\t\tconst myUIElement = downcastWriter.createUIElement( 'span' );\n\t *\t\tmyUIElement.render = function( domDocument ) {\n\t *\t\t\tconst domElement = this.toDomElement( domDocument );\n\t *\t\t\tdomElement.innerHTML = '<b>this is ui element</b>';\n\t *\n\t *\t\t\treturn domElement;\n\t *\t\t};\n\t *\n\t * @param {Document} domDocument\n\t * @returns {HTMLElement}\n\t */\n\trender( domDocument ) {\n\t\treturn this.toDomElement( domDocument );\n\t}\n\n\t/**\n\t * Creates DOM element based on this view UIElement.\n\t * Note that each time this method is called new DOM element is created.\n\t *\n\t * @param {Document} domDocument\n\t * @returns {HTMLElement}\n\t */\n\ttoDomElement( domDocument ) {\n\t\tconst domElement = domDocument.createElement( this.name );\n\n\t\tfor ( const key of this.getAttributeKeys() ) {\n\t\t\tdomElement.setAttribute( key, this.getAttribute( key ) );\n\t\t}\n\n\t\treturn domElement;\n\t}\n}\n\n/**\n * This function injects UI element handling to the given {@link module:engine/view/document~Document document}.\n *\n * A callback is added to {@link module:engine/view/document~Document#event:keydown document keydown event}.\n * The callback handles the situation when right arrow key is pressed and selection is collapsed before a UI element.\n * Without this handler, it would be impossible to \"jump over\" UI element using right arrow key.\n *\n * @param {module:engine/view/view~View} view View controller to which the quirks handling will be injected.\n */\nexport function injectUiElementHandling( view ) {\n\tview.document.on( 'keydown', ( evt, data ) => jumpOverUiElement( evt, data, view.domConverter ) );\n}\n\n// Returns `null` because block filler is not needed for UIElements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n\n// Selection cannot be placed in a `UIElement`. Whenever it is placed there, it is moved before it. This\n// causes a situation when it is impossible to jump over `UIElement` using right arrow key, because the selection\n// ends up in ui element (in DOM) and is moved back to the left. This handler fixes this situation.\nfunction jumpOverUiElement( evt, data, domConverter ) {\n\tif ( data.keyCode == keyCodes.arrowright ) {\n\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\t\tconst domSelectionCollapsed = domSelection.rangeCount == 1 && domSelection.getRangeAt( 0 ).collapsed;\n\n\t\t// Jump over UI element if selection is collapsed or shift key is pressed. These are the cases when selection would extend.\n\t\tif ( domSelectionCollapsed || data.shiftKey ) {\n\t\t\tconst domParent = domSelection.focusNode;\n\t\t\tconst domOffset = domSelection.focusOffset;\n\n\t\t\tconst viewPosition = domConverter.domPositionToView( domParent, domOffset );\n\n\t\t\t// In case if dom element is not converted to view or is not mapped or something. Happens for example in some tests.\n\t\t\tif ( viewPosition === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Skip all following ui elements.\n\t\t\tlet jumpedOverAnyUiElement = false;\n\n\t\t\tconst nextViewPosition = viewPosition.getLastMatchingPosition( value => {\n\t\t\t\tif ( value.item.is( 'uiElement' ) ) {\n\t\t\t\t\t// Remember that there was at least one ui element.\n\t\t\t\t\tjumpedOverAnyUiElement = true;\n\t\t\t\t}\n\n\t\t\t\t// Jump over ui elements, jump over empty attribute elements, move up from inside of attribute element.\n\t\t\t\tif ( value.item.is( 'uiElement' ) || value.item.is( 'attributeElement' ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Don't jump over text or don't get out of container element.\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\t// If anything has been skipped, fix position.\n\t\t\t// This `if` could be possibly omitted but maybe it is better not to mess with DOM selection if not needed.\n\t\t\tif ( jumpedOverAnyUiElement ) {\n\t\t\t\tconst newDomPosition = domConverter.viewPositionToDom( nextViewPosition );\n\n\t\t\t\tif ( domSelectionCollapsed ) {\n\t\t\t\t\t// Selection was collapsed, so collapse it at further position.\n\t\t\t\t\tdomSelection.collapse( newDomPosition.parent, newDomPosition.offset );\n\t\t\t\t} else {\n\t\t\t\t\t// Selection was not collapse, so extend it instead of collapsing.\n\t\t\t\t\tdomSelection.extend( newDomPosition.parent, newDomPosition.offset );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module module:engine/view/downcastwriter\n */\n\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\nimport ContainerElement from './containerelement';\nimport AttributeElement from './attributeelement';\nimport EmptyElement from './emptyelement';\nimport UIElement from './uielement';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport DocumentFragment from './documentfragment';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport Text from './text';\nimport EditableElement from './editableelement';\nimport { isPlainObject } from 'lodash-es';\n\n/**\n * View downcast writer.\n *\n * It provides a set of methods used to manipulate view nodes.\n *\n * Do not create an instance of this writer manually. To modify a view structure, use\n * the {@link module:engine/view/view~View#change `View#change()`} block.\n *\n * The `DowncastWriter` is designed to work with semantic views which are the views that were/are being downcasted from the model.\n * To work with ordinary views (e.g. parsed from a pasted content) use the\n * {@link module:engine/view/upcastwriter~UpcastWriter upcast writer}.\n *\n * Read more about changing the view in the {@glink framework/guides/architecture/editing-engine#changing-the-view Changing the view}\n * section of the {@glink framework/guides/architecture/editing-engine Editing engine architecture} guide.\n */\nexport default class DowncastWriter {\n\tconstructor( document ) {\n\t\t/**\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * Holds references to the attribute groups that share the same {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t\t * The keys are `id`s, the values are `Set`s holding {@link module:engine/view/attributeelement~AttributeElement}s.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<String,Set>}\n\t\t */\n\t\tthis._cloneGroups = new Map();\n\t}\n\n\t/**\n\t * Sets {@link module:engine/view/documentselection~DocumentSelection selection's} ranges and direction to the\n\t * specified location based on the given {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t * Usage:\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets backward selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\twriter.setSelection( otherSelection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\twriter.setSelection( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\twriter.setSelection( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n \t * that element and ends after the last child of that element.\n\t *\n\t * \t\twriter.setSelection( paragraph, 'in' );\n\t *\n\t * Creates a range on the {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\twriter.setSelection( paragraph, 'on' );\n\t *\n\t * \t\t// Removes all ranges.\n\t *\t\twriter.setSelection( null );\n\t *\n\t * `DowncastWriter#setSelection()` allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\twriter.setSelection( range, { backward: true } );\n\t *\n\t *\t\t// Sets selection as fake.\n\t *\t\t// Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * \t\t// This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * \t\t// represented in other way, for example by applying proper CSS class.\n\t *\t\twriter.setSelection( range, { fake: true } );\n\t *\n\t * \t\t// Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * \t\t// (and be  properly handled by screen readers).\n\t *\t\twriter.setSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tsetSelection( selectable, placeOrOffset, options ) {\n\t\tthis.document.selection._setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Moves {@link module:engine/view/documentselection~DocumentSelection#focus selection's focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tsetSelectionFocus( itemOrPosition, offset ) {\n\t\tthis.document.selection._setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/text~Text text node}.\n\t *\n\t *\t\twriter.createText( 'foo' );\n\t *\n\t * @param {String} data The text's data.\n\t * @returns {module:engine/view/text~Text} The created text node.\n\t */\n\tcreateText( data ) {\n\t\treturn new Text( data );\n\t}\n\n\t/**\n\t * Creates new {@link module:engine/view/attributeelement~AttributeElement}.\n\t *\n\t *\t\twriter.createAttributeElement( 'strong' );\n\t *\t\twriter.createAttributeElement( 'strong', { alignment: 'center' } );\n\t *\n\t *\t\t// Make `<a>` element contain other attributes element so the `<a>` element is not broken.\n\t *\t\twriter.createAttributeElement( 'a', { href: 'foo.bar' }, { priority: 5 } );\n\t *\n\t *\t\t// Set `id` of a marker element so it is not joined or merged with \"normal\" elements.\n\t *\t\twriter.createAttributeElement( 'span', { class: 'myMarker' }, { id: 'marker:my' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Element's attributes.\n\t * @param {Object} [options] Element's options.\n\t * @param {Number} [options.priority] Element's {@link module:engine/view/attributeelement~AttributeElement#priority priority}.\n\t * @param {Number|String} [options.id] Element's {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t * @returns {module:engine/view/attributeelement~AttributeElement} Created element.\n\t */\n\tcreateAttributeElement( name, attributes, options = {} ) {\n\t\tconst attributeElement = new AttributeElement( name, attributes );\n\n\t\tif ( options.priority ) {\n\t\t\tattributeElement._priority = options.priority;\n\t\t}\n\n\t\tif ( options.id ) {\n\t\t\tattributeElement._id = options.id;\n\t\t}\n\n\t\treturn attributeElement;\n\t}\n\n\t/**\n\t * Creates new {@link module:engine/view/containerelement~ContainerElement}.\n\t *\n\t *\t\twriter.createContainerElement( 'paragraph' );\n\t *\t\twriter.createContainerElement( 'paragraph', { alignment: 'center' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/containerelement~ContainerElement} Created element.\n\t */\n\tcreateContainerElement( name, attributes ) {\n\t\treturn new ContainerElement( name, attributes );\n\t}\n\n\t/**\n\t * Creates new {@link module:engine/view/editableelement~EditableElement}.\n\t *\n\t *\t\twriter.createEditableElement( 'div' );\n\t *\t\twriter.createEditableElement( 'div', { alignment: 'center' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/editableelement~EditableElement} Created element.\n\t */\n\tcreateEditableElement( name, attributes ) {\n\t\tconst editableElement = new EditableElement( name, attributes );\n\t\teditableElement._document = this.document;\n\n\t\treturn editableElement;\n\t}\n\n\t/**\n\t * Creates new {@link module:engine/view/emptyelement~EmptyElement}.\n\t *\n\t *\t\twriter.createEmptyElement( 'img' );\n\t *\t\twriter.createEmptyElement( 'img', { alignment: 'center' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/emptyelement~EmptyElement} Created element.\n\t */\n\tcreateEmptyElement( name, attributes ) {\n\t\treturn new EmptyElement( name, attributes );\n\t}\n\n\t/**\n\t * Creates new {@link module:engine/view/uielement~UIElement}.\n\t *\n\t *\t\twriter.createUIElement( 'span' );\n\t *\t\twriter.createUIElement( 'span', { alignment: 'center' } );\n\t *\n\t * Custom render function can be provided as third parameter:\n\t *\n\t *\t\twriter.createUIElement( 'span', null, function( domDocument ) {\n\t *\t\t\tconst domElement = this.toDomElement( domDocument );\n\t *\t\t\tdomElement.innerHTML = '<b>this is ui element</b>';\n\t *\n\t *\t\t\treturn domElement;\n\t *\t\t} );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @param {Function} [renderFunction] Custom render function.\n\t * @returns {module:engine/view/uielement~UIElement} Created element.\n\t */\n\tcreateUIElement( name, attributes, renderFunction ) {\n\t\tconst uiElement = new UIElement( name, attributes );\n\n\t\tif ( renderFunction ) {\n\t\t\tuiElement.render = renderFunction;\n\t\t}\n\n\t\treturn uiElement;\n\t}\n\n\t/**\n\t * Adds or overwrite element's attribute with a specified key and value.\n\t *\n\t *\t\twriter.setAttribute( 'href', 'http://ckeditor.com', linkElement );\n\t *\n\t * @param {String} key Attribute key.\n\t * @param {String} value Attribute value.\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tsetAttribute( key, value, element ) {\n\t\telement._setAttribute( key, value );\n\t}\n\n\t/**\n\t * Removes attribute from the element.\n\t *\n\t *\t\twriter.removeAttribute( 'href', linkElement );\n\t *\n\t * @param {String} key Attribute key.\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveAttribute( key, element ) {\n\t\telement._removeAttribute( key );\n\t}\n\n\t/**\n\t * Adds specified class to the element.\n\t *\n\t *\t\twriter.addClass( 'foo', linkElement );\n\t *\t\twriter.addClass( [ 'foo', 'bar' ], linkElement );\n\t *\n\t * @param {Array.<String>|String} className\n\t * @param {module:engine/view/element~Element} element\n\t */\n\taddClass( className, element ) {\n\t\telement._addClass( className );\n\t}\n\n\t/**\n\t * Removes specified class from the element.\n\t *\n\t *\t\twriter.removeClass( 'foo', linkElement );\n\t *\t\twriter.removeClass( [ 'foo', 'bar' ], linkElement );\n\t *\n\t * @param {Array.<String>|String} className\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveClass( className, element ) {\n\t\telement._removeClass( className );\n\t}\n\n\t/**\n\t * Adds style to the element.\n\t *\n\t *\t\twriter.setStyle( 'color', 'red', element );\n\t *\t\twriter.setStyle( {\n\t *\t\t\tcolor: 'red',\n\t *\t\t\tposition: 'fixed'\n\t *\t\t}, element );\n\t *\n\t * @param {String|Object} property Property name or object with key - value pairs.\n\t * @param {String} [value] Value to set. This parameter is ignored if object is provided as the first parameter.\n\t * @param {module:engine/view/element~Element} element Element to set styles on.\n\t */\n\tsetStyle( property, value, element ) {\n\t\tif ( isPlainObject( property ) && element === undefined ) {\n\t\t\telement = value;\n\t\t}\n\n\t\telement._setStyle( property, value );\n\t}\n\n\t/**\n\t * Removes specified style from the element.\n\t *\n\t *\t\twriter.removeStyle( 'color', element );  // Removes 'color' style.\n\t *\t\twriter.removeStyle( [ 'color', 'border-top' ], element ); // Removes both 'color' and 'border-top' styles.\n\t *\n\t * @param {Array.<String>|String} property\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveStyle( property, element ) {\n\t\telement._removeStyle( property );\n\t}\n\n\t/**\n\t * Sets a custom property on element. Unlike attributes, custom properties are not rendered to the DOM,\n\t * so they can be used to add special data to elements.\n\t *\n\t * @param {String|Symbol} key\n\t * @param {*} value\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tsetCustomProperty( key, value, element ) {\n\t\telement._setCustomProperty( key, value );\n\t}\n\n\t/**\n\t * Removes a custom property stored under the given key.\n\t *\n\t * @param {String|Symbol} key\n\t * @param {module:engine/view/element~Element} element\n\t * @returns {Boolean} Returns true if property was removed.\n\t */\n\tremoveCustomProperty( key, element ) {\n\t\treturn element._removeCustomProperty( key );\n\t}\n\n\t/**\n\t * Breaks attribute nodes at provided position or at boundaries of provided range. It breaks attribute elements inside\n\t * up to a container element.\n\t *\n\t * In following examples `<p>` is a container, `<b>` and `<u>` are attribute nodes:\n\t *\n\t *        <p>foo<b><u>bar{}</u></b></p> -> <p>foo<b><u>bar</u></b>[]</p>\n\t *        <p>foo<b><u>{}bar</u></b></p> -> <p>foo{}<b><u>bar</u></b></p>\n\t *        <p>foo<b><u>b{}ar</u></b></p> -> <p>foo<b><u>b</u></b>[]<b><u>ar</u></b></p>\n\t *        <p><b>fo{o</b><u>ba}r</u></p> -> <p><b>fo</b><b>o</b><u>ba</u><u>r</u></b></p>\n\t *\n\t * **Note:** {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment} is treated like a container.\n\t *\n\t * **Note:** Difference between {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes breakAttributes} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakContainer breakContainer} is that `breakAttributes` breaks all\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} that are ancestors of given `position`,\n\t * up to the first encountered {@link module:engine/view/containerelement~ContainerElement container element}.\n\t * `breakContainer` assumes that given `position` is directly in container element and breaks that container element.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container`\n\t * when {@link module:engine/view/range~Range#start start}\n\t * and {@link module:engine/view/range~Range#end end} positions of a passed range are not placed inside same parent container.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-cannot-break-empty-element`\n\t * when trying to break attributes\n\t * inside {@link module:engine/view/emptyelement~EmptyElement EmptyElement}.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-cannot-break-ui-element`\n\t * when trying to break attributes\n\t * inside {@link module:engine/view/uielement~UIElement UIElement}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#breakContainer\n\t * @param {module:engine/view/position~Position|module:engine/view/range~Range} positionOrRange Position where\n\t * to break attribute elements.\n\t * @returns {module:engine/view/position~Position|module:engine/view/range~Range} New position or range, after breaking the attribute\n\t * elements.\n\t */\n\tbreakAttributes( positionOrRange ) {\n\t\tif ( positionOrRange instanceof Position ) {\n\t\t\treturn this._breakAttributes( positionOrRange );\n\t\t} else {\n\t\t\treturn this._breakAttributesRange( positionOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Breaks {@link module:engine/view/containerelement~ContainerElement container view element} into two, at the given position. Position\n\t * has to be directly inside container element and cannot be in root. Does not break if position is at the beginning\n\t * or at the end of it's parent element.\n\t *\n\t *        <p>foo^bar</p> -> <p>foo</p><p>bar</p>\n\t *        <div><p>foo</p>^<p>bar</p></div> -> <div><p>foo</p></div><div><p>bar</p></div>\n\t *        <p>^foobar</p> -> ^<p>foobar</p>\n\t *        <p>foobar^</p> -> <p>foobar</p>^\n\t *\n\t * **Note:** Difference between {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes breakAttributes} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakContainer breakContainer} is that `breakAttributes` breaks all\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} that are ancestors of given `position`,\n\t * up to the first encountered {@link module:engine/view/containerelement~ContainerElement container element}.\n\t * `breakContainer` assumes that given `position` is directly in container element and breaks that container element.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#breakAttributes\n\t * @param {module:engine/view/position~Position} position Position where to break element.\n\t * @returns {module:engine/view/position~Position} Position between broken elements. If element has not been broken,\n\t * the returned position is placed either before it or after it.\n\t */\n\tbreakContainer( position ) {\n\t\tconst element = position.parent;\n\n\t\tif ( !( element.is( 'containerElement' ) ) ) {\n\t\t\t/**\n\t\t\t * Trying to break an element which is not a container element.\n\t\t\t *\n\t\t\t * @error view-writer-break-non-container-element\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-writer-break-non-container-element: Trying to break an element which is not a container element.',\n\t\t\t\tthis.document\n\t\t\t);\n\t\t}\n\n\t\tif ( !element.parent ) {\n\t\t\t/**\n\t\t\t * Trying to break root element.\n\t\t\t *\n\t\t\t * @error view-writer-break-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-break-root: Trying to break root element.', this.document );\n\t\t}\n\n\t\tif ( position.isAtStart ) {\n\t\t\treturn Position._createBefore( element );\n\t\t} else if ( !position.isAtEnd ) {\n\t\t\tconst newElement = element._clone( false );\n\n\t\t\tthis.insert( Position._createAfter( element ), newElement );\n\n\t\t\tconst sourceRange = new Range( position, Position._createAt( element, 'end' ) );\n\t\t\tconst targetPosition = new Position( newElement, 0 );\n\n\t\t\tthis.move( sourceRange, targetPosition );\n\t\t}\n\n\t\treturn Position._createAfter( element );\n\t}\n\n\t/**\n\t * Merges {@link module:engine/view/attributeelement~AttributeElement attribute elements}. It also merges text nodes if needed.\n\t * Only {@link module:engine/view/attributeelement~AttributeElement#isSimilar similar} attribute elements can be merged.\n\t *\n\t * In following examples `<p>` is a container and `<b>` is an attribute element:\n\t *\n\t *        <p>foo[]bar</p> -> <p>foo{}bar</p>\n\t *        <p><b>foo</b>[]<b>bar</b></p> -> <p><b>foo{}bar</b></p>\n\t *        <p><b foo=\"bar\">a</b>[]<b foo=\"baz\">b</b></p> -> <p><b foo=\"bar\">a</b>[]<b foo=\"baz\">b</b></p>\n\t *\n\t * It will also take care about empty attributes when merging:\n\t *\n\t *        <p><b>[]</b></p> -> <p>[]</p>\n\t *        <p><b>foo</b><i>[]</i><b>bar</b></p> -> <p><b>foo{}bar</b></p>\n\t *\n\t * **Note:** Difference between {@link module:engine/view/downcastwriter~DowncastWriter#mergeAttributes mergeAttributes} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#mergeContainers mergeContainers} is that `mergeAttributes` merges two\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} or {@link module:engine/view/text~Text text nodes}\n\t * while `mergeContainer` merges two {@link module:engine/view/containerelement~ContainerElement container elements}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#mergeContainers\n\t * @param {module:engine/view/position~Position} position Merge position.\n\t * @returns {module:engine/view/position~Position} Position after merge.\n\t */\n\tmergeAttributes( position ) {\n\t\tconst positionOffset = position.offset;\n\t\tconst positionParent = position.parent;\n\n\t\t// When inside text node - nothing to merge.\n\t\tif ( positionParent.is( 'text' ) ) {\n\t\t\treturn position;\n\t\t}\n\n\t\t// When inside empty attribute - remove it.\n\t\tif ( positionParent.is( 'attributeElement' ) && positionParent.childCount === 0 ) {\n\t\t\tconst parent = positionParent.parent;\n\t\t\tconst offset = positionParent.index;\n\n\t\t\tpositionParent._remove();\n\t\t\tthis._removeFromClonedElementsGroup( positionParent );\n\n\t\t\treturn this.mergeAttributes( new Position( parent, offset ) );\n\t\t}\n\n\t\tconst nodeBefore = positionParent.getChild( positionOffset - 1 );\n\t\tconst nodeAfter = positionParent.getChild( positionOffset );\n\n\t\t// Position should be placed between two nodes.\n\t\tif ( !nodeBefore || !nodeAfter ) {\n\t\t\treturn position;\n\t\t}\n\n\t\t// When position is between two text nodes.\n\t\tif ( nodeBefore.is( 'text' ) && nodeAfter.is( 'text' ) ) {\n\t\t\treturn mergeTextNodes( nodeBefore, nodeAfter );\n\t\t}\n\t\t// When position is between two same attribute elements.\n\t\telse if ( nodeBefore.is( 'attributeElement' ) && nodeAfter.is( 'attributeElement' ) && nodeBefore.isSimilar( nodeAfter ) ) {\n\t\t\t// Move all children nodes from node placed after selection and remove that node.\n\t\t\tconst count = nodeBefore.childCount;\n\t\t\tnodeBefore._appendChild( nodeAfter.getChildren() );\n\n\t\t\tnodeAfter._remove();\n\t\t\tthis._removeFromClonedElementsGroup( nodeAfter );\n\n\t\t\t// New position is located inside the first node, before new nodes.\n\t\t\t// Call this method recursively to merge again if needed.\n\t\t\treturn this.mergeAttributes( new Position( nodeBefore, count ) );\n\t\t}\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * Merges two {@link module:engine/view/containerelement~ContainerElement container elements} that are before and after given position.\n\t * Precisely, the element after the position is removed and it's contents are moved to element before the position.\n\t *\n\t *        <p>foo</p>^<p>bar</p> -> <p>foo^bar</p>\n\t *        <div>foo</div>^<p>bar</p> -> <div>foo^bar</div>\n\t *\n\t * **Note:** Difference between {@link module:engine/view/downcastwriter~DowncastWriter#mergeAttributes mergeAttributes} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#mergeContainers mergeContainers} is that `mergeAttributes` merges two\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} or {@link module:engine/view/text~Text text nodes}\n\t * while `mergeContainer` merges two {@link module:engine/view/containerelement~ContainerElement container elements}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#mergeAttributes\n\t * @param {module:engine/view/position~Position} position Merge position.\n\t * @returns {module:engine/view/position~Position} Position after merge.\n\t */\n\tmergeContainers( position ) {\n\t\tconst prev = position.nodeBefore;\n\t\tconst next = position.nodeAfter;\n\n\t\tif ( !prev || !next || !prev.is( 'containerElement' ) || !next.is( 'containerElement' ) ) {\n\t\t\t/**\n\t\t\t * Element before and after given position cannot be merged.\n\t\t\t *\n\t\t\t * @error view-writer-merge-containers-invalid-position\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-merge-containers-invalid-position: ' +\n\t\t\t\t'Element before and after given position cannot be merged.', this.document );\n\t\t}\n\n\t\tconst lastChild = prev.getChild( prev.childCount - 1 );\n\t\tconst newPosition = lastChild instanceof Text ? Position._createAt( lastChild, 'end' ) : Position._createAt( prev, 'end' );\n\n\t\tthis.move( Range._createIn( next ), Position._createAt( prev, 'end' ) );\n\t\tthis.remove( Range._createOn( next ) );\n\n\t\treturn newPosition;\n\t}\n\n\t/**\n\t * Insert node or nodes at specified position. Takes care about breaking attributes before insertion\n\t * and merging them afterwards.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-insert-invalid-node` when nodes to insert\n\t * contains instances that are not {@link module:engine/view/text~Text Texts},\n\t * {@link module:engine/view/attributeelement~AttributeElement AttributeElements},\n\t * {@link module:engine/view/containerelement~ContainerElement ContainerElements},\n\t * {@link module:engine/view/emptyelement~EmptyElement EmptyElements} or\n\t * {@link module:engine/view/uielement~UIElement UIElements}.\n\t *\n\t * @param {module:engine/view/position~Position} position Insertion position.\n\t * @param {module:engine/view/text~Text|module:engine/view/attributeelement~AttributeElement|\n\t * module:engine/view/containerelement~ContainerElement|module:engine/view/emptyelement~EmptyElement|\n\t * module:engine/view/uielement~UIElement|Iterable.<module:engine/view/text~Text|\n\t * module:engine/view/attributeelement~AttributeElement|module:engine/view/containerelement~ContainerElement|\n\t * module:engine/view/emptyelement~EmptyElement|module:engine/view/uielement~UIElement>} nodes Node or nodes to insert.\n\t * @returns {module:engine/view/range~Range} Range around inserted nodes.\n\t */\n\tinsert( position, nodes ) {\n\t\tnodes = isIterable( nodes ) ? [ ...nodes ] : [ nodes ];\n\n\t\t// Check if nodes to insert are instances of AttributeElements, ContainerElements, EmptyElements, UIElements or Text.\n\t\tvalidateNodesToInsert( nodes, this.document );\n\n\t\tconst container = getParentContainer( position );\n\n\t\tif ( !container ) {\n\t\t\t/**\n\t\t\t * Position's parent container cannot be found.\n\t\t\t *\n\t\t\t * @error view-writer-invalid-position-container\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-invalid-position-container', this.document );\n\t\t}\n\n\t\tconst insertionPosition = this._breakAttributes( position, true );\n\t\tconst length = container._insertChild( insertionPosition.offset, nodes );\n\n\t\tfor ( const node of nodes ) {\n\t\t\tthis._addToClonedElementsGroup( node );\n\t\t}\n\n\t\tconst endPosition = insertionPosition.getShiftedBy( length );\n\t\tconst start = this.mergeAttributes( insertionPosition );\n\n\t\t// When no nodes were inserted - return collapsed range.\n\t\tif ( length === 0 ) {\n\t\t\treturn new Range( start, start );\n\t\t} else {\n\t\t\t// If start position was merged - move end position.\n\t\t\tif ( !start.isEqual( insertionPosition ) ) {\n\t\t\t\tendPosition.offset--;\n\t\t\t}\n\n\t\t\tconst end = this.mergeAttributes( endPosition );\n\n\t\t\treturn new Range( start, end );\n\t\t}\n\t}\n\n\t/**\n\t * Removes provided range from the container.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range|module:engine/view/item~Item} rangeOrItem Range to remove from container\n\t * or an {@link module:engine/view/item~Item item} to remove. If range is provided, after removing, it will be updated\n\t * to a collapsed range showing the new position.\n\t * @returns {module:engine/view/documentfragment~DocumentFragment} Document fragment containing removed nodes.\n\t */\n\tremove( rangeOrItem ) {\n\t\tconst range = rangeOrItem instanceof Range ? rangeOrItem : Range._createOn( rangeOrItem );\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// If range is collapsed - nothing to remove.\n\t\tif ( range.isCollapsed ) {\n\t\t\treturn new DocumentFragment();\n\t\t}\n\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\tconst count = breakEnd.offset - breakStart.offset;\n\n\t\t// Remove nodes in range.\n\t\tconst removed = parentContainer._removeChildren( breakStart.offset, count );\n\n\t\tfor ( const node of removed ) {\n\t\t\tthis._removeFromClonedElementsGroup( node );\n\t\t}\n\n\t\t// Merge after removing.\n\t\tconst mergePosition = this.mergeAttributes( breakStart );\n\t\trange.start = mergePosition;\n\t\trange.end = mergePosition.clone();\n\n\t\t// Return removed nodes.\n\t\treturn new DocumentFragment( removed );\n\t}\n\n\t/**\n\t * Removes matching elements from given range.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} range Range to clear.\n\t * @param {module:engine/view/element~Element} element Element to remove.\n\t */\n\tclear( range, element ) {\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// Create walker on given range.\n\t\t// We walk backward because when we remove element during walk it modifies range end position.\n\t\tconst walker = range.getWalker( {\n\t\t\tdirection: 'backward',\n\t\t\tignoreElementEnd: true\n\t\t} );\n\n\t\t// Let's walk.\n\t\tfor ( const current of walker ) {\n\t\t\tconst item = current.item;\n\t\t\tlet rangeToRemove;\n\n\t\t\t// When current item matches to the given element.\n\t\t\tif ( item.is( 'element' ) && element.isSimilar( item ) ) {\n\t\t\t\t// Create range on this element.\n\t\t\t\trangeToRemove = Range._createOn( item );\n\t\t\t\t// When range starts inside Text or TextProxy element.\n\t\t\t} else if ( !current.nextPosition.isAfter( range.start ) && item.is( 'textProxy' ) ) {\n\t\t\t\t// We need to check if parent of this text matches to given element.\n\t\t\t\tconst parentElement = item.getAncestors().find( ancestor => {\n\t\t\t\t\treturn ancestor.is( 'element' ) && element.isSimilar( ancestor );\n\t\t\t\t} );\n\n\t\t\t\t// If it is then create range inside this element.\n\t\t\t\tif ( parentElement ) {\n\t\t\t\t\trangeToRemove = Range._createIn( parentElement );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we have found element to remove.\n\t\t\tif ( rangeToRemove ) {\n\t\t\t\t// We need to check if element range stick out of the given range and truncate if it is.\n\t\t\t\tif ( rangeToRemove.end.isAfter( range.end ) ) {\n\t\t\t\t\trangeToRemove.end = range.end;\n\t\t\t\t}\n\n\t\t\t\tif ( rangeToRemove.start.isBefore( range.start ) ) {\n\t\t\t\t\trangeToRemove.start = range.start;\n\t\t\t\t}\n\n\t\t\t\t// At the end we remove range with found element.\n\t\t\t\tthis.remove( rangeToRemove );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Moves nodes from provided range to target position.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} sourceRange Range containing nodes to move.\n\t * @param {module:engine/view/position~Position} targetPosition Position to insert.\n\t * @returns {module:engine/view/range~Range} Range in target container. Inserted nodes are placed between\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions.\n\t */\n\tmove( sourceRange, targetPosition ) {\n\t\tlet nodes;\n\n\t\tif ( targetPosition.isAfter( sourceRange.end ) ) {\n\t\t\ttargetPosition = this._breakAttributes( targetPosition, true );\n\n\t\t\tconst parent = targetPosition.parent;\n\t\t\tconst countBefore = parent.childCount;\n\n\t\t\tsourceRange = this._breakAttributesRange( sourceRange, true );\n\n\t\t\tnodes = this.remove( sourceRange );\n\n\t\t\ttargetPosition.offset += ( parent.childCount - countBefore );\n\t\t} else {\n\t\t\tnodes = this.remove( sourceRange );\n\t\t}\n\n\t\treturn this.insert( targetPosition, nodes );\n\t}\n\n\t/**\n     * Wraps elements within range with provided {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n     * If a collapsed range is provided, it will be wrapped only if it is equal to view selection.\n     *\n     * If a collapsed range was passed and is same as selection, the selection\n     * will be moved to the inside of the wrapped attribute element.\n     *\n     * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-invalid-range-container`\n     * when {@link module:engine/view/range~Range#start}\n     * and {@link module:engine/view/range~Range#end} positions are not placed inside same parent container.\n     *\n     * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n     * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n     *\n     * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-nonselection-collapsed-range` when passed range\n     * is collapsed and different than view selection.\n     *\n     * @param {module:engine/view/range~Range} range Range to wrap.\n     * @param {module:engine/view/attributeelement~AttributeElement} attribute Attribute element to use as wrapper.\n     * @returns {module:engine/view/range~Range} range Range after wrapping, spanning over wrapping attribute element.\n    */\n\twrap( range, attribute ) {\n\t\tif ( !( attribute instanceof AttributeElement ) ) {\n\t\t\tthrow new CKEditorError( 'view-writer-wrap-invalid-attribute', this.document );\n\t\t}\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\tif ( !range.isCollapsed ) {\n\t\t\t// Non-collapsed range. Wrap it with the attribute element.\n\t\t\treturn this._wrapRange( range, attribute );\n\t\t} else {\n\t\t\t// Collapsed range. Wrap position.\n\t\t\tlet position = range.start;\n\n\t\t\tif ( position.parent.is( 'element' ) && !_hasNonUiChildren( position.parent ) ) {\n\t\t\t\tposition = position.getLastMatchingPosition( value => value.item.is( 'uiElement' ) );\n\t\t\t}\n\n\t\t\tposition = this._wrapPosition( position, attribute );\n\t\t\tconst viewSelection = this.document.selection;\n\n\t\t\t// If wrapping position is equal to view selection, move view selection inside wrapping attribute element.\n\t\t\tif ( viewSelection.isCollapsed && viewSelection.getFirstPosition().isEqual( range.start ) ) {\n\t\t\t\tthis.setSelection( position );\n\t\t\t}\n\n\t\t\treturn new Range( position );\n\t\t}\n\t}\n\n\t/**\n\t * Unwraps nodes within provided range from attribute element.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} range\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t */\n\tunwrap( range, attribute ) {\n\t\tif ( !( attribute instanceof AttributeElement ) ) {\n\t\t\t/**\n\t\t\t * Attribute element need to be instance of attribute element.\n\t\t\t *\n\t\t\t * @error view-writer-unwrap-invalid-attribute\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-unwrap-invalid-attribute', this.document );\n\t\t}\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// If range is collapsed - nothing to unwrap.\n\t\tif ( range.isCollapsed ) {\n\t\t\treturn range;\n\t\t}\n\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\t// Unwrap children located between break points.\n\t\tconst newRange = this._unwrapChildren( parentContainer, breakStart.offset, breakEnd.offset, attribute );\n\n\t\t// Merge attributes at the both ends and return a new range.\n\t\tconst start = this.mergeAttributes( newRange.start );\n\n\t\t// If start position was merged - move end position back.\n\t\tif ( !start.isEqual( newRange.start ) ) {\n\t\t\tnewRange.end.offset--;\n\t\t}\n\n\t\tconst end = this.mergeAttributes( newRange.end );\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Renames element by creating a copy of renamed element but with changed name and then moving contents of the\n\t * old element to the new one. Keep in mind that this will invalidate all {@link module:engine/view/position~Position positions} which\n\t * has renamed element as {@link module:engine/view/position~Position#parent a parent}.\n\t *\n\t * New element has to be created because `Element#tagName` property in DOM is readonly.\n\t *\n\t * Since this function creates a new element and removes the given one, the new element is returned to keep reference.\n\t *\n\t * @param {String} newName New name for element.\n\t * @param {module:engine/view/containerelement~ContainerElement} viewElement Element to be renamed.\n\t */\n\trename( newName, viewElement ) {\n\t\tconst newElement = new ContainerElement( newName, viewElement.getAttributes() );\n\n\t\tthis.insert( Position._createAfter( viewElement ), newElement );\n\t\tthis.move( Range._createIn( viewElement ), Position._createAt( newElement, 0 ) );\n\t\tthis.remove( Range._createOn( viewElement ) );\n\n\t\treturn newElement;\n\t}\n\n\t/**\n\t * Cleans up memory by removing obsolete cloned elements group from the writer.\n\t *\n\t * Should be used whenever all {@link module:engine/view/attributeelement~AttributeElement attribute elements}\n\t * with the same {@link module:engine/view/attributeelement~AttributeElement#id id} are going to be removed from the view and\n\t * the group will no longer be needed.\n\t *\n\t * Cloned elements group are not removed automatically in case if the group is still needed after all its elements\n\t * were removed from the view.\n\t *\n\t * Keep in mind that group names are equal to the `id` property of the attribute element.\n\t *\n\t * @param {String} groupName Name of the group to clear.\n\t */\n\tclearClonedElementsGroup( groupName ) {\n\t\tthis._cloneGroups.delete( groupName );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t Creates new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = writer.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = writer.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Wraps children with provided `wrapElement`. Only children contained in `parent` element between\n\t * `startOffset` and `endOffset` will be wrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} parent\n\t * @param {Number} startOffset\n\t * @param {Number} endOffset\n\t * @param {module:engine/view/element~Element} wrapElement\n\t */\n\t_wrapChildren( parent, startOffset, endOffset, wrapElement ) {\n\t\tlet i = startOffset;\n\t\tconst wrapPositions = [];\n\n\t\twhile ( i < endOffset ) {\n\t\t\tconst child = parent.getChild( i );\n\t\t\tconst isText = child.is( 'text' );\n\t\t\tconst isAttribute = child.is( 'attributeElement' );\n\t\t\tconst isEmpty = child.is( 'emptyElement' );\n\t\t\tconst isUI = child.is( 'uiElement' );\n\n\t\t\t//\n\t\t\t// (In all examples, assume that `wrapElement` is `<span class=\"foo\">` element.)\n\t\t\t//\n\t\t\t// Check if `wrapElement` can be joined with the wrapped element. One of requirements is having same name.\n\t\t\t// If possible, join elements.\n\t\t\t//\n\t\t\t// <p><span class=\"bar\">abc</span></p>  -->  <p><span class=\"foo bar\">abc</span></p>\n\t\t\t//\n\t\t\tif ( isAttribute && this._wrapAttributeElement( wrapElement, child ) ) {\n\t\t\t\twrapPositions.push( new Position( parent, i ) );\n\t\t\t}\n\t\t\t//\n\t\t\t// Wrap the child if it is not an attribute element or if it is an attribute element that should be inside\n\t\t\t// `wrapElement` (due to priority).\n\t\t\t//\n\t\t\t// <p>abc</p>                   -->  <p><span class=\"foo\">abc</span></p>\n\t\t\t// <p><strong>abc</strong></p>  -->  <p><span class=\"foo\"><strong>abc</strong></span></p>\n\t\t\t//\n\t\t\telse if ( isText || isEmpty || isUI || ( isAttribute && shouldABeOutsideB( wrapElement, child ) ) ) {\n\t\t\t\t// Clone attribute.\n\t\t\t\tconst newAttribute = wrapElement._clone();\n\n\t\t\t\t// Wrap current node with new attribute.\n\t\t\t\tchild._remove();\n\t\t\t\tnewAttribute._appendChild( child );\n\n\t\t\t\tparent._insertChild( i, newAttribute );\n\t\t\t\tthis._addToClonedElementsGroup( newAttribute );\n\n\t\t\t\twrapPositions.push( new Position( parent, i ) );\n\t\t\t}\n\t\t\t//\n\t\t\t// If other nested attribute is found and it wasn't wrapped (see above), continue wrapping inside it.\n\t\t\t//\n\t\t\t// <p><a href=\"foo.html\">abc</a></p>  -->  <p><a href=\"foo.html\"><span class=\"foo\">abc</span></a></p>\n\t\t\t//\n\t\t\telse if ( isAttribute ) {\n\t\t\t\tthis._wrapChildren( child, 0, child.childCount, wrapElement );\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge at each wrap.\n\t\tlet offsetChange = 0;\n\n\t\tfor ( const position of wrapPositions ) {\n\t\t\tposition.offset -= offsetChange;\n\n\t\t\t// Do not merge with elements outside selected children.\n\t\t\tif ( position.offset == startOffset ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst newPosition = this.mergeAttributes( position );\n\n\t\t\t// If nodes were merged - other merge offsets will change.\n\t\t\tif ( !newPosition.isEqual( position ) ) {\n\t\t\t\toffsetChange++;\n\t\t\t\tendOffset--;\n\t\t\t}\n\t\t}\n\n\t\treturn Range._createFromParentsAndOffsets( parent, startOffset, parent, endOffset );\n\t}\n\n\t/**\n\t * Unwraps children from provided `unwrapElement`. Only children contained in `parent` element between\n\t * `startOffset` and `endOffset` will be unwrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} parent\n\t * @param {Number} startOffset\n\t * @param {Number} endOffset\n\t * @param {module:engine/view/element~Element} unwrapElement\n\t */\n\t_unwrapChildren( parent, startOffset, endOffset, unwrapElement ) {\n\t\tlet i = startOffset;\n\t\tconst unwrapPositions = [];\n\n\t\t// Iterate over each element between provided offsets inside parent.\n\t\t// We don't use tree walker or range iterator because we will be removing and merging potentially multiple nodes,\n\t\t// so it could get messy. It is safer to it manually in this case.\n\t\twhile ( i < endOffset ) {\n\t\t\tconst child = parent.getChild( i );\n\n\t\t\t// Skip all text nodes. There should be no container element's here either.\n\t\t\tif ( !child.is( 'attributeElement' ) ) {\n\t\t\t\ti++;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// (In all examples, assume that `unwrapElement` is `<span class=\"foo\">` element.)\n\t\t\t//\n\t\t\t// If the child is similar to the given attribute element, unwrap it - it will be completely removed.\n\t\t\t//\n\t\t\t// <p><span class=\"foo\">abc</span>xyz</p>  -->  <p>abcxyz</p>\n\t\t\t//\n\t\t\tif ( child.isSimilar( unwrapElement ) ) {\n\t\t\t\tconst unwrapped = child.getChildren();\n\t\t\t\tconst count = child.childCount;\n\n\t\t\t\t// Replace wrapper element with its children\n\t\t\t\tchild._remove();\n\t\t\t\tparent._insertChild( i, unwrapped );\n\n\t\t\t\tthis._removeFromClonedElementsGroup( child );\n\n\t\t\t\t// Save start and end position of moved items.\n\t\t\t\tunwrapPositions.push(\n\t\t\t\t\tnew Position( parent, i ),\n\t\t\t\t\tnew Position( parent, i + count )\n\t\t\t\t);\n\n\t\t\t\t// Skip elements that were unwrapped. Assuming there won't be another element to unwrap in child elements.\n\t\t\t\ti += count;\n\t\t\t\tendOffset += count - 1;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// If the child is not similar but is an attribute element, try partial unwrapping - remove the same attributes/styles/classes.\n\t\t\t// Partial unwrapping will happen only if the elements have the same name.\n\t\t\t//\n\t\t\t// <p><span class=\"foo bar\">abc</span>xyz</p>  -->  <p><span class=\"bar\">abc</span>xyz</p>\n\t\t\t// <p><i class=\"foo\">abc</i>xyz</p>            -->  <p><i class=\"foo\">abc</i>xyz</p>\n\t\t\t//\n\t\t\tif ( this._unwrapAttributeElement( unwrapElement, child ) ) {\n\t\t\t\tunwrapPositions.push(\n\t\t\t\t\tnew Position( parent, i ),\n\t\t\t\t\tnew Position( parent, i + 1 )\n\t\t\t\t);\n\n\t\t\t\ti++;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// If other nested attribute is found, look through it's children for elements to unwrap.\n\t\t\t//\n\t\t\t// <p><i><span class=\"foo\">abc</span></i><p>  -->  <p><i>abc</i><p>\n\t\t\t//\n\t\t\tthis._unwrapChildren( child, 0, child.childCount, unwrapElement );\n\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge at each unwrap.\n\t\tlet offsetChange = 0;\n\n\t\tfor ( const position of unwrapPositions ) {\n\t\t\tposition.offset -= offsetChange;\n\n\t\t\t// Do not merge with elements outside selected children.\n\t\t\tif ( position.offset == startOffset || position.offset == endOffset ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst newPosition = this.mergeAttributes( position );\n\n\t\t\t// If nodes were merged - other merge offsets will change.\n\t\t\tif ( !newPosition.isEqual( position ) ) {\n\t\t\t\toffsetChange++;\n\t\t\t\tendOffset--;\n\t\t\t}\n\t\t}\n\n\t\treturn Range._createFromParentsAndOffsets( parent, startOffset, parent, endOffset );\n\t}\n\n\t/**\n\t * Helper function for `view.writer.wrap`. Wraps range with provided attribute element.\n\t * This method will also merge newly added attribute element with its siblings whenever possible.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n\t * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t * @returns {module:engine/view/range~Range} New range after wrapping, spanning over wrapping attribute element.\n\t */\n\t_wrapRange( range, attribute ) {\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\t// Wrap all children with attribute.\n\t\tconst newRange = this._wrapChildren( parentContainer, breakStart.offset, breakEnd.offset, attribute );\n\n\t\t// Merge attributes at the both ends and return a new range.\n\t\tconst start = this.mergeAttributes( newRange.start );\n\n\t\t// If start position was merged - move end position back.\n\t\tif ( !start.isEqual( newRange.start ) ) {\n\t\t\tnewRange.end.offset--;\n\t\t}\n\t\tconst end = this.mergeAttributes( newRange.end );\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Helper function for {@link #wrap}. Wraps position with provided attribute element.\n\t * This method will also merge newly added attribute element with its siblings whenever possible.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n\t * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} position\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t * @returns {module:engine/view/position~Position} New position after wrapping.\n\t */\n\t_wrapPosition( position, attribute ) {\n\t\t// Return same position when trying to wrap with attribute similar to position parent.\n\t\tif ( attribute.isSimilar( position.parent ) ) {\n\t\t\treturn movePositionToTextNode( position.clone() );\n\t\t}\n\n\t\t// When position is inside text node - break it and place new position between two text nodes.\n\t\tif ( position.parent.is( 'text' ) ) {\n\t\t\tposition = breakTextNode( position );\n\t\t}\n\n\t\t// Create fake element that will represent position, and will not be merged with other attributes.\n\t\tconst fakePosition = this.createAttributeElement();\n\t\tfakePosition._priority = Number.POSITIVE_INFINITY;\n\t\tfakePosition.isSimilar = () => false;\n\n\t\t// Insert fake element in position location.\n\t\tposition.parent._insertChild( position.offset, fakePosition );\n\n\t\t// Range around inserted fake attribute element.\n\t\tconst wrapRange = new Range( position, position.getShiftedBy( 1 ) );\n\n\t\t// Wrap fake element with attribute (it will also merge if possible).\n\t\tthis.wrap( wrapRange, attribute );\n\n\t\t// Remove fake element and place new position there.\n\t\tconst newPosition = new Position( fakePosition.parent, fakePosition.index );\n\t\tfakePosition._remove();\n\n\t\t// If position is placed between text nodes - merge them and return position inside.\n\t\tconst nodeBefore = newPosition.nodeBefore;\n\t\tconst nodeAfter = newPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof Text && nodeAfter instanceof Text ) {\n\t\t\treturn mergeTextNodes( nodeBefore, nodeAfter );\n\t\t}\n\n\t\t// If position is next to text node - move position inside.\n\t\treturn movePositionToTextNode( newPosition );\n\t}\n\n\t/**\n\t * \tWraps one {@link module:engine/view/attributeelement~AttributeElement AttributeElement} into another by\n\t * \tmerging them if possible. When merging is possible - all attributes, styles and classes are moved from wrapper\n\t * \telement to element being wrapped.\n\t *\n\t * \t@private\n\t * \t@param {module:engine/view/attributeelement~AttributeElement} wrapper Wrapper AttributeElement.\n\t * \t@param {module:engine/view/attributeelement~AttributeElement} toWrap AttributeElement to wrap using wrapper element.\n\t * \t@returns {Boolean} Returns `true` if elements are merged.\n\t */\n\t_wrapAttributeElement( wrapper, toWrap ) {\n\t\tif ( !canBeJoined( wrapper, toWrap ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Can't merge if name or priority differs.\n\t\tif ( wrapper.name !== toWrap.name || wrapper.priority !== toWrap.priority ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if attributes can be merged.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If some attributes are different we cannot wrap.\n\t\t\tif ( toWrap.hasAttribute( key ) && toWrap.getAttribute( key ) !== wrapper.getAttribute( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if styles can be merged.\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\tif ( toWrap.hasStyle( key ) && toWrap.getStyle( key ) !== wrapper.getStyle( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Move all attributes/classes/styles from wrapper to wrapped AttributeElement.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Move only these attributes that are not present - other are similar.\n\t\t\tif ( !toWrap.hasAttribute( key ) ) {\n\t\t\t\tthis.setAttribute( key, wrapper.getAttribute( key ), toWrap );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\tif ( !toWrap.hasStyle( key ) ) {\n\t\t\t\tthis.setStyle( key, wrapper.getStyle( key ), toWrap );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of wrapper.getClassNames() ) {\n\t\t\tif ( !toWrap.hasClass( key ) ) {\n\t\t\t\tthis.addClass( key, toWrap );\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Unwraps {@link module:engine/view/attributeelement~AttributeElement AttributeElement} from another by removing\n\t * corresponding attributes, classes and styles. All attributes, classes and styles from wrapper should be present\n\t * inside element being unwrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} wrapper Wrapper AttributeElement.\n\t * @param {module:engine/view/attributeelement~AttributeElement} toUnwrap AttributeElement to unwrap using wrapper element.\n\t * @returns {Boolean} Returns `true` if elements are unwrapped.\n\t **/\n\t_unwrapAttributeElement( wrapper, toUnwrap ) {\n\t\tif ( !canBeJoined( wrapper, toUnwrap ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Can't unwrap if name or priority differs.\n\t\tif ( wrapper.name !== toUnwrap.name || wrapper.priority !== toUnwrap.priority ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper attributes.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If some attributes are missing or different we cannot unwrap.\n\t\t\tif ( !toUnwrap.hasAttribute( key ) || toUnwrap.getAttribute( key ) !== wrapper.getAttribute( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper classes.\n\t\tif ( !toUnwrap.hasClass( ...wrapper.getClassNames() ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper styles.\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\t// If some styles are missing or different we cannot unwrap.\n\t\t\tif ( !toUnwrap.hasStyle( key ) || toUnwrap.getStyle( key ) !== wrapper.getStyle( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Remove all wrapper's attributes from unwrapped element.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.removeAttribute( key, toUnwrap );\n\t\t}\n\n\t\t// Remove all wrapper's classes from unwrapped element.\n\t\tthis.removeClass( Array.from( wrapper.getClassNames() ), toUnwrap );\n\n\t\t// Remove all wrapper's styles from unwrapped element.\n\t\tthis.removeStyle( Array.from( wrapper.getStyleNames() ), toUnwrap );\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Helper function used by other `DowncastWriter` methods. Breaks attribute elements at the boundaries of given range.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range Range which `start` and `end` positions will be used to break attributes.\n\t * @param {Boolean} [forceSplitText=false] If set to `true`, will break text nodes even if they are directly in container element.\n\t * This behavior will result in incorrect view state, but is needed by other view writing methods which then fixes view state.\n\t * @returns {module:engine/view/range~Range} New range with located at break positions.\n\t */\n\t_breakAttributesRange( range, forceSplitText = false ) {\n\t\tconst rangeStart = range.start;\n\t\tconst rangeEnd = range.end;\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// Break at the collapsed position. Return new collapsed range.\n\t\tif ( range.isCollapsed ) {\n\t\t\tconst position = this._breakAttributes( range.start, forceSplitText );\n\n\t\t\treturn new Range( position, position );\n\t\t}\n\n\t\tconst breakEnd = this._breakAttributes( rangeEnd, forceSplitText );\n\t\tconst count = breakEnd.parent.childCount;\n\t\tconst breakStart = this._breakAttributes( rangeStart, forceSplitText );\n\n\t\t// Calculate new break end offset.\n\t\tbreakEnd.offset += breakEnd.parent.childCount - count;\n\n\t\treturn new Range( breakStart, breakEnd );\n\t}\n\n\t/**\n\t * Helper function used by other `DowncastWriter` methods. Breaks attribute elements at given position.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-cannot-break-empty-element` when break position\n\t * is placed inside {@link module:engine/view/emptyelement~EmptyElement EmptyElement}.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-cannot-break-ui-element` when break position\n\t * is placed inside {@link module:engine/view/uielement~UIElement UIElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} position Position where to break attributes.\n\t * @param {Boolean} [forceSplitText=false] If set to `true`, will break text nodes even if they are directly in container element.\n\t * This behavior will result in incorrect view state, but is needed by other view writing methods which then fixes view state.\n\t * @returns {module:engine/view/position~Position} New position after breaking the attributes.\n\t */\n\t_breakAttributes( position, forceSplitText = false ) {\n\t\tconst positionOffset = position.offset;\n\t\tconst positionParent = position.parent;\n\n\t\t// If position is placed inside EmptyElement - throw an exception as we cannot break inside.\n\t\tif ( position.parent.is( 'emptyElement' ) ) {\n\t\t\t/**\n\t\t\t * Cannot break inside EmptyElement instance.\n\t\t\t *\n\t\t\t * @error view-writer-cannot-break-empty-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-cannot-break-empty-element', this.document );\n\t\t}\n\n\t\t// If position is placed inside UIElement - throw an exception as we cannot break inside.\n\t\tif ( position.parent.is( 'uiElement' ) ) {\n\t\t\t/**\n\t\t\t * Cannot break inside UIElement instance.\n\t\t\t *\n\t\t\t * @error view-writer-cannot-break-ui-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-cannot-break-ui-element', this.document );\n\t\t}\n\n\t\t// There are no attributes to break and text nodes breaking is not forced.\n\t\tif ( !forceSplitText && positionParent.is( 'text' ) && isContainerOrFragment( positionParent.parent ) ) {\n\t\t\treturn position.clone();\n\t\t}\n\n\t\t// Position's parent is container, so no attributes to break.\n\t\tif ( isContainerOrFragment( positionParent ) ) {\n\t\t\treturn position.clone();\n\t\t}\n\n\t\t// Break text and start again in new position.\n\t\tif ( positionParent.is( 'text' ) ) {\n\t\t\treturn this._breakAttributes( breakTextNode( position ), forceSplitText );\n\t\t}\n\n\t\tconst length = positionParent.childCount;\n\n\t\t// <p>foo<b><u>bar{}</u></b></p>\n\t\t// <p>foo<b><u>bar</u>[]</b></p>\n\t\t// <p>foo<b><u>bar</u></b>[]</p>\n\t\tif ( positionOffset == length ) {\n\t\t\tconst newPosition = new Position( positionParent.parent, positionParent.index + 1 );\n\n\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t} else {\n\t\t\t// <p>foo<b><u>{}bar</u></b></p>\n\t\t\t// <p>foo<b>[]<u>bar</u></b></p>\n\t\t\t// <p>foo{}<b><u>bar</u></b></p>\n\t\t\tif ( positionOffset === 0 ) {\n\t\t\t\tconst newPosition = new Position( positionParent.parent, positionParent.index );\n\n\t\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t\t}\n\t\t\t// <p>foo<b><u>b{}ar</u></b></p>\n\t\t\t// <p>foo<b><u>b[]ar</u></b></p>\n\t\t\t// <p>foo<b><u>b</u>[]<u>ar</u></b></p>\n\t\t\t// <p>foo<b><u>b</u></b>[]<b><u>ar</u></b></p>\n\t\t\telse {\n\t\t\t\tconst offsetAfter = positionParent.index + 1;\n\n\t\t\t\t// Break element.\n\t\t\t\tconst clonedNode = positionParent._clone();\n\n\t\t\t\t// Insert cloned node to position's parent node.\n\t\t\t\tpositionParent.parent._insertChild( offsetAfter, clonedNode );\n\t\t\t\tthis._addToClonedElementsGroup( clonedNode );\n\n\t\t\t\t// Get nodes to move.\n\t\t\t\tconst count = positionParent.childCount - positionOffset;\n\t\t\t\tconst nodesToMove = positionParent._removeChildren( positionOffset, count );\n\n\t\t\t\t// Move nodes to cloned node.\n\t\t\t\tclonedNode._appendChild( nodesToMove );\n\n\t\t\t\t// Create new position to work on.\n\t\t\t\tconst newPosition = new Position( positionParent.parent, offsetAfter );\n\n\t\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Stores the information that an {@link module:engine/view/attributeelement~AttributeElement attribute element} was\n\t * added to the tree. Saves the reference to the group in the given element and updates the group, so other elements\n\t * from the group now keep a reference to the given attribute element.\n\t *\n\t * The clones group can be obtained using {@link module:engine/view/attributeelement~AttributeElement#getElementsWithSameId}.\n\t *\n\t * Does nothing if added element has no {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} element Attribute element to save.\n\t */\n\t_addToClonedElementsGroup( element ) {\n\t\t// Add only if the element is in document tree.\n\t\tif ( !element.root.is( 'rootElement' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Traverse the element's children recursively to find other attribute elements that also might got inserted.\n\t\t// The loop is at the beginning so we can make fast returns later in the code.\n\t\tif ( element.is( 'element' ) ) {\n\t\t\tfor ( const child of element.getChildren() ) {\n\t\t\t\tthis._addToClonedElementsGroup( child );\n\t\t\t}\n\t\t}\n\n\t\tconst id = element.id;\n\n\t\tif ( !id ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet group = this._cloneGroups.get( id );\n\n\t\tif ( !group ) {\n\t\t\tgroup = new Set();\n\t\t\tthis._cloneGroups.set( id, group );\n\t\t}\n\n\t\tgroup.add( element );\n\t\telement._clonesGroup = group;\n\t}\n\n\t/**\n\t * Removes all the information about the given {@link module:engine/view/attributeelement~AttributeElement attribute element}\n\t * from its clones group.\n\t *\n\t * Keep in mind, that the element will still keep a reference to the group (but the group will not keep a reference to it).\n\t * This allows to reference the whole group even if the element was already removed from the tree.\n\t *\n\t * Does nothing if the element has no {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} element Attribute element to remove.\n\t */\n\t_removeFromClonedElementsGroup( element ) {\n\t\t// Traverse the element's children recursively to find other attribute elements that also got removed.\n\t\t// The loop is at the beginning so we can make fast returns later in the code.\n\t\tif ( element.is( 'element' ) ) {\n\t\t\tfor ( const child of element.getChildren() ) {\n\t\t\t\tthis._removeFromClonedElementsGroup( child );\n\t\t\t}\n\t\t}\n\n\t\tconst id = element.id;\n\n\t\tif ( !id ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst group = this._cloneGroups.get( id );\n\n\t\tif ( !group ) {\n\t\t\treturn;\n\t\t}\n\n\t\tgroup.delete( element );\n\t\t// Not removing group from element on purpose!\n\t\t// If other parts of code have reference to this element, they will be able to get references to other elements from the group.\n\t}\n}\n\n// Helper function for `view.writer.wrap`. Checks if given element has any children that are not ui elements.\nfunction _hasNonUiChildren( parent ) {\n\treturn Array.from( parent.getChildren() ).some( child => !child.is( 'uiElement' ) );\n}\n\n/**\n * Attribute element need to be instance of attribute element.\n *\n * @error view-writer-wrap-invalid-attribute\n */\n\n// Returns first parent container of specified {@link module:engine/view/position~Position Position}.\n// Position's parent node is checked as first, then next parents are checked.\n// Note that {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment} is treated like a container.\n//\n// @param {module:engine/view/position~Position} position Position used as a start point to locate parent container.\n// @returns {module:engine/view/containerelement~ContainerElement|module:engine/view/documentfragment~DocumentFragment|undefined}\n// Parent container element or `undefined` if container is not found.\nfunction getParentContainer( position ) {\n\tlet parent = position.parent;\n\n\twhile ( !isContainerOrFragment( parent ) ) {\n\t\tif ( !parent ) {\n\t\t\treturn undefined;\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\n\treturn parent;\n}\n\n// Checks if first {@link module:engine/view/attributeelement~AttributeElement AttributeElement} provided to the function\n// can be wrapped otuside second element. It is done by comparing elements'\n// {@link module:engine/view/attributeelement~AttributeElement#priority priorities}, if both have same priority\n// {@link module:engine/view/element~Element#getIdentity identities} are compared.\n//\n// @param {module:engine/view/attributeelement~AttributeElement} a\n// @param {module:engine/view/attributeelement~AttributeElement} b\n// @returns {Boolean}\nfunction shouldABeOutsideB( a, b ) {\n\tif ( a.priority < b.priority ) {\n\t\treturn true;\n\t} else if ( a.priority > b.priority ) {\n\t\treturn false;\n\t}\n\n\t// When priorities are equal and names are different - use identities.\n\treturn a.getIdentity() < b.getIdentity();\n}\n\n// Returns new position that is moved to near text node. Returns same position if there is no text node before of after\n// specified position.\n//\n//\t\t<p>foo[]</p>  ->  <p>foo{}</p>\n//\t\t<p>[]foo</p>  ->  <p>{}foo</p>\n//\n// @param {module:engine/view/position~Position} position\n// @returns {module:engine/view/position~Position} Position located inside text node or same position if there is no text nodes\n// before or after position location.\nfunction movePositionToTextNode( position ) {\n\tconst nodeBefore = position.nodeBefore;\n\n\tif ( nodeBefore && nodeBefore.is( 'text' ) ) {\n\t\treturn new Position( nodeBefore, nodeBefore.data.length );\n\t}\n\n\tconst nodeAfter = position.nodeAfter;\n\n\tif ( nodeAfter && nodeAfter.is( 'text' ) ) {\n\t\treturn new Position( nodeAfter, 0 );\n\t}\n\n\treturn position;\n}\n\n// Breaks text node into two text nodes when possible.\n//\n//\t\t<p>foo{}bar</p> -> <p>foo[]bar</p>\n//\t\t<p>{}foobar</p> -> <p>[]foobar</p>\n//\t\t<p>foobar{}</p> -> <p>foobar[]</p>\n//\n// @param {module:engine/view/position~Position} position Position that need to be placed inside text node.\n// @returns {module:engine/view/position~Position} New position after breaking text node.\nfunction breakTextNode( position ) {\n\tif ( position.offset == position.parent.data.length ) {\n\t\treturn new Position( position.parent.parent, position.parent.index + 1 );\n\t}\n\n\tif ( position.offset === 0 ) {\n\t\treturn new Position( position.parent.parent, position.parent.index );\n\t}\n\n\t// Get part of the text that need to be moved.\n\tconst textToMove = position.parent.data.slice( position.offset );\n\n\t// Leave rest of the text in position's parent.\n\tposition.parent._data = position.parent.data.slice( 0, position.offset );\n\n\t// Insert new text node after position's parent text node.\n\tposition.parent.parent._insertChild( position.parent.index + 1, new Text( textToMove ) );\n\n\t// Return new position between two newly created text nodes.\n\treturn new Position( position.parent.parent, position.parent.index + 1 );\n}\n\n// Merges two text nodes into first node. Removes second node and returns merge position.\n//\n// @param {module:engine/view/text~Text} t1 First text node to merge. Data from second text node will be moved at the end of\n// this text node.\n// @param {module:engine/view/text~Text} t2 Second text node to merge. This node will be removed after merging.\n// @returns {module:engine/view/position~Position} Position after merging text nodes.\nfunction mergeTextNodes( t1, t2 ) {\n\t// Merge text data into first text node and remove second one.\n\tconst nodeBeforeLength = t1.data.length;\n\tt1._data += t2.data;\n\tt2._remove();\n\n\treturn new Position( t1, nodeBeforeLength );\n}\n\n// Checks if provided nodes are valid to insert. Checks if each node is an instance of\n// {@link module:engine/view/text~Text Text} or {@link module:engine/view/attributeelement~AttributeElement AttributeElement},\n// {@link module:engine/view/containerelement~ContainerElement ContainerElement},\n// {@link module:engine/view/emptyelement~EmptyElement EmptyElement} or\n// {@link module:engine/view/uielement~UIElement UIElement}.\n//\n// Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-insert-invalid-node` when nodes to insert\n// contains instances that are not {@link module:engine/view/text~Text Texts},\n// {@link module:engine/view/emptyelement~EmptyElement EmptyElements},\n// {@link module:engine/view/uielement~UIElement UIElements},\n// {@link module:engine/view/attributeelement~AttributeElement AttributeElements} or\n// {@link module:engine/view/containerelement~ContainerElement ContainerElements}.\n//\n// @param Iterable.<module:engine/view/text~Text|module:engine/view/attributeelement~AttributeElement\n// |module:engine/view/containerelement~ContainerElement> nodes\n// @param {Object} errorContext\nfunction validateNodesToInsert( nodes, errorContext ) {\n\tfor ( const node of nodes ) {\n\t\tif ( !validNodesToInsert.some( ( validNode => node instanceof validNode ) ) ) { // eslint-disable-line no-use-before-define\n\t\t\t/**\n\t\t\t * Inserted nodes should be valid to insert. of {@link module:engine/view/attributeelement~AttributeElement AttributeElement},\n\t\t\t * {@link module:engine/view/containerelement~ContainerElement ContainerElement},\n\t\t\t * {@link module:engine/view/emptyelement~EmptyElement EmptyElement},\n\t\t\t * {@link module:engine/view/uielement~UIElement UIElement}, {@link module:engine/view/text~Text Text}.\n\t\t\t *\n\t\t\t * @error view-writer-insert-invalid-node\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-insert-invalid-node', errorContext );\n\t\t}\n\n\t\tif ( !node.is( 'text' ) ) {\n\t\t\tvalidateNodesToInsert( node.getChildren(), errorContext );\n\t\t}\n\t}\n}\n\nconst validNodesToInsert = [ Text, AttributeElement, ContainerElement, EmptyElement, UIElement ];\n\n// Checks if node is ContainerElement or DocumentFragment, because in most cases they should be treated the same way.\n//\n// @param {module:engine/view/node~Node} node\n// @returns {Boolean} Returns `true` if node is instance of ContainerElement or DocumentFragment.\nfunction isContainerOrFragment( node ) {\n\treturn node && ( node.is( 'containerElement' ) || node.is( 'documentFragment' ) );\n}\n\n// Checks if {@link module:engine/view/range~Range#start range start} and {@link module:engine/view/range~Range#end range end} are placed\n// inside same {@link module:engine/view/containerelement~ContainerElement container element}.\n// Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when validation fails.\n//\n// @param {module:engine/view/range~Range} range\n// @param {Object} errorContext\nfunction validateRangeContainer( range, errorContext ) {\n\tconst startContainer = getParentContainer( range.start );\n\tconst endContainer = getParentContainer( range.end );\n\n\tif ( !startContainer || !endContainer || startContainer !== endContainer ) {\n\t\t/**\n\t\t * Range container is invalid. This can happen if {@link module:engine/view/range~Range#start range start} and\n\t\t * {@link module:engine/view/range~Range#end range end} positions are not placed inside same container or\n\t\t * parent container for these positions cannot be found.\n\t\t *\n\t\t * @error view-writer-invalid-range-container\n\t\t */\n\n\t\tthrow new CKEditorError( 'view-writer-invalid-range-container', errorContext );\n\t}\n}\n\n// Checks if two attribute elements can be joined together. Elements can be joined together if, and only if\n// they do not have ids specified.\n//\n// @private\n// @param {module:engine/view/element~Element} a\n// @param {module:engine/view/element~Element} b\n// @returns {Boolean}\nfunction canBeJoined( a, b ) {\n\treturn a.id === null && b.id === null;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/insertat\n */\n\n/**\n * Inserts node to the parent at given index.\n *\n * @param {Element} parentElement Parent element.\n * @param {Number} index Insertions index.\n * @param {Node} nodeToInsert Node to insert.\n */\nexport default function insertAt( parentElement, index, nodeToInsert ) {\n\tparentElement.insertBefore( nodeToInsert, parentElement.childNodes[ index ] || null );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/remove\n */\n\n/**\n * Removes given node from parent.\n *\n * @param {Node} node Node to remove.\n */\nexport default function remove( node ) {\n\tconst parent = node.parentNode;\n\n\tif ( parent ) {\n\t\tparent.removeChild( node );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals Node */\n\n/**\n * @module engine/view/renderer\n */\n\nimport ViewText from './text';\nimport ViewPosition from './position';\nimport { INLINE_FILLER, INLINE_FILLER_LENGTH, startsWithFiller, isInlineFiller, isBlockFiller } from './filler';\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport diff from '@ckeditor/ckeditor5-utils/src/diff';\nimport insertAt from '@ckeditor/ckeditor5-utils/src/dom/insertat';\nimport remove from '@ckeditor/ckeditor5-utils/src/dom/remove';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\nimport isNode from '@ckeditor/ckeditor5-utils/src/dom/isnode';\nimport fastDiff from '@ckeditor/ckeditor5-utils/src/fastdiff';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Renderer is responsible for updating the DOM structure and the DOM selection based on\n * the {@link module:engine/view/renderer~Renderer#markToSync information about updated view nodes}.\n * In other words, it renders the view to the DOM.\n *\n * Its main responsibility is to make only the necessary, minimal changes to the DOM. However, unlike in many\n * virtual DOM implementations, the primary reason for doing minimal changes is not the performance but ensuring\n * that native editing features such as text composition, autocompletion, spell checking, selection's x-index are\n * affected as little as possible.\n *\n * Renderer uses {@link module:engine/view/domconverter~DomConverter} to transform view nodes and positions\n * to and from the DOM.\n */\nexport default class Renderer {\n\t/**\n\t * Creates a renderer instance.\n\t *\n\t * @param {module:engine/view/domconverter~DomConverter} domConverter Converter instance.\n\t * @param {module:engine/view/documentselection~DocumentSelection} selection View selection.\n\t */\n\tconstructor( domConverter, selection ) {\n\t\t/**\n\t\t * Set of DOM Documents instances.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<Document>}\n\t\t */\n\t\tthis.domDocuments = new Set();\n\n\t\t/**\n\t\t * Converter instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = domConverter;\n\n\t\t/**\n\t\t * Set of nodes which attributes changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedAttributes = new Set();\n\n\t\t/**\n\t\t * Set of elements which child lists changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedChildren = new Set();\n\n\t\t/**\n\t\t * Set of text nodes which text data changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedTexts = new Set();\n\n\t\t/**\n\t\t * View selection. Renderer updates DOM selection based on the view selection.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection}\n\t\t */\n\t\tthis.selection = selection;\n\n\t\t/**\n\t\t * Indicates if the view document is focused and selection can be rendered. Selection will not be rendered if\n\t\t * this is set to `false`.\n\t\t *\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.isFocused = false;\n\n\t\t/**\n\t\t * The text node in which the inline filler was rendered.\n\t\t *\n\t\t * @private\n\t\t * @member {Text}\n\t\t */\n\t\tthis._inlineFiller = null;\n\n\t\t/**\n\t\t * DOM element containing fake selection.\n\t\t *\n\t\t * @private\n\t\t * @type {null|HTMLElement}\n\t\t */\n\t\tthis._fakeSelectionContainer = null;\n\t}\n\n\t/**\n\t * Marks a view node to be updated in the DOM by {@link #render `render()`}.\n\t *\n\t * Note that only view nodes whose parents have corresponding DOM elements need to be marked to be synchronized.\n\t *\n\t * @see #markedAttributes\n\t * @see #markedChildren\n\t * @see #markedTexts\n\t *\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Node to be marked.\n\t */\n\tmarkToSync( type, node ) {\n\t\tif ( type === 'text' ) {\n\t\t\tif ( this.domConverter.mapViewToDom( node.parent ) ) {\n\t\t\t\tthis.markedTexts.add( node );\n\t\t\t}\n\t\t} else {\n\t\t\t// If the node has no DOM element it is not rendered yet,\n\t\t\t// its children/attributes do not need to be marked to be sync.\n\t\t\tif ( !this.domConverter.mapViewToDom( node ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( type === 'attributes' ) {\n\t\t\t\tthis.markedAttributes.add( node );\n\t\t\t} else if ( type === 'children' ) {\n\t\t\t\tthis.markedChildren.add( node );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * Unknown type passed to Renderer.markToSync.\n\t\t\t\t *\n\t\t\t\t * @error renderer-unknown-type\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.', this );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Renders all buffered changes ({@link #markedAttributes}, {@link #markedChildren} and {@link #markedTexts}) and\n\t * the current view selection (if needed) to the DOM by applying a minimal set of changes to it.\n\t *\n\t * Renderer tries not to break the text composition (e.g. IME) and x-index of the selection,\n\t * so it does as little as it is needed to update the DOM.\n\t *\n\t * Renderer also handles {@link module:engine/view/filler fillers}. Especially, it checks if the inline filler is needed\n\t * at the selection position and adds or removes it. To prevent breaking text composition inline filler will not be\n\t * removed as long as the selection is in the text node which needed it at first.\n\t */\n\trender() {\n\t\tlet inlineFillerPosition;\n\n\t\t// Refresh mappings.\n\t\tfor ( const element of this.markedChildren ) {\n\t\t\tthis._updateChildrenMappings( element );\n\t\t}\n\n\t\t// There was inline filler rendered in the DOM but it's not\n\t\t// at the selection position any more, so we can remove it\n\t\t// (cause even if it's needed, it must be placed in another location).\n\t\tif ( this._inlineFiller && !this._isSelectionInInlineFiller() ) {\n\t\t\tthis._removeInlineFiller();\n\t\t}\n\n\t\t// If we've got the filler, let's try to guess its position in the view.\n\t\tif ( this._inlineFiller ) {\n\t\t\tinlineFillerPosition = this._getInlineFillerPosition();\n\t\t}\n\t\t// Otherwise, if it's needed, create it at the selection position.\n\t\telse if ( this._needsInlineFillerAtSelection() ) {\n\t\t\tinlineFillerPosition = this.selection.getFirstPosition();\n\n\t\t\t// Do not use `markToSync` so it will be added even if the parent is already added.\n\t\t\tthis.markedChildren.add( inlineFillerPosition.parent );\n\t\t}\n\n\t\tfor ( const element of this.markedAttributes ) {\n\t\t\tthis._updateAttrs( element );\n\t\t}\n\n\t\tfor ( const element of this.markedChildren ) {\n\t\t\tthis._updateChildren( element, { inlineFillerPosition } );\n\t\t}\n\n\t\tfor ( const node of this.markedTexts ) {\n\t\t\tif ( !this.markedChildren.has( node.parent ) && this.domConverter.mapViewToDom( node.parent ) ) {\n\t\t\t\tthis._updateText( node, { inlineFillerPosition } );\n\t\t\t}\n\t\t}\n\n\t\t// Check whether the inline filler is required and where it really is in the DOM.\n\t\t// At this point in most cases it will be in the DOM, but there are exceptions.\n\t\t// For example, if the inline filler was deep in the created DOM structure, it will not be created.\n\t\t// Similarly, if it was removed at the beginning of this function and then neither text nor children were updated,\n\t\t// it will not be present.\n\t\t// Fix those and similar scenarios.\n\t\tif ( inlineFillerPosition ) {\n\t\t\tconst fillerDomPosition = this.domConverter.viewPositionToDom( inlineFillerPosition );\n\t\t\tconst domDocument = fillerDomPosition.parent.ownerDocument;\n\n\t\t\tif ( !startsWithFiller( fillerDomPosition.parent ) ) {\n\t\t\t\t// Filler has not been created at filler position. Create it now.\n\t\t\t\tthis._inlineFiller = addInlineFiller( domDocument, fillerDomPosition.parent, fillerDomPosition.offset );\n\t\t\t} else {\n\t\t\t\t// Filler has been found, save it.\n\t\t\t\tthis._inlineFiller = fillerDomPosition.parent;\n\t\t\t}\n\t\t} else {\n\t\t\t// There is no filler needed.\n\t\t\tthis._inlineFiller = null;\n\t\t}\n\n\t\tthis._updateSelection();\n\t\tthis._updateFocus();\n\n\t\tthis.markedTexts.clear();\n\t\tthis.markedAttributes.clear();\n\t\tthis.markedChildren.clear();\n\t}\n\n\t/**\n\t * Updates mappings of view element's children.\n\t *\n\t * Children that were replaced in the view structure by similar elements (same tag name) are treated as 'replaced'.\n\t * This means that their mappings can be updated so the new view elements are mapped to the existing DOM elements.\n\t * Thanks to that these elements do not need to be re-rendered completely.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewElement The view element whose children mappings will be updated.\n\t */\n\t_updateChildrenMappings( viewElement ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that it was already removed from DOM and there is no need to process it.\n\t\t\treturn;\n\t\t}\n\n\t\tconst actualDomChildren = this.domConverter.mapViewToDom( viewElement ).childNodes;\n\t\tconst expectedDomChildren = Array.from(\n\t\t\tthis.domConverter.viewChildrenToDom( viewElement, domElement.ownerDocument, { withChildren: false } )\n\t\t);\n\t\tconst diff = this._diffNodeLists( actualDomChildren, expectedDomChildren );\n\t\tconst actions = this._findReplaceActions( diff, actualDomChildren, expectedDomChildren );\n\n\t\tif ( actions.indexOf( 'replace' ) !== -1 ) {\n\t\t\tconst counter = { equal: 0, insert: 0, delete: 0 };\n\n\t\t\tfor ( const action of actions ) {\n\t\t\t\tif ( action === 'replace' ) {\n\t\t\t\t\tconst insertIndex = counter.equal + counter.insert;\n\t\t\t\t\tconst deleteIndex = counter.equal + counter.delete;\n\t\t\t\t\tconst viewChild = viewElement.getChild( insertIndex );\n\n\t\t\t\t\t// The 'uiElement' is a special one and its children are not stored in a view (#799),\n\t\t\t\t\t// so we cannot use it with replacing flow (since it uses view children during rendering\n\t\t\t\t\t// which will always result in rendering empty element).\n\t\t\t\t\tif ( viewChild && !viewChild.is( 'uiElement' ) ) {\n\t\t\t\t\t\tthis._updateElementMappings( viewChild, actualDomChildren[ deleteIndex ] );\n\t\t\t\t\t}\n\n\t\t\t\t\tremove( expectedDomChildren[ insertIndex ] );\n\t\t\t\t\tcounter.equal++;\n\t\t\t\t} else {\n\t\t\t\t\tcounter[ action ]++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Updates mappings of a given view element.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewElement The view element whose mappings will be updated.\n\t * @param {Node} domElement The DOM element representing the given view element.\n\t */\n\t_updateElementMappings( viewElement, domElement ) {\n\t\t// Remap 'DomConverter' bindings.\n\t\tthis.domConverter.unbindDomElement( domElement );\n\t\tthis.domConverter.bindElements( domElement, viewElement );\n\n\t\t// View element may have children which needs to be updated, but are not marked, mark them to update.\n\t\tthis.markedChildren.add( viewElement );\n\n\t\t// Because we replace new view element mapping with the existing one, the corresponding DOM element\n\t\t// will not be rerendered. The new view element may have different attributes than the previous one.\n\t\t// Since its corresponding DOM element will not be rerendered, new attributes will not be added\n\t\t// to the DOM, so we need to mark it here to make sure its attributes gets updated. See #1427 for more\n\t\t// detailed case study.\n\t\t// Also there are cases where replaced element is removed from the view structure and then has\n\t\t// its attributes changed or removed. In such cases the element will not be present in `markedAttributes`\n\t\t// and also may be the same (`element.isSimilar()`) as the reused element not having its attributes updated.\n\t\t// To prevent such situations we always mark reused element to have its attributes rerenderd (#1560).\n\t\tthis.markedAttributes.add( viewElement );\n\t}\n\n\t/**\n\t * Gets the position of the inline filler based on the current selection.\n\t * Here, we assume that we know that the filler is needed and\n\t * {@link #_isSelectionInInlineFiller is at the selection position}, and, since it is needed,\n\t * it is somewhere at the selection position.\n\t *\n\t * Note: The filler position cannot be restored based on the filler's DOM text node, because\n\t * when this method is called (before rendering), the bindings will often be broken. View-to-DOM\n\t * bindings are only dependable after rendering.\n\t *\n\t * @private\n\t * @returns {module:engine/view/position~Position}\n\t */\n\t_getInlineFillerPosition() {\n\t\tconst firstPos = this.selection.getFirstPosition();\n\n\t\tif ( firstPos.parent.is( 'text' ) ) {\n\t\t\treturn ViewPosition._createBefore( this.selection.getFirstPosition().parent );\n\t\t} else {\n\t\t\treturn firstPos;\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if the selection has not left the inline filler's text node.\n\t * If it is `true`, it means that the filler had been added for a reason and the selection did not\n\t * leave the filler's text node. For example, the user can be in the middle of a composition so it should not be touched.\n\t *\n\t * @private\n\t * @returns {Boolean} `true` if the inline filler and selection are in the same place.\n\t */\n\t_isSelectionInInlineFiller() {\n\t\tif ( this.selection.rangeCount != 1 || !this.selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Note, we can't check if selection's position equals position of the\n\t\t// this._inlineFiller node, because of #663. We may not be able to calculate\n\t\t// the filler's position in the view at this stage.\n\t\t// Instead, we check it the other way – whether selection is anchored in\n\t\t// that text node or next to it.\n\n\t\t// Possible options are:\n\t\t// \"FILLER{}\"\n\t\t// \"FILLERadded-text{}\"\n\t\tconst selectionPosition = this.selection.getFirstPosition();\n\t\tconst position = this.domConverter.viewPositionToDom( selectionPosition );\n\n\t\tif ( position && isText( position.parent ) && startsWithFiller( position.parent ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Removes the inline filler.\n\t *\n\t * @private\n\t */\n\t_removeInlineFiller() {\n\t\tconst domFillerNode = this._inlineFiller;\n\n\t\t// Something weird happened and the stored node doesn't contain the filler's text.\n\t\tif ( !startsWithFiller( domFillerNode ) ) {\n\t\t\t/**\n\t\t\t * The inline filler node was lost. Most likely, something overwrote the filler text node\n\t\t\t * in the DOM.\n\t\t\t *\n\t\t\t * @error view-renderer-filler-was-lost\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-renderer-filler-was-lost: The inline filler node was lost.', this );\n\t\t}\n\n\t\tif ( isInlineFiller( domFillerNode ) ) {\n\t\t\tdomFillerNode.parentNode.removeChild( domFillerNode );\n\t\t} else {\n\t\t\tdomFillerNode.data = domFillerNode.data.substr( INLINE_FILLER_LENGTH );\n\t\t}\n\n\t\tthis._inlineFiller = null;\n\t}\n\n\t/**\n\t * Checks if the inline {@link module:engine/view/filler filler} should be added.\n\t *\n\t * @private\n\t * @returns {Boolean} `true` if the inline filler should be added.\n\t */\n\t_needsInlineFillerAtSelection() {\n\t\tif ( this.selection.rangeCount != 1 || !this.selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst selectionPosition = this.selection.getFirstPosition();\n\t\tconst selectionParent = selectionPosition.parent;\n\t\tconst selectionOffset = selectionPosition.offset;\n\n\t\t// If there is no DOM root we do not care about fillers.\n\t\tif ( !this.domConverter.mapViewToDom( selectionParent.root ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !( selectionParent.is( 'element' ) ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Prevent adding inline filler inside elements with contenteditable=false.\n\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/1170\n\t\tif ( !isEditable( selectionParent ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We have block filler, we do not need inline one.\n\t\tif ( selectionOffset === selectionParent.getFillerOffset() ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst nodeBefore = selectionPosition.nodeBefore;\n\t\tconst nodeAfter = selectionPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof ViewText || nodeAfter instanceof ViewText ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks if text needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} viewText View text to update.\n\t * @param {Object} options\n\t * @param {module:engine/view/position~Position} options.inlineFillerPosition The position where the inline\n\t * filler should be rendered.\n\t */\n\t_updateText( viewText, options ) {\n\t\tconst domText = this.domConverter.findCorrespondingDomText( viewText );\n\t\tconst newDomText = this.domConverter.viewToDom( viewText, domText.ownerDocument );\n\n\t\tconst actualText = domText.data;\n\t\tlet expectedText = newDomText.data;\n\n\t\tconst filler = options.inlineFillerPosition;\n\n\t\tif ( filler && filler.parent == viewText.parent && filler.offset == viewText.index ) {\n\t\t\texpectedText = INLINE_FILLER + expectedText;\n\t\t}\n\n\t\tif ( actualText != expectedText ) {\n\t\t\tconst actions = fastDiff( actualText, expectedText );\n\n\t\t\tfor ( const action of actions ) {\n\t\t\t\tif ( action.type === 'insert' ) {\n\t\t\t\t\tdomText.insertData( action.index, action.values.join( '' ) );\n\t\t\t\t} else { // 'delete'\n\t\t\t\t\tdomText.deleteData( action.index, action.howMany );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if attribute list needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewElement The view element to update.\n\t */\n\t_updateAttrs( viewElement ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that 'viewElement' is outdated as its mapping was updated\n\t\t\t// in 'this._updateChildrenMappings()'. There is no need to process it as new view element which\n\t\t\t// replaced old 'viewElement' mapping was also added to 'this.markedAttributes'\n\t\t\t// in 'this._updateChildrenMappings()' so it will be processed separately.\n\t\t\treturn;\n\t\t}\n\n\t\tconst domAttrKeys = Array.from( domElement.attributes ).map( attr => attr.name );\n\t\tconst viewAttrKeys = viewElement.getAttributeKeys();\n\n\t\t// Add or overwrite attributes.\n\t\tfor ( const key of viewAttrKeys ) {\n\t\t\tdomElement.setAttribute( key, viewElement.getAttribute( key ) );\n\t\t}\n\n\t\t// Remove from DOM attributes which do not exists in the view.\n\t\tfor ( const key of domAttrKeys ) {\n\t\t\tif ( !viewElement.hasAttribute( key ) ) {\n\t\t\t\tdomElement.removeAttribute( key );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if elements child list needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewElement View element to update.\n\t * @param {Object} options\n\t * @param {module:engine/view/position~Position} options.inlineFillerPosition The position where the inline\n\t * filler should be rendered.\n\t */\n\t_updateChildren( viewElement, options ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that it was already removed from DOM.\n\t\t\t// There is no need to process it. It will be processed when re-inserted.\n\t\t\treturn;\n\t\t}\n\n\t\tconst inlineFillerPosition = options.inlineFillerPosition;\n\t\tconst actualDomChildren = this.domConverter.mapViewToDom( viewElement ).childNodes;\n\t\tconst expectedDomChildren = Array.from(\n\t\t\tthis.domConverter.viewChildrenToDom( viewElement, domElement.ownerDocument, { bind: true, inlineFillerPosition } )\n\t\t);\n\n\t\t// Inline filler element has to be created as it is present in the DOM, but not in the view. It is required\n\t\t// during diffing so text nodes could be compared correctly and also during rendering to maintain\n\t\t// proper order and indexes while updating the DOM.\n\t\tif ( inlineFillerPosition && inlineFillerPosition.parent === viewElement ) {\n\t\t\taddInlineFiller( domElement.ownerDocument, expectedDomChildren, inlineFillerPosition.offset );\n\t\t}\n\n\t\tconst diff = this._diffNodeLists( actualDomChildren, expectedDomChildren );\n\n\t\tlet i = 0;\n\t\tconst nodesToUnbind = new Set();\n\n\t\tfor ( const action of diff ) {\n\t\t\tif ( action === 'insert' ) {\n\t\t\t\tinsertAt( domElement, i, expectedDomChildren[ i ] );\n\t\t\t\ti++;\n\t\t\t} else if ( action === 'delete' ) {\n\t\t\t\tnodesToUnbind.add( actualDomChildren[ i ] );\n\t\t\t\tremove( actualDomChildren[ i ] );\n\t\t\t} else { // 'equal'\n\t\t\t\t// Force updating text nodes inside elements which did not change and do not need to be re-rendered (#1125).\n\t\t\t\tthis._markDescendantTextToSync( this.domConverter.domToView( expectedDomChildren[ i ] ) );\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\t// Unbind removed nodes. When node does not have a parent it means that it was removed from DOM tree during\n\t\t// comparision with the expected DOM. We don't need to check child nodes, because if child node was reinserted,\n\t\t// it was moved to DOM tree out of the removed node.\n\t\tfor ( const node of nodesToUnbind ) {\n\t\t\tif ( !node.parentNode ) {\n\t\t\t\tthis.domConverter.unbindDomElement( node );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Shorthand for diffing two arrays or node lists of DOM nodes.\n\t *\n\t * @private\n\t * @param {Array.<Node>|NodeList} actualDomChildren Actual DOM children\n\t * @param {Array.<Node>|NodeList} expectedDomChildren Expected DOM children.\n\t * @returns {Array.<String>} The list of actions based on the {@link module:utils/diff~diff} function.\n\t */\n\t_diffNodeLists( actualDomChildren, expectedDomChildren ) {\n\t\tactualDomChildren = filterOutFakeSelectionContainer( actualDomChildren, this._fakeSelectionContainer );\n\n\t\treturn diff( actualDomChildren, expectedDomChildren, sameNodes.bind( null, this.domConverter.blockFiller ) );\n\t}\n\n\t/**\n\t * Finds DOM nodes that were replaced with the similar nodes (same tag name) in the view. All nodes are compared\n\t * within one `insert`/`delete` action group, for example:\n\t *\n\t * \t\tActual DOM:\t\t<p><b>Foo</b>Bar<i>Baz</i><b>Bax</b></p>\n\t * \t\tExpected DOM:\t<p>Bar<b>123</b><i>Baz</i><b>456</b></p>\n\t * \t\tInput actions:\t[ insert, insert, delete, delete, equal, insert, delete ]\n\t * \t\tOutput actions:\t[ insert, replace, delete, equal, replace ]\n\t *\n\t * @private\n\t * @param {Array.<String>} actions Actions array which is a result of the {@link module:utils/diff~diff} function.\n\t * @param {Array.<Node>|NodeList} actualDom Actual DOM children\n\t * @param {Array.<Node>} expectedDom Expected DOM children.\n\t * @returns {Array.<String>} Actions array modified with the `replace` actions.\n\t */\n\t_findReplaceActions( actions, actualDom, expectedDom ) {\n\t\t// If there is no both 'insert' and 'delete' actions, no need to check for replaced elements.\n\t\tif ( actions.indexOf( 'insert' ) === -1 || actions.indexOf( 'delete' ) === -1 ) {\n\t\t\treturn actions;\n\t\t}\n\n\t\tlet newActions = [];\n\t\tlet actualSlice = [];\n\t\tlet expectedSlice = [];\n\n\t\tconst counter = { equal: 0, insert: 0, delete: 0 };\n\n\t\tfor ( const action of actions ) {\n\t\t\tif ( action === 'insert' ) {\n\t\t\t\texpectedSlice.push( expectedDom[ counter.equal + counter.insert ] );\n\t\t\t} else if ( action === 'delete' ) {\n\t\t\t\tactualSlice.push( actualDom[ counter.equal + counter.delete ] );\n\t\t\t} else { // equal\n\t\t\t\tnewActions = newActions.concat( diff( actualSlice, expectedSlice, areSimilar ).map( x => x === 'equal' ? 'replace' : x ) );\n\t\t\t\tnewActions.push( 'equal' );\n\t\t\t\t// Reset stored elements on 'equal'.\n\t\t\t\tactualSlice = [];\n\t\t\t\texpectedSlice = [];\n\t\t\t}\n\t\t\tcounter[ action ]++;\n\t\t}\n\n\t\treturn newActions.concat( diff( actualSlice, expectedSlice, areSimilar ).map( x => x === 'equal' ? 'replace' : x ) );\n\t}\n\n\t/**\n\t * Marks text nodes to be synchronized.\n\t *\n\t * If a text node is passed, it will be marked. If an element is passed, all descendant text nodes inside it will be marked.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewNode View node to sync.\n\t */\n\t_markDescendantTextToSync( viewNode ) {\n\t\tif ( !viewNode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( viewNode.is( 'text' ) ) {\n\t\t\tthis.markedTexts.add( viewNode );\n\t\t} else if ( viewNode.is( 'element' ) ) {\n\t\t\tfor ( const child of viewNode.getChildren() ) {\n\t\t\t\tthis._markDescendantTextToSync( child );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the selection needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t */\n\t_updateSelection() {\n\t\t// If there is no selection - remove DOM and fake selections.\n\t\tif ( this.selection.rangeCount === 0 ) {\n\t\t\tthis._removeDomSelection();\n\t\t\tthis._removeFakeSelection();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst domRoot = this.domConverter.mapViewToDom( this.selection.editableElement );\n\n\t\t// Do nothing if there is no focus, or there is no DOM element corresponding to selection's editable element.\n\t\tif ( !this.isFocused || !domRoot ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Render selection.\n\t\tif ( this.selection.isFake ) {\n\t\t\tthis._updateFakeSelection( domRoot );\n\t\t} else {\n\t\t\tthis._removeFakeSelection();\n\t\t\tthis._updateDomSelection( domRoot );\n\t\t}\n\t}\n\n\t/**\n\t * Updates the fake selection.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot A valid DOM root where the fake selection container should be added.\n\t */\n\t_updateFakeSelection( domRoot ) {\n\t\tconst domDocument = domRoot.ownerDocument;\n\t\tlet container = this._fakeSelectionContainer;\n\n\t\t// Create fake selection container if one does not exist.\n\t\tif ( !container ) {\n\t\t\tthis._fakeSelectionContainer = container = domDocument.createElement( 'div' );\n\n\t\t\tObject.assign( container.style, {\n\t\t\t\tposition: 'fixed',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: '-9999px',\n\t\t\t\t// See https://github.com/ckeditor/ckeditor5/issues/752.\n\t\t\t\twidth: '42px'\n\t\t\t} );\n\n\t\t\t// Fill it with a text node so we can update it later.\n\t\t\tcontainer.textContent = '\\u00A0';\n\t\t}\n\n\t\tif ( !container.parentElement || container.parentElement != domRoot ) {\n\t\t\tdomRoot.appendChild( container );\n\t\t}\n\n\t\t// Update contents.\n\t\tcontainer.textContent = this.selection.fakeSelectionLabel || '\\u00A0';\n\n\t\t// Update selection.\n\t\tconst domSelection = domDocument.getSelection();\n\t\tconst domRange = domDocument.createRange();\n\n\t\tdomSelection.removeAllRanges();\n\t\tdomRange.selectNodeContents( container );\n\t\tdomSelection.addRange( domRange );\n\n\t\t// Bind fake selection container with current selection.\n\t\tthis.domConverter.bindFakeSelection( container, this.selection );\n\t}\n\n\t/**\n\t * Updates the DOM selection.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot A valid DOM root where the DOM selection should be rendered.\n\t */\n\t_updateDomSelection( domRoot ) {\n\t\tconst domSelection = domRoot.ownerDocument.defaultView.getSelection();\n\n\t\t// Let's check whether DOM selection needs updating at all.\n\t\tif ( !this._domSelectionNeedsUpdate( domSelection ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Multi-range selection is not available in most browsers, and, at least in Chrome, trying to\n\t\t// set such selection, that is not continuous, throws an error. Because of that, we will just use anchor\n\t\t// and focus of view selection.\n\t\t// Since we are not supporting multi-range selection, we also do not need to check if proper editable is\n\t\t// selected. If there is any editable selected, it is okay (editable is taken from selection anchor).\n\t\tconst anchor = this.domConverter.viewPositionToDom( this.selection.anchor );\n\t\tconst focus = this.domConverter.viewPositionToDom( this.selection.focus );\n\n\t\t// Focus the new editing host.\n\t\t// Otherwise, FF may throw an error (https://github.com/ckeditor/ckeditor5/issues/721).\n\t\tdomRoot.focus();\n\n\t\tdomSelection.collapse( anchor.parent, anchor.offset );\n\t\tdomSelection.extend( focus.parent, focus.offset );\n\n\t\t// Firefox–specific hack (https://github.com/ckeditor/ckeditor5-engine/issues/1439).\n\t\tif ( env.isGecko ) {\n\t\t\tfixGeckoSelectionAfterBr( focus, domSelection );\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether a given DOM selection needs to be updated.\n\t *\n\t * @private\n\t * @param {Selection} domSelection The DOM selection to check.\n\t * @returns {Boolean}\n\t */\n\t_domSelectionNeedsUpdate( domSelection ) {\n\t\tif ( !this.domConverter.isDomSelectionCorrect( domSelection ) ) {\n\t\t\t// Current DOM selection is in incorrect position. We need to update it.\n\t\t\treturn true;\n\t\t}\n\n\t\tconst oldViewSelection = domSelection && this.domConverter.domSelectionToView( domSelection );\n\n\t\tif ( oldViewSelection && this.selection.isEqual( oldViewSelection ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If selection is not collapsed, it does not need to be updated if it is similar.\n\t\tif ( !this.selection.isCollapsed && this.selection.isSimilar( oldViewSelection ) ) {\n\t\t\t// Selection did not changed and is correct, do not update.\n\t\t\treturn false;\n\t\t}\n\n\t\t// Selections are not similar.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Removes the DOM selection.\n\t *\n\t * @private\n\t */\n\t_removeDomSelection() {\n\t\tfor ( const doc of this.domDocuments ) {\n\t\t\tconst domSelection = doc.getSelection();\n\n\t\t\tif ( domSelection.rangeCount ) {\n\t\t\t\tconst activeDomElement = doc.activeElement;\n\t\t\t\tconst viewElement = this.domConverter.mapDomToView( activeDomElement );\n\n\t\t\t\tif ( activeDomElement && viewElement ) {\n\t\t\t\t\tdoc.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes the fake selection.\n\t *\n\t * @private\n\t */\n\t_removeFakeSelection() {\n\t\tconst container = this._fakeSelectionContainer;\n\n\t\tif ( container ) {\n\t\t\tcontainer.remove();\n\t\t}\n\t}\n\n\t/**\n\t * Checks if focus needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t */\n\t_updateFocus() {\n\t\tif ( this.isFocused ) {\n\t\t\tconst editable = this.selection.editableElement;\n\n\t\t\tif ( editable ) {\n\t\t\t\tthis.domConverter.focus( editable );\n\t\t\t}\n\t\t}\n\t}\n}\n\nmix( Renderer, ObservableMixin );\n\n// Checks if provided element is editable.\n//\n// @private\n// @param {module:engine/view/element~Element} element\n// @returns {Boolean}\nfunction isEditable( element ) {\n\tif ( element.getAttribute( 'contenteditable' ) == 'false' ) {\n\t\treturn false;\n\t}\n\n\tconst parent = element.findAncestor( element => element.hasAttribute( 'contenteditable' ) );\n\n\treturn !parent || parent.getAttribute( 'contenteditable' ) == 'true';\n}\n\n// Adds inline filler at a given position.\n//\n// The position can be given as an array of DOM nodes and an offset in that array,\n// or a DOM parent element and an offset in that element.\n//\n// @private\n// @param {Document} domDocument\n// @param {Element|Array.<Node>} domParentOrArray\n// @param {Number} offset\n// @returns {Text} The DOM text node that contains an inline filler.\nfunction addInlineFiller( domDocument, domParentOrArray, offset ) {\n\tconst childNodes = domParentOrArray instanceof Array ? domParentOrArray : domParentOrArray.childNodes;\n\tconst nodeAfterFiller = childNodes[ offset ];\n\n\tif ( isText( nodeAfterFiller ) ) {\n\t\tnodeAfterFiller.data = INLINE_FILLER + nodeAfterFiller.data;\n\n\t\treturn nodeAfterFiller;\n\t} else {\n\t\tconst fillerNode = domDocument.createTextNode( INLINE_FILLER );\n\n\t\tif ( Array.isArray( domParentOrArray ) ) {\n\t\t\tchildNodes.splice( offset, 0, fillerNode );\n\t\t} else {\n\t\t\tinsertAt( domParentOrArray, offset, fillerNode );\n\t\t}\n\n\t\treturn fillerNode;\n\t}\n}\n\n// Whether two DOM nodes should be considered as similar.\n// Nodes are considered similar if they have the same tag name.\n//\n// @private\n// @param {Node} node1\n// @param {Node} node2\n// @returns {Boolean}\nfunction areSimilar( node1, node2 ) {\n\treturn isNode( node1 ) && isNode( node2 ) &&\n\t\t!isText( node1 ) && !isText( node2 ) &&\n\t\tnode1.tagName.toLowerCase() === node2.tagName.toLowerCase();\n}\n\n// Whether two dom nodes should be considered as the same.\n// Two nodes which are considered the same are:\n//\n//\t\t* Text nodes with the same text.\n//\t\t* Element nodes represented by the same object.\n//\t\t* Two block filler elements.\n//\n// @private\n// @param {Function} blockFiller Block filler creator function, see {@link module:engine/view/domconverter~DomConverter#blockFiller}.\n// @param {Node} node1\n// @param {Node} node2\n// @returns {Boolean}\nfunction sameNodes( blockFiller, actualDomChild, expectedDomChild ) {\n\t// Elements.\n\tif ( actualDomChild === expectedDomChild ) {\n\t\treturn true;\n\t}\n\t// Texts.\n\telse if ( isText( actualDomChild ) && isText( expectedDomChild ) ) {\n\t\treturn actualDomChild.data === expectedDomChild.data;\n\t}\n\t// Block fillers.\n\telse if ( isBlockFiller( actualDomChild, blockFiller ) &&\n\t\tisBlockFiller( expectedDomChild, blockFiller ) ) {\n\t\treturn true;\n\t}\n\n\t// Not matching types.\n\treturn false;\n}\n\n// The following is a Firefox–specific hack (https://github.com/ckeditor/ckeditor5-engine/issues/1439).\n// When the native DOM selection is at the end of the block and preceded by <br /> e.g.\n//\n//\t\t<p>foo<br/>[]</p>\n//\n// which happens a lot when using the soft line break, the browser fails to (visually) move the\n// caret to the new line. A quick fix is as simple as force–refreshing the selection with the same range.\nfunction fixGeckoSelectionAfterBr( focus, domSelection ) {\n\tconst parent = focus.parent;\n\n\t// This fix works only when the focus point is at the very end of an element.\n\t// There is no point in running it in cases unrelated to the browser bug.\n\tif ( parent.nodeType != Node.ELEMENT_NODE || focus.offset != parent.childNodes.length - 1 ) {\n\t\treturn;\n\t}\n\n\tconst childAtOffset = parent.childNodes[ focus.offset ];\n\n\t// To stay on the safe side, the fix being as specific as possible, it targets only the\n\t// selection which is at the very end of the element and preceded by <br />.\n\tif ( childAtOffset && childAtOffset.tagName == 'BR' ) {\n\t\tdomSelection.addRange( domSelection.getRangeAt( 0 ) );\n\t}\n}\n\nfunction filterOutFakeSelectionContainer( domChildList, fakeSelectionContainer ) {\n\tconst childList = Array.from( domChildList );\n\n\tif ( childList.length == 0 || !fakeSelectionContainer ) {\n\t\treturn childList;\n\t}\n\n\tconst last = childList[ childList.length - 1 ];\n\n\tif ( last == fakeSelectionContainer ) {\n\t\tchildList.pop();\n\t}\n\n\treturn childList;\n}\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * This method is like `_.isEqual` except that it accepts `customizer` which\n * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n * are handled by the method instead. The `customizer` is invoked with up to\n * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, othValue) {\n *   if (isGreeting(objValue) && isGreeting(othValue)) {\n *     return true;\n *   }\n * }\n *\n * var array = ['hello', 'goodbye'];\n * var other = ['hi', 'goodbye'];\n *\n * _.isEqualWith(array, other, customizer);\n * // => true\n */\nfunction isEqualWith(value, other, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  var result = customizer ? customizer(value, other) : undefined;\n  return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n}\n\nexport default isEqualWith;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/mutationobserver\n */\n\n/* globals window */\n\nimport Observer from './observer';\nimport ViewSelection from '../selection';\nimport { startsWithFiller, getDataWithoutFiller } from '../filler';\nimport { isEqualWith } from 'lodash-es';\n\n/**\n * Mutation observer class observes changes in the DOM, fires {@link module:engine/view/document~Document#event:mutations} event, mark view\n * elements as changed and call {@link module:engine/view/renderer~Renderer#render}.\n * Because all mutated nodes are marked as \"to be rendered\" and the\n * {@link module:engine/view/renderer~Renderer#render} is called, all changes will be reverted, unless the mutation will be handled by the\n * {@link module:engine/view/document~Document#event:mutations} event listener. It means user will see only handled changes, and the editor\n * will block all changes which are not handled.\n *\n * Mutation Observer also take care of reducing number of mutations which are fired. It removes duplicates and\n * mutations on elements which do not have corresponding view elements. Also\n * {@link module:engine/view/observer/mutationobserver~MutatedText text mutation} is fired only if parent element do not change child list.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class MutationObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Native mutation observer config.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._config = {\n\t\t\tchildList: true,\n\t\t\tcharacterData: true,\n\t\t\tcharacterDataOldValue: true,\n\t\t\tsubtree: true\n\t\t};\n\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#domConverter}.\n\t\t *\n\t\t * @member {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = view.domConverter;\n\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#_renderer}.\n\t\t *\n\t\t * @member {module:engine/view/renderer~Renderer}\n\t\t */\n\t\tthis.renderer = view._renderer;\n\n\t\t/**\n\t\t * Observed DOM elements.\n\t\t *\n\t\t * @private\n\t\t * @member {Array.<HTMLElement>}\n\t\t */\n\t\tthis._domElements = [];\n\n\t\t/**\n\t\t * Native mutation observer.\n\t\t *\n\t\t * @private\n\t\t * @member {MutationObserver}\n\t\t */\n\t\tthis._mutationObserver = new window.MutationObserver( this._onMutations.bind( this ) );\n\t}\n\n\t/**\n\t * Synchronously fires {@link module:engine/view/document~Document#event:mutations} event with all mutations in record queue.\n\t * At the same time empties the queue so mutations will not be fired twice.\n\t */\n\tflush() {\n\t\tthis._onMutations( this._mutationObserver.takeRecords() );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tthis._domElements.push( domElement );\n\n\t\tif ( this.isEnabled ) {\n\t\t\tthis._mutationObserver.observe( domElement, this._config );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tenable() {\n\t\tsuper.enable();\n\n\t\tfor ( const domElement of this._domElements ) {\n\t\t\tthis._mutationObserver.observe( domElement, this._config );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdisable() {\n\t\tsuper.disable();\n\n\t\tthis._mutationObserver.disconnect();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tthis._mutationObserver.disconnect();\n\t}\n\n\t/**\n\t * Handles mutations. Deduplicates, mark view elements to sync, fire event and call render.\n\t *\n\t * @private\n\t * @param {Array.<Object>} domMutations Array of native mutations.\n\t */\n\t_onMutations( domMutations ) {\n\t\t// As a result of this.flush() we can have an empty collection.\n\t\tif ( domMutations.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domConverter = this.domConverter;\n\n\t\t// Use map and set for deduplication.\n\t\tconst mutatedTexts = new Map();\n\t\tconst mutatedElements = new Set();\n\n\t\t// Handle `childList` mutations first, so we will be able to check if the `characterData` mutation is in the\n\t\t// element with changed structure anyway.\n\t\tfor ( const mutation of domMutations ) {\n\t\t\tif ( mutation.type === 'childList' ) {\n\t\t\t\tconst element = domConverter.mapDomToView( mutation.target );\n\n\t\t\t\t// Do not collect mutations from UIElements.\n\t\t\t\tif ( element && element.is( 'uiElement' ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( element && !this._isBogusBrMutation( mutation ) ) {\n\t\t\t\t\tmutatedElements.add( element );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Handle `characterData` mutations later, when we have the full list of nodes which changed structure.\n\t\tfor ( const mutation of domMutations ) {\n\t\t\tconst element = domConverter.mapDomToView( mutation.target );\n\n\t\t\t// Do not collect mutations from UIElements.\n\t\t\tif ( element && element.is( 'uiElement' ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( mutation.type === 'characterData' ) {\n\t\t\t\tconst text = domConverter.findCorrespondingViewText( mutation.target );\n\n\t\t\t\tif ( text && !mutatedElements.has( text.parent ) ) {\n\t\t\t\t\t// Use text as a key, for deduplication. If there will be another mutation on the same text element\n\t\t\t\t\t// we will have only one in the map.\n\t\t\t\t\tmutatedTexts.set( text, {\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\toldText: text.data,\n\t\t\t\t\t\tnewText: getDataWithoutFiller( mutation.target ),\n\t\t\t\t\t\tnode: text\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\t// When we added first letter to the text node which had only inline filler, for the DOM it is mutation\n\t\t\t\t// on text, but for the view, where filler text node did not existed, new text node was created, so we\n\t\t\t\t// need to fire 'children' mutation instead of 'text'.\n\t\t\t\telse if ( !text && startsWithFiller( mutation.target ) ) {\n\t\t\t\t\tmutatedElements.add( domConverter.mapDomToView( mutation.target.parentNode ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Now we build the list of mutations to fire and mark elements. We did not do it earlier to avoid marking the\n\t\t// same node multiple times in case of duplication.\n\n\t\t// List of mutations we will fire.\n\t\tconst viewMutations = [];\n\n\t\tfor ( const mutatedText of mutatedTexts.values() ) {\n\t\t\tthis.renderer.markToSync( 'text', mutatedText.node );\n\t\t\tviewMutations.push( mutatedText );\n\t\t}\n\n\t\tfor ( const viewElement of mutatedElements ) {\n\t\t\tconst domElement = domConverter.mapViewToDom( viewElement );\n\t\t\tconst viewChildren = Array.from( viewElement.getChildren() );\n\t\t\tconst newViewChildren = Array.from( domConverter.domChildrenToView( domElement, { withChildren: false } ) );\n\n\t\t\t// It may happen that as a result of many changes (sth was inserted and then removed),\n\t\t\t// both elements haven't really changed. #1031\n\t\t\tif ( !isEqualWith( viewChildren, newViewChildren, sameNodes ) ) {\n\t\t\t\tthis.renderer.markToSync( 'children', viewElement );\n\n\t\t\t\tviewMutations.push( {\n\t\t\t\t\ttype: 'children',\n\t\t\t\t\toldChildren: viewChildren,\n\t\t\t\t\tnewChildren: newViewChildren,\n\t\t\t\t\tnode: viewElement\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\t// Retrieve `domSelection` using `ownerDocument` of one of mutated nodes.\n\t\t// There should not be simultaneous mutation in multiple documents, so it's fine.\n\t\tconst domSelection = domMutations[ 0 ].target.ownerDocument.getSelection();\n\n\t\tlet viewSelection = null;\n\n\t\tif ( domSelection && domSelection.anchorNode ) {\n\t\t\t// If `domSelection` is inside a dom node that is already bound to a view node from view tree, get\n\t\t\t// corresponding selection in the view and pass it together with `viewMutations`. The `viewSelection` may\n\t\t\t// be used by features handling mutations.\n\t\t\t// Only one range is supported.\n\n\t\t\tconst viewSelectionAnchor = domConverter.domPositionToView( domSelection.anchorNode, domSelection.anchorOffset );\n\t\t\tconst viewSelectionFocus = domConverter.domPositionToView( domSelection.focusNode, domSelection.focusOffset );\n\n\t\t\t// Anchor and focus has to be properly mapped to view.\n\t\t\tif ( viewSelectionAnchor && viewSelectionFocus ) {\n\t\t\t\tviewSelection = new ViewSelection( viewSelectionAnchor );\n\t\t\t\tviewSelection.setFocus( viewSelectionFocus );\n\t\t\t}\n\t\t}\n\n\t\tthis.document.fire( 'mutations', viewMutations, viewSelection );\n\n\t\t// If nothing changes on `mutations` event, at this point we have \"dirty DOM\" (changed) and de-synched\n\t\t// view (which has not been changed). In order to \"reset DOM\" we render the view again.\n\t\tthis.view.forceRender();\n\n\t\tfunction sameNodes( child1, child2 ) {\n\t\t\t// First level of comparison (array of children vs array of children) – use the Lodash's default behavior.\n\t\t\tif ( Array.isArray( child1 ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Elements.\n\t\t\tif ( child1 === child2 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// Texts.\n\t\t\telse if ( child1.is( 'text' ) && child2.is( 'text' ) ) {\n\t\t\t\treturn child1.data === child2.data;\n\t\t\t}\n\n\t\t\t// Not matching types.\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Checks if mutation was generated by the browser inserting bogus br on the end of the block element.\n\t * Such mutations are generated while pressing space or performing native spellchecker correction\n\t * on the end of the block element in Firefox browser.\n\t *\n\t * @private\n\t * @param {Object} mutation Native mutation object.\n\t * @returns {Boolean}\n\t */\n\t_isBogusBrMutation( mutation ) {\n\t\tlet addedNode = null;\n\n\t\t// Check if mutation added only one node on the end of its parent.\n\t\tif ( mutation.nextSibling === null && mutation.removedNodes.length === 0 && mutation.addedNodes.length == 1 ) {\n\t\t\taddedNode = this.domConverter.domToView( mutation.addedNodes[ 0 ], {\n\t\t\t\twithChildren: false\n\t\t\t} );\n\t\t}\n\n\t\treturn addedNode && addedNode.is( 'element', 'br' );\n\t}\n}\n\n/**\n * Fired when mutation occurred. If tree view is not changed on this event, DOM will be reverted to the state before\n * mutation, so all changes which should be applied, should be handled on this event.\n *\n * Introduced by {@link module:engine/view/observer/mutationobserver~MutationObserver}.\n *\n * Note that because {@link module:engine/view/observer/mutationobserver~MutationObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/mutationobserver~MutationObserver\n * @event module:engine/view/document~Document#event:mutations\n * @param {Array.<module:engine/view/observer/mutationobserver~MutatedText|module:engine/view/observer/mutationobserver~MutatedChildren>}\n * viewMutations Array of mutations.\n * For mutated texts it will be {@link module:engine/view/observer/mutationobserver~MutatedText} and for mutated elements it will be\n * {@link module:engine/view/observer/mutationobserver~MutatedChildren}. You can recognize the type based on the `type` property.\n * @param {module:engine/view/selection~Selection|null} viewSelection View selection that is a result of converting DOM selection to view.\n * Keep in\n * mind that the DOM selection is already \"updated\", meaning that it already acknowledges changes done in mutation.\n */\n\n/**\n * Mutation item for text.\n *\n * @see module:engine/view/document~Document#event:mutations\n * @see module:engine/view/observer/mutationobserver~MutatedChildren\n *\n * @typedef {Object} module:engine/view/observer/mutationobserver~MutatedText\n *\n * @property {String} type For text mutations it is always 'text'.\n * @property {module:engine/view/text~Text} node Mutated text node.\n * @property {String} oldText Old text.\n * @property {String} newText New text.\n */\n\n/**\n * Mutation item for child nodes.\n *\n * @see module:engine/view/document~Document#event:mutations\n * @see module:engine/view/observer/mutationobserver~MutatedText\n *\n * @typedef {Object} module:engine/view/observer/mutationobserver~MutatedChildren\n *\n * @property {String} type For child nodes mutations it is always 'children'.\n * @property {module:engine/view/element~Element} node Parent of the mutated children.\n * @property {Array.<module:engine/view/node~Node>} oldChildren Old child nodes.\n * @property {Array.<module:engine/view/node~Node>} newChildren New child nodes.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/keyobserver\n */\n\nimport DomEventObserver from './domeventobserver';\nimport { getCode } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\n/**\n * Observer for events connected with pressing keyboard keys.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class KeyObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'keydown', 'keyup' ];\n\t}\n\n\tonDomEvent( domEvt ) {\n\t\tthis.fire( domEvt.type, domEvt, {\n\t\t\tkeyCode: domEvt.keyCode,\n\n\t\t\taltKey: domEvt.altKey,\n\t\t\tctrlKey: domEvt.ctrlKey || domEvt.metaKey,\n\t\t\tshiftKey: domEvt.shiftKey,\n\n\t\t\tget keystroke() {\n\t\t\t\treturn getCode( this );\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * Fired when a key has been pressed.\n *\n * Introduced by {@link module:engine/view/observer/keyobserver~KeyObserver}.\n *\n * Note that because {@link module:engine/view/observer/keyobserver~KeyObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/keyobserver~KeyObserver\n * @event module:engine/view/document~Document#event:keydown\n * @param {module:engine/view/observer/keyobserver~KeyEventData} keyEventData\n */\n\n/**\n * Fired when a key has been released.\n *\n * Introduced by {@link module:engine/view/observer/keyobserver~KeyObserver}.\n *\n * Note that because {@link module:engine/view/observer/keyobserver~KeyObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/keyobserver~KeyObserver\n * @event module:engine/view/document~Document#event:keyup\n * @param {module:engine/view/observer/keyobserver~KeyEventData} keyEventData\n */\n\n/**\n * The value of both events - {@link module:engine/view/document~Document#event:keydown} and\n * {@link module:engine/view/document~Document#event:keyup}.\n *\n * @class module:engine/view/observer/keyobserver~KeyEventData\n * @extends module:engine/view/observer/domeventdata~DomEventData\n * @implements module:utils/keyboard~KeystrokeInfo\n */\n\n/**\n * Code of the whole keystroke. See {@link module:utils/keyboard~getCode}.\n *\n * @readonly\n * @member {Number} module:engine/view/observer/keyobserver~KeyEventData#keystroke\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/fakeselectionobserver\n */\n\nimport Observer from './observer';\nimport ViewSelection from '../selection';\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport { debounce } from 'lodash-es';\n\n/**\n * Fake selection observer class. If view selection is fake it is placed in dummy DOM container. This observer listens\n * on {@link module:engine/view/document~Document#event:keydown keydown} events and handles moving fake view selection to the correct place\n * if arrow keys are pressed.\n * Fires {@link module:engine/view/document~Document#event:selectionChange selectionChange event} simulating natural behaviour of\n * {@link module:engine/view/observer/selectionobserver~SelectionObserver SelectionObserver}.\n *\n * @extends module:engine/view/observer/observer~Observer.Observer\n */\nexport default class FakeSelectionObserver extends Observer {\n\t/**\n\t * Creates new FakeSelectionObserver instance.\n\t *\n\t * @param {module:engine/view/view~View} view\n\t */\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Fires debounced event `selectionChangeDone`. It uses `lodash#debounce` method to delay function call.\n\t\t *\n\t\t * @private\n\t\t * @param {Object} data Selection change data.\n\t\t * @method #_fireSelectionChangeDoneDebounced\n\t\t */\n\t\tthis._fireSelectionChangeDoneDebounced = debounce( data => this.document.fire( 'selectionChangeDone', data ), 200 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve() {\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'keydown', ( eventInfo, data ) => {\n\t\t\tconst selection = document.selection;\n\n\t\t\tif ( selection.isFake && _isArrowKeyCode( data.keyCode ) && this.isEnabled ) {\n\t\t\t\t// Prevents default key down handling - no selection change will occur.\n\t\t\t\tdata.preventDefault();\n\n\t\t\t\tthis._handleSelectionMove( data.keyCode );\n\t\t\t}\n\t\t}, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tthis._fireSelectionChangeDoneDebounced.cancel();\n\t}\n\n\t/**\n\t * Handles collapsing view selection according to given key code. If left or up key is provided - new selection will be\n\t * collapsed to left. If right or down key is pressed - new selection will be collapsed to right.\n\t *\n\t * This method fires {@link module:engine/view/document~Document#event:selectionChange} and\n\t * {@link module:engine/view/document~Document#event:selectionChangeDone} events imitating behaviour of\n\t * {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n\t *\n\t * @private\n\t * @param {Number} keyCode\n\t * @fires module:engine/view/document~Document#event:selectionChange\n\t * @fires module:engine/view/document~Document#event:selectionChangeDone\n\t */\n\t_handleSelectionMove( keyCode ) {\n\t\tconst selection = this.document.selection;\n\t\tconst newSelection = new ViewSelection( selection.getRanges(), { backward: selection.isBackward, fake: false } );\n\n\t\t// Left or up arrow pressed - move selection to start.\n\t\tif ( keyCode == keyCodes.arrowleft || keyCode == keyCodes.arrowup ) {\n\t\t\tnewSelection.setTo( newSelection.getFirstPosition() );\n\t\t}\n\n\t\t// Right or down arrow pressed - move selection to end.\n\t\tif ( keyCode == keyCodes.arrowright || keyCode == keyCodes.arrowdown ) {\n\t\t\tnewSelection.setTo( newSelection.getLastPosition() );\n\t\t}\n\n\t\tconst data = {\n\t\t\toldSelection: selection,\n\t\t\tnewSelection,\n\t\t\tdomSelection: null\n\t\t};\n\n\t\t// Fire dummy selection change event.\n\t\tthis.document.fire( 'selectionChange', data );\n\n\t\t// Call` #_fireSelectionChangeDoneDebounced` every time when `selectionChange` event is fired.\n\t\t// This function is debounced what means that `selectionChangeDone` event will be fired only when\n\t\t// defined int the function time will elapse since the last time the function was called.\n\t\t// So `selectionChangeDone` will be fired when selection will stop changing.\n\t\tthis._fireSelectionChangeDoneDebounced( data );\n\t}\n}\n\n// Checks if one of the arrow keys is pressed.\n//\n// @private\n// @param {Number} keyCode\n// @returns {Boolean}\nfunction _isArrowKeyCode( keyCode ) {\n\treturn keyCode == keyCodes.arrowright ||\n\t\tkeyCode == keyCodes.arrowleft ||\n\t\tkeyCode == keyCodes.arrowup ||\n\t\tkeyCode == keyCodes.arrowdown;\n}\n\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/selectionobserver\n */\n\n/* global setInterval, clearInterval */\n\nimport Observer from './observer';\nimport MutationObserver from './mutationobserver';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\nimport { debounce } from 'lodash-es';\n\n/**\n * Selection observer class observes selection changes in the document. If selection changes on the document this\n * observer checks if there are any mutations and if DOM selection is different than the\n * {@link module:engine/view/document~Document#selection view selection}. Selection observer fires\n * {@link module:engine/view/document~Document#event:selectionChange} event only if selection change was the only change in the document\n * and DOM selection is different then the view selection.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @see module:engine/view/observer/mutationobserver~MutationObserver\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class SelectionObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Instance of the mutation observer. Selection observer calls\n\t\t * {@link module:engine/view/observer/mutationobserver~MutationObserver#flush} to ensure that the mutations will be handled\n\t\t * before the {@link module:engine/view/document~Document#event:selectionChange} event is fired.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/observer/mutationobserver~MutationObserver}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#mutationObserver\n\t\t */\n\t\tthis.mutationObserver = view.getObserver( MutationObserver );\n\n\t\t/**\n\t\t * Reference to the view {@link module:engine/view/documentselection~DocumentSelection} object used to compare\n\t\t * new selection with it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#selection\n\t\t */\n\t\tthis.selection = this.document.selection;\n\n\t\t/* eslint-disable max-len */\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#domConverter}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/domconverter~DomConverter} module:engine/view/observer/selectionobserver~SelectionObserver#domConverter\n\t\t */\n\t\t/* eslint-enable max-len */\n\t\tthis.domConverter = view.domConverter;\n\n\t\t/**\n\t\t * Set of documents which have added \"selectionchange\" listener to avoid adding listener twice to the same\n\t\t * document.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakSet.<Document>} module:engine/view/observer/selectionobserver~SelectionObserver#_documents\n\t\t */\n\t\tthis._documents = new WeakSet();\n\n\t\t/**\n\t\t * Fires debounced event `selectionChangeDone`. It uses `lodash#debounce` method to delay function call.\n\t\t *\n\t\t * @private\n\t\t * @param {Object} data Selection change data.\n\t\t * @method #_fireSelectionChangeDoneDebounced\n\t\t */\n\t\tthis._fireSelectionChangeDoneDebounced = debounce( data => this.document.fire( 'selectionChangeDone', data ), 200 );\n\n\t\tthis._clearInfiniteLoopInterval = setInterval( () => this._clearInfiniteLoop(), 1000 );\n\n\t\t/**\n\t\t * Private property to check if the code does not enter infinite loop.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} module:engine/view/observer/selectionobserver~SelectionObserver#_loopbackCounter\n\t\t */\n\t\tthis._loopbackCounter = 0;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tconst domDocument = domElement.ownerDocument;\n\n\t\t// Add listener once per each document.\n\t\tif ( this._documents.has( domDocument ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.listenTo( domDocument, 'selectionchange', () => {\n\t\t\tthis._handleSelectionChange( domDocument );\n\t\t} );\n\n\t\tthis._documents.add( domDocument );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tclearInterval( this._clearInfiniteLoopInterval );\n\t\tthis._fireSelectionChangeDoneDebounced.cancel();\n\t}\n\n\t/**\n\t * Selection change listener. {@link module:engine/view/observer/mutationobserver~MutationObserver#flush Flush} mutations, check if\n\t * selection changes and fires {@link module:engine/view/document~Document#event:selectionChange} event on every change\n\t * and {@link module:engine/view/document~Document#event:selectionChangeDone} when selection stop changing.\n\t *\n\t * @private\n\t * @param {Document} domDocument DOM document.\n\t */\n\t_handleSelectionChange( domDocument ) {\n\t\t// Selection is handled when document is not focused but is read-only. This is because in read-only\n\t\t// mode contenteditable is set as false and editor won't receive focus but we still need to know\n\t\t// selection position.\n\t\tif ( !this.isEnabled || ( !this.document.isFocused && !this.document.isReadOnly ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure the mutation event will be before selection event on all browsers.\n\t\tthis.mutationObserver.flush();\n\n\t\t// If there were mutations then the view will be re-rendered by the mutation observer and selection\n\t\t// will be updated, so selections will equal and event will not be fired, as expected.\n\t\tconst domSelection = domDocument.defaultView.getSelection();\n\t\tconst newViewSelection = this.domConverter.domSelectionToView( domSelection );\n\n\t\tif ( this.selection.isEqual( newViewSelection ) && this.domConverter.isDomSelectionCorrect( domSelection ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure we are not in the infinite loop (#400).\n\t\t// This counter is reset each second. 60 selection changes in 1 second is enough high number\n\t\t// to be very difficult (impossible) to achieve using just keyboard keys (during normal editor use).\n\t\tif ( ++this._loopbackCounter > 60 ) {\n\t\t\t/**\n\t\t\t * Selection change observer detected an infinite rendering loop.\n\t\t\t * Most probably you try to put the selection in the position which is not allowed\n\t\t\t * by the browser and browser fixes it automatically what causes `selectionchange` event on\n\t\t\t * which a loopback through a model tries to re-render the wrong selection and again.\n\t\t\t *\n\t\t\t * @error selectionchange-infinite-loop\n\t\t\t */\n\t\t\tlog.warn( 'selectionchange-infinite-loop: Selection change observer detected an infinite rendering loop.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.selection.isSimilar( newViewSelection ) ) {\n\t\t\t// If selection was equal and we are at this point of algorithm, it means that it was incorrect.\n\t\t\t// Just re-render it, no need to fire any events, etc.\n\t\t\tthis.view.forceRender();\n\t\t} else {\n\t\t\tconst data = {\n\t\t\t\toldSelection: this.selection,\n\t\t\t\tnewSelection: newViewSelection,\n\t\t\t\tdomSelection\n\t\t\t};\n\n\t\t\t// Prepare data for new selection and fire appropriate events.\n\t\t\tthis.document.fire( 'selectionChange', data );\n\n\t\t\t// Call` #_fireSelectionChangeDoneDebounced` every time when `selectionChange` event is fired.\n\t\t\t// This function is debounced what means that `selectionChangeDone` event will be fired only when\n\t\t\t// defined int the function time will elapse since the last time the function was called.\n\t\t\t// So `selectionChangeDone` will be fired when selection will stop changing.\n\t\t\tthis._fireSelectionChangeDoneDebounced( data );\n\t\t}\n\t}\n\n\t/**\n\t * Clears `SelectionObserver` internal properties connected with preventing infinite loop.\n\t *\n\t * @protected\n\t */\n\t_clearInfiniteLoop() {\n\t\tthis._loopbackCounter = 0;\n\t}\n}\n\n/**\n * Fired when selection has changed. This event is fired only when the selection change was the only change that happened\n * in the document, and old selection is different then the new selection.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChange\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n\n/**\n * Fired when selection stops changing.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChangeDone\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/focusobserver\n */\n\n/* globals setTimeout, clearTimeout */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * {@link module:engine/view/document~Document#event:focus Focus}\n * and {@link module:engine/view/document~Document#event:blur blur} events observer.\n * Focus observer handle also {@link module:engine/view/rooteditableelement~RootEditableElement#isFocused isFocused} property of the\n * {@link module:engine/view/rooteditableelement~RootEditableElement root elements}.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class FocusObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'focus', 'blur' ];\n\t\tthis.useCapture = true;\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'focus', () => {\n\t\t\tdocument.isFocused = true;\n\n\t\t\t// Unfortunately native `selectionchange` event is fired asynchronously.\n\t\t\t// We need to wait until `SelectionObserver` handle the event and then render. Otherwise rendering will\n\t\t\t// overwrite new DOM selection with selection from the view.\n\t\t\t// See https://github.com/ckeditor/ckeditor5-engine/issues/795 for more details.\n\t\t\t// Long timeout is needed to solve #676 and https://github.com/ckeditor/ckeditor5-engine/issues/1157 issues.\n\t\t\tthis._renderTimeoutId = setTimeout( () => view.forceRender(), 50 );\n\t\t} );\n\n\t\tdocument.on( 'blur', ( evt, data ) => {\n\t\t\tconst selectedEditable = document.selection.editableElement;\n\n\t\t\tif ( selectedEditable === null || selectedEditable === data.target ) {\n\t\t\t\tdocument.isFocused = false;\n\n\t\t\t\t// Re-render the document to update view elements.\n\t\t\t\tview.forceRender();\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * Identifier of the timeout currently used by focus listener to delay rendering execution.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} #_renderTimeoutId\n\t\t */\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tif ( this._renderTimeoutId ) {\n\t\t\tclearTimeout( this._renderTimeoutId );\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n}\n\n/**\n * Fired when one of the editables gets focus.\n *\n * Introduced by {@link module:engine/view/observer/focusobserver~FocusObserver}.\n *\n * Note that because {@link module:engine/view/observer/focusobserver~FocusObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/focusobserver~FocusObserver\n * @event module:engine/view/document~Document#event:focus\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when one of the editables loses focus.\n *\n * Introduced by {@link module:engine/view/observer/focusobserver~FocusObserver}.\n *\n * Note that because {@link module:engine/view/observer/focusobserver~FocusObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/focusobserver~FocusObserver\n * @event module:engine/view/document~Document#event:blur\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/compositionobserver\n */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * {@link module:engine/view/document~Document#event:compositionstart Compositionstart},\n * {@link module:engine/view/document~Document#event:compositionupdate compositionupdate} and\n * {@link module:engine/view/document~Document#event:compositionend compositionend} events observer.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class CompositionObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'compositionstart', 'compositionupdate', 'compositionend' ];\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'compositionstart', () => {\n\t\t\tdocument.isComposing = true;\n\t\t} );\n\n\t\tdocument.on( 'compositionend', () => {\n\t\t\tdocument.isComposing = false;\n\t\t} );\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n}\n\n/**\n * Fired when composition starts inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionstart\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when composition is updated inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionupdate\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when composition ends inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionend\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module engine/view/observer/inputobserver\n */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * Observer for events connected with data input.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class InputObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'beforeinput' ];\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n}\n\n/**\n * Fired before browser inputs (or deletes) some data.\n *\n * This event is available only on browsers which support DOM `beforeinput` event.\n *\n * Introduced by {@link module:engine/view/observer/inputobserver~InputObserver}.\n *\n * Note that because {@link module:engine/view/observer/inputobserver~InputObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/inputobserver~InputObserver\n * @event module:engine/view/document~Document#event:beforeinput\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/scroll\n */\n\nimport isRange from './isrange';\nimport Rect from './rect';\nimport isText from './istext';\n\nconst utils = {};\n\n/**\n * Makes any page `HTMLElement` or `Range` (`target`) visible inside the browser viewport.\n * This helper will scroll all `target` ancestors and the web browser viewport to reveal the target to\n * the user. If the `target` is already visible, nothing will happen.\n *\n * @param {HTMLElement|Range} options.target A target, which supposed to become visible to the user.\n * @param {Number} [options.viewportOffset] An offset from the edge of the viewport (in pixels)\n * the `target` will be moved by when the viewport is scrolled. It enhances the user experience\n * by keeping the `target` some distance from the edge of the viewport and thus making it easier to\n * read or edit by the user.\n */\nexport function scrollViewportToShowTarget( { target, viewportOffset = 0 } ) {\n\tconst targetWindow = getWindow( target );\n\tlet currentWindow = targetWindow;\n\tlet currentFrame = null;\n\n\t// Iterate over all windows, starting from target's parent window up to window#top.\n\twhile ( currentWindow ) {\n\t\tlet firstAncestorToScroll;\n\n\t\t// Let's scroll target's ancestors first to reveal it. Then, once the ancestor scrolls\n\t\t// settled down, the algorithm can eventually scroll the viewport of the current window.\n\t\t//\n\t\t// Note: If the current window is target's **original** window (e.g. the first one),\n\t\t// start scrolling the closest parent of the target. If not, scroll the closest parent\n\t\t// of an iframe that resides in the current window.\n\t\tif ( currentWindow == targetWindow ) {\n\t\t\tfirstAncestorToScroll = getParentElement( target );\n\t\t} else {\n\t\t\tfirstAncestorToScroll = getParentElement( currentFrame );\n\t\t}\n\n\t\t// Scroll the target's ancestors first. Once done, scrolling the viewport is easy.\n\t\tscrollAncestorsToShowRect( firstAncestorToScroll, () => {\n\t\t\t// Note: If the target does not belong to the current window **directly**,\n\t\t\t// i.e. it resides in an iframe belonging to the window, obtain the target's rect\n\t\t\t// in the coordinates of the current window. By default, a Rect returns geometry\n\t\t\t// relative to the current window's viewport. To make it work in a parent window,\n\t\t\t// it must be shifted.\n\t\t\treturn getRectRelativeToWindow( target, currentWindow );\n\t\t} );\n\n\t\t// Obtain the rect of the target after it has been scrolled within its ancestors.\n\t\t// It's time to scroll the viewport.\n\t\tconst targetRect = getRectRelativeToWindow( target, currentWindow );\n\n\t\tscrollWindowToShowRect( currentWindow, targetRect, viewportOffset );\n\n\t\tif ( currentWindow.parent != currentWindow ) {\n\t\t\t// Keep the reference to the <iframe> element the \"previous current window\" was\n\t\t\t// rendered within. It will be useful to re–calculate the rect of the target\n\t\t\t// in the parent window's relative geometry. The target's rect must be shifted\n\t\t\t// by it's iframe's position.\n\t\t\tcurrentFrame = currentWindow.frameElement;\n\t\t\tcurrentWindow = currentWindow.parent;\n\n\t\t\t// If the current window has some parent but frameElement is inaccessible, then they have\n\t\t\t// different domains/ports and, due to security reasons, accessing and scrolling\n\t\t\t// the parent window won't be possible.\n\t\t\t// See https://github.com/ckeditor/ckeditor5/issues/930.\n\t\t\tif ( !currentFrame ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentWindow = null;\n\t\t}\n\t}\n}\n\n/**\n * Makes any page `HTMLElement` or `Range` (target) visible within its scrollable ancestors,\n * e.g. if they have `overflow: scroll` CSS style.\n *\n * @param {HTMLElement|Range} target A target, which supposed to become visible to the user.\n */\nexport function scrollAncestorsToShowTarget( target ) {\n\tconst targetParent = getParentElement( target );\n\n\tscrollAncestorsToShowRect( targetParent, () => {\n\t\treturn new Rect( target );\n\t} );\n}\n\n// TODO: Using a property value shorthand in the top of the file\n// causes JSDoc to throw errors. See https://github.com/cksource/docs-builder/issues/75.\nObject.assign( utils, {\n\tscrollViewportToShowTarget,\n\tscrollAncestorsToShowTarget\n} );\n\n// Makes a given rect visible within its parent window.\n//\n// Note: Avoid the situation where the caret is still in the viewport, but totally\n// at the edge of it. In such situation, if it moved beyond the viewport in the next\n// action e.g. after paste, the scrolling would move it to the viewportOffset level\n// and it all would look like the caret visually moved up/down:\n//\n// 1.\n//\t\t| foo[]\n//\t\t|                                    <--- N px of space below the caret\n//\t\t+---------------------------------...\n//\n// 2. *paste*\n// 3.\n//\t\t|\n//\t\t|\n//\t\t+-foo-----------------------------...\n//\t\t  bar[]                              <--- caret below viewport, scrolling...\n//\n// 4. *scrolling*\n// 5.\n//\t\t|\n//\t\t| foo\n//\t\t| bar[]                              <--- caret precisely at the edge\n//\t\t+---------------------------------...\n//\n// To prevent this, this method checks the rects moved by the viewportOffset to cover\n// the upper/lower edge of the viewport. It makes sure if the action repeats, there's\n// no twitching – it's a purely visual improvement:\n//\n// 5. (after fix)\n//\t\t|\n//\t\t| foo\n//\t\t| bar[]\n//\t\t|                                    <--- N px of space below the caret\n//\t\t+---------------------------------...\n//\n// @private\n// @param {Window} window A window which is scrolled to reveal the rect.\n// @param {module:utils/dom/rect~Rect} rect A rect which is to be revealed.\n// @param {Number} viewportOffset See scrollViewportToShowTarget.\nfunction scrollWindowToShowRect( window, rect, viewportOffset ) {\n\tconst targetShiftedDownRect = rect.clone().moveBy( 0, viewportOffset );\n\tconst targetShiftedUpRect = rect.clone().moveBy( 0, -viewportOffset );\n\tconst viewportRect = new Rect( window ).excludeScrollbarsAndBorders();\n\n\tconst rects = [ targetShiftedUpRect, targetShiftedDownRect ];\n\n\tif ( !rects.every( rect => viewportRect.contains( rect ) ) ) {\n\t\tlet { scrollX, scrollY } = window;\n\n\t\tif ( isAbove( targetShiftedUpRect, viewportRect ) ) {\n\t\t\tscrollY -= viewportRect.top - rect.top + viewportOffset;\n\t\t} else if ( isBelow( targetShiftedDownRect, viewportRect ) ) {\n\t\t\tscrollY += rect.bottom - viewportRect.bottom + viewportOffset;\n\t\t}\n\n\t\t// TODO: Web browsers scroll natively to place the target in the middle\n\t\t// of the viewport. It's not a very popular case, though.\n\t\tif ( isLeftOf( rect, viewportRect ) ) {\n\t\t\tscrollX -= viewportRect.left - rect.left + viewportOffset;\n\t\t} else if ( isRightOf( rect, viewportRect ) ) {\n\t\t\tscrollX += rect.right - viewportRect.right + viewportOffset;\n\t\t}\n\n\t\twindow.scrollTo( scrollX, scrollY );\n\t}\n}\n\n// Recursively scrolls element ancestors to visually reveal a rect.\n//\n// @private\n// @param {HTMLElement} A parent The first ancestors to start scrolling.\n// @param {Function} getRect A function which returns the Rect, which is to be revealed.\nfunction scrollAncestorsToShowRect( parent, getRect ) {\n\tconst parentWindow = getWindow( parent );\n\tlet parentRect, targetRect;\n\n\twhile ( parent != parentWindow.document.body ) {\n\t\ttargetRect = getRect();\n\t\tparentRect = new Rect( parent ).excludeScrollbarsAndBorders();\n\n\t\tif ( !parentRect.contains( targetRect ) ) {\n\t\t\tif ( isAbove( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollTop -= parentRect.top - targetRect.top;\n\t\t\t} else if ( isBelow( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollTop += targetRect.bottom - parentRect.bottom;\n\t\t\t}\n\n\t\t\tif ( isLeftOf( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollLeft -= parentRect.left - targetRect.left;\n\t\t\t} else if ( isRightOf( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollLeft += targetRect.right - parentRect.right;\n\t\t\t}\n\t\t}\n\n\t\tparent = parent.parentNode;\n\t}\n}\n\n// Determines if a given `Rect` extends beyond the bottom edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isBelow( firstRect, secondRect ) {\n\treturn firstRect.bottom > secondRect.bottom;\n}\n\n// Determines if a given `Rect` extends beyond the top edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isAbove( firstRect, secondRect ) {\n\treturn firstRect.top < secondRect.top;\n}\n\n// Determines if a given `Rect` extends beyond the left edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isLeftOf( firstRect, secondRect ) {\n\treturn firstRect.left < secondRect.left;\n}\n\n// Determines if a given `Rect` extends beyond the right edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isRightOf( firstRect, secondRect ) {\n\treturn firstRect.right > secondRect.right;\n}\n\n// Returns the closest window of an element or range.\n//\n// @private\n// @param {HTMLElement|Range} firstRect\n// @returns {Window}\nfunction getWindow( elementOrRange ) {\n\tif ( isRange( elementOrRange ) ) {\n\t\treturn elementOrRange.startContainer.ownerDocument.defaultView;\n\t} else {\n\t\treturn elementOrRange.ownerDocument.defaultView;\n\t}\n}\n\n// Returns the closest parent of an element or DOM range.\n//\n// @private\n// @param {HTMLElement|Range} firstRect\n// @returns {HTMLelement}\nfunction getParentElement( elementOrRange ) {\n\tif ( isRange( elementOrRange ) ) {\n\t\tlet parent = elementOrRange.commonAncestorContainer;\n\n\t\t// If a Range is attached to the Text, use the closest element ancestor.\n\t\tif ( isText( parent ) ) {\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn parent;\n\t} else {\n\t\treturn elementOrRange.parentNode;\n\t}\n}\n\n// Returns the rect of an element or range residing in an iframe.\n// The result rect is relative to the geometry of the passed window instance.\n//\n// @private\n// @param {HTMLElement|Range} target Element or range which rect should be returned.\n// @param {Window} relativeWindow A window the rect should be relative to.\n// @returns {module:utils/dom/rect~Rect}\nfunction getRectRelativeToWindow( target, relativeWindow ) {\n\tconst targetWindow = getWindow( target );\n\tconst rect = new Rect( target );\n\n\tif ( targetWindow === relativeWindow ) {\n\t\treturn rect;\n\t} else {\n\t\tlet currentWindow = targetWindow;\n\n\t\twhile ( currentWindow != relativeWindow ) {\n\t\t\tconst frame = currentWindow.frameElement;\n\t\t\tconst frameRect = new Rect( frame ).excludeScrollbarsAndBorders();\n\n\t\t\trect.moveBy( frameRect.left, frameRect.top );\n\n\t\t\tcurrentWindow = currentWindow.parent;\n\t\t}\n\t}\n\n\treturn rect;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/view\n */\n\nimport Document from './document';\nimport DowncastWriter from './downcastwriter';\nimport Renderer from './renderer';\nimport DomConverter from './domconverter';\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\n\nimport MutationObserver from './observer/mutationobserver';\nimport KeyObserver from './observer/keyobserver';\nimport FakeSelectionObserver from './observer/fakeselectionobserver';\nimport SelectionObserver from './observer/selectionobserver';\nimport FocusObserver from './observer/focusobserver';\nimport CompositionObserver from './observer/compositionobserver';\nimport InputObserver from './observer/inputobserver';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { scrollViewportToShowTarget } from '@ckeditor/ckeditor5-utils/src/dom/scroll';\nimport { injectUiElementHandling } from './uielement';\nimport { injectQuirksHandling } from './filler';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Editor's view controller class. Its main responsibility is DOM - View management for editing purposes, to provide\n * abstraction over the DOM structure and events and hide all browsers quirks.\n *\n * View controller renders view document to DOM whenever view structure changes. To determine when view can be rendered,\n * all changes need to be done using the {@link module:engine/view/view~View#change} method, using\n * {@link module:engine/view/downcastwriter~DowncastWriter}:\n *\n *\t\tview.change( writer => {\n *\t\t\twriter.insert( position, writer.createText( 'foo' ) );\n *\t\t} );\n *\n * View controller also register {@link module:engine/view/observer/observer~Observer observers} which observes changes\n * on DOM and fire events on the {@link module:engine/view/document~Document Document}.\n * Note that the following observers are added by the class constructor and are always available:\n *\n * * {@link module:engine/view/observer/mutationobserver~MutationObserver},\n * * {@link module:engine/view/observer/selectionobserver~SelectionObserver},\n * * {@link module:engine/view/observer/focusobserver~FocusObserver},\n * * {@link module:engine/view/observer/keyobserver~KeyObserver},\n * * {@link module:engine/view/observer/fakeselectionobserver~FakeSelectionObserver}.\n * * {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * This class also {@link module:engine/view/view~View#attachDomRoot binds the DOM and the view elements}.\n *\n * If you do not need full a DOM - view management, and only want to transform a tree of view elements to a tree of DOM\n * elements you do not need this controller. You can use the {@link module:engine/view/domconverter~DomConverter DomConverter} instead.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class View {\n\tconstructor() {\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/document~Document} associated with this view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = new Document();\n\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/domconverter~DomConverter domConverter} used by\n\t\t * {@link module:engine/view/view~View#_renderer renderer}\n\t\t * and {@link module:engine/view/observer/observer~Observer observers}.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = new DomConverter();\n\n\t\t/**\n\t\t * Roots of the DOM tree. Map on the `HTMLElement`s with roots names as keys.\n\t\t *\n\t\t * @readonly\n\t\t * @type {Map.<String, HTMLElement>}\n\t\t */\n\t\tthis.domRoots = new Map();\n\n\t\t/**\n\t\t * Used to prevent calling {@link #forceRender} and {@link #change} during rendering view to the DOM.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isRenderingInProgress\n\t\t */\n\t\tthis.set( 'isRenderingInProgress', false );\n\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/renderer~Renderer renderer}.\n\t\t *\n\t\t * @protected\n\t\t * @type {module:engine/view/renderer~Renderer}\n\t\t */\n\t\tthis._renderer = new Renderer( this.domConverter, this.document.selection );\n\t\tthis._renderer.bind( 'isFocused' ).to( this.document );\n\n\t\t/**\n\t\t * A DOM root attributes cache. It saves the initial values of DOM root attributes before the DOM element\n\t\t * is {@link module:engine/view/view~View#attachDomRoot attached} to the view so later on, when\n\t\t * the view is destroyed ({@link module:engine/view/view~View#detachDomRoot}), they can be easily restored.\n\t\t * This way, the DOM element can go back to the (clean) state as if the editing view never used it.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap.<HTMLElement,Object>}\n\t\t */\n\t\tthis._initialDomRootAttributes = new WeakMap();\n\n\t\t/**\n\t\t * Map of registered {@link module:engine/view/observer/observer~Observer observers}.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<Function, module:engine/view/observer/observer~Observer>}\n\t\t */\n\t\tthis._observers = new Map();\n\n\t\t/**\n\t\t * Is set to `true` when {@link #change view changes} are currently in progress.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._ongoingChange = false;\n\n\t\t/**\n\t\t * Used to prevent calling {@link #forceRender} and {@link #change} during rendering view to the DOM.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._postFixersInProgress = false;\n\n\t\t/**\n\t\t * Internal flag to temporary disable rendering. See the usage in the {@link #_disableRendering}.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._renderingDisabled = false;\n\n\t\t/**\n\t\t * Internal flag that disables rendering when there are no changes since the last rendering.\n\t\t * It stores information about changed selection and changed elements from attached document roots.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._hasChangedSinceTheLastRendering = false;\n\n\t\t/**\n\t\t * DowncastWriter instance used in {@link #change change method} callbacks.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/view/downcastwriter~DowncastWriter}\n\t\t */\n\t\tthis._writer = new DowncastWriter( this.document );\n\n\t\t// Add default observers.\n\t\tthis.addObserver( MutationObserver );\n\t\tthis.addObserver( SelectionObserver );\n\t\tthis.addObserver( FocusObserver );\n\t\tthis.addObserver( KeyObserver );\n\t\tthis.addObserver( FakeSelectionObserver );\n\t\tthis.addObserver( CompositionObserver );\n\n\t\tif ( env.isAndroid ) {\n\t\t\tthis.addObserver( InputObserver );\n\t\t}\n\n\t\t// Inject quirks handlers.\n\t\tinjectQuirksHandling( this );\n\t\tinjectUiElementHandling( this );\n\n\t\t// Use 'normal' priority so that rendering is performed as first when using that priority.\n\t\tthis.on( 'render', () => {\n\t\t\tthis._render();\n\n\t\t\t// Informs that layout has changed after render.\n\t\t\tthis.document.fire( 'layoutChanged' );\n\n\t\t\t// Reset the `_hasChangedSinceTheLastRendering` flag after rendering.\n\t\t\tthis._hasChangedSinceTheLastRendering = false;\n\t\t} );\n\n\t\t// Listen to the document selection changes directly.\n\t\tthis.listenTo( this.document.selection, 'change', () => {\n\t\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\t} );\n\t}\n\n\t/**\n\t * Attaches a DOM root element to the view element and enable all observers on that element.\n\t * Also {@link module:engine/view/renderer~Renderer#markToSync mark element} to be synchronized\n\t * with the view what means that all child nodes will be removed and replaced with content of the view root.\n\t *\n\t * This method also will change view element name as the same as tag name of given dom root.\n\t * Name is always transformed to lower case.\n\t *\n\t * **Note:** Use {@link #detachDomRoot `detachDomRoot()`} to revert this action.\n\t *\n\t * @param {Element} domRoot DOM root element.\n\t * @param {String} [name='main'] Name of the root.\n\t */\n\tattachDomRoot( domRoot, name = 'main' ) {\n\t\tconst viewRoot = this.document.getRoot( name );\n\n\t\t// Set view root name the same as DOM root tag name.\n\t\tviewRoot._name = domRoot.tagName.toLowerCase();\n\n\t\tconst initialDomRootAttributes = {};\n\n\t\t// 1. Copy and cache the attributes to remember the state of the element before attaching.\n\t\t//    The cached attributes will be restored in detachDomRoot() so the element goes to the\n\t\t//    clean state as if the editing view never used it.\n\t\t// 2. Apply the attributes using the view writer, so they all go under the control of the engine.\n\t\t//    The editing view takes over the attribute management completely because various\n\t\t//    features (e.g. addPlaceholder()) require dynamic changes of those attributes and they\n\t\t//    cannot be managed by the engine and the UI library at the same time.\n\t\tfor ( const { name, value } of Array.from( domRoot.attributes ) ) {\n\t\t\tinitialDomRootAttributes[ name ] = value;\n\n\t\t\t// Do not use writer.setAttribute() for the class attribute. The EditableUIView class\n\t\t\t// and its descendants could have already set some using the writer.addClass() on the view\n\t\t\t// document root. They haven't been rendered yet so they are not present in the DOM root.\n\t\t\t// Using writer.setAttribute( 'class', ... ) would override them completely.\n\t\t\tif ( name === 'class' ) {\n\t\t\t\tthis._writer.addClass( value.split( ' ' ), viewRoot );\n\t\t\t} else {\n\t\t\t\tthis._writer.setAttribute( name, value, viewRoot );\n\t\t\t}\n\t\t}\n\n\t\tthis._initialDomRootAttributes.set( domRoot, initialDomRootAttributes );\n\n\t\tconst updateContenteditableAttribute = () => {\n\t\t\tthis._writer.setAttribute( 'contenteditable', !viewRoot.isReadOnly, viewRoot );\n\n\t\t\tif ( viewRoot.isReadOnly ) {\n\t\t\t\tthis._writer.addClass( 'ck-read-only', viewRoot );\n\t\t\t} else {\n\t\t\t\tthis._writer.removeClass( 'ck-read-only', viewRoot );\n\t\t\t}\n\t\t};\n\n\t\t// Set initial value.\n\t\tupdateContenteditableAttribute();\n\n\t\tthis.domRoots.set( name, domRoot );\n\t\tthis.domConverter.bindElements( domRoot, viewRoot );\n\t\tthis._renderer.markToSync( 'children', viewRoot );\n\t\tthis._renderer.markToSync( 'attributes', viewRoot );\n\t\tthis._renderer.domDocuments.add( domRoot.ownerDocument );\n\n\t\tviewRoot.on( 'change:children', ( evt, node ) => this._renderer.markToSync( 'children', node ) );\n\t\tviewRoot.on( 'change:attributes', ( evt, node ) => this._renderer.markToSync( 'attributes', node ) );\n\t\tviewRoot.on( 'change:text', ( evt, node ) => this._renderer.markToSync( 'text', node ) );\n\t\tviewRoot.on( 'change:isReadOnly', () => this.change( updateContenteditableAttribute ) );\n\n\t\tviewRoot.on( 'change', () => {\n\t\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\t} );\n\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.observe( domRoot, name );\n\t\t}\n\t}\n\n\t/**\n\t * Detaches a DOM root element from the view element and restores its attributes to the state before\n\t * {@link #attachDomRoot `attachDomRoot()`}.\n\t *\n\t * @param {String} name Name of the root to detach.\n\t */\n\tdetachDomRoot( name ) {\n\t\tconst domRoot = this.domRoots.get( name );\n\n\t\t// Remove all root attributes so the DOM element is \"bare\".\n\t\tArray.from( domRoot.attributes ).forEach( ( { name } ) => domRoot.removeAttribute( name ) );\n\n\t\tconst initialDomRootAttributes = this._initialDomRootAttributes.get( domRoot );\n\n\t\t// Revert all view root attributes back to the state before attachDomRoot was called.\n\t\tfor ( const attribute in initialDomRootAttributes ) {\n\t\t\tdomRoot.setAttribute( attribute, initialDomRootAttributes[ attribute ] );\n\t\t}\n\n\t\tthis.domRoots.delete( name );\n\t\tthis.domConverter.unbindDomElement( domRoot );\n\t}\n\n\t/**\n\t * Gets DOM root element.\n\t *\n\t * @param {String} [name='main']  Name of the root.\n\t * @returns {Element} DOM root element instance.\n\t */\n\tgetDomRoot( name = 'main' ) {\n\t\treturn this.domRoots.get( name );\n\t}\n\n\t/**\n\t * Creates observer of the given type if not yet created, {@link module:engine/view/observer/observer~Observer#enable enables} it\n\t * and {@link module:engine/view/observer/observer~Observer#observe attaches} to all existing and future\n\t * {@link #domRoots DOM roots}.\n\t *\n\t * Note: Observers are recognized by their constructor (classes). A single observer will be instantiated and used only\n\t * when registered for the first time. This means that features and other components can register a single observer\n\t * multiple times without caring whether it has been already added or not.\n\t *\n\t * @param {Function} Observer The constructor of an observer to add.\n\t * Should create an instance inheriting from {@link module:engine/view/observer/observer~Observer}.\n\t * @returns {module:engine/view/observer/observer~Observer} Added observer instance.\n\t */\n\taddObserver( Observer ) {\n\t\tlet observer = this._observers.get( Observer );\n\n\t\tif ( observer ) {\n\t\t\treturn observer;\n\t\t}\n\n\t\tobserver = new Observer( this );\n\n\t\tthis._observers.set( Observer, observer );\n\n\t\tfor ( const [ name, domElement ] of this.domRoots ) {\n\t\t\tobserver.observe( domElement, name );\n\t\t}\n\n\t\tobserver.enable();\n\n\t\treturn observer;\n\t}\n\n\t/**\n\t * Returns observer of the given type or `undefined` if such observer has not been added yet.\n\t *\n\t * @param {Function} Observer The constructor of an observer to get.\n\t * @returns {module:engine/view/observer/observer~Observer|undefined} Observer instance or undefined.\n\t */\n\tgetObserver( Observer ) {\n\t\treturn this._observers.get( Observer );\n\t}\n\n\t/**\n\t * Disables all added observers.\n\t */\n\tdisableObservers() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.disable();\n\t\t}\n\t}\n\n\t/**\n\t * Enables all added observers.\n\t */\n\tenableObservers() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.enable();\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls the page viewport and {@link #domRoots} with their ancestors to reveal the\n\t * caret, if not already visible to the user.\n\t */\n\tscrollToTheSelection() {\n\t\tconst range = this.document.selection.getFirstRange();\n\n\t\tif ( range ) {\n\t\t\tscrollViewportToShowTarget( {\n\t\t\t\ttarget: this.domConverter.viewRangeToDom( range ),\n\t\t\t\tviewportOffset: 20\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * It will focus DOM element representing {@link module:engine/view/editableelement~EditableElement EditableElement}\n\t * that is currently having selection inside.\n\t */\n\tfocus() {\n\t\tif ( !this.document.isFocused ) {\n\t\t\tconst editable = this.document.selection.editableElement;\n\n\t\t\tif ( editable ) {\n\t\t\t\tthis.domConverter.focus( editable );\n\t\t\t\tthis.forceRender();\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * Before focusing view document, selection should be placed inside one of the view's editables.\n\t\t\t\t * Normally its selection will be converted from model document (which have default selection), but\n\t\t\t\t * when using view document on its own, we need to manually place selection before focusing it.\n\t\t\t\t *\n\t\t\t\t * @error view-focus-no-selection\n\t\t\t\t */\n\t\t\t\tlog.warn( 'view-focus-no-selection: There is no selection in any editable to focus.' );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * The `change()` method is the primary way of changing the view. You should use it to modify any node in the view tree.\n\t * It makes sure that after all changes are made the view is rendered to the DOM (assuming that the view will be changed\n\t * inside the callback). It prevents situations when the DOM is updated when the view state is not yet correct. It allows\n\t * to nest calls one inside another and still performs a single rendering after all those changes are made.\n\t * It also returns the return value of its callback.\n\t *\n\t *\t\tconst text = view.change( writer => {\n\t *\t\t\tconst newText = writer.createText( 'foo' );\n\t *\t\t\twriter.insert( position1, newText );\n\t *\n\t *\t\t\tview.change( writer => {\n\t *\t\t\t\twriter.insert( position2, writer.createText( 'bar' ) );\n\t *\t\t\t} );\n\t *\n\t * \t\t\twriter.remove( range );\n\t *\n\t * \t\t\treturn newText;\n\t *\t\t} );\n\t *\n\t * When the outermost change block is done and rendering to the DOM is over the\n\t * {@link module:engine/view/view~View#event:render `View#render`} event is fired.\n\t *\n\t * This method throws a `applying-view-changes-on-rendering` error when\n\t * the change block is used after rendering to the DOM has started.\n\t *\n\t * @param {Function} callback Callback function which may modify the view.\n\t * @returns {*} Value returned by the callback.\n\t */\n\tchange( callback ) {\n\t\tif ( this.isRenderingInProgress || this._postFixersInProgress ) {\n\t\t\t/**\n\t\t\t * Thrown when there is an attempt to make changes to the view tree when it is in incorrect state. This may\n\t\t\t * cause some unexpected behaviour and inconsistency between the DOM and the view.\n\t\t\t * This may be caused by:\n\t\t\t *\n\t\t\t * * calling {@link #change} or {@link #forceRender} during rendering process,\n\t\t\t * * calling {@link #change} or {@link #forceRender} inside of\n\t\t\t *   {@link module:engine/view/document~Document#registerPostFixer post-fixer function}.\n\t\t\t *\n\t\t\t * @error cannot-change-view-tree\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'cannot-change-view-tree: ' +\n\t\t\t\t'Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. ' +\n\t\t\t\t'This may cause some unexpected behavior and inconsistency between the DOM and the view.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\t// Recursive call to view.change() method - execute listener immediately.\n\t\tif ( this._ongoingChange ) {\n\t\t\treturn callback( this._writer );\n\t\t}\n\n\t\t// This lock will assure that all recursive calls to view.change() will end up in same block - one \"render\"\n\t\t// event for all nested calls.\n\t\tthis._ongoingChange = true;\n\t\tconst callbackResult = callback( this._writer );\n\t\tthis._ongoingChange = false;\n\n\t\t// This lock is used by editing controller to render changes from outer most model.change() once. As plugins might call\n\t\t// view.change() inside model.change() block - this will ensures that postfixers and rendering are called once after all changes.\n\t\t// Also, we don't need to render anything if there're no changes since last rendering.\n\t\tif ( !this._renderingDisabled && this._hasChangedSinceTheLastRendering ) {\n\t\t\tthis._postFixersInProgress = true;\n\t\t\tthis.document._callPostFixers( this._writer );\n\t\t\tthis._postFixersInProgress = false;\n\n\t\t\tthis.fire( 'render' );\n\t\t}\n\n\t\treturn callbackResult;\n\t}\n\n\t/**\n\t * Forces rendering {@link module:engine/view/document~Document view document} to DOM. If any view changes are\n\t * currently in progress, rendering will start after all {@link #change change blocks} are processed.\n\t *\n\t * Note that this method is dedicated for special cases. All view changes should be wrapped in the {@link #change}\n\t * block and the view will automatically check whether it needs to render DOM or not.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `applying-view-changes-on-rendering` when\n\t * trying to re-render when rendering to DOM has already started.\n\t */\n\tforceRender() {\n\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\tthis.change( () => {} );\n\t}\n\n\t/**\n\t * Destroys this instance. Makes sure that all observers are destroyed and listeners removed.\n\t */\n\tdestroy() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.destroy();\n\t\t}\n\n\t\tthis.document.destroy();\n\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t Creates new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = view.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = view.createRange( start, end );\n\t *\t\tconst selection = view.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ view.createRange( start1, end2 ), view.createRange( star2, end2 ) ];\n\t *\t\tconst selection = view.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = view.createSelection();\n\t *\t\tconst selection = view.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = view.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = view.createPositionFromPath( root, path );\n\t *\t\tconst selection = view.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = view.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = view.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = view.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = view.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s factory method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = view.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = view.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Disables or enables rendering. If the flag is set to `true` then the rendering will be disabled.\n\t * If the flag is set to `false` and if there was some change in the meantime, then the rendering action will be performed.\n\t *\n\t * @protected\n\t * @param {Boolean} flag A flag indicates whether the rendering should be disabled.\n\t */\n\t_disableRendering( flag ) {\n\t\tthis._renderingDisabled = flag;\n\n\t\tif ( flag == false ) {\n\t\t\t// Render when you stop blocking rendering.\n\t\t\tthis.change( () => {} );\n\t\t}\n\t}\n\n\t/**\n\t * Renders all changes. In order to avoid triggering the observers (e.g. mutations) all observers are disabled\n\t * before rendering and re-enabled after that.\n\t *\n\t * @private\n\t */\n\t_render() {\n\t\tthis.isRenderingInProgress = true;\n\t\tthis.disableObservers();\n\t\tthis._renderer.render();\n\t\tthis.enableObservers();\n\t\tthis.isRenderingInProgress = false;\n\t}\n\n\t/**\n\t * Fired after a topmost {@link module:engine/view/view~View#change change block} and all\n\t * {@link module:engine/view/document~Document#registerPostFixer post-fixers} are executed.\n\t *\n\t * Actual rendering is performed as a first listener on 'normal' priority.\n\t *\n\t *\t\tview.on( 'render', () => {\n\t *\t\t\t// Rendering to the DOM is complete.\n\t *\t\t} );\n\t *\n\t * This event is useful when you want to update interface elements after the rendering, e.g. position of the\n\t * balloon panel. If you wants to change view structure use\n\t * {@link module:engine/view/document~Document#registerPostFixer post-fixers}.\n\t *\n\t * @event module:engine/view/view~View#event:render\n\t */\n}\n\nmix( View, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/mapper\n */\n\nimport ModelPosition from '../model/position';\nimport ModelRange from '../model/range';\n\nimport ViewPosition from '../view/position';\nimport ViewRange from '../view/range';\nimport ViewText from '../view/text';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Maps elements, positions and markers between {@link module:engine/view/document~Document the view} and\n * {@link module:engine/model/model the model}.\n *\n * The instance of the Mapper used for the editing pipeline is available in\n * {@link module:engine/controller/editingcontroller~EditingController#mapper `editor.editing.mapper`}.\n *\n * Mapper uses bound elements to find corresponding elements and positions, so, to get proper results,\n * all model elements should be {@link module:engine/conversion/mapper~Mapper#bindElements bound}.\n *\n * To map complex model to/from view relations, you may provide custom callbacks for\n * {@link module:engine/conversion/mapper~Mapper#event:modelToViewPosition modelToViewPosition event} and\n * {@link module:engine/conversion/mapper~Mapper#event:viewToModelPosition viewToModelPosition event} that are fired whenever\n * a position mapping request occurs.\n * Those events are fired by {@link module:engine/conversion/mapper~Mapper#toViewPosition toViewPosition}\n * and {@link module:engine/conversion/mapper~Mapper#toModelPosition toModelPosition} methods. `Mapper` adds it's own default callbacks\n * with `'lowest'` priority. To override default `Mapper` mapping, add custom callback with higher priority and\n * stop the event.\n */\nexport default class Mapper {\n\t/**\n\t * Creates an instance of the mapper.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Model element to view element mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._modelToViewMapping = new WeakMap();\n\n\t\t/**\n\t\t * View element to model element mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._viewToModelMapping = new WeakMap();\n\n\t\t/**\n\t\t * A map containing callbacks between view element names and functions evaluating length of view elements\n\t\t * in model.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._viewToModelLengthCallbacks = new Map();\n\n\t\t/**\n\t\t * Model marker name to view elements mapping.\n\t\t *\n\t\t * Keys are `String`s while values are `Set`s with {@link module:engine/view/element~Element view elements}.\n\t\t * One marker (name) can be mapped to multiple elements.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._markerNameToElements = new Map();\n\n\t\t// Default mapper algorithm for mapping model position to view position.\n\t\tthis.on( 'modelToViewPosition', ( evt, data ) => {\n\t\t\tif ( data.viewPosition ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst viewContainer = this._modelToViewMapping.get( data.modelPosition.parent );\n\n\t\t\tdata.viewPosition = this._findPositionIn( viewContainer, data.modelPosition.offset );\n\t\t}, { priority: 'low' } );\n\n\t\t// Default mapper algorithm for mapping view position to model position.\n\t\tthis.on( 'viewToModelPosition', ( evt, data ) => {\n\t\t\tif ( data.modelPosition ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst viewBlock = this.findMappedViewAncestor( data.viewPosition );\n\t\t\tconst modelParent = this._viewToModelMapping.get( viewBlock );\n\t\t\tconst modelOffset = this._toModelOffset( data.viewPosition.parent, data.viewPosition.offset, viewBlock );\n\n\t\t\tdata.modelPosition = ModelPosition._createAt( modelParent, modelOffset );\n\t\t}, { priority: 'low' } );\n\t}\n\n\t/**\n\t * Marks model and view elements as corresponding. Corresponding elements can be retrieved by using\n\t * the {@link module:engine/conversion/mapper~Mapper#toModelElement toModelElement} and\n\t * {@link module:engine/conversion/mapper~Mapper#toViewElement toViewElement} methods.\n\t * The information that elements are bound is also used to translate positions.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element.\n\t * @param {module:engine/view/element~Element} viewElement View element.\n\t */\n\tbindElements( modelElement, viewElement ) {\n\t\tthis._modelToViewMapping.set( modelElement, viewElement );\n\t\tthis._viewToModelMapping.set( viewElement, modelElement );\n\t}\n\n\t/**\n\t * Unbinds given {@link module:engine/view/element~Element view element} from the map.\n\t *\n\t * **Note:** view-to-model binding will be removed, if it existed. However, corresponding model-to-view binding\n\t * will be removed only if model element is still bound to passed `viewElement`.\n\t *\n\t * This behavior lets for re-binding model element to another view element without fear of losing the new binding\n\t * when the previously bound view element is unbound.\n\t *\n\t * @param {module:engine/view/element~Element} viewElement View element to unbind.\n\t */\n\tunbindViewElement( viewElement ) {\n\t\tconst modelElement = this.toModelElement( viewElement );\n\n\t\tthis._viewToModelMapping.delete( viewElement );\n\n\t\tif ( this._modelToViewMapping.get( modelElement ) == viewElement ) {\n\t\t\tthis._modelToViewMapping.delete( modelElement );\n\t\t}\n\t}\n\n\t/**\n\t * Unbinds given {@link module:engine/model/element~Element model element} from the map.\n\t *\n\t * **Note:** model-to-view binding will be removed, if it existed. However, corresponding view-to-model binding\n\t * will be removed only if view element is still bound to passed `modelElement`.\n\t *\n\t * This behavior lets for re-binding view element to another model element without fear of losing the new binding\n\t * when the previously bound model element is unbound.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element to unbind.\n\t */\n\tunbindModelElement( modelElement ) {\n\t\tconst viewElement = this.toViewElement( modelElement );\n\n\t\tthis._modelToViewMapping.delete( modelElement );\n\n\t\tif ( this._viewToModelMapping.get( viewElement ) == modelElement ) {\n\t\t\tthis._viewToModelMapping.delete( viewElement );\n\t\t}\n\t}\n\n\t/**\n\t * Binds given marker name with given {@link module:engine/view/element~Element view element}. The element\n\t * will be added to the current set of elements bound with given marker name.\n\t *\n\t * @param {module:engine/view/element~Element} element Element to bind.\n\t * @param {String} name Marker name.\n\t */\n\tbindElementToMarker( element, name ) {\n\t\tconst elements = this._markerNameToElements.get( name ) || new Set();\n\n\t\telements.add( element );\n\n\t\tthis._markerNameToElements.set( name, elements );\n\t}\n\n\t/**\n\t * Unbinds all elements from given marker name.\n\t *\n\t * @param {String} name Marker name.\n\t */\n\tunbindElementsFromMarkerName( name ) {\n\t\tthis._markerNameToElements.delete( name );\n\t}\n\n\t/**\n\t * Removes all model to view and view to model bindings.\n\t */\n\tclearBindings() {\n\t\tthis._modelToViewMapping = new WeakMap();\n\t\tthis._viewToModelMapping = new WeakMap();\n\t\tthis._markerNameToElements = new Map();\n\t}\n\n\t/**\n\t * Gets the corresponding model element.\n\t *\n\t * **Note:** {@link module:engine/view/uielement~UIElement} does not have corresponding element in model.\n\t *\n\t * @param {module:engine/view/element~Element} viewElement View element.\n\t * @returns {module:engine/model/element~Element|undefined} Corresponding model element or `undefined` if not found.\n\t */\n\ttoModelElement( viewElement ) {\n\t\treturn this._viewToModelMapping.get( viewElement );\n\t}\n\n\t/**\n\t * Gets the corresponding view element.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element.\n\t * @returns {module:engine/view/element~Element|undefined} Corresponding view element or `undefined` if not found.\n\t */\n\ttoViewElement( modelElement ) {\n\t\treturn this._modelToViewMapping.get( modelElement );\n\t}\n\n\t/**\n\t * Gets the corresponding model range.\n\t *\n\t * @param {module:engine/view/range~Range} viewRange View range.\n\t * @returns {module:engine/model/range~Range} Corresponding model range.\n\t */\n\ttoModelRange( viewRange ) {\n\t\treturn new ModelRange( this.toModelPosition( viewRange.start ), this.toModelPosition( viewRange.end ) );\n\t}\n\n\t/**\n\t * Gets the corresponding view range.\n\t *\n\t * @param {module:engine/model/range~Range} modelRange Model range.\n\t * @returns {module:engine/view/range~Range} Corresponding view range.\n\t */\n\ttoViewRange( modelRange ) {\n\t\treturn new ViewRange( this.toViewPosition( modelRange.start ), this.toViewPosition( modelRange.end ) );\n\t}\n\n\t/**\n\t * Gets the corresponding model position.\n\t *\n\t * @fires viewToModelPosition\n\t * @param {module:engine/view/position~Position} viewPosition View position.\n\t * @returns {module:engine/model/position~Position} Corresponding model position.\n\t */\n\ttoModelPosition( viewPosition ) {\n\t\tconst data = {\n\t\t\tviewPosition,\n\t\t\tmapper: this\n\t\t};\n\n\t\tthis.fire( 'viewToModelPosition', data );\n\n\t\treturn data.modelPosition;\n\t}\n\n\t/**\n\t * Gets the corresponding view position.\n\t *\n\t * @fires modelToViewPosition\n\t * @param {module:engine/model/position~Position} modelPosition Model position.\n\t * @param {Object} [options] Additional options for position mapping process.\n\t * @param {Boolean} [options.isPhantom=false] Should be set to `true` if the model position to map is pointing to a place\n\t * in model tree which no longer exists. For example, it could be an end of a removed model range.\n\t * @returns {module:engine/view/position~Position} Corresponding view position.\n\t */\n\ttoViewPosition( modelPosition, options = { isPhantom: false } ) {\n\t\tconst data = {\n\t\t\tmodelPosition,\n\t\t\tmapper: this,\n\t\t\tisPhantom: options.isPhantom\n\t\t};\n\n\t\tthis.fire( 'modelToViewPosition', data );\n\n\t\treturn data.viewPosition;\n\t}\n\n\t/**\n\t * Gets all view elements bound to the given marker name.\n\t *\n\t * @param {String} name Marker name.\n\t * @returns {Set.<module:engine/view/element~Element>|null} View elements bound with given marker name or `null`\n\t * if no elements are bound to given marker name.\n\t */\n\tmarkerNameToElements( name ) {\n\t\tconst boundElements = this._markerNameToElements.get( name );\n\n\t\tif ( !boundElements ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst elements = new Set();\n\n\t\tfor ( const element of boundElements ) {\n\t\t\tif ( element.is( 'attributeElement' ) ) {\n\t\t\t\tfor ( const clone of element.getElementsWithSameId() ) {\n\t\t\t\t\telements.add( clone );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telements.add( element );\n\t\t\t}\n\t\t}\n\n\t\treturn elements;\n\t}\n\n\t/**\n\t * Registers a callback that evaluates the length in the model of a view element with given name.\n\t *\n\t * The callback is fired with one argument, which is a view element instance. The callback is expected to return\n\t * a number representing the length of view element in model.\n\t *\n\t *\t\t// List item in view may contain nested list, which have other list items. In model though,\n\t *\t\t// the lists are represented by flat structure. Because of those differences, length of list view element\n\t *\t\t// may be greater than one. In the callback it's checked how many nested list items are in evaluated list item.\n\t *\n\t *\t\tfunction getViewListItemLength( element ) {\n\t *\t\t\tlet length = 1;\n\t *\n\t *\t\t\tfor ( let child of element.getChildren() ) {\n\t *\t\t\t\tif ( child.name == 'ul' || child.name == 'ol' ) {\n\t *\t\t\t\t\tfor ( let item of child.getChildren() ) {\n\t *\t\t\t\t\t\tlength += getViewListItemLength( item );\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\n\t *\t\t\treturn length;\n\t *\t\t}\n\t *\n\t *\t\tmapper.registerViewToModelLength( 'li', getViewListItemLength );\n\t *\n\t * @param {String} viewElementName Name of view element for which callback is registered.\n\t * @param {Function} lengthCallback Function return a length of view element instance in model.\n\t */\n\tregisterViewToModelLength( viewElementName, lengthCallback ) {\n\t\tthis._viewToModelLengthCallbacks.set( viewElementName, lengthCallback );\n\t}\n\n\t/**\n\t * For given `viewPosition`, finds and returns the closest ancestor of this position that has a mapping to\n\t * the model.\n\t *\n\t * @param {module:engine/view/position~Position} viewPosition Position for which mapped ancestor should be found.\n\t * @returns {module:engine/view/element~Element}\n\t */\n\tfindMappedViewAncestor( viewPosition ) {\n\t\tlet parent = viewPosition.parent;\n\n\t\twhile ( !this._viewToModelMapping.has( parent ) ) {\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn parent;\n\t}\n\n\t/**\n\t * Calculates model offset based on the view position and the block element.\n\t *\n\t * Example:\n\t *\n\t *\t\t<p>foo<b>ba|r</b></p> // _toModelOffset( b, 2, p ) -> 5\n\t *\n\t * Is a sum of:\n\t *\n\t *\t\t<p>foo|<b>bar</b></p> // _toModelOffset( p, 3, p ) -> 3\n\t *\t\t<p>foo<b>ba|r</b></p> // _toModelOffset( b, 2, b ) -> 2\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewParent Position parent.\n\t * @param {Number} viewOffset Position offset.\n\t * @param {module:engine/view/element~Element} viewBlock Block used as a base to calculate offset.\n\t * @returns {Number} Offset in the model.\n\t */\n\t_toModelOffset( viewParent, viewOffset, viewBlock ) {\n\t\tif ( viewBlock != viewParent ) {\n\t\t\t// See example.\n\t\t\tconst offsetToParentStart = this._toModelOffset( viewParent.parent, viewParent.index, viewBlock );\n\t\t\tconst offsetInParent = this._toModelOffset( viewParent, viewOffset, viewParent );\n\n\t\t\treturn offsetToParentStart + offsetInParent;\n\t\t}\n\n\t\t// viewBlock == viewParent, so we need to calculate the offset in the parent element.\n\n\t\t// If the position is a text it is simple (\"ba|r\" -> 2).\n\t\tif ( viewParent.is( 'text' ) ) {\n\t\t\treturn viewOffset;\n\t\t}\n\n\t\t// If the position is in an element we need to sum lengths of siblings ( <b> bar </b> foo | -> 3 + 3 = 6 ).\n\t\tlet modelOffset = 0;\n\n\t\tfor ( let i = 0; i < viewOffset; i++ ) {\n\t\t\tmodelOffset += this.getModelLength( viewParent.getChild( i ) );\n\t\t}\n\n\t\treturn modelOffset;\n\t}\n\n\t/**\n\t * Gets the length of the view element in the model.\n\t *\n\t * The length is calculated as follows:\n\t * * if {@link #registerViewToModelLength length mapping callback} is provided for given `viewNode` it is used to\n\t * evaluate model length (`viewNode` is used as first and only parameter passed to the callback),\n\t * * length of a {@link module:engine/view/text~Text text node} is equal to the length of it's\n\t * {@link module:engine/view/text~Text#data data},\n\t * * length of a {@link module:engine/view/uielement~UIElement ui element} is equal to 0,\n\t * * length of a mapped {@link module:engine/view/element~Element element} is equal to 1,\n\t * * length of a not-mapped {@link module:engine/view/element~Element element} is equal to the length of it's children.\n\t *\n\t * Examples:\n\t *\n\t *\t\tfoo                          -> 3 // Text length is equal to it's data length.\n\t *\t\t<p>foo</p>                   -> 1 // Length of an element which is mapped is by default equal to 1.\n\t *\t\t<b>foo</b>                   -> 3 // Length of an element which is not mapped is a length of its children.\n\t *\t\t<div><p>x</p><p>y</p></div>  -> 2 // Assuming that <div> is not mapped and <p> are mapped.\n\t *\n\t * @param {module:engine/view/element~Element} viewNode View node.\n\t * @returns {Number} Length of the node in the tree model.\n\t */\n\tgetModelLength( viewNode ) {\n\t\tif ( this._viewToModelLengthCallbacks.get( viewNode.name ) ) {\n\t\t\tconst callback = this._viewToModelLengthCallbacks.get( viewNode.name );\n\n\t\t\treturn callback( viewNode );\n\t\t} else if ( this._viewToModelMapping.has( viewNode ) ) {\n\t\t\treturn 1;\n\t\t} else if ( viewNode.is( 'text' ) ) {\n\t\t\treturn viewNode.data.length;\n\t\t} else if ( viewNode.is( 'uiElement' ) ) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\tlet len = 0;\n\n\t\t\tfor ( const child of viewNode.getChildren() ) {\n\t\t\t\tlen += this.getModelLength( child );\n\t\t\t}\n\n\t\t\treturn len;\n\t\t}\n\t}\n\n\t/**\n\t * Finds the position in the view node (or its children) with the expected model offset.\n\t *\n\t * Example:\n\t *\n\t *\t\t<p>fo<b>bar</b>bom</p> -> expected offset: 4\n\t *\n\t *\t\t_findPositionIn( p, 4 ):\n\t *\t\t<p>|fo<b>bar</b>bom</p> -> expected offset: 4, actual offset: 0\n\t *\t\t<p>fo|<b>bar</b>bom</p> -> expected offset: 4, actual offset: 2\n\t *\t\t<p>fo<b>bar</b>|bom</p> -> expected offset: 4, actual offset: 5 -> we are too far\n\t *\n\t *\t\t_findPositionIn( b, 4 - ( 5 - 3 ) ):\n\t *\t\t<p>fo<b>|bar</b>bom</p> -> expected offset: 2, actual offset: 0\n\t *\t\t<p>fo<b>bar|</b>bom</p> -> expected offset: 2, actual offset: 3 -> we are too far\n\t *\n\t *\t\t_findPositionIn( bar, 2 - ( 3 - 3 ) ):\n\t *\t\tWe are in the text node so we can simple find the offset.\n\t *\t\t<p>fo<b>ba|r</b>bom</p> -> expected offset: 2, actual offset: 2 -> position found\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewParent Tree view element in which we are looking for the position.\n\t * @param {Number} expectedOffset Expected offset.\n\t * @returns {module:engine/view/position~Position} Found position.\n\t */\n\t_findPositionIn( viewParent, expectedOffset ) {\n\t\t// Last scanned view node.\n\t\tlet viewNode;\n\t\t// Length of the last scanned view node.\n\t\tlet lastLength = 0;\n\n\t\tlet modelOffset = 0;\n\t\tlet viewOffset = 0;\n\n\t\t// In the text node it is simple: offset in the model equals offset in the text.\n\t\tif ( viewParent.is( 'text' ) ) {\n\t\t\treturn new ViewPosition( viewParent, expectedOffset );\n\t\t}\n\n\t\t// In other cases we add lengths of child nodes to find the proper offset.\n\n\t\t// If it is smaller we add the length.\n\t\twhile ( modelOffset < expectedOffset ) {\n\t\t\tviewNode = viewParent.getChild( viewOffset );\n\t\t\tlastLength = this.getModelLength( viewNode );\n\t\t\tmodelOffset += lastLength;\n\t\t\tviewOffset++;\n\t\t}\n\n\t\t// If it equals we found the position.\n\t\tif ( modelOffset == expectedOffset ) {\n\t\t\treturn this._moveViewPositionToTextNode( new ViewPosition( viewParent, viewOffset ) );\n\t\t}\n\t\t// If it is higher we need to enter last child.\n\t\telse {\n\t\t\t// ( modelOffset - lastLength ) is the offset to the child we enter,\n\t\t\t// so we subtract it from the expected offset to fine the offset in the child.\n\t\t\treturn this._findPositionIn( viewNode, expectedOffset - ( modelOffset - lastLength ) );\n\t\t}\n\t}\n\n\t/**\n\t * Because we prefer positions in text nodes over positions next to text node moves view position to the text node\n\t * if it was next to it.\n\t *\n\t *\t\t<p>[]<b>foo</b></p> -> <p>[]<b>foo</b></p> // do not touch if position is not directly next to text\n\t *\t\t<p>foo[]<b>foo</b></p> -> <p>foo{}<b>foo</b></p> // move to text node\n\t *\t\t<p><b>[]foo</b></p> -> <p><b>{}foo</b></p> // move to text node\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} viewPosition Position potentially next to text node.\n\t * @returns {module:engine/view/position~Position} Position in text node if possible.\n\t */\n\t_moveViewPositionToTextNode( viewPosition ) {\n\t\t// If the position is just after text node, put it at the end of that text node.\n\t\t// If the position is just before text node, put it at the beginning of that text node.\n\t\tconst nodeBefore = viewPosition.nodeBefore;\n\t\tconst nodeAfter = viewPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof ViewText ) {\n\t\t\treturn new ViewPosition( nodeBefore, nodeBefore.data.length );\n\t\t} else if ( nodeAfter instanceof ViewText ) {\n\t\t\treturn new ViewPosition( nodeAfter, 0 );\n\t\t}\n\n\t\t// Otherwise, just return the given position.\n\t\treturn viewPosition;\n\t}\n\n\t/**\n\t * Fired for each model-to-view position mapping request. The purpose of this event is to enable custom model-to-view position\n\t * mapping. Callbacks added to this event take {@link module:engine/model/position~Position model position} and are expected to\n\t * calculate {@link module:engine/view/position~Position view position}. Calculated view position should be added as `viewPosition`\n\t * value in `data` object that is passed as one of parameters to the event callback.\n\t *\n\t * \t\t// Assume that \"captionedImage\" model element is converted to <img> and following <span> elements in view,\n\t * \t\t// and the model element is bound to <img> element. Force mapping model positions inside \"captionedImage\" to that\n\t * \t\t// <span> element.\n\t *\t\tmapper.on( 'modelToViewPosition', ( evt, data ) => {\n\t *\t\t\tconst positionParent = modelPosition.parent;\n\t *\n\t *\t\t\tif ( positionParent.name == 'captionedImage' ) {\n\t *\t\t\t\tconst viewImg = data.mapper.toViewElement( positionParent );\n\t *\t\t\t\tconst viewCaption = viewImg.nextSibling; // The <span> element.\n\t *\n\t *\t\t\t\tdata.viewPosition = new ViewPosition( viewCaption, modelPosition.offset );\n\t *\n\t *\t\t\t\t// Stop the event if other callbacks should not modify calculated value.\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * **Note:** keep in mind that sometimes a \"phantom\" model position is being converted. \"Phantom\" model position is\n\t * a position that points to a non-existing place in model. Such position might still be valid for conversion, though\n\t * (it would point to a correct place in view when converted). One example of such situation is when a range is\n\t * removed from model, there may be a need to map the range's end (which is no longer valid model position). To\n\t * handle such situation, check `data.isPhantom` flag:\n\t *\n\t * \t\t// Assume that there is \"customElement\" model element and whenever position is before it, we want to move it\n\t * \t\t// to the inside of the view element bound to \"customElement\".\n\t *\t\tmapper.on( 'modelToViewPosition', ( evt, data ) => {\n\t *\t\t\tif ( data.isPhantom ) {\n\t *\t\t\t\treturn;\n\t *\t\t\t}\n\t *\n\t *\t\t\t// Below line might crash for phantom position that does not exist in model.\n\t *\t\t\tconst sibling = data.modelPosition.nodeBefore;\n\t *\n\t *\t\t\t// Check if this is the element we are interested in.\n\t *\t\t\tif ( !sibling.is( 'customElement' ) ) {\n\t *\t\t\t\treturn;\n\t *\t\t\t}\n\t *\n\t *\t\t\tconst viewElement = data.mapper.toViewElement( sibling );\n\t *\n\t *\t\t\tdata.viewPosition = new ViewPosition( sibling, 0 );\n\t *\n\t *\t\t\tevt.stop();\n\t *\t\t} );\n\t *\n\t * **Note:** default mapping callback is provided with `low` priority setting and does not cancel the event, so it is possible to\n\t * attach a custom callback after default callback and also use `data.viewPosition` calculated by default callback\n\t * (for example to fix it).\n\t *\n\t * **Note:** default mapping callback will not fire if `data.viewPosition` is already set.\n\t *\n\t * **Note:** these callbacks are called **very often**. For efficiency reasons, it is advised to use them only when position\n\t * mapping between given model and view elements is unsolvable using just elements mapping and default algorithm. Also,\n\t * the condition that checks if special case scenario happened should be as simple as possible.\n\t *\n\t * @event modelToViewPosition\n\t * @param {Object} data Data pipeline object that can store and pass data between callbacks. The callback should add\n\t * `viewPosition` value to that object with calculated {@link module:engine/view/position~Position view position}.\n\t * @param {module:engine/conversion/mapper~Mapper} data.mapper Mapper instance that fired the event.\n\t */\n\n\t/**\n\t * Fired for each view-to-model position mapping request. See {@link module:engine/conversion/mapper~Mapper#event:modelToViewPosition}.\n\t *\n\t * \t\t// See example in `modelToViewPosition` event description.\n\t * \t\t// This custom mapping will map positions from <span> element next to <img> to the \"captionedImage\" element.\n\t *\t\tmapper.on( 'viewToModelPosition', ( evt, data ) => {\n\t *\t\t\tconst positionParent = viewPosition.parent;\n\t *\n\t *\t\t\tif ( positionParent.hasClass( 'image-caption' ) ) {\n\t *\t\t\t\tconst viewImg = positionParent.previousSibling;\n\t *\t\t\t\tconst modelImg = data.mapper.toModelElement( viewImg );\n\t *\n\t *\t\t\t\tdata.modelPosition = new ModelPosition( modelImg, viewPosition.offset );\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * **Note:** default mapping callback is provided with `low` priority setting and does not cancel the event, so it is possible to\n\t * attach a custom callback after default callback and also use `data.modelPosition` calculated by default callback\n\t * (for example to fix it).\n\t *\n\t * **Note:** default mapping callback will not fire if `data.modelPosition` is already set.\n\t *\n\t * **Note:** these callbacks are called **very often**. For efficiency reasons, it is advised to use them only when position\n\t * mapping between given model and view elements is unsolvable using just elements mapping and default algorithm. Also,\n\t * the condition that checks if special case scenario happened should be as simple as possible.\n\t *\n\t * @event viewToModelPosition\n\t * @param {Object} data Data pipeline object that can store and pass data between callbacks. The callback should add\n\t * `modelPosition` value to that object with calculated {@link module:engine/model/position~Position model position}.\n\t * @param {module:engine/conversion/mapper~Mapper} data.mapper Mapper instance that fired the event.\n\t */\n}\n\nmix( Mapper, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/modelconsumable\n */\n\nimport TextProxy from '../model/textproxy';\n\n/**\n * Manages a list of consumable values for {@link module:engine/model/item~Item model items}.\n *\n * Consumables are various aspects of the model. A model item can be broken down into singular properties that might be\n * taken into consideration when converting that item.\n *\n * `ModelConsumable` is used by {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} while analyzing changed\n * parts of {@link module:engine/model/document~Document the document}. The added / changed / removed model items are broken down\n * into singular properties (the item itself and it's attributes). All those parts are saved in `ModelConsumable`. Then,\n * during conversion, when given part of model item is converted (i.e. the view element has been inserted into the view,\n * but without attributes), consumable value is removed from `ModelConsumable`.\n *\n * For model items, `ModelConsumable` stores consumable values of one of following types: `insert`, `addattribute:<attributeKey>`,\n * `changeattributes:<attributeKey>`, `removeattributes:<attributeKey>`.\n *\n * In most cases, it is enough to let {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}\n * gather consumable values, so there is no need to use\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#add add method} directly.\n * However, it is important to understand how consumable values can be\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed}.\n * See {@link module:engine/conversion/downcasthelpers default downcast converters} for more information.\n *\n * Keep in mind, that one conversion event may have multiple callbacks (converters) attached to it. Each of those is\n * able to convert one or more parts of the model. However, when one of those callbacks actually converts\n * something, other should not, because they would duplicate the results. Using `ModelConsumable` helps avoiding\n * this situation, because callbacks should only convert those values, which were not yet consumed from `ModelConsumable`.\n *\n * Consuming multiple values in a single callback:\n *\n *\t\t// Converter for custom `image` element that might have a `caption` element inside which changes\n *\t\t// how the image is displayed in the view:\n *\t\t//\n *\t\t// Model:\n *\t\t//\n *\t\t// [image]\n *\t\t//   └─ [caption]\n *\t\t//       └─ foo\n *\t\t//\n *\t\t// View:\n *\t\t//\n *\t\t// <figure>\n *\t\t//   ├─ <img />\n *\t\t//   └─ <caption>\n *\t\t//       └─ foo\n *\t\tmodelConversionDispatcher.on( 'insert:image', ( evt, data, conversionApi ) => {\n *\t\t\t// First, consume the `image` element.\n *\t\t\tconversionApi.consumable.consume( data.item, 'insert' );\n *\n *\t\t\t// Just create normal image element for the view.\n *\t\t\t// Maybe it will be \"decorated\" later.\n *\t\t\tconst viewImage = new ViewElement( 'img' );\n *\t\t\tconst insertPosition = conversionApi.mapper.toViewPosition( data.range.start );\n *\t\t\tconst viewWriter = conversionApi.writer;\n *\n *\t\t\t// Check if the `image` element has children.\n *\t\t\tif ( data.item.childCount > 0 ) {\n *\t\t\t\tconst modelCaption = data.item.getChild( 0 );\n *\n *\t\t\t\t// `modelCaption` insertion change is consumed from consumable values.\n *\t\t\t\t// It will not be converted by other converters, but it's children (probably some text) will be.\n *\t\t\t\t// Through mapping, converters for text will know where to insert contents of `modelCaption`.\n *\t\t\t\tif ( conversionApi.consumable.consume( modelCaption, 'insert' ) ) {\n *\t\t\t\t\tconst viewCaption = new ViewElement( 'figcaption' );\n *\n *\t\t\t\t\tconst viewImageHolder = new ViewElement( 'figure', null, [ viewImage, viewCaption ] );\n *\n *\t\t\t\t\tconversionApi.mapper.bindElements( modelCaption, viewCaption );\n *\t\t\t\t\tconversionApi.mapper.bindElements( data.item, viewImageHolder );\n *\t\t\t\t\tviewWriter.insert( insertPosition, viewImageHolder );\n *\t\t\t\t}\n *\t\t\t} else {\n *\t\t\t\tconversionApi.mapper.bindElements( data.item, viewImage );\n *\t\t\t\tviewWriter.insert( insertPosition, viewImage );\n *\t\t\t}\n *\n *\t\t\tevt.stop();\n *\t\t} );\n */\nexport default class ModelConsumable {\n\t/**\n\t * Creates an empty consumables list.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Contains list of consumable values.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/conversion/modelconsumable~ModelConsumable#_consumable\n\t\t */\n\t\tthis._consumable = new Map();\n\n\t\t/**\n\t\t * For each {@link module:engine/model/textproxy~TextProxy} added to `ModelConsumable`, this registry holds parent\n\t\t * of that `TextProxy` and start and end indices of that `TextProxy`. This allows identification of `TextProxy`\n\t\t * instances that points to the same part of the model but are different instances. Each distinct `TextProxy`\n\t\t * is given unique `Symbol` which is then registered as consumable. This process is transparent for `ModelConsumable`\n\t\t * API user because whenever `TextProxy` is added, tested, consumed or reverted, internal mechanisms of\n\t\t * `ModelConsumable` translates `TextProxy` to that unique `Symbol`.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/conversion/modelconsumable~ModelConsumable#_textProxyRegistry\n\t\t */\n\t\tthis._textProxyRegistry = new Map();\n\t}\n\n\t/**\n\t * Adds a consumable value to the consumables list and links it with given model item.\n\t *\n\t *\t\tmodelConsumable.add( modelElement, 'insert' ); // Add `modelElement` insertion change to consumable values.\n\t *\t\tmodelConsumable.add( modelElement, 'addAttribute:bold' ); // Add `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.add( modelElement, 'removeAttribute:bold' ); // Add `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.add( modelSelection, 'selection' ); // Add `modelSelection` to consumable values.\n\t *\t\tmodelConsumable.add( modelRange, 'range' ); // Add `modelRange` to consumable values.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection that has the consumable.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t */\n\tadd( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tif ( !this._consumable.has( item ) ) {\n\t\t\tthis._consumable.set( item, new Map() );\n\t\t}\n\n\t\tthis._consumable.get( item ).set( type, true );\n\t}\n\n\t/**\n\t * Removes given consumable value from given model item.\n\t *\n\t *\t\tmodelConsumable.consume( modelElement, 'insert' ); // Remove `modelElement` insertion change from consumable values.\n\t *\t\tmodelConsumable.consume( modelElement, 'addAttribute:bold' ); // Remove `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.consume( modelElement, 'removeAttribute:bold' ); // Remove `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.consume( modelSelection, 'selection' ); // Remove `modelSelection` from consumable values.\n\t *\t\tmodelConsumable.consume( modelRange, 'range' ); // Remove 'modelRange' from consumable values.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection from which consumable will be consumed.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t * @returns {Boolean} `true` if consumable value was available and was consumed, `false` otherwise.\n\t */\n\tconsume( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tif ( this.test( item, type ) ) {\n\t\t\tthis._consumable.get( item ).set( type, false );\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Tests whether there is a consumable value of given type connected with given model item.\n\t *\n\t *\t\tmodelConsumable.test( modelElement, 'insert' ); // Check for `modelElement` insertion change.\n\t *\t\tmodelConsumable.test( modelElement, 'addAttribute:bold' ); // Check for `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.test( modelElement, 'removeAttribute:bold' ); // Check for `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.test( modelSelection, 'selection' ); // Check if `modelSelection` is consumable.\n\t *\t\tmodelConsumable.test( modelRange, 'range' ); // Check if `modelRange` is consumable.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection to be tested.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t * @returns {null|Boolean} `null` if such consumable was never added, `false` if the consumable values was\n\t * already consumed or `true` if it was added and not consumed yet.\n\t */\n\ttest( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tconst itemConsumables = this._consumable.get( item );\n\n\t\tif ( itemConsumables === undefined ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst value = itemConsumables.get( type );\n\n\t\tif ( value === undefined ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Reverts consuming of consumable value.\n\t *\n\t *\t\tmodelConsumable.revert( modelElement, 'insert' ); // Revert consuming `modelElement` insertion change.\n\t *\t\tmodelConsumable.revert( modelElement, 'addAttribute:bold' ); // Revert consuming `bold` attribute insert from `modelElement`.\n\t *\t\tmodelConsumable.revert( modelElement, 'removeAttribute:bold' ); // Revert consuming `bold` attribute remove from `modelElement`.\n\t *\t\tmodelConsumable.revert( modelSelection, 'selection' ); // Revert consuming `modelSelection`.\n\t *\t\tmodelConsumable.revert( modelRange, 'range' ); // Revert consuming `modelRange`.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection to be reverted.\n\t * @param {String} type Consumable type.\n\t * @returns {null|Boolean} `true` if consumable has been reversed, `false` otherwise. `null` if the consumable has\n\t * never been added.\n\t */\n\trevert( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tconst test = this.test( item, type );\n\n\t\tif ( test === false ) {\n\t\t\tthis._consumable.get( item ).set( type, true );\n\n\t\t\treturn true;\n\t\t} else if ( test === true ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets a unique symbol for passed {@link module:engine/model/textproxy~TextProxy} instance. All `TextProxy` instances that\n\t * have same parent, same start index and same end index will get the same symbol.\n\t *\n\t * Used internally to correctly consume `TextProxy` instances.\n\t *\n\t * @private\n\t * @param {module:engine/model/textproxy~TextProxy} textProxy `TextProxy` instance to get a symbol for.\n\t * @returns {Symbol} Symbol representing all equal instances of `TextProxy`.\n\t */\n\t_getSymbolForTextProxy( textProxy ) {\n\t\tlet symbol = null;\n\n\t\tconst startMap = this._textProxyRegistry.get( textProxy.startOffset );\n\n\t\tif ( startMap ) {\n\t\t\tconst endMap = startMap.get( textProxy.endOffset );\n\n\t\t\tif ( endMap ) {\n\t\t\t\tsymbol = endMap.get( textProxy.parent );\n\t\t\t}\n\t\t}\n\n\t\tif ( !symbol ) {\n\t\t\tsymbol = this._addSymbolForTextProxy( textProxy.startOffset, textProxy.endOffset, textProxy.parent );\n\t\t}\n\n\t\treturn symbol;\n\t}\n\n\t/**\n\t * Adds a symbol for given properties that characterizes a {@link module:engine/model/textproxy~TextProxy} instance.\n\t *\n\t * Used internally to correctly consume `TextProxy` instances.\n\t *\n\t * @private\n\t * @param {Number} startIndex Text proxy start index in it's parent.\n\t * @param {Number} endIndex Text proxy end index in it's parent.\n\t * @param {module:engine/model/element~Element} parent Text proxy parent.\n\t * @returns {Symbol} Symbol generated for given properties.\n\t */\n\t_addSymbolForTextProxy( start, end, parent ) {\n\t\tconst symbol = Symbol( 'textProxySymbol' );\n\t\tlet startMap, endMap;\n\n\t\tstartMap = this._textProxyRegistry.get( start );\n\n\t\tif ( !startMap ) {\n\t\t\tstartMap = new Map();\n\t\t\tthis._textProxyRegistry.set( start, startMap );\n\t\t}\n\n\t\tendMap = startMap.get( end );\n\n\t\tif ( !endMap ) {\n\t\t\tendMap = new Map();\n\t\t\tstartMap.set( end, endMap );\n\t\t}\n\n\t\tendMap.set( parent, symbol );\n\n\t\treturn symbol;\n\t}\n}\n\n// Returns a normalized consumable type name from given string. A normalized consumable type name is a string that has\n// at most one colon, for example: `insert` or `addMarker:highlight`. If string to normalize has more \"parts\" (more colons),\n// the other parts are dropped, for example: `addattribute:bold:$text` -> `addattributes:bold`.\n//\n// @param {String} type Consumable type.\n// @returns {String} Normalized consumable type.\nfunction _normalizeConsumableType( type ) {\n\tconst parts = type.split( ':' );\n\n\treturn parts.length > 1 ? parts[ 0 ] + ':' + parts[ 1 ] : parts[ 0 ];\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/downcastdispatcher\n */\n\nimport Consumable from './modelconsumable';\nimport Range from '../model/range';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { extend } from 'lodash-es';\n\n/**\n * `DowncastDispatcher` is a central point of downcasting (conversion from model to view), which is a process of reacting to changes\n * in the model and firing a set of events. Callbacks listening to those events are called converters. Those\n * converters role is to convert the model changes to changes in view (for example, adding view nodes or\n * changing attributes on view elements).\n *\n * During conversion process, `DowncastDispatcher` fires events, basing on state of the model and prepares\n * data for those events. It is important to understand that those events are connected with changes done on model,\n * for example: \"node has been inserted\" or \"attribute has changed\". This is in a contrary to upcasting (view to model conversion),\n * where we convert view state (view nodes) to a model tree.\n *\n * The events are prepared basing on a diff created by {@link module:engine/model/differ~Differ Differ}, which buffers them\n * and then passes to `DowncastDispatcher` as a diff between old model state and new model state.\n *\n * Note, that because changes are converted there is a need to have a mapping between model structure and view structure.\n * To map positions and elements during downcast (model to view conversion) use {@link module:engine/conversion/mapper~Mapper}.\n *\n * `DowncastDispatcher` fires following events for model tree changes:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert insert}\n * if a range of nodes has been inserted to the model tree,\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:remove remove}\n * if a range of nodes has been removed from the model tree,\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute attribute}\n * if attribute has been added, changed or removed from a model node.\n *\n * For {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert insert}\n * and {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute attribute},\n * `DowncastDispatcher` generates {@link module:engine/conversion/modelconsumable~ModelConsumable consumables}.\n * These are used to have a control over which changes has been already consumed. It is useful when some converters\n * overwrite other or converts multiple changes (for example converts insertion of an element and also converts that\n * element's attributes during insertion).\n *\n * Additionally, `DowncastDispatcher` fires events for {@link module:engine/model/markercollection~Marker marker} changes:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker} if a marker has been added,\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removeMarker} if a marker has been removed.\n *\n * Note, that changing a marker is done through removing the marker from the old range, and adding on the new range,\n * so both those events are fired.\n *\n * Finally, `DowncastDispatcher` also handles firing events for {@link module:engine/model/selection model selection}\n * conversion:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:selection}\n * which converts selection from model to view,\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute}\n * which is fired for every selection attribute,\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}\n * which is fired for every marker which contains selection.\n *\n * Unlike model tree and markers, events for selection are not fired for changes but for selection state.\n *\n * When providing custom listeners for `DowncastDispatcher` remember to check whether given change has not been\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed} yet.\n *\n * When providing custom listeners for `DowncastDispatcher` keep in mind that any callback that had\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed} a value from a consumable and\n * converted the change should also stop the event (for efficiency purposes).\n *\n * When providing custom listeners for `DowncastDispatcher` remember to use provided\n * {@link module:engine/view/downcastwriter~DowncastWriter view downcast writer} to apply changes to the view document.\n *\n * Example of a custom converter for `DowncastDispatcher`:\n *\n *\t\t// We will convert inserting \"paragraph\" model element into the model.\n *\t\tdowncastDispatcher.on( 'insert:paragraph', ( evt, data, conversionApi ) => {\n *\t\t\t// Remember to check whether the change has not been consumed yet and consume it.\n *\t\t\tif ( conversionApi.consumable.consume( data.item, 'insert' ) ) {\n *\t\t\t\treturn;\n *\t\t\t}\n *\n *\t\t\t// Translate position in model to position in view.\n *\t\t\tconst viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n *\n *\t\t\t// Create <p> element that will be inserted in view at `viewPosition`.\n *\t\t\tconst viewElement = conversionApi.writer.createContainerElement( 'p' );\n *\n *\t\t\t// Bind the newly created view element to model element so positions will map accordingly in future.\n *\t\t\tconversionApi.mapper.bindElements( data.item, viewElement );\n *\n *\t\t\t// Add the newly created view element to the view.\n *\t\t\tconversionApi.writer.insert( viewPosition, viewElement );\n *\n *\t\t\t// Remember to stop the event propagation.\n *\t\t\tevt.stop();\n *\t\t} );\n */\nexport default class DowncastDispatcher {\n\t/**\n\t * Creates a `DowncastDispatcher` instance.\n\t *\n\t * @see module:engine/conversion/downcastdispatcher~DowncastConversionApi\n\t * @param {Object} [conversionApi] Additional properties for interface that will be passed to events fired\n\t * by `DowncastDispatcher`.\n\t */\n\tconstructor( conversionApi = {} ) {\n\t\t/**\n\t\t * Interface passed by dispatcher to the events callbacks.\n\t\t *\n\t\t * @member {module:engine/conversion/downcastdispatcher~DowncastConversionApi}\n\t\t */\n\t\tthis.conversionApi = extend( { dispatcher: this }, conversionApi );\n\t}\n\n\t/**\n\t * Takes {@link module:engine/model/differ~Differ model differ} object with buffered changes and fires conversion basing on it.\n\t *\n\t * @param {module:engine/model/differ~Differ} differ Differ object with buffered changes.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertChanges( differ, writer ) {\n\t\t// Before the view is updated, remove markers which have changed.\n\t\tfor ( const change of differ.getMarkersToRemove() ) {\n\t\t\tthis.convertMarkerRemove( change.name, change.range, writer );\n\t\t}\n\n\t\t// Convert changes that happened on model tree.\n\t\tfor ( const entry of differ.getChanges() ) {\n\t\t\tif ( entry.type == 'insert' ) {\n\t\t\t\tthis.convertInsert( Range._createFromPositionAndShift( entry.position, entry.length ), writer );\n\t\t\t} else if ( entry.type == 'remove' ) {\n\t\t\t\tthis.convertRemove( entry.position, entry.length, entry.name, writer );\n\t\t\t} else {\n\t\t\t\t// entry.type == 'attribute'.\n\t\t\t\tthis.convertAttribute( entry.range, entry.attributeKey, entry.attributeOldValue, entry.attributeNewValue, writer );\n\t\t\t}\n\t\t}\n\n\t\t// After the view is updated, convert markers which have changed.\n\t\tfor ( const change of differ.getMarkersToAdd() ) {\n\t\t\tthis.convertMarkerAdd( change.name, change.range, writer );\n\t\t}\n\t}\n\n\t/**\n\t * Starts conversion of a range insertion.\n\t *\n\t * For each node in the range, {@link #event:insert insert event is fired}. For each attribute on each node,\n\t * {@link #event:attribute attribute event is fired}.\n\t *\n\t * @fires insert\n\t * @fires attribute\n\t * @param {module:engine/model/range~Range} range Inserted range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertInsert( range, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create a list of things that can be consumed, consisting of nodes and their attributes.\n\t\tthis.conversionApi.consumable = this._createInsertConsumable( range );\n\n\t\t// Fire a separate insert event for each node and text fragment contained in the range.\n\t\tfor ( const value of range ) {\n\t\t\tconst item = value.item;\n\t\t\tconst itemRange = Range._createFromPositionAndShift( value.previousPosition, value.length );\n\t\t\tconst data = {\n\t\t\t\titem,\n\t\t\t\trange: itemRange\n\t\t\t};\n\n\t\t\tthis._testAndFire( 'insert', data );\n\n\t\t\t// Fire a separate addAttribute event for each attribute that was set on inserted items.\n\t\t\t// This is important because most attributes converters will listen only to add/change/removeAttribute events.\n\t\t\t// If we would not add this part, attributes on inserted nodes would not be converted.\n\t\t\tfor ( const key of item.getAttributeKeys() ) {\n\t\t\t\tdata.attributeKey = key;\n\t\t\t\tdata.attributeOldValue = null;\n\t\t\t\tdata.attributeNewValue = item.getAttribute( key );\n\n\t\t\t\tthis._testAndFire( `attribute:${ key }`, data );\n\t\t\t}\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Fires conversion of a single node removal. Fires {@link #event:remove remove event} with provided data.\n\t *\n\t * @param {module:engine/model/position~Position} position Position from which node was removed.\n\t * @param {Number} length Offset size of removed node.\n\t * @param {String} name Name of removed node.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertRemove( position, length, name, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\tthis.fire( 'remove:' + name, { position, length }, this.conversionApi );\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Starts conversion of attribute change on given `range`.\n\t *\n\t * For each node in the given `range`, {@link #event:attribute attribute event} is fired with the passed data.\n\t *\n\t * @fires attribute\n\t * @param {module:engine/model/range~Range} range Changed range.\n\t * @param {String} key Key of the attribute that has changed.\n\t * @param {*} oldValue Attribute value before the change or `null` if the attribute has not been set before.\n\t * @param {*} newValue New attribute value or `null` if the attribute has been removed.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertAttribute( range, key, oldValue, newValue, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create a list with attributes to consume.\n\t\tthis.conversionApi.consumable = this._createConsumableForRange( range, `attribute:${ key }` );\n\n\t\t// Create a separate attribute event for each node in the range.\n\t\tfor ( const value of range ) {\n\t\t\tconst item = value.item;\n\t\t\tconst itemRange = Range._createFromPositionAndShift( value.previousPosition, value.length );\n\t\t\tconst data = {\n\t\t\t\titem,\n\t\t\t\trange: itemRange,\n\t\t\t\tattributeKey: key,\n\t\t\t\tattributeOldValue: oldValue,\n\t\t\t\tattributeNewValue: newValue\n\t\t\t};\n\n\t\t\tthis._testAndFire( `attribute:${ key }`, data );\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Starts model selection conversion.\n\t *\n\t * Fires events for given {@link module:engine/model/selection~Selection selection} to start selection conversion.\n\t *\n\t * @fires selection\n\t * @fires addMarker\n\t * @fires attribute\n\t * @param {module:engine/model/selection~Selection} selection Selection to convert.\n\t * @param {Array.<module:engine/model/markercollection~Marker>} markers Array of markers containing model markers.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertSelection( selection, markers, writer ) {\n\t\tconst markersAtSelection = Array.from( markers.getMarkersAtPosition( selection.getFirstPosition() ) );\n\n\t\tthis.conversionApi.writer = writer;\n\t\tthis.conversionApi.consumable = this._createSelectionConsumable( selection, markersAtSelection );\n\n\t\tthis.fire( 'selection', { selection }, this.conversionApi );\n\n\t\tif ( !selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const marker of markersAtSelection ) {\n\t\t\tconst markerRange = marker.getRange();\n\n\t\t\tif ( !shouldMarkerChangeBeConverted( selection.getFirstPosition(), marker, this.conversionApi.mapper ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst data = {\n\t\t\t\titem: selection,\n\t\t\t\tmarkerName: marker.name,\n\t\t\t\tmarkerRange\n\t\t\t};\n\n\t\t\tif ( this.conversionApi.consumable.test( selection, 'addMarker:' + marker.name ) ) {\n\t\t\t\tthis.fire( 'addMarker:' + marker.name, data, this.conversionApi );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of selection.getAttributeKeys() ) {\n\t\t\tconst data = {\n\t\t\t\titem: selection,\n\t\t\t\trange: selection.getFirstRange(),\n\t\t\t\tattributeKey: key,\n\t\t\t\tattributeOldValue: null,\n\t\t\t\tattributeNewValue: selection.getAttribute( key )\n\t\t\t};\n\n\t\t\t// Do not fire event if the attribute has been consumed.\n\t\t\tif ( this.conversionApi.consumable.test( selection, 'attribute:' + data.attributeKey ) ) {\n\t\t\t\tthis.fire( 'attribute:' + data.attributeKey + ':$text', data, this.conversionApi );\n\t\t\t}\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Converts added marker. Fires {@link #event:addMarker addMarker} event for each item\n\t * in marker's range. If range is collapsed single event is dispatched. See event description for more details.\n\t *\n\t * @fires addMarker\n\t * @param {String} markerName Marker name.\n\t * @param {module:engine/model/range~Range} markerRange Marker range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertMarkerAdd( markerName, markerRange, writer ) {\n\t\t// Do not convert if range is in graveyard or not in the document (e.g. in DocumentFragment).\n\t\tif ( !markerRange.root.document || markerRange.root.rootName == '$graveyard' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// In markers' case, event name == consumable name.\n\t\tconst eventName = 'addMarker:' + markerName;\n\n\t\t//\n\t\t// First, fire an event for the whole marker.\n\t\t//\n\t\tconst consumable = new Consumable();\n\t\tconsumable.add( markerRange, eventName );\n\n\t\tthis.conversionApi.consumable = consumable;\n\n\t\tthis.fire( eventName, { markerName, markerRange }, this.conversionApi );\n\n\t\t//\n\t\t// Do not fire events for each item inside the range if the range got consumed.\n\t\t//\n\t\tif ( !consumable.test( markerRange, eventName ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t//\n\t\t// Then, fire an event for each item inside the marker range.\n\t\t//\n\t\tthis.conversionApi.consumable = this._createConsumableForRange( markerRange, eventName );\n\n\t\tfor ( const item of markerRange.getItems() ) {\n\t\t\t// Do not fire event for already consumed items.\n\t\t\tif ( !this.conversionApi.consumable.test( item, eventName ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst data = { item, range: Range._createOn( item ), markerName, markerRange };\n\n\t\t\tthis.fire( eventName, data, this.conversionApi );\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Fires conversion of marker removal. Fires {@link #event:removeMarker removeMarker} event with provided data.\n\t *\n\t * @fires removeMarker\n\t * @param {String} markerName Marker name.\n\t * @param {module:engine/model/range~Range} markerRange Marker range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertMarkerRemove( markerName, markerRange, writer ) {\n\t\t// Do not convert if range is in graveyard or not in the document (e.g. in DocumentFragment).\n\t\tif ( !markerRange.root.document || markerRange.root.rootName == '$graveyard' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.conversionApi.writer = writer;\n\n\t\tthis.fire( 'removeMarker:' + markerName, { markerName, markerRange }, this.conversionApi );\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with values to consume from given range,\n\t * assuming that the range has just been inserted to the model.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range Inserted range.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} Values to consume.\n\t */\n\t_createInsertConsumable( range ) {\n\t\tconst consumable = new Consumable();\n\n\t\tfor ( const value of range ) {\n\t\t\tconst item = value.item;\n\n\t\t\tconsumable.add( item, 'insert' );\n\n\t\t\tfor ( const key of item.getAttributeKeys() ) {\n\t\t\t\tconsumable.add( item, 'attribute:' + key );\n\t\t\t}\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with values to consume for given range.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range Affected range.\n\t * @param {String} type Consumable type.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} Values to consume.\n\t */\n\t_createConsumableForRange( range, type ) {\n\t\tconst consumable = new Consumable();\n\n\t\tfor ( const item of range.getItems() ) {\n\t\t\tconsumable.add( item, type );\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with selection consumable values.\n\t *\n\t * @private\n\t * @param {module:engine/model/selection~Selection} selection Selection to create consumable from.\n\t * @param {Iterable.<module:engine/model/markercollection~Marker>} markers Markers which contains selection.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} Values to consume.\n\t */\n\t_createSelectionConsumable( selection, markers ) {\n\t\tconst consumable = new Consumable();\n\n\t\tconsumable.add( selection, 'selection' );\n\n\t\tfor ( const marker of markers ) {\n\t\t\tconsumable.add( selection, 'addMarker:' + marker.name );\n\t\t}\n\n\t\tfor ( const key of selection.getAttributeKeys() ) {\n\t\t\tconsumable.add( selection, 'attribute:' + key );\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Tests passed `consumable` to check whether given event can be fired and if so, fires it.\n\t *\n\t * @private\n\t * @fires insert\n\t * @fires attribute\n\t * @param {String} type Event type.\n\t * @param {Object} data Event data.\n\t */\n\t_testAndFire( type, data ) {\n\t\tif ( !this.conversionApi.consumable.test( data.item, type ) ) {\n\t\t\t// Do not fire event if the item was consumed.\n\t\t\treturn;\n\t\t}\n\n\t\tconst name = data.item.name || '$text';\n\n\t\tthis.fire( type + ':' + name, data, this.conversionApi );\n\t}\n\n\t/**\n\t * Clears conversion API object.\n\t *\n\t * @private\n\t */\n\t_clearConversionApi() {\n\t\tdelete this.conversionApi.writer;\n\t\tdelete this.conversionApi.consumable;\n\t}\n\n\t/**\n\t * Fired for inserted nodes.\n\t *\n\t * `insert` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `insert:name`. `name` is either `'$text'`, when {@link module:engine/model/text~Text a text node} has been inserted,\n\t * or {@link module:engine/model/element~Element#name name} of inserted element.\n\t *\n\t * This way listeners can either listen to a general `insert` event or specific event (for example `insert:paragraph`).\n\t *\n\t * @event insert\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item} data.item Inserted item.\n\t * @param {module:engine/model/range~Range} data.range Range spanning over inserted item.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired for removed nodes.\n\t *\n\t * `remove` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `remove:name`. `name` is either `'$text'`, when {@link module:engine/model/text~Text a text node} has been removed,\n\t * or the {@link module:engine/model/element~Element#name name} of removed element.\n\t *\n\t * This way listeners can either listen to a general `remove` event or specific event (for example `remove:paragraph`).\n\t *\n\t * @event remove\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/position~Position} data.position Position from which the node has been removed.\n\t * @param {Number} data.length Offset size of the removed node.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired in the following cases:\n\t *\n\t * * when an attribute has been added, changed, or removed from a node,\n\t * * when a node with an attribute is inserted,\n\t * * when collapsed model selection attribute is converted.\n\t *\n\t * `attribute` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `attribute:attributeKey:name`. `attributeKey` is the key of added/changed/removed attribute.\n\t * `name` is either `'$text'` if change was on {@link module:engine/model/text~Text a text node},\n\t * or the {@link module:engine/model/element~Element#name name} of element which attribute has changed.\n\t *\n\t * This way listeners can either listen to a general `attribute:bold` event or specific event (for example `attribute:src:image`).\n\t *\n\t * @event attribute\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item|module:engine/model/documentselection~DocumentSelection} data.item Changed item\n\t * or converted selection.\n\t * @param {module:engine/model/range~Range} data.range Range spanning over changed item or selection range.\n\t * @param {String} data.attributeKey Attribute key.\n\t * @param {*} data.attributeOldValue Attribute value before the change. This is `null` when selection attribute is converted.\n\t * @param {*} data.attributeNewValue New attribute value.\n\t * @param {module:engine/conversion/modelconsumable~ModelConsumable} consumable Values to consume.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired for {@link module:engine/model/selection~Selection selection} changes.\n\t *\n\t * @event selection\n\t * @param {module:engine/model/selection~Selection} selection Selection that is converted.\n\t * @param {module:engine/conversion/modelconsumable~ModelConsumable} consumable Values to consume.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired when a new marker is added to the model. Also fired when collapsed model selection that is inside marker is converted.\n\t *\n\t * `addMarker` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `addMarker:markerName`. By specifying certain marker names, you can make the events even more gradual. For example,\n\t * if markers are named `foo:abc`, `foo:bar`, then it is possible to listen to `addMarker:foo` or `addMarker:foo:abc` and\n\t * `addMarker:foo:bar` events.\n\t *\n\t * If the marker range is not collapsed:\n\t *\n\t * * the event is fired for each item in the marker range one by one,\n\t * * consumables object includes each item of the marker range and the consumable value is same as event name.\n\t *\n\t * If the marker range is collapsed:\n\t *\n\t * * there is only one event,\n\t * * consumables object includes marker range with event name.\n\t *\n\t * If selection inside a marker is converted:\n\t *\n\t * * there is only one event,\n\t * * consumables object includes selection instance with event name.\n\t *\n\t * @event addMarker\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection} data.item Item inside the new marker or\n\t * the selection that is being converted.\n\t * @param {module:engine/model/range~Range} [data.range] Range spanning over converted item. Available only in marker conversion, if\n\t * the marker range was not collapsed.\n\t * @param {module:engine/model/range~Range} data.markerRange Marker range.\n\t * @param {String} data.markerName Marker name.\n\t * @param {module:engine/conversion/modelconsumable~ModelConsumable} consumable Values to consume.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired when marker is removed from the model.\n\t *\n\t * `removeMarker` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `removeMarker:markerName`. By specifying certain marker names, you can make the events even more gradual. For example,\n\t * if markers are named `foo:abc`, `foo:bar`, then it is possible to listen to `removeMarker:foo` or `removeMarker:foo:abc` and\n\t * `removeMarker:foo:bar` events.\n\t *\n\t * @event removeMarker\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/range~Range} data.markerRange Marker range.\n\t * @param {String} data.markerName Marker name.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n}\n\nmix( DowncastDispatcher, EmitterMixin );\n\n// Helper function, checks whether change of `marker` at `modelPosition` should be converted. Marker changes are not\n// converted if they happen inside an element with custom conversion method.\n//\n// @param {module:engine/model/position~Position} modelPosition\n// @param {module:engine/model/markercollection~Marker} marker\n// @param {module:engine/conversion/mapper~Mapper} mapper\n// @returns {Boolean}\nfunction shouldMarkerChangeBeConverted( modelPosition, marker, mapper ) {\n\tconst range = marker.getRange();\n\tconst ancestors = Array.from( modelPosition.getAncestors() );\n\tancestors.shift(); // Remove root element. It cannot be passed to `model.Range#containsItem`.\n\tancestors.reverse();\n\n\tconst hasCustomHandling = ancestors.some( element => {\n\t\tif ( range.containsItem( element ) ) {\n\t\t\tconst viewElement = mapper.toViewElement( element );\n\n\t\t\treturn !!viewElement.getCustomProperty( 'addHighlight' );\n\t\t}\n\t} );\n\n\treturn !hasCustomHandling;\n}\n\n/**\n * Conversion interface that is registered for given {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}\n * and is passed as one of parameters when {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher dispatcher}\n * fires it's events.\n *\n * @interface module:engine/conversion/downcastdispatcher~DowncastConversionApi\n */\n\n/**\n * The {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} instance.\n *\n * @member {module:engine/conversion/downcastdispatcher~DowncastDispatcher} #dispatcher\n */\n\n/**\n * Stores information about what parts of processed model item are still waiting to be handled. After a piece of model item\n * was converted, appropriate consumable value should be {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed}.\n *\n * @member {module:engine/conversion/modelconsumable~ModelConsumable} #consumable\n */\n\n/**\n * The {@link module:engine/conversion/mapper~Mapper} instance.\n *\n * @member {module:engine/conversion/mapper~Mapper} #mapper\n */\n\n/**\n * The {@link module:engine/view/downcastwriter~DowncastWriter} instance used to manipulate data during conversion.\n *\n * @member {module:engine/view/downcastwriter~DowncastWriter} #writer\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/selection\n */\n\nimport Position from './position';\nimport Element from './element';\nimport Node from './node';\nimport Range from './range';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\n/**\n * Selection is a set of {@link module:engine/model/range~Range ranges}. It has a direction specified by its\n * {@link module:engine/model/selection~Selection#anchor anchor} and {@link module:engine/model/selection~Selection#focus focus}\n * (it can be {@link module:engine/model/selection~Selection#isBackward forward or backward}).\n * Additionally, selection may have its own attributes (think – whether text typed in in this selection\n * should have those attributes – e.g. whether you type a bolded text).\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Selection {\n\t/**\n\t * Creates a new selection instance based on the given {@link module:engine/model/selection~Selectable selectable}\n\t * or creates an empty selection if no arguments were passed.\n\t *\n\t *\t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the given document selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst documentSelection = model.document.selection;\n\t *\t\tconst selection = writer.createSelection( documentSelection );\n\t *\n\t *\t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates selection at the given offset in the given element.\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/model/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * Selection's constructor allow passing additional options (`'backward'`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\tconstructor( selectable, placeOrOffset, options ) {\n\t\t/**\n\t\t * Specifies whether the last added range was added as a backward or forward range.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._lastRangeBackward = false;\n\n\t\t/**\n\t\t * Stores selection ranges.\n\t\t *\n\t\t * @protected\n\t\t * @type {Array.<module:engine/model/range~Range>}\n\t\t */\n\t\tthis._ranges = [];\n\n\t\t/**\n\t\t * List of attributes set on current selection.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map.<String,*>}\n\t\t */\n\t\tthis._attrs = new Map();\n\n\t\tif ( selectable ) {\n\t\t\tthis.setTo( selectable, placeOrOffset, options );\n\t\t}\n\t}\n\n\t/**\n\t * Selection anchor. Anchor is the position from which the selection was started. If a user is making a selection\n\t * by dragging the mouse, the anchor is where the user pressed the mouse button (the beggining of the selection).\n\t *\n\t * Anchor and {@link #focus} define the direction of the selection, which is important\n\t * when expanding/shrinking selection. The focus moves, while the anchor should remain in the same place.\n\t *\n\t * Anchor is always set to the {@link module:engine/model/range~Range#start start} or\n\t * {@link module:engine/model/range~Range#end end} position of the last of selection's ranges. Whether it is\n\t * the `start` or `end` depends on the specified `options.backward`. See the {@link #setTo `setTo()`} method.\n\t *\n\t * May be set to `null` if there are no ranges in the selection.\n\t *\n\t * @see #focus\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget anchor() {\n\t\tif ( this._ranges.length > 0 ) {\n\t\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\n\t\t\treturn this._lastRangeBackward ? range.end : range.start;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Selection focus. Focus is the position where the selection ends. If a user is making a selection\n\t * by dragging the mouse, the focus is where the mouse cursor is.\n\t *\n\t * May be set to `null` if there are no ranges in the selection.\n\t *\n\t * @see #anchor\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget focus() {\n\t\tif ( this._ranges.length > 0 ) {\n\t\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\n\t\t\treturn this._lastRangeBackward ? range.start : range.end;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Whether the selection is collapsed. Selection is collapsed when there is exactly one range in it\n\t * and it is collapsed.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\tconst length = this._ranges.length;\n\n\t\tif ( length === 1 ) {\n\t\t\treturn this._ranges[ 0 ].isCollapsed;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the number of ranges in the selection.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._ranges.length;\n\t}\n\n\t/**\n\t * Specifies whether the selection's {@link #focus} precedes the selection's {@link #anchor}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn !this.isCollapsed && this._lastRangeBackward;\n\t}\n\n\t/**\n\t * Checks whether this selection is equal to the given selection. Selections are equal if they have the same directions,\n\t * the same number of ranges and all ranges from one selection equal to ranges from the another selection.\n\t *\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\tif ( this.rangeCount != otherSelection.rangeCount ) {\n\t\t\treturn false;\n\t\t} else if ( this.rangeCount === 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( !this.anchor.isEqual( otherSelection.anchor ) || !this.focus.isEqual( otherSelection.focus ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor ( const thisRange of this._ranges ) {\n\t\t\tlet found = false;\n\n\t\t\tfor ( const otherRange of otherSelection._ranges ) {\n\t\t\t\tif ( thisRange.isEqual( otherRange ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns an iterable object that iterates over copies of selection ranges.\n\t *\n\t * @returns {Iterable.<module:engine/model/range~Range>}\n\t */\n\t* getRanges() {\n\t\tfor ( const range of this._ranges ) {\n\t\t\tyield new Range( range.start, range.end );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a copy of the first range in the selection.\n\t * First range is the one which {@link module:engine/model/range~Range#start start} position\n\t * {@link module:engine/model/position~Position#isBefore is before} start position of all other ranges\n\t * (not to confuse with the first range added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\tlet first = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !first || range.start.isBefore( first.start ) ) {\n\t\t\t\tfirst = range;\n\t\t\t}\n\t\t}\n\n\t\treturn first ? new Range( first.start, first.end ) : null;\n\t}\n\n\t/**\n\t * Returns a copy of the last range in the selection.\n\t * Last range is the one which {@link module:engine/model/range~Range#end end} position\n\t * {@link module:engine/model/position~Position#isAfter is after} end position of all other ranges (not to confuse with the range most\n\t * recently added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\tlet last = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !last || range.end.isAfter( last.end ) ) {\n\t\t\t\tlast = range;\n\t\t\t}\n\t\t}\n\n\t\treturn last ? new Range( last.start, last.end ) : null;\n\t}\n\n\t/**\n\t * Returns the first position in the selection.\n\t * First position is the position that {@link module:engine/model/position~Position#isBefore is before}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\tconst first = this.getFirstRange();\n\n\t\treturn first ? first.start.clone() : null;\n\t}\n\n\t/**\n\t * Returns the last position in the selection.\n\t * Last position is the position that {@link module:engine/model/position~Position#isAfter is after}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\tconst lastRange = this.getLastRange();\n\n\t\treturn lastRange ? lastRange.end.clone() : null;\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/model/selection~Selectable selectable}.\n\t *\n\t *\t\t// Removes all selection's ranges.\n\t *\t\tselection.setTo( null );\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tselection.setTo( ranges );\n\t *\n\t *\t\t// Sets selection to other selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tselection.setTo( otherSelection );\n\t *\n\t *\t\t// Sets selection to the given document selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst documentSelection = new DocumentSelection( doc );\n\t *\t\tselection.setTo( documentSelection );\n\t *\n\t *\t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tselection.setTo( position );\n\t *\n\t *\t\t// Sets collapsed selection at the position of the given node and an offset.\n\t *\t\tselection.setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/model/element~Element element} which starts before the first child of\n \t * that element and ends after the last child of that element.\n\t *\n\t *\t\tselection.setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tselection.setTo( paragraph, 'on' );\n\t *\n\t * `Selection#setTo()`' method allow passing additional options (`backward`) as the last argument.\n\t *\n\t *\t\t// Sets backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\tsetTo( selectable, placeOrOffset, options ) {\n\t\tif ( selectable === null ) {\n\t\t\tthis._setRanges( [] );\n\t\t} else if ( selectable instanceof Selection ) {\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t} else if ( selectable && typeof selectable.getRanges == 'function' ) {\n\t\t\t// We assume that the selectable is a DocumentSelection.\n\t\t\t// It can't be imported here, because it would lead to circular imports.\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t} else if ( selectable instanceof Range ) {\n\t\t\tthis._setRanges( [ selectable ], !!placeOrOffset && !!placeOrOffset.backward );\n\t\t} else if ( selectable instanceof Position ) {\n\t\t\tthis._setRanges( [ new Range( selectable ) ] );\n\t\t} else if ( selectable instanceof Node ) {\n\t\t\tconst backward = !!options && !!options.backward;\n\t\t\tlet range;\n\n\t\t\tif ( placeOrOffset == 'in' ) {\n\t\t\t\trange = Range._createIn( selectable );\n\t\t\t} else if ( placeOrOffset == 'on' ) {\n\t\t\t\trange = Range._createOn( selectable );\n\t\t\t} else if ( placeOrOffset !== undefined ) {\n\t\t\t\trange = new Range( Position._createAt( selectable, placeOrOffset ) );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * selection.setTo requires the second parameter when the first parameter is a node.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-setTo-required-second-parameter\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-selection-setTo-required-second-parameter: ' +\n\t\t\t\t\t'selection.setTo requires the second parameter when the first parameter is a node.',\n\t\t\t\t\t[ this, selectable ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis._setRanges( [ range ], backward );\n\t\t} else if ( isIterable( selectable ) ) {\n\t\t\t// We assume that the selectable is an iterable of ranges.\n\t\t\tthis._setRanges( selectable, placeOrOffset && !!placeOrOffset.backward );\n\t\t} else {\n\t\t\t/**\n\t\t\t * Cannot set the selection to the given place.\n\t\t\t *\n\t\t\t * Invalid parameters were specified when setting the selection. Common issues:\n\t\t\t *\n\t\t\t * * A {@link module:engine/model/textproxy~TextProxy} instance was passed instead of\n\t\t\t * a real {@link module:engine/model/text~Text}.\n\t\t\t * * View nodes were passed instead of model nodes.\n\t\t\t * * `null`/`undefined` was passed.\n\t\t\t *\n\t\t\t * @error model-selection-setTo-not-selectable\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-selection-setTo-not-selectable: Cannot set the selection to the given place.',\n\t\t\t\t[ this, selectable ]\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Replaces all ranges that were added to the selection with given array of ranges. Last range of the array\n\t * is treated like the last added range and is used to set {@link module:engine/model/selection~Selection#anchor} and\n\t * {@link module:engine/model/selection~Selection#focus}. Accepts a flag describing in which direction the selection is made.\n\t *\n\t * @protected\n\t * @fires change:range\n\t * @param {Iterable.<module:engine/model/range~Range>} newRanges Ranges to set.\n\t * @param {Boolean} [isLastBackward=false] Flag describing if last added range was selected forward - from start to end (`false`)\n\t * or backward - from end to start (`true`).\n\t */\n\t_setRanges( newRanges, isLastBackward = false ) {\n\t\tnewRanges = Array.from( newRanges );\n\n\t\t// Check whether there is any range in new ranges set that is different than all already added ranges.\n\t\tconst anyNewRange = newRanges.some( newRange => {\n\t\t\tif ( !( newRange instanceof Range ) ) {\n\t\t\t\t/**\n\t\t\t\t * Selection range set to an object that is not an instance of {@link module:engine/model/range~Range}.\n\t\t\t\t *\n\t\t\t\t * Only {@link module:engine/model/range~Range} instances can be used to set a selection.\n\t\t\t\t * Common mistakes leading to this error are:\n\t\t\t\t *\n\t\t\t\t * * using DOM `Range` object,\n\t\t\t\t * * incorrect CKEditor 5 installation with multiple `ckeditor5-engine` packages having different versions.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-set-ranges-not-range\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-selection-set-ranges-not-range: ' +\n\t\t\t\t\t'Selection range set to an object that is not an instance of model.Range.',\n\t\t\t\t\t[ this, newRanges ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn this._ranges.every( oldRange => {\n\t\t\t\treturn !oldRange.isEqual( newRange );\n\t\t\t} );\n\t\t} );\n\n\t\t// Don't do anything if nothing changed.\n\t\tif ( newRanges.length === this._ranges.length && !anyNewRange ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._removeAllRanges();\n\n\t\tfor ( const range of newRanges ) {\n\t\t\tthis._pushRange( range );\n\t\t}\n\n\t\tthis._lastRangeBackward = !!isLastBackward;\n\n\t\tthis.fire( 'change:range', { directChange: true } );\n\t}\n\n\t/**\n\t * Moves {@link module:engine/model/selection~Selection#focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as\n\t * {@link module:engine/model/writer~Writer#createPositionAt writer.createPositionAt()} parameters.\n\t *\n\t * @fires change:range\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tsetFocus( itemOrPosition, offset ) {\n\t\tif ( this.anchor === null ) {\n\t\t\t/**\n\t\t\t * Cannot set selection focus if there are no ranges in selection.\n\t\t\t *\n\t\t\t * @error model-selection-setFocus-no-ranges\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.',\n\t\t\t\t[ this, itemOrPosition ]\n\t\t\t);\n\t\t}\n\n\t\tconst newFocus = Position._createAt( itemOrPosition, offset );\n\n\t\tif ( newFocus.compareWith( this.focus ) == 'same' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst anchor = this.anchor;\n\n\t\tif ( this._ranges.length ) {\n\t\t\tthis._popRange();\n\t\t}\n\n\t\tif ( newFocus.compareWith( anchor ) == 'before' ) {\n\t\t\tthis._pushRange( new Range( newFocus, anchor ) );\n\t\t\tthis._lastRangeBackward = true;\n\t\t} else {\n\t\t\tthis._pushRange( new Range( anchor, newFocus ) );\n\t\t\tthis._lastRangeBackward = false;\n\t\t}\n\n\t\tthis.fire( 'change:range', { directChange: true } );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on the selection.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._attrs.entries();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._attrs.keys();\n\t}\n\n\t/**\n\t * Checks if the selection has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on selection, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the selection.\n\t *\n\t * If given attribute was set on the selection, fires the {@link #event:change:range} event with\n\t * removed attribute key.\n\t *\n\t * @fires change:attribute\n\t * @param {String} key Key of attribute to remove.\n\t */\n\tremoveAttribute( key ) {\n\t\tif ( this.hasAttribute( key ) ) {\n\t\t\tthis._attrs.delete( key );\n\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: [ key ], directChange: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Sets attribute on the selection. If attribute with the same key already is set, it's value is overwritten.\n\t *\n\t * If the attribute value has changed, fires the {@link #event:change:range} event with\n\t * the attribute key.\n\t *\n\t * @fires change:attribute\n\t * @param {String} key Key of attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\tsetAttribute( key, value ) {\n\t\tif ( this.getAttribute( key ) !== value ) {\n\t\t\tthis._attrs.set( key, value );\n\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: [ key ], directChange: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/model/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\tif ( this.rangeCount !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst range = this.getFirstRange();\n\t\tconst nodeAfterStart = range.start.nodeAfter;\n\t\tconst nodeBeforeEnd = range.end.nodeBefore;\n\n\t\treturn ( nodeAfterStart instanceof Element && nodeAfterStart == nodeBeforeEnd ) ? nodeAfterStart : null;\n\t}\n\n\t/**\n\t * Checks whether object is of given type following the convention set by\n\t * {@link module:engine/model/node~Node#is `Node#is()`}.\n\t *\n\t *\t\tconst selection = new Selection( ... );\n\t *\n\t *\t\tselection.is( 'selection' ); // true\n\t *\t\tselection.is( 'node' ); // false\n\t *\t\tselection.is( 'element' ); // false\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'selection';\n\t}\n\n\t/**\n\t * Gets elements of type \"block\" touched by the selection.\n\t *\n\t * This method's result can be used for example to apply block styling to all blocks covered by this selection.\n\t *\n\t * **Note:** `getSelectedBlocks()` always returns the deepest block.\n\t *\n\t * In this case the function will return exactly all 3 paragraphs:\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<quote>\n\t *\t\t\t<paragraph>b</paragraph>\n\t *\t\t</quote>\n\t *\t\t<paragraph>c]d</paragraph>\n\t *\n\t * In this case the paragraph will also be returned, despite the collapsed selection:\n\t *\n\t *\t\t<paragraph>[]a</paragraph>\n\t *\n\t * **Special case**: If a selection ends at the beginning of a block, that block is not returned as from user perspective\n\t * this block wasn't selected. See [#984](https://github.com/ckeditor/ckeditor5-engine/issues/984) for more details.\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<paragraph>b</paragraph>\n\t *\t\t<paragraph>]c</paragraph> // this block will not be returned\n\t *\n\t * @returns {Iterable.<module:engine/model/element~Element>}\n\t */\n\t* getSelectedBlocks() {\n\t\tconst visited = new WeakSet();\n\n\t\tfor ( const range of this.getRanges() ) {\n\t\t\tconst startBlock = getParentBlock( range.start, visited );\n\n\t\t\tif ( startBlock ) {\n\t\t\t\tyield startBlock;\n\t\t\t}\n\n\t\t\tfor ( const value of range.getWalker() ) {\n\t\t\t\tif ( value.type == 'elementEnd' && isUnvisitedBlockContainer( value.item, visited ) ) {\n\t\t\t\t\tyield value.item;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst endBlock = getParentBlock( range.end, visited );\n\n\t\t\t// #984. Don't return the end block if the range ends right at its beginning.\n\t\t\tif ( endBlock && !range.end.isTouching( Position._createAt( endBlock, 0 ) ) ) {\n\t\t\t\tyield endBlock;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns blocks that aren't nested in other selected blocks.\n\t *\n\t * In this case the method will return blocks A, B and E because C & D are children of block B:\n\t *\n\t *\t\t[<blockA></blockA>\n\t *\t\t<blockB>\n\t *\t\t\t<blockC></blockC>\n\t *\t\t\t<blockD></blockD>\n\t *\t\t</blockB>\n\t *\t\t<blockE></blockE>]\n\t *\n\t * **Note:** To get all selected blocks use {@link #getSelectedBlocks `getSelectedBlocks()`}.\n\t *\n\t * @returns {Iterable.<module:engine/model/element~Element>}\n\t */\n\t* getTopMostBlocks() {\n\t\tconst selected = Array.from( this.getSelectedBlocks() );\n\n\t\tfor ( const block of selected ) {\n\t\t\tconst parentBlock = findAncestorBlock( block );\n\n\t\t\t// Filter out blocks that are nested in other selected blocks (like paragraphs in tables).\n\t\t\tif ( !parentBlock || !selected.includes( parentBlock ) ) {\n\t\t\t\tyield block;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether the selection contains the entire content of the given element. This means that selection must start\n\t * at a position {@link module:engine/model/position~Position#isTouching touching} the element's start and ends at position\n\t * touching the element's end.\n\t *\n\t * By default, this method will check whether the entire content of the selection's current root is selected.\n\t * Useful to check if e.g. the user has just pressed <kbd>Ctrl</kbd> + <kbd>A</kbd>.\n\t *\n\t * @param {module:engine/model/element~Element} [element=this.anchor.root]\n\t * @returns {Boolean}\n\t */\n\tcontainsEntireContent( element = this.anchor.root ) {\n\t\tconst limitStartPosition = Position._createAt( element, 0 );\n\t\tconst limitEndPosition = Position._createAt( element, 'end' );\n\n\t\treturn limitStartPosition.isTouching( this.getFirstPosition() ) &&\n\t\t\tlimitEndPosition.isTouching( this.getLastPosition() );\n\t}\n\n\t/**\n\t * Adds given range to internal {@link #_ranges ranges array}. Throws an error\n\t * if given range is intersecting with any range that is already stored in this selection.\n\t *\n\t * @protected\n\t * @param {module:engine/model/range~Range} range Range to add.\n\t */\n\t_pushRange( range ) {\n\t\tthis._checkRange( range );\n\t\tthis._ranges.push( new Range( range.start, range.end ) );\n\t}\n\n\t/**\n\t * Checks if given range intersects with ranges that are already in the selection. Throws an error if it does.\n\t *\n\t * @protected\n\t * @param {module:engine/model/range~Range} range Range to check.\n\t */\n\t_checkRange( range ) {\n\t\tfor ( let i = 0; i < this._ranges.length; i++ ) {\n\t\t\tif ( range.isIntersecting( this._ranges[ i ] ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to add a range that intersects with another range in the selection.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-range-intersects\n\t\t\t\t * @param {module:engine/model/range~Range} addedRange Range that was added to the selection.\n\t\t\t\t * @param {module:engine/model/range~Range} intersectingRange Range in the selection that intersects with `addedRange`.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.',\n\t\t\t\t\t[ this, range ],\n\t\t\t\t\t{ addedRange: range, intersectingRange: this._ranges[ i ] }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Deletes ranges from internal range array. Uses {@link #_popRange _popRange} to\n\t * ensure proper ranges removal.\n\t *\n\t * @protected\n\t */\n\t_removeAllRanges() {\n\t\twhile ( this._ranges.length > 0 ) {\n\t\t\tthis._popRange();\n\t\t}\n\t}\n\n\t/**\n\t * Removes most recently added range from the selection.\n\t *\n\t * @protected\n\t */\n\t_popRange() {\n\t\tthis._ranges.pop();\n\t}\n\n\t/**\n\t * Fired when selection range(s) changed.\n\t *\n\t * @event change:range\n\t * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n\t * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n\t * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its position\n\t * was directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n\t * changed because the structure of the model has been changed (which means an indirect change).\n\t * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n\t * which mean that they are not updated once the document changes.\n\t */\n\n\t/**\n\t * Fired when selection attribute changed.\n\t *\n\t * @event change:attribute\n\t * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n\t * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n\t * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its attributes\n\t * were directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n\t * changed in the model and its attributes were refreshed (which means an indirect change).\n\t * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n\t * which mean that they are not updated once the document changes.\n\t * @param {Array.<String>} attributeKeys Array containing keys of attributes that changed.\n\t */\n}\n\nmix( Selection, EmitterMixin );\n\n// Checks whether the given element extends $block in the schema and has a parent (is not a root).\n// Marks it as already visited.\nfunction isUnvisitedBlockContainer( element, visited ) {\n\tif ( visited.has( element ) ) {\n\t\treturn false;\n\t}\n\n\tvisited.add( element );\n\n\treturn element.document.model.schema.isBlock( element ) && element.parent;\n}\n\n// Finds the lowest element in position's ancestors which is a block.\n// It will search until first ancestor that is a limit element.\n// Marks all ancestors as already visited to not include any of them later on.\nfunction getParentBlock( position, visited ) {\n\tconst schema = position.parent.document.model.schema;\n\n\tconst ancestors = position.parent.getAncestors( { parentFirst: true, includeSelf: true } );\n\n\tlet hasParentLimit = false;\n\n\tconst block = ancestors.find( element => {\n\t\t// Stop searching after first parent node that is limit element.\n\t\tif ( hasParentLimit ) {\n\t\t\treturn false;\n\t\t}\n\n\t\thasParentLimit = schema.isLimit( element );\n\n\t\treturn !hasParentLimit && isUnvisitedBlockContainer( element, visited );\n\t} );\n\n\t// Mark all ancestors of this position's parent, because find() might've stopped early and\n\t// the found block may be a child of another block.\n\tancestors.forEach( element => visited.add( element ) );\n\n\treturn block;\n}\n\n// Returns first ancestor block of a node.\n//\n// @param {module:engine/model/node~Node} node\n// @returns {module:engine/model/node~Node|undefined}\nfunction findAncestorBlock( node ) {\n\tconst schema = node.document.model.schema;\n\n\tlet parent = node.parent;\n\n\twhile ( parent ) {\n\t\tif ( schema.isBlock( parent ) ) {\n\t\t\treturn parent;\n\t\t}\n\n\t\tparent = parent.parent;\n\t}\n}\n\n/**\n * An entity that is used to set selection.\n *\n * See also {@link module:engine/model/selection~Selection#setTo}\n *\n * @typedef {\n *     module:engine/model/selection~Selection|\n *     module:engine/model/documentselection~DocumentSelection|\n *     module:engine/model/position~Position|\n *     module:engine/model/range~Range|\n *     module:engine/model/node~Node|\n *     Iterable.<module:engine/model/range~Range>|\n *     null\n * } module:engine/model/selection~Selectable\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/documentselection\n */\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\nimport Selection from './selection';\nimport LiveRange from './liverange';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\n\nconst storePrefix = 'selection:';\n\n/**\n * `DocumentSelection` is a special selection which is used as the\n * {@link module:engine/model/document~Document#selection document's selection}.\n * There can be only one instance of `DocumentSelection` per document.\n *\n * Document selection can only be changed by using the {@link module:engine/model/writer~Writer} instance\n * inside the {@link module:engine/model/model~Model#change `change()`} block, as it provides a secure way to modify model.\n *\n * `DocumentSelection` is automatically updated upon changes in the {@link module:engine/model/document~Document document}\n * to always contain valid ranges. Its attributes are inherited from the text unless set explicitly.\n *\n * Differences between {@link module:engine/model/selection~Selection} and `DocumentSelection` are:\n * * there is always a range in `DocumentSelection` - even if no ranges were added there is a \"default range\"\n * present in the selection,\n * * ranges added to this selection updates automatically when the document changes,\n * * attributes of `DocumentSelection` are updated automatically according to selection ranges.\n *\n * Since `DocumentSelection` uses {@link module:engine/model/liverange~LiveRange live ranges}\n * and is updated when {@link module:engine/model/document~Document document}\n * changes, it cannot be set on {@link module:engine/model/node~Node nodes}\n * that are inside {@link module:engine/model/documentfragment~DocumentFragment document fragment}.\n * If you need to represent a selection in document fragment,\n * use {@link module:engine/model/selection~Selection Selection class} instead.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class DocumentSelection {\n\t/**\n\t * Creates an empty live selection for given {@link module:engine/model/document~Document}.\n\t *\n\t * @param {module:engine/model/document~Document} doc Document which owns this selection.\n\t */\n\tconstructor( doc ) {\n\t\t/**\n\t\t * Selection used internally by that class (`DocumentSelection` is a proxy to that selection).\n\t\t *\n\t\t * @protected\n\t\t */\n\t\tthis._selection = new LiveSelection( doc );\n\n\t\tthis._selection.delegate( 'change:range' ).to( this );\n\t\tthis._selection.delegate( 'change:attribute' ).to( this );\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this._selection.isCollapsed;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the most recent part of the selection starts.\n\t * Together with {@link #focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always {@link module:engine/model/range~Range#start start} or\n\t * {@link module:engine/model/range~Range#end end} position of the most recently added range.\n\t *\n\t * Is set to `null` if there are no ranges in selection.\n\t *\n\t * @see #focus\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget anchor() {\n\t\treturn this._selection.anchor;\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * Is set to `null` if there are no ranges in selection.\n\t *\n\t * @see #anchor\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget focus() {\n\t\treturn this._selection.focus;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._selection.rangeCount;\n\t}\n\n\t/**\n\t * Describes whether `Documentselection` has own range(s) set, or if it is defaulted to\n\t * {@link module:engine/model/document~Document#_getDefaultRange document's default range}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget hasOwnRange() {\n\t\treturn this._selection.hasOwnRange;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus}\n\t * precedes {@link #anchor}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn this._selection.isBackward;\n\t}\n\n\t/**\n\t * Describes whether the gravity is overridden (using {@link module:engine/model/writer~Writer#overrideSelectionGravity}) or not.\n\t *\n\t * Note that the gravity remains overridden as long as will not be restored the same number of times as it was overridden.\n\t *\n\t * @readonly\n\t * @returns {Boolean}\n\t */\n\tget isGravityOverridden() {\n\t\treturn this._selection.isGravityOverridden;\n\t}\n\n\t/**\n\t * A collection of selection markers.\n\t * Marker is a selection marker when selection range is inside the marker range.\n\t *\n\t * @readonly\n\t * @type {module:utils/collection~Collection.<module:engine/model/markercollection~Marker>}\n\t */\n\tget markers() {\n\t\treturn this._selection.markers;\n\t}\n\n\t/**\n\t * Used for the compatibility with the {@link module:engine/model/selection~Selection#isEqual} method.\n\t *\n\t * @protected\n\t */\n\tget _ranges() {\n\t\treturn this._selection._ranges;\n\t}\n\n\t/**\n\t * Returns an iterable that iterates over copies of selection ranges.\n\t *\n\t * @returns {Iterable.<module:engine/model/range~Range>}\n\t */\n\tgetRanges() {\n\t\treturn this._selection.getRanges();\n\t}\n\n\t/**\n\t * Returns the first position in the selection.\n\t * First position is the position that {@link module:engine/model/position~Position#isBefore is before}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\treturn this._selection.getFirstPosition();\n\t}\n\n\t/**\n\t * Returns the last position in the selection.\n\t * Last position is the position that {@link module:engine/model/position~Position#isAfter is after}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\treturn this._selection.getLastPosition();\n\t}\n\n\t/**\n\t * Returns a copy of the first range in the selection.\n\t * First range is the one which {@link module:engine/model/range~Range#start start} position\n\t * {@link module:engine/model/position~Position#isBefore is before} start position of all other ranges\n\t * (not to confuse with the first range added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\treturn this._selection.getFirstRange();\n\t}\n\n\t/**\n\t * Returns a copy of the last range in the selection.\n\t * Last range is the one which {@link module:engine/model/range~Range#end end} position\n\t * {@link module:engine/model/position~Position#isAfter is after} end position of all other ranges (not to confuse with the range most\n\t * recently added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\treturn this._selection.getLastRange();\n\t}\n\n\t/**\n\t * Gets elements of type \"block\" touched by the selection.\n\t *\n\t * This method's result can be used for example to apply block styling to all blocks covered by this selection.\n\t *\n\t * **Note:** `getSelectedBlocks()` always returns the deepest block.\n\t *\n\t * In this case the function will return exactly all 3 paragraphs:\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<quote>\n\t *\t\t\t<paragraph>b</paragraph>\n\t *\t\t</quote>\n\t *\t\t<paragraph>c]d</paragraph>\n\t *\n\t * In this case the paragraph will also be returned, despite the collapsed selection:\n\t *\n\t *\t\t<paragraph>[]a</paragraph>\n\t *\n\t * **Special case**: If a selection ends at the beginning of a block, that block is not returned as from user perspective\n\t * this block wasn't selected. See [#984](https://github.com/ckeditor/ckeditor5-engine/issues/984) for more details.\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<paragraph>b</paragraph>\n\t *\t\t<paragraph>]c</paragraph> // this block will not be returned\n\t *\n\t * @returns {Iterable.<module:engine/model/element~Element>}\n\t */\n\tgetSelectedBlocks() {\n\t\treturn this._selection.getSelectedBlocks();\n\t}\n\n\t/**\n\t * Returns blocks that aren't nested in other selected blocks.\n\t *\n\t * In this case the method will return blocks A, B and E because C & D are children of block B:\n\t *\n\t *\t\t[<blockA></blockA>\n\t *\t\t<blockB>\n\t *\t\t\t<blockC></blockC>\n\t *\t\t\t<blockD></blockD>\n\t *\t\t</blockB>\n\t *\t\t<blockE></blockE>]\n\t *\n\t * **Note:** To get all selected blocks use {@link #getSelectedBlocks `getSelectedBlocks()`}.\n\t *\n\t * @returns {Iterable.<module:engine/model/element~Element>}\n\t */\n\tgetTopMostBlocks() {\n\t\treturn this._selection.getTopMostBlocks();\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/model/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\treturn this._selection.getSelectedElement();\n\t}\n\n\t/**\n\t * Checks whether the selection contains the entire content of the given element. This means that selection must start\n\t * at a position {@link module:engine/model/position~Position#isTouching touching} the element's start and ends at position\n\t * touching the element's end.\n\t *\n\t * By default, this method will check whether the entire content of the selection's current root is selected.\n\t * Useful to check if e.g. the user has just pressed <kbd>Ctrl</kbd> + <kbd>A</kbd>.\n\t *\n\t * @param {module:engine/model/element~Element} [element=this.anchor.root]\n\t * @returns {Boolean}\n\t */\n\tcontainsEntireContent( element ) {\n\t\treturn this._selection.containsEntireContent( element );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by document selection.\n\t */\n\tdestroy() {\n\t\tthis._selection.destroy();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._selection.getAttributeKeys();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._selection.getAttributes();\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on the selection.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._selection.getAttribute( key );\n\t}\n\n\t/**\n\t * Checks if the selection has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on selection, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._selection.hasAttribute( key );\n\t}\n\n\t/**\n\t * Refreshes selection attributes and markers according to the current position in the model.\n\t */\n\trefresh() {\n\t\tthis._selection._updateMarkers();\n\t\tthis._selection._updateAttributes( false );\n\t}\n\n\t/**\n\t * Checks whether object is of given type following the convention set by\n\t * {@link module:engine/model/node~Node#is `Node#is()`}.\n\t *\n\t *\t\tconst selection = new DocumentSelection( ... );\n\t *\n\t *\t\tselection.is( 'selection' ); // true\n\t *\t\tselection.is( 'documentSelection' ); // true\n\t *\t\tselection.is( 'node' ); // false\n\t *\t\tselection.is( 'element' ); // false\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'selection' || type == 'documentSelection';\n\t}\n\n\t/**\n\t * Moves {@link module:engine/model/documentselection~DocumentSelection#focus} to the specified location.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelectionFocus} method.\n\t *\n\t * The location can be specified in the same form as\n\t * {@link module:engine/model/writer~Writer#createPositionAt writer.createPositionAt()} parameters.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelectionFocus\n\t * @protected\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\t_setFocus( itemOrPosition, offset ) {\n\t\tthis._selection.setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/model/selection~Selectable selectable}.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelection} method.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelection\n\t * @protected\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\t_setTo( selectable, placeOrOffset, options ) {\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Sets attribute on the selection. If attribute with the same key already is set, it's value is overwritten.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelectionAttribute} method.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelectionAttribute\n\t * @protected\n\t * @param {String} key Key of the attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\t_setAttribute( key, value ) {\n\t\tthis._selection.setAttribute( key, value );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the selection.\n\t * If the given attribute was set on the selection, fires the {@link module:engine/model/selection~Selection#event:change:range}\n\t * event with removed attribute key.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#removeSelectionAttribute} method.\n\t *\n\t * @see module:engine/model/writer~Writer#removeSelectionAttribute\n\t * @protected\n\t * @param {String} key Key of the attribute to remove.\n\t */\n\t_removeAttribute( key ) {\n\t\tthis._selection.removeAttribute( key );\n\t}\n\n\t/**\n\t * Returns an iterable that iterates through all selection attributes stored in current selection's parent.\n\t *\n\t * @protected\n\t * @returns {Iterable.<*>}\n\t */\n\t_getStoredAttributes() {\n\t\treturn this._selection._getStoredAttributes();\n\t}\n\n\t/**\n\t * Temporarily changes the gravity of the selection from the left to the right.\n\t *\n\t * The gravity defines from which direction the selection inherits its attributes. If it's the default left\n\t * gravity, the selection (after being moved by the the user) inherits attributes from its left hand side.\n\t * This method allows to temporarily override this behavior by forcing the gravity to the right.\n\t *\n\t * It returns an unique identifier which is required to restore the gravity. It guarantees the symmetry\n\t * of the process.\n\t *\n\t * @see module:engine/model/writer~Writer#overrideSelectionGravity\n\t * @protected\n\t * @returns {String} The unique id which allows restoring the gravity.\n\t */\n\t_overrideGravity() {\n\t\treturn this._selection.overrideGravity();\n\t}\n\n\t/**\n\t * Restores the {@link ~DocumentSelection#_overrideGravity overridden gravity}.\n\t *\n\t * Restoring the gravity is only possible using the unique identifier returned by\n\t * {@link ~DocumentSelection#_overrideGravity}. Note that the gravity remains overridden as long as won't be restored\n\t * the same number of times it was overridden.\n\t *\n\t * @see module:engine/model/writer~Writer#restoreSelectionGravity\n\t * @protected\n\t * @param {String} uid The unique id returned by {@link #_overrideGravity}.\n\t */\n\t_restoreGravity( uid ) {\n\t\tthis._selection.restoreGravity( uid );\n\t}\n\n\t/**\n\t * Generates and returns an attribute key for selection attributes store, basing on original attribute key.\n\t *\n\t * @protected\n\t * @param {String} key Attribute key to convert.\n\t * @returns {String} Converted attribute key, applicable for selection store.\n\t */\n\tstatic _getStoreAttributeKey( key ) {\n\t\treturn storePrefix + key;\n\t}\n\n\t/**\n\t * Checks whether the given attribute key is an attribute stored on an element.\n\t *\n\t * @protected\n\t * @param {String} key\n\t * @returns {Boolean}\n\t */\n\tstatic _isStoreAttributeKey( key ) {\n\t\treturn key.startsWith( storePrefix );\n\t}\n}\n\nmix( DocumentSelection, EmitterMixin );\n\n/**\n * Fired when selection range(s) changed.\n *\n * @event change:range\n * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its position\n * was directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n * changed because the structure of the model has been changed (which means an indirect change).\n * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n * which mean that they are not updated once the document changes.\n */\n\n/**\n * Fired when selection attribute changed.\n *\n * @event change:attribute\n * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its attributes\n * were directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n * changed in the model and its attributes were refreshed (which means an indirect change).\n * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n * which mean that they are not updated once the document changes.\n * @param {Array.<String>} attributeKeys Array containing keys of attributes that changed.\n */\n\n// `LiveSelection` is used internally by {@link module:engine/model/documentselection~DocumentSelection} and shouldn't be used directly.\n//\n// LiveSelection` is automatically updated upon changes in the {@link module:engine/model/document~Document document}\n// to always contain valid ranges. Its attributes are inherited from the text unless set explicitly.\n//\n// Differences between {@link module:engine/model/selection~Selection} and `LiveSelection` are:\n// * there is always a range in `LiveSelection` - even if no ranges were added there is a \"default range\"\n// present in the selection,\n// * ranges added to this selection updates automatically when the document changes,\n// * attributes of `LiveSelection` are updated automatically according to selection ranges.\n//\n// @extends module:engine/model/selection~Selection\n//\n\nclass LiveSelection extends Selection {\n\t// Creates an empty live selection for given {@link module:engine/model/document~Document}.\n\t// @param {module:engine/model/document~Document} doc Document which owns this selection.\n\tconstructor( doc ) {\n\t\tsuper();\n\n\t\t// List of selection markers.\n\t\t// Marker is a selection marker when selection range is inside the marker range.\n\t\t//\n\t\t// @type {module:utils/collection~Collection}\n\t\tthis.markers = new Collection( { idProperty: 'name' } );\n\n\t\t// Document which owns this selection.\n\t\t//\n\t\t// @protected\n\t\t// @member {module:engine/model/model~Model}\n\t\tthis._model = doc.model;\n\n\t\t// Document which owns this selection.\n\t\t//\n\t\t// @protected\n\t\t// @member {module:engine/model/document~Document}\n\t\tthis._document = doc;\n\n\t\t// Keeps mapping of attribute name to priority with which the attribute got modified (added/changed/removed)\n\t\t// last time. Possible values of priority are: `'low'` and `'normal'`.\n\t\t//\n\t\t// Priorities are used by internal `LiveSelection` mechanisms. All attributes set using `LiveSelection`\n\t\t// attributes API are set with `'normal'` priority.\n\t\t//\n\t\t// @private\n\t\t// @member {Map} module:engine/model/liveselection~LiveSelection#_attributePriority\n\t\tthis._attributePriority = new Map();\n\n\t\t// Contains data required to fix ranges which have been moved to the graveyard.\n\t\t// @private\n\t\t// @member {Array} module:engine/model/liveselection~LiveSelection#_fixGraveyardRangesData\n\t\tthis._fixGraveyardRangesData = [];\n\n\t\t// Flag that informs whether the selection ranges have changed. It is changed on true when `LiveRange#change:range` event is fired.\n\t\t// @private\n\t\t// @member {Array} module:engine/model/liveselection~LiveSelection#_hasChangedRange\n\t\tthis._hasChangedRange = false;\n\n\t\t// Each overriding gravity adds an UID to the set and each removal removes it.\n\t\t// Gravity is overridden when there's at least one UID in the set.\n\t\t// Gravity is restored when the set is empty.\n\t\t// This is to prevent conflicts when gravity is overridden by more than one feature at the same time.\n\t\t// @private\n\t\t// @type {Set}\n\t\tthis._overriddenGravityRegister = new Set();\n\n\t\t// Ensure selection is correct after each operation.\n\t\tthis.listenTo( this._model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation || operation.type == 'marker' || operation.type == 'rename' || operation.type == 'noop' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twhile ( this._fixGraveyardRangesData.length ) {\n\t\t\t\tconst { liveRange, sourcePosition } = this._fixGraveyardRangesData.shift();\n\n\t\t\t\tthis._fixGraveyardSelection( liveRange, sourcePosition );\n\t\t\t}\n\n\t\t\tif ( this._hasChangedRange ) {\n\t\t\t\tthis._hasChangedRange = false;\n\t\t\t\tthis.fire( 'change:range', { directChange: false } );\n\t\t\t}\n\t\t}, { priority: 'lowest' } );\n\n\t\t// Ensure selection is correct and up to date after each range change.\n\t\tthis.on( 'change:range', () => {\n\t\t\tfor ( const range of this.getRanges() ) {\n\t\t\t\tif ( !this._document._validateSelectionRange( range ) ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Range from {@link module:engine/model/documentselection~DocumentSelection document selection}\n\t\t\t\t\t * starts or ends at incorrect position.\n\t\t\t\t\t *\n\t\t\t\t\t * @error document-selection-wrong-position\n\t\t\t\t\t * @param {module:engine/model/range~Range} range\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t'document-selection-wrong-position: Range from document selection starts or ends at incorrect position.',\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t{ range }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// Update markers data stored by the selection after each marker change.\n\t\tthis.listenTo( this._model.markers, 'update', () => this._updateMarkers() );\n\n\t\t// Ensure selection is up to date after each change block.\n\t\tthis.listenTo( this._document, 'change', ( evt, batch ) => {\n\t\t\tclearAttributesStoredInElement( this._model, batch );\n\t\t} );\n\t}\n\n\tget isCollapsed() {\n\t\tconst length = this._ranges.length;\n\n\t\treturn length === 0 ? this._document._getDefaultRange().isCollapsed : super.isCollapsed;\n\t}\n\n\tget anchor() {\n\t\treturn super.anchor || this._document._getDefaultRange().start;\n\t}\n\n\tget focus() {\n\t\treturn super.focus || this._document._getDefaultRange().end;\n\t}\n\n\tget rangeCount() {\n\t\treturn this._ranges.length ? this._ranges.length : 1;\n\t}\n\n\t// Describes whether `LiveSelection` has own range(s) set, or if it is defaulted to\n\t// {@link module:engine/model/document~Document#_getDefaultRange document's default range}.\n\t//\n\t// @readonly\n\t// @type {Boolean}\n\tget hasOwnRange() {\n\t\treturn this._ranges.length > 0;\n\t}\n\n\t// When set to `true` then selection attributes on node before the caret won't be taken\n\t// into consideration while updating selection attributes.\n\t//\n\t// @protected\n\t// @type {Boolean}\n\tget isGravityOverridden() {\n\t\treturn !!this._overriddenGravityRegister.size;\n\t}\n\n\t// Unbinds all events previously bound by live selection.\n\tdestroy() {\n\t\tfor ( let i = 0; i < this._ranges.length; i++ ) {\n\t\t\tthis._ranges[ i ].detach();\n\t\t}\n\n\t\tthis.stopListening();\n\t}\n\n\t* getRanges() {\n\t\tif ( this._ranges.length ) {\n\t\t\tyield* super.getRanges();\n\t\t} else {\n\t\t\tyield this._document._getDefaultRange();\n\t\t}\n\t}\n\n\tgetFirstRange() {\n\t\treturn super.getFirstRange() || this._document._getDefaultRange();\n\t}\n\n\tgetLastRange() {\n\t\treturn super.getLastRange() || this._document._getDefaultRange();\n\t}\n\n\tsetTo( selectable, optionsOrPlaceOrOffset, options ) {\n\t\tsuper.setTo( selectable, optionsOrPlaceOrOffset, options );\n\t\tthis._updateAttributes( true );\n\t}\n\n\tsetFocus( itemOrPosition, offset ) {\n\t\tsuper.setFocus( itemOrPosition, offset );\n\t\tthis._updateAttributes( true );\n\t}\n\n\tsetAttribute( key, value ) {\n\t\tif ( this._setAttribute( key, value ) ) {\n\t\t\t// Fire event with exact data.\n\t\t\tconst attributeKeys = [ key ];\n\t\t\tthis.fire( 'change:attribute', { attributeKeys, directChange: true } );\n\t\t}\n\t}\n\n\tremoveAttribute( key ) {\n\t\tif ( this._removeAttribute( key ) ) {\n\t\t\t// Fire event with exact data.\n\t\t\tconst attributeKeys = [ key ];\n\t\t\tthis.fire( 'change:attribute', { attributeKeys, directChange: true } );\n\t\t}\n\t}\n\n\toverrideGravity() {\n\t\tconst overrideUid = uid();\n\n\t\t// Remember that another overriding has been requested. It will need to be removed\n\t\t// before the gravity is to be restored.\n\t\tthis._overriddenGravityRegister.add( overrideUid );\n\n\t\tif ( this._overriddenGravityRegister.size === 1 ) {\n\t\t\tthis._updateAttributes( true );\n\t\t}\n\n\t\treturn overrideUid;\n\t}\n\n\trestoreGravity( uid ) {\n\t\tif ( !this._overriddenGravityRegister.has( uid ) ) {\n\t\t\t/**\n\t\t\t * Restoring gravity for an unknown UID is not possible. Make sure you are using a correct\n\t\t\t * UID obtained from the {@link module:engine/model/writer~Writer#overrideSelectionGravity} to restore.\n\t\t\t *\n\t\t\t * @error document-selection-gravity-wrong-restore\n\t\t\t * @param {String} uid The unique identifier returned by\n\t\t\t * {@link module:engine/model/documentselection~DocumentSelection#_overrideGravity}.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.',\n\t\t\t\tthis,\n\t\t\t\t{ uid }\n\t\t\t);\n\t\t}\n\n\t\tthis._overriddenGravityRegister.delete( uid );\n\n\t\t// Restore gravity only when all overriding have been restored.\n\t\tif ( !this.isGravityOverridden ) {\n\t\t\tthis._updateAttributes( true );\n\t\t}\n\t}\n\n\t_popRange() {\n\t\tthis._ranges.pop().detach();\n\t}\n\n\t_pushRange( range ) {\n\t\tconst liveRange = this._prepareRange( range );\n\n\t\t// `undefined` is returned when given `range` is in graveyard root.\n\t\tif ( liveRange ) {\n\t\t\tthis._ranges.push( liveRange );\n\t\t}\n\t}\n\n\t// Prepares given range to be added to selection. Checks if it is correct,\n\t// converts it to {@link module:engine/model/liverange~LiveRange LiveRange}\n\t// and sets listeners listening to the range's change event.\n\t//\n\t// @private\n\t// @param {module:engine/model/range~Range} range\n\t_prepareRange( range ) {\n\t\tthis._checkRange( range );\n\n\t\tif ( range.root == this._document.graveyard ) {\n\t\t\t/**\n\t\t\t * Trying to add a Range that is in the graveyard root. Range rejected.\n\t\t\t *\n\t\t\t * @warning model-selection-range-in-graveyard\n\t\t\t */\n\t\t\tlog.warn( 'model-selection-range-in-graveyard: Trying to add a Range that is in the graveyard root. Range rejected.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst liveRange = LiveRange.fromRange( range );\n\n\t\tliveRange.on( 'change:range', ( evt, oldRange, data ) => {\n\t\t\tthis._hasChangedRange = true;\n\n\t\t\t// If `LiveRange` is in whole moved to the graveyard, save necessary data. It will be fixed on `Model#applyOperation` event.\n\t\t\tif ( liveRange.root == this._document.graveyard ) {\n\t\t\t\tthis._fixGraveyardRangesData.push( {\n\t\t\t\t\tliveRange,\n\t\t\t\t\tsourcePosition: data.deletionPosition\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn liveRange;\n\t}\n\n\t_updateMarkers() {\n\t\tconst markers = [];\n\n\t\tfor ( const marker of this._model.markers ) {\n\t\t\tconst markerRange = marker.getRange();\n\n\t\t\tfor ( const selectionRange of this.getRanges() ) {\n\t\t\t\tif ( markerRange.containsRange( selectionRange, !selectionRange.isCollapsed ) ) {\n\t\t\t\t\tmarkers.push( marker );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor ( const marker of markers ) {\n\t\t\tif ( !this.markers.has( marker ) ) {\n\t\t\t\tthis.markers.add( marker );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const marker of Array.from( this.markers ) ) {\n\t\t\tif ( !markers.includes( marker ) ) {\n\t\t\t\tthis.markers.remove( marker );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Updates this selection attributes according to its ranges and the {@link module:engine/model/document~Document model document}.\n\t//\n\t// @protected\n\t// @param {Boolean} clearAll\n\t// @fires change:attribute\n\t_updateAttributes( clearAll ) {\n\t\tconst newAttributes = toMap( this._getSurroundingAttributes() );\n\t\tconst oldAttributes = toMap( this.getAttributes() );\n\n\t\tif ( clearAll ) {\n\t\t\t// If `clearAll` remove all attributes and reset priorities.\n\t\t\tthis._attributePriority = new Map();\n\t\t\tthis._attrs = new Map();\n\t\t} else {\n\t\t\t// If not, remove only attributes added with `low` priority.\n\t\t\tfor ( const [ key, priority ] of this._attributePriority ) {\n\t\t\t\tif ( priority == 'low' ) {\n\t\t\t\t\tthis._attrs.delete( key );\n\t\t\t\t\tthis._attributePriority.delete( key );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._setAttributesTo( newAttributes );\n\n\t\t// Let's evaluate which attributes really changed.\n\t\tconst changed = [];\n\n\t\t// First, loop through all attributes that are set on selection right now.\n\t\t// Check which of them are different than old attributes.\n\t\tfor ( const [ newKey, newValue ] of this.getAttributes() ) {\n\t\t\tif ( !oldAttributes.has( newKey ) || oldAttributes.get( newKey ) !== newValue ) {\n\t\t\t\tchanged.push( newKey );\n\t\t\t}\n\t\t}\n\n\t\t// Then, check which of old attributes got removed.\n\t\tfor ( const [ oldKey ] of oldAttributes ) {\n\t\t\tif ( !this.hasAttribute( oldKey ) ) {\n\t\t\t\tchanged.push( oldKey );\n\t\t\t}\n\t\t}\n\n\t\t// Fire event with exact data (fire only if anything changed).\n\t\tif ( changed.length > 0 ) {\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: changed, directChange: false } );\n\t\t}\n\t}\n\n\t// Internal method for setting `LiveSelection` attribute. Supports attribute priorities (through `directChange`\n\t// parameter).\n\t//\n\t// @private\n\t// @param {String} key Attribute key.\n\t// @param {*} value Attribute value.\n\t// @param {Boolean} [directChange=true] `true` if the change is caused by `Selection` API, `false` if change\n\t// is caused by `Batch` API.\n\t// @returns {Boolean} Whether value has changed.\n\t_setAttribute( key, value, directChange = true ) {\n\t\tconst priority = directChange ? 'normal' : 'low';\n\n\t\tif ( priority == 'low' && this._attributePriority.get( key ) == 'normal' ) {\n\t\t\t// Priority too low.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst oldValue = super.getAttribute( key );\n\n\t\t// Don't do anything if value has not changed.\n\t\tif ( oldValue === value ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._attrs.set( key, value );\n\n\t\t// Update priorities map.\n\t\tthis._attributePriority.set( key, priority );\n\n\t\treturn true;\n\t}\n\n\t// Internal method for removing `LiveSelection` attribute. Supports attribute priorities (through `directChange`\n\t// parameter).\n\t//\n\t// NOTE: Even if attribute is not present in the selection but is provided to this method, it's priority will\n\t// be changed according to `directChange` parameter.\n\t//\n\t// @private\n\t// @param {String} key Attribute key.\n\t// @param {Boolean} [directChange=true] `true` if the change is caused by `Selection` API, `false` if change\n\t// is caused by `Batch` API.\n\t// @returns {Boolean} Whether attribute was removed. May not be true if such attributes didn't exist or the\n\t// existing attribute had higher priority.\n\t_removeAttribute( key, directChange = true ) {\n\t\tconst priority = directChange ? 'normal' : 'low';\n\n\t\tif ( priority == 'low' && this._attributePriority.get( key ) == 'normal' ) {\n\t\t\t// Priority too low.\n\t\t\treturn false;\n\t\t}\n\n\t\t// Update priorities map.\n\t\tthis._attributePriority.set( key, priority );\n\n\t\t// Don't do anything if value has not changed.\n\t\tif ( !super.hasAttribute( key ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._attrs.delete( key );\n\n\t\treturn true;\n\t}\n\n\t// Internal method for setting multiple `LiveSelection` attributes. Supports attribute priorities (through\n\t// `directChange` parameter).\n\t//\n\t// @private\n\t// @param {Map.<String,*>} attrs Iterable object containing attributes to be set.\n\t// @returns {Set.<String>} Changed attribute keys.\n\t_setAttributesTo( attrs ) {\n\t\tconst changed = new Set();\n\n\t\tfor ( const [ oldKey, oldValue ] of this.getAttributes() ) {\n\t\t\t// Do not remove attribute if attribute with same key and value is about to be set.\n\t\t\tif ( attrs.get( oldKey ) === oldValue ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// All rest attributes will be removed so changed attributes won't change .\n\t\t\tthis._removeAttribute( oldKey, false );\n\t\t}\n\n\t\tfor ( const [ key, value ] of attrs ) {\n\t\t\t// Attribute may not be set because of attributes or because same key/value is already added.\n\t\t\tconst gotAdded = this._setAttribute( key, value, false );\n\n\t\t\tif ( gotAdded ) {\n\t\t\t\tchanged.add( key );\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\t// Returns an iterable that iterates through all selection attributes stored in current selection's parent.\n\t//\n\t// @protected\n\t// @returns {Iterable.<*>}\n\t* _getStoredAttributes() {\n\t\tconst selectionParent = this.getFirstPosition().parent;\n\n\t\tif ( this.isCollapsed && selectionParent.isEmpty ) {\n\t\t\tfor ( const key of selectionParent.getAttributeKeys() ) {\n\t\t\t\tif ( key.startsWith( storePrefix ) ) {\n\t\t\t\t\tconst realKey = key.substr( storePrefix.length );\n\n\t\t\t\t\tyield [ realKey, selectionParent.getAttribute( key ) ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Checks model text nodes that are closest to the selection's first position and returns attributes of first\n\t// found element. If there are no text nodes in selection's first position parent, it returns selection\n\t// attributes stored in that parent.\n\t//\n\t// @private\n\t// @returns {Iterable.<*>} Collection of attributes.\n\t_getSurroundingAttributes() {\n\t\tconst position = this.getFirstPosition();\n\t\tconst schema = this._model.schema;\n\n\t\tlet attrs = null;\n\n\t\tif ( !this.isCollapsed ) {\n\t\t\t// 1. If selection is a range...\n\t\t\tconst range = this.getFirstRange();\n\n\t\t\t// ...look for a first character node in that range and take attributes from it.\n\t\t\tfor ( const value of range ) {\n\t\t\t\t// If the item is an object, we don't want to get attributes from its children.\n\t\t\t\tif ( value.item.is( 'element' ) && schema.isObject( value.item ) ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif ( value.type == 'text' ) {\n\t\t\t\t\tattrs = value.item.getAttributes();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// 2. If the selection is a caret or the range does not contain a character node...\n\n\t\t\tconst nodeBefore = position.textNode ? position.textNode : position.nodeBefore;\n\t\t\tconst nodeAfter = position.textNode ? position.textNode : position.nodeAfter;\n\n\t\t\t// When gravity is overridden then don't take node before into consideration.\n\t\t\tif ( !this.isGravityOverridden ) {\n\t\t\t\t// ...look at the node before caret and take attributes from it if it is a character node.\n\t\t\t\tattrs = getAttrsIfCharacter( nodeBefore );\n\t\t\t}\n\n\t\t\t// 3. If not, look at the node after caret...\n\t\t\tif ( !attrs ) {\n\t\t\t\tattrs = getAttrsIfCharacter( nodeAfter );\n\t\t\t}\n\n\t\t\t// 4. If not, try to find the first character on the left, that is in the same node.\n\t\t\t// When gravity is overridden then don't take node before into consideration.\n\t\t\tif ( !this.isGravityOverridden && !attrs ) {\n\t\t\t\tlet node = nodeBefore;\n\n\t\t\t\twhile ( node && !attrs ) {\n\t\t\t\t\tnode = node.previousSibling;\n\t\t\t\t\tattrs = getAttrsIfCharacter( node );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 5. If not found, try to find the first character on the right, that is in the same node.\n\t\t\tif ( !attrs ) {\n\t\t\t\tlet node = nodeAfter;\n\n\t\t\t\twhile ( node && !attrs ) {\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t\tattrs = getAttrsIfCharacter( node );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 6. If not found, selection should retrieve attributes from parent.\n\t\t\tif ( !attrs ) {\n\t\t\t\tattrs = this._getStoredAttributes();\n\t\t\t}\n\t\t}\n\n\t\treturn attrs;\n\t}\n\n\t// Fixes a selection range after it ends up in graveyard root.\n\t//\n\t// @private\n\t// @param {module:engine/model/liverange~LiveRange} liveRange The range from selection, that ended up in the graveyard root.\n\t// @param {module:engine/model/position~Position} removedRangeStart Start position of a range which was removed.\n\t_fixGraveyardSelection( liveRange, removedRangeStart ) {\n\t\t// The start of the removed range is the closest position to the `liveRange` - the original selection range.\n\t\t// This is a good candidate for a fixed selection range.\n\t\tconst positionCandidate = removedRangeStart.clone();\n\n\t\t// Find a range that is a correct selection range and is closest to the start of removed range.\n\t\tconst selectionRange = this._model.schema.getNearestSelectionRange( positionCandidate );\n\n\t\t// Remove the old selection range before preparing and adding new selection range. This order is important,\n\t\t// because new range, in some cases, may intersect with old range (it depends on `getNearestSelectionRange()` result).\n\t\tconst index = this._ranges.indexOf( liveRange );\n\t\tthis._ranges.splice( index, 1 );\n\t\tliveRange.detach();\n\n\t\t// If nearest valid selection range has been found - add it in the place of old range.\n\t\tif ( selectionRange ) {\n\t\t\t// Check the range, convert it to live range, bind events, etc.\n\t\t\tconst newRange = this._prepareRange( selectionRange );\n\n\t\t\t// Add new range in the place of old range.\n\t\t\tthis._ranges.splice( index, 0, newRange );\n\t\t}\n\t\t// If nearest valid selection range cannot be found - just removing the old range is fine.\n\t}\n}\n\n// Helper function for {@link module:engine/model/liveselection~LiveSelection#_updateAttributes}.\n//\n// It takes model item, checks whether it is a text node (or text proxy) and, if so, returns it's attributes. If not, returns `null`.\n//\n// @param {module:engine/model/item~Item|null}  node\n// @returns {Boolean}\nfunction getAttrsIfCharacter( node ) {\n\tif ( node instanceof TextProxy || node instanceof Text ) {\n\t\treturn node.getAttributes();\n\t}\n\n\treturn null;\n}\n\n// Removes selection attributes from element which is not empty anymore.\n//\n// @private\n// @param {module:engine/model/model~Model} model\n// @param {module:engine/model/batch~Batch} batch\nfunction clearAttributesStoredInElement( model, batch ) {\n\tconst differ = model.document.differ;\n\n\tfor ( const entry of differ.getChanges() ) {\n\t\tif ( entry.type != 'insert' ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst changeParent = entry.position.parent;\n\t\tconst isNoLongerEmpty = entry.length === changeParent.maxOffset;\n\n\t\tif ( isNoLongerEmpty ) {\n\t\t\tmodel.enqueueChange( batch, writer => {\n\t\t\t\tconst storedAttributes = Array.from( changeParent.getAttributeKeys() )\n\t\t\t\t\t.filter( key => key.startsWith( storePrefix ) );\n\n\t\t\t\tfor ( const key of storedAttributes ) {\n\t\t\t\t\twriter.removeAttribute( key, changeParent );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/conversionhelpers\n */\n\n/**\n * Base class for conversion helpers.\n */\nexport default class ConversionHelpers {\n\t/**\n\t * Creates a conversion helpers instance.\n\t *\n\t * @param {Array.<module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * module:engine/conversion/upcastdispatcher~UpcastDispatcher>} dispatchers\n\t */\n\tconstructor( dispatchers ) {\n\t\tthis._dispatchers = dispatchers;\n\t}\n\n\t/**\n\t * Registers a conversion helper.\n\t *\n\t * **Note**: See full usage example in the `{@link module:engine/conversion/conversion~Conversion#for conversion.for()}`\n\t * method description.\n\t *\n\t * @param {Function} conversionHelper The function to be called on event.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers|module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\tadd( conversionHelper ) {\n\t\tfor ( const dispatcher of this._dispatchers ) {\n\t\t\tconversionHelper( dispatcher );\n\t\t}\n\n\t\treturn this;\n\t}\n}\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport ModelRange from '../model/range';\nimport ModelSelection from '../model/selection';\nimport ModelElement from '../model/element';\n\nimport ViewAttributeElement from '../view/attributeelement';\nimport DocumentSelection from '../model/documentselection';\nimport ConversionHelpers from './conversionhelpers';\n\nimport log from '@ckeditor/ckeditor5-utils/src/log';\nimport { cloneDeep } from 'lodash-es';\n\n/**\n * Contains downcast (model-to-view) converters for {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}.\n *\n * @module engine/conversion/downcasthelpers\n */\n\n/**\n * Downcast conversion helper functions.\n *\n * @extends module:engine/conversion/conversionhelpers~ConversionHelpers\n */\nexport default class DowncastHelpers extends ConversionHelpers {\n\t/**\n\t * Model element to view element conversion helper.\n\t *\n\t * This conversion results in creating a view element. For example, model `<paragraph>Foo</paragraph>` becomes `<p>Foo</p>` in the view.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tview: 'p'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tview: 'div',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'fancyParagraph',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'fancy'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'heading',\n\t *\t\t\tview: ( modelElement, viewWriter ) => {\n\t *\t\t\t\treturn viewWriter.createContainerElement( 'h' + modelElement.getAttribute( 'level' ) )\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #elementToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.model The name of the model element to convert.\n\t * @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view A view element definition or a function\n\t * that takes the model element and {@link module:engine/view/downcastwriter~DowncastWriter view downcast writer}\n\t * as parameters and returns a view container element.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\telementToElement( config ) {\n\t\treturn this.add( downcastElementToElement( config ) );\n\t}\n\n\t/**\n\t * Model attribute to view element conversion helper.\n\t *\n\t * This conversion results in wrapping view nodes with a view attribute element. For example, a model text node with\n\t * `\"Foo\"` as data and the `bold` attribute becomes `<strong>Foo</strong>` in the view.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: 'strong'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: 'b',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'invert',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: [ 'font-light', 'bg-dark' ]\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'fontSize',\n\t *\t\t\t\tvalues: [ 'big', 'small' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tbig: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '1.2em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tsmall: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '0.8em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: ( modelAttributeValue, viewWriter ) => {\n\t *\t\t\t\treturn viewWriter.createAttributeElement( 'span', {\n\t *\t\t\t\t\tstyle: 'font-weight:' + modelAttributeValue\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'color',\n\t *\t\t\t\tname: '$text'\n\t *\t\t\t},\n\t *\t\t\tview: ( modelAttributeValue, viewWriter ) => {\n\t *\t\t\t\treturn viewWriter.createAttributeElement( 'span', {\n\t *\t\t\t\t\tstyle: 'color:' + modelAttributeValue\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #attributeToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values }` object. `values` is an array\n\t * of `String`s with possible values if the model attribute is an enumerable.\n\t * @param {module:engine/view/elementdefinition~ElementDefinition|Function|Object} config.view A view element definition or a function\n\t * that takes the model attribute value and {@link module:engine/view/downcastwriter~DowncastWriter view downcast writer}\n\t * as parameters and returns a view attribute element. If `config.model.values` is\n\t * given, `config.view` should be an object assigning values from `config.model.values` to view element definitions or functions.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tattributeToElement( config ) {\n\t\treturn this.add( downcastAttributeToElement( config ) );\n\t}\n\n\t/**\n\t * Model attribute to view attribute conversion helper.\n\t *\n\t * This conversion results in adding an attribute to a view node, basing on an attribute from a model node. For example,\n\t * `<image src='foo.jpg'></image>` is converted to `<img src='foo.jpg'></img>`.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: 'source',\n\t *\t\t\tview: 'src'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: 'source',\n\t *\t\t\tview: 'href',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tname: 'image',\n\t *\t\t\t\tkey: 'source'\n\t *\t\t\t},\n\t *\t\t\tview: 'src'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tname: 'styled',\n\t *\t\t\t\tvalues: [ 'dark', 'light' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tdark: {\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: [ 'styled', 'styled-dark' ]\n\t *\t\t\t\t},\n\t *\t\t\t\tlight: {\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: [ 'styled', 'styled-light' ]\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t *\t\t\tmodel: 'styled',\n\t *\t\t\tview: modelAttributeValue => ( { key: 'class', value: 'styled-' + modelAttributeValue } )\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #attributeToAttribute\n\t * @param {Object} config Conversion configuration.\n\t * @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values, [ name ] }` object describing\n\t * the attribute key, possible values and, optionally, an element name to convert from.\n\t * @param {String|Object|Function} config.view A view attribute key, or a `{ key, value }` object or a function that takes\n\t * the model attribute value and returns a `{ key, value }` object. If `key` is `'class'`, `value` can be a `String` or an\n\t * array of `String`s. If `key` is `'style'`, `value` is an object with key-value pairs. In other cases, `value` is a `String`.\n\t * If `config.model.values` is set, `config.view` should be an object assigning values from `config.model.values` to\n\t * `{ key, value }` objects or a functions.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tattributeToAttribute( config ) {\n\t\treturn this.add( downcastAttributeToAttribute( config ) );\n\t}\n\n\t/**\n\t * Model marker to view element conversion helper.\n\t *\n\t * This conversion results in creating a view element on the boundaries of the converted marker. If the converted marker\n\t * is collapsed, only one element is created. For example, model marker set like this: `<paragraph>F[oo b]ar</paragraph>`\n\t * becomes `<p>F<span data-marker=\"search\"></span>oo b<span data-marker=\"search\"></span>ar</p>` in the view.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToElement( {\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tview: 'marker-search'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToElement( {\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tview: 'search-result',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToElement( {\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tattributes: {\n\t *\t\t\t\t\t'data-marker': 'search'\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToElement( {\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tview: ( markerData, viewWriter ) => {\n\t *\t\t\t\treturn viewWriter.createUIElement( 'span', {\n\t *\t\t\t\t\t'data-marker': 'search',\n\t *\t\t\t\t\t'data-start': markerData.isOpening\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * If a function is passed as the `config.view` parameter, it will be used to generate both boundary elements. The function\n\t * receives the `data` object as a parameter and should return an instance of the\n\t * {@link module:engine/view/uielement~UIElement view UI element}. The `data` object and\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi `conversionApi`} are passed from\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}. Additionally,\n\t * the `data.isOpening` parameter is passed, which is set to `true` for the marker start boundary element, and `false` to\n\t * the marker end boundary element.\n\t *\n\t * This kind of conversion is useful for saving data into the database, so it should be used in the data conversion pipeline.\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #markerToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.model The name of the model marker (or model marker group) to convert.\n\t * @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view A view element definition or a function\n\t * that takes the model marker data as a parameter and returns a view UI element.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tmarkerToElement( config ) {\n\t\treturn this.add( downcastMarkerToElement( config ) );\n\t}\n\n\t/**\n\t * Model marker to highlight conversion helper.\n\t *\n\t * This conversion results in creating a highlight on view nodes. For this kind of conversion,\n\t * {@link module:engine/conversion/downcasthelpers~HighlightDescriptor} should be provided.\n\t *\n\t * For text nodes, a `<span>` {@link module:engine/view/attributeelement~AttributeElement} is created and it wraps all text nodes\n\t * in the converted marker range. For example, a model marker set like this: `<paragraph>F[oo b]ar</paragraph>` becomes\n\t * `<p>F<span class=\"comment\">oo b</span>ar</p>` in the view.\n\t *\n\t * {@link module:engine/view/containerelement~ContainerElement} may provide a custom way of handling highlight. Most often,\n\t * the element itself is given classes and attributes described in the highlight descriptor (instead of being wrapped in `<span>`).\n\t * For example, a model marker set like this: `[<image src=\"foo.jpg\"></image>]` becomes `<img src=\"foo.jpg\" class=\"comment\"></img>`\n\t * in the view.\n\t *\n\t * For container elements, the conversion is two-step. While the converter processes the highlight descriptor and passes it\n\t * to a container element, it is the container element instance itself that applies values from the highlight descriptor.\n\t * So, in a sense, the converter takes care of stating what should be applied on what, while the element decides how to apply that.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToHighlight( { model: 'comment', view: { classes: 'comment' } } );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToHighlight( {\n\t *\t\t\tmodel: 'comment',\n\t *\t\t\tview: { classes: 'new-comment' },\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).markerToHighlight( {\n\t *\t\t\tmodel: 'comment',\n\t *\t\t\tview: data => {\n\t *\t\t\t\t// Assuming that the marker name is in a form of comment:commentType.\n\t *\t\t\t\tconst commentType = data.markerName.split( ':' )[ 1 ];\n\t *\n\t *\t\t\t\treturn {\n\t *\t\t\t\t\tclasses: [ 'comment', 'comment-' + commentType ]\n\t *\t\t\t\t};\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * If a function is passed as the `config.view` parameter, it will be used to generate the highlight descriptor. The function\n\t * receives the `data` object as a parameter and should return a\n\t * {@link module:engine/conversion/downcasthelpers~HighlightDescriptor highlight descriptor}.\n\t * The `data` object properties are passed from {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}.\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #markerToHighlight\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.model The name of the model marker (or model marker group) to convert.\n\t * @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} config.view A highlight descriptor\n\t * that will be used for highlighting or a function that takes the model marker data as a parameter and returns a highlight descriptor.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tmarkerToHighlight( config ) {\n\t\treturn this.add( downcastMarkerToHighlight( config ) );\n\t}\n}\n\n/**\n * Function factory that creates a default downcast converter for text insertion changes.\n *\n * The converter automatically consumes the corresponding value from the consumables list and stops the event (see\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}).\n *\n *\t\tmodelDispatcher.on( 'insert:$text', insertText() );\n *\n * @returns {Function} Insert text event converter.\n */\nexport function insertText() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !conversionApi.consumable.consume( data.item, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n\t\tconst viewText = viewWriter.createText( data.item.data );\n\n\t\tviewWriter.insert( viewPosition, viewText );\n\t};\n}\n\n/**\n * Function factory that creates a default downcast converter for node remove changes.\n *\n *\t\tmodelDispatcher.on( 'remove', remove() );\n *\n * @returns {Function} Remove event converter.\n */\nexport function remove() {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// Find view range start position by mapping model position at which the remove happened.\n\t\tconst viewStart = conversionApi.mapper.toViewPosition( data.position );\n\n\t\tconst modelEnd = data.position.getShiftedBy( data.length );\n\t\tconst viewEnd = conversionApi.mapper.toViewPosition( modelEnd, { isPhantom: true } );\n\n\t\tconst viewRange = conversionApi.writer.createRange( viewStart, viewEnd );\n\n\t\t// Trim the range to remove in case some UI elements are on the view range boundaries.\n\t\tconst removed = conversionApi.writer.remove( viewRange.getTrimmed() );\n\n\t\t// After the range is removed, unbind all view elements from the model.\n\t\t// Range inside view document fragment is used to unbind deeply.\n\t\tfor ( const child of conversionApi.writer.createRangeIn( removed ).getItems() ) {\n\t\t\tconversionApi.mapper.unbindViewElement( child );\n\t\t}\n\t};\n}\n\n/**\n * Creates a `<span>` {@link module:engine/view/attributeelement~AttributeElement view attribute element} from the information\n * provided by the {@link module:engine/conversion/downcasthelpers~HighlightDescriptor highlight descriptor} object. If a priority\n * is not provided in the descriptor, the default priority will be used.\n *\n * @param {module:engine/conversion/downcasthelpers~HighlightDescriptor} descriptor\n * @returns {module:engine/view/attributeelement~AttributeElement}\n */\nexport function createViewElementFromHighlightDescriptor( descriptor ) {\n\tconst viewElement = new ViewAttributeElement( 'span', descriptor.attributes );\n\n\tif ( descriptor.classes ) {\n\t\tviewElement._addClass( descriptor.classes );\n\t}\n\n\tif ( descriptor.priority ) {\n\t\tviewElement._priority = descriptor.priority;\n\t}\n\n\tviewElement._id = descriptor.id;\n\n\treturn viewElement;\n}\n\n/**\n * Function factory that creates a converter which converts a non-collapsed {@link module:engine/model/selection~Selection model selection}\n * to a {@link module:engine/view/documentselection~DocumentSelection view selection}. The converter consumes appropriate\n * value from the `consumable` object and maps model positions from the selection to view positions.\n *\n *\t\tmodelDispatcher.on( 'selection', convertRangeSelection() );\n *\n * @returns {Function} Selection converter.\n */\nexport function convertRangeSelection() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst selection = data.selection;\n\n\t\tif ( selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( selection, 'selection' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewRanges = [];\n\n\t\tfor ( const range of selection.getRanges() ) {\n\t\t\tconst viewRange = conversionApi.mapper.toViewRange( range );\n\t\t\tviewRanges.push( viewRange );\n\t\t}\n\n\t\tconversionApi.writer.setSelection( viewRanges, { backward: selection.isBackward } );\n\t};\n}\n\n/**\n * Function factory that creates a converter which converts a collapsed {@link module:engine/model/selection~Selection model selection} to\n * a {@link module:engine/view/documentselection~DocumentSelection view selection}. The converter consumes appropriate\n * value from the `consumable` object, maps the model selection position to the view position and breaks\n * {@link module:engine/view/attributeelement~AttributeElement attribute elements} at the selection position.\n *\n *\t\tmodelDispatcher.on( 'selection', convertCollapsedSelection() );\n *\n * An example of the view state before and after converting the collapsed selection:\n *\n *\t\t   <p><strong>f^oo<strong>bar</p>\n *\t\t-> <p><strong>f</strong>^<strong>oo</strong>bar</p>\n *\n * By breaking attribute elements like `<strong>`, the selection is in a correct element. Then, when the selection attribute is\n * converted, broken attributes might be merged again, or the position where the selection is may be wrapped\n * with different, appropriate attribute elements.\n *\n * See also {@link module:engine/conversion/downcasthelpers~clearAttributes} which does a clean-up\n * by merging attributes.\n *\n * @returns {Function} Selection converter.\n */\nexport function convertCollapsedSelection() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst selection = data.selection;\n\n\t\tif ( !selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( selection, 'selection' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst modelPosition = selection.getFirstPosition();\n\t\tconst viewPosition = conversionApi.mapper.toViewPosition( modelPosition );\n\t\tconst brokenPosition = viewWriter.breakAttributes( viewPosition );\n\n\t\tviewWriter.setSelection( brokenPosition );\n\t};\n}\n\n/**\n * Function factory that creates a converter which clears artifacts after the previous\n * {@link module:engine/model/selection~Selection model selection} conversion. It removes all empty\n * {@link module:engine/view/attributeelement~AttributeElement view attribute elements} and merges sibling attributes at all start and end\n * positions of all ranges.\n *\n *\t\t   <p><strong>^</strong></p>\n *\t\t-> <p>^</p>\n *\n *\t\t   <p><strong>foo</strong>^<strong>bar</strong>bar</p>\n *\t\t-> <p><strong>foo^bar<strong>bar</p>\n *\n *\t\t   <p><strong>foo</strong><em>^</em><strong>bar</strong>bar</p>\n *\t\t-> <p><strong>foo^bar<strong>bar</p>\n *\n * This listener should be assigned before any converter for the new selection:\n *\n *\t\tmodelDispatcher.on( 'selection', clearAttributes() );\n *\n * See {@link module:engine/conversion/downcasthelpers~convertCollapsedSelection}\n * which does the opposite by breaking attributes in the selection position.\n *\n * @returns {Function} Selection converter.\n */\nexport function clearAttributes() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst viewSelection = viewWriter.document.selection;\n\n\t\tfor ( const range of viewSelection.getRanges() ) {\n\t\t\t// Not collapsed selection should not have artifacts.\n\t\t\tif ( range.isCollapsed ) {\n\t\t\t\t// Position might be in the node removed by the view writer.\n\t\t\t\tif ( range.end.parent.document ) {\n\t\t\t\t\tconversionApi.writer.mergeAttributes( range.start );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tviewWriter.setSelection( null );\n\t};\n}\n\n/**\n * Function factory that creates a converter which converts set/change/remove attribute changes from the model to the view.\n * It can also be used to convert selection attributes. In that case, an empty attribute element will be created and the\n * selection will be put inside it.\n *\n * Attributes from the model are converted to a view element that will be wrapping these view nodes that are bound to\n * model elements having the given attribute. This is useful for attributes like `bold` that may be set on text nodes in the model\n * but are represented as an element in the view:\n *\n *\t\t[paragraph]              MODEL ====> VIEW        <p>\n *\t\t\t|- a {bold: true}                             |- <b>\n *\t\t\t|- b {bold: true}                             |   |- ab\n *\t\t\t|- c                                          |- c\n *\n * Passed `Function` will be provided with the attribute value and then all the parameters of the\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute `attribute` event}.\n * It is expected that the function returns an {@link module:engine/view/element~Element}.\n * The result of the function will be the wrapping element.\n * When the provided `Function` does not return any element, no conversion will take place.\n *\n * The converter automatically consumes the corresponding value from the consumables list and stops the event (see\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}).\n *\n *\t\tmodelDispatcher.on( 'attribute:bold', wrap( ( modelAttributeValue, viewWriter ) => {\n *\t\t\treturn viewWriter.createAttributeElement( 'strong' );\n *\t\t} );\n *\n * @protected\n * @param {Function} elementCreator Function returning a view element that will be used for wrapping.\n * @returns {Function} Set/change attribute converter.\n */\nexport function wrap( elementCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// Recreate current wrapping node. It will be used to unwrap view range if the attribute value has changed\n\t\t// or the attribute was removed.\n\t\tconst oldViewElement = elementCreator( data.attributeOldValue, conversionApi.writer );\n\n\t\t// Create node to wrap with.\n\t\tconst newViewElement = elementCreator( data.attributeNewValue, conversionApi.writer );\n\n\t\tif ( !oldViewElement && !newViewElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst viewSelection = viewWriter.document.selection;\n\n\t\tif ( data.item instanceof ModelSelection || data.item instanceof DocumentSelection ) {\n\t\t\t// Selection attribute conversion.\n\t\t\tviewWriter.wrap( viewSelection.getFirstRange(), newViewElement );\n\t\t} else {\n\t\t\t// Node attribute conversion.\n\t\t\tlet viewRange = conversionApi.mapper.toViewRange( data.range );\n\n\t\t\t// First, unwrap the range from current wrapper.\n\t\t\tif ( data.attributeOldValue !== null && oldViewElement ) {\n\t\t\t\tviewRange = viewWriter.unwrap( viewRange, oldViewElement );\n\t\t\t}\n\n\t\t\tif ( data.attributeNewValue !== null && newViewElement ) {\n\t\t\t\tviewWriter.wrap( viewRange, newViewElement );\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Function factory that creates a converter which converts node insertion changes from the model to the view.\n * The function passed will be provided with all the parameters of the dispatcher's\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert `insert` event}.\n * It is expected that the function returns an {@link module:engine/view/element~Element}.\n * The result of the function will be inserted into the view.\n *\n * The converter automatically consumes the corresponding value from the consumables list, stops the event (see\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}) and binds the model and view elements.\n *\n *\t\tdowncastDispatcher.on(\n *\t\t\t'insert:myElem',\n *\t\t\tinsertElement( ( modelItem, viewWriter ) => {\n *\t\t\t\tconst text = viewWriter.createText( 'myText' );\n *\t\t\t\tconst myElem = viewWriter.createElement( 'myElem', { myAttr: 'my-' + modelItem.getAttribute( 'myAttr' ) }, text );\n *\n *\t\t\t\t// Do something fancy with `myElem` using `modelItem` or other parameters.\n *\n *\t\t\t\treturn myElem;\n *\t\t\t}\n *\t\t) );\n *\n * @protected\n * @param {Function} elementCreator Function returning a view element, which will be inserted.\n * @returns {Function} Insert element event converter.\n */\nexport function insertElement( elementCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst viewElement = elementCreator( data.item, conversionApi.writer );\n\n\t\tif ( !viewElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( data.item, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n\n\t\tconversionApi.mapper.bindElements( data.item, viewElement );\n\t\tconversionApi.writer.insert( viewPosition, viewElement );\n\t};\n}\n\n/**\n * Function factory that creates a converter which converts marker adding change to the\n * {@link module:engine/view/uielement~UIElement view UI element}.\n *\n * The view UI element that will be added to the view depends on the passed parameter. See {@link ~insertElement}.\n * In case of a non-collapsed range, the UI element will not wrap nodes but separate elements will be placed at the beginning\n * and at the end of the range.\n *\n * This converter binds created UI elements with the marker name using {@link module:engine/conversion/mapper~Mapper#bindElementToMarker}.\n *\n * @protected\n * @param {module:engine/view/uielement~UIElement|Function} elementCreator A view UI element or a function returning the view element\n * that will be inserted.\n * @returns {Function} Insert element event converter.\n */\nexport function insertUIElement( elementCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// Create two view elements. One will be inserted at the beginning of marker, one at the end.\n\t\t// If marker is collapsed, only \"opening\" element will be inserted.\n\t\tdata.isOpening = true;\n\t\tconst viewStartElement = elementCreator( data, conversionApi.writer );\n\n\t\tdata.isOpening = false;\n\t\tconst viewEndElement = elementCreator( data, conversionApi.writer );\n\n\t\tif ( !viewStartElement || !viewEndElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst markerRange = data.markerRange;\n\n\t\t// Marker that is collapsed has consumable build differently that non-collapsed one.\n\t\t// For more information see `addMarker` event description.\n\t\t// If marker's range is collapsed - check if it can be consumed.\n\t\tif ( markerRange.isCollapsed && !conversionApi.consumable.consume( markerRange, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If marker's range is not collapsed - consume all items inside.\n\t\tfor ( const value of markerRange ) {\n\t\t\tif ( !conversionApi.consumable.consume( value.item, evt.name ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst mapper = conversionApi.mapper;\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\t// Add \"opening\" element.\n\t\tviewWriter.insert( mapper.toViewPosition( markerRange.start ), viewStartElement );\n\t\tconversionApi.mapper.bindElementToMarker( viewStartElement, data.markerName );\n\n\t\t// Add \"closing\" element only if range is not collapsed.\n\t\tif ( !markerRange.isCollapsed ) {\n\t\t\tviewWriter.insert( mapper.toViewPosition( markerRange.end ), viewEndElement );\n\t\t\tconversionApi.mapper.bindElementToMarker( viewEndElement, data.markerName );\n\t\t}\n\n\t\tevt.stop();\n\t};\n}\n\n// Function factory that returns a default downcast converter for removing a {@link module:engine/view/uielement~UIElement UI element}\n// basing on marker remove change.\n//\n// This converter unbinds elements from the marker name.\n//\n// @returns {Function} Removed UI element converter.\nfunction removeUIElement() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst elements = conversionApi.mapper.markerNameToElements( data.markerName );\n\n\t\tif ( !elements ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconversionApi.mapper.unbindElementsFromMarkerName( data.markerName );\n\n\t\tfor ( const element of elements ) {\n\t\t\tconversionApi.writer.clear( conversionApi.writer.createRangeOn( element ), element );\n\t\t}\n\n\t\tconversionApi.writer.clearClonedElementsGroup( data.markerName );\n\n\t\tevt.stop();\n\t};\n}\n\n// Function factory that creates a converter which converts set/change/remove attribute changes from the model to the view.\n//\n// Attributes from the model are converted to the view element attributes in the view. You may provide a custom function to generate\n// a key-value attribute pair to add/change/remove. If not provided, model attributes will be converted to view element\n// attributes on a one-to-one basis.\n//\n// *Note:** The provided attribute creator should always return the same `key` for a given attribute from the model.\n//\n// The converter automatically consumes the corresponding value from the consumables list and stops the event (see\n// {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}).\n//\n//\t\tmodelDispatcher.on( 'attribute:customAttr:myElem', changeAttribute( ( value, data ) => {\n//\t\t\t// Change attribute key from `customAttr` to `class` in the view.\n//\t\t\tconst key = 'class';\n//\t\t\tlet value = data.attributeNewValue;\n//\n//\t\t\t// Force attribute value to 'empty' if the model element is empty.\n//\t\t\tif ( data.item.childCount === 0 ) {\n//\t\t\t\tvalue = 'empty';\n//\t\t\t}\n//\n//\t\t\t// Return the key-value pair.\n//\t\t\treturn { key, value };\n//\t\t} ) );\n//\n// @param {Function} [attributeCreator] Function returning an object with two properties: `key` and `value`, which\n// represent the attribute key and attribute value to be set on a {@link module:engine/view/element~Element view element}.\n// The function is passed the model attribute value as the first parameter and additional data about the change as the second parameter.\n// @returns {Function} Set/change attribute converter.\nfunction changeAttribute( attributeCreator ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst oldAttribute = attributeCreator( data.attributeOldValue, data );\n\t\tconst newAttribute = attributeCreator( data.attributeNewValue, data );\n\n\t\tif ( !oldAttribute && !newAttribute ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewElement = conversionApi.mapper.toViewElement( data.item );\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\t// If model item cannot be mapped to a view element, it means item is not an `Element` instance but a `TextProxy` node.\n\t\t// Only elements can have attributes in a view so do not proceed for anything else (#1587).\n\t\tif ( !viewElement ) {\n\t\t\t/**\n\t\t\t * This error occurs when a {@link module:engine/model/textproxy~TextProxy text node's} attribute is to be downcasted\n\t\t\t * by {@link module:engine/conversion/conversion~Conversion#attributeToAttribute `Attribute to Attribute converter`}.\n\t\t\t * In most cases it is caused by converters misconfiguration when only \"generic\" converter is defined:\n\t\t\t *\n\t\t\t *\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( {\n\t\t\t *\t\t\tmodel: 'attribute-name',\n\t\t\t *\t\t\tview: 'attribute-name'\n\t\t\t *\t\t} ) );\n\t\t\t *\n\t\t\t * and given attribute is used on text node, for example:\n\t\t\t *\n\t\t\t *\t\tmodel.change( writer => {\n\t\t\t *\t\t\twriter.insertText( 'Foo', { 'attribute-name': 'bar' }, parent, 0 );\n\t\t\t *\t\t} );\n\t\t\t *\n\t\t\t * In such cases, to convert the same attribute for both {@link module:engine/model/element~Element}\n\t\t\t * and {@link module:engine/model/textproxy~TextProxy `Text`} nodes, text specific\n\t\t\t * {@link module:engine/conversion/conversion~Conversion#attributeToElement `Attribute to Element converter`}\n\t\t\t * with higher {@link module:utils/priorities~PriorityString priority} must also be defined:\n\t\t\t *\n\t\t\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t\t\t *\t\t\tmodel: {\n\t\t\t *\t\t\t\tkey: 'attribute-name',\n\t\t\t *\t\t\t\tname: '$text'\n\t\t\t *\t\t\t},\n\t\t\t *\t\t\tview: ( value, writer ) => {\n\t\t\t *\t\t\t\treturn writer.createAttributeElement( 'span', { 'attribute-name': value } );\n\t\t\t *\t\t\t},\n\t\t\t *\t\t\tconverterPriority: 'high'\n\t\t\t *\t\t} ) );\n\t\t\t *\n\t\t\t * @error conversion-attribute-to-attribute-on-text\n\t\t\t */\n\t\t\tlog.warn( 'conversion-attribute-to-attribute-on-text: ' +\n\t\t\t\t'Trying to convert text node\\'s attribute with attribute-to-attribute converter.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// First remove the old attribute if there was one.\n\t\tif ( data.attributeOldValue !== null && oldAttribute ) {\n\t\t\tif ( oldAttribute.key == 'class' ) {\n\t\t\t\tconst classes = Array.isArray( oldAttribute.value ) ? oldAttribute.value : [ oldAttribute.value ];\n\n\t\t\t\tfor ( const className of classes ) {\n\t\t\t\t\tviewWriter.removeClass( className, viewElement );\n\t\t\t\t}\n\t\t\t} else if ( oldAttribute.key == 'style' ) {\n\t\t\t\tconst keys = Object.keys( oldAttribute.value );\n\n\t\t\t\tfor ( const key of keys ) {\n\t\t\t\t\tviewWriter.removeStyle( key, viewElement );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tviewWriter.removeAttribute( oldAttribute.key, viewElement );\n\t\t\t}\n\t\t}\n\n\t\t// Then set the new attribute.\n\t\tif ( data.attributeNewValue !== null && newAttribute ) {\n\t\t\tif ( newAttribute.key == 'class' ) {\n\t\t\t\tconst classes = Array.isArray( newAttribute.value ) ? newAttribute.value : [ newAttribute.value ];\n\n\t\t\t\tfor ( const className of classes ) {\n\t\t\t\t\tviewWriter.addClass( className, viewElement );\n\t\t\t\t}\n\t\t\t} else if ( newAttribute.key == 'style' ) {\n\t\t\t\tconst keys = Object.keys( newAttribute.value );\n\n\t\t\t\tfor ( const key of keys ) {\n\t\t\t\t\tviewWriter.setStyle( key, newAttribute.value[ key ], viewElement );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tviewWriter.setAttribute( newAttribute.key, newAttribute.value, viewElement );\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Function factory that creates a converter which converts the text inside marker's range. The converter wraps the text with\n// {@link module:engine/view/attributeelement~AttributeElement} created from the provided descriptor.\n// See {link module:engine/conversion/downcasthelpers~createViewElementFromHighlightDescriptor}.\n//\n// It can also be used to convert the selection that is inside a marker. In that case, an empty attribute element will be\n// created and the selection will be put inside it.\n//\n// If the highlight descriptor does not provide the `priority` property, `10` will be used.\n//\n// If the highlight descriptor does not provide the `id` property, the name of the marker will be used.\n//\n// This converter binds the created {@link module:engine/view/attributeelement~AttributeElement attribute elemens} with the marker name\n// using the {@link module:engine/conversion/mapper~Mapper#bindElementToMarker} method.\n//\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} highlightDescriptor\n// @returns {Function}\nfunction highlightText( highlightDescriptor ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !data.item ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !( data.item instanceof ModelSelection || data.item instanceof DocumentSelection ) && !data.item.is( 'textProxy' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst descriptor = prepareDescriptor( highlightDescriptor, data, conversionApi );\n\n\t\tif ( !descriptor ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewElement = createViewElementFromHighlightDescriptor( descriptor );\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst viewSelection = viewWriter.document.selection;\n\n\t\tif ( data.item instanceof ModelSelection || data.item instanceof DocumentSelection ) {\n\t\t\tviewWriter.wrap( viewSelection.getFirstRange(), viewElement, viewSelection );\n\t\t} else {\n\t\t\tconst viewRange = conversionApi.mapper.toViewRange( data.range );\n\t\t\tconst rangeAfterWrap = viewWriter.wrap( viewRange, viewElement );\n\n\t\t\tfor ( const element of rangeAfterWrap.getItems() ) {\n\t\t\t\tif ( element.is( 'attributeElement' ) && element.isSimilar( viewElement ) ) {\n\t\t\t\t\tconversionApi.mapper.bindElementToMarker( element, data.markerName );\n\n\t\t\t\t\t// One attribute element is enough, because all of them are bound together by the view writer.\n\t\t\t\t\t// Mapper uses this binding to get all the elements no matter how many of them are registered in the mapper.\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Converter function factory. It creates a function which applies the marker's highlight to an element inside the marker's range.\n//\n// The converter checks if an element has the `addHighlight` function stored as a\n// {@link module:engine/view/element~Element#_setCustomProperty custom property} and, if so, uses it to apply the highlight.\n// In such case the converter will consume all element's children, assuming that they were handled by the element itself.\n//\n// When the `addHighlight` custom property is not present, the element is not converted in any special way.\n// This means that converters will proceed to convert the element's child nodes.\n//\n// If the highlight descriptor does not provide the `priority` property, `10` will be used.\n//\n// If the highlight descriptor does not provide the `id` property, the name of the marker will be used.\n//\n// This converter binds altered {@link module:engine/view/containerelement~ContainerElement container elements} with the marker name using\n// the {@link module:engine/conversion/mapper~Mapper#bindElementToMarker} method.\n//\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} highlightDescriptor\n// @returns {Function}\nfunction highlightElement( highlightDescriptor ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !data.item ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !( data.item instanceof ModelElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst descriptor = prepareDescriptor( highlightDescriptor, data, conversionApi );\n\n\t\tif ( !descriptor ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !conversionApi.consumable.test( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewElement = conversionApi.mapper.toViewElement( data.item );\n\n\t\tif ( viewElement && viewElement.getCustomProperty( 'addHighlight' ) ) {\n\t\t\t// Consume element itself.\n\t\t\tconversionApi.consumable.consume( data.item, evt.name );\n\n\t\t\t// Consume all children nodes.\n\t\t\tfor ( const value of ModelRange._createIn( data.item ) ) {\n\t\t\t\tconversionApi.consumable.consume( value.item, evt.name );\n\t\t\t}\n\n\t\t\tviewElement.getCustomProperty( 'addHighlight' )( viewElement, descriptor, conversionApi.writer );\n\n\t\t\tconversionApi.mapper.bindElementToMarker( viewElement, data.markerName );\n\t\t}\n\t};\n}\n\n// Function factory that creates a converter which converts the removing model marker to the view.\n//\n// Both text nodes and elements are handled by this converter but they are handled a bit differently.\n//\n// Text nodes are unwrapped using the {@link module:engine/view/attributeelement~AttributeElement attribute element} created from the\n// provided highlight descriptor. See {link module:engine/conversion/downcasthelpers~HighlightDescriptor}.\n//\n// For elements, the converter checks if an element has the `removeHighlight` function stored as a\n// {@link module:engine/view/element~Element#_setCustomProperty custom property}. If so, it uses it to remove the highlight.\n// In such case, the children of that element will not be converted.\n//\n// When `removeHighlight` is not present, the element is not converted in any special way.\n// The converter will proceed to convert the element's child nodes instead.\n//\n// If the highlight descriptor does not provide the `priority` property, `10` will be used.\n//\n// If the highlight descriptor does not provide the `id` property, the name of the marker will be used.\n//\n// This converter unbinds elements from the marker name.\n//\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} highlightDescriptor\n// @returns {Function}\nfunction removeHighlight( highlightDescriptor ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// This conversion makes sense only for non-collapsed range.\n\t\tif ( data.markerRange.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst descriptor = prepareDescriptor( highlightDescriptor, data, conversionApi );\n\n\t\tif ( !descriptor ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// View element that will be used to unwrap `AttributeElement`s.\n\t\tconst viewHighlightElement = createViewElementFromHighlightDescriptor( descriptor );\n\n\t\t// Get all elements bound with given marker name.\n\t\tconst elements = conversionApi.mapper.markerNameToElements( data.markerName );\n\n\t\tif ( !elements ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconversionApi.mapper.unbindElementsFromMarkerName( data.markerName );\n\n\t\tfor ( const element of elements ) {\n\t\t\tif ( element.is( 'attributeElement' ) ) {\n\t\t\t\tconversionApi.writer.unwrap( conversionApi.writer.createRangeOn( element ), viewHighlightElement );\n\t\t\t} else {\n\t\t\t\t// if element.is( 'containerElement' ).\n\t\t\t\telement.getCustomProperty( 'removeHighlight' )( element, descriptor.id, conversionApi.writer );\n\t\t\t}\n\t\t}\n\n\t\tconversionApi.writer.clearClonedElementsGroup( data.markerName );\n\n\t\tevt.stop();\n\t};\n}\n\n// Model element to view element conversion helper.\n//\n// See {@link ~DowncastHelpers#elementToElement `.elementToElement()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String} config.model The name of the model element to convert.\n// @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view A view element definition or a function\n// that takes the model element and {@link module:engine/view/downcastwriter~DowncastWriter view downcast writer}\n// as parameters and returns a view container element.\n// @returns {Function} Conversion helper.\nfunction downcastElementToElement( config ) {\n\tconfig = cloneDeep( config );\n\n\tconfig.view = normalizeToElementConfig( config.view, 'container' );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( 'insert:' + config.model, insertElement( config.view ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Model attribute to view element conversion helper.\n//\n// See {@link ~DowncastHelpers#attributeToElement `.attributeToElement()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values }` object. `values` is an array\n// of `String`s with possible values if the model attribute is an enumerable.\n// @param {module:engine/view/elementdefinition~ElementDefinition|Function|Object} config.view A view element definition or a function\n// that takes the model attribute value and {@link module:engine/view/downcastwriter~DowncastWriter view downcast writer}\n// as parameters and returns a view attribute element. If `config.model.values` is\n// given, `config.view` should be an object assigning values from `config.model.values` to view element definitions or functions.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction downcastAttributeToElement( config ) {\n\tconfig = cloneDeep( config );\n\n\tconst modelKey = config.model.key ? config.model.key : config.model;\n\tlet eventName = 'attribute:' + modelKey;\n\n\tif ( config.model.name ) {\n\t\teventName += ':' + config.model.name;\n\t}\n\n\tif ( config.model.values ) {\n\t\tfor ( const modelValue of config.model.values ) {\n\t\t\tconfig.view[ modelValue ] = normalizeToElementConfig( config.view[ modelValue ], 'attribute' );\n\t\t}\n\t} else {\n\t\tconfig.view = normalizeToElementConfig( config.view, 'attribute' );\n\t}\n\n\tconst elementCreator = getFromAttributeCreator( config );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( eventName, wrap( elementCreator ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Model attribute to view attribute conversion helper.\n//\n// See {@link ~DowncastHelpers#attributeToAttribute `.attributeToAttribute()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values, [ name ] }` object describing\n// the attribute key, possible values and, optionally, an element name to convert from.\n// @param {String|Object|Function} config.view A view attribute key, or a `{ key, value }` object or a function that takes\n// the model attribute value and returns a `{ key, value }` object. If `key` is `'class'`, `value` can be a `String` or an\n// array of `String`s. If `key` is `'style'`, `value` is an object with key-value pairs. In other cases, `value` is a `String`.\n// If `config.model.values` is set, `config.view` should be an object assigning values from `config.model.values` to\n// `{ key, value }` objects or a functions.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction downcastAttributeToAttribute( config ) {\n\tconfig = cloneDeep( config );\n\n\tconst modelKey = config.model.key ? config.model.key : config.model;\n\tlet eventName = 'attribute:' + modelKey;\n\n\tif ( config.model.name ) {\n\t\teventName += ':' + config.model.name;\n\t}\n\n\tif ( config.model.values ) {\n\t\tfor ( const modelValue of config.model.values ) {\n\t\t\tconfig.view[ modelValue ] = normalizeToAttributeConfig( config.view[ modelValue ] );\n\t\t}\n\t} else {\n\t\tconfig.view = normalizeToAttributeConfig( config.view );\n\t}\n\n\tconst elementCreator = getFromAttributeCreator( config );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( eventName, changeAttribute( elementCreator ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Model marker to view element conversion helper.\n//\n// See {@link ~DowncastHelpers#markerToElement `.markerToElement()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String} config.model The name of the model marker (or model marker group) to convert.\n// @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view A view element definition or a function\n// that takes the model marker data as a parameter and returns a view UI element.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction downcastMarkerToElement( config ) {\n\tconfig = cloneDeep( config );\n\n\tconfig.view = normalizeToElementConfig( config.view, 'ui' );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( 'addMarker:' + config.model, insertUIElement( config.view ), { priority: config.converterPriority || 'normal' } );\n\t\tdispatcher.on( 'removeMarker:' + config.model, removeUIElement( config.view ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Model marker to highlight conversion helper.\n//\n// See {@link ~DowncastHelpers#markerToElement `.markerToElement()` downcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String} config.model The name of the model marker (or model marker group) to convert.\n// @param {module:engine/conversion/downcasthelpers~HighlightDescriptor|Function} config.view A highlight descriptor\n// that will be used for highlighting or a function that takes the model marker data as a parameter and returns a highlight descriptor.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction downcastMarkerToHighlight( config ) {\n\treturn dispatcher => {\n\t\tdispatcher.on( 'addMarker:' + config.model, highlightText( config.view ), { priority: config.converterPriority || 'normal' } );\n\t\tdispatcher.on( 'addMarker:' + config.model, highlightElement( config.view ), { priority: config.converterPriority || 'normal' } );\n\t\tdispatcher.on( 'removeMarker:' + config.model, removeHighlight( config.view ), { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// Takes `config.view`, and if it is an {@link module:engine/view/elementdefinition~ElementDefinition}, converts it\n// to a function (because lower level converters accept only element creator functions).\n//\n// @param {module:engine/view/elementdefinition~ElementDefinition|Function} view View configuration.\n// @param {'container'|'attribute'|'ui'} viewElementType View element type to create.\n// @returns {Function} Element creator function to use in lower level converters.\nfunction normalizeToElementConfig( view, viewElementType ) {\n\tif ( typeof view == 'function' ) {\n\t\t// If `view` is already a function, don't do anything.\n\t\treturn view;\n\t}\n\n\treturn ( modelData, viewWriter ) => createViewElementFromDefinition( view, viewWriter, viewElementType );\n}\n\n// Creates a view element instance from the provided {@link module:engine/view/elementdefinition~ElementDefinition} and class.\n//\n// @param {module:engine/view/elementdefinition~ElementDefinition} viewElementDefinition\n// @param {module:engine/view/downcastwriter~DowncastWriter} viewWriter\n// @param {'container'|'attribute'|'ui'} viewElementType\n// @returns {module:engine/view/element~Element}\nfunction createViewElementFromDefinition( viewElementDefinition, viewWriter, viewElementType ) {\n\tif ( typeof viewElementDefinition == 'string' ) {\n\t\t// If `viewElementDefinition` is given as a `String`, normalize it to an object with `name` property.\n\t\tviewElementDefinition = { name: viewElementDefinition };\n\t}\n\n\tlet element;\n\tconst attributes = Object.assign( {}, viewElementDefinition.attributes );\n\n\tif ( viewElementType == 'container' ) {\n\t\telement = viewWriter.createContainerElement( viewElementDefinition.name, attributes );\n\t} else if ( viewElementType == 'attribute' ) {\n\t\tconst options = {\n\t\t\tpriority: viewElementDefinition.priority || ViewAttributeElement.DEFAULT_PRIORITY\n\t\t};\n\n\t\telement = viewWriter.createAttributeElement( viewElementDefinition.name, attributes, options );\n\t} else {\n\t\t// 'ui'.\n\t\telement = viewWriter.createUIElement( viewElementDefinition.name, attributes );\n\t}\n\n\tif ( viewElementDefinition.styles ) {\n\t\tconst keys = Object.keys( viewElementDefinition.styles );\n\n\t\tfor ( const key of keys ) {\n\t\t\tviewWriter.setStyle( key, viewElementDefinition.styles[ key ], element );\n\t\t}\n\t}\n\n\tif ( viewElementDefinition.classes ) {\n\t\tconst classes = viewElementDefinition.classes;\n\n\t\tif ( typeof classes == 'string' ) {\n\t\t\tviewWriter.addClass( classes, element );\n\t\t} else {\n\t\t\tfor ( const className of classes ) {\n\t\t\t\tviewWriter.addClass( className, element );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn element;\n}\n\nfunction getFromAttributeCreator( config ) {\n\tif ( config.model.values ) {\n\t\treturn ( modelAttributeValue, viewWriter ) => {\n\t\t\tconst view = config.view[ modelAttributeValue ];\n\n\t\t\tif ( view ) {\n\t\t\t\treturn view( modelAttributeValue, viewWriter );\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\t} else {\n\t\treturn config.view;\n\t}\n}\n\n// Takes the configuration, adds default parameters if they do not exist and normalizes other parameters to be used in downcast converters\n// for generating a view attribute.\n//\n// @param {Object} view View configuration.\nfunction normalizeToAttributeConfig( view ) {\n\tif ( typeof view == 'string' ) {\n\t\treturn modelAttributeValue => ( { key: view, value: modelAttributeValue } );\n\t} else if ( typeof view == 'object' ) {\n\t\t// { key, value, ... }\n\t\tif ( view.value ) {\n\t\t\treturn () => view;\n\t\t}\n\t\t// { key, ... }\n\t\telse {\n\t\t\treturn modelAttributeValue => ( { key: view.key, value: modelAttributeValue } );\n\t\t}\n\t} else {\n\t\t// function.\n\t\treturn view;\n\t}\n}\n\n// Helper function for `highlight`. Prepares the actual descriptor object using value passed to the converter.\nfunction prepareDescriptor( highlightDescriptor, data, conversionApi ) {\n\t// If passed descriptor is a creator function, call it. If not, just use passed value.\n\tconst descriptor = typeof highlightDescriptor == 'function' ?\n\t\thighlightDescriptor( data, conversionApi ) :\n\t\thighlightDescriptor;\n\n\tif ( !descriptor ) {\n\t\treturn null;\n\t}\n\n\t// Apply default descriptor priority.\n\tif ( !descriptor.priority ) {\n\t\tdescriptor.priority = 10;\n\t}\n\n\t// Default descriptor id is marker name.\n\tif ( !descriptor.id ) {\n\t\tdescriptor.id = data.markerName;\n\t}\n\n\treturn descriptor;\n}\n\n/**\n * An object describing how the marker highlight should be represented in the view.\n *\n * Each text node contained in a highlighted range will be wrapped in a `<span>`\n * {@link module:engine/view/attributeelement~AttributeElement view attribute element} with CSS class(es), attributes and a priority\n * described by this object.\n *\n * Additionally, each {@link module:engine/view/containerelement~ContainerElement container element} can handle displaying the highlight\n * separately by providing the `addHighlight` and `removeHighlight` custom properties. In this case:\n *\n *  * The `HighlightDescriptor` object is passed to the `addHighlight` function upon conversion and should be used to apply the highlight to\n *  the element.\n *  * The descriptor `id` is passed to the `removeHighlight` function upon conversion and should be used to remove the highlight with the\n *  given ID from the element.\n *\n * @typedef {Object} module:engine/conversion/downcasthelpers~HighlightDescriptor\n *\n * @property {String|Array.<String>} classes A CSS class or an array of classes to set. If the descriptor is used to\n * create an {@link module:engine/view/attributeelement~AttributeElement attribute element} over text nodes, these classes will be set\n * on that attribute element. If the descriptor is applied to an element, usually these classes will be set on that element, however,\n * this depends on how the element converts the descriptor.\n *\n * @property {String} [id] Descriptor identifier. If not provided, it defaults to the converted marker's name.\n *\n * @property {Number} [priority] Descriptor priority. If not provided, it defaults to `10`. If the descriptor is used to create\n * an {@link module:engine/view/attributeelement~AttributeElement attribute element}, it will be that element's\n * {@link module:engine/view/attributeelement~AttributeElement#priority priority}. If the descriptor is applied to an element,\n * the priority will be used to determine which descriptor is more important.\n *\n * @property {Object} [attributes] Attributes to set. If the descriptor is used to create\n * an {@link module:engine/view/attributeelement~AttributeElement attribute element} over text nodes, these attributes will be set on that\n * attribute element. If the descriptor is applied to an element, usually these attributes will be set on that element, however,\n * this depends on how the element converts the descriptor.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport Matcher from '../view/matcher';\nimport ModelRange from '../model/range';\nimport ConversionHelpers from './conversionhelpers';\n\nimport { cloneDeep } from 'lodash-es';\nimport ModelSelection from '../model/selection';\n\n/**\n * Contains {@link module:engine/view/view view} to {@link module:engine/model/model model} converters for\n * {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher}.\n *\n * @module engine/conversion/upcasthelpers\n */\n\n/**\n * Upcast conversion helper functions.\n *\n * @extends module:engine/conversion/conversionhelpers~ConversionHelpers\n */\nexport default class UpcastHelpers extends ConversionHelpers {\n\t/**\n\t * View element to model element conversion helper.\n\t *\n\t * This conversion results in creating a model element. For example,\n\t * view `<p>Foo</p>` becomes `<paragraph>Foo</paragraph>` in the model.\n\t *\n\t * Keep in mind that the element will be inserted only if it is allowed\n\t * by {@link module:engine/model/schema~Schema schema} configuration.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t *\t\t\tview: 'p',\n\t *\t\t\tmodel: 'paragraph'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t *\t\t\tview: 'p',\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'fancy'\n\t *\t\t\t},\n\t *\t\t\tmodel: 'fancyParagraph'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t * \t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'heading'\n\t * \t\t\t},\n\t * \t\t\tmodel: ( viewElement, modelWriter ) => {\n\t * \t\t\t\treturn modelWriter.createElement( 'heading', { level: viewElement.getAttribute( 'data-level' ) } );\n\t * \t\t\t}\n\t * \t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #elementToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {module:engine/view/matcher~MatcherPattern} [config.view] Pattern matching all view elements which should be converted. If not\n\t * set, the converter will fire for every view element.\n\t * @param {String|module:engine/model/element~Element|Function} config.model Name of the model element, a model element\n\t * instance or a function that takes a view element and returns a model element. The model element will be inserted in the model.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\telementToElement( config ) {\n\t\treturn this.add( upcastElementToElement( config ) );\n\t}\n\n\t/**\n\t * View element to model attribute conversion helper.\n\t *\n\t * This conversion results in setting an attribute on a model node. For example, view `<strong>Foo</strong>` becomes\n\t * `Foo` {@link module:engine/model/text~Text model text node} with `bold` attribute set to `true`.\n\t *\n\t * This helper is meant to set a model attribute on all the elements that are inside the converted element:\n\t *\n\t *\t\t<strong>Foo</strong>   -->   <strong><p>Foo</p></strong>   -->   <paragraph><$text bold=\"true\">Foo</$text></paragraph>\n\t *\n\t * Above is a sample of HTML code, that goes through autoparagraphing (first step) and then is converted (second step).\n\t * Even though `<strong>` is over `<p>` element, `bold=\"true\"` was added to the text. See\n\t * {@link module:engine/conversion/upcasthelpers~UpcastHelpers#attributeToAttribute} for comparison.\n\t *\n\t * Keep in mind that the attribute will be set only if it is allowed by {@link module:engine/model/schema~Schema schema} configuration.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: 'strong',\n\t *\t\t\tmodel: 'bold'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: 'strong',\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: 'bold'\n\t *\t\t\t},\n\t *\t\t\tmodel: 'bold'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: [ 'styled', 'styled-dark' ]\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'styled',\n\t *\t\t\t\tvalue: 'dark'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * \t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tstyles: {\n\t *\t\t\t\t\t'font-size': /[\\s\\S]+/\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'fontSize',\n\t *\t\t\t\tvalue: viewElement => {\n\t *\t\t\t\t\tconst fontSize = viewElement.getStyle( 'font-size' );\n\t *\t\t\t\t\tconst value = fontSize.substr( 0, fontSize.length - 2 );\n\t *\n\t *\t\t\t\t\tif ( value <= 10 ) {\n\t *\t\t\t\t\t\treturn 'small';\n\t *\t\t\t\t\t} else if ( value > 12 ) {\n\t *\t\t\t\t\t\treturn 'big';\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #elementToAttribute\n\t * @param {Object} config Conversion configuration.\n\t * @param {module:engine/view/matcher~MatcherPattern} config.view Pattern matching all view elements which should be converted.\n\t * @param {String|Object} config.model Model attribute key or an object with `key` and `value` properties, describing\n\t * the model attribute. `value` property may be set as a function that takes a view element and returns the value.\n\t * If `String` is given, the model attribute value will be set to `true`.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\telementToAttribute( config ) {\n\t\treturn this.add( upcastElementToAttribute( config ) );\n\t}\n\n\t/**\n\t * View attribute to model attribute conversion helper.\n\t *\n\t * This conversion results in setting an attribute on a model node. For example, view `<img src=\"foo.jpg\"></img>` becomes\n\t * `<image source=\"foo.jpg\"></image>` in the model.\n\t *\n\t * This helper is meant to convert view attributes from view elements which got converted to the model, so the view attribute\n\t * is set only on the corresponding model node:\n\t *\n\t *\t\t<div class=\"dark\"><div>foo</div></div>    -->    <div dark=\"true\"><div>foo</div></div>\n\t *\n\t * Above, `class=\"dark\"` attribute is added only to the `<div>` elements that has it. This is in contrary to\n\t * {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToAttribute} which sets attributes for\n\t * all the children in the model:\n\t *\n\t *\t\t<strong>Foo</strong>   -->   <strong><p>Foo</p></strong>   -->   <paragraph><$text bold=\"true\">Foo</$text></paragraph>\n\t *\n\t * Above is a sample of HTML code, that goes through autoparagraphing (first step) and then is converted (second step).\n\t * Even though `<strong>` is over `<p>` element, `bold=\"true\"` was added to the text.\n\t *\n\t * Keep in mind that the attribute will be set only if it is allowed by {@link module:engine/model/schema~Schema schema} configuration.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: 'src',\n\t *\t\t\tmodel: 'source'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: { key: 'src' },\n\t *\t\t\tmodel: 'source'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: { key: 'src' },\n\t *\t\t\tmodel: 'source',\n\t *\t\t\tconverterPriority: 'normal'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tkey: 'data-style',\n\t *\t\t\t\tvalue: /[\\s\\S]+/\n\t *\t\t\t},\n\t *\t\t\tmodel: 'styled'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'img',\n\t *\t\t\t\tkey: 'class',\n\t *\t\t\t\tvalue: 'styled-dark'\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'styled',\n\t *\t\t\t\tvalue: 'dark'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( {\n\t *\t\t\tview: {\n\t *\t\t\t\tkey: 'class',\n\t *\t\t\t\tvalue: /styled-[\\S]+/\n\t *\t\t\t},\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'styled'\n\t *\t\t\t\tvalue: viewElement => {\n\t *\t\t\t\t\tconst regexp = /styled-([\\S]+)/;\n\t *\t\t\t\t\tconst match = viewElement.getAttribute( 'class' ).match( regexp );\n\t *\n\t *\t\t\t\t\treturn match[ 1 ];\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #attributeToAttribute\n\t * @param {Object} config Conversion configuration.\n\t * @param {String|Object} config.view Specifies which view attribute will be converted. If a `String` is passed,\n\t * attributes with given key will be converted. If an `Object` is passed, it must have a required `key` property,\n\t * specifying view attribute key, and may have an optional `value` property, specifying view attribute value and optional `name`\n\t * property specifying a view element name from/on which the attribute should be converted. `value` can be given as a `String`,\n\t * a `RegExp` or a function callback, that takes view attribute value as the only parameter and returns `Boolean`.\n\t * @param {String|Object} config.model Model attribute key or an object with `key` and `value` properties, describing\n\t * the model attribute. `value` property may be set as a function that takes a view element and returns the value.\n\t * If `String` is given, the model attribute value will be same as view attribute value.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='low'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\tattributeToAttribute( config ) {\n\t\treturn this.add( upcastAttributeToAttribute( config ) );\n\t}\n\n\t/**\n\t * View element to model marker conversion helper.\n\t *\n\t * This conversion results in creating a model marker. For example, if the marker was stored in a view as an element:\n\t * `<p>Fo<span data-marker=\"comment\" data-comment-id=\"7\"></span>o</p><p>B<span data-marker=\"comment\" data-comment-id=\"7\"></span>ar</p>`,\n\t * after the conversion is done, the marker will be available in\n\t * {@link module:engine/model/model~Model#markers model document markers}.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToMarker( {\n\t *\t\t\tview: 'marker-search',\n\t *\t\t\tmodel: 'search'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToMarker( {\n\t *\t\t\tview: 'marker-search',\n\t *\t\t\tmodel: 'search',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToMarker( {\n\t *\t\t\tview: 'marker-search',\n\t *\t\t\tmodel: viewElement => 'comment:' + viewElement.getAttribute( 'data-comment-id' )\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).elementToMarker( {\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tattributes: {\n\t *\t\t\t\t\t'data-marker': 'search'\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tmodel: 'search'\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #elementToMarker\n\t * @param {Object} config Conversion configuration.\n\t * @param {module:engine/view/matcher~MatcherPattern} config.view Pattern matching all view elements which should be converted.\n\t * @param {String|Function} config.model Name of the model marker, or a function that takes a view element and returns\n\t * a model marker name.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\telementToMarker( config ) {\n\t\treturn this.add( upcastElementToMarker( config ) );\n\t}\n}\n\n/**\n * Function factory, creates a converter that converts {@link module:engine/view/documentfragment~DocumentFragment view document fragment}\n * or all children of {@link module:engine/view/element~Element} into\n * {@link module:engine/model/documentfragment~DocumentFragment model document fragment}.\n * This is the \"entry-point\" converter for upcast (view to model conversion). This converter starts the conversion of all children\n * of passed view document fragment. Those children {@link module:engine/view/node~Node view nodes} are then handled by other converters.\n *\n * This also a \"default\", last resort converter for all view elements that has not been converted by other converters.\n * When a view element is being converted to the model but it does not have converter specified, that view element\n * will be converted to {@link module:engine/model/documentfragment~DocumentFragment model document fragment} and returned.\n *\n * @returns {Function} Universal converter for view {@link module:engine/view/documentfragment~DocumentFragment fragments} and\n * {@link module:engine/view/element~Element elements} that returns\n * {@link module:engine/model/documentfragment~DocumentFragment model fragment} with children of converted view item.\n */\nexport function convertToModelFragment() {\n\treturn ( evt, data, conversionApi ) => {\n\t\t// Second argument in `consumable.consume` is discarded for ViewDocumentFragment but is needed for ViewElement.\n\t\tif ( !data.modelRange && conversionApi.consumable.consume( data.viewItem, { name: true } ) ) {\n\t\t\tconst { modelRange, modelCursor } = conversionApi.convertChildren( data.viewItem, data.modelCursor );\n\n\t\t\tdata.modelRange = modelRange;\n\t\t\tdata.modelCursor = modelCursor;\n\t\t}\n\t};\n}\n\n/**\n * Function factory, creates a converter that converts {@link module:engine/view/text~Text} to {@link module:engine/model/text~Text}.\n *\n * @returns {Function} {@link module:engine/view/text~Text View text} converter.\n */\nexport function convertText() {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( conversionApi.schema.checkChild( data.modelCursor, '$text' ) ) {\n\t\t\tif ( conversionApi.consumable.consume( data.viewItem ) ) {\n\t\t\t\tconst text = conversionApi.writer.createText( data.viewItem.data );\n\n\t\t\t\tconversionApi.writer.insert( text, data.modelCursor );\n\n\t\t\t\tdata.modelRange = ModelRange._createFromPositionAndShift( data.modelCursor, text.offsetSize );\n\t\t\t\tdata.modelCursor = data.modelRange.end;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Function factory, creates a callback function which converts a {@link module:engine/view/selection~Selection\n * view selection} taken from the {@link module:engine/view/document~Document#event:selectionChange} event\n * and sets in on the {@link module:engine/model/document~Document#selection model}.\n *\n * **Note**: because there is no view selection change dispatcher nor any other advanced view selection to model\n * conversion mechanism, the callback should be set directly on view document.\n *\n *\t\tview.document.on( 'selectionChange', convertSelectionChange( modelDocument, mapper ) );\n *\n * @param {module:engine/model/model~Model} model Data model.\n * @param {module:engine/conversion/mapper~Mapper} mapper Conversion mapper.\n * @returns {Function} {@link module:engine/view/document~Document#event:selectionChange} callback function.\n */\nexport function convertSelectionChange( model, mapper ) {\n\treturn ( evt, data ) => {\n\t\tconst viewSelection = data.newSelection;\n\t\tconst modelSelection = new ModelSelection();\n\n\t\tconst ranges = [];\n\n\t\tfor ( const viewRange of viewSelection.getRanges() ) {\n\t\t\tranges.push( mapper.toModelRange( viewRange ) );\n\t\t}\n\n\t\tmodelSelection.setTo( ranges, { backward: viewSelection.isBackward } );\n\n\t\tif ( !modelSelection.isEqual( model.document.selection ) ) {\n\t\t\tmodel.change( writer => {\n\t\t\t\twriter.setSelection( modelSelection );\n\t\t\t} );\n\t\t}\n\t};\n}\n\n// View element to model element conversion helper.\n//\n// See {@link ~UpcastHelpers#elementToElement `.elementToElement()` upcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {module:engine/view/matcher~MatcherPattern} [config.view] Pattern matching all view elements which should be converted. If not\n// set, the converter will fire for every view element.\n// @param {String|module:engine/model/element~Element|Function} config.model Name of the model element, a model element\n// instance or a function that takes a view element and returns a model element. The model element will be inserted in the model.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction upcastElementToElement( config ) {\n\tconfig = cloneDeep( config );\n\n\tconst converter = prepareToElementConverter( config );\n\n\tconst elementName = getViewElementNameFromConfig( config );\n\tconst eventName = elementName ? 'element:' + elementName : 'element';\n\n\treturn dispatcher => {\n\t\tdispatcher.on( eventName, converter, { priority: config.converterPriority || 'normal' } );\n\t};\n}\n\n// View element to model attribute conversion helper.\n//\n// See {@link ~UpcastHelpers#elementToAttribute `.elementToAttribute()` upcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {module:engine/view/matcher~MatcherPattern} config.view Pattern matching all view elements which should be converted.\n// @param {String|Object} config.model Model attribute key or an object with `key` and `value` properties, describing\n// the model attribute. `value` property may be set as a function that takes a view element and returns the value.\n// If `String` is given, the model attribute value will be set to `true`.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction upcastElementToAttribute( config ) {\n\tconfig = cloneDeep( config );\n\n\tnormalizeModelAttributeConfig( config );\n\n\tconst converter = prepareToAttributeConverter( config, false );\n\n\tconst elementName = getViewElementNameFromConfig( config );\n\tconst eventName = elementName ? 'element:' + elementName : 'element';\n\n\treturn dispatcher => {\n\t\tdispatcher.on( eventName, converter, { priority: config.converterPriority || 'low' } );\n\t};\n}\n\n// View attribute to model attribute conversion helper.\n//\n// See {@link ~UpcastHelpers#attributeToAttribute `.attributeToAttribute()` upcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {String|Object} config.view Specifies which view attribute will be converted. If a `String` is passed,\n// attributes with given key will be converted. If an `Object` is passed, it must have a required `key` property,\n// specifying view attribute key, and may have an optional `value` property, specifying view attribute value and optional `name`\n// property specifying a view element name from/on which the attribute should be converted. `value` can be given as a `String`,\n// a `RegExp` or a function callback, that takes view attribute value as the only parameter and returns `Boolean`.\n// @param {String|Object} config.model Model attribute key or an object with `key` and `value` properties, describing\n// the model attribute. `value` property may be set as a function that takes a view element and returns the value.\n// If `String` is given, the model attribute value will be same as view attribute value.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='low'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction upcastAttributeToAttribute( config ) {\n\tconfig = cloneDeep( config );\n\n\tlet viewKey = null;\n\n\tif ( typeof config.view == 'string' || config.view.key ) {\n\t\tviewKey = normalizeViewAttributeKeyValueConfig( config );\n\t}\n\n\tnormalizeModelAttributeConfig( config, viewKey );\n\n\tconst converter = prepareToAttributeConverter( config, true );\n\n\treturn dispatcher => {\n\t\tdispatcher.on( 'element', converter, { priority: config.converterPriority || 'low' } );\n\t};\n}\n\n// View element to model marker conversion helper.\n//\n// See {@link ~UpcastHelpers#elementToMarker `.elementToMarker()` upcast helper} for examples.\n//\n// @param {Object} config Conversion configuration.\n// @param {module:engine/view/matcher~MatcherPattern} config.view Pattern matching all view elements which should be converted.\n// @param {String|Function} config.model Name of the model marker, or a function that takes a view element and returns\n// a model marker name.\n// @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n// @returns {Function} Conversion helper.\nfunction upcastElementToMarker( config ) {\n\tconfig = cloneDeep( config );\n\n\tnormalizeToMarkerConfig( config );\n\n\treturn upcastElementToElement( config );\n}\n\n// Helper function for from-view-element conversion. Checks if `config.view` directly specifies converted view element's name\n// and if so, returns it.\n//\n// @param {Object} config Conversion config.\n// @returns {String|null} View element name or `null` if name is not directly set.\nfunction getViewElementNameFromConfig( config ) {\n\tif ( typeof config.view == 'string' ) {\n\t\treturn config.view;\n\t}\n\n\tif ( typeof config.view == 'object' && typeof config.view.name == 'string' ) {\n\t\treturn config.view.name;\n\t}\n\n\treturn null;\n}\n\n// Helper for to-model-element conversion. Takes a config object and returns a proper converter function.\n//\n// @param {Object} config Conversion configuration.\n// @returns {Function} View to model converter.\nfunction prepareToElementConverter( config ) {\n\tconst matcher = config.view ? new Matcher( config.view ) : null;\n\n\treturn ( evt, data, conversionApi ) => {\n\t\tlet match = {};\n\n\t\t// If `config.view` has not been passed do not try matching. In this case, the converter should fire for all elements.\n\t\tif ( matcher ) {\n\t\t\t// This will be usually just one pattern but we support matchers with many patterns too.\n\t\t\tconst matcherResult = matcher.match( data.viewItem );\n\n\t\t\t// If there is no match, this callback should not do anything.\n\t\t\tif ( !matcherResult ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmatch = matcherResult.match;\n\t\t}\n\n\t\t// Force consuming element's name.\n\t\tmatch.name = true;\n\n\t\t// Create model element basing on config.\n\t\tconst modelElement = getModelElement( config.model, data.viewItem, conversionApi.writer );\n\n\t\t// Do not convert if element building function returned falsy value.\n\t\tif ( !modelElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// When element was already consumed then skip it.\n\t\tif ( !conversionApi.consumable.test( data.viewItem, match ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find allowed parent for element that we are going to insert.\n\t\t// If current parent does not allow to insert element but one of the ancestors does\n\t\t// then split nodes to allowed parent.\n\t\tconst splitResult = conversionApi.splitToAllowedParent( modelElement, data.modelCursor );\n\n\t\t// When there is no split result it means that we can't insert element to model tree, so let's skip it.\n\t\tif ( !splitResult ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Insert element on allowed position.\n\t\tconversionApi.writer.insert( modelElement, splitResult.position );\n\n\t\t// Convert children and insert to element.\n\t\tconversionApi.convertChildren( data.viewItem, conversionApi.writer.createPositionAt( modelElement, 0 ) );\n\n\t\t// Consume appropriate value from consumable values list.\n\t\tconversionApi.consumable.consume( data.viewItem, match );\n\n\t\tconst parts = conversionApi.getSplitParts( modelElement );\n\n\t\t// Set conversion result range.\n\t\tdata.modelRange = new ModelRange(\n\t\t\tconversionApi.writer.createPositionBefore( modelElement ),\n\t\t\tconversionApi.writer.createPositionAfter( parts[ parts.length - 1 ] )\n\t\t);\n\n\t\t// Now we need to check where the `modelCursor` should be.\n\t\tif ( splitResult.cursorParent ) {\n\t\t\t// If we split parent to insert our element then we want to continue conversion in the new part of the split parent.\n\t\t\t//\n\t\t\t// before: <allowed><notAllowed>foo[]</notAllowed></allowed>\n\t\t\t// after:  <allowed><notAllowed>foo</notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\n\n\t\t\tdata.modelCursor = conversionApi.writer.createPositionAt( splitResult.cursorParent, 0 );\n\t\t} else {\n\t\t\t// Otherwise just continue after inserted element.\n\n\t\t\tdata.modelCursor = data.modelRange.end;\n\t\t}\n\t};\n}\n\n// Helper function for upcasting-to-element converter. Takes the model configuration, the converted view element\n// and a writer instance and returns a model element instance to be inserted in the model.\n//\n// @param {String|Function|module:engine/model/element~Element} model Model conversion configuration.\n// @param {module:engine/view/node~Node} input The converted view node.\n// @param {module:engine/model/writer~Writer} writer A writer instance to use to create the model element.\nfunction getModelElement( model, input, writer ) {\n\tif ( model instanceof Function ) {\n\t\treturn model( input, writer );\n\t} else {\n\t\treturn writer.createElement( model );\n\t}\n}\n\n// Helper function view-attribute-to-model-attribute helper. Normalizes `config.view` which was set as `String` or\n// as an `Object` with `key`, `value` and `name` properties. Normalized `config.view` has is compatible with\n// {@link module:engine/view/matcher~MatcherPattern}.\n//\n// @param {Object} config Conversion config.\n// @returns {String} Key of the converted view attribute.\nfunction normalizeViewAttributeKeyValueConfig( config ) {\n\tif ( typeof config.view == 'string' ) {\n\t\tconfig.view = { key: config.view };\n\t}\n\n\tconst key = config.view.key;\n\tlet normalized;\n\n\tif ( key == 'class' || key == 'style' ) {\n\t\tconst keyName = key == 'class' ? 'classes' : 'styles';\n\n\t\tnormalized = {\n\t\t\t[ keyName ]: config.view.value\n\t\t};\n\t} else {\n\t\tconst value = typeof config.view.value == 'undefined' ? /[\\s\\S]*/ : config.view.value;\n\n\t\tnormalized = {\n\t\t\tattributes: {\n\t\t\t\t[ key ]: value\n\t\t\t}\n\t\t};\n\t}\n\n\tif ( config.view.name ) {\n\t\tnormalized.name = config.view.name;\n\t}\n\n\tconfig.view = normalized;\n\n\treturn key;\n}\n\n// Helper function that normalizes `config.model` in from-model-attribute conversion. `config.model` can be set\n// as a `String`, an `Object` with only `key` property or an `Object` with `key` and `value` properties. Normalized\n// `config.model` is an `Object` with `key` and `value` properties.\n//\n// @param {Object} config Conversion config.\n// @param {String} viewAttributeKeyToCopy Key of the converted view attribute. If it is set, model attribute value\n// will be equal to view attribute value.\nfunction normalizeModelAttributeConfig( config, viewAttributeKeyToCopy = null ) {\n\tconst defaultModelValue = viewAttributeKeyToCopy === null ? true : viewElement => viewElement.getAttribute( viewAttributeKeyToCopy );\n\n\tconst key = typeof config.model != 'object' ? config.model : config.model.key;\n\tconst value = typeof config.model != 'object' || typeof config.model.value == 'undefined' ? defaultModelValue : config.model.value;\n\n\tconfig.model = { key, value };\n}\n\n// Helper for to-model-attribute conversion. Takes the model attribute name and conversion configuration and returns\n// a proper converter function.\n//\n// @param {String} modelAttributeKey The key of the model attribute to set on a model node.\n// @param {Object|Array.<Object>} config Conversion configuration. It is possible to provide multiple configurations in an array.\n// @param {Boolean} shallow If set to `true` the attribute will be set only on top-level nodes. Otherwise, it will be set\n// on all elements in the range.\nfunction prepareToAttributeConverter( config, shallow ) {\n\tconst matcher = new Matcher( config.view );\n\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst match = matcher.match( data.viewItem );\n\n\t\t// If there is no match, this callback should not do anything.\n\t\tif ( !match ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst modelKey = config.model.key;\n\t\tconst modelValue = typeof config.model.value == 'function' ? config.model.value( data.viewItem ) : config.model.value;\n\n\t\t// Do not convert if attribute building function returned falsy value.\n\t\tif ( modelValue === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( onlyViewNameIsDefined( config ) ) {\n\t\t\tmatch.match.name = true;\n\t\t} else {\n\t\t\t// Do not test or consume `name` consumable.\n\t\t\tdelete match.match.name;\n\t\t}\n\n\t\t// Try to consume appropriate values from consumable values list.\n\t\tif ( !conversionApi.consumable.test( data.viewItem, match.match ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Since we are converting to attribute we need an range on which we will set the attribute.\n\t\t// If the range is not created yet, we will create it.\n\t\tif ( !data.modelRange ) {\n\t\t\t// Convert children and set conversion result as a current data.\n\t\t\tdata = Object.assign( data, conversionApi.convertChildren( data.viewItem, data.modelCursor ) );\n\t\t}\n\n\t\t// Set attribute on current `output`. `Schema` is checked inside this helper function.\n\t\tconst attributeWasSet = setAttributeOn( data.modelRange, { key: modelKey, value: modelValue }, shallow, conversionApi );\n\n\t\tif ( attributeWasSet ) {\n\t\t\tconversionApi.consumable.consume( data.viewItem, match.match );\n\t\t}\n\t};\n}\n\n// Helper function that checks if element name should be consumed in attribute converters.\n//\n// @param {Object} config Conversion config.\n// @returns {Boolean}\nfunction onlyViewNameIsDefined( config ) {\n\tif ( typeof config.view == 'object' && !getViewElementNameFromConfig( config ) ) {\n\t\treturn false;\n\t}\n\n\treturn !config.view.classes && !config.view.attributes && !config.view.styles;\n}\n\n// Helper function for to-model-attribute converter. Sets model attribute on given range. Checks {@link module:engine/model/schema~Schema}\n// to ensure proper model structure.\n//\n// @param {module:engine/model/range~Range} modelRange Model range on which attribute should be set.\n// @param {Object} modelAttribute Model attribute to set.\n// @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion API.\n// @param {Boolean} shallow If set to `true` the attribute will be set only on top-level nodes. Otherwise, it will be set\n// on all elements in the range.\n// @returns {Boolean} `true` if attribute was set on at least one node from given `modelRange`.\nfunction setAttributeOn( modelRange, modelAttribute, shallow, conversionApi ) {\n\tlet result = false;\n\n\t// Set attribute on each item in range according to Schema.\n\tfor ( const node of Array.from( modelRange.getItems( { shallow } ) ) ) {\n\t\tif ( conversionApi.schema.checkAttribute( node, modelAttribute.key ) ) {\n\t\t\tconversionApi.writer.setAttribute( modelAttribute.key, modelAttribute.value, node );\n\n\t\t\tresult = true;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n// Helper function for upcasting-to-marker conversion. Takes the config in a format requested by `upcastElementToMarker()`\n// function and converts it to a format that is supported by `_upcastElementToElement()` function.\n//\n// @param {Object} config Conversion configuration.\nfunction normalizeToMarkerConfig( config ) {\n\tconst oldModel = config.model;\n\n\tconfig.model = ( viewElement, modelWriter ) => {\n\t\tconst markerName = typeof oldModel == 'string' ? oldModel : oldModel( viewElement );\n\n\t\treturn modelWriter.createElement( '$marker', { 'data-name': markerName } );\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/controller/editingcontroller\n */\n\nimport RootEditableElement from '../view/rooteditableelement';\nimport View from '../view/view';\nimport Mapper from '../conversion/mapper';\nimport DowncastDispatcher from '../conversion/downcastdispatcher';\nimport { clearAttributes, convertCollapsedSelection, convertRangeSelection, insertText, remove } from '../conversion/downcasthelpers';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { convertSelectionChange } from '../conversion/upcasthelpers';\n\n/**\n * Controller for the editing pipeline. The editing pipeline controls {@link ~EditingController#model model} rendering,\n * including selection handling. It also creates the {@link ~EditingController#view view} which builds a\n * browser-independent virtualization over the DOM elements. The editing controller also attaches default converters.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class EditingController {\n\t/**\n\t * Creates an editing controller instance.\n\t *\n\t * @param {module:engine/model/model~Model} model Editing model.\n\t */\n\tconstructor( model ) {\n\t\t/**\n\t\t * Editor model.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * Editing view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/view~View}\n\t\t */\n\t\tthis.view = new View();\n\n\t\t/**\n\t\t * Mapper which describes the model-view binding.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/mapper~Mapper}\n\t\t */\n\t\tthis.mapper = new Mapper();\n\n\t\t/**\n\t\t * Downcast dispatcher that converts changes from the model to {@link #view the editing view}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/downcastdispatcher~DowncastDispatcher} #downcastDispatcher\n\t\t */\n\t\tthis.downcastDispatcher = new DowncastDispatcher( {\n\t\t\tmapper: this.mapper\n\t\t} );\n\n\t\tconst doc = this.model.document;\n\t\tconst selection = doc.selection;\n\t\tconst markers = this.model.markers;\n\n\t\t// When plugins listen on model changes (on selection change, post fixers, etc) and change the view as a result of\n\t\t// model's change, they might trigger view rendering before the conversion is completed (e.g. before the selection\n\t\t// is converted). We disable rendering for the length of the outermost model change() block to prevent that.\n\t\t//\n\t\t// See  https://github.com/ckeditor/ckeditor5-engine/issues/1528\n\t\tthis.listenTo( this.model, '_beforeChanges', () => {\n\t\t\tthis.view._disableRendering( true );\n\t\t}, { priority: 'highest' } );\n\n\t\tthis.listenTo( this.model, '_afterChanges', () => {\n\t\t\tthis.view._disableRendering( false );\n\t\t}, { priority: 'lowest' } );\n\n\t\t// Whenever model document is changed, convert those changes to the view (using model.Document#differ).\n\t\t// Do it on 'low' priority, so changes are converted after other listeners did their job.\n\t\t// Also convert model selection.\n\t\tthis.listenTo( doc, 'change', () => {\n\t\t\tthis.view.change( writer => {\n\t\t\t\tthis.downcastDispatcher.convertChanges( doc.differ, writer );\n\t\t\t\tthis.downcastDispatcher.convertSelection( selection, markers, writer );\n\t\t\t} );\n\t\t}, { priority: 'low' } );\n\n\t\t// Convert selection from the view to the model when it changes in the view.\n\t\tthis.listenTo( this.view.document, 'selectionChange', convertSelectionChange( this.model, this.mapper ) );\n\n\t\t// Attach default model converters.\n\t\tthis.downcastDispatcher.on( 'insert:$text', insertText(), { priority: 'lowest' } );\n\t\tthis.downcastDispatcher.on( 'remove', remove(), { priority: 'low' } );\n\n\t\t// Attach default model selection converters.\n\t\tthis.downcastDispatcher.on( 'selection', clearAttributes(), { priority: 'low' } );\n\t\tthis.downcastDispatcher.on( 'selection', convertRangeSelection(), { priority: 'low' } );\n\t\tthis.downcastDispatcher.on( 'selection', convertCollapsedSelection(), { priority: 'low' } );\n\n\t\t// Binds {@link module:engine/view/document~Document#roots view roots collection} to\n\t\t// {@link module:engine/model/document~Document#roots model roots collection} so creating\n\t\t// model root automatically creates corresponding view root.\n\t\tthis.view.document.roots.bindTo( this.model.document.roots ).using( root => {\n\t\t\t// $graveyard is a special root that has no reflection in the view.\n\t\t\tif ( root.rootName == '$graveyard' ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst viewRoot = new RootEditableElement( root.name );\n\n\t\t\tviewRoot.rootName = root.rootName;\n\t\t\tviewRoot._document = this.view.document;\n\t\t\tthis.mapper.bindElements( root, viewRoot );\n\n\t\t\treturn viewRoot;\n\t\t} );\n\t}\n\n\t/**\n\t * Removes all event listeners attached to the `EditingController`. Destroys all objects created\n\t * by `EditingController` that need to be destroyed.\n\t */\n\tdestroy() {\n\t\tthis.view.destroy();\n\t\tthis.stopListening();\n\t}\n}\n\nmix( EditingController, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/plugincollection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Manages a list of CKEditor plugins, including loading, resolving dependencies and initialization.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class PluginCollection {\n\t/**\n\t * Creates an instance of the PluginCollection class.\n\t * Allows loading and initializing plugins and their dependencies.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {Array.<Function>} [availablePlugins] Plugins (constructors) which the collection will be able to use\n\t * when {@link module:core/plugincollection~PluginCollection#init} is used with plugin names (strings, instead of constructors).\n\t * Usually, the editor will pass its built-in plugins to the collection so they can later be\n\t * used in `config.plugins` or `config.removePlugins` by names.\n\t */\n\tconstructor( editor, availablePlugins = [] ) {\n\t\t/**\n\t\t * @protected\n\t\t * @member {module:core/editor/editor~Editor} module:core/plugin~PluginCollection#_editor\n\t\t */\n\t\tthis._editor = editor;\n\n\t\t/**\n\t\t * Map of plugin constructors which can be retrieved by their names.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map.<String|Function,Function>} module:core/plugin~PluginCollection#_availablePlugins\n\t\t */\n\t\tthis._availablePlugins = new Map();\n\n\t\t/**\n\t\t * @protected\n\t\t * @member {Map} module:core/plugin~PluginCollection#_plugins\n\t\t */\n\t\tthis._plugins = new Map();\n\n\t\tfor ( const PluginConstructor of availablePlugins ) {\n\t\t\tthis._availablePlugins.set( PluginConstructor, PluginConstructor );\n\n\t\t\tif ( PluginConstructor.pluginName ) {\n\t\t\t\tthis._availablePlugins.set( PluginConstructor.pluginName, PluginConstructor );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Returns `[ PluginConstructor, pluginInstance ]` pairs.\n\t *\n\t * @returns {Iterable.<Array>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tfor ( const entry of this._plugins ) {\n\t\t\tif ( typeof entry[ 0 ] == 'function' ) {\n\t\t\t\tyield entry;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets the plugin instance by its constructor or name.\n\t *\n\t *\t\t// Check if 'Clipboard' plugin was loaded.\n\t *\t\tif ( editor.plugins.has( 'Clipboard' ) ) {\n\t *\t\t\t// Get clipboard plugin instance\n\t *\t\t\tconst clipboard = editor.plugins.get( 'Clipboard' );\n\t *\n\t *\t\t\tthis.listenTo( clipboard, 'inputTransformation', ( evt, data ) => {\n\t *\t\t\t\t// Do something on clipboard input.\n\t *\t\t\t} );\n\t *\t\t}\n\t *\n\t * **Note**: This method will throw error if plugin is not loaded. Use `{@link #has editor.plugins.has()}`\n\t * to check if plugin is available.\n\t *\n\t * @param {Function|String} key The plugin constructor or {@link module:core/plugin~PluginInterface.pluginName name}.\n\t * @returns {module:core/plugin~PluginInterface}\n\t */\n\tget( key ) {\n\t\tconst plugin = this._plugins.get( key );\n\n\t\tif ( !plugin ) {\n\t\t\t/**\n\t\t\t * The plugin is not loaded and could not be obtained.\n\t\t\t *\n\t\t\t * Plugin classes (constructors) need to be provided to the editor and must be loaded before they can be obtained from\n\t\t\t * the plugin collection.\n\t\t\t * This is usually done in CKEditor 5 builds by setting the {@link module:core/editor/editor~Editor.builtinPlugins}\n\t\t\t * property.\n\t\t\t *\n\t\t\t * **Note**: You can use `{@link module:core/plugincollection~PluginCollection#has editor.plugins.has()}`\n\t\t\t * to check if plugin was loaded.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-not-loaded\n\t\t\t * @param {String} plugin The name of the plugin which is not loaded.\n\t\t\t */\n\t\t\tconst errorMsg = 'plugincollection-plugin-not-loaded: The requested plugin is not loaded.';\n\n\t\t\tlet pluginName = key;\n\n\t\t\tif ( typeof key == 'function' ) {\n\t\t\t\tpluginName = key.pluginName || key.name;\n\t\t\t}\n\n\t\t\tthrow new CKEditorError( errorMsg, this._editor, { plugin: pluginName } );\n\t\t}\n\n\t\treturn plugin;\n\t}\n\n\t/**\n\t * Checks if plugin is loaded.\n\t *\n\t *\t\t// Check if 'Clipboard' plugin was loaded.\n\t *\t\tif ( editor.plugins.has( 'Clipboard' ) ) {\n\t *\t\t\t// Now use clipboard plugin instance:\n\t *\t\t\tconst clipboard = editor.plugins.get( 'Clipboard' );\n\t *\n\t *\t\t\t// ...\n\t *\t\t}\n\t *\n\t * @param {Function|String} key The plugin constructor or {@link module:core/plugin~PluginInterface.pluginName name}.\n\t * @returns {Boolean}\n\t */\n\thas( key ) {\n\t\treturn this._plugins.has( key );\n\t}\n\n\t/**\n\t * Initializes a set of plugins and adds them to the collection.\n\t *\n\t * @param {Array.<Function|String>} plugins An array of {@link module:core/plugin~PluginInterface plugin constructors}\n\t * or {@link module:core/plugin~PluginInterface.pluginName plugin names}. The second option (names) works only if\n\t * `availablePlugins` were passed to the {@link #constructor}.\n\t * @param {Array.<String|Function>} [removePlugins] Names of plugins or plugin constructors\n\t * that should not be loaded (despite being specified in the `plugins` array).\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which gets resolved once all plugins are loaded\n\t * and available in the collection.\n\t */\n\tinit( plugins, removePlugins = [] ) {\n\t\tconst that = this;\n\t\tconst editor = this._editor;\n\t\tconst loading = new Set();\n\t\tconst loaded = [];\n\n\t\tconst pluginConstructors = mapToAvailableConstructors( plugins );\n\t\tconst removePluginConstructors = mapToAvailableConstructors( removePlugins );\n\t\tconst missingPlugins = getMissingPluginNames( plugins );\n\n\t\tif ( missingPlugins ) {\n\t\t\t/**\n\t\t\t * Some plugins are not available and could not be loaded.\n\t\t\t *\n\t\t\t * Plugin classes (constructors) need to be provided to the editor before they can be loaded by name.\n\t\t\t * This is usually done in CKEditor 5 builds by setting the {@link module:core/editor/editor~Editor.builtinPlugins}\n\t\t\t * property.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the {@glink builds/index CKEditor 5 Builds}**, it means\n\t\t\t * that you try to enable a plugin which was not included in that build. This may be due to a typo\n\t\t\t * in the plugin name or simply because that plugin is not a part of this build. In the latter scenario,\n\t\t\t * read more about {@glink builds/guides/development/custom-builds custom builds}.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the editor creators directly** (not a build), then it means\n\t\t\t * that you tried loading plugins by name. However, unlike CKEditor 4, CKEditor 5 does not implement a \"plugin loader\".\n\t\t\t * This means that CKEditor 5 does not know where to load the plugin modules from. Therefore, you need to\n\t\t\t * provide each plugin through reference (as a constructor function). Check out the examples in\n\t\t\t * {@glink builds/guides/integration/advanced-setup#scenario-2-building-from-source \"Building from source\"}.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-not-found\n\t\t\t * @param {Array.<String>} plugins The name of the plugins which could not be loaded.\n\t\t\t */\n\t\t\tconst errorMsg = 'plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.';\n\n\t\t\t// Log the error so it's more visible on the console. Hopefully, for better DX.\n\t\t\tlog.error( errorMsg, { plugins: missingPlugins } );\n\n\t\t\treturn Promise.reject( new CKEditorError( errorMsg, this._editor, { plugins: missingPlugins } ) );\n\t\t}\n\n\t\treturn Promise.all( pluginConstructors.map( loadPlugin ) )\n\t\t\t.then( () => initPlugins( loaded, 'init' ) )\n\t\t\t.then( () => initPlugins( loaded, 'afterInit' ) )\n\t\t\t.then( () => loaded );\n\n\t\tfunction loadPlugin( PluginConstructor ) {\n\t\t\tif ( removePluginConstructors.includes( PluginConstructor ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// The plugin is already loaded or being loaded - do nothing.\n\t\t\tif ( that._plugins.has( PluginConstructor ) || loading.has( PluginConstructor ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn instantiatePlugin( PluginConstructor )\n\t\t\t\t.catch( err => {\n\t\t\t\t\t/**\n\t\t\t\t\t * It was not possible to load the plugin.\n\t\t\t\t\t *\n\t\t\t\t\t * This is a generic error logged to the console when a JavaSript error is thrown during the initialization\n\t\t\t\t\t * of one of the plugins.\n\t\t\t\t\t *\n\t\t\t\t\t * If you correctly handled the promise returned by the editor's `create()` method (like shown below)\n\t\t\t\t\t * you will find the original error logged to the console, too:\n\t\t\t\t\t *\n\t\t\t\t\t *\t\tClassicEditor.create( document.getElementById( 'editor' ) )\n\t\t\t\t\t *\t\t\t.then( editor => {\n\t\t\t\t\t *\t\t\t\t// ...\n\t\t\t\t\t * \t\t\t} )\n\t\t\t\t\t *\t\t\t.catch( error => {\n\t\t\t\t\t *\t\t\t\tconsole.error( error );\n\t\t\t\t\t *\t\t\t} );\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-load\n\t\t\t\t\t * @param {String} plugin The name of the plugin that could not be loaded.\n\t\t\t\t\t */\n\t\t\t\t\tlog.error( 'plugincollection-load: It was not possible to load the plugin.', { plugin: PluginConstructor } );\n\n\t\t\t\t\tthrow err;\n\t\t\t\t} );\n\t\t}\n\n\t\tfunction initPlugins( loadedPlugins, method ) {\n\t\t\treturn loadedPlugins.reduce( ( promise, plugin ) => {\n\t\t\t\tif ( !plugin[ method ] ) {\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\treturn promise.then( plugin[ method ].bind( plugin ) );\n\t\t\t}, Promise.resolve() );\n\t\t}\n\n\t\tfunction instantiatePlugin( PluginConstructor ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tloading.add( PluginConstructor );\n\n\t\t\t\tif ( PluginConstructor.requires ) {\n\t\t\t\t\tPluginConstructor.requires.forEach( RequiredPluginConstructorOrName => {\n\t\t\t\t\t\tconst RequiredPluginConstructor = getPluginConstructor( RequiredPluginConstructorOrName );\n\n\t\t\t\t\t\tif ( removePlugins.includes( RequiredPluginConstructor ) ) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Cannot load a plugin because one of its dependencies is listed in the `removePlugins` option.\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @error plugincollection-required\n\t\t\t\t\t\t\t * @param {Function} plugin The required plugin.\n\t\t\t\t\t\t\t * @param {Function} requiredBy The parent plugin.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t\t\t'plugincollection-required: Cannot load a plugin because one of its dependencies is listed in' +\n\t\t\t\t\t\t\t\t'the `removePlugins` option.',\n\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\t{ plugin: RequiredPluginConstructor, requiredBy: PluginConstructor }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tloadPlugin( RequiredPluginConstructor );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tconst plugin = new PluginConstructor( editor );\n\t\t\t\tthat._add( PluginConstructor, plugin );\n\t\t\t\tloaded.push( plugin );\n\n\t\t\t\tresolve();\n\t\t\t} );\n\t\t}\n\n\t\tfunction getPluginConstructor( PluginConstructorOrName ) {\n\t\t\tif ( typeof PluginConstructorOrName == 'function' ) {\n\t\t\t\treturn PluginConstructorOrName;\n\t\t\t}\n\n\t\t\treturn that._availablePlugins.get( PluginConstructorOrName );\n\t\t}\n\n\t\tfunction getMissingPluginNames( plugins ) {\n\t\t\tconst missingPlugins = [];\n\n\t\t\tfor ( const pluginNameOrConstructor of plugins ) {\n\t\t\t\tif ( !getPluginConstructor( pluginNameOrConstructor ) ) {\n\t\t\t\t\tmissingPlugins.push( pluginNameOrConstructor );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn missingPlugins.length ? missingPlugins : null;\n\t\t}\n\n\t\tfunction mapToAvailableConstructors( plugins ) {\n\t\t\treturn plugins\n\t\t\t\t.map( pluginNameOrConstructor => getPluginConstructor( pluginNameOrConstructor ) )\n\t\t\t\t.filter( PluginConstructor => !!PluginConstructor );\n\t\t}\n\t}\n\n\t/**\n\t * Destroys all loaded plugins.\n\t *\n\t * @returns {Promise}\n\t */\n\tdestroy() {\n\t\tconst promises = Array.from( this )\n\t\t\t.map( ( [ , pluginInstance ] ) => pluginInstance )\n\t\t\t.filter( pluginInstance => typeof pluginInstance.destroy == 'function' )\n\t\t\t.map( pluginInstance => pluginInstance.destroy() );\n\n\t\treturn Promise.all( promises );\n\t}\n\n\t/**\n\t * Adds the plugin to the collection. Exposed mainly for testing purposes.\n\t *\n\t * @protected\n\t * @param {Function} PluginConstructor The plugin constructor.\n\t * @param {module:core/plugin~PluginInterface} plugin The instance of the plugin.\n\t */\n\t_add( PluginConstructor, plugin ) {\n\t\tthis._plugins.set( PluginConstructor, plugin );\n\n\t\tconst pluginName = PluginConstructor.pluginName;\n\n\t\tif ( !pluginName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._plugins.has( pluginName ) ) {\n\t\t\t/**\n\t\t\t * Two plugins with the same {@link module:core/plugin~PluginInterface.pluginName} were loaded.\n\t\t\t * This will lead to runtime conflicts between these plugins.\n\t\t\t *\n\t\t\t * In practice, this warning usually means that new plugins were added to an existing CKEditor 5 build.\n\t\t\t * Plugins should always be added to a source version of the editor (`@ckeditor/ckeditor5-editor-*`),\n\t\t\t * not to an editor imported from one of the `@ckeditor/ckeditor5-build-*` packages.\n\t\t\t *\n\t\t\t * Check your import paths and the list of plugins passed to\n\t\t\t * {@link module:core/editor/editor~Editor.create `Editor.create()`}\n\t\t\t * or specified in {@link module:core/editor/editor~Editor.builtinPlugins `Editor.builtinPlugins`}.\n\t\t\t *\n\t\t\t * The second option is that your `node_modules/` directory contains duplicated versions of the same\n\t\t\t * CKEditor 5 packages. Normally, on clean installations, npm deduplicates packages in `node_modules/`, so\n\t\t\t * it may be enough to call `rm -rf node_modules && npm i`. However, if you installed conflicting versions\n\t\t\t * of packages, their dependencies may need to be installed in more than one version which may lead to this\n\t\t\t * warning.\n\t\t\t *\n\t\t\t * Technically speaking, this error occurs because after adding a plugin to an existing editor build\n\t\t\t * dependencies of this plugin are being duplicated.\n\t\t\t * They are already built into that editor build and now get added for the second time as dependencies\n\t\t\t * of the plugin you are installing.\n\t\t\t *\n\t\t\t * Read more about {@glink builds/guides/integration/installing-plugins installing plugins}.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-name-conflict\n\t\t\t * @param {String} pluginName The duplicated plugin name.\n\t\t\t * @param {Function} plugin1 The first plugin constructor.\n\t\t\t * @param {Function} plugin2 The second plugin constructor.\n\t\t\t */\n\t\t\tlog.warn(\n\t\t\t\t'plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.',\n\t\t\t\t{ pluginName, plugin1: this._plugins.get( pluginName ).constructor, plugin2: PluginConstructor }\n\t\t\t);\n\t\t} else {\n\t\t\tthis._plugins.set( pluginName, plugin );\n\t\t}\n\t}\n}\n\nmix( PluginCollection, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/commandcollection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Collection of commands. Its instance is available in {@link module:core/editor/editor~Editor#commands `editor.commands`}.\n */\nexport default class CommandCollection {\n\t/**\n\t * Creates collection instance.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Command map.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._commands = new Map();\n\t}\n\n\t/**\n\t * Registers a new command.\n\t *\n\t * @param {String} commandName The name of the command.\n\t * @param {module:core/command~Command} command\n\t */\n\tadd( commandName, command ) {\n\t\tthis._commands.set( commandName, command );\n\t}\n\n\t/**\n\t * Retrieves a command from the collection.\n\t *\n\t * @param {String} commandName The name of the command.\n\t * @returns {module:core/command~Command}\n\t */\n\tget( commandName ) {\n\t\treturn this._commands.get( commandName );\n\t}\n\n\t/**\n\t * Executes a command.\n\t *\n\t * @param {String} commandName The name of the command.\n\t * @param {*} [...commandParams] Command parameters.\n\t */\n\texecute( commandName, ...args ) {\n\t\tconst command = this.get( commandName );\n\n\t\tif ( !command ) {\n\t\t\t/**\n\t\t\t * Command does not exist.\n\t\t\t *\n\t\t\t * @error commandcollection-command-not-found\n\t\t\t * @param {String} commandName Name of the command.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'commandcollection-command-not-found: Command does not exist.', this, { commandName } );\n\t\t}\n\n\t\tcommand.execute( ...args );\n\t}\n\n\t/**\n\t * Returns iterator of command names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\t* names() {\n\t\tyield* this._commands.keys();\n\t}\n\n\t/**\n\t * Returns iterator of command instances.\n\t *\n\t * @returns {Iterable.<module:core/command~Command>}\n\t */\n\t* commands() {\n\t\tyield* this._commands.values();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Returns `[ commandName, commandInstance ]` pairs.\n\t *\n\t * @returns {Iterable.<Array>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._commands[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Destroys all collection commands.\n\t */\n\tdestroy() {\n\t\tfor ( const command of this.commands() ) {\n\t\t\tcommand.destroy();\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals window */\n\n/**\n * @module utils/translation-service\n */\n\n/* istanbul ignore else */\nif ( !window.CKEDITOR_TRANSLATIONS ) {\n\twindow.CKEDITOR_TRANSLATIONS = {};\n}\n\n/**\n * Adds translations to existing ones.\n * These translations will later be available for the {@link module:utils/translation-service~translate `translate()`} function.\n *\n *\t\tadd( 'pl', {\n *\t\t\t'OK': 'OK',\n *\t\t\t'Cancel [context: reject]': 'Anuluj'\n *\t\t} );\n *\n * If you cannot import this function from this module (e.g. because you use a CKEditor 5 build), then you can\n * still add translations by extending the global `window.CKEDITOR_TRANSLATIONS` object by using a function like\n * the one below:\n *\n *\t\tfunction addTranslations( language, translations ) {\n *\t\t\tif ( !window.CKEDITOR_TRANSLATIONS ) {\n *\t\t\t\twindow.CKEDITOR_TRANSLATIONS = {};\n *\t\t\t}\n *\n *\t\t\tconst dictionary = window.CKEDITOR_TRANSLATIONS[ language ] || ( window.CKEDITOR_TRANSLATIONS[ language ] = {} );\n *\n *\t\t\t// Extend the dictionary for the given language.\n *\t\t\tObject.assign( dictionary, translations );\n *\t\t}\n *\n * @param {String} language Target language.\n * @param {Object.<String, String>} translations Translations which will be added to the dictionary.\n */\nexport function add( language, translations ) {\n\tconst dictionary = window.CKEDITOR_TRANSLATIONS[ language ] || ( window.CKEDITOR_TRANSLATIONS[ language ] = {} );\n\n\tObject.assign( dictionary, translations );\n}\n\n/**\n * Translates string if the translation of the string was previously added to the dictionary.\n * See {@link module:utils/translation-service Translation Service}.\n * This happens in a multi-language mode were translation modules are created by the bundler.\n *\n * When no translation is defined in the dictionary or the dictionary doesn't exist this function returns\n * the original string without the `'[context: ]'` (happens in development and single-language modes).\n *\n * In a single-language mode (when values passed to `t()` were replaced with target language strings) the dictionary\n * is left empty, so this function will return the original strings always.\n *\n *\t\ttranslate( 'pl', 'Cancel [context: reject]' );\n *\n * @param {String} language Target language.\n * @param {String} translationKey String that will be translated.\n * @returns {String} Translated sentence.\n */\nexport function translate( language, translationKey ) {\n\tconst numberOfLanguages = getNumberOfLanguages();\n\n\tif ( numberOfLanguages === 1 ) {\n\t\t// Override the language to the only supported one.\n\t\t// This can't be done in the `Locale` class, because the translations comes after the `Locale` class initialization.\n\t\tlanguage = Object.keys( window.CKEDITOR_TRANSLATIONS )[ 0 ];\n\t}\n\n\tif ( numberOfLanguages === 0 || !hasTranslation( language, translationKey ) ) {\n\t\treturn translationKey.replace( / \\[context: [^\\]]+\\]$/, '' );\n\t}\n\n\tconst dictionary = window.CKEDITOR_TRANSLATIONS[ language ];\n\n\t// In case of missing translations we still need to cut off the `[context: ]` parts.\n\treturn dictionary[ translationKey ].replace( / \\[context: [^\\]]+\\]$/, '' );\n}\n\n/**\n * Clears dictionaries for test purposes.\n *\n * @protected\n */\nexport function _clear() {\n\twindow.CKEDITOR_TRANSLATIONS = {};\n}\n\n// Checks whether the dictionary exists and translation in that dictionary exists.\nfunction hasTranslation( language, translationKey ) {\n\treturn (\n\t\t( language in window.CKEDITOR_TRANSLATIONS ) &&\n\t\t( translationKey in window.CKEDITOR_TRANSLATIONS[ language ] )\n\t);\n}\n\nfunction getNumberOfLanguages() {\n\treturn Object.keys( window.CKEDITOR_TRANSLATIONS ).length;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/locale\n */\n\nimport { translate } from './translation-service';\n\n/**\n * Represents the localization services.\n */\nexport default class Locale {\n\t/**\n\t * Creates a new instance of the Locale class.\n\t *\n\t * @param {String} [language='en'] The language code in [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t */\n\tconstructor( language ) {\n\t\t/**\n\t\t * The language code in [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.language = language || 'en';\n\n\t\t/**\n\t\t * Translates the given string to the {@link #language}. This method is also available in {@link module:core/editor/editor~Editor#t}\n\t\t * and {@link module:ui/view~View#t}.\n\t\t *\n\t\t * The strings may contain placeholders (`%<index>`) for values which are passed as the second argument.\n\t\t * `<index>` is the index in the `values` array.\n\t\t *\n\t\t *\t\teditor.t( 'Created file \"%0\" in %1ms.', [ fileName, timeTaken ] );\n\t\t *\n\t\t * This method's context is statically bound to Locale instance,\n\t\t * so it can be called as a function:\n\t\t *\n\t\t *\t\tconst t = this.t;\n\t\t *\t\tt( 'Label' );\n\t\t *\n\t\t * @method #t\n\t\t * @param {String} str The string to translate.\n\t\t * @param {String[]} [values] Values that should be used to interpolate the string.\n\t\t */\n\t\tthis.t = ( ...args ) => this._t( ...args );\n\t}\n\n\t/**\n\t * Base for the {@link #t} method.\n\t *\n\t * @private\n\t */\n\t_t( str, values ) {\n\t\tlet translatedString = translate( this.language, str );\n\n\t\tif ( values ) {\n\t\t\ttranslatedString = translatedString.replace( /%(\\d+)/g, ( match, index ) => {\n\t\t\t\treturn ( index < values.length ) ? values[ index ] : match;\n\t\t\t} );\n\t\t}\n\n\t\treturn translatedString;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/viewconsumable\n */\n\nimport { isArray } from 'lodash-es';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Class used for handling consumption of view {@link module:engine/view/element~Element elements},\n * {@link module:engine/view/text~Text text nodes} and {@link module:engine/view/documentfragment~DocumentFragment document fragments}.\n * Element's name and its parts (attributes, classes and styles) can be consumed separately. Consuming an element's name\n * does not consume its attributes, classes and styles.\n * To add items for consumption use {@link module:engine/conversion/viewconsumable~ViewConsumable#add add method}.\n * To test items use {@link module:engine/conversion/viewconsumable~ViewConsumable#test test method}.\n * To consume items use {@link module:engine/conversion/viewconsumable~ViewConsumable#consume consume method}.\n * To revert already consumed items use {@link module:engine/conversion/viewconsumable~ViewConsumable#revert revert method}.\n *\n *\t\tviewConsumable.add( element, { name: true } ); // Adds element's name as ready to be consumed.\n *\t\tviewConsumable.add( textNode ); // Adds text node for consumption.\n *\t\tviewConsumable.add( docFragment ); // Adds document fragment for consumption.\n *\t\tviewConsumable.test( element, { name: true }  ); // Tests if element's name can be consumed.\n *\t\tviewConsumable.test( textNode ); // Tests if text node can be consumed.\n *\t\tviewConsumable.test( docFragment ); // Tests if document fragment can be consumed.\n *\t\tviewConsumable.consume( element, { name: true }  ); // Consume element's name.\n *\t\tviewConsumable.consume( textNode ); // Consume text node.\n *\t\tviewConsumable.consume( docFragment ); // Consume document fragment.\n *\t\tviewConsumable.revert( element, { name: true }  ); // Revert already consumed element's name.\n *\t\tviewConsumable.revert( textNode ); // Revert already consumed text node.\n *\t\tviewConsumable.revert( docFragment ); // Revert already consumed document fragment.\n */\nexport default class ViewConsumable {\n\t/**\n\t * Creates new ViewConsumable.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Map of consumable elements. If {@link module:engine/view/element~Element element} is used as a key,\n\t\t * {@link module:engine/conversion/viewconsumable~ViewElementConsumables ViewElementConsumables} instance is stored as value.\n\t\t * For {@link module:engine/view/text~Text text nodes} and\n\t\t * {@link module:engine/view/documentfragment~DocumentFragment document fragments} boolean value is stored as value.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map.<module:engine/conversion/viewconsumable~ViewElementConsumables|Boolean>}\n\t\t*/\n\t\tthis._consumables = new Map();\n\t}\n\n\t/**\n\t * Adds {@link module:engine/view/element~Element view element}, {@link module:engine/view/text~Text text node} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment} as ready to be consumed.\n\t *\n\t *\t\tviewConsumable.add( p, { name: true } ); // Adds element's name to consume.\n\t *\t\tviewConsumable.add( p, { attributes: 'name' } ); // Adds element's attribute.\n\t *\t\tviewConsumable.add( p, { classes: 'foobar' } ); // Adds element's class.\n\t *\t\tviewConsumable.add( p, { styles: 'color' } ); // Adds element's style\n\t *\t\tviewConsumable.add( p, { attributes: 'name', styles: 'color' } ); // Adds attribute and style.\n\t *\t\tviewConsumable.add( p, { classes: [ 'baz', 'bar' ] } ); // Multiple consumables can be provided.\n\t *\t\tviewConsumable.add( textNode ); // Adds text node to consume.\n\t *\t\tviewConsumable.add( docFragment ); // Adds document fragment to consume.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `viewconsumable-invalid-attribute` when `class` or `style`\n\t * attribute is provided - it should be handled separately by providing actual style/class.\n\t *\n\t *\t\tviewConsumable.add( p, { attributes: 'style' } ); // This call will throw an exception.\n\t *\t\tviewConsumable.add( p, { styles: 'color' } ); // This is properly handled style.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment} element\n\t * @param {Object} [consumables] Used only if first parameter is {@link module:engine/view/element~Element view element} instance.\n\t * @param {Boolean} consumables.name If set to true element's name will be included.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names.\n\t */\n\tadd( element, consumables ) {\n\t\tlet elementConsumables;\n\n\t\t// For text nodes and document fragments just mark them as consumable.\n\t\tif ( element.is( 'text' ) || element.is( 'documentFragment' ) ) {\n\t\t\tthis._consumables.set( element, true );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// For elements create new ViewElementConsumables or update already existing one.\n\t\tif ( !this._consumables.has( element ) ) {\n\t\t\telementConsumables = new ViewElementConsumables();\n\t\t\tthis._consumables.set( element, elementConsumables );\n\t\t} else {\n\t\t\telementConsumables = this._consumables.get( element );\n\t\t}\n\n\t\telementConsumables.add( consumables );\n\t}\n\n\t/**\n\t * Tests if {@link module:engine/view/element~Element view element}, {@link module:engine/view/text~Text text node} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment} can be consumed.\n\t * It returns `true` when all items included in method's call can be consumed. Returns `false` when\n\t * first already consumed item is found and `null` when first non-consumable item is found.\n\t *\n\t *\t\tviewConsumable.test( p, { name: true } ); // Tests element's name.\n\t *\t\tviewConsumable.test( p, { attributes: 'name' } ); // Tests attribute.\n\t *\t\tviewConsumable.test( p, { classes: 'foobar' } ); // Tests class.\n\t *\t\tviewConsumable.test( p, { styles: 'color' } ); // Tests style.\n\t *\t\tviewConsumable.test( p, { attributes: 'name', styles: 'color' } ); // Tests attribute and style.\n\t *\t\tviewConsumable.test( p, { classes: [ 'baz', 'bar' ] } ); // Multiple consumables can be tested.\n\t *\t\tviewConsumable.test( textNode ); // Tests text node.\n\t *\t\tviewConsumable.test( docFragment ); // Tests document fragment.\n\t *\n\t * Testing classes and styles as attribute will test if all added classes/styles can be consumed.\n\t *\n\t *\t\tviewConsumable.test( p, { attributes: 'class' } ); // Tests if all added classes can be consumed.\n\t *\t\tviewConsumable.test( p, { attributes: 'style' } ); // Tests if all added styles can be consumed.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment} element\n\t * @param {Object} [consumables] Used only if first parameter is {@link module:engine/view/element~Element view element} instance.\n\t * @param {Boolean} consumables.name If set to true element's name will be included.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names.\n\t * @returns {Boolean|null} Returns `true` when all items included in method's call can be consumed. Returns `false`\n\t * when first already consumed item is found and `null` when first non-consumable item is found.\n\t */\n\ttest( element, consumables ) {\n\t\tconst elementConsumables = this._consumables.get( element );\n\n\t\tif ( elementConsumables === undefined ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// For text nodes and document fragments return stored boolean value.\n\t\tif ( element.is( 'text' ) || element.is( 'documentFragment' ) ) {\n\t\t\treturn elementConsumables;\n\t\t}\n\n\t\t// For elements test consumables object.\n\t\treturn elementConsumables.test( consumables );\n\t}\n\n\t/**\n\t * Consumes {@link module:engine/view/element~Element view element}, {@link module:engine/view/text~Text text node} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment}.\n\t * It returns `true` when all items included in method's call can be consumed, otherwise returns `false`.\n\t *\n\t *\t\tviewConsumable.consume( p, { name: true } ); // Consumes element's name.\n\t *\t\tviewConsumable.consume( p, { attributes: 'name' } ); // Consumes element's attribute.\n\t *\t\tviewConsumable.consume( p, { classes: 'foobar' } ); // Consumes element's class.\n\t *\t\tviewConsumable.consume( p, { styles: 'color' } ); // Consumes element's style.\n\t *\t\tviewConsumable.consume( p, { attributes: 'name', styles: 'color' } ); // Consumes attribute and style.\n\t *\t\tviewConsumable.consume( p, { classes: [ 'baz', 'bar' ] } ); // Multiple consumables can be consumed.\n\t *\t\tviewConsumable.consume( textNode ); // Consumes text node.\n\t *\t\tviewConsumable.consume( docFragment ); // Consumes document fragment.\n\t *\n\t * Consuming classes and styles as attribute will test if all added classes/styles can be consumed.\n\t *\n\t *\t\tviewConsumable.consume( p, { attributes: 'class' } ); // Consume only if all added classes can be consumed.\n\t *\t\tviewConsumable.consume( p, { attributes: 'style' } ); // Consume only if all added styles can be consumed.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment} element\n\t * @param {Object} [consumables] Used only if first parameter is {@link module:engine/view/element~Element view element} instance.\n\t * @param {Boolean} consumables.name If set to true element's name will be included.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names.\n\t * @returns {Boolean} Returns `true` when all items included in method's call can be consumed,\n\t * otherwise returns `false`.\n\t */\n\tconsume( element, consumables ) {\n\t\tif ( this.test( element, consumables ) ) {\n\t\t\tif ( element.is( 'text' ) || element.is( 'documentFragment' ) ) {\n\t\t\t\t// For text nodes and document fragments set value to false.\n\t\t\t\tthis._consumables.set( element, false );\n\t\t\t} else {\n\t\t\t\t// For elements - consume consumables object.\n\t\t\t\tthis._consumables.get( element ).consume( consumables );\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Reverts {@link module:engine/view/element~Element view element}, {@link module:engine/view/text~Text text node} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment} so they can be consumed once again.\n\t * Method does not revert items that were never previously added for consumption, even if they are included in\n\t * method's call.\n\t *\n\t *\t\tviewConsumable.revert( p, { name: true } ); // Reverts element's name.\n\t *\t\tviewConsumable.revert( p, { attributes: 'name' } ); // Reverts element's attribute.\n\t *\t\tviewConsumable.revert( p, { classes: 'foobar' } ); // Reverts element's class.\n\t *\t\tviewConsumable.revert( p, { styles: 'color' } ); // Reverts element's style.\n\t *\t\tviewConsumable.revert( p, { attributes: 'name', styles: 'color' } ); // Reverts attribute and style.\n\t *\t\tviewConsumable.revert( p, { classes: [ 'baz', 'bar' ] } ); // Multiple names can be reverted.\n\t *\t\tviewConsumable.revert( textNode ); // Reverts text node.\n\t *\t\tviewConsumable.revert( docFragment ); // Reverts document fragment.\n\t *\n\t * Reverting classes and styles as attribute will revert all classes/styles that were previously added for\n\t * consumption.\n\t *\n\t *\t\tviewConsumable.revert( p, { attributes: 'class' } ); // Reverts all classes added for consumption.\n\t *\t\tviewConsumable.revert( p, { attributes: 'style' } ); // Reverts all styles added for consumption.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/text~Text|module:engine/view/documentfragment~DocumentFragment} element\n\t * @param {Object} [consumables] Used only if first parameter is {@link module:engine/view/element~Element view element} instance.\n\t * @param {Boolean} consumables.name If set to true element's name will be included.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names.\n\t */\n\trevert( element, consumables ) {\n\t\tconst elementConsumables = this._consumables.get( element );\n\n\t\tif ( elementConsumables !== undefined ) {\n\t\t\tif ( element.is( 'text' ) || element.is( 'documentFragment' ) ) {\n\t\t\t\t// For text nodes and document fragments - set consumable to true.\n\t\t\t\tthis._consumables.set( element, true );\n\t\t\t} else {\n\t\t\t\t// For elements - revert items from consumables object.\n\t\t\t\telementConsumables.revert( consumables );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates consumable object from {@link module:engine/view/element~Element view element}. Consumable object will include\n\t * element's name and all its attributes, classes and styles.\n\t *\n\t * @static\n\t * @param {module:engine/view/element~Element} element\n\t * @returns {Object} consumables\n\t */\n\tstatic consumablesFromElement( element ) {\n\t\tconst consumables = {\n\t\t\tname: true,\n\t\t\tattributes: [],\n\t\t\tclasses: [],\n\t\t\tstyles: []\n\t\t};\n\n\t\tconst attributes = element.getAttributeKeys();\n\n\t\tfor ( const attribute of attributes ) {\n\t\t\t// Skip classes and styles - will be added separately.\n\t\t\tif ( attribute == 'style' || attribute == 'class' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconsumables.attributes.push( attribute );\n\t\t}\n\n\t\tconst classes = element.getClassNames();\n\n\t\tfor ( const className of classes ) {\n\t\t\tconsumables.classes.push( className );\n\t\t}\n\n\t\tconst styles = element.getStyleNames();\n\n\t\tfor ( const style of styles ) {\n\t\t\tconsumables.styles.push( style );\n\t\t}\n\n\t\treturn consumables;\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/viewconsumable~ViewConsumable ViewConsumable} instance from\n\t * {@link module:engine/view/node~Node node} or {@link module:engine/view/documentfragment~DocumentFragment document fragment}.\n\t * Instance will contain all elements, child nodes, attributes, styles and classes added for consumption.\n\t *\n\t * @static\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} from View node or document fragment\n\t * from which `ViewConsumable` will be created.\n\t * @param {module:engine/conversion/viewconsumable~ViewConsumable} [instance] If provided, given `ViewConsumable` instance will be used\n\t * to add all consumables. It will be returned instead of a new instance.\n\t */\n\tstatic createFrom( from, instance ) {\n\t\tif ( !instance ) {\n\t\t\tinstance = new ViewConsumable();\n\t\t}\n\n\t\tif ( from.is( 'text' ) ) {\n\t\t\tinstance.add( from );\n\n\t\t\treturn instance;\n\t\t}\n\n\t\t// Add `from` itself, if it is an element.\n\t\tif ( from.is( 'element' ) ) {\n\t\t\tinstance.add( from, ViewConsumable.consumablesFromElement( from ) );\n\t\t}\n\n\t\tif ( from.is( 'documentFragment' ) ) {\n\t\t\tinstance.add( from );\n\t\t}\n\n\t\tfor ( const child of from.getChildren() ) {\n\t\t\tinstance = ViewConsumable.createFrom( child, instance );\n\t\t}\n\n\t\treturn instance;\n\t}\n}\n\n/**\n * This is a private helper-class for {@link module:engine/conversion/viewconsumable~ViewConsumable}.\n * It represents and manipulates consumable parts of a single {@link module:engine/view/element~Element}.\n *\n * @private\n */\nclass ViewElementConsumables {\n\t/**\n\t * Creates ViewElementConsumables instance.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Flag indicating if name of the element can be consumed.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._canConsumeName = null;\n\n\t\t/**\n\t\t * Contains maps of element's consumables: attributes, classes and styles.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._consumables = {\n\t\t\tattributes: new Map(),\n\t\t\tstyles: new Map(),\n\t\t\tclasses: new Map()\n\t\t};\n\t}\n\n\t/**\n\t * Adds consumable parts of the {@link module:engine/view/element~Element view element}.\n\t * Element's name itself can be marked to be consumed (when element's name is consumed its attributes, classes and\n\t * styles still could be consumed):\n\t *\n\t *\t\tconsumables.add( { name: true } );\n\t *\n\t * Attributes classes and styles:\n\t *\n\t *\t\tconsumables.add( { attributes: 'title', classes: 'foo', styles: 'color' } );\n\t *\t\tconsumables.add( { attributes: [ 'title', 'name' ], classes: [ 'foo', 'bar' ] );\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `viewconsumable-invalid-attribute` when `class` or `style`\n\t * attribute is provided - it should be handled separately by providing `style` and `class` in consumables object.\n\t *\n\t * @param {Object} consumables Object describing which parts of the element can be consumed.\n\t * @param {Boolean} consumables.name If set to `true` element's name will be added as consumable.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names to add as consumable.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names to add as consumable.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names to add as consumable.\n\t */\n\tadd( consumables ) {\n\t\tif ( consumables.name ) {\n\t\t\tthis._canConsumeName = true;\n\t\t}\n\n\t\tfor ( const type in this._consumables ) {\n\t\t\tif ( type in consumables ) {\n\t\t\t\tthis._add( type, consumables[ type ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Tests if parts of the {@link module:engine/view/node~Node view node} can be consumed.\n\t *\n\t * Element's name can be tested:\n\t *\n\t *\t\tconsumables.test( { name: true } );\n\t *\n\t * Attributes classes and styles:\n\t *\n\t *\t\tconsumables.test( { attributes: 'title', classes: 'foo', styles: 'color' } );\n\t *\t\tconsumables.test( { attributes: [ 'title', 'name' ], classes: [ 'foo', 'bar' ] );\n\t *\n\t * @param {Object} consumables Object describing which parts of the element should be tested.\n\t * @param {Boolean} consumables.name If set to `true` element's name will be tested.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names to test.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names to test.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names to test.\n\t * @returns {Boolean|null} `true` when all tested items can be consumed, `null` when even one of the items\n\t * was never marked for consumption and `false` when even one of the items was already consumed.\n\t */\n\ttest( consumables ) {\n\t\t// Check if name can be consumed.\n\t\tif ( consumables.name && !this._canConsumeName ) {\n\t\t\treturn this._canConsumeName;\n\t\t}\n\n\t\tfor ( const type in this._consumables ) {\n\t\t\tif ( type in consumables ) {\n\t\t\t\tconst value = this._test( type, consumables[ type ] );\n\n\t\t\t\tif ( value !== true ) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Return true only if all can be consumed.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Consumes parts of {@link module:engine/view/element~Element view element}. This function does not check if consumable item\n\t * is already consumed - it consumes all consumable items provided.\n\t * Element's name can be consumed:\n\t *\n\t *\t\tconsumables.consume( { name: true } );\n\t *\n\t * Attributes classes and styles:\n\t *\n\t *\t\tconsumables.consume( { attributes: 'title', classes: 'foo', styles: 'color' } );\n\t *\t\tconsumables.consume( { attributes: [ 'title', 'name' ], classes: [ 'foo', 'bar' ] );\n\t *\n\t * @param {Object} consumables Object describing which parts of the element should be consumed.\n\t * @param {Boolean} consumables.name If set to `true` element's name will be consumed.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names to consume.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names to consume.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names to consume.\n\t */\n\tconsume( consumables ) {\n\t\tif ( consumables.name ) {\n\t\t\tthis._canConsumeName = false;\n\t\t}\n\n\t\tfor ( const type in this._consumables ) {\n\t\t\tif ( type in consumables ) {\n\t\t\t\tthis._consume( type, consumables[ type ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Revert already consumed parts of {@link module:engine/view/element~Element view Element}, so they can be consumed once again.\n\t * Element's name can be reverted:\n\t *\n\t *\t\tconsumables.revert( { name: true } );\n\t *\n\t * Attributes classes and styles:\n\t *\n\t *\t\tconsumables.revert( { attributes: 'title', classes: 'foo', styles: 'color' } );\n\t *\t\tconsumables.revert( { attributes: [ 'title', 'name' ], classes: [ 'foo', 'bar' ] );\n\t *\n\t * @param {Object} consumables Object describing which parts of the element should be reverted.\n\t * @param {Boolean} consumables.name If set to `true` element's name will be reverted.\n\t * @param {String|Array.<String>} consumables.attributes Attribute name or array of attribute names to revert.\n\t * @param {String|Array.<String>} consumables.classes Class name or array of class names to revert.\n\t * @param {String|Array.<String>} consumables.styles Style name or array of style names to revert.\n\t */\n\trevert( consumables ) {\n\t\tif ( consumables.name ) {\n\t\t\tthis._canConsumeName = true;\n\t\t}\n\n\t\tfor ( const type in this._consumables ) {\n\t\t\tif ( type in consumables ) {\n\t\t\t\tthis._revert( type, consumables[ type ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Helper method that adds consumables of a given type: attribute, class or style.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `viewconsumable-invalid-attribute` when `class` or `style`\n\t * type is provided - it should be handled separately by providing actual style/class type.\n\t *\n\t * @private\n\t * @param {String} type Type of the consumable item: `attributes`, `classes` or `styles`.\n\t * @param {String|Array.<String>} item Consumable item or array of items.\n\t */\n\t_add( type, item ) {\n\t\tconst items = isArray( item ) ? item : [ item ];\n\t\tconst consumables = this._consumables[ type ];\n\n\t\tfor ( const name of items ) {\n\t\t\tif ( type === 'attributes' && ( name === 'class' || name === 'style' ) ) {\n\t\t\t\t/**\n\t\t\t\t * Class and style attributes should be handled separately in\n\t\t\t\t * {@link module:engine/conversion/viewconsumable~ViewConsumable#add `ViewConsumable#add()`}.\n\t\t\t\t *\n\t\t\t\t * What you have done is trying to use:\n\t\t\t\t *\n\t\t\t\t *\t\tconsumables.add( { attributes: [ 'class', 'style' ] } );\n\t\t\t\t *\n\t\t\t\t * While each class and style should be registered separately:\n\t\t\t\t *\n\t\t\t\t *\t\tconsumables.add( { classes: 'some-class', styles: 'font-weight' } );\n\t\t\t\t *\n\t\t\t\t * @error viewconsumable-invalid-attribute\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'viewconsumable-invalid-attribute: Classes and styles should be handled separately.', this );\n\t\t\t}\n\n\t\t\tconsumables.set( name, true );\n\t\t}\n\t}\n\n\t/**\n\t * Helper method that tests consumables of a given type: attribute, class or style.\n\t *\n\t * @private\n\t * @param {String} type Type of the consumable item: `attributes`, `classes` or `styles`.\n\t * @param {String|Array.<String>} item Consumable item or array of items.\n\t * @returns {Boolean|null} Returns `true` if all items can be consumed, `null` when one of the items cannot be\n\t * consumed and `false` when one of the items is already consumed.\n\t */\n\t_test( type, item ) {\n\t\tconst items = isArray( item ) ? item : [ item ];\n\t\tconst consumables = this._consumables[ type ];\n\n\t\tfor ( const name of items ) {\n\t\t\tif ( type === 'attributes' && ( name === 'class' || name === 'style' ) ) {\n\t\t\t\tconst consumableName = name == 'class' ? 'classes' : 'styles';\n\n\t\t\t\t// Check all classes/styles if class/style attribute is tested.\n\t\t\t\tconst value = this._test( consumableName, [ ...this._consumables[ consumableName ].keys() ] );\n\n\t\t\t\tif ( value !== true ) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst value = consumables.get( name );\n\t\t\t\t// Return null if attribute is not found.\n\t\t\t\tif ( value === undefined ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif ( !value ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Helper method that consumes items of a given type: attribute, class or style.\n\t *\n\t * @private\n\t * @param {String} type Type of the consumable item: `attributes`, `classes` or `styles`.\n\t * @param {String|Array.<String>} item Consumable item or array of items.\n\t */\n\t_consume( type, item ) {\n\t\tconst items = isArray( item ) ? item : [ item ];\n\t\tconst consumables = this._consumables[ type ];\n\n\t\tfor ( const name of items ) {\n\t\t\tif ( type === 'attributes' && ( name === 'class' || name === 'style' ) ) {\n\t\t\t\tconst consumableName = name == 'class' ? 'classes' : 'styles';\n\n\t\t\t\t// If class or style is provided for consumption - consume them all.\n\t\t\t\tthis._consume( consumableName, [ ...this._consumables[ consumableName ].keys() ] );\n\t\t\t} else {\n\t\t\t\tconsumables.set( name, false );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Helper method that reverts items of a given type: attribute, class or style.\n\t *\n\t * @private\n\t * @param {String} type Type of the consumable item: `attributes`, `classes` or , `styles`.\n\t * @param {String|Array.<String>} item Consumable item or array of items.\n\t */\n\t_revert( type, item ) {\n\t\tconst items = isArray( item ) ? item : [ item ];\n\t\tconst consumables = this._consumables[ type ];\n\n\t\tfor ( const name of items ) {\n\t\t\tif ( type === 'attributes' && ( name === 'class' || name === 'style' ) ) {\n\t\t\t\tconst consumableName = name == 'class' ? 'classes' : 'styles';\n\n\t\t\t\t// If class or style is provided for reverting - revert them all.\n\t\t\t\tthis._revert( consumableName, [ ...this._consumables[ consumableName ].keys() ] );\n\t\t\t} else {\n\t\t\t\tconst value = consumables.get( name );\n\n\t\t\t\tif ( value === false ) {\n\t\t\t\t\tconsumables.set( name, true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/schema\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\nimport Range from './range';\nimport Position from './position';\nimport Element from './element';\nimport Text from './text';\nimport TreeWalker from './treewalker';\n\n/**\n * The model's schema. It defines allowed and disallowed structures of nodes as well as nodes' attributes.\n * The schema is usually defined by features and based on them the editing framework and features\n * make decisions how to change and process the model.\n *\n * The instance of schema is available in {@link module:engine/model/model~Model#schema `editor.model.schema`}.\n *\n * Read more about the schema in:\n *\n * * {@glink framework/guides/architecture/editing-engine#schema \"Schema\"} section of the\n * {@glink framework/guides/architecture/editing-engine Introduction to the \"Editing engine architecture\"}.\n * * {@glink framework/guides/deep-dive/schema \"Schema\" deep dive} guide.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Schema {\n\t/**\n\t * Creates schema instance.\n\t */\n\tconstructor() {\n\t\tthis._sourceDefinitions = {};\n\n\t\t/**\n\t\t * A dictionary containing attribute properties.\n\t\t *\n\t\t * @private\n\t\t * @member {Object.<String,String>}\n\t\t */\n\t\tthis._attributeProperties = {};\n\n\t\tthis.decorate( 'checkChild' );\n\t\tthis.decorate( 'checkAttribute' );\n\n\t\tthis.on( 'checkAttribute', ( evt, args ) => {\n\t\t\targs[ 0 ] = new SchemaContext( args[ 0 ] );\n\t\t}, { priority: 'highest' } );\n\n\t\tthis.on( 'checkChild', ( evt, args ) => {\n\t\t\targs[ 0 ] = new SchemaContext( args[ 0 ] );\n\t\t\targs[ 1 ] = this.getDefinition( args[ 1 ] );\n\t\t}, { priority: 'highest' } );\n\t}\n\n\t/**\n\t * Registers schema item. Can only be called once for every item name.\n\t *\n\t *\t\tschema.register( 'paragraph', {\n\t *\t\t\tinheritAllFrom: '$block'\n\t *\t\t} );\n\t *\n\t * @param {String} itemName\n\t * @param {module:engine/model/schema~SchemaItemDefinition} definition\n\t */\n\tregister( itemName, definition ) {\n\t\tif ( this._sourceDefinitions[ itemName ] ) {\n\t\t\t/**\n\t\t\t * A single item cannot be registered twice in the schema.\n\t\t\t *\n\t\t\t * This situation may happen when:\n\t\t\t *\n\t\t\t * * Two or more plugins called {@link #register `register()`} with the same name. This will usually mean that\n\t\t\t * there is a collision between plugins which try to use the same element in the model. Unfortunately,\n\t\t\t * the only way to solve this is by modifying one of these plugins to use a unique model element name.\n\t\t\t * * A single plugin was loaded twice. This happens when it is installed by npm/yarn in two versions\n\t\t\t * and usually means one or more of the following issues:\n\t\t\t *     * a version mismatch (two of your dependencies require two different versions of this plugin),\n\t\t\t *     * incorrect imports (this plugin is somehow imported twice in a way which confuses webpack),\n\t\t\t *     * mess in `node_modules/` (`rm -rf node_modules/` may help).\n\t\t\t *\n\t\t\t * **Note:** Check the logged `itemName` to better understand which plugin was duplicated/conflicting.\n\t\t\t *\n\t\t\t * @param itemName The name of the model element that is being registered twice.\n\t\t\t * @error schema-cannot-register-item-twice\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.',\n\t\t\t\tthis,\n\t\t\t\t{\n\t\t\t\t\titemName\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tthis._sourceDefinitions[ itemName ] = [\n\t\t\tObject.assign( {}, definition )\n\t\t];\n\n\t\tthis._clearCache();\n\t}\n\n\t/**\n\t * Extends a {@link #register registered} item's definition.\n\t *\n\t * Extending properties such as `allowIn` will add more items to the existing properties,\n\t * while redefining properties such as `isBlock` will override the previously defined ones.\n\t *\n\t *\t\tschema.register( 'foo', {\n\t *\t\t\tallowIn: '$root',\n\t *\t\t\tisBlock: true;\n\t *\t\t} );\n\t *\t\tschema.extend( 'foo', {\n\t *\t\t\tallowIn: 'blockQuote',\n\t *\t\t\tisBlock: false\n\t *\t\t} );\n\t *\n\t *\t\tschema.getDefinition( 'foo' );\n\t *\t\t//\t{\n\t *\t\t//\t\tallowIn: [ '$root', 'blockQuote' ],\n\t *\t\t// \t\tisBlock: false\n\t *\t\t//\t}\n\t *\n\t * @param {String} itemName\n\t * @param {module:engine/model/schema~SchemaItemDefinition} definition\n\t */\n\textend( itemName, definition ) {\n\t\tif ( !this._sourceDefinitions[ itemName ] ) {\n\t\t\t/**\n\t\t\t * Cannot extend an item which was not registered yet.\n\t\t\t *\n\t\t\t * This error happens when a plugin tries to extend the schema definition of an item which was not\n\t\t\t * {@link #register registered} yet.\n\t\t\t *\n\t\t\t * @param itemName The name of the model element which is being extended.\n\t\t\t * @error schema-cannot-register-item-twice\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.', this, {\n\t\t\t\titemName\n\t\t\t} );\n\t\t}\n\n\t\tthis._sourceDefinitions[ itemName ].push( Object.assign( {}, definition ) );\n\n\t\tthis._clearCache();\n\t}\n\n\t/**\n\t * Returns all registered items.\n\t *\n\t * @returns {Object.<String,module:engine/model/schema~SchemaCompiledItemDefinition>}\n\t */\n\tgetDefinitions() {\n\t\tif ( !this._compiledDefinitions ) {\n\t\t\tthis._compile();\n\t\t}\n\n\t\treturn this._compiledDefinitions;\n\t}\n\n\t/**\n\t * Returns a definition of the given item or `undefined` if item is not registered.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t * @returns {module:engine/model/schema~SchemaCompiledItemDefinition}\n\t */\n\tgetDefinition( item ) {\n\t\tlet itemName;\n\n\t\tif ( typeof item == 'string' ) {\n\t\t\titemName = item;\n\t\t} else if ( item.is && ( item.is( 'text' ) || item.is( 'textProxy' ) ) ) {\n\t\t\titemName = '$text';\n\t\t}\n\t\t// Element or module:engine/model/schema~SchemaContextItem.\n\t\telse {\n\t\t\titemName = item.name;\n\t\t}\n\n\t\treturn this.getDefinitions()[ itemName ];\n\t}\n\n\t/**\n\t * Returns `true` if the given item is registered in the schema.\n\t *\n\t *\t\tschema.isRegistered( 'paragraph' ); // -> true\n\t *\t\tschema.isRegistered( editor.model.document.getRoot() ); // -> true\n\t *\t\tschema.isRegistered( 'foo' ); // -> false\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisRegistered( item ) {\n\t\treturn !!this.getDefinition( item );\n\t}\n\n\t/**\n\t * Returns `true` if the given item is defined to be\n\t * a block by {@link module:engine/model/schema~SchemaItemDefinition}'s `isBlock` property.\n\t *\n\t *\t\tschema.isBlock( 'paragraph' ); // -> true\n\t *\t\tschema.isBlock( '$root' ); // -> false\n\t *\n\t *\t\tconst paragraphElement = writer.createElement( 'paragraph' );\n\t *\t\tschema.isBlock( paragraphElement ); // -> true\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisBlock( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\treturn !!( def && def.isBlock );\n\t}\n\n\t/**\n\t * Returns `true` if the given item is defined to be\n\t * a limit element by {@link module:engine/model/schema~SchemaItemDefinition}'s `isLimit` or `isObject` property\n\t * (all objects are also limits).\n\t *\n\t *\t\tschema.isLimit( 'paragraph' ); // -> false\n\t *\t\tschema.isLimit( '$root' ); // -> true\n\t *\t\tschema.isLimit( editor.model.document.getRoot() ); // -> true\n\t *\t\tschema.isLimit( 'image' ); // -> true\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisLimit( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !!( def.isLimit || def.isObject );\n\t}\n\n\t/**\n\t * Returns `true` if the given item is defined to be\n\t * an object element by {@link module:engine/model/schema~SchemaItemDefinition}'s `isObject` property.\n\t *\n\t *\t\tschema.isObject( 'paragraph' ); // -> false\n\t *\t\tschema.isObject( 'image' ); // -> true\n\t *\n\t *\t\tconst imageElement = writer.createElement( 'image' );\n\t *\t\tschema.isObject( imageElement ); // -> true\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisObject( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\treturn !!( def && def.isObject );\n\t}\n\n\t/**\n\t * Returns `true` if the given item is defined to be\n\t * an inline element by {@link module:engine/model/schema~SchemaItemDefinition}'s `isInline` property.\n\t *\n\t *\t\tschema.isInline( 'paragraph' ); // -> false\n\t *\t\tschema.isInline( 'softBreak' ); // -> true\n\t *\n\t *\t\tconst text = writer.createText('foo' );\n\t *\t\tschema.isInline( text ); // -> true\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/schema~SchemaContextItem|String} item\n\t */\n\tisInline( item ) {\n\t\tconst def = this.getDefinition( item );\n\n\t\treturn !!( def && def.isInline );\n\t}\n\n\t/**\n\t * Checks whether the given node (`child`) can be a child of the given context.\n\t *\n\t *\t\tschema.checkChild( model.document.getRoot(), paragraph ); // -> false\n\t *\n\t *\t\tschema.register( 'paragraph', {\n\t *\t\t\tallowIn: '$root'\n\t *\t\t} );\n\t *\t\tschema.checkChild( model.document.getRoot(), paragraph ); // -> true\n\t *\n\t * Note: When verifying whether the given node can be a child of the given context, the\n\t * schema also verifies the entire context &mdash; from its root to its last element. Therefore, it is possible\n\t * for `checkChild()` to return `false` even though the context's last element can contain the checked child.\n\t * It happens if one of the context's elements does not allow its child.\n\t *\n\t * @fires checkChild\n\t * @param {module:engine/model/schema~SchemaContextDefinition} context The context in which the child will be checked.\n\t * @param {module:engine/model/node~Node|String} def The child to check.\n\t */\n\tcheckChild( context, def ) {\n\t\t// Note: context and child are already normalized here to a SchemaContext and SchemaCompiledItemDefinition.\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this._checkContextMatch( def, context );\n\t}\n\n\t/**\n\t * Checks whether the given attribute can be applied in the given context (on the last\n\t * item of the context).\n\t *\n\t *\t\tschema.checkAttribute( textNode, 'bold' ); // -> false\n\t *\n\t *\t\tschema.extend( '$text', {\n\t *\t\t\tallowAttributes: 'bold'\n\t *\t\t} );\n\t *\t\tschema.checkAttribute( textNode, 'bold' ); // -> true\n\t *\n\t * @fires checkAttribute\n\t * @param {module:engine/model/schema~SchemaContextDefinition} context The context in which the attribute will be checked.\n\t * @param {String} attributeName\n\t */\n\tcheckAttribute( context, attributeName ) {\n\t\tconst def = this.getDefinition( context.last );\n\n\t\tif ( !def ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn def.allowAttributes.includes( attributeName );\n\t}\n\n\t/**\n\t * Checks whether the given element (`elementToMerge`) can be merged with the specified base element (`positionOrBaseElement`).\n\t *\n\t * In other words &mdash; whether `elementToMerge`'s children {@link #checkChild are allowed} in the `positionOrBaseElement`.\n\t *\n\t * This check ensures that elements merged with {@link module:engine/model/writer~Writer#merge `Writer#merge()`}\n\t * will be valid.\n\t *\n\t * Instead of elements, you can pass the instance of the {@link module:engine/model/position~Position} class as the\n\t * `positionOrBaseElement`. It means that the elements before and after the position will be checked whether they can be merged.\n\t *\n\t * @param {module:engine/model/position~Position|module:engine/model/element~Element} positionOrBaseElement The position or base\n\t * element to which the `elementToMerge` will be merged.\n\t * @param {module:engine/model/element~Element} elementToMerge The element to merge. Required if `positionOrBaseElement` is an element.\n\t * @returns {Boolean}\n\t */\n\tcheckMerge( positionOrBaseElement, elementToMerge = null ) {\n\t\tif ( positionOrBaseElement instanceof Position ) {\n\t\t\tconst nodeBefore = positionOrBaseElement.nodeBefore;\n\t\t\tconst nodeAfter = positionOrBaseElement.nodeAfter;\n\n\t\t\tif ( !( nodeBefore instanceof Element ) ) {\n\t\t\t\t/**\n\t\t\t\t * The node before the merge position must be an element.\n\t\t\t\t *\n\t\t\t\t * @error schema-check-merge-no-element-before\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'schema-check-merge-no-element-before: The node before the merge position must be an element.',\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( !( nodeAfter instanceof Element ) ) {\n\t\t\t\t/**\n\t\t\t\t * The node after the merge position must be an element.\n\t\t\t\t *\n\t\t\t\t * @error schema-check-merge-no-element-after\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'schema-check-merge-no-element-after: The node after the merge position must be an element.',\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn this.checkMerge( nodeBefore, nodeAfter );\n\t\t}\n\n\t\tfor ( const child of elementToMerge.getChildren() ) {\n\t\t\tif ( !this.checkChild( positionOrBaseElement, child ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Allows registering a callback to the {@link #checkChild} method calls.\n\t *\n\t * Callbacks allow you to implement rules which are not otherwise possible to achieve\n\t * by using the declarative API of {@link module:engine/model/schema~SchemaItemDefinition}.\n\t * For example, by using this method you can disallow elements in specific contexts.\n\t *\n\t * This method is a shorthand for using the {@link #event:checkChild} event. For even better control,\n\t * you can use that event instead.\n\t *\n\t * Example:\n\t *\n\t *\t\t// Disallow heading1 directly inside a blockQuote.\n\t *\t\tschema.addChildCheck( ( context, childDefinition ) => {\n\t *\t\t\tif ( context.endsWith( 'blockQuote' ) && childDefinition.name == 'heading1' ) {\n\t *\t\t\t\treturn false;\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Which translates to:\n\t *\n\t *\t\tschema.on( 'checkChild', ( evt, args ) => {\n\t *\t\t\tconst context = args[ 0 ];\n\t *\t\t\tconst childDefinition = args[ 1 ];\n\t *\n\t *\t\t\tif ( context.endsWith( 'blockQuote' ) && childDefinition && childDefinition.name == 'heading1' ) {\n\t *\t\t\t\t// Prevent next listeners from being called.\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t\t// Set the checkChild()'s return value.\n\t *\t\t\t\tevt.return = false;\n\t *\t\t\t}\n\t *\t\t}, { priority: 'high' } );\n\t *\n\t * @param {Function} callback The callback to be called. It is called with two parameters:\n\t * {@link module:engine/model/schema~SchemaContext} (context) instance and\n\t * {@link module:engine/model/schema~SchemaCompiledItemDefinition} (child-to-check definition).\n\t * The callback may return `true/false` to override `checkChild()`'s return value. If it does not return\n\t * a boolean value, the default algorithm (or other callbacks) will define `checkChild()`'s return value.\n\t */\n\taddChildCheck( callback ) {\n\t\tthis.on( 'checkChild', ( evt, [ ctx, childDef ] ) => {\n\t\t\t// checkChild() was called with a non-registered child.\n\t\t\t// In 99% cases such check should return false, so not to overcomplicate all callbacks\n\t\t\t// don't even execute them.\n\t\t\tif ( !childDef ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst retValue = callback( ctx, childDef );\n\n\t\t\tif ( typeof retValue == 'boolean' ) {\n\t\t\t\tevt.stop();\n\t\t\t\tevt.return = retValue;\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\t}\n\n\t/**\n\t * Allows registering a callback to the {@link #checkAttribute} method calls.\n\t *\n\t * Callbacks allow you to implement rules which are not otherwise possible to achieve\n\t * by using the declarative API of {@link module:engine/model/schema~SchemaItemDefinition}.\n\t * For example, by using this method you can disallow attribute if node to which it is applied\n\t * is contained within some other element (e.g. you want to disallow `bold` on `$text` within `heading1`).\n\t *\n\t * This method is a shorthand for using the {@link #event:checkAttribute} event. For even better control,\n\t * you can use that event instead.\n\t *\n\t * Example:\n\t *\n\t *\t\t// Disallow bold on $text inside heading1.\n\t *\t\tschema.addAttributeCheck( ( context, attributeName ) => {\n\t *\t\t\tif ( context.endsWith( 'heading1 $text' ) && attributeName == 'bold' ) {\n\t *\t\t\t\treturn false;\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Which translates to:\n\t *\n\t *\t\tschema.on( 'checkAttribute', ( evt, args ) => {\n\t *\t\t\tconst context = args[ 0 ];\n\t *\t\t\tconst attributeName = args[ 1 ];\n\t *\n\t *\t\t\tif ( context.endsWith( 'heading1 $text' ) && attributeName == 'bold' ) {\n\t *\t\t\t\t// Prevent next listeners from being called.\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t\t// Set the checkAttribute()'s return value.\n\t *\t\t\t\tevt.return = false;\n\t *\t\t\t}\n\t *\t\t}, { priority: 'high' } );\n\t *\n\t * @param {Function} callback The callback to be called. It is called with two parameters:\n\t * {@link module:engine/model/schema~SchemaContext} (context) instance and attribute name.\n\t * The callback may return `true/false` to override `checkAttribute()`'s return value. If it does not return\n\t * a boolean value, the default algorithm (or other callbacks) will define `checkAttribute()`'s return value.\n\t */\n\taddAttributeCheck( callback ) {\n\t\tthis.on( 'checkAttribute', ( evt, [ ctx, attributeName ] ) => {\n\t\t\tconst retValue = callback( ctx, attributeName );\n\n\t\t\tif ( typeof retValue == 'boolean' ) {\n\t\t\t\tevt.stop();\n\t\t\t\tevt.return = retValue;\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\t}\n\n\t/**\n\t * This method allows assigning additional metadata to the model attributes. For example,\n\t * {@link module:engine/model/schema~AttributeProperties `AttributeProperties#isFormatting` property} is\n\t * used to mark formatting attributes (like `bold` or `italic`).\n\t *\n\t *\t\t// Mark bold as a formatting attribute.\n\t *\t\tschema.setAttributeProperties( 'bold', {\n\t *\t\t\tisFormatting: true\n\t *\t\t} );\n\t *\n\t *\t\t// Override code not to be considered a formatting markup.\n\t *\t\tschema.setAttributeProperties( 'code', {\n\t *\t\t\tisFormatting: false\n\t *\t\t} );\n\t *\n\t * Properties are not limited to members defined in the\n\t * {@link module:engine/model/schema~AttributeProperties `AttributeProperties` type} and you can also use custom properties:\n\t *\n\t *\t\tschema.setAttributeProperties( 'blockQuote', {\n\t *\t\t\tcustomProperty: 'value'\n\t *\t\t} );\n\t *\n\t * Subsequent calls with the same attribute will extend its custom properties:\n\t *\n\t *\t\tschema.setAttributeProperties( 'blockQuote', {\n\t *\t\t\tone: 1\n\t *\t\t} );\n\t *\n\t *\t\tschema.setAttributeProperties( 'blockQuote', {\n\t *\t\t\ttwo: 2\n\t *\t\t} );\n\t *\n\t *\t\tconsole.log( schema.getAttributeProperties( 'blockQuote' ) );\n\t *\t\t// Logs: { one: 1, two: 2 }\n\t *\n\t * @param {String} attributeName A name of the attribute to receive the properties.\n\t * @param {module:engine/model/schema~AttributeProperties} properties A dictionary of properties.\n\t */\n\tsetAttributeProperties( attributeName, properties ) {\n\t\tthis._attributeProperties[ attributeName ] = Object.assign( this.getAttributeProperties( attributeName ), properties );\n\t}\n\n\t/**\n\t * Returns properties associated with a given model attribute. See {@link #setAttributeProperties `setAttributeProperties()`}.\n\t *\n\t * @param {String} attributeName A name of the attribute.\n\t * @returns {module:engine/model/schema~AttributeProperties}\n\t */\n\tgetAttributeProperties( attributeName ) {\n\t\treturn this._attributeProperties[ attributeName ] || {};\n\t}\n\n\t/**\n\t * Returns the lowest {@link module:engine/model/schema~Schema#isLimit limit element} containing the entire\n\t * selection/range/position or the root otherwise.\n\t *\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection|\n\t * module:engine/model/range~Range|module:engine/model/position~Position} selectionOrRangeOrPosition\n\t * The selection/range/position to check.\n\t * @returns {module:engine/model/element~Element} The lowest limit element containing\n\t * the entire `selectionOrRangeOrPosition`.\n\t */\n\tgetLimitElement( selectionOrRangeOrPosition ) {\n\t\tlet element;\n\n\t\tif ( selectionOrRangeOrPosition instanceof Position ) {\n\t\t\telement = selectionOrRangeOrPosition.parent;\n\t\t} else {\n\t\t\tconst ranges = selectionOrRangeOrPosition instanceof Range ?\n\t\t\t\t[ selectionOrRangeOrPosition ] :\n\t\t\t\tArray.from( selectionOrRangeOrPosition.getRanges() );\n\n\t\t\t// Find the common ancestor for all selection's ranges.\n\t\t\telement = ranges\n\t\t\t\t.reduce( ( element, range ) => {\n\t\t\t\t\tconst rangeCommonAncestor = range.getCommonAncestor();\n\n\t\t\t\t\tif ( !element ) {\n\t\t\t\t\t\treturn rangeCommonAncestor;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn element.getCommonAncestor( rangeCommonAncestor, { includeSelf: true } );\n\t\t\t\t}, null );\n\t\t}\n\n\t\twhile ( !this.isLimit( element ) ) {\n\t\t\tif ( element.parent ) {\n\t\t\t\telement = element.parent;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t}\n\n\t/**\n\t * Checks whether the attribute is allowed in selection:\n\t *\n\t * * if the selection is not collapsed, then checks if the attribute is allowed on any of nodes in that range,\n\t * * if the selection is collapsed, then checks if on the selection position there's a text with the\n\t * specified attribute allowed.\n\t *\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n\t * Selection which will be checked.\n\t * @param {String} attribute The name of the attribute to check.\n\t * @returns {Boolean}\n\t */\n\tcheckAttributeInSelection( selection, attribute ) {\n\t\tif ( selection.isCollapsed ) {\n\t\t\tconst firstPosition = selection.getFirstPosition();\n\t\t\tconst context = [\n\t\t\t\t...firstPosition.getAncestors(),\n\t\t\t\tnew Text( '', selection.getAttributes() )\n\t\t\t];\n\n\t\t\t// Check whether schema allows for a text with the attribute in the selection.\n\t\t\treturn this.checkAttribute( context, attribute );\n\t\t} else {\n\t\t\tconst ranges = selection.getRanges();\n\n\t\t\t// For all ranges, check nodes in them until you find a node that is allowed to have the attribute.\n\t\t\tfor ( const range of ranges ) {\n\t\t\t\tfor ( const value of range ) {\n\t\t\t\t\tif ( this.checkAttribute( value.item, attribute ) ) {\n\t\t\t\t\t\t// If we found a node that is allowed to have the attribute, return true.\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If we haven't found such node, return false.\n\t\treturn false;\n\t}\n\n\t/**\n\t * Transforms the given set of ranges into a set of ranges where the given attribute is allowed (and can be applied).\n\t *\n\t * @param {Array.<module:engine/model/range~Range>} ranges Ranges to be validated.\n\t * @param {String} attribute The name of the attribute to check.\n\t * @returns {Iterable.<module:engine/model/range~Range>} Ranges in which the attribute is allowed.\n\t */\n\t* getValidRanges( ranges, attribute ) {\n\t\tranges = convertToMinimalFlatRanges( ranges );\n\n\t\tfor ( const range of ranges ) {\n\t\t\tyield* this._getValidRangesForRange( range, attribute );\n\t\t}\n\t}\n\n\t/**\n\t * Basing on given `position`, finds and returns a {@link module:engine/model/range~Range range} which is\n\t * nearest to that `position` and is a correct range for selection.\n\t *\n\t * The correct selection range might be collapsed when it is located in a position where the text node can be placed.\n\t * Non-collapsed range is returned when selection can be placed around element marked as an \"object\" in\n\t * the {@link module:engine/model/schema~Schema schema}.\n\t *\n\t * Direction of searching for the nearest correct selection range can be specified as:\n\t *\n\t * * `both` - searching will be performed in both ways,\n\t * * `forward` - searching will be performed only forward,\n\t * * `backward` - searching will be performed only backward.\n\t *\n\t * When valid selection range cannot be found, `null` is returned.\n\t *\n\t * @param {module:engine/model/position~Position} position Reference position where new selection range should be looked for.\n\t * @param {'both'|'forward'|'backward'} [direction='both'] Search direction.\n\t * @returns {module:engine/model/range~Range|null} Nearest selection range or `null` if one cannot be found.\n\t */\n\tgetNearestSelectionRange( position, direction = 'both' ) {\n\t\t// Return collapsed range if provided position is valid.\n\t\tif ( this.checkChild( position, '$text' ) ) {\n\t\t\treturn new Range( position );\n\t\t}\n\n\t\tlet backwardWalker, forwardWalker;\n\n\t\tif ( direction == 'both' || direction == 'backward' ) {\n\t\t\tbackwardWalker = new TreeWalker( { startPosition: position, direction: 'backward' } );\n\t\t}\n\n\t\tif ( direction == 'both' || direction == 'forward' ) {\n\t\t\tforwardWalker = new TreeWalker( { startPosition: position } );\n\t\t}\n\n\t\tfor ( const data of combineWalkers( backwardWalker, forwardWalker ) ) {\n\t\t\tconst type = ( data.walker == backwardWalker ? 'elementEnd' : 'elementStart' );\n\t\t\tconst value = data.value;\n\n\t\t\tif ( value.type == type && this.isObject( value.item ) ) {\n\t\t\t\treturn Range._createOn( value.item );\n\t\t\t}\n\n\t\t\tif ( this.checkChild( value.nextPosition, '$text' ) ) {\n\t\t\t\treturn new Range( value.nextPosition );\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Tries to find position ancestors that allows to insert given node.\n\t * It starts searching from the given position and goes node by node to the top of the model tree\n\t * as long as {@link module:engine/model/schema~Schema#isLimit limit element},\n\t * {@link module:engine/model/schema~Schema#isObject object element} or top-most ancestor won't be reached.\n\t *\n\t * @params {module:engine/model/position~Position} position Position from searching will start.\n\t * @params {module:engine/model/node~Node|String} node Node for which allowed parent should be found or its name.\n\t * @returns {module:engine/model/element~Element|null} element Allowed parent or null if nothing was found.\n\t */\n\tfindAllowedParent( position, node ) {\n\t\tlet parent = position.parent;\n\n\t\twhile ( parent ) {\n\t\t\tif ( this.checkChild( parent, node ) ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\t// Do not split limit elements.\n\t\t\tif ( this.isLimit( parent ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Removes attributes disallowed by the schema.\n\t *\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes that will be filtered.\n\t * @param {module:engine/model/writer~Writer} writer\n\t */\n\tremoveDisallowedAttributes( nodes, writer ) {\n\t\tfor ( const node of nodes ) {\n\t\t\tfor ( const attribute of node.getAttributeKeys() ) {\n\t\t\t\tif ( !this.checkAttribute( node, attribute ) ) {\n\t\t\t\t\twriter.removeAttribute( attribute, node );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( node.is( 'element' ) ) {\n\t\t\t\tthis.removeDisallowedAttributes( node.getChildren(), writer );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates an instance of the schema context.\n\t *\n\t * @param {module:engine/model/schema~SchemaContextDefinition} context\n\t * @returns {module:engine/model/schema~SchemaContext}\n\t */\n\tcreateContext( context ) {\n\t\treturn new SchemaContext( context );\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_clearCache() {\n\t\tthis._compiledDefinitions = null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_compile() {\n\t\tconst compiledDefinitions = {};\n\t\tconst sourceRules = this._sourceDefinitions;\n\t\tconst itemNames = Object.keys( sourceRules );\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcompiledDefinitions[ itemName ] = compileBaseItemRule( sourceRules[ itemName ], itemName );\n\t\t}\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcompileAllowContentOf( compiledDefinitions, itemName );\n\t\t}\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcompileAllowWhere( compiledDefinitions, itemName );\n\t\t}\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcompileAllowAttributesOf( compiledDefinitions, itemName );\n\t\t\tcompileInheritPropertiesFrom( compiledDefinitions, itemName );\n\t\t}\n\n\t\tfor ( const itemName of itemNames ) {\n\t\t\tcleanUpAllowIn( compiledDefinitions, itemName );\n\t\t\tcleanUpAllowAttributes( compiledDefinitions, itemName );\n\t\t}\n\n\t\tthis._compiledDefinitions = compiledDefinitions;\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/schema~SchemaCompiledItemDefinition} def\n\t * @param {module:engine/model/schema~SchemaContext} context\n\t * @param {Number} contextItemIndex\n\t */\n\t_checkContextMatch( def, context, contextItemIndex = context.length - 1 ) {\n\t\tconst contextItem = context.getItem( contextItemIndex );\n\n\t\tif ( def.allowIn.includes( contextItem.name ) ) {\n\t\t\tif ( contextItemIndex == 0 ) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconst parentRule = this.getDefinition( contextItem );\n\n\t\t\t\treturn this._checkContextMatch( parentRule, context, contextItemIndex - 1 );\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Takes a flat range and an attribute name. Traverses the range recursively and deeply to find and return all ranges\n\t * inside the given range on which the attribute can be applied.\n\t *\n\t * This is a helper function for {@link ~Schema#getValidRanges}.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range Range to process.\n\t * @param {String} attribute The name of the attribute to check.\n\t * @returns {Iterable.<module:engine/model/range~Range>} Ranges in which the attribute is allowed.\n\t */\n\t* _getValidRangesForRange( range, attribute ) {\n\t\tlet start = range.start;\n\t\tlet end = range.start;\n\n\t\tfor ( const item of range.getItems( { shallow: true } ) ) {\n\t\t\tif ( item.is( 'element' ) ) {\n\t\t\t\tyield* this._getValidRangesForRange( Range._createIn( item ), attribute );\n\t\t\t}\n\n\t\t\tif ( !this.checkAttribute( item, attribute ) ) {\n\t\t\t\tif ( !start.isEqual( end ) ) {\n\t\t\t\t\tyield new Range( start, end );\n\t\t\t\t}\n\n\t\t\t\tstart = Position._createAfter( item );\n\t\t\t}\n\n\t\t\tend = Position._createAfter( item );\n\t\t}\n\n\t\tif ( !start.isEqual( end ) ) {\n\t\t\tyield new Range( start, end );\n\t\t}\n\t}\n}\n\nmix( Schema, ObservableMixin );\n\n/**\n * Event fired when the {@link #checkChild} method is called. It allows plugging in\n * additional behavior – e.g. implementing rules which cannot be defined using the declarative\n * {@link module:engine/model/schema~SchemaItemDefinition} interface.\n *\n * **Note:** The {@link #addChildCheck} method is a more handy way to register callbacks. Internally,\n * it registers a listener to this event but comes with a simpler API and it is the recommended choice\n * in most of the cases.\n *\n * The {@link #checkChild} method fires an event because it is\n * {@link module:utils/observablemixin~ObservableMixin#decorate decorated} with it. Thanks to that you can\n * use this event in a various way, but the most important use case is overriding standard behaviour of the\n * `checkChild()` method. Let's see a typical listener template:\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst childDefinition = args[ 1 ];\n *\t\t}, { priority: 'high' } );\n *\n * The listener is added with a `high` priority to be executed before the default method is really called. The `args` callback\n * parameter contains arguments passed to `checkChild( context, child )`. However, the `context` parameter is already\n * normalized to a {@link module:engine/model/schema~SchemaContext} instance and `child` to a\n * {@link module:engine/model/schema~SchemaCompiledItemDefinition} instance, so you don't have to worry about\n * the various ways how `context` and `child` may be passed to `checkChild()`.\n *\n * **Note:** `childDefinition` may be `undefined` if `checkChild()` was called with a non-registered element.\n *\n * So, in order to implement a rule \"disallow `heading1` in `blockQuote`\" you can add such a listener:\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst childDefinition = args[ 1 ];\n *\n *\t\t\tif ( context.endsWith( 'blockQuote' ) && childDefinition && childDefinition.name == 'heading1' ) {\n *\t\t\t\t// Prevent next listeners from being called.\n *\t\t\t\tevt.stop();\n *\t\t\t\t// Set the checkChild()'s return value.\n *\t\t\t\tevt.return = false;\n *\t\t\t}\n *\t\t}, { priority: 'high' } );\n *\n * Allowing elements in specific contexts will be a far less common use case, because it's normally handled by\n * `allowIn` rule from {@link module:engine/model/schema~SchemaItemDefinition} but if you have a complex scenario\n * where `listItem` should be allowed only in element `foo` which must be in element `bar`, then this would be the way:\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst childDefinition = args[ 1 ];\n *\n *\t\t\tif ( context.endsWith( 'bar foo' ) && childDefinition.name == 'listItem' ) {\n *\t\t\t\t// Prevent next listeners from being called.\n *\t\t\t\tevt.stop();\n *\t\t\t\t// Set the checkChild()'s return value.\n *\t\t\t\tevt.return = true;\n *\t\t\t}\n *\t\t}, { priority: 'high' } );\n *\n * @event checkChild\n * @param {Array} args The `checkChild()`'s arguments.\n */\n\n/**\n * Event fired when the {@link #checkAttribute} method is called. It allows plugging in\n * additional behavior – e.g. implementing rules which cannot be defined using the declarative\n * {@link module:engine/model/schema~SchemaItemDefinition} interface.\n *\n * **Note:** The {@link #addAttributeCheck} method is a more handy way to register callbacks. Internally,\n * it registers a listener to this event but comes with a simpler API and it is the recommended choice\n * in most of the cases.\n *\n * The {@link #checkAttribute} method fires an event because it's\n * {@link module:utils/observablemixin~ObservableMixin#decorate decorated} with it. Thanks to that you can\n * use this event in a various way, but the most important use case is overriding standard behaviour of the\n * `checkAttribute()` method. Let's see a typical listener template:\n *\n *\t\tschema.on( 'checkAttribute', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst attributeName = args[ 1 ];\n *\t\t}, { priority: 'high' } );\n *\n * The listener is added with a `high` priority to be executed before the default method is really called. The `args` callback\n * parameter contains arguments passed to `checkAttribute( context, attributeName )`. However, the `context` parameter is already\n * normalized to a {@link module:engine/model/schema~SchemaContext} instance, so you don't have to worry about\n * the various ways how `context` may be passed to `checkAttribute()`.\n *\n * So, in order to implement a rule \"disallow `bold` in a text which is in a `heading1` you can add such a listener:\n *\n *\t\tschema.on( 'checkAttribute', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst atributeName = args[ 1 ];\n *\n *\t\t\tif ( context.endsWith( 'heading1 $text' ) && attributeName == 'bold' ) {\n *\t\t\t\t// Prevent next listeners from being called.\n *\t\t\t\tevt.stop();\n *\t\t\t\t// Set the checkAttribute()'s return value.\n *\t\t\t\tevt.return = false;\n *\t\t\t}\n *\t\t}, { priority: 'high' } );\n *\n * Allowing attributes in specific contexts will be a far less common use case, because it's normally handled by\n * `allowAttributes` rule from {@link module:engine/model/schema~SchemaItemDefinition} but if you have a complex scenario\n * where `bold` should be allowed only in element `foo` which must be in element `bar`, then this would be the way:\n *\n *\t\tschema.on( 'checkAttribute', ( evt, args ) => {\n *\t\t\tconst context = args[ 0 ];\n *\t\t\tconst atributeName = args[ 1 ];\n *\n *\t\t\tif ( context.endsWith( 'bar foo $text' ) && attributeName == 'bold' ) {\n *\t\t\t\t// Prevent next listeners from being called.\n *\t\t\t\tevt.stop();\n *\t\t\t\t// Set the checkAttribute()'s return value.\n *\t\t\t\tevt.return = true;\n *\t\t\t}\n *\t\t}, { priority: 'high' } );\n *\n * @event checkAttribute\n * @param {Array} args The `checkAttribute()`'s arguments.\n */\n\n/**\n * A definition of a {@link module:engine/model/schema~Schema schema} item.\n *\n * You can define the following rules:\n *\n * * `allowIn` &ndash; A string or an array of strings. Defines in which other items this item will be allowed.\n * * `allowAttributes` &ndash; A string or an array of strings. Defines allowed attributes of the given item.\n * * `allowContentOf` &ndash; A string or an array of strings. Inherits \"allowed children\" from other items.\n * * `allowWhere` &ndash; A string or an array of strings. Inherits \"allowed in\" from other items.\n * * `allowAttributesOf` &ndash; A string or an array of strings. Inherits attributes from other items.\n * * `inheritTypesFrom` &ndash; A string or an array of strings. Inherits `is*` properties of other items.\n * * `inheritAllFrom` &ndash; A string. A shorthand for `allowContentOf`, `allowWhere`, `allowAttributesOf`, `inheritTypesFrom`.\n * * Additionally, you can define the following `is*` properties: `isBlock`, `isLimit`, `isObject`, `isInline`. Read about them below.\n *\n * # The is* properties\n *\n * There are 3 commonly used `is*` properties. Their role is to assign additional semantics to schema items.\n * You can define more properties but you will also need to implement support for them in the existing editor features.\n *\n * * `isBlock` &ndash; Whether this item is paragraph-like. Generally speaking, content is usually made out of blocks\n * like paragraphs, list items, images, headings, etc. All these elements are marked as blocks. A block\n * should not allow another block inside. Note: There is also the `$block` generic item which has `isBlock` set to `true`.\n * Most block type items will inherit from `$block` (through `inheritAllFrom`).\n * * `isLimit` &ndash; It can be understood as whether this element should not be split by <kbd>Enter</kbd>.\n * Examples of limit elements: `$root`, table cell, image caption, etc. In other words, all actions that happen inside\n * a limit element are limited to its content. **Note:** All objects (`isObject`) are treated as limit elements, too.\n * * `isObject` &ndash; Whether an item is \"self-contained\" and should be treated as a whole. Examples of object elements:\n * `image`, `table`, `video`, etc. **Note:** An object is also a limit, so\n * {@link module:engine/model/schema~Schema#isLimit `isLimit()`} returns `true` for object elements automatically.\n * * `isInline` &ndash; Whether an item is \"text-like\" and should be treated as an inline node. Examples of inline elements:\n * `$text`, `softBreak` (`<br>`), etc.\n *\n * # Generic items\n *\n * There are three basic generic items: `$root`, `$block` and `$text`.\n * They are defined as follows:\n *\n *\t\tthis.schema.register( '$root', {\n *\t\t\tisLimit: true\n *\t\t} );\n *\t\tthis.schema.register( '$block', {\n *\t\t\tallowIn: '$root',\n *\t\t\tisBlock: true\n *\t\t} );\n *\t\tthis.schema.register( '$text', {\n *\t\t\tallowIn: '$block',\n *\t\t\tisInline: true\n *\t\t} );\n *\n * They reflect typical editor content that is contained within one root, consists of several blocks\n * (paragraphs, lists items, headings, images) which, in turn, may contain text inside.\n *\n * By inheriting from the generic items you can define new items which will get extended by other editor features.\n * Read more about generic types in the {@linkTODO Defining schema} guide.\n *\n * # Example definitions\n *\n * Allow `paragraph` in roots and block quotes:\n *\n *\t\tschema.register( 'paragraph', {\n *\t\t\tallowIn: [ '$root', 'blockQuote' ],\n *\t\t\tisBlock: true\n *\t\t} );\n *\n * Allow `paragraph` everywhere where `$block` is allowed (i.e. in `$root`):\n *\n *\t\tschema.register( 'paragraph', {\n *\t\t\tallowWhere: '$block',\n *\t\t\tisBlock: true\n *\t\t} );\n *\n * Make `image` a block object, which is allowed everywhere where `$block` is.\n * Also, allow `src` and `alt` attributes in it:\n *\n *\t\tschema.register( 'image', {\n *\t\t\tallowWhere: '$block',\n *\t\t\tallowAttributes: [ 'src', 'alt' ],\n *\t\t\tisBlock: true,\n *\t\t\tisObject: true\n *\t\t} );\n *\n * Make `caption` allowed in `image` and make it allow all the content of `$block`s (usually, `$text`).\n * Also, mark it as a limit element so it cannot be split:\n *\n *\t\tschema.register( 'caption', {\n *\t\t\tallowIn: 'image',\n *\t\t\tallowContentOf: '$block',\n *\t\t\tisLimit: true\n *\t\t} );\n *\n * Make `listItem` inherit all from `$block` but also allow additional attributes:\n *\n *\t\tschema.register( 'listItem', {\n *\t\t\tinheritAllFrom: '$block',\n *\t\t\tallowAttributes: [ 'listType', 'listIndent' ]\n *\t\t} );\n *\n * Which translates to:\n *\n *\t\tschema.register( 'listItem', {\n *\t\t\tallowWhere: '$block',\n *\t\t\tallowContentOf: '$block',\n *\t\t\tallowAttributesOf: '$block',\n *\t\t\tinheritTypesFrom: '$block',\n *\t\t\tallowAttributes: [ 'listType', 'listIndent' ]\n *\t\t} );\n *\n * # Tips\n *\n * * Check schema definitions of existing features to see how they are defined.\n * * If you want to publish your feature so other developers can use it, try to use\n * generic items as much as possible.\n * * Keep your model clean. Limit it to the actual data and store information in a normalized way.\n * * Remember about definining the `is*` properties. They do not affect the allowed structures, but they can\n * affect how the editor features treat your elements.\n *\n * @typedef {Object} module:engine/model/schema~SchemaItemDefinition\n */\n\n/**\n * A simplified version of {@link module:engine/model/schema~SchemaItemDefinition} after\n * compilation by the {@link module:engine/model/schema~Schema schema}.\n * Rules fed to the schema by {@link module:engine/model/schema~Schema#register}\n * and {@link module:engine/model/schema~Schema#extend} methods are defined in the\n * {@link module:engine/model/schema~SchemaItemDefinition} format.\n * Later on, they are compiled to `SchemaCompiledItemDefition` so when you use e.g.\n * the {@link module:engine/model/schema~Schema#getDefinition} method you get the compiled version.\n *\n * The compiled version contains only the following properties:\n *\n * * The `name` property,\n * * The `is*` properties,\n * * The `allowIn` array,\n * * The `allowAttributes` array.\n *\n * @typedef {Object} module:engine/model/schema~SchemaCompiledItemDefinition\n */\n\n/**\n * A schema context &mdash; a list of ancestors of a given position in the document.\n *\n * Considering such position:\n *\n *\t\t<$root>\n *\t\t\t<blockQuote>\n *\t\t\t\t<paragraph>\n *\t\t\t\t\t^\n *\t\t\t\t</paragraph>\n *\t\t\t</blockQuote>\n *\t\t</$root>\n *\n * The context of this position is its {@link module:engine/model/position~Position#getAncestors lists of ancestors}:\n *\n *\t\t[ rootElement, blockQuoteElement, paragraphElement ]\n *\n * Contexts are used in the {@link module:engine/model/schema~Schema#event:checkChild `Schema#checkChild`} and\n * {@link module:engine/model/schema~Schema#event:checkAttribute `Schema#checkAttribute`} events as a definition\n * of a place in the document where the check occurs. The context instances are created based on the first arguments\n * of the {@link module:engine/model/schema~Schema#checkChild `Schema#checkChild()`} and\n * {@link module:engine/model/schema~Schema#checkAttribute `Schema#checkAttribute()`} methods so when\n * using these methods you need to use {@link module:engine/model/schema~SchemaContextDefinition}s.\n */\nexport class SchemaContext {\n\t/**\n\t * Creates an instance of the context.\n\t *\n\t * @param {module:engine/model/schema~SchemaContextDefinition} context\n\t */\n\tconstructor( context ) {\n\t\tif ( context instanceof SchemaContext ) {\n\t\t\treturn context;\n\t\t}\n\n\t\tif ( typeof context == 'string' ) {\n\t\t\tcontext = [ context ];\n\t\t} else if ( !Array.isArray( context ) ) {\n\t\t\t// `context` is item or position.\n\t\t\t// Position#getAncestors() doesn't accept any parameters but it works just fine here.\n\t\t\tcontext = context.getAncestors( { includeSelf: true } );\n\t\t}\n\n\t\tif ( context[ 0 ] && typeof context[ 0 ] != 'string' && context[ 0 ].is( 'documentFragment' ) ) {\n\t\t\tcontext.shift();\n\t\t}\n\n\t\tthis._items = context.map( mapContextItem );\n\t}\n\n\t/**\n\t * The number of items.\n\t *\n\t * @type {Number}\n\t */\n\tget length() {\n\t\treturn this._items.length;\n\t}\n\n\t/**\n\t * The last item (the lowest node).\n\t *\n\t * @type {module:engine/model/schema~SchemaContextItem}\n\t */\n\tget last() {\n\t\treturn this._items[ this._items.length - 1 ];\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all context items.\n\t *\n\t * @returns {Iterable.<module:engine/model/schema~SchemaContextItem>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._items[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns a new schema context instance with an additional item.\n\t *\n\t * Item can be added as:\n\t *\n\t * \t\tconst context = new SchemaContext( [ '$root' ] );\n\t *\n\t * \t\t// An element.\n\t * \t\tconst fooElement = writer.createElement( 'fooElement' );\n\t * \t\tconst newContext = context.push( fooElement ); // [ '$root', 'fooElement' ]\n\t *\n\t * \t\t// A text node.\n\t * \t\tconst text = writer.createText( 'foobar' );\n\t * \t\tconst newContext = context.push( text ); // [ '$root', '$text' ]\n\t *\n\t * \t\t// A string (element name).\n\t * \t\tconst newContext = context.push( 'barElement' ); // [ '$root', 'barElement' ]\n\t *\n\t * **Note** {@link module:engine/model/node~Node} that is already in the model tree will be added as the only item\n\t * (without ancestors).\n\t *\n\t * @param {String|module:engine/model/node~Node|Array<String|module:engine/model/node~Node>} item An item that will be added\n\t * to the current context.\n\t * @returns {module:engine/model/schema~SchemaContext} A new schema context instance with an additional item.\n\t */\n\tpush( item ) {\n\t\tconst ctx = new SchemaContext( [ item ] );\n\n\t\tctx._items = [ ...this._items, ...ctx._items ];\n\n\t\treturn ctx;\n\t}\n\n\t/**\n\t * Gets an item on the given index.\n\t *\n\t * @returns {module:engine/model/schema~SchemaContextItem}\n\t */\n\tgetItem( index ) {\n\t\treturn this._items[ index ];\n\t}\n\n\t/**\n\t * Returns the names of items.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\t* getNames() {\n\t\tyield* this._items.map( item => item.name );\n\t}\n\n\t/**\n\t * Checks whether the context ends with the given nodes.\n\t *\n\t *\t\tconst ctx = new SchemaContext( [ rootElement, paragraphElement, textNode ] );\n\t *\n\t *\t\tctx.endsWith( '$text' ); // -> true\n\t *\t\tctx.endsWith( 'paragraph $text' ); // -> true\n\t *\t\tctx.endsWith( '$root' ); // -> false\n\t *\t\tctx.endsWith( 'paragraph' ); // -> false\n\t *\n\t * @param {String} query\n\t * @returns {Boolean}\n\t */\n\tendsWith( query ) {\n\t\treturn Array.from( this.getNames() ).join( ' ' ).endsWith( query );\n\t}\n}\n\n/**\n * The definition of a {@link module:engine/model/schema~SchemaContext schema context}.\n *\n * Contexts can be created in multiple ways:\n *\n * * By defining a **node** – in this cases this node and all its ancestors will be used.\n * * By defining a **position** in the document – in this case all its ancestors will be used.\n * * By defining an **array of nodes** – in this case this array defines the entire context.\n * * By defining a **name of node** - in this case node will be \"mocked\". It is not recommended because context\n * will be unrealistic (e.g. attributes of these nodes are not specified). However, at times this may be the only\n * way to define the context (e.g. when checking some hypothetical situation).\n * * By defining an **array of node names** (potentially, mixed with real nodes) – The same as **name of node**\n * but it is possible to create a path.\n * * By defining a {@link module:engine/model/schema~SchemaContext} instance - in this case the same instance as provided\n * will be return.\n *\n * Examples of context definitions passed to the {@link module:engine/model/schema~Schema#checkChild `Schema#checkChild()`}\n * method:\n *\n *\t\t// Assuming that we have a $root > blockQuote > paragraph structure, the following code\n *\t\t// will check node 'foo' in the following context:\n *\t\t// [ rootElement, blockQuoteElement, paragraphElement ]\n *\t\tconst contextDefinition = paragraphElement;\n * \t\tconst childToCheck = 'foo';\n *\t\tschema.checkChild( contextDefinition, childToCheck );\n *\n *\t\t// Also check in [ rootElement, blockQuoteElement, paragraphElement ].\n *\t\tschema.checkChild( model.createPositionAt( paragraphElement, 0 ), 'foo' );\n *\n *\t\t// Check in [ rootElement, paragraphElement ].\n *\t\tschema.checkChild( [ rootElement, paragraphElement ], 'foo' );\n *\n *\t\t// Check only fakeParagraphElement.\n *\t\tschema.checkChild( 'paragraph', 'foo' );\n *\n *\t\t// Check in [ fakeRootElement, fakeBarElement, paragraphElement ].\n *\t\tschema.checkChild( [ '$root', 'bar', paragraphElement ], 'foo' );\n *\n * All these `checkChild()` calls will fire {@link module:engine/model/schema~Schema#event:checkChild `Schema#checkChild`}\n * events in which `args[ 0 ]` is an instance of the context. Therefore, you can write a listener like this:\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst ctx = args[ 0 ];\n *\n *\t\t\tconsole.log( Array.from( ctx.getNames() ) );\n *\t\t} );\n *\n * Which will log the following:\n *\n *\t\t[ '$root', 'blockQuote', 'paragraph' ]\n *\t\t[ '$root', 'paragraph' ]\n *\t\t[ '$root', 'bar', 'paragraph' ]\n *\n * Note: When using the {@link module:engine/model/schema~Schema#checkAttribute `Schema#checkAttribute()`} method\n * you may want to check whether a text node may have an attribute. A {@link module:engine/model/text~Text} is a\n * correct way to define a context so you can do this:\n *\n *\t\tschema.checkAttribute( textNode, 'bold' );\n *\n * But sometimes you want to check whether a text at a given position might've had some attribute,\n * in which case you can create a context by mising an array of elements with a `'$text'` string:\n *\n *\t\t// Check in [ rootElement, paragraphElement, textNode ].\n *\t\tschema.checkChild( [ ...positionInParagraph.getAncestors(), '$text' ], 'bold' );\n *\n * @typedef {module:engine/model/node~Node|module:engine/model/position~Position|module:engine/model/schema~SchemaContext|\n * String|Array.<String|module:engine/model/node~Node>} module:engine/model/schema~SchemaContextDefinition\n */\n\n/**\n * An item of the {@link module:engine/model/schema~SchemaContext schema context}.\n *\n * It contains 3 properties:\n *\n * * `name` – the name of this item,\n * * `* getAttributeKeys()` – a generator of keys of item attributes,\n * * `getAttribute( keyName )` – a method to get attribute values.\n *\n * The context item interface is a highly simplified version of {@link module:engine/model/node~Node} and its role\n * is to expose only the information which schema checks are able to provide (which is the name of the node and\n * node's attributes).\n *\n *\t\tschema.on( 'checkChild', ( evt, args ) => {\n *\t\t\tconst ctx = args[ 0 ];\n *\t\t\tconst firstItem = ctx.getItem( 0 );\n *\n *\t\t\tconsole.log( firstItem.name ); // -> '$root'\n *\t\t\tconsole.log( firstItem.getAttribute( 'foo' ) ); // -> 'bar'\n *\t\t\tconsole.log( Array.from( firstItem.getAttributeKeys() ) ); // -> [ 'foo', 'faa' ]\n *\t\t} );\n *\n * @typedef {Object} module:engine/model/schema~SchemaContextItem\n */\n\n/**\n * A structure containing additional metadata describing the attribute.\n *\n * See {@link module:engine/model/schema~Schema#setAttributeProperties `Schema#setAttributeProperties()`} for usage examples.\n *\n * @typedef {Object} module:engine/model/schema~AttributeProperties\n * @property {Boolean} [isFormatting] Indicates that the attribute should be considered as a visual formatting, like `bold`, `italic` or\n * `fontSize` rather than semantic attribute (such as `src`, `listType`, etc.). For example, it is used by the \"Remove format\" feature.\n */\n\nfunction compileBaseItemRule( sourceItemRules, itemName ) {\n\tconst itemRule = {\n\t\tname: itemName,\n\n\t\tallowIn: [],\n\t\tallowContentOf: [],\n\t\tallowWhere: [],\n\n\t\tallowAttributes: [],\n\t\tallowAttributesOf: [],\n\n\t\tinheritTypesFrom: []\n\t};\n\n\tcopyTypes( sourceItemRules, itemRule );\n\n\tcopyProperty( sourceItemRules, itemRule, 'allowIn' );\n\tcopyProperty( sourceItemRules, itemRule, 'allowContentOf' );\n\tcopyProperty( sourceItemRules, itemRule, 'allowWhere' );\n\n\tcopyProperty( sourceItemRules, itemRule, 'allowAttributes' );\n\tcopyProperty( sourceItemRules, itemRule, 'allowAttributesOf' );\n\n\tcopyProperty( sourceItemRules, itemRule, 'inheritTypesFrom' );\n\n\tmakeInheritAllWork( sourceItemRules, itemRule );\n\n\treturn itemRule;\n}\n\nfunction compileAllowContentOf( compiledDefinitions, itemName ) {\n\tfor ( const allowContentOfItemName of compiledDefinitions[ itemName ].allowContentOf ) {\n\t\t// The allowContentOf property may point to an unregistered element.\n\t\tif ( compiledDefinitions[ allowContentOfItemName ] ) {\n\t\t\tconst allowedChildren = getAllowedChildren( compiledDefinitions, allowContentOfItemName );\n\n\t\t\tallowedChildren.forEach( allowedItem => {\n\t\t\t\tallowedItem.allowIn.push( itemName );\n\t\t\t} );\n\t\t}\n\t}\n\n\tdelete compiledDefinitions[ itemName ].allowContentOf;\n}\n\nfunction compileAllowWhere( compiledDefinitions, itemName ) {\n\tfor ( const allowWhereItemName of compiledDefinitions[ itemName ].allowWhere ) {\n\t\tconst inheritFrom = compiledDefinitions[ allowWhereItemName ];\n\n\t\t// The allowWhere property may point to an unregistered element.\n\t\tif ( inheritFrom ) {\n\t\t\tconst allowedIn = inheritFrom.allowIn;\n\n\t\t\tcompiledDefinitions[ itemName ].allowIn.push( ...allowedIn );\n\t\t}\n\t}\n\n\tdelete compiledDefinitions[ itemName ].allowWhere;\n}\n\nfunction compileAllowAttributesOf( compiledDefinitions, itemName ) {\n\tfor ( const allowAttributeOfItem of compiledDefinitions[ itemName ].allowAttributesOf ) {\n\t\tconst inheritFrom = compiledDefinitions[ allowAttributeOfItem ];\n\n\t\tif ( inheritFrom ) {\n\t\t\tconst inheritAttributes = inheritFrom.allowAttributes;\n\n\t\t\tcompiledDefinitions[ itemName ].allowAttributes.push( ...inheritAttributes );\n\t\t}\n\t}\n\n\tdelete compiledDefinitions[ itemName ].allowAttributesOf;\n}\n\nfunction compileInheritPropertiesFrom( compiledDefinitions, itemName ) {\n\tconst item = compiledDefinitions[ itemName ];\n\n\tfor ( const inheritPropertiesOfItem of item.inheritTypesFrom ) {\n\t\tconst inheritFrom = compiledDefinitions[ inheritPropertiesOfItem ];\n\n\t\tif ( inheritFrom ) {\n\t\t\tconst typeNames = Object.keys( inheritFrom ).filter( name => name.startsWith( 'is' ) );\n\n\t\t\tfor ( const name of typeNames ) {\n\t\t\t\tif ( !( name in item ) ) {\n\t\t\t\t\titem[ name ] = inheritFrom[ name ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdelete item.inheritTypesFrom;\n}\n\n// Remove items which weren't registered (because it may break some checks or we'd need to complicate them).\n// Make sure allowIn doesn't contain repeated values.\nfunction cleanUpAllowIn( compiledDefinitions, itemName ) {\n\tconst itemRule = compiledDefinitions[ itemName ];\n\tconst existingItems = itemRule.allowIn.filter( itemToCheck => compiledDefinitions[ itemToCheck ] );\n\n\titemRule.allowIn = Array.from( new Set( existingItems ) );\n}\n\nfunction cleanUpAllowAttributes( compiledDefinitions, itemName ) {\n\tconst itemRule = compiledDefinitions[ itemName ];\n\n\titemRule.allowAttributes = Array.from( new Set( itemRule.allowAttributes ) );\n}\n\nfunction copyTypes( sourceItemRules, itemRule ) {\n\tfor ( const sourceItemRule of sourceItemRules ) {\n\t\tconst typeNames = Object.keys( sourceItemRule ).filter( name => name.startsWith( 'is' ) );\n\n\t\tfor ( const name of typeNames ) {\n\t\t\titemRule[ name ] = sourceItemRule[ name ];\n\t\t}\n\t}\n}\n\nfunction copyProperty( sourceItemRules, itemRule, propertyName ) {\n\tfor ( const sourceItemRule of sourceItemRules ) {\n\t\tif ( typeof sourceItemRule[ propertyName ] == 'string' ) {\n\t\t\titemRule[ propertyName ].push( sourceItemRule[ propertyName ] );\n\t\t} else if ( Array.isArray( sourceItemRule[ propertyName ] ) ) {\n\t\t\titemRule[ propertyName ].push( ...sourceItemRule[ propertyName ] );\n\t\t}\n\t}\n}\n\nfunction makeInheritAllWork( sourceItemRules, itemRule ) {\n\tfor ( const sourceItemRule of sourceItemRules ) {\n\t\tconst inheritFrom = sourceItemRule.inheritAllFrom;\n\n\t\tif ( inheritFrom ) {\n\t\t\titemRule.allowContentOf.push( inheritFrom );\n\t\t\titemRule.allowWhere.push( inheritFrom );\n\t\t\titemRule.allowAttributesOf.push( inheritFrom );\n\t\t\titemRule.inheritTypesFrom.push( inheritFrom );\n\t\t}\n\t}\n}\n\nfunction getAllowedChildren( compiledDefinitions, itemName ) {\n\tconst itemRule = compiledDefinitions[ itemName ];\n\n\treturn getValues( compiledDefinitions ).filter( def => def.allowIn.includes( itemRule.name ) );\n}\n\nfunction getValues( obj ) {\n\treturn Object.keys( obj ).map( key => obj[ key ] );\n}\n\nfunction mapContextItem( ctxItem ) {\n\tif ( typeof ctxItem == 'string' ) {\n\t\treturn {\n\t\t\tname: ctxItem,\n\n\t\t\t* getAttributeKeys() {},\n\n\t\t\tgetAttribute() {}\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\t// '$text' means text nodes and text proxies.\n\t\t\tname: ctxItem.is( 'element' ) ? ctxItem.name : '$text',\n\n\t\t\t* getAttributeKeys() {\n\t\t\t\tyield* ctxItem.getAttributeKeys();\n\t\t\t},\n\n\t\t\tgetAttribute( key ) {\n\t\t\t\treturn ctxItem.getAttribute( key );\n\t\t\t}\n\t\t};\n\t}\n}\n\n// Generator function returning values from provided walkers, switching between them at each iteration. If only one walker\n// is provided it will return data only from that walker.\n//\n// @param {module:engine/module/treewalker~TreeWalker} [backward] Walker iterating in backward direction.\n// @param {module:engine/module/treewalker~TreeWalker} [forward] Walker iterating in forward direction.\n// @returns {Iterable.<Object>} Object returned at each iteration contains `value` and `walker` (informing which walker returned\n// given value) fields.\nfunction* combineWalkers( backward, forward ) {\n\tlet done = false;\n\n\twhile ( !done ) {\n\t\tdone = true;\n\n\t\tif ( backward ) {\n\t\t\tconst step = backward.next();\n\n\t\t\tif ( !step.done ) {\n\t\t\t\tdone = false;\n\t\t\t\tyield {\n\t\t\t\t\twalker: backward,\n\t\t\t\t\tvalue: step.value\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( forward ) {\n\t\t\tconst step = forward.next();\n\n\t\t\tif ( !step.done ) {\n\t\t\t\tdone = false;\n\t\t\t\tyield {\n\t\t\t\t\twalker: forward,\n\t\t\t\t\tvalue: step.value\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Takes an array of non-intersecting ranges. For each of them gets minimal flat ranges covering that range and returns\n// all those minimal flat ranges.\n//\n// @param {Array.<module:engine/model/range~Range>} ranges Ranges to process.\n// @returns {Iterable.<module:engine/model/range~Range>} Minimal flat ranges of given `ranges`.\nfunction* convertToMinimalFlatRanges( ranges ) {\n\tfor ( const range of ranges ) {\n\t\tyield* range.getMinimalFlatRanges();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/upcastdispatcher\n */\n\nimport ViewConsumable from './viewconsumable';\nimport ModelRange from '../model/range';\nimport ModelPosition from '../model/position';\nimport { SchemaContext } from '../model/schema';\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * `UpcastDispatcher` is a central point of {@link module:engine/view/view view} conversion, which is a process of\n * converting given {@link module:engine/view/documentfragment~DocumentFragment view document fragment} or\n * {@link module:engine/view/element~Element} into another structure.\n * In default application, {@link module:engine/view/view view} is converted to {@link module:engine/model/model}.\n *\n * During conversion process, for all {@link module:engine/view/node~Node view nodes} from the converted view document fragment,\n * `UpcastDispatcher` fires corresponding events. Special callbacks called \"converters\" should listen to\n * `UpcastDispatcher` for those events.\n *\n * Each callback, as the second argument, is passed a special object `data` that has `viewItem`, `modelCursor` and\n * `modelRange` properties. `viewItem` property contains {@link module:engine/view/node~Node view node} or\n * {@link module:engine/view/documentfragment~DocumentFragment view document fragment}\n * that is converted at the moment and might be handled by the callback. `modelRange` property should be used to save the result\n * of conversion and is always a {@link module:engine/model/range~Range} when conversion result is correct.\n * `modelCursor` property is a {@link module:engine/model/position~Position position} on which conversion result will be inserted\n * and is a context according to {@link module:engine/model/schema~Schema schema} will be checked before the conversion.\n * See also {@link ~UpcastDispatcher#convert}. It is also shared by reference by all callbacks listening to given event.\n *\n * The third parameter passed to a callback is an instance of {@link ~UpcastDispatcher}\n * which provides additional tools for converters.\n *\n * Examples of providing callbacks for `UpcastDispatcher`:\n *\n *\t\t// Converter for links (<a>).\n *\t\teditor.data.upcastDispatcher.on( 'element:a', ( evt, data, conversionApi ) => {\n *\t\t\tif ( conversionApi.consumable.consume( data.viewItem, { name: true, attributes: [ 'href' ] } ) ) {\n *\t\t\t\t// <a> element is inline and is represented by an attribute in the model.\n *\t\t\t\t// This is why we need to convert only children.\n *\t\t\t\tconst { modelRange } = conversionApi.convertChildren( data.viewItem, data.modelCursor );\n *\n *\t\t\t\tfor ( let item of modelRange.getItems() ) {\n *\t\t\t\t\tif ( conversionApi.schema.checkAttribute( item, 'linkHref' ) ) {\n *\t\t\t\t\t\tconversionApi.writer.setAttribute( 'linkHref', data.viewItem.getAttribute( 'href' ), item );\n *\t\t\t\t\t}\n *\t\t\t\t}\n *\t\t\t}\n *\t\t} );\n *\n *\t\t// Convert all elements which have no custom converter into paragraph (autoparagraphing).\n *  \teditor.data.upcastDispatcher.on( 'element', ( evt, data, conversionApi ) => {\n *  \t \t// When element is already consumed by higher priority converters then do nothing.\n *  \t \tif ( conversionApi.consumable.test( data.viewItem, { name: data.viewItem.name } ) ) {\n *  \t \t\t\tconst paragraph = conversionApi.writer.createElement( 'paragraph' );\n *\n *  \t \t\t\t// Find allowed parent for paragraph that we are going to insert. If current parent does not allow\n *  \t \t\t\t// to insert paragraph but one of the ancestors does then split nodes to allowed parent.\n *  \t \t\t\tconst splitResult = conversionApi.splitToAllowedParent( paragraph, data.modelCursor );\n *\n *  \t \t\t\t// When there is no split result it means that we can't insert paragraph in this position.\n *  \t \t\t\tif ( splitResult ) {\n *  \t \t\t\t\t// Insert paragraph in allowed position.\n *  \t \t\t\t\tconversionApi.writer.insert( paragraph, splitResult.position );\n *\n *  \t \t\t\t\t// Convert children to paragraph.\n *  \t \t\t\t\tconst { modelRange } = conversionApi.convertChildren(\n *  \t \t\t\t\t\tdata.viewItem,\n *  \t \t\t\t\t\tconversionApi.writer.createPositionAt( paragraph, 0 )\n *  \t \t\t\t\t);\n *\n * \t\t\t\t\t\t// Set as conversion result, attribute converters may use this property.\n *  \t \t\t\t\tdata.modelRange = conversionApi.writer.createRange(\n *  \t \t\t\t\t\tconversionApi.writer.createPositionBefore( paragraph ),\n *  \t \t\t\t\t\tmodelRange.end\n *  \t \t\t\t\t);\n *\n *  \t \t\t\t\t// Continue conversion inside paragraph.\n *  \t \t\t\t\tdata.modelCursor = data.modelRange.end;\n *  \t \t\t\t}\n *  \t \t\t}\n *  \t \t}\n *  \t }, { priority: 'low' } );\n *\n * Before each conversion process, `UpcastDispatcher` fires {@link ~UpcastDispatcher#event:viewCleanup}\n * event which can be used to prepare tree view for conversion.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n * @fires viewCleanup\n * @fires element\n * @fires text\n * @fires documentFragment\n */\nexport default class UpcastDispatcher {\n\t/**\n\t * Creates a `UpcastDispatcher` that operates using passed API.\n\t *\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi\n\t * @param {Object} [conversionApi] Additional properties for interface that will be passed to events fired\n\t * by `UpcastDispatcher`.\n\t */\n\tconstructor( conversionApi = {} ) {\n\t\t/**\n\t\t * List of the elements that were created during splitting.\n\t\t *\n\t\t * After conversion process the list is cleared.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<module:engine/model/element~Element,Array.<module:engine/model/element~Element>>}\n\t\t */\n\t\tthis._splitParts = new Map();\n\n\t\t/**\n\t\t * Position in the temporary structure where the converted content is inserted. The structure reflect the context of\n\t\t * the target position where the content will be inserted. This property is build based on the context parameter of the\n\t\t * convert method.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/model/position~Position|null}\n\t\t */\n\t\tthis._modelCursor = null;\n\n\t\t/**\n\t\t * Interface passed by dispatcher to the events callbacks.\n\t\t *\n\t\t * @member {module:engine/conversion/upcastdispatcher~UpcastConversionApi}\n\t\t */\n\t\tthis.conversionApi = Object.assign( {}, conversionApi );\n\n\t\t// `convertItem`, `convertChildren` and `splitToAllowedParent` are bound to this `UpcastDispatcher`\n\t\t// instance and set on `conversionApi`. This way only a part of `UpcastDispatcher` API is exposed.\n\t\tthis.conversionApi.convertItem = this._convertItem.bind( this );\n\t\tthis.conversionApi.convertChildren = this._convertChildren.bind( this );\n\t\tthis.conversionApi.splitToAllowedParent = this._splitToAllowedParent.bind( this );\n\t\tthis.conversionApi.getSplitParts = this._getSplitParts.bind( this );\n\t}\n\n\t/**\n\t * Starts the conversion process. The entry point for the conversion.\n\t *\n\t * @fires element\n\t * @fires text\n\t * @fires documentFragment\n\t * @param {module:engine/view/documentfragment~DocumentFragment|module:engine/view/element~Element} viewItem\n\t * Part of the view to be converted.\n\t * @param {module:engine/model/writer~Writer} writer Instance of model writer.\n\t * @param {module:engine/model/schema~SchemaContextDefinition} [context=['$root']] Elements will be converted according to this context.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} Model data that is a result of the conversion process\n\t * wrapped in `DocumentFragment`. Converted marker elements will be set as that document fragment's\n\t * {@link module:engine/model/documentfragment~DocumentFragment#markers static markers map}.\n\t */\n\tconvert( viewItem, writer, context = [ '$root' ] ) {\n\t\tthis.fire( 'viewCleanup', viewItem );\n\n\t\t// Create context tree and set position in the top element.\n\t\t// Items will be converted according to this position.\n\t\tthis._modelCursor = createContextTree( context, writer );\n\n\t\t// Store writer in conversion as a conversion API\n\t\t// to be sure that conversion process will use the same batch.\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create consumable values list for conversion process.\n\t\tthis.conversionApi.consumable = ViewConsumable.createFrom( viewItem );\n\n\t\t// Custom data stored by converter for conversion process.\n\t\tthis.conversionApi.store = {};\n\n\t\t// Do the conversion.\n\t\tconst { modelRange } = this._convertItem( viewItem, this._modelCursor );\n\n\t\t// Conversion result is always a document fragment so let's create it.\n\t\tconst documentFragment = writer.createDocumentFragment();\n\n\t\t// When there is a conversion result.\n\t\tif ( modelRange ) {\n\t\t\t// Remove all empty elements that were create while splitting.\n\t\t\tthis._removeEmptyElements();\n\n\t\t\t// Move all items that were converted in context tree to the document fragment.\n\t\t\tfor ( const item of Array.from( this._modelCursor.parent.getChildren() ) ) {\n\t\t\t\twriter.append( item, documentFragment );\n\t\t\t}\n\n\t\t\t// Extract temporary markers elements from model and set as static markers collection.\n\t\t\tdocumentFragment.markers = extractMarkersFromModelFragment( documentFragment, writer );\n\t\t}\n\n\t\t// Clear context position.\n\t\tthis._modelCursor = null;\n\n\t\t// Clear split elements lists.\n\t\tthis._splitParts.clear();\n\n\t\t// Clear conversion API.\n\t\tthis.conversionApi.writer = null;\n\t\tthis.conversionApi.store = null;\n\n\t\t// Return fragment as conversion result.\n\t\treturn documentFragment;\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#convertItem\n\t */\n\t_convertItem( viewItem, modelCursor ) {\n\t\tconst data = Object.assign( { viewItem, modelCursor, modelRange: null } );\n\n\t\tif ( viewItem.is( 'element' ) ) {\n\t\t\tthis.fire( 'element:' + viewItem.name, data, this.conversionApi );\n\t\t} else if ( viewItem.is( 'text' ) ) {\n\t\t\tthis.fire( 'text', data, this.conversionApi );\n\t\t} else {\n\t\t\tthis.fire( 'documentFragment', data, this.conversionApi );\n\t\t}\n\n\t\t// Handle incorrect conversion result.\n\t\tif ( data.modelRange && !( data.modelRange instanceof ModelRange ) ) {\n\t\t\t/**\n\t\t\t * Incorrect conversion result was dropped.\n\t\t\t *\n\t\t\t * {@link module:engine/model/range~Range Model range} should be a conversion result.\n\t\t\t *\n\t\t\t * @error view-conversion-dispatcher-incorrect-result\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.', this );\n\t\t}\n\n\t\treturn { modelRange: data.modelRange, modelCursor: data.modelCursor };\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#convertChildren\n\t */\n\t_convertChildren( viewItem, modelCursor ) {\n\t\tconst modelRange = new ModelRange( modelCursor );\n\t\tlet nextModelCursor = modelCursor;\n\n\t\tfor ( const viewChild of Array.from( viewItem.getChildren() ) ) {\n\t\t\tconst result = this._convertItem( viewChild, nextModelCursor );\n\n\t\t\tif ( result.modelRange instanceof ModelRange ) {\n\t\t\t\tmodelRange.end = result.modelRange.end;\n\t\t\t\tnextModelCursor = result.modelCursor;\n\t\t\t}\n\t\t}\n\n\t\treturn { modelRange, modelCursor: nextModelCursor };\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#splitToAllowedParent\n\t */\n\t_splitToAllowedParent( node, modelCursor ) {\n\t\t// Try to find allowed parent.\n\t\tconst allowedParent = this.conversionApi.schema.findAllowedParent( modelCursor, node );\n\n\t\t// When there is no parent that allows to insert node then return `null`.\n\t\tif ( !allowedParent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// When current position parent allows to insert node then return this position.\n\t\tif ( allowedParent === modelCursor.parent ) {\n\t\t\treturn { position: modelCursor };\n\t\t}\n\n\t\t// When allowed parent is in context tree.\n\t\tif ( this._modelCursor.parent.getAncestors().includes( allowedParent ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Split element to allowed parent.\n\t\tconst splitResult = this.conversionApi.writer.split( modelCursor, allowedParent );\n\n\t\t// Using the range returned by `model.Writer#split`, we will pair original elements with their split parts.\n\t\t//\n\t\t// The range returned from the writer spans \"over the split\" or, precisely saying, from the end of the original element (the one\n\t\t// that got split) to the beginning of the other part of that element:\n\t\t//\n\t\t// <limit><a><b><c>X[]Y</c></b><a></limit> ->\n\t\t// <limit><a><b><c>X[</c></b></a><a><b><c>]Y</c></b></a>\n\t\t//\n\t\t// After the split there cannot be any full node between the positions in `splitRange`. The positions are touching.\n\t\t// Also, because of how splitting works, it is easy to notice, that \"closing tags\" are in the reverse order than \"opening tags\".\n\t\t// Also, since we split all those elements, each of them has to have the other part.\n\t\t//\n\t\t// With those observations in mind, we will pair the original elements with their split parts by saving \"closing tags\" and matching\n\t\t// them with \"opening tags\" in the reverse order. For that we can use a stack.\n\t\tconst stack = [];\n\n\t\tfor ( const treeWalkerValue of splitResult.range.getWalker() ) {\n\t\t\tif ( treeWalkerValue.type == 'elementEnd' ) {\n\t\t\t\tstack.push( treeWalkerValue.item );\n\t\t\t} else {\n\t\t\t\t// There should not be any text nodes after the element is split, so the only other value is `elementStart`.\n\t\t\t\tconst originalPart = stack.pop();\n\t\t\t\tconst splitPart = treeWalkerValue.item;\n\n\t\t\t\tthis._registerSplitPair( originalPart, splitPart );\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tposition: splitResult.position,\n\t\t\tcursorParent: splitResult.range.end.parent\n\t\t};\n\t}\n\n\t/**\n\t * Registers that `splitPart` element is a split part of the `originalPart` element.\n\t *\n\t * Data set by this method is used by {@link #_getSplitParts} and {@link #_removeEmptyElements}.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} originalPart\n\t * @param {module:engine/model/element~Element} splitPart\n\t */\n\t_registerSplitPair( originalPart, splitPart ) {\n\t\tif ( !this._splitParts.has( originalPart ) ) {\n\t\t\tthis._splitParts.set( originalPart, [ originalPart ] );\n\t\t}\n\n\t\tconst list = this._splitParts.get( originalPart );\n\n\t\tthis._splitParts.set( splitPart, list );\n\t\tlist.push( splitPart );\n\t}\n\n\t/**\n\t * @private\n\t * @see module:engine/conversion/upcastdispatcher~UpcastConversionApi#getSplitParts\n\t */\n\t_getSplitParts( element ) {\n\t\tlet parts;\n\n\t\tif ( !this._splitParts.has( element ) ) {\n\t\t\tparts = [ element ];\n\t\t} else {\n\t\t\tparts = this._splitParts.get( element );\n\t\t}\n\n\t\treturn parts;\n\t}\n\n\t/**\n\t * Checks if there are any empty elements created while splitting and removes them.\n\t *\n\t * This method works recursively to re-check empty elements again after at least one element was removed in the initial call,\n\t * as some elements might have become empty after other empty elements were removed from them.\n\t *\n\t * @private\n\t */\n\t_removeEmptyElements() {\n\t\tlet anyRemoved = false;\n\n\t\tfor ( const element of this._splitParts.keys() ) {\n\t\t\tif ( element.isEmpty ) {\n\t\t\t\tthis.conversionApi.writer.remove( element );\n\t\t\t\tthis._splitParts.delete( element );\n\n\t\t\t\tanyRemoved = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( anyRemoved ) {\n\t\t\tthis._removeEmptyElements();\n\t\t}\n\t}\n\n\t/**\n\t * Fired before the first conversion event, at the beginning of upcast (view to model conversion) process.\n\t *\n\t * @event viewCleanup\n\t * @param {module:engine/view/documentfragment~DocumentFragment|module:engine/view/element~Element}\n\t * viewItem Part of the view to be converted.\n\t */\n\n\t/**\n\t * Fired when {@link module:engine/view/element~Element} is converted.\n\t *\n\t * `element` is a namespace event for a class of events. Names of actually called events follow this pattern:\n\t * `element:<elementName>` where `elementName` is the name of converted element. This way listeners may listen to\n\t * all elements conversion or to conversion of specific elements.\n\t *\n\t * @event element\n\t * @param {Object} data Conversion data. Keep in mind that this object is shared by reference between all\n\t * callbacks that will be called. This means that callbacks can override values if needed, and those values will\n\t * be available in other callbacks.\n\t * @param {module:engine/view/item~Item} data.viewItem Converted item.\n\t * @param {module:engine/model/position~Position} data.modelCursor Position where a converter should start changes.\n\t * Change this value for the next converter to tell where the conversion should continue.\n\t * @param {module:engine/model/range~Range} data.modelRange The current state of conversion result. Every change to\n\t * converted element should be reflected by setting or modifying this property.\n\t * @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion utilities to be used by callback.\n\t */\n\n\t/**\n\t * Fired when {@link module:engine/view/text~Text} is converted.\n\t *\n\t * @event text\n\t * @see #event:element\n\t */\n\n\t/**\n\t * Fired when {@link module:engine/view/documentfragment~DocumentFragment} is converted.\n\t *\n\t * @event documentFragment\n\t * @see #event:element\n\t */\n}\n\nmix( UpcastDispatcher, EmitterMixin );\n\n// Traverses given model item and searches elements which marks marker range. Found element is removed from\n// DocumentFragment but path of this element is stored in a Map which is then returned.\n//\n// @param {module:engine/view/documentfragment~DocumentFragment|module:engine/view/node~Node} modelItem Fragment of model.\n// @returns {Map<String, module:engine/model/range~Range>} List of static markers.\nfunction extractMarkersFromModelFragment( modelItem, writer ) {\n\tconst markerElements = new Set();\n\tconst markers = new Map();\n\n\t// Create ModelTreeWalker.\n\tconst range = ModelRange._createIn( modelItem ).getItems();\n\n\t// Walk through DocumentFragment and collect marker elements.\n\tfor ( const item of range ) {\n\t\t// Check if current element is a marker.\n\t\tif ( item.name == '$marker' ) {\n\t\t\tmarkerElements.add( item );\n\t\t}\n\t}\n\n\t// Walk through collected marker elements store its path and remove its from the DocumentFragment.\n\tfor ( const markerElement of markerElements ) {\n\t\tconst markerName = markerElement.getAttribute( 'data-name' );\n\t\tconst currentPosition = writer.createPositionBefore( markerElement );\n\n\t\t// When marker of given name is not stored it means that we have found the beginning of the range.\n\t\tif ( !markers.has( markerName ) ) {\n\t\t\tmarkers.set( markerName, new ModelRange( currentPosition.clone() ) );\n\t\t// Otherwise is means that we have found end of the marker range.\n\t\t} else {\n\t\t\tmarkers.get( markerName ).end = currentPosition.clone();\n\t\t}\n\n\t\t// Remove marker element from DocumentFragment.\n\t\twriter.remove( markerElement );\n\t}\n\n\treturn markers;\n}\n\n// Creates model fragment according to given context and returns position in the bottom (the deepest) element.\nfunction createContextTree( contextDefinition, writer ) {\n\tlet position;\n\n\tfor ( const item of new SchemaContext( contextDefinition ) ) {\n\t\tconst attributes = {};\n\n\t\tfor ( const key of item.getAttributeKeys() ) {\n\t\t\tattributes[ key ] = item.getAttribute( key );\n\t\t}\n\n\t\tconst current = writer.createElement( item.name, attributes );\n\n\t\tif ( position ) {\n\t\t\twriter.append( current, position );\n\t\t}\n\n\t\tposition = ModelPosition._createAt( current, 0 );\n\t}\n\n\treturn position;\n}\n\n/**\n * Conversion interface that is registered for given {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher}\n * and is passed as one of parameters when {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher dispatcher}\n * fires it's events.\n *\n * @interface module:engine/conversion/upcastdispatcher~UpcastConversionApi\n */\n\n/**\n * Starts conversion of given item by firing an appropriate event.\n *\n * Every fired event is passed (as first parameter) an object with `modelRange` property. Every event may set and/or\n * modify that property. When all callbacks are done, the final value of `modelRange` property is returned by this method.\n * The `modelRange` must be {@link module:engine/model/range~Range model range} or `null` (as set by default).\n *\n * @method #convertItem\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:text\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:documentFragment\n * @param {module:engine/view/item~Item} viewItem Item to convert.\n * @param {module:engine/model/position~Position} modelCursor Position of conversion.\n * @returns {Object} result Conversion result.\n * @returns {module:engine/model/range~Range|null} result.modelRange Model range containing result of item conversion,\n * created and modified by callbacks attached to fired event, or `null` if the conversion result was incorrect.\n * @returns {module:engine/model/position~Position} result.modelCursor Position where conversion should be continued.\n */\n\n/**\n * Starts conversion of all children of given item by firing appropriate events for all those children.\n *\n * @method #convertChildren\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:text\n * @fires module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:documentFragment\n * @param {module:engine/view/item~Item} viewItem Element which children should be converted.\n * @param {module:engine/model/position~Position} modelCursor Position of conversion.\n * @returns {Object} result Conversion result.\n * @returns {module:engine/model/range~Range} result.modelRange Model range containing results of conversion of all children of given item.\n * When no children was converted then range is collapsed.\n * @returns {module:engine/model/position~Position} result.modelCursor Position where conversion should be continued.\n */\n\n/**\n * Checks {@link module:engine/model/schema~Schema schema} to find allowed parent for element that we are going to insert\n * starting from given position. If current parent does not allow to insert element but one of the ancestors does then\n * split nodes to allowed parent.\n *\n * If schema allows to insert node in given position, nothing is split and object with that position is returned.\n *\n * If it was not possible to find allowed parent, `null` is returned, nothing is split.\n *\n * Otherwise, ancestors are split and object with position and the copy of the split element is returned.\n *\n * For instance, if `<image>` is not allowed in `<paragraph>` but is allowed in `$root`:\n *\n *\t\t<paragraph>foo[]bar</paragraph>\n *\n *  \t-> split for `<image>` ->\n *\n *  \t<paragraph>foo</paragraph>[]<paragraph>bar</paragraph>\n *\n * In the sample above position between `<paragraph>` elements will be returned as `position` and the second `paragraph`\n * as `cursorParent`.\n *\n * @method #splitToAllowedParent\n * @param {module:engine/model/position~Position} position Position on which element is going to be inserted.\n * @param {module:engine/model/node~Node} node Node to insert.\n * @returns {Object|null} Split result. If it was not possible to find allowed position `null` is returned.\n * @returns {module:engine/model/position~Position} position between split elements.\n * @returns {module:engine/model/element~Element} [cursorParent] Element inside which cursor should be placed to\n * continue conversion. When element is not defined it means that there was no split.\n */\n\n/**\n * Returns all the split parts of given `element` that were created during upcasting through using {@link #splitToAllowedParent}.\n * It enables you to easily track those elements and continue processing them after they are split during their children conversion.\n *\n *\t\t<paragraph>Foo<image />bar<image />baz</paragraph> ->\n *\t\t<paragraph>Foo</paragraph><image /><paragraph>bar</paragraph><image /><paragraph>baz</paragraph>\n *\n * For a reference to any of above paragraphs, the function will return all three paragraphs (the original element included),\n * sorted in the order of their creation (the original element is the first one).\n *\n * If given `element` was not split, an array with single element is returned.\n *\n * Example of a usage in a converter code:\n *\n *\t\tconst myElement = conversionApi.writer.createElement( 'myElement' );\n *\n *\t\t// Children conversion may split `myElement`.\n *\t\tconversionApi.convertChildren( myElement, modelCursor );\n *\n *\t\tconst splitParts = conversionApi.getSplitParts( myElement );\n *\t\tconst lastSplitPart = splitParts[ splitParts.length - 1 ];\n *\n *\t\t// Setting `data.modelRange` basing on split parts:\n *\t\tdata.modelRange = conversionApi.writer.createRange(\n *\t\t\tconversionApi.writer.createPositionBefore( myElement ),\n *\t\t\tconversionApi.writer.createPositionAfter( lastSplitPart )\n *\t\t);\n *\n *\t\t// Setting `data.modelCursor` to continue after the last split element:\n *\t\tdata.modelCursor = conversionApi.writer.createPositionAfter( lastSplitPart );\n *\n * **Tip:** if you are unable to get a reference to the original element (for example because the code is split into multiple converters\n * or even classes) but it was already converted, you might want to check first element in `data.modelRange`. This is a common situation\n * if an attribute converter is separated from an element converter.\n *\n * @method #getSplitParts\n * @param {module:engine/model/element~Element} element\n * @returns {Array.<module:engine/model/element~Element>}\n */\n\n/**\n * Stores information about what parts of processed view item are still waiting to be handled. After a piece of view item\n * was converted, appropriate consumable value should be {@link module:engine/conversion/viewconsumable~ViewConsumable#consume consumed}.\n *\n * @member {module:engine/conversion/viewconsumable~ViewConsumable} #consumable\n */\n\n/**\n * Custom data stored by converters for conversion process. Custom properties of this object can be defined and use to\n * pass parameters between converters.\n *\n * The difference between this property and `data` parameter of\n * {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element} is that `data` parameters allows you\n * to pass parameters within a single event and `store` within the whole conversion.\n *\n * @member {Object} #store\n */\n\n/**\n * The model's schema instance.\n *\n * @member {module:engine/model/schema~Schema} #schema\n */\n\n/**\n * The {@link module:engine/model/writer~Writer} instance used to manipulate data during conversion.\n *\n * @member {module:engine/model/writer~Writer} #writer\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/controller/datacontroller\n */\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\nimport Mapper from '../conversion/mapper';\n\nimport DowncastDispatcher from '../conversion/downcastdispatcher';\nimport { insertText } from '../conversion/downcasthelpers';\n\nimport UpcastDispatcher from '../conversion/upcastdispatcher';\nimport { convertText, convertToModelFragment } from '../conversion/upcasthelpers';\n\nimport ViewDocumentFragment from '../view/documentfragment';\nimport ViewDocument from '../view/document';\nimport ViewDowncastWriter from '../view/downcastwriter';\n\nimport ModelRange from '../model/range';\n\n/**\n * Controller for the data pipeline. The data pipeline controls how data is retrieved from the document\n * and set inside it. Hence, the controller features two methods which allow to {@link ~DataController#get get}\n * and {@link ~DataController#set set} data of the {@link ~DataController#model model}\n * using given:\n *\n * * {@link module:engine/dataprocessor/dataprocessor~DataProcessor data processor},\n * * downcast converters,\n * * upcast converters.\n *\n * An instance of the data controller is always available in the {@link module:core/editor/editor~Editor#data `editor.data`}\n * property:\n *\n *\t\teditor.data.get( { rootName: 'customRoot' } ); // -> '<p>Hello!</p>'\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class DataController {\n\t/**\n\t * Creates a data controller instance.\n\t *\n\t * @param {module:engine/model/model~Model} model Data model.\n\t * @param {module:engine/dataprocessor/dataprocessor~DataProcessor} [dataProcessor] Data processor that should be used\n\t * by the controller.\n\t */\n\tconstructor( model, dataProcessor ) {\n\t\t/**\n\t\t * Data model.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * Data processor used during the conversion.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/dataprocessor/dataprocessor~DataProcessor}\n\t\t */\n\t\tthis.processor = dataProcessor;\n\n\t\t/**\n\t\t * Mapper used for the conversion. It has no permanent bindings, because they are created when getting data and\n\t\t * cleared directly after the data are converted. However, the mapper is defined as a class property, because\n\t\t * it needs to be passed to the `DowncastDispatcher` as a conversion API.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/mapper~Mapper}\n\t\t */\n\t\tthis.mapper = new Mapper();\n\n\t\t/**\n\t\t * Downcast dispatcher used by the {@link #get get method}. Downcast converters should be attached to it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/downcastdispatcher~DowncastDispatcher}\n\t\t */\n\t\tthis.downcastDispatcher = new DowncastDispatcher( {\n\t\t\tmapper: this.mapper\n\t\t} );\n\t\tthis.downcastDispatcher.on( 'insert:$text', insertText(), { priority: 'lowest' } );\n\n\t\t/**\n\t\t * Upcast dispatcher used by the {@link #set set method}. Upcast converters should be attached to it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/upcastdispatcher~UpcastDispatcher}\n\t\t */\n\t\tthis.upcastDispatcher = new UpcastDispatcher( {\n\t\t\tschema: model.schema\n\t\t} );\n\n\t\t// Define default converters for text and elements.\n\t\t//\n\t\t// Note that if there is no default converter for the element it will be skipped, for instance `<b>foo</b>` will be\n\t\t// converted to nothing. We add `convertToModelFragment` as a last converter so it converts children of that\n\t\t// element to the document fragment so `<b>foo</b>` will be converted to `foo` if there is no converter for `<b>`.\n\t\tthis.upcastDispatcher.on( 'text', convertText(), { priority: 'lowest' } );\n\t\tthis.upcastDispatcher.on( 'element', convertToModelFragment(), { priority: 'lowest' } );\n\t\tthis.upcastDispatcher.on( 'documentFragment', convertToModelFragment(), { priority: 'lowest' } );\n\n\t\tthis.decorate( 'init' );\n\n\t\t// Fire `ready` event when initialisation has completed. Such low level listener gives possibility\n\t\t// to plug into initialisation pipeline without interrupting the initialisation flow.\n\t\tthis.on( 'init', () => {\n\t\t\tthis.fire( 'ready' );\n\t\t}, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * Returns the model's data converted by downcast dispatchers attached to {@link #downcastDispatcher} and\n\t * formatted by the {@link #processor data processor}.\n\t *\n\t * @param {Object} [options]\n\t * @param {String} [options.rootName='main'] Root name.\n\t * @param {String} [options.trim='empty'] Whether returned data should be trimmed. This option is set to `empty` by default,\n\t * which means whenever editor content is considered empty, an empty string will be returned. To turn off trimming completely\n\t * use `'none'`. In such cases exact content will be returned (for example `<p>&nbsp;</p>` for an empty editor).\n\t * @returns {String} Output data.\n\t */\n\tget( options ) {\n\t\tconst { rootName = 'main', trim = 'empty' } = options || {};\n\n\t\tif ( !this._checkIfRootsExists( [ rootName ] ) ) {\n\t\t\t/**\n\t\t\t * Cannot get data from a non-existing root. This error is thrown when {@link #get DataController#get() method}\n\t\t\t * is called with non-existent root name. For example, if there is an editor instance with only `main` root,\n\t\t\t * calling {@link #get} like:\n\t\t\t *\n\t\t\t *\t\tdata.get( { rootName: 'root2' } );\n\t\t\t *\n\t\t\t * will throw this error.\n\t\t\t *\n\t\t\t * @error datacontroller-get-non-existent-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.', this );\n\t\t}\n\n\t\tconst root = this.model.document.getRoot( rootName );\n\n\t\tif ( trim === 'empty' && !this.model.hasContent( root, { ignoreWhitespaces: true } ) ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn this.stringify( root );\n\t}\n\n\t/**\n\t * Returns the content of the given {@link module:engine/model/element~Element model's element} or\n\t * {@link module:engine/model/documentfragment~DocumentFragment model document fragment} converted by the downcast converters\n\t * attached to {@link #downcastDispatcher} and formatted by the {@link #processor data processor}.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} modelElementOrFragment\n\t * Element whose content will be stringified.\n\t * @returns {String} Output data.\n\t */\n\tstringify( modelElementOrFragment ) {\n\t\t// Model -> view.\n\t\tconst viewDocumentFragment = this.toView( modelElementOrFragment );\n\n\t\t// View -> data.\n\t\treturn this.processor.toData( viewDocumentFragment );\n\t}\n\n\t/**\n\t * Returns the content of the given {@link module:engine/model/element~Element model element} or\n\t * {@link module:engine/model/documentfragment~DocumentFragment model document fragment} converted by the downcast\n\t * converters attached to {@link #downcastDispatcher} to a\n\t * {@link module:engine/view/documentfragment~DocumentFragment view document fragment}.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} modelElementOrFragment\n\t * Element or document fragment whose content will be converted.\n\t * @returns {module:engine/view/documentfragment~DocumentFragment} Output view DocumentFragment.\n\t */\n\ttoView( modelElementOrFragment ) {\n\t\t// Clear bindings so the call to this method gives correct results.\n\t\tthis.mapper.clearBindings();\n\n\t\t// First, convert elements.\n\t\tconst modelRange = ModelRange._createIn( modelElementOrFragment );\n\n\t\tconst viewDocumentFragment = new ViewDocumentFragment();\n\n\t\t// Create separate ViewDowncastWriter just for data conversion purposes.\n\t\t// We have no view controller and rendering do DOM in DataController so view.change() block is not used here.\n\t\tconst viewWriter = new ViewDowncastWriter( new ViewDocument() );\n\t\tthis.mapper.bindElements( modelElementOrFragment, viewDocumentFragment );\n\n\t\tthis.downcastDispatcher.convertInsert( modelRange, viewWriter );\n\n\t\tif ( !modelElementOrFragment.is( 'documentFragment' ) ) {\n\t\t\t// Then, if a document element is converted, convert markers.\n\t\t\t// From all document markers, get those, which \"intersect\" with the converter element.\n\t\t\tconst markers = _getMarkersRelativeToElement( modelElementOrFragment );\n\n\t\t\tfor ( const [ name, range ] of markers ) {\n\t\t\t\tthis.downcastDispatcher.convertMarkerAdd( name, range, viewWriter );\n\t\t\t}\n\t\t}\n\n\t\treturn viewDocumentFragment;\n\t}\n\n\t/**\n\t * Sets initial input data parsed by the {@link #processor data processor} and\n\t * converted by the {@link #upcastDispatcher view-to-model converters}.\n\t * Initial data can be set only to document that {@link module:engine/model/document~Document#version} is equal 0.\n\t *\n\t * **Note** This method is {@link module:utils/observablemixin~ObservableMixin#decorate decorated} which is\n\t * used by e.g. collaborative editing plugin that syncs remote data on init.\n\t *\n\t * When data is passed as a string it is initialized on a default `main` root:\n\t *\n\t *\t\tdataController.init( '<p>Foo</p>' ); // Initializes data on the `main` root.\n\t *\n\t * To initialize data on a different root or multiple roots at once, object containing `rootName` - `data` pairs should be passed:\n\t *\n\t *\t\tdataController.init( { main: '<p>Foo</p>', title: '<h1>Bar</h1>' } ); // Initializes data on the `main` and `title` roots.\n\t *\n\t * @fires init\n\t * @param {String|Object.<String,String>} data Input data as a string or an object containing `rootName` - `data`\n\t * pairs to initialize data on multiple roots at once.\n\t * @returns {Promise} Promise that is resolved after the data is set on the editor.\n\t */\n\tinit( data ) {\n\t\tif ( this.model.document.version ) {\n\t\t\t/**\n\t\t\t * Cannot set initial data to not empty {@link module:engine/model/document~Document}.\n\t\t\t * Initial data should be set once, during {@link module:core/editor/editor~Editor} initialization,\n\t\t\t * when the {@link module:engine/model/document~Document#version} is equal 0.\n\t\t\t *\n\t\t\t * @error datacontroller-init-document-not-empty\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'datacontroller-init-document-not-empty: Trying to set initial data to not empty document.', this );\n\t\t}\n\n\t\tlet initialData = {};\n\t\tif ( typeof data === 'string' ) {\n\t\t\tinitialData.main = data; // Default root is 'main'. To initiate data on a different root, object should be passed.\n\t\t} else {\n\t\t\tinitialData = data;\n\t\t}\n\n\t\tif ( !this._checkIfRootsExists( Object.keys( initialData ) ) ) {\n\t\t\t/**\n\t\t\t * Cannot init data on a non-existing root. This error is thrown when {@link #init DataController#init() method}\n\t\t\t * is called with non-existent root name. For example, if there is an editor instance with only `main` root,\n\t\t\t * calling {@link #init} like:\n\t\t\t *\n\t\t\t * \t\tdata.init( { main: '<p>Foo</p>', root2: '<p>Bar</p>' } );\n\t\t\t *\n\t\t\t * will throw this error.\n\t\t\t *\n\t\t\t * @error datacontroller-init-non-existent-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.', this );\n\t\t}\n\n\t\tthis.model.enqueueChange( 'transparent', writer => {\n\t\t\tfor ( const rootName of Object.keys( initialData ) ) {\n\t\t\t\tconst modelRoot = this.model.document.getRoot( rootName );\n\t\t\t\twriter.insert( this.parse( initialData[ rootName ], modelRoot ), modelRoot, 0 );\n\t\t\t}\n\t\t} );\n\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Sets input data parsed by the {@link #processor data processor} and\n\t * converted by the {@link #upcastDispatcher view-to-model converters}.\n\t * This method can be used any time to replace existing editor data by the new one without clearing the\n\t * {@link module:engine/model/document~Document#history document history}.\n\t *\n\t * This method also creates a batch with all the changes applied. If all you need is to parse data, use\n\t * the {@link #parse} method.\n\t *\n\t * When data is passed as a string it is set on a default `main` root:\n\t *\n\t *\t\tdataController.set( '<p>Foo</p>' ); // Sets data on the `main` root.\n\t *\n\t * To set data on a different root or multiple roots at once, object containing `rootName` - `data` pairs should be passed:\n\t *\n\t *\t\tdataController.set( { main: '<p>Foo</p>', title: '<h1>Bar</h1>' } ); // Sets data on the `main` and `title` roots.\n\t *\n\t * @param {String|Object.<String,String>} data Input data as a string or an object containing `rootName` - `data`\n\t * pairs to set data on multiple roots at once.\n\t */\n\tset( data ) {\n\t\tlet newData = {};\n\n\t\tif ( typeof data === 'string' ) {\n\t\t\tnewData.main = data; // Default root is 'main'. To set data on a different root, object should be passed.\n\t\t} else {\n\t\t\tnewData = data;\n\t\t}\n\n\t\tif ( !this._checkIfRootsExists( Object.keys( newData ) ) ) {\n\t\t\t/**\n\t\t\t * Cannot set data on a non-existing root. This error is thrown when {@link #set DataController#set() method}\n\t\t\t * is called with non-existent root name. For example, if there is an editor instance with only `main` root,\n\t\t\t * calling {@link #set} like:\n\t\t\t *\n\t\t\t * \t\tdata.set( { main: '<p>Foo</p>', root2: '<p>Bar</p>' } );\n\t\t\t *\n\t\t\t * will throw this error.\n\t\t\t *\n\t\t\t * @error datacontroller-set-non-existent-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.', this );\n\t\t}\n\n\t\tthis.model.enqueueChange( 'transparent', writer => {\n\t\t\twriter.setSelection( null );\n\t\t\twriter.removeSelectionAttribute( this.model.document.selection.getAttributeKeys() );\n\n\t\t\tfor ( const rootName of Object.keys( newData ) ) {\n\t\t\t\t// Save to model.\n\t\t\t\tconst modelRoot = this.model.document.getRoot( rootName );\n\n\t\t\t\twriter.remove( writer.createRangeIn( modelRoot ) );\n\t\t\t\twriter.insert( this.parse( newData[ rootName ], modelRoot ), modelRoot, 0 );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Returns the data parsed by the {@link #processor data processor} and then converted by upcast converters\n\t * attached to the {@link #upcastDispatcher}.\n\t *\n\t * @see #set\n\t * @param {String} data Data to parse.\n\t * @param {module:engine/model/schema~SchemaContextDefinition} [context='$root'] Base context in which the view will\n\t * be converted to the model. See: {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#convert}.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} Parsed data.\n\t */\n\tparse( data, context = '$root' ) {\n\t\t// data -> view\n\t\tconst viewDocumentFragment = this.processor.toView( data );\n\n\t\t// view -> model\n\t\treturn this.toModel( viewDocumentFragment, context );\n\t}\n\n\t/**\n\t * Returns the result of the given {@link module:engine/view/element~Element view element} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment view document fragment} converted by the\n\t * {@link #upcastDispatcher view-to-model converters}, wrapped by {@link module:engine/model/documentfragment~DocumentFragment}.\n\t *\n\t * When marker elements were converted during the conversion process, it will be set as a document fragment's\n\t * {@link module:engine/model/documentfragment~DocumentFragment#markers static markers map}.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} viewElementOrFragment\n\t * Element or document fragment whose content will be converted.\n\t * @param {module:engine/model/schema~SchemaContextDefinition} [context='$root'] Base context in which the view will\n\t * be converted to the model. See: {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#convert}.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} Output document fragment.\n\t */\n\ttoModel( viewElementOrFragment, context = '$root' ) {\n\t\treturn this.model.change( writer => {\n\t\t\treturn this.upcastDispatcher.convert( viewElementOrFragment, writer, context );\n\t\t} );\n\t}\n\n\t/**\n\t * Removes all event listeners set by the DataController.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Checks if all provided root names are existing editor roots.\n\t *\n\t * @private\n\t * @param {Array.<String>} rootNames Root names to check.\n\t * @returns {Boolean} Whether all provided root names are existing editor roots.\n\t */\n\t_checkIfRootsExists( rootNames ) {\n\t\tfor ( const rootName of rootNames ) {\n\t\t\tif ( !this.model.document.getRootNames().includes( rootName ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Event fired once data initialisation has finished.\n\t *\n\t * @event ready\n\t */\n\n\t/**\n\t * Event fired after {@link #init init() method} has been run. It can be {@link #listenTo listened to} to adjust/modify\n\t * the initialisation flow. However, if the `init` event is stopped or prevented, the {@link #event:ready ready event}\n\t * should be fired manually.\n\t *\n\t * The `init` event is fired by decorated {@link #init} method.\n\t * See {@link module:utils/observablemixin~ObservableMixin#decorate} for more information and samples.\n\t *\n\t * @event init\n\t */\n}\n\nmix( DataController, ObservableMixin );\n\n// Helper function for downcast conversion.\n//\n// Takes a document element (element that is added to a model document) and checks which markers are inside it\n// and which markers are containing it. If the marker is intersecting with element, the intersection is returned.\nfunction _getMarkersRelativeToElement( element ) {\n\tconst result = [];\n\tconst doc = element.root.document;\n\n\tif ( !doc ) {\n\t\treturn [];\n\t}\n\n\tconst elementRange = ModelRange._createIn( element );\n\n\tfor ( const marker of doc.model.markers ) {\n\t\tconst intersection = elementRange.getIntersection( marker.getRange() );\n\n\t\tif ( intersection ) {\n\t\t\tresult.push( [ marker.name, intersection ] );\n\t\t}\n\t}\n\n\treturn result;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/conversion\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport UpcastHelpers from './upcasthelpers';\nimport DowncastHelpers from './downcasthelpers';\n\n/**\n * A utility class that helps add converters to upcast and downcast dispatchers.\n *\n * We recommend reading the {@glink framework/guides/architecture/editing-engine Editing engine architecture} guide first to\n * understand the core concepts of the conversion mechanisms.\n *\n * An instance of the conversion manager is available in the\n * {@link module:core/editor/editor~Editor#conversion `editor.conversion`} property\n * and by default has the following groups of dispatchers (i.e. directions of conversion):\n *\n * * `downcast` (editing and data downcasts)\n * * `editingDowncast`\n * * `dataDowncast`\n * * `upcast`\n *\n * # One-way converters\n *\n * To add a converter to a specific group, use the {@link module:engine/conversion/conversion~Conversion#for `for()`}\n * method:\n *\n *\t\t// Add a converter to editing downcast and data downcast.\n *\t\teditor.conversion.for( 'downcast' ).elementToElement( config ) );\n *\n *\t\t// Add a converter to the data pipepline only:\n *\t\teditor.conversion.for( 'dataDowncast' ).elementToElement( dataConversionConfig ) );\n *\n *\t\t// And a slightly different one for the editing pipeline:\n *\t\teditor.conversion.for( 'editingDowncast' ).elementToElement( editingConversionConfig ) );\n *\n * See {@link module:engine/conversion/conversion~Conversion#for `for()`} method documentation to learn more about\n * available conversion helpers and how to use your custom ones.\n *\n * # Two-way converters\n *\n * Besides using one-way converters via the `for()` method, you can also use other methods available in this\n * class to add two-way converters (upcast and downcast):\n *\n * * {@link module:engine/conversion/conversion~Conversion#elementToElement `elementToElement()`} &ndash;\n * Model element to view element and vice versa.\n * * {@link module:engine/conversion/conversion~Conversion#attributeToElement `attributeToElement()`} &ndash;\n * Model attribute to view element and vice versa.\n * * {@link module:engine/conversion/conversion~Conversion#attributeToAttribute `attributeToAttribute()`} &ndash;\n * Model attribute to view element and vice versa.\n */\nexport default class Conversion {\n\t/**\n\t * Creates a new conversion instance.\n\t *\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * Array.<module:engine/conversion/downcastdispatcher~DowncastDispatcher>} downcastDispatchers\n\t * @param {module:engine/conversion/upcastdispatcher~UpcastDispatcher|\n\t * Array.<module:engine/conversion/upcastdispatcher~UpcastDispatcher>} upcastDispatchers\n\t */\n\tconstructor( downcastDispatchers, upcastDispatchers ) {\n\t\t/**\n\t\t * Maps dispatchers group name to ConversionHelpers instances.\n\t\t *\n\t\t * @private\n\t\t * @member {Map.<String,module:engine/conversion/conversionhelpers~ConversionHelpers>}\n\t\t */\n\t\tthis._helpers = new Map();\n\n\t\t// Define default 'downcast' & 'upcast' dispatchers groups. Those groups are always available as two-way converters needs them.\n\t\tthis._downcast = Array.isArray( downcastDispatchers ) ? downcastDispatchers : [ downcastDispatchers ];\n\t\tthis._createConversionHelpers( { name: 'downcast', dispatchers: this._downcast, isDowncast: true } );\n\n\t\tthis._upcast = Array.isArray( upcastDispatchers ) ? upcastDispatchers : [ upcastDispatchers ];\n\t\tthis._createConversionHelpers( { name: 'upcast', dispatchers: this._upcast, isDowncast: false } );\n\t}\n\n\t/**\n\t * Define an alias for registered dispatcher.\n\t *\n\t *\t\tconst conversion = new Conversion(\n\t *\t\t\t[ dataDowncastDispatcher, editingDowncastDispatcher ],\n\t *\t\t\tupcastDispatcher\n\t *\t\t);\n\t *\n\t *\t\tconversion.addAlias( 'dataDowncast', dataDowncastDispatcher );\n\t *\n\t * @param {String} alias An alias of a dispatcher.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * module:engine/conversion/upcastdispatcher~UpcastDispatcher} dispatcher Dispatcher which should have an alias.\n\t */\n\taddAlias( alias, dispatcher ) {\n\t\tconst isDowncast = this._downcast.includes( dispatcher );\n\t\tconst isUpcast = this._upcast.includes( dispatcher );\n\n\t\tif ( !isUpcast && !isDowncast ) {\n\t\t\t/**\n\t\t\t * Trying to register and alias for a dispatcher that nas not been registered.\n\t\t\t *\n\t\t\t * @error conversion-add-alias-dispatcher-not-registered\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'conversion-add-alias-dispatcher-not-registered: ' +\n\t\t\t\t'Trying to register and alias for a dispatcher that nas not been registered.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tthis._createConversionHelpers( { name: alias, dispatchers: [ dispatcher ], isDowncast } );\n\t}\n\n\t/**\n\t * Provides a chainable API to assign converters to conversion dispatchers group.\n\t *\n\t * If the given group name has not been registered, the\n\t * {@link module:utils/ckeditorerror~CKEditorError `conversion-for-unknown-group` error} is thrown.\n\t *\n\t * You can use conversion helpers available directly in the `for()` chain or your custom ones via\n\t * the {@link module:engine/conversion/conversionhelpers~ConversionHelpers#add `add()`} method.\n\t *\n\t * # Using bulit-in conversion helpers\n\t *\n\t * The `for()` chain comes with a set of conversion helpers which you can use like this:\n\t *\n\t *\t\teditor.conversion.for( 'downcast' )\n\t *\t\t\t.elementToElement( config1 )        // Adds an element-to-element downcast converter.\n\t *\t\t\t.attributeToElement( config2 );     // Adds an attribute-to-element downcast converter.\n\t *\n\t *\t\teditor.conversion.for( 'upcast' )\n\t *\t\t\t.elementToAttribute( config3 );     // Adds an element-to-attribute upcast converter.\n\t *\n\t * Refer to the documentation of built-in conversion helpers to learn about their configuration options.\n\t *\n\t * * downcast (model-to-view) conversion helpers:\n\t *\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`},\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToElement `attributeToElement()`},\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToAttribute `attributeToAttribute()`}.\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#markerToElement `markerToElement()`}.\n\t *\t* {@link module:engine/conversion/downcasthelpers~DowncastHelpers#markerToHighlight `markerToHighlight()`}.\n\t *\n\t * * upcast (view-to-model) conversion helpers:\n\t *\n\t *\t* {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToElement `elementToElement()`},\n\t *\t* {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToAttribute `elementToAttribute()`},\n\t *\t* {@link module:engine/conversion/upcasthelpers~UpcastHelpers#attributeToAttribute `attributeToAttribute()`}.\n\t *\t* {@link module:engine/conversion/upcasthelpers~UpcastHelpers#elementToMarker `elementToMarker()`}.\n\t *\n\t * # Using custom conversion helpers\n\t *\n\t * If you need to implement a nontypical converter, you can do so by calling:\n\t *\n\t *\t\teditor.conversion.for( direction ).add( customHelper );\n\t *\n\t * The `.add()` method takes exactly one parameter, which is a function. This function should accept one parameter that\n\t * is a dispatcher instance. The function should add an actual converter to the passed dispatcher instance.\n\t *\n\t * Example:\n\t *\n\t *\t\teditor.conversion.for( 'upcast' ).add( dispatcher => {\n\t *\t\t\tdispatcher.on( 'element:a',  ( evt, data, conversionApi ) => {\n\t *\t\t\t\t// Do something with a view <a> element.\n\t *\t\t\t} );\n\t *\t\t} );\n\t *\n\t * Refer to the documentation of {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher}\n\t * and {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} to learn how to write\n\t * custom converters.\n\t *\n\t * @param {String} groupName The name of dispatchers group to add the converters to.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers|module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\tfor( groupName ) {\n\t\tif ( !this._helpers.has( groupName ) ) {\n\t\t\t/**\n\t\t\t * Trying to add a converter to an unknown dispatchers group.\n\t\t\t *\n\t\t\t * @error conversion-for-unknown-group\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.', this );\n\t\t}\n\n\t\treturn this._helpers.get( groupName );\n\t}\n\n\t/**\n\t * Sets up converters between the model and the view that convert a model element to a view element (and vice versa).\n\t * For example, the model `<paragraph>Foo</paragraph>` is `<p>Foo</p>` in the view.\n\t *\n\t *\t\t// A simple conversion from the `paragraph` model element to the `<p>` view element (and vice versa).\n\t *\t\teditor.conversion.elementToElement( { model: 'paragraph', view: 'p' } );\n\t *\n\t *\t\t// Override other converters by specifying a converter definition with a higher priority.\n\t *\t\teditor.conversion.elementToElement( { model: 'paragraph', view: 'div', converterPriority: 'high' } );\n\t *\n\t *\t\t// View specified as an object instead of a string.\n\t *\t\teditor.conversion.elementToElement( {\n\t *\t\t\tmodel: 'fancyParagraph',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'fancy'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Use `upcastAlso` to define other view elements that should also be converted to a `paragraph` element.\n\t *\t\teditor.conversion.elementToElement( {\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tview: 'p',\n\t *\t\t\tupcastAlso: [\n\t *\t\t\t\t'div',\n\t *\t\t\t\t{\n\t *\t\t\t\t\t// Any element with the `display: block` style.\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\tdisplay: 'block'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t *\t\t// `upcastAlso` set as callback enables a conversion of a wide range of different view elements.\n\t *\t\teditor.conversion.elementToElement( {\n\t *\t\t\tmodel: 'heading',\n\t *\t\t\tview: 'h2',\n\t *\t\t\t// Convert \"headling-like\" paragraphs to headings.\n\t *\t\t\tupcastAlso: viewElement => {\n\t *\t\t\t\tconst fontSize = viewElement.getStyle( 'font-size' );\n\t *\n\t *\t\t\t\tif ( !fontSize ) {\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t}\n\t *\n\t *\t\t\t\tconst match = fontSize.match( /(\\d+)\\s*px/ );\n\t *\n\t *\t\t\t\tif ( !match ) {\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t}\n\t *\n\t *\t\t\t\tconst size = Number( match[ 1 ] );\n\t *\n\t *\t\t\t\tif ( size > 26 ) {\n\t *\t\t\t\t\t// Returned value can be an object with the matched properties.\n\t *\t\t\t\t\t// These properties will be \"consumed\" during the conversion.\n\t *\t\t\t\t\t// See `engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for more details.\n\t *\n\t *\t\t\t\t\treturn { name: true, styles: [ 'font-size' ] };\n\t *\t\t\t\t}\n\t *\n\t *\t\t\t\treturn null;\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * `definition.model` is a `String` with a model element name to convert from or to.\n\t * See {@link module:engine/conversion/conversion~ConverterDefinition} to learn about other parameters.\n\t *\n\t * @param {module:engine/conversion/conversion~ConverterDefinition} definition The converter definition.\n\t */\n\telementToElement( definition ) {\n\t\t// Set up downcast converter.\n\t\tthis.for( 'downcast' ).elementToElement( definition );\n\n\t\t// Set up upcast converter.\n\t\tfor ( const { model, view } of _getAllUpcastDefinitions( definition ) ) {\n\t\t\tthis.for( 'upcast' )\n\t\t\t\t.elementToElement( {\n\t\t\t\t\tmodel,\n\t\t\t\t\tview,\n\t\t\t\t\tconverterPriority: definition.converterPriority\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Sets up converters between the model and the view that convert a model attribute to a view element (and vice versa).\n\t * For example, a model text node with `\"Foo\"` as data and the `bold` attribute is `<strong>Foo</strong>` in the view.\n\t *\n\t *\t\t// A simple conversion from the `bold=true` attribute to the `<strong>` view element (and vice versa).\n\t *\t\teditor.conversion.attributeToElement( { model: 'bold', view: 'strong' } );\n\t *\n\t *\t\t// Override other converters by specifying a converter definition with a higher priority.\n\t *\t\teditor.conversion.attributeToElement( { model: 'bold', view: 'b', converterPriority: 'high' } );\n\t *\n\t *\t\t// View specified as an object instead of a string.\n\t *\t\teditor.conversion.attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: 'bold'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Use `config.model.name` to define the conversion only from a given node type, `$text` in this case.\n\t *\t\t// The same attribute on different elements may then be handled by a different converter.\n\t *\t\teditor.conversion.attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'textDecoration',\n\t *\t\t\t\tvalues: [ 'underline', 'lineThrough' ],\n\t *\t\t\t\tname: '$text'\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tunderline: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'text-decoration': 'underline'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tlineThrough: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'text-decoration': 'line-through'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Use `upcastAlso` to define other view elements that should also be converted to the `bold` attribute.\n\t *\t\teditor.conversion.attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: 'strong',\n\t *\t\t\tupcastAlso: [\n\t *\t\t\t\t'b',\n\t *\t\t\t\t{\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tclasses: 'bold'\n\t *\t\t\t\t},\n\t *\t\t\t\t{\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-weight': 'bold'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tviewElement => {\n\t *\t\t\t\t\tconst fontWeight = viewElement.getStyle( 'font-weight' );\n\t *\n\t *\t\t\t\t\tif ( viewElement.is( 'span' ) && fontWeight && /\\d+/.test() && Number( fontWeight ) > 500 ) {\n\t *\t\t\t\t\t\t// Returned value can be an object with the matched properties.\n\t *\t\t\t\t\t\t// These properties will be \"consumed\" during the conversion.\n\t *\t\t\t\t\t\t// See `engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for more details.\n\t *\n\t *\t\t\t\t\t\treturn {\n\t *\t\t\t\t\t\t\tname: true,\n\t *\t\t\t\t\t\t\tstyles: [ 'font-weight' ]\n\t *\t\t\t\t\t\t};\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t *\t\t// Conversion from and to a model attribute key whose value is an enum (`fontSize=big|small`).\n\t *\t\t// `upcastAlso` set as callback enables a conversion of a wide range of different view elements.\n\t *\t\teditor.conversion.attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'fontSize',\n\t *\t\t\t\tvalues: [ 'big', 'small' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tbig: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '1.2em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tsmall: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '0.8em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tupcastAlso: {\n\t *\t\t\t\tbig: viewElement => {\n\t *\t\t\t\t\tconst fontSize = viewElement.getStyle( 'font-size' );\n\t *\n\t *\t\t\t\t\tif ( !fontSize ) {\n\t *\t\t\t\t\t\treturn null;\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\tconst match = fontSize.match( /(\\d+)\\s*px/ );\n\t *\n\t *\t\t\t\t\tif ( !match ) {\n\t *\t\t\t\t\t\treturn null;\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\tconst size = Number( match[ 1 ] );\n\t *\n\t *\t\t\t\t\tif ( viewElement.is( 'span' ) && size > 10 ) {\n\t *\t\t\t\t\t\t// Returned value can be an object with the matched properties.\n\t *\t\t\t\t\t\t// These properties will be \"consumed\" during the conversion.\n\t *\t\t\t\t\t\t// See `engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for more details.\n\t *\n\t *\t\t\t\t\t\treturn { name: true, styles: [ 'font-size' ] };\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t},\n\t *\t\t\t\tsmall: viewElement => {\n\t *\t\t\t\t\tconst fontSize = viewElement.getStyle( 'font-size' );\n\t *\n\t *\t\t\t\t\tif ( !fontSize ) {\n\t *\t\t\t\t\t\treturn null;\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\tconst match = fontSize.match( /(\\d+)\\s*px/ );\n\t *\n\t *\t\t\t\t\tif ( !match ) {\n\t *\t\t\t\t\t\treturn null;\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\tconst size = Number( match[ 1 ] );\n\t *\n\t *\t\t\t\t\tif ( viewElement.is( 'span' ) && size < 10 ) {\n\t *\t\t\t\t\t\t// Returned value can be an object with the matched properties.\n\t *\t\t\t\t\t\t// These properties will be \"consumed\" during the conversion.\n\t *\t\t\t\t\t\t// See `engine.view.Matcher~MatcherPattern` and `engine.view.Matcher#match` for more details.\n\t *\n\t *\t\t\t\t\t\treturn { name: true, styles: [ 'font-size' ] };\n\t *\t\t\t\t\t}\n\t *\n\t *\t\t\t\t\treturn null;\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * The `definition.model` parameter specifies which model attribute should be converted from or to. It can be a `{ key, value }` object\n\t * describing the attribute key and value to convert or a `String` specifying just the attribute key (then `value` is set to `true`).\n\t * See {@link module:engine/conversion/conversion~ConverterDefinition} to learn about other parameters.\n\t *\n\t * @param {module:engine/conversion/conversion~ConverterDefinition} definition The converter definition.\n\t */\n\tattributeToElement( definition ) {\n\t\t// Set up downcast converter.\n\t\tthis.for( 'downcast' ).attributeToElement( definition );\n\n\t\t// Set up upcast converter.\n\t\tfor ( const { model, view } of _getAllUpcastDefinitions( definition ) ) {\n\t\t\tthis.for( 'upcast' )\n\t\t\t\t.elementToAttribute( {\n\t\t\t\t\tview,\n\t\t\t\t\tmodel,\n\t\t\t\t\tconverterPriority: definition.converterPriority\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Sets up converters between the model and the view that convert a model attribute to a view attribute (and vice versa).\n\t * For example, `<image src='foo.jpg'></image>` is converted to `<img src='foo.jpg'></img>` (the same attribute key and value).\n\t * This type of converters is intended to be used with {@link module:engine/model/element~Element model element} nodes.\n\t * To convert text attributes {@link module:engine/conversion/conversion~Conversion#attributeToElement `attributeToElement converter`}\n\t * should be set up.\n\t *\n\t *\t\t// A simple conversion from the `source` model attribute to the `src` view attribute (and vice versa).\n\t *\t\teditor.conversion.attributeToAttribute( { model: 'source', view: 'src' } );\n\t *\n\t *\t\t// Attribute values are strictly specified.\n\t *\t\teditor.conversion.attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tname: 'image',\n\t *\t\t\t\tkey: 'aside',\n\t *\t\t\t\tvalues: [ 'aside' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\taside: {\n\t *\t\t\t\t\tname: 'img',\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: [ 'aside', 'half-size' ]\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Set the style attribute.\n\t *\t\teditor.conversion.attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tname: 'image',\n\t *\t\t\t\tkey: 'aside',\n\t *\t\t\t\tvalues: [ 'aside' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\taside: {\n\t *\t\t\t\t\tname: 'img',\n\t *\t\t\t\t\tkey: 'style',\n\t *\t\t\t\t\tvalue: {\n\t *\t\t\t\t\t\tfloat: 'right',\n\t *\t\t\t\t\t\twidth: '50%',\n\t *\t\t\t\t\t\tmargin: '5px'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\t// Conversion from and to a model attribute key whose value is an enum (`align=right|center`).\n\t *\t\t// Use `upcastAlso` to define other view elements that should also be converted to the `align=right` attribute.\n\t *\t\teditor.conversion.attributeToAttribute( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'align',\n\t *\t\t\t\tvalues: [ 'right', 'center' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tright: {\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: 'align-right'\n\t *\t\t\t\t},\n\t *\t\t\t\tcenter: {\n\t *\t\t\t\t\tkey: 'class',\n\t *\t\t\t\t\tvalue: 'align-center'\n\t *\t\t\t\t}\n\t *\t\t\t},\n\t *\t\t\tupcastAlso: {\n\t *\t\t\t\tright: {\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'text-align': 'right'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tcenter: {\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'text-align': 'center'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * The `definition.model` parameter specifies which model attribute should be converted from and to.\n\t * It can be a `{ key, [ values ], [ name ] }` object or a `String`, which will be treated like `{ key: definition.model }`.\n\t * The `key` property is the model attribute key to convert from and to.\n\t * The `values` are the possible model attribute values. If `values` is not set, the model attribute value will be the same as the\n\t * view attribute value.\n\t * If `name` is set, the conversion will be set up only for model elements with the given name.\n\t *\n\t * The `definition.view` parameter specifies which view attribute should be converted from and to.\n\t * It can be a `{ key, value, [ name ] }` object or a `String`, which will be treated like `{ key: definition.view }`.\n\t * The `key` property is the view attribute key to convert from and to.\n\t * The `value` is the view attribute value to convert from and to. If `definition.value` is not set, the view attribute value will be\n\t * the same as the model attribute value.\n\t * If `key` is `'class'`, `value` can be a `String` or an array of `String`s.\n\t * If `key` is `'style'`, `value` is an object with key-value pairs.\n\t * In other cases, `value` is a `String`.\n\t * If `name` is set, the conversion will be set up only for model elements with the given name.\n\t * If `definition.model.values` is set, `definition.view` is an object that assigns values from `definition.model.values`\n\t * to `{ key, value, [ name ] }` objects.\n\t *\n\t * `definition.upcastAlso` specifies which other matching view elements should also be upcast to the given model configuration.\n\t * If `definition.model.values` is set, `definition.upcastAlso` should be an object assigning values from `definition.model.values`\n\t * to {@link module:engine/view/matcher~MatcherPattern}s or arrays of {@link module:engine/view/matcher~MatcherPattern}s.\n\t *\n\t * **Note:** `definition.model` and `definition.view` form should be mirrored, so the same types of parameters should\n\t * be given in both parameters.\n\t *\n\t * @param {Object} definition The converter definition.\n\t * @param {String|Object} definition.model The model attribute to convert from and to.\n\t * @param {String|Object} definition.view The view attribute to convert from and to.\n\t * @param {module:engine/view/matcher~MatcherPattern|Array.<module:engine/view/matcher~MatcherPattern>} [definition.upcastAlso]\n\t * Any view element matching `definition.upcastAlso` will also be converted to the given model attribute. `definition.upcastAlso`\n\t * is used only if `config.model.values` is specified.\n\t */\n\tattributeToAttribute( definition ) {\n\t\t// Set up downcast converter.\n\t\tthis.for( 'downcast' ).attributeToAttribute( definition );\n\n\t\t// Set up upcast converter.\n\t\tfor ( const { model, view } of _getAllUpcastDefinitions( definition ) ) {\n\t\t\tthis.for( 'upcast' )\n\t\t\t\t.attributeToAttribute( {\n\t\t\t\t\tview,\n\t\t\t\t\tmodel\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Creates and caches conversion helpers for given dispatchers group.\n\t *\n\t * @private\n\t * @param {Object} options\n\t * @param {String} options.name Group name.\n\t * @param {Array.<module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * module:engine/conversion/upcastdispatcher~UpcastDispatcher>} options.dispatchers\n\t * @param {Boolean} options.isDowncast\n\t */\n\t_createConversionHelpers( { name, dispatchers, isDowncast } ) {\n\t\tif ( this._helpers.has( name ) ) {\n\t\t\t/**\n\t\t\t * Trying to register a group name that has already been registered.\n\t\t\t *\n\t\t\t * @error conversion-group-exists\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'conversion-group-exists: Trying to register a group name that has already been registered.', this );\n\t\t}\n\n\t\tconst helpers = isDowncast ? new DowncastHelpers( dispatchers ) : new UpcastHelpers( dispatchers );\n\n\t\tthis._helpers.set( name, helpers );\n\t}\n}\n\n/**\n * Defines how the model should be converted from and to the view.\n *\n * @typedef {Object} module:engine/conversion/conversion~ConverterDefinition\n *\n * @property {*} [model] The model conversion definition. Describes the model element or model attribute to convert. This parameter differs\n * for different functions that accept `ConverterDefinition`. See the description of the function to learn how to set it.\n * @property {module:engine/view/elementdefinition~ElementDefinition|Object} view The definition of the view element to convert from and\n * to. If `model` describes multiple values, `view` is an object that assigns these values (`view` object keys) to view element definitions\n * (`view` object values).\n * @property {module:engine/view/matcher~MatcherPattern|Array.<module:engine/view/matcher~MatcherPattern>} [upcastAlso]\n * Any view element matching `upcastAlso` will also be converted to the model. If `model` describes multiple values, `upcastAlso`\n * is an object that assigns these values (`upcastAlso` object keys) to {@link module:engine/view/matcher~MatcherPattern}s\n * (`upcastAlso` object values).\n * @property {module:utils/priorities~PriorityString} [converterPriority] The converter priority.\n */\n\n// Helper function that creates a joint array out of an item passed in `definition.view` and items passed in\n// `definition.upcastAlso`.\n//\n// @param {module:engine/conversion/conversion~ConverterDefinition} definition\n// @returns {Array} Array containing view definitions.\nfunction* _getAllUpcastDefinitions( definition ) {\n\tif ( definition.model.values ) {\n\t\tfor ( const value of definition.model.values ) {\n\t\t\tconst model = { key: definition.model.key, value };\n\t\t\tconst view = definition.view[ value ];\n\t\t\tconst upcastAlso = definition.upcastAlso ? definition.upcastAlso[ value ] : undefined;\n\n\t\t\tyield* _getUpcastDefinition( model, view, upcastAlso );\n\t\t}\n\t} else {\n\t\tyield* _getUpcastDefinition( definition.model, definition.view, definition.upcastAlso );\n\t}\n}\n\nfunction* _getUpcastDefinition( model, view, upcastAlso ) {\n\tyield { model, view };\n\n\tif ( upcastAlso ) {\n\t\tupcastAlso = Array.isArray( upcastAlso ) ? upcastAlso : [ upcastAlso ];\n\n\t\tfor ( const upcastAlsoItem of upcastAlso ) {\n\t\t\tyield { model, view: upcastAlsoItem };\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/batch\n */\n\n/**\n * A batch instance groups model changes ({@link module:engine/model/operation/operation~Operation operations}). All operations\n * grouped in a single batch can be reverted together, so you can also think about a batch as of a single undo step. If you want\n * to extend a given undo step, you can add more changes to the batch using {@link module:engine/model/model~Model#enqueueChange}:\n *\n *\t\tmodel.enqueueChange( batch, writer => {\n *\t\t\twriter.insertText( 'foo', paragraph, 'end' );\n *\t\t} );\n *\n * @see module:engine/model/model~Model#enqueueChange\n * @see module:engine/model/model~Model#change\n */\nexport default class Batch {\n\t/**\n\t * Creates a batch instance.\n\t *\n\t * @see module:engine/model/model~Model#enqueueChange\n\t * @see module:engine/model/model~Model#change\n\t * @param {'transparent'|'default'} [type='default'] The type of the batch.\n\t */\n\tconstructor( type = 'default' ) {\n\t\t/**\n\t\t * An array of operations that compose this batch.\n\t\t *\n\t\t * @readonly\n\t\t * @type {Array.<module:engine/model/operation/operation~Operation>}\n\t\t */\n\t\tthis.operations = [];\n\n\t\t/**\n\t\t * The type of the batch.\n\t\t *\n\t\t * It can be one of the following values:\n\t\t * * `'default'` &ndash; All \"normal\" batches. This is the most commonly used type.\n\t\t * * `'transparent'` &ndash; A batch that should be ignored by other features, i.e. an initial batch or collaborative editing\n\t\t * changes.\n\t\t *\n\t\t * @readonly\n\t\t * @type {'transparent'|'default'}\n\t\t */\n\t\tthis.type = type;\n\t}\n\n\t/**\n\t * Returns the base version of this batch, which is equal to the base version of the first operation in the batch.\n\t * If there are no operations in the batch or neither operation has the base version set, it returns `null`.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget baseVersion() {\n\t\tfor ( const op of this.operations ) {\n\t\t\tif ( op.baseVersion !== null ) {\n\t\t\t\treturn op.baseVersion;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Adds an operation to the batch instance.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation An operation to add.\n\t * @returns {module:engine/model/operation/operation~Operation} The added operation.\n\t */\n\taddOperation( operation ) {\n\t\toperation.batch = this;\n\t\tthis.operations.push( operation );\n\n\t\treturn operation;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/detachoperation\n */\n\nimport Operation from './operation';\nimport Range from '../range';\nimport { _remove } from './utils';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Operation to permanently remove node from detached root.\n * Note this operation is only a local operation and won't be send to the other clients.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class DetachOperation extends Operation {\n\t/**\n\t * Creates an insert operation.\n\t *\n\t * @param {module:engine/model/position~Position} sourcePosition\n\t * Position before the first {@link module:engine/model/item~Item model item} to move.\n\t * @param {Number} howMany Offset size of moved range. Moved range will start from `sourcePosition` and end at\n\t * `sourcePosition` with offset shifted by `howMany`.\n\t */\n\tconstructor( sourcePosition, howMany ) {\n\t\tsuper( null );\n\n\t\t/**\n\t\t * Position before the first {@link module:engine/model/item~Item model item} to detach.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} #sourcePosition\n\t\t */\n\t\tthis.sourcePosition = sourcePosition.clone();\n\n\t\t/**\n\t\t * Offset size of moved range.\n\t\t *\n\t\t * @member {Number} #howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\treturn 'detach';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.sourcePosition = this.sourcePosition.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tif ( this.sourcePosition.root.document ) {\n\t\t\t/**\n\t\t\t * Cannot detach document node.\n\t\t\t *\n\t\t\t * @error detach-operation-on-document-node\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'detach-operation-on-document-node: Cannot detach document node.', this );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t_remove( Range._createFromPositionAndShift( this.sourcePosition, this.howMany ) );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'DetachOperation';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/rootelement\n */\n\nimport Element from './element';\n\n/**\n * Type of {@link module:engine/model/element~Element} that is a root of a model tree.\n * @extends module:engine/model/element~Element\n */\nexport default class RootElement extends Element {\n\t/**\n\t * Creates root element.\n\t *\n\t * @param {module:engine/model/document~Document} doc Document that is an owner of this root.\n\t * @param {String} name Node name.\n\t * @param {String} [rootName='main'] Unique root name used to identify this root\n\t * element by {@link module:engine/model/document~Document}.\n\t */\n\tconstructor( doc, name, rootName = 'main' ) {\n\t\tsuper( name );\n\n\t\t/**\n\t\t * Document that is an owner of this root.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/document~Document}\n\t\t */\n\t\tthis._doc = doc;\n\n\t\t/**\n\t\t * Unique root name used to identify this root element by {@link module:engine/model/document~Document}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.rootName = rootName;\n\t}\n\n\t/**\n\t * {@link module:engine/model/document~Document Document} that owns this root element.\n\t *\n\t * In contrary, to {@link module:engine/model/node~Node node}, root element always have a `document`.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/document~Document|null}\n\t */\n\tget document() {\n\t\treturn this._doc;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tis( type, name ) {\n\t\tif ( !name ) {\n\t\t\treturn type == 'rootElement' || super.is( type );\n\t\t} else {\n\t\t\treturn ( type == 'rootElement' && name == this.name ) || super.is( type, name );\n\t\t}\n\t}\n\n\t/**\n\t * Converts `RootElement` instance to `String` containing it's name.\n\t *\n\t * @returns {String} `RootElement` instance converted to `String`.\n\t */\n\ttoJSON() {\n\t\treturn this.rootName;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/writer\n */\n\nimport AttributeOperation from './operation/attributeoperation';\nimport DetachOperation from './operation/detachoperation';\nimport InsertOperation from './operation/insertoperation';\nimport MarkerOperation from './operation/markeroperation';\nimport MoveOperation from './operation/moveoperation';\nimport RenameOperation from './operation/renameoperation';\nimport RootAttributeOperation from './operation/rootattributeoperation';\nimport SplitOperation from './operation/splitoperation';\nimport MergeOperation from './operation/mergeoperation';\n\nimport DocumentFragment from './documentfragment';\nimport Text from './text';\nimport Element from './element';\nimport RootElement from './rootelement';\nimport Position from './position';\nimport Range from './range.js';\nimport DocumentSelection from './documentselection';\n\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * The model can only be modified by using the writer. It should be used whenever you want to create a node, modify\n * child nodes, attributes or text, set the selection's position and its attributes.\n *\n * The instance of the writer is only available in the {@link module:engine/model/model~Model#change `change()`} or\n * {@link module:engine/model/model~Model#enqueueChange `enqueueChange()`}.\n *\n *\t\tmodel.change( writer => {\n *\t\t\twriter.insertText( 'foo', paragraph, 'end' );\n *\t\t} );\n *\n * Note that the writer should never be stored and used outside of the `change()` and\n * `enqueueChange()` blocks.\n *\n * Note that writer's methods do not check the {@link module:engine/model/schema~Schema}. It is possible\n * to create incorrect model structures by using the writer. Read more about in\n * {@glink framework/guides/deep-dive/schema#who-checks-the-schema \"Who checks the schema?\"}.\n *\n * @see module:engine/model/model~Model#change\n * @see module:engine/model/model~Model#enqueueChange\n */\nexport default class Writer {\n\t/**\n\t * Creates a writer instance.\n\t *\n\t * **Note:** It is not recommended to use it directly. Use {@link module:engine/model/model~Model#change `Model#change()`} or\n\t * {@link module:engine/model/model~Model#enqueueChange `Model#enqueueChange()`} instead.\n\t *\n\t * @protected\n\t * @param {module:engine/model/model~Model} model\n\t * @param {module:engine/model/batch~Batch} batch\n\t */\n\tconstructor( model, batch ) {\n\t\t/**\n\t\t * Instance of the model on which this writer operates.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * The batch to which this writer will add changes.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/batch~Batch}\n\t\t */\n\t\tthis.batch = batch;\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/model/text~Text text node}.\n\t *\n\t *\t\twriter.createText( 'foo' );\n\t *\t\twriter.createText( 'foo', { bold: true } );\n\t *\n\t * @param {String} data Text data.\n\t * @param {Object} [attributes] Text attributes.\n\t * @returns {module:engine/model/text~Text} Created text node.\n\t */\n\tcreateText( data, attributes ) {\n\t\treturn new Text( data, attributes );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/model/element~Element element}.\n\t *\n\t *\t\twriter.createElement( 'paragraph' );\n\t *\t\twriter.createElement( 'paragraph', { alignment: 'center' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/model/element~Element} Created element.\n\t */\n\tcreateElement( name, attributes ) {\n\t\treturn new Element( name, attributes );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/model/documentfragment~DocumentFragment document fragment}.\n\t *\n\t * @returns {module:engine/model/documentfragment~DocumentFragment} Created document fragment.\n\t */\n\tcreateDocumentFragment() {\n\t\treturn new DocumentFragment();\n\t}\n\n\t/**\n\t * Inserts item on given position.\n\t *\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\twriter.insert( paragraph, position );\n\t *\n\t * Instead of using position you can use parent and offset:\n\t *\n\t *\t\tconst text = writer.createText( 'foo' );\n\t *\t\twriter.insert( text, paragraph, 5 );\n\t *\n\t * You can also use `end` instead of the offset to insert at the end:\n\t *\n\t *\t\tconst text = writer.createText( 'foo' );\n\t *\t\twriter.insert( text, paragraph, 'end' );\n\t *\n\t * Or insert before or after another element:\n\t *\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\twriter.insert( paragraph, anotherParagraph, 'after' );\n\t *\n\t * These parameters works the same way as {@link #createPositionAt `writer.createPositionAt()`}.\n\t *\n\t * Note that if the item already has parent it will be removed from the previous parent.\n\t *\n\t * Note that you cannot re-insert a node from a document to a different document or a document fragment. In this case,\n\t * `model-writer-insert-forbidden-move` is thrown.\n\t *\n\t * If you want to move {@link module:engine/model/range~Range range} instead of an\n\t * {@link module:engine/model/item~Item item} use {@link module:engine/model/writer~Writer#move `Writer#move()`}.\n\t *\n\t * **Note:** For a paste-like content insertion mechanism see\n\t * {@link module:engine/model/model~Model#insertContent `model.insertContent()`}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/documentfragment~DocumentFragment} item Item or document\n\t * fragment to insert.\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * second parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tinsert( item, itemOrPosition, offset = 0 ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( item instanceof Text && item.data == '' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = Position._createAt( itemOrPosition, offset );\n\n\t\t// If item has a parent already.\n\t\tif ( item.parent ) {\n\t\t\t// We need to check if item is going to be inserted within the same document.\n\t\t\tif ( isSameTree( item.root, position.root ) ) {\n\t\t\t\t// If it's we just need to move it.\n\t\t\t\tthis.move( Range._createOn( item ), position );\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If it isn't the same root.\n\t\t\telse {\n\t\t\t\tif ( item.root.document ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Cannot move a node from a document to a different tree.\n\t\t\t\t\t * It is forbidden to move a node that was already in a document outside of it.\n\t\t\t\t\t *\n\t\t\t\t\t * @error model-writer-insert-forbidden-move\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t'model-writer-insert-forbidden-move: ' +\n\t\t\t\t\t\t'Cannot move a node from a document to a different tree. ' +\n\t\t\t\t\t\t'It is forbidden to move a node that was already in a document outside of it.',\n\t\t\t\t\t\tthis\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Move between two different document fragments or from document fragment to a document is possible.\n\t\t\t\t\t// In that case, remove the item from it's original parent.\n\t\t\t\t\tthis.remove( item );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst version = position.root.document ? position.root.document.version : null;\n\n\t\tconst insert = new InsertOperation( position, item, version );\n\n\t\tif ( item instanceof Text ) {\n\t\t\tinsert.shouldReceiveAttributes = true;\n\t\t}\n\n\t\tthis.batch.addOperation( insert );\n\t\tthis.model.applyOperation( insert );\n\n\t\t// When element is a DocumentFragment we need to move its markers to Document#markers.\n\t\tif ( item instanceof DocumentFragment ) {\n\t\t\tfor ( const [ markerName, markerRange ] of item.markers ) {\n\t\t\t\t// We need to migrate marker range from DocumentFragment to Document.\n\t\t\t\tconst rangeRootPosition = Position._createAt( markerRange.root, 0 );\n\t\t\t\tconst range = new Range(\n\t\t\t\t\tmarkerRange.start._getCombined( rangeRootPosition, position ),\n\t\t\t\t\tmarkerRange.end._getCombined( rangeRootPosition, position )\n\t\t\t\t);\n\n\t\t\t\tconst options = { range, usingOperation: true, affectsData: true };\n\n\t\t\t\tif ( this.model.markers.has( markerName ) ) {\n\t\t\t\t\tthis.updateMarker( markerName, options );\n\t\t\t\t} else {\n\t\t\t\t\tthis.addMarker( markerName, options );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates and inserts text on given position. You can optionally set text attributes:\n\t *\n\t *\t\twriter.insertText( 'foo', position );\n\t *\t\twriter.insertText( 'foo', { bold: true }, position );\n\t *\n\t * Instead of using position you can use parent and offset or define that text should be inserted at the end\n\t * or before or after other node:\n\t *\n\t *\t\t// Inserts 'foo' in paragraph, at offset 5:\n\t *\t\twriter.insertText( 'foo', paragraph, 5 );\n\t *\t\t// Inserts 'foo' at the end of a paragraph:\n\t *\t\twriter.insertText( 'foo', paragraph, 'end' );\n\t *\t\t// Inserts 'foo' after an image:\n\t *\t\twriter.insertText( 'foo', image, 'after' );\n\t *\n\t * These parameters work in the same way as {@link #createPositionAt `writer.createPositionAt()`}.\n\t *\n\t * @param {String} data Text data.\n\t * @param {Object} [attributes] Text attributes.\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * third parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tinsertText( text, attributes, itemOrPosition, offset ) {\n\t\tif ( attributes instanceof DocumentFragment || attributes instanceof Element || attributes instanceof Position ) {\n\t\t\tthis.insert( this.createText( text ), attributes, itemOrPosition );\n\t\t} else {\n\t\t\tthis.insert( this.createText( text, attributes ), itemOrPosition, offset );\n\t\t}\n\t}\n\n\t/**\n\t * Creates and inserts element on given position. You can optionally set attributes:\n\t *\n\t *\t\twriter.insertElement( 'paragraph', position );\n\t *\t\twriter.insertElement( 'paragraph', { alignment: 'center' }, position );\n\t *\n\t * Instead of using position you can use parent and offset or define that text should be inserted at the end\n\t * or before or after other node:\n\t *\n\t *\t\t// Inserts paragraph in the root at offset 5:\n\t *\t\twriter.insertElement( 'paragraph', root, 5 );\n\t *\t\t// Inserts paragraph at the end of a blockquote:\n\t *\t\twriter.insertElement( 'paragraph', blockquote, 'end' );\n\t *\t\t// Inserts after an image:\n\t *\t\twriter.insertElement( 'paragraph', image, 'after' );\n\t *\n\t * These parameters works the same way as {@link #createPositionAt `writer.createPositionAt()`}.\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * third parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tinsertElement( name, attributes, itemOrPosition, offset ) {\n\t\tif ( attributes instanceof DocumentFragment || attributes instanceof Element || attributes instanceof Position ) {\n\t\t\tthis.insert( this.createElement( name ), attributes, itemOrPosition );\n\t\t} else {\n\t\t\tthis.insert( this.createElement( name, attributes ), itemOrPosition, offset );\n\t\t}\n\t}\n\n\t/**\n\t * Inserts item at the end of the given parent.\n\t *\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\twriter.append( paragraph, root );\n\t *\n\t * Note that if the item already has parent it will be removed from the previous parent.\n\t *\n\t * If you want to move {@link module:engine/model/range~Range range} instead of an\n\t * {@link module:engine/model/item~Item item} use {@link module:engine/model/writer~Writer#move `Writer#move()`}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/documentfragment~DocumentFragment}\n\t * item Item or document fragment to insert.\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} parent\n\t */\n\tappend( item, parent ) {\n\t\tthis.insert( item, parent, 'end' );\n\t}\n\n\t/**\n\t * Creates text node and inserts it at the end of the parent. You can optionally set text attributes:\n\t *\n\t *\t\twriter.appendText( 'foo', paragraph );\n\t *\t\twriter.appendText( 'foo', { bold: true }, paragraph );\n\t *\n\t * @param {String} text Text data.\n\t * @param {Object} [attributes] Text attributes.\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} parent\n\t */\n\tappendText( text, attributes, parent ) {\n\t\tif ( attributes instanceof DocumentFragment || attributes instanceof Element ) {\n\t\t\tthis.insert( this.createText( text ), attributes, 'end' );\n\t\t} else {\n\t\t\tthis.insert( this.createText( text, attributes ), parent, 'end' );\n\t\t}\n\t}\n\n\t/**\n\t * Creates element and inserts it at the end of the parent. You can optionally set attributes:\n\t *\n\t *\t\twriter.appendElement( 'paragraph', root );\n\t *\t\twriter.appendElement( 'paragraph', { alignment: 'center' }, root );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} parent\n\t */\n\tappendElement( name, attributes, parent ) {\n\t\tif ( attributes instanceof DocumentFragment || attributes instanceof Element ) {\n\t\t\tthis.insert( this.createElement( name ), attributes, 'end' );\n\t\t} else {\n\t\t\tthis.insert( this.createElement( name, attributes ), parent, 'end' );\n\t\t}\n\t}\n\n\t/**\n\t * Sets value of the attribute with given key on a {@link module:engine/model/item~Item model item}\n\t * or on a {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {String} key Attribute key.\n\t * @param {*} value Attribute new value.\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange\n\t * Model item or range on which the attribute will be set.\n\t */\n\tsetAttribute( key, value, itemOrRange ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( itemOrRange instanceof Range ) {\n\t\t\tconst ranges = itemOrRange.getMinimalFlatRanges();\n\n\t\t\tfor ( const range of ranges ) {\n\t\t\t\tsetAttributeOnRange( this, key, value, range );\n\t\t\t}\n\t\t} else {\n\t\t\tsetAttributeOnItem( this, key, value, itemOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Sets values of attributes on a {@link module:engine/model/item~Item model item}\n\t * or on a {@link module:engine/model/range~Range range}.\n\t *\n\t *\t\twriter.setAttributes( {\n\t *\t\t\tbold: true,\n\t *\t\t\titalic: true\n\t *\t\t}, range );\n\t *\n\t * @param {Object} attributes Attributes keys and values.\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange\n\t * Model item or range on which the attributes will be set.\n\t */\n\tsetAttributes( attributes, itemOrRange ) {\n\t\tfor ( const [ key, val ] of toMap( attributes ) ) {\n\t\t\tthis.setAttribute( key, val, itemOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Removes an attribute with given key from a {@link module:engine/model/item~Item model item}\n\t * or from a {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {String} key Attribute key.\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange\n\t * Model item or range from which the attribute will be removed.\n\t */\n\tremoveAttribute( key, itemOrRange ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( itemOrRange instanceof Range ) {\n\t\t\tconst ranges = itemOrRange.getMinimalFlatRanges();\n\n\t\t\tfor ( const range of ranges ) {\n\t\t\t\tsetAttributeOnRange( this, key, null, range );\n\t\t\t}\n\t\t} else {\n\t\t\tsetAttributeOnItem( this, key, null, itemOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Removes all attributes from all elements in the range or from the given item.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange\n\t * Model item or range from which all attributes will be removed.\n\t */\n\tclearAttributes( itemOrRange ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst removeAttributesFromItem = item => {\n\t\t\tfor ( const attribute of item.getAttributeKeys() ) {\n\t\t\t\tthis.removeAttribute( attribute, item );\n\t\t\t}\n\t\t};\n\n\t\tif ( !( itemOrRange instanceof Range ) ) {\n\t\t\tremoveAttributesFromItem( itemOrRange );\n\t\t} else {\n\t\t\tfor ( const item of itemOrRange.getItems() ) {\n\t\t\t\tremoveAttributesFromItem( item );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Moves all items in the source range to the target position.\n\t *\n\t *\t\twriter.move( sourceRange, targetPosition );\n\t *\n\t * Instead of the target position you can use parent and offset or define that range should be moved to the end\n\t * or before or after chosen item:\n\t *\n\t *\t\t// Moves all items in the range to the paragraph at offset 5:\n\t *\t\twriter.move( sourceRange, paragraph, 5 );\n\t *\t\t// Moves all items in the range to the end of a blockquote:\n\t *\t\twriter.move( sourceRange, blockquote, 'end' );\n\t *\t\t// Moves all items in the range to a position after an image:\n\t *\t\twriter.move( sourceRange, image, 'after' );\n\t *\n\t * These parameters works the same way as {@link #createPositionAt `writer.createPositionAt()`}.\n\t *\n\t * Note that items can be moved only within the same tree. It means that you can move items within the same root\n\t * (element or document fragment) or between {@link module:engine/model/document~Document#roots documents roots},\n\t * but you can not move items from document fragment to the document or from one detached element to another. Use\n\t * {@link module:engine/model/writer~Writer#insert} in such cases.\n\t *\n\t * @param {module:engine/model/range~Range} range Source range.\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * second parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tmove( range, itemOrPosition, offset ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( !( range instanceof Range ) ) {\n\t\t\t/**\n\t\t\t * Invalid range to move.\n\t\t\t *\n\t\t\t * @error writer-move-invalid-range\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-move-invalid-range: Invalid range to move.', this );\n\t\t}\n\n\t\tif ( !range.isFlat ) {\n\t\t\t/**\n\t\t\t * Range to move is not flat.\n\t\t\t *\n\t\t\t * @error writer-move-range-not-flat\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-move-range-not-flat: Range to move is not flat.', this );\n\t\t}\n\n\t\tconst position = Position._createAt( itemOrPosition, offset );\n\n\t\t// Do not move anything if the move target is same as moved range start.\n\t\tif ( position.isEqual( range.start ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If part of the marker is removed, create additional marker operation for undo purposes.\n\t\tthis._addOperationForAffectedMarkers( 'move', range );\n\n\t\tif ( !isSameTree( range.root, position.root ) ) {\n\t\t\t/**\n\t\t\t * Range is going to be moved within not the same document. Please use\n\t\t\t * {@link module:engine/model/writer~Writer#insert insert} instead.\n\t\t\t *\n\t\t\t * @error writer-move-different-document\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-move-different-document: Range is going to be moved between different documents.', this );\n\t\t}\n\n\t\tconst version = range.root.document ? range.root.document.version : null;\n\t\tconst operation = new MoveOperation( range.start, range.end.offset - range.start.offset, position, version );\n\n\t\tthis.batch.addOperation( operation );\n\t\tthis.model.applyOperation( operation );\n\t}\n\n\t/**\n\t * Removes given model {@link module:engine/model/item~Item item} or {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/range~Range} itemOrRange Model item or range to remove.\n\t */\n\tremove( itemOrRange ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst rangeToRemove = itemOrRange instanceof Range ? itemOrRange : Range._createOn( itemOrRange );\n\t\tconst ranges = rangeToRemove.getMinimalFlatRanges().reverse();\n\n\t\tfor ( const flat of ranges ) {\n\t\t\t// If part of the marker is removed, create additional marker operation for undo purposes.\n\t\t\tthis._addOperationForAffectedMarkers( 'move', flat );\n\n\t\t\tapplyRemoveOperation( flat.start, flat.end.offset - flat.start.offset, this.batch, this.model );\n\t\t}\n\t}\n\n\t/**\n\t * Merges two siblings at the given position.\n\t *\n\t * Node before and after the position have to be an element. Otherwise `writer-merge-no-element-before` or\n\t * `writer-merge-no-element-after` error will be thrown.\n\t *\n\t * @param {module:engine/model/position~Position} position Position between merged elements.\n\t */\n\tmerge( position ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst nodeBefore = position.nodeBefore;\n\t\tconst nodeAfter = position.nodeAfter;\n\n\t\t// If part of the marker is removed, create additional marker operation for undo purposes.\n\t\tthis._addOperationForAffectedMarkers( 'merge', position );\n\n\t\tif ( !( nodeBefore instanceof Element ) ) {\n\t\t\t/**\n\t\t\t * Node before merge position must be an element.\n\t\t\t *\n\t\t\t * @error writer-merge-no-element-before\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-merge-no-element-before: Node before merge position must be an element.', this );\n\t\t}\n\n\t\tif ( !( nodeAfter instanceof Element ) ) {\n\t\t\t/**\n\t\t\t * Node after merge position must be an element.\n\t\t\t *\n\t\t\t * @error writer-merge-no-element-after\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-merge-no-element-after: Node after merge position must be an element.', this );\n\t\t}\n\n\t\tif ( !position.root.document ) {\n\t\t\tthis._mergeDetached( position );\n\t\t} else {\n\t\t\tthis._merge( position );\n\t\t}\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createPositionFromPath `Model#createPositionFromPath()`}.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} root Root of the position.\n\t * @param {Array.<Number>} path Position path. See {@link module:engine/model/position~Position#path}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * See {@link module:engine/model/position~PositionStickiness}.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionFromPath( root, path, stickiness ) {\n\t\treturn this.model.createPositionFromPath( root, path, stickiness );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createPositionAt `Model#createPositionAt()`}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn this.model.createPositionAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createPositionAfter `Model#createPositionAfter()`}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn this.model.createPositionAfter( item );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createPositionBefore `Model#createPositionBefore()`}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn this.model.createPositionBefore( item );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createRange `Model#createRange()`}.\n\t *\n\t * @param {module:engine/model/position~Position} start Start position.\n\t * @param {module:engine/model/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn this.model.createRange( start, end );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createRangeIn `Model#createRangeIn()`}.\n\t *\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn this.model.createRangeIn( element );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createRangeOn `Model#createRangeOn()`}.\n\t *\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRangeOn( element ) {\n\t\treturn this.model.createRangeOn( element );\n\t}\n\n\t/**\n\t * Shortcut for {@link module:engine/model/model~Model#createSelection `Model#createSelection()`}.\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @returns {module:engine/model/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn this.model.createSelection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Performs merge action in a detached tree.\n\t *\n\t * @private\n\t * @param {module:engine/model/position~Position} position Position between merged elements.\n\t */\n\t_mergeDetached( position ) {\n\t\tconst nodeBefore = position.nodeBefore;\n\t\tconst nodeAfter = position.nodeAfter;\n\n\t\tthis.move( Range._createIn( nodeAfter ), Position._createAt( nodeBefore, 'end' ) );\n\t\tthis.remove( nodeAfter );\n\t}\n\n\t/**\n\t * Performs merge action in a non-detached tree.\n\t *\n\t * @private\n\t * @param {module:engine/model/position~Position} position Position between merged elements.\n\t */\n\t_merge( position ) {\n\t\tconst targetPosition = Position._createAt( position.nodeBefore, 'end' );\n\t\tconst sourcePosition = Position._createAt( position.nodeAfter, 0 );\n\n\t\tconst graveyard = position.root.document.graveyard;\n\t\tconst graveyardPosition = new Position( graveyard, [ 0 ] );\n\n\t\tconst version = position.root.document.version;\n\n\t\tconst merge = new MergeOperation( sourcePosition, position.nodeAfter.maxOffset, targetPosition, graveyardPosition, version );\n\n\t\tthis.batch.addOperation( merge );\n\t\tthis.model.applyOperation( merge );\n\t}\n\n\t/**\n\t * Renames the given element.\n\t *\n\t * @param {module:engine/model/element~Element} element The element to rename.\n\t * @param {String} newName New element name.\n\t */\n\trename( element, newName ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( !( element instanceof Element ) ) {\n\t\t\t/**\n\t\t\t * Trying to rename an object which is not an instance of Element.\n\t\t\t *\n\t\t\t * @error writer-rename-not-element-instance\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tconst version = element.root.document ? element.root.document.version : null;\n\t\tconst renameOperation = new RenameOperation( Position._createBefore( element ), element.name, newName, version );\n\n\t\tthis.batch.addOperation( renameOperation );\n\t\tthis.model.applyOperation( renameOperation );\n\t}\n\n\t/**\n\t * Splits elements starting from the given position and going to the top of the model tree as long as given\n\t * `limitElement` is reached. When `limitElement` is not defined then only the parent of the given position will be split.\n\t *\n\t * The element needs to have a parent. It cannot be a root element nor a document fragment.\n\t * The `writer-split-element-no-parent` error will be thrown if you try to split an element with no parent.\n\t *\n\t * @param {module:engine/model/position~Position} position Position of split.\n\t * @param {module:engine/model/node~Node} [limitElement] Stop splitting when this element will be reached.\n\t * @returns {Object} result Split result.\n\t * @returns {module:engine/model/position~Position} result.position Position between split elements.\n\t * @returns {module:engine/model/range~Range} result.range Range that stars from the end of the first split element and ends\n\t * at the beginning of the first copy element.\n\t */\n\tsplit( position, limitElement ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tlet splitElement = position.parent;\n\n\t\tif ( !splitElement.parent ) {\n\t\t\t/**\n\t\t\t * Element with no parent can not be split.\n\t\t\t *\n\t\t\t * @error writer-split-element-no-parent\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-split-element-no-parent: Element with no parent can not be split.', this );\n\t\t}\n\n\t\t// When limit element is not defined lets set splitElement parent as limit.\n\t\tif ( !limitElement ) {\n\t\t\tlimitElement = splitElement.parent;\n\t\t}\n\n\t\tif ( !position.parent.getAncestors( { includeSelf: true } ).includes( limitElement ) ) {\n\t\t\tthrow new CKEditorError( 'writer-split-invalid-limit-element: Limit element is not a position ancestor.', this );\n\t\t}\n\n\t\t// We need to cache elements that will be created as a result of the first split because\n\t\t// we need to create a range from the end of the first split element to the beginning of the\n\t\t// first copy element. This should be handled by LiveRange but it doesn't work on detached nodes.\n\t\tlet firstSplitElement, firstCopyElement;\n\n\t\tdo {\n\t\t\tconst version = splitElement.root.document ? splitElement.root.document.version : null;\n\t\t\tconst howMany = splitElement.maxOffset - position.offset;\n\t\t\tconst split = new SplitOperation( position, howMany, null, version );\n\n\t\t\tthis.batch.addOperation( split );\n\t\t\tthis.model.applyOperation( split );\n\n\t\t\t// Cache result of the first split.\n\t\t\tif ( !firstSplitElement && !firstCopyElement ) {\n\t\t\t\tfirstSplitElement = splitElement;\n\t\t\t\tfirstCopyElement = position.parent.nextSibling;\n\t\t\t}\n\n\t\t\tposition = this.createPositionAfter( position.parent );\n\t\t\tsplitElement = position.parent;\n\t\t} while ( splitElement !== limitElement );\n\n\t\treturn {\n\t\t\tposition,\n\t\t\trange: new Range( Position._createAt( firstSplitElement, 'end' ), Position._createAt( firstCopyElement, 0 ) )\n\t\t};\n\t}\n\n\t/**\n\t * Wraps the given range with the given element or with a new element (if a string was passed).\n\t *\n\t * **Note:** range to wrap should be a \"flat range\" (see {@link module:engine/model/range~Range#isFlat `Range#isFlat`}).\n\t * If not, an error will be thrown.\n\t *\n\t * @param {module:engine/model/range~Range} range Range to wrap.\n\t * @param {module:engine/model/element~Element|String} elementOrString Element or name of element to wrap the range with.\n\t */\n\twrap( range, elementOrString ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( !range.isFlat ) {\n\t\t\t/**\n\t\t\t * Range to wrap is not flat.\n\t\t\t *\n\t\t\t * @error writer-wrap-range-not-flat\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-wrap-range-not-flat: Range to wrap is not flat.', this );\n\t\t}\n\n\t\tconst element = elementOrString instanceof Element ? elementOrString : new Element( elementOrString );\n\n\t\tif ( element.childCount > 0 ) {\n\t\t\t/**\n\t\t\t * Element to wrap with is not empty.\n\t\t\t *\n\t\t\t * @error writer-wrap-element-not-empty\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-wrap-element-not-empty: Element to wrap with is not empty.', this );\n\t\t}\n\n\t\tif ( element.parent !== null ) {\n\t\t\t/**\n\t\t\t * Element to wrap with is already attached to a tree model.\n\t\t\t *\n\t\t\t * @error writer-wrap-element-attached\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-wrap-element-attached: Element to wrap with is already attached to tree model.', this );\n\t\t}\n\n\t\tthis.insert( element, range.start );\n\n\t\t// Shift the range-to-wrap because we just inserted an element before that range.\n\t\tconst shiftedRange = new Range( range.start.getShiftedBy( 1 ), range.end.getShiftedBy( 1 ) );\n\n\t\tthis.move( shiftedRange, Position._createAt( element, 0 ) );\n\t}\n\n\t/**\n\t * Unwraps children of the given element – all its children are moved before it and then the element is removed.\n\t * Throws error if you try to unwrap an element which does not have a parent.\n\t *\n\t * @param {module:engine/model/element~Element} element Element to unwrap.\n\t */\n\tunwrap( element ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( element.parent === null ) {\n\t\t\t/**\n\t\t\t * Trying to unwrap an element which has no parent.\n\t\t\t *\n\t\t\t * @error writer-unwrap-element-no-parent\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.', this );\n\t\t}\n\n\t\tthis.move( Range._createIn( element ), this.createPositionAfter( element ) );\n\t\tthis.remove( element );\n\t}\n\n\t/**\n\t * Adds a {@link module:engine/model/markercollection~Marker marker}. Marker is a named range, which tracks\n\t * changes in the document and updates its range automatically, when model tree changes.\n\t *\n\t * As the first parameter you can set marker name.\n\t *\n\t * The required `options.usingOperation` parameter lets you decide if the marker should be managed by operations or not. See\n\t * {@link module:engine/model/markercollection~Marker marker class description} to learn about the difference between\n\t * markers managed by operations and not-managed by operations.\n\t *\n\t * The `options.affectsData` parameter, which defaults to `false`, allows you to define if a marker affects the data. It should be\n\t * `true` when the marker change changes the data returned by the\n\t * {@link module:core/editor/utils/dataapimixin~DataApi#getData `editor.getData()`} method.\n\t * When set to `true` it fires the {@link module:engine/model/document~Document#event:change:data `change:data`} event.\n\t * When set to `false` it fires the {@link module:engine/model/document~Document#event:change `change`} event.\n\t *\n\t * Create marker directly base on marker's name:\n\t *\n\t *\t\taddMarker( markerName, { range, usingOperation: false } );\n\t *\n\t * Create marker using operation:\n\t *\n\t *\t\taddMarker( markerName, { range, usingOperation: true } );\n\t *\n\t * Create marker that affects the editor data:\n\t *\n\t *\t\taddMarker( markerName, { range, usingOperation: false, affectsData: true } );\n\t *\n\t * Note: For efficiency reasons, it's best to create and keep as little markers as possible.\n\t *\n\t * @see module:engine/model/markercollection~Marker\n\t * @param {String} name Name of a marker to create - must be unique.\n\t * @param {Object} options\n\t * @param {Boolean} options.usingOperation Flag indicating that the marker should be added by MarkerOperation.\n\t * See {@link module:engine/model/markercollection~Marker#managedUsingOperations}.\n\t * @param {module:engine/model/range~Range} options.range Marker range.\n\t * @param {Boolean} [options.affectsData=false] Flag indicating that the marker changes the editor data.\n\t * @returns {module:engine/model/markercollection~Marker} Marker that was set.\n\t */\n\taddMarker( name, options ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( !options || typeof options.usingOperation != 'boolean' ) {\n\t\t\t/**\n\t\t\t * The `options.usingOperation` parameter is required when adding a new marker.\n\t\t\t *\n\t\t\t * @error writer-addMarker-no-usingOperation\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tconst usingOperation = options.usingOperation;\n\t\tconst range = options.range;\n\t\tconst affectsData = options.affectsData === undefined ? false : options.affectsData;\n\n\t\tif ( this.model.markers.has( name ) ) {\n\t\t\t/**\n\t\t\t * Marker with provided name already exists.\n\t\t\t *\n\t\t\t * @error writer-addMarker-marker-exists\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-addMarker-marker-exists: Marker with provided name already exists.', this );\n\t\t}\n\n\t\tif ( !range ) {\n\t\t\t/**\n\t\t\t * Range parameter is required when adding a new marker.\n\t\t\t *\n\t\t\t * @error writer-addMarker-no-range\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'writer-addMarker-no-range: Range parameter is required when adding a new marker.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tif ( !usingOperation ) {\n\t\t\treturn this.model.markers._set( name, range, usingOperation, affectsData );\n\t\t}\n\n\t\tapplyMarkerOperation( this, name, null, range, affectsData );\n\n\t\treturn this.model.markers.get( name );\n\t}\n\n\t/**\n\t * Adds, updates or refreshes a {@link module:engine/model/markercollection~Marker marker}. Marker is a named range, which tracks\n\t * changes in the document and updates its range automatically, when model tree changes. Still, it is possible to change the\n\t * marker's range directly using this method.\n\t *\n\t * As the first parameter you can set marker name or instance. If none of them is provided, new marker, with a unique\n\t * name is created and returned.\n\t *\n\t * As the second parameter you can set the new marker data or leave this parameter as empty which will just refresh\n\t * the marker by triggering downcast conversion for it. Refreshing the marker is useful when you want to change\n\t * the marker {@link module:engine/view/element~Element view element} without changing any marker data.\n\t *\n\t * \t\tlet isCommentActive = false;\n\t *\n\t * \t\tmodel.conversion.markerToHighlight( {\n\t * \t\t\tmodel: 'comment',\n\t *\t\t\tview: data => {\n\t *\t\t\t\tconst classes = [ 'comment-marker' ];\n\t *\n\t *\t\t\t\tif ( isCommentActive ) {\n\t *\t\t\t\t\tclasses.push( 'comment-marker--active' );\n\t *\t\t\t\t}\n\t *\n\t *\t\t\t\treturn { classes };\n\t *\t\t\t}\n\t * \t\t} );\n\t *\n\t * \t\t// Change the property that indicates if marker is displayed as active or not.\n\t * \t\tisCommentActive = true;\n\t *\n\t * \t\t// And refresh the marker to convert it with additional class.\n\t * \t\tmodel.change( writer => writer.updateMarker( 'comment' ) );\n\t *\n\t * The `options.usingOperation` parameter lets you change if the marker should be managed by operations or not. See\n\t * {@link module:engine/model/markercollection~Marker marker class description} to learn about the difference between\n\t * markers managed by operations and not-managed by operations. It is possible to change this option for an existing marker.\n\t *\n\t * The `options.affectsData` parameter, which defaults to `false`, allows you to define if a marker affects the data. It should be\n\t * `true` when the marker change changes the data returned by\n\t * the {@link module:core/editor/utils/dataapimixin~DataApi#getData `editor.getData()`} method.\n\t * When set to `true` it fires the {@link module:engine/model/document~Document#event:change:data `change:data`} event.\n\t * When set to `false` it fires the {@link module:engine/model/document~Document#event:change `change`} event.\n\t *\n\t * Update marker directly base on marker's name:\n\t *\n\t *\t\tupdateMarker( markerName, { range } );\n\t *\n\t * Update marker using operation:\n\t *\n\t *\t\tupdateMarker( marker, { range, usingOperation: true } );\n\t *\t\tupdateMarker( markerName, { range, usingOperation: true } );\n\t *\n\t * Change marker's option (start using operations to manage it):\n\t *\n\t *\t\tupdateMarker( marker, { usingOperation: true } );\n\t *\n\t * Change marker's option (inform the engine, that the marker does not affect the data anymore):\n\t *\n\t *\t\tupdateMarker( markerName, { affectsData: false } );\n\t *\n\t * @see module:engine/model/markercollection~Marker\n\t * @param {String} markerOrName Name of a marker to update, or a marker instance.\n\t * @param {Object} [options] If options object is not defined then marker will be refreshed by triggering\n\t * downcast conversion for this marker with the same data.\n\t * @param {module:engine/model/range~Range} [options.range] Marker range to update.\n\t * @param {Boolean} [options.usingOperation] Flag indicated whether the marker should be added by MarkerOperation.\n\t * See {@link module:engine/model/markercollection~Marker#managedUsingOperations}.\n\t * @param {Boolean} [options.affectsData] Flag indicating that the marker changes the editor data.\n\t */\n\tupdateMarker( markerOrName, options ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst markerName = typeof markerOrName == 'string' ? markerOrName : markerOrName.name;\n\t\tconst currentMarker = this.model.markers.get( markerName );\n\n\t\tif ( !currentMarker ) {\n\t\t\t/**\n\t\t\t * Marker with provided name does not exists.\n\t\t\t *\n\t\t\t * @error writer-updateMarker-marker-not-exists\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-updateMarker-marker-not-exists: Marker with provided name does not exists.', this );\n\t\t}\n\n\t\tif ( !options ) {\n\t\t\tthis.model.markers._refresh( currentMarker );\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst hasUsingOperationDefined = typeof options.usingOperation == 'boolean';\n\t\tconst affectsDataDefined = typeof options.affectsData == 'boolean';\n\n\t\t// Use previously defined marker's affectsData if the property is not provided.\n\t\tconst affectsData = affectsDataDefined ? options.affectsData : currentMarker.affectsData;\n\n\t\tif ( !hasUsingOperationDefined && !options.range && !affectsDataDefined ) {\n\t\t\t/**\n\t\t\t * One of the options is required - provide range, usingOperations or affectsData.\n\t\t\t *\n\t\t\t * @error writer-updateMarker-wrong-options\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tconst currentRange = currentMarker.getRange();\n\t\tconst updatedRange = options.range ? options.range : currentRange;\n\n\t\tif ( hasUsingOperationDefined && options.usingOperation !== currentMarker.managedUsingOperations ) {\n\t\t\t// The marker type is changed so it's necessary to create proper operations.\n\t\t\tif ( options.usingOperation ) {\n\t\t\t\t// If marker changes to a managed one treat this as synchronizing existing marker.\n\t\t\t\t// Create `MarkerOperation` with `oldRange` set to `null`, so reverse operation will remove the marker.\n\t\t\t\tapplyMarkerOperation( this, markerName, null, updatedRange, affectsData );\n\t\t\t} else {\n\t\t\t\t// If marker changes to a marker that do not use operations then we need to create additional operation\n\t\t\t\t// that removes that marker first.\n\t\t\t\tapplyMarkerOperation( this, markerName, currentRange, null, affectsData );\n\n\t\t\t\t// Although not managed the marker itself should stay in model and its range should be preserver or changed to passed range.\n\t\t\t\tthis.model.markers._set( markerName, updatedRange, undefined, affectsData );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Marker's type doesn't change so update it accordingly.\n\t\tif ( currentMarker.managedUsingOperations ) {\n\t\t\tapplyMarkerOperation( this, markerName, currentRange, updatedRange, affectsData );\n\t\t} else {\n\t\t\tthis.model.markers._set( markerName, updatedRange, undefined, affectsData );\n\t\t}\n\t}\n\n\t/**\n\t * Removes given {@link module:engine/model/markercollection~Marker marker} or marker with given name.\n\t * The marker is removed accordingly to how it has been created, so if the marker was created using operation,\n\t * it will be destroyed using operation.\n\t *\n\t * @param {module:engine/model/markercollection~Marker|String} markerOrName Marker or marker name to remove.\n\t */\n\tremoveMarker( markerOrName ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tconst name = typeof markerOrName == 'string' ? markerOrName : markerOrName.name;\n\n\t\tif ( !this.model.markers.has( name ) ) {\n\t\t\t/**\n\t\t\t * Trying to remove marker which does not exist.\n\t\t\t *\n\t\t\t * @error writer-removeMarker-no-marker\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'writer-removeMarker-no-marker: Trying to remove marker which does not exist.', this );\n\t\t}\n\n\t\tconst marker = this.model.markers.get( name );\n\n\t\tif ( !marker.managedUsingOperations ) {\n\t\t\tthis.model.markers._remove( name );\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldRange = marker.getRange();\n\n\t\tapplyMarkerOperation( this, name, oldRange, null, marker.affectsData );\n\t}\n\n\t/**\n\t * Sets the document's selection (ranges and direction) to the specified location based on the given\n\t * {@link module:engine/model/selection~Selectable selectable} or creates an empty selection if no arguments were passed.\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\twriter.setSelection( otherSelection );\n\t *\n\t *\t\t// Sets selection to the given document selection.\n\t *\t\tconst documentSelection = model.document.selection;\n\t *\t\twriter.setSelection( documentSelection );\n\t *\n\t *\t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPosition( root, path );\n\t *\t\twriter.setSelection( position );\n\t *\n\t *\t\t// Sets collapsed selection at the position of the given node and an offset.\n\t *\t\twriter.setSelection( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/model/element~Element element} which starts before the first child of\n \t * that element and ends after the last child of that element.\n\t *\n\t *\t\twriter.setSelection( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\twriter.setSelection( paragraph, 'on' );\n\t *\n\t *\t\t// Removes all selection's ranges.\n\t *\t\twriter.setSelection( null );\n\t *\n\t * `Writer#setSelection()` allow passing additional options (`backward`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\twriter.setSelection( range, { backward: true } );\n\t *\n\t * Throws `writer-incorrect-use` error when the writer is used outside the `change()` block.\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\tsetSelection( selectable, placeOrOffset, options ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tthis.model.document.selection._setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Moves {@link module:engine/model/documentselection~DocumentSelection#focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as\n\t * {@link #createPositionAt `writer.createPositionAt()`} parameters.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset=0] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tsetSelectionFocus( itemOrPosition, offset ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tthis.model.document.selection._setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Sets attribute(s) on the selection. If attribute with the same key already is set, it's value is overwritten.\n\t *\n\t * Using key and value pair:\n\t *\n\t * \twriter.setSelectionAttribute( 'italic', true );\n\t *\n\t * Using key-value object:\n\t *\n\t * \twriter.setSelectionAttribute( { italic: true, bold: false } );\n\t *\n\t * Using iterable object:\n\t *\n\t * \twriter.setSelectionAttribute( new Map( [ [ 'italic', true ] ] ) );\n\t *\n\t * @param {String|Object|Iterable.<*>} keyOrObjectOrIterable Key of the attribute to set\n\t * or object / iterable of key => value attribute pairs.\n\t * @param {*} [value] Attribute value.\n\t */\n\tsetSelectionAttribute( keyOrObjectOrIterable, value ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( typeof keyOrObjectOrIterable === 'string' ) {\n\t\t\tthis._setSelectionAttribute( keyOrObjectOrIterable, value );\n\t\t} else {\n\t\t\tfor ( const [ key, value ] of toMap( keyOrObjectOrIterable ) ) {\n\t\t\t\tthis._setSelectionAttribute( key, value );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes attribute(s) with given key(s) from the selection.\n\t *\n\t * Remove one attribute:\n\t *\n\t *\t\twriter.removeSelectionAttribute( 'italic' );\n\t *\n\t * Remove multiple attributes:\n\t *\n\t *\t\twriter.removeSelectionAttribute( [ 'italic', 'bold' ] );\n\t *\n\t * @param {String|Iterable.<String>} keyOrIterableOfKeys Key of the attribute to remove or an iterable of attribute keys to remove.\n\t */\n\tremoveSelectionAttribute( keyOrIterableOfKeys ) {\n\t\tthis._assertWriterUsedCorrectly();\n\n\t\tif ( typeof keyOrIterableOfKeys === 'string' ) {\n\t\t\tthis._removeSelectionAttribute( keyOrIterableOfKeys );\n\t\t} else {\n\t\t\tfor ( const key of keyOrIterableOfKeys ) {\n\t\t\t\tthis._removeSelectionAttribute( key );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Temporarily changes the {@link module:engine/model/documentselection~DocumentSelection#isGravityOverridden gravity}\n\t * of the selection from left to right.\n\t *\n\t * The gravity defines from which direction the selection inherits its attributes. If it's the default left gravity,\n\t * then the selection (after being moved by the user) inherits attributes from its left-hand side.\n\t * This method allows to temporarily override this behavior by forcing the gravity to the right.\n\t *\n\t * For the following model fragment:\n\t *\n\t *\t\t<$text bold=\"true\" linkHref=\"url\">bar[]</$text><$text bold=\"true\">biz</$text>\n\t *\n\t * * Default gravity: selection will have the `bold` and `linkHref` attributes.\n\t * * Overridden gravity: selection will have `bold` attribute.\n\t *\n\t * **Note**: It returns an unique identifier which is required to restore the gravity. It guarantees the symmetry\n\t * of the process.\n\t *\n\t * @returns {String} The unique id which allows restoring the gravity.\n\t */\n\toverrideSelectionGravity() {\n\t\treturn this.model.document.selection._overrideGravity();\n\t}\n\n\t/**\n\t * Restores {@link ~Writer#overrideSelectionGravity} gravity to default.\n\t *\n\t * Restoring the gravity is only possible using the unique identifier returned by\n\t * {@link ~Writer#overrideSelectionGravity}. Note that the gravity remains overridden as long as won't be restored\n\t * the same number of times it was overridden.\n\t *\n\t * @param {String} uid The unique id returned by {@link ~Writer#overrideSelectionGravity}.\n\t */\n\trestoreSelectionGravity( uid ) {\n\t\tthis.model.document.selection._restoreGravity( uid );\n\t}\n\n\t/**\n\t * @private\n\t * @param {String} key Key of the attribute to remove.\n\t * @param {*} value Attribute value.\n\t */\n\t_setSelectionAttribute( key, value ) {\n\t\tconst selection = this.model.document.selection;\n\n\t\t// Store attribute in parent element if the selection is collapsed in an empty node.\n\t\tif ( selection.isCollapsed && selection.anchor.parent.isEmpty ) {\n\t\t\tconst storeKey = DocumentSelection._getStoreAttributeKey( key );\n\n\t\t\tthis.setAttribute( storeKey, value, selection.anchor.parent );\n\t\t}\n\n\t\tselection._setAttribute( key, value );\n\t}\n\n\t/**\n\t * @private\n\t * @param {String} key Key of the attribute to remove.\n\t */\n\t_removeSelectionAttribute( key ) {\n\t\tconst selection = this.model.document.selection;\n\n\t\t// Remove stored attribute from parent element if the selection is collapsed in an empty node.\n\t\tif ( selection.isCollapsed && selection.anchor.parent.isEmpty ) {\n\t\t\tconst storeKey = DocumentSelection._getStoreAttributeKey( key );\n\n\t\t\tthis.removeAttribute( storeKey, selection.anchor.parent );\n\t\t}\n\n\t\tselection._removeAttribute( key );\n\t}\n\n\t/**\n\t * Throws `writer-detached-writer-tries-to-modify-model` error when the writer is used outside of the `change()` block.\n\t *\n\t * @private\n\t */\n\t_assertWriterUsedCorrectly() {\n\t\t/**\n\t\t * Trying to use a writer outside a {@link module:engine/model/model~Model#change `change()` or\n\t\t * {@link module:engine/model/model~Model#enqueueChange `enqueueChange()`} blocks.\n\t\t *\n\t\t * The writer can only be used inside these blocks which ensures that the model\n\t\t * can only be changed during such \"sessions\".\n\t\t *\n\t\t * @error writer-incorrect-use\n\t\t */\n\t\tif ( this.model._currentWriter !== this ) {\n\t\t\tthrow new CKEditorError( 'writer-incorrect-use: Trying to use a writer outside the change() block.', this );\n\t\t}\n\t}\n\n\t/**\n\t * For given action `type` and `positionOrRange` where the action happens, this function finds all affected markers\n\t * and applies a marker operation with the new marker range equal to the current range. Thanks to this, the marker range\n\t * can be later correctly processed during undo.\n\t *\n\t * @private\n\t * @param {'move'|'merge'} type Writer action type.\n\t * @param {module:engine/model/position~Position|module:engine/model/range~Range} positionOrRange Position or range\n\t * where the writer action happens.\n\t */\n\t_addOperationForAffectedMarkers( type, positionOrRange ) {\n\t\tfor ( const marker of this.model.markers ) {\n\t\t\tif ( !marker.managedUsingOperations ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst markerRange = marker.getRange();\n\t\t\tlet isAffected = false;\n\n\t\t\tif ( type == 'move' ) {\n\t\t\t\tisAffected =\n\t\t\t\t\tpositionOrRange.containsPosition( markerRange.start ) ||\n\t\t\t\t\tpositionOrRange.start.isEqual( markerRange.start ) ||\n\t\t\t\t\tpositionOrRange.containsPosition( markerRange.end ) ||\n\t\t\t\t\tpositionOrRange.end.isEqual( markerRange.end );\n\t\t\t} else {\n\t\t\t\t// if type == 'merge'.\n\t\t\t\tconst elementBefore = positionOrRange.nodeBefore;\n\t\t\t\tconst elementAfter = positionOrRange.nodeAfter;\n\n\t\t\t\t//               Start:  <p>Foo[</p><p>Bar]</p>\n\t\t\t\t//         After merge:  <p>Foo[Bar]</p>\n\t\t\t\t// After undoing split:  <p>Foo</p><p>[Bar]</p>     <-- incorrect, needs remembering for undo.\n\t\t\t\t//\n\t\t\t\tconst affectedInLeftElement = markerRange.start.parent == elementBefore && markerRange.start.isAtEnd;\n\n\t\t\t\t//               Start:  <p>[Foo</p><p>]Bar</p>\n\t\t\t\t//         After merge:  <p>[Foo]Bar</p>\n\t\t\t\t// After undoing split:  <p>[Foo]</p><p>Bar</p>     <-- incorrect, needs remembering for undo.\n\t\t\t\t//\n\t\t\t\tconst affectedInRightElement = markerRange.end.parent == elementAfter && markerRange.end.offset == 0;\n\n\t\t\t\t//               Start:  <p>[Foo</p>]<p>Bar</p>\n\t\t\t\t//         After merge:  <p>[Foo]Bar</p>\n\t\t\t\t// After undoing split:  <p>[Foo]</p><p>Bar</p>     <-- incorrect, needs remembering for undo.\n\t\t\t\t//\n\t\t\t\tconst affectedAfterLeftElement = markerRange.end.nodeAfter == elementAfter;\n\n\t\t\t\t//               Start:  <p>Foo</p>[<p>Bar]</p>\n\t\t\t\t//         After merge:  <p>Foo[Bar]</p>\n\t\t\t\t// After undoing split:  <p>Foo</p><p>[Bar]</p>     <-- incorrect, needs remembering for undo.\n\t\t\t\t//\n\t\t\t\tconst affectedBeforeRightElement = markerRange.start.nodeAfter == elementAfter;\n\n\t\t\t\tisAffected = affectedInLeftElement || affectedInRightElement || affectedAfterLeftElement || affectedBeforeRightElement;\n\t\t\t}\n\n\t\t\tif ( isAffected ) {\n\t\t\t\tthis.updateMarker( marker.name, { range: markerRange } );\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Sets given attribute to each node in given range. When attribute value is null then attribute will be removed.\n//\n// Because attribute operation needs to have the same attribute value on the whole range, this function splits\n// the range into smaller parts.\n//\n// Given `range` must be flat.\n//\n// @private\n// @param {module:engine/model/writer~Writer} writer\n// @param {String} key Attribute key.\n// @param {*} value Attribute new value.\n// @param {module:engine/model/range~Range} range Model range on which the attribute will be set.\nfunction setAttributeOnRange( writer, key, value, range ) {\n\tconst model = writer.model;\n\tconst doc = model.document;\n\n\t// Position of the last split, the beginning of the new range.\n\tlet lastSplitPosition = range.start;\n\n\t// Currently position in the scanning range. Because we need value after the position, it is not a current\n\t// position of the iterator but the previous one (we need to iterate one more time to get the value after).\n\tlet position;\n\n\t// Value before the currently position.\n\tlet valueBefore;\n\n\t// Value after the currently position.\n\tlet valueAfter;\n\n\tfor ( const val of range.getWalker( { shallow: true } ) ) {\n\t\tvalueAfter = val.item.getAttribute( key );\n\n\t\t// At the first run of the iterator the position in undefined. We also do not have a valueBefore, but\n\t\t// because valueAfter may be null, valueBefore may be equal valueAfter ( undefined == null ).\n\t\tif ( position && valueBefore != valueAfter ) {\n\t\t\t// if valueBefore == value there is nothing to change, so we add operation only if these values are different.\n\t\t\tif ( valueBefore != value ) {\n\t\t\t\taddOperation();\n\t\t\t}\n\n\t\t\tlastSplitPosition = position;\n\t\t}\n\n\t\tposition = val.nextPosition;\n\t\tvalueBefore = valueAfter;\n\t}\n\n\t// Because position in the loop is not the iterator position (see let position comment), the last position in\n\t// the while loop will be last but one position in the range. We need to check the last position manually.\n\tif ( position instanceof Position && position != lastSplitPosition && valueBefore != value ) {\n\t\taddOperation();\n\t}\n\n\tfunction addOperation() {\n\t\tconst range = new Range( lastSplitPosition, position );\n\t\tconst version = range.root.document ? doc.version : null;\n\t\tconst operation = new AttributeOperation( range, key, valueBefore, value, version );\n\n\t\twriter.batch.addOperation( operation );\n\t\tmodel.applyOperation( operation );\n\t}\n}\n\n// Sets given attribute to the given node. When attribute value is null then attribute will be removed.\n//\n// @private\n// @param {module:engine/model/writer~Writer} writer\n// @param {String} key Attribute key.\n// @param {*} value Attribute new value.\n// @param {module:engine/model/item~Item} item Model item on which the attribute will be set.\nfunction setAttributeOnItem( writer, key, value, item ) {\n\tconst model = writer.model;\n\tconst doc = model.document;\n\tconst previousValue = item.getAttribute( key );\n\tlet range, operation;\n\n\tif ( previousValue != value ) {\n\t\tconst isRootChanged = item.root === item;\n\n\t\tif ( isRootChanged ) {\n\t\t\t// If we change attributes of root element, we have to use `RootAttributeOperation`.\n\t\t\tconst version = item.document ? doc.version : null;\n\n\t\t\toperation = new RootAttributeOperation( item, key, previousValue, value, version );\n\t\t} else {\n\t\t\trange = new Range( Position._createBefore( item ), writer.createPositionAfter( item ) );\n\n\t\t\tconst version = range.root.document ? doc.version : null;\n\n\t\t\toperation = new AttributeOperation( range, key, previousValue, value, version );\n\t\t}\n\n\t\twriter.batch.addOperation( operation );\n\t\tmodel.applyOperation( operation );\n\t}\n}\n\n// Creates and applies marker operation to {@link module:engine/model/operation/operation~Operation operation}.\n//\n// @private\n// @param {module:engine/model/writer~Writer} writer\n// @param {String} name Marker name.\n// @param {module:engine/model/range~Range} oldRange Marker range before the change.\n// @param {module:engine/model/range~Range} newRange Marker range after the change.\n// @param {Boolean} affectsData\nfunction applyMarkerOperation( writer, name, oldRange, newRange, affectsData ) {\n\tconst model = writer.model;\n\tconst doc = model.document;\n\n\tconst operation = new MarkerOperation( name, oldRange, newRange, model.markers, affectsData, doc.version );\n\n\twriter.batch.addOperation( operation );\n\tmodel.applyOperation( operation );\n}\n\n// Creates `MoveOperation` or `DetachOperation` that removes `howMany` nodes starting from `position`.\n// The operation will be applied on given model instance and added to given operation instance.\n//\n// @private\n// @param {module:engine/model/position~Position} position Position from which nodes are removed.\n// @param {Number} howMany Number of nodes to remove.\n// @param {Batch} batch Batch to which the operation will be added.\n// @param {module:engine/model/model~Model} model Model instance on which operation will be applied.\nfunction applyRemoveOperation( position, howMany, batch, model ) {\n\tlet operation;\n\n\tif ( position.root.document ) {\n\t\tconst doc = model.document;\n\t\tconst graveyardPosition = new Position( doc.graveyard, [ 0 ] );\n\n\t\toperation = new MoveOperation( position, howMany, graveyardPosition, doc.version );\n\t} else {\n\t\toperation = new DetachOperation( position, howMany );\n\t}\n\n\tbatch.addOperation( operation );\n\tmodel.applyOperation( operation );\n}\n\n// Returns `true` if both root elements are the same element or both are documents root elements.\n//\n// Elements in the same tree can be moved (for instance you can move element form one documents root to another, or\n// within the same document fragment), but when element supposed to be moved from document fragment to the document, or\n// to another document it should be removed and inserted to avoid problems with OT. This is because features like undo or\n// collaboration may track changes on the document but ignore changes on detached fragments and should not get\n// unexpected `move` operation.\nfunction isSameTree( rootA, rootB ) {\n\t// If it is the same root this is the same tree.\n\tif ( rootA === rootB ) {\n\t\treturn true;\n\t}\n\n\t// If both roots are documents root it is operation within the document what we still treat as the same tree.\n\tif ( rootA instanceof RootElement && rootB instanceof RootElement ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/differ\n */\n\nimport Position from './position';\nimport Range from './range';\n\n/**\n * Calculates the difference between two model states.\n *\n * Receives operations that are to be applied on the model document. Marks parts of the model document tree which\n * are changed and saves the state of these elements before the change. Then, it compares saved elements with the\n * changed elements, after all changes are applied on the model document. Calculates the diff between saved\n * elements and new ones and returns a change set.\n */\nexport default class Differ {\n\t/**\n\t * Creates a `Differ` instance.\n\t *\n\t * @param {module:engine/model/markercollection~MarkerCollection} markerCollection Model's marker collection.\n\t */\n\tconstructor( markerCollection ) {\n\t\t/**\n\t\t * Reference to the model's marker collection.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/model/markercollection~MarkerCollection}\n\t\t */\n\t\tthis._markerCollection = markerCollection;\n\n\t\t/**\n\t\t * A map that stores changes that happened in a given element.\n\t\t *\n\t\t * The keys of the map are references to the model elements.\n\t\t * The values of the map are arrays with changes that were done on this element.\n\t\t *\n\t\t * @private\n\t\t * @type {Map}\n\t\t */\n\t\tthis._changesInElement = new Map();\n\n\t\t/**\n\t\t * A map that stores \"element's children snapshots\". A snapshot is representing children of a given element before\n\t\t * the first change was applied on that element. Snapshot items are objects with two properties: `name`,\n\t\t * containing the element name (or `'$text'` for a text node) and `attributes` which is a map of the node's attributes.\n\t\t *\n\t\t * @private\n\t\t * @type {Map}\n\t\t */\n\t\tthis._elementSnapshots = new Map();\n\n\t\t/**\n\t\t * A map that stores all changed markers.\n\t\t *\n\t\t * The keys of the map are marker names.\n\t\t * The values of the map are objects with the `oldRange` and `newRange` properties. They store the marker range\n\t\t * state before and after the change.\n\t\t *\n\t\t * @private\n\t\t * @type {Map}\n\t\t */\n\t\tthis._changedMarkers = new Map();\n\n\t\t/**\n\t\t * Stores the number of changes that were processed. Used to order the changes chronologically. It is important\n\t\t * when changes are sorted.\n\t\t *\n\t\t * @private\n\t\t * @type {Number}\n\t\t */\n\t\tthis._changeCount = 0;\n\n\t\t/**\n\t\t * For efficiency purposes, `Differ` stores the change set returned by the differ after {@link #getChanges} call.\n\t\t * Cache is reset each time a new operation is buffered. If the cache has not been reset, {@link #getChanges} will\n\t\t * return the cached value instead of calculating it again.\n\t\t *\n\t\t * This property stores those changes that did not take place in graveyard root.\n\t\t *\n\t\t * @private\n\t\t * @type {Array.<Object>|null}\n\t\t */\n\t\tthis._cachedChanges = null;\n\n\t\t/**\n\t\t * For efficiency purposes, `Differ` stores the change set returned by the differ after the {@link #getChanges} call.\n\t\t * The cache is reset each time a new operation is buffered. If the cache has not been reset, {@link #getChanges} will\n\t\t * return the cached value instead of calculating it again.\n\t\t *\n\t\t * This property stores all changes evaluated by `Differ`, including those that took place in the graveyard.\n\t\t *\n\t\t * @private\n\t\t * @type {Array.<Object>|null}\n\t\t */\n\t\tthis._cachedChangesWithGraveyard = null;\n\t}\n\n\t/**\n\t * Informs whether there are any changes buffered in `Differ`.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this._changesInElement.size == 0 && this._changedMarkers.size == 0;\n\t}\n\n\t/**\n\t * Buffers the given operation. An operation has to be buffered before it is executed.\n\t *\n\t * Operation type is checked and it is checked which nodes it will affect. These nodes are then stored in `Differ`\n\t * in the state before the operation is executed.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation An operation to buffer.\n\t */\n\tbufferOperation( operation ) {\n\t\t// Below we take an operation, check its type, then use its parameters in marking (private) methods.\n\t\t// The general rule is to not mark elements inside inserted element. All inserted elements are re-rendered.\n\t\t// Marking changes in them would cause a \"double\" changing then.\n\t\t//\n\t\tswitch ( operation.type ) {\n\t\t\tcase 'insert': {\n\t\t\t\tif ( this._isInInsertedElement( operation.position.parent ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._markInsert( operation.position.parent, operation.position.offset, operation.nodes.maxOffset );\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'addAttribute':\n\t\t\tcase 'removeAttribute':\n\t\t\tcase 'changeAttribute': {\n\t\t\t\tfor ( const item of operation.range.getItems() ) {\n\t\t\t\t\tif ( this._isInInsertedElement( item.parent ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._markAttribute( item );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'remove':\n\t\t\tcase 'move':\n\t\t\tcase 'reinsert': {\n\t\t\t\t// When range is moved to the same position then not mark it as a change.\n\t\t\t\t// See: https://github.com/ckeditor/ckeditor5-engine/issues/1664.\n\t\t\t\tif (\n\t\t\t\t\toperation.sourcePosition.isEqual( operation.targetPosition ) ||\n\t\t\t\t\toperation.sourcePosition.getShiftedBy( operation.howMany ).isEqual( operation.targetPosition )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst sourceParentInserted = this._isInInsertedElement( operation.sourcePosition.parent );\n\t\t\t\tconst targetParentInserted = this._isInInsertedElement( operation.targetPosition.parent );\n\n\t\t\t\tif ( !sourceParentInserted ) {\n\t\t\t\t\tthis._markRemove( operation.sourcePosition.parent, operation.sourcePosition.offset, operation.howMany );\n\t\t\t\t}\n\n\t\t\t\tif ( !targetParentInserted ) {\n\t\t\t\t\tthis._markInsert( operation.targetPosition.parent, operation.getMovedRangeStart().offset, operation.howMany );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'rename': {\n\t\t\t\tif ( this._isInInsertedElement( operation.position.parent ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._markRemove( operation.position.parent, operation.position.offset, 1 );\n\t\t\t\tthis._markInsert( operation.position.parent, operation.position.offset, 1 );\n\n\t\t\t\tconst range = Range._createFromPositionAndShift( operation.position, 1 );\n\n\t\t\t\tfor ( const marker of this._markerCollection.getMarkersIntersectingRange( range ) ) {\n\t\t\t\t\tconst markerRange = marker.getRange();\n\n\t\t\t\t\tthis.bufferMarkerChange( marker.name, markerRange, markerRange, marker.affectsData );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'split': {\n\t\t\t\tconst splitElement = operation.splitPosition.parent;\n\n\t\t\t\t// Mark that children of the split element were removed.\n\t\t\t\tif ( !this._isInInsertedElement( splitElement ) ) {\n\t\t\t\t\tthis._markRemove( splitElement, operation.splitPosition.offset, operation.howMany );\n\t\t\t\t}\n\n\t\t\t\t// Mark that the new element (split copy) was inserted.\n\t\t\t\tif ( !this._isInInsertedElement( operation.insertionPosition.parent ) ) {\n\t\t\t\t\tthis._markInsert( operation.insertionPosition.parent, operation.insertionPosition.offset, 1 );\n\t\t\t\t}\n\n\t\t\t\t// If the split took the element from the graveyard, mark that the element from the graveyard was removed.\n\t\t\t\tif ( operation.graveyardPosition ) {\n\t\t\t\t\tthis._markRemove( operation.graveyardPosition.parent, operation.graveyardPosition.offset, 1 );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'merge': {\n\t\t\t\t// Mark that the merged element was removed.\n\t\t\t\tconst mergedElement = operation.sourcePosition.parent;\n\n\t\t\t\tif ( !this._isInInsertedElement( mergedElement.parent ) ) {\n\t\t\t\t\tthis._markRemove( mergedElement.parent, mergedElement.startOffset, 1 );\n\t\t\t\t}\n\n\t\t\t\t// Mark that the merged element was inserted into graveyard.\n\t\t\t\tconst graveyardParent = operation.graveyardPosition.parent;\n\n\t\t\t\tthis._markInsert( graveyardParent, operation.graveyardPosition.offset, 1 );\n\n\t\t\t\t// Mark that children of merged element were inserted at new parent.\n\t\t\t\tconst mergedIntoElement = operation.targetPosition.parent;\n\n\t\t\t\tif ( !this._isInInsertedElement( mergedIntoElement ) ) {\n\t\t\t\t\tthis._markInsert( mergedIntoElement, operation.targetPosition.offset, mergedElement.maxOffset );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Clear cache after each buffered operation as it is no longer valid.\n\t\tthis._cachedChanges = null;\n\t}\n\n\t/**\n\t * Buffers a marker change.\n\t *\n\t * @param {String} markerName The name of the marker that changed.\n\t * @param {module:engine/model/range~Range|null} oldRange Marker range before the change or `null` if the marker has just\n\t * been created.\n\t * @param {module:engine/model/range~Range|null} newRange Marker range after the change or `null` if the marker was removed.\n\t * @param {Boolean} affectsData Flag indicating whether marker affects the editor data.\n\t */\n\tbufferMarkerChange( markerName, oldRange, newRange, affectsData ) {\n\t\tconst buffered = this._changedMarkers.get( markerName );\n\n\t\tif ( !buffered ) {\n\t\t\tthis._changedMarkers.set( markerName, {\n\t\t\t\toldRange,\n\t\t\t\tnewRange,\n\t\t\t\taffectsData\n\t\t\t} );\n\t\t} else {\n\t\t\tbuffered.newRange = newRange;\n\t\t\tbuffered.affectsData = affectsData;\n\n\t\t\tif ( buffered.oldRange == null && buffered.newRange == null ) {\n\t\t\t\t// The marker is going to be removed (`newRange == null`) but it did not exist before the first buffered change\n\t\t\t\t// (`buffered.oldRange == null`). In this case, do not keep the marker in buffer at all.\n\t\t\t\tthis._changedMarkers.delete( markerName );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns all markers that should be removed as a result of buffered changes.\n\t *\n\t * @returns {Array.<Object>} Markers to remove. Each array item is an object containing the `name` and `range` properties.\n\t */\n\tgetMarkersToRemove() {\n\t\tconst result = [];\n\n\t\tfor ( const [ name, change ] of this._changedMarkers ) {\n\t\t\tif ( change.oldRange != null ) {\n\t\t\t\tresult.push( { name, range: change.oldRange } );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns all markers which should be added as a result of buffered changes.\n\t *\n\t * @returns {Array.<Object>} Markers to add. Each array item is an object containing the `name` and `range` properties.\n\t */\n\tgetMarkersToAdd() {\n\t\tconst result = [];\n\n\t\tfor ( const [ name, change ] of this._changedMarkers ) {\n\t\t\tif ( change.newRange != null ) {\n\t\t\t\tresult.push( { name, range: change.newRange } );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns all markers which changed.\n\t *\n\t * @returns {Array.<Object>}\n\t */\n\tgetChangedMarkers() {\n\t\treturn Array.from( this._changedMarkers ).map( item => (\n\t\t\t{\n\t\t\t\tname: item[ 0 ],\n\t\t\t\tdata: {\n\t\t\t\t\toldRange: item[ 1 ].oldRange,\n\t\t\t\t\tnewRange: item[ 1 ].newRange\n\t\t\t\t}\n\t\t\t}\n\t\t) );\n\t}\n\n\t/**\n\t * Checks whether some of the buffered changes affect the editor data.\n\t *\n\t * Types of changes which affect the editor data:\n\t *\n\t * * model structure changes,\n\t * * attribute changes,\n\t * * changes of markers which were defined as `affectingData`.\n\t *\n\t * @returns {Boolean}\n\t */\n\thasDataChanges() {\n\t\tfor ( const [ , change ] of this._changedMarkers ) {\n\t\t\tif ( change.affectsData ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// If markers do not affect the data, check whether there are some changes in elements.\n\t\treturn this._changesInElement.size > 0;\n\t}\n\n\t/**\n\t * Calculates the diff between the old model tree state (the state before the first buffered operations since the last {@link #reset}\n\t * call) and the new model tree state (actual one). It should be called after all buffered operations are executed.\n\t *\n\t * The diff set is returned as an array of diff items, each describing a change done on the model. The items are sorted by\n\t * the position on which the change happened. If a position {@link module:engine/model/position~Position#isBefore is before}\n\t * another one, it will be on an earlier index in the diff set.\n\t *\n\t * Because calculating the diff is a costly operation, the result is cached. If no new operation was buffered since the\n\t * previous {@link #getChanges} call, the next call will return the cached value.\n\t *\n\t * @param {Object} options Additional options.\n\t * @param {Boolean} [options.includeChangesInGraveyard=false] If set to `true`, also changes that happened\n\t * in the graveyard root will be returned. By default, changes in the graveyard root are not returned.\n\t * @returns {Array.<Object>} Diff between the old and the new model tree state.\n\t */\n\tgetChanges( options = { includeChangesInGraveyard: false } ) {\n\t\t// If there are cached changes, just return them instead of calculating changes again.\n\t\tif ( this._cachedChanges ) {\n\t\t\tif ( options.includeChangesInGraveyard ) {\n\t\t\t\treturn this._cachedChangesWithGraveyard.slice();\n\t\t\t} else {\n\t\t\t\treturn this._cachedChanges.slice();\n\t\t\t}\n\t\t}\n\n\t\t// Will contain returned results.\n\t\tconst diffSet = [];\n\n\t\t// Check all changed elements.\n\t\tfor ( const element of this._changesInElement.keys() ) {\n\t\t\t// Get changes for this element and sort them.\n\t\t\tconst changes = this._changesInElement.get( element ).sort( ( a, b ) => {\n\t\t\t\tif ( a.offset === b.offset ) {\n\t\t\t\t\tif ( a.type != b.type ) {\n\t\t\t\t\t\t// If there are multiple changes at the same position, \"remove\" change should be first.\n\t\t\t\t\t\t// If the order is different, for example, we would first add some nodes and then removed them\n\t\t\t\t\t\t// (instead of the nodes that we should remove).\n\t\t\t\t\t\treturn a.type == 'remove' ? -1 : 1;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn a.offset < b.offset ? -1 : 1;\n\t\t\t} );\n\n\t\t\t// Get children of this element before any change was applied on it.\n\t\t\tconst snapshotChildren = this._elementSnapshots.get( element );\n\t\t\t// Get snapshot of current element's children.\n\t\t\tconst elementChildren = _getChildrenSnapshot( element.getChildren() );\n\n\t\t\t// Generate actions basing on changes done on element.\n\t\t\tconst actions = _generateActionsFromChanges( snapshotChildren.length, changes );\n\n\t\t\tlet i = 0; // Iterator in `elementChildren` array -- iterates through current children of element.\n\t\t\tlet j = 0; // Iterator in `snapshotChildren` array -- iterates through old children of element.\n\n\t\t\t// Process every action.\n\t\t\tfor ( const action of actions ) {\n\t\t\t\tif ( action === 'i' ) {\n\t\t\t\t\t// Generate diff item for this element and insert it into the diff set.\n\t\t\t\t\tdiffSet.push( this._getInsertDiff( element, i, elementChildren[ i ].name ) );\n\n\t\t\t\t\ti++;\n\t\t\t\t} else if ( action === 'r' ) {\n\t\t\t\t\t// Generate diff item for this element and insert it into the diff set.\n\t\t\t\t\tdiffSet.push( this._getRemoveDiff( element, i, snapshotChildren[ j ].name ) );\n\n\t\t\t\t\tj++;\n\t\t\t\t} else if ( action === 'a' ) {\n\t\t\t\t\t// Take attributes from saved and current children.\n\t\t\t\t\tconst elementAttributes = elementChildren[ i ].attributes;\n\t\t\t\t\tconst snapshotAttributes = snapshotChildren[ j ].attributes;\n\t\t\t\t\tlet range;\n\n\t\t\t\t\tif ( elementChildren[ i ].name == '$text' ) {\n\t\t\t\t\t\trange = new Range( Position._createAt( element, i ), Position._createAt( element, i + 1 ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst index = element.offsetToIndex( i );\n\t\t\t\t\t\trange = new Range( Position._createAt( element, i ), Position._createAt( element.getChild( index ), 0 ) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Generate diff items for this change (there might be multiple attributes changed and\n\t\t\t\t\t// there is a single diff for each of them) and insert them into the diff set.\n\t\t\t\t\tdiffSet.push( ...this._getAttributesDiff( range, snapshotAttributes, elementAttributes ) );\n\n\t\t\t\t\ti++;\n\t\t\t\t\tj++;\n\t\t\t\t} else {\n\t\t\t\t\t// `action` is 'equal'. Child not changed.\n\t\t\t\t\ti++;\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Then, sort the changes by the position (change at position before other changes is first).\n\t\tdiffSet.sort( ( a, b ) => {\n\t\t\t// If the change is in different root, we don't care much, but we'd like to have all changes in given\n\t\t\t// root \"together\" in the array. So let's just sort them by the root name. It does not matter which root\n\t\t\t// will be processed first.\n\t\t\tif ( a.position.root != b.position.root ) {\n\t\t\t\treturn a.position.root.rootName < b.position.root.rootName ? -1 : 1;\n\t\t\t}\n\n\t\t\t// If change happens at the same position...\n\t\t\tif ( a.position.isEqual( b.position ) ) {\n\t\t\t\t// Keep chronological order of operations.\n\t\t\t\treturn a.changeCount - b.changeCount;\n\t\t\t}\n\n\t\t\t// If positions differ, position \"on the left\" should be earlier in the result.\n\t\t\treturn a.position.isBefore( b.position ) ? -1 : 1;\n\t\t} );\n\n\t\t// Glue together multiple changes (mostly on text nodes).\n\t\tfor ( let i = 1; i < diffSet.length; i++ ) {\n\t\t\tconst prevDiff = diffSet[ i - 1 ];\n\t\t\tconst thisDiff = diffSet[ i ];\n\n\t\t\t// Glue remove changes if they happen on text on same position.\n\t\t\tconst isConsecutiveTextRemove =\n\t\t\t\tprevDiff.type == 'remove' && thisDiff.type == 'remove' &&\n\t\t\t\tprevDiff.name == '$text' && thisDiff.name == '$text' &&\n\t\t\t\tprevDiff.position.isEqual( thisDiff.position );\n\n\t\t\t// Glue insert changes if they happen on text on consecutive fragments.\n\t\t\tconst isConsecutiveTextAdd =\n\t\t\t\tprevDiff.type == 'insert' && thisDiff.type == 'insert' &&\n\t\t\t\tprevDiff.name == '$text' && thisDiff.name == '$text' &&\n\t\t\t\tprevDiff.position.parent == thisDiff.position.parent &&\n\t\t\t\tprevDiff.position.offset + prevDiff.length == thisDiff.position.offset;\n\n\t\t\t// Glue attribute changes if they happen on consecutive fragments and have same key, old value and new value.\n\t\t\tconst isConsecutiveAttributeChange =\n\t\t\t\tprevDiff.type == 'attribute' && thisDiff.type == 'attribute' &&\n\t\t\t\tprevDiff.position.parent == thisDiff.position.parent &&\n\t\t\t\tprevDiff.range.isFlat && thisDiff.range.isFlat &&\n\t\t\t\tprevDiff.position.offset + prevDiff.length == thisDiff.position.offset &&\n\t\t\t\tprevDiff.attributeKey == thisDiff.attributeKey &&\n\t\t\t\tprevDiff.attributeOldValue == thisDiff.attributeOldValue &&\n\t\t\t\tprevDiff.attributeNewValue == thisDiff.attributeNewValue;\n\n\t\t\tif ( isConsecutiveTextRemove || isConsecutiveTextAdd || isConsecutiveAttributeChange ) {\n\t\t\t\tdiffSet[ i - 1 ].length++;\n\n\t\t\t\tif ( isConsecutiveAttributeChange ) {\n\t\t\t\t\tdiffSet[ i - 1 ].range.end = diffSet[ i - 1 ].range.end.getShiftedBy( 1 );\n\t\t\t\t}\n\n\t\t\t\tdiffSet.splice( i, 1 );\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\t// Remove `changeCount` property from diff items. It is used only for sorting and is internal thing.\n\t\tfor ( const item of diffSet ) {\n\t\t\tdelete item.changeCount;\n\n\t\t\tif ( item.type == 'attribute' ) {\n\t\t\t\tdelete item.position;\n\t\t\t\tdelete item.length;\n\t\t\t}\n\t\t}\n\n\t\tthis._changeCount = 0;\n\n\t\t// Cache changes.\n\t\tthis._cachedChangesWithGraveyard = diffSet.slice();\n\t\tthis._cachedChanges = diffSet.slice().filter( _changesInGraveyardFilter );\n\n\t\tif ( options.includeChangesInGraveyard ) {\n\t\t\treturn this._cachedChangesWithGraveyard;\n\t\t} else {\n\t\t\treturn this._cachedChanges;\n\t\t}\n\t}\n\n\t/**\n\t * Resets `Differ`. Removes all buffered changes.\n\t */\n\treset() {\n\t\tthis._changesInElement.clear();\n\t\tthis._elementSnapshots.clear();\n\t\tthis._changedMarkers.clear();\n\t\tthis._cachedChanges = null;\n\t}\n\n\t/**\n\t * Saves and handles an insert change.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent\n\t * @param {Number} offset\n\t * @param {Number} howMany\n\t */\n\t_markInsert( parent, offset, howMany ) {\n\t\tconst changeItem = { type: 'insert', offset, howMany, count: this._changeCount++ };\n\n\t\tthis._markChange( parent, changeItem );\n\t}\n\n\t/**\n\t * Saves and handles a remove change.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent\n\t * @param {Number} offset\n\t * @param {Number} howMany\n\t */\n\t_markRemove( parent, offset, howMany ) {\n\t\tconst changeItem = { type: 'remove', offset, howMany, count: this._changeCount++ };\n\n\t\tthis._markChange( parent, changeItem );\n\n\t\tthis._removeAllNestedChanges( parent, offset, howMany );\n\t}\n\n\t/**\n\t * Saves and handles an attribute change.\n\t *\n\t * @private\n\t * @param {module:engine/model/item~Item} item\n\t */\n\t_markAttribute( item ) {\n\t\tconst changeItem = { type: 'attribute', offset: item.startOffset, howMany: item.offsetSize, count: this._changeCount++ };\n\n\t\tthis._markChange( item.parent, changeItem );\n\t}\n\n\t/**\n\t * Saves and handles a model change.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent\n\t * @param {Object} changeItem\n\t */\n\t_markChange( parent, changeItem ) {\n\t\t// First, make a snapshot of this parent's children (it will be made only if it was not made before).\n\t\tthis._makeSnapshot( parent );\n\n\t\t// Then, get all changes that already were done on the element (empty array if this is the first change).\n\t\tconst changes = this._getChangesForElement( parent );\n\n\t\t// Then, look through all the changes, and transform them or the new change.\n\t\tthis._handleChange( changeItem, changes );\n\n\t\t// Add the new change.\n\t\tchanges.push( changeItem );\n\n\t\t// Remove incorrect changes. During transformation some change might be, for example, included in another.\n\t\t// In that case, the change will have `howMany` property set to `0` or less. We need to remove those changes.\n\t\tfor ( let i = 0; i < changes.length; i++ ) {\n\t\t\tif ( changes[ i ].howMany < 1 ) {\n\t\t\t\tchanges.splice( i, 1 );\n\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets an array of changes that have already been saved for a given element.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} element\n\t * @returns {Array.<Object>}\n\t */\n\t_getChangesForElement( element ) {\n\t\tlet changes;\n\n\t\tif ( this._changesInElement.has( element ) ) {\n\t\t\tchanges = this._changesInElement.get( element );\n\t\t} else {\n\t\t\tchanges = [];\n\n\t\t\tthis._changesInElement.set( element, changes );\n\t\t}\n\n\t\treturn changes;\n\t}\n\n\t/**\n\t * Saves a children snapshot for a given element.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} element\n\t */\n\t_makeSnapshot( element ) {\n\t\tif ( !this._elementSnapshots.has( element ) ) {\n\t\t\tthis._elementSnapshots.set( element, _getChildrenSnapshot( element.getChildren() ) );\n\t\t}\n\t}\n\n\t/**\n\t * For a given newly saved change, compares it with a change already done on the element and modifies the incoming\n\t * change and/or the old change.\n\t *\n\t * @private\n\t * @param {Object} inc Incoming (new) change.\n\t * @param {Array.<Object>} changes An array containing all the changes done on that element.\n\t */\n\t_handleChange( inc, changes ) {\n\t\t// We need a helper variable that will store how many nodes are to be still handled for this change item.\n\t\t// `nodesToHandle` (how many nodes still need to be handled) and `howMany` (how many nodes were affected)\n\t\t// needs to be differentiated.\n\t\t//\n\t\t// This comes up when there are multiple changes that are affected by `inc` change item.\n\t\t//\n\t\t// For example: assume two insert changes: `{ offset: 2, howMany: 1 }` and `{ offset: 5, howMany: 1 }`.\n\t\t// Assume that `inc` change is remove `{ offset: 2, howMany: 2, nodesToHandle: 2 }`.\n\t\t//\n\t\t// Then, we:\n\t\t// - \"forget\" about first insert change (it is \"eaten\" by remove),\n\t\t// - because of that, at the end we will want to remove only one node (`nodesToHandle = 1`),\n\t\t// - but still we have to change offset of the second insert change from `5` to `3`!\n\t\t//\n\t\t// So, `howMany` does not change throughout items transformation and keeps information about how many nodes were affected,\n\t\t// while `nodesToHandle` means how many nodes need to be handled after the change item is transformed by other changes.\n\t\tinc.nodesToHandle = inc.howMany;\n\n\t\tfor ( const old of changes ) {\n\t\t\tconst incEnd = inc.offset + inc.howMany;\n\t\t\tconst oldEnd = old.offset + old.howMany;\n\n\t\t\tif ( inc.type == 'insert' ) {\n\t\t\t\tif ( old.type == 'insert' ) {\n\t\t\t\t\tif ( inc.offset <= old.offset ) {\n\t\t\t\t\t\told.offset += inc.howMany;\n\t\t\t\t\t} else if ( inc.offset < oldEnd ) {\n\t\t\t\t\t\told.howMany += inc.nodesToHandle;\n\t\t\t\t\t\tinc.nodesToHandle = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'remove' ) {\n\t\t\t\t\tif ( inc.offset < old.offset ) {\n\t\t\t\t\t\told.offset += inc.howMany;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'attribute' ) {\n\t\t\t\t\tif ( inc.offset <= old.offset ) {\n\t\t\t\t\t\told.offset += inc.howMany;\n\t\t\t\t\t} else if ( inc.offset < oldEnd ) {\n\t\t\t\t\t\t// This case is more complicated, because attribute change has to be split into two.\n\t\t\t\t\t\t// Example (assume that uppercase and lowercase letters mean different attributes):\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// initial state:\t\tabcxyz\n\t\t\t\t\t\t// attribute change:\taBCXYz\n\t\t\t\t\t\t// incoming insert:\t\taBCfooXYz\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// Change ranges cannot intersect because each item has to be described exactly (it was either\n\t\t\t\t\t\t// not changed, inserted, removed, or its attribute was changed). That's why old attribute\n\t\t\t\t\t\t// change has to be split and both parts has to be handled separately from now on.\n\t\t\t\t\t\tconst howMany = old.howMany;\n\n\t\t\t\t\t\told.howMany = inc.offset - old.offset;\n\n\t\t\t\t\t\t// Add the second part of attribute change to the beginning of processed array so it won't\n\t\t\t\t\t\t// be processed again in this loop.\n\t\t\t\t\t\tchanges.unshift( {\n\t\t\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\t\t\toffset: incEnd,\n\t\t\t\t\t\t\thowMany: howMany - old.howMany,\n\t\t\t\t\t\t\tcount: this._changeCount++\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( inc.type == 'remove' ) {\n\t\t\t\tif ( old.type == 'insert' ) {\n\t\t\t\t\tif ( incEnd <= old.offset ) {\n\t\t\t\t\t\told.offset -= inc.howMany;\n\t\t\t\t\t} else if ( incEnd <= oldEnd ) {\n\t\t\t\t\t\tif ( inc.offset < old.offset ) {\n\t\t\t\t\t\t\tconst intersectionLength = incEnd - old.offset;\n\n\t\t\t\t\t\t\told.offset = inc.offset;\n\n\t\t\t\t\t\t\told.howMany -= intersectionLength;\n\t\t\t\t\t\t\tinc.nodesToHandle -= intersectionLength;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\told.howMany -= inc.nodesToHandle;\n\t\t\t\t\t\t\tinc.nodesToHandle = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( inc.offset <= old.offset ) {\n\t\t\t\t\t\t\tinc.nodesToHandle -= old.howMany;\n\t\t\t\t\t\t\told.howMany = 0;\n\t\t\t\t\t\t} else if ( inc.offset < oldEnd ) {\n\t\t\t\t\t\t\tconst intersectionLength = oldEnd - inc.offset;\n\n\t\t\t\t\t\t\told.howMany -= intersectionLength;\n\t\t\t\t\t\t\tinc.nodesToHandle -= intersectionLength;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'remove' ) {\n\t\t\t\t\tif ( incEnd <= old.offset ) {\n\t\t\t\t\t\told.offset -= inc.howMany;\n\t\t\t\t\t} else if ( inc.offset < old.offset ) {\n\t\t\t\t\t\tinc.nodesToHandle += old.howMany;\n\t\t\t\t\t\told.howMany = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'attribute' ) {\n\t\t\t\t\tif ( incEnd <= old.offset ) {\n\t\t\t\t\t\told.offset -= inc.howMany;\n\t\t\t\t\t} else if ( inc.offset < old.offset ) {\n\t\t\t\t\t\tconst intersectionLength = incEnd - old.offset;\n\n\t\t\t\t\t\told.offset = inc.offset;\n\t\t\t\t\t\told.howMany -= intersectionLength;\n\t\t\t\t\t} else if ( inc.offset < oldEnd ) {\n\t\t\t\t\t\tif ( incEnd <= oldEnd ) {\n\t\t\t\t\t\t\t// On first sight in this case we don't need to split attribute operation into two.\n\t\t\t\t\t\t\t// However the changes set is later converted to actions (see `_generateActionsFromChanges`).\n\t\t\t\t\t\t\t// For that reason, no two changes may intersect.\n\t\t\t\t\t\t\t// So we cannot have an attribute change that \"contains\" remove change.\n\t\t\t\t\t\t\t// Attribute change needs to be split.\n\t\t\t\t\t\t\tconst howMany = old.howMany;\n\n\t\t\t\t\t\t\told.howMany = inc.offset - old.offset;\n\n\t\t\t\t\t\t\tconst howManyAfter = howMany - old.howMany - inc.nodesToHandle;\n\n\t\t\t\t\t\t\t// Add the second part of attribute change to the beginning of processed array so it won't\n\t\t\t\t\t\t\t// be processed again in this loop.\n\t\t\t\t\t\t\tchanges.unshift( {\n\t\t\t\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\t\t\t\toffset: inc.offset,\n\t\t\t\t\t\t\t\thowMany: howManyAfter,\n\t\t\t\t\t\t\t\tcount: this._changeCount++\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\told.howMany -= oldEnd - inc.offset;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( inc.type == 'attribute' ) {\n\t\t\t\t// In case of attribute change, `howMany` should be kept same as `nodesToHandle`. It's not an error.\n\t\t\t\tif ( old.type == 'insert' ) {\n\t\t\t\t\tif ( inc.offset < old.offset && incEnd > old.offset ) {\n\t\t\t\t\t\tif ( incEnd > oldEnd ) {\n\t\t\t\t\t\t\t// This case is similar to a case described when incoming change was insert and old change was attribute.\n\t\t\t\t\t\t\t// See comment above.\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// This time incoming change is attribute. We need to split incoming change in this case too.\n\t\t\t\t\t\t\t// However this time, the second part of the attribute change needs to be processed further\n\t\t\t\t\t\t\t// because there might be other changes that it collides with.\n\t\t\t\t\t\t\tconst attributePart = {\n\t\t\t\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\t\t\t\toffset: oldEnd,\n\t\t\t\t\t\t\t\thowMany: incEnd - oldEnd,\n\t\t\t\t\t\t\t\tcount: this._changeCount++\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tthis._handleChange( attributePart, changes );\n\n\t\t\t\t\t\t\tchanges.push( attributePart );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinc.nodesToHandle = old.offset - inc.offset;\n\t\t\t\t\t\tinc.howMany = inc.nodesToHandle;\n\t\t\t\t\t} else if ( inc.offset >= old.offset && inc.offset < oldEnd ) {\n\t\t\t\t\t\tif ( incEnd > oldEnd ) {\n\t\t\t\t\t\t\tinc.nodesToHandle = incEnd - oldEnd;\n\t\t\t\t\t\t\tinc.offset = oldEnd;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinc.nodesToHandle = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'remove' ) {\n\t\t\t\t\t// This is a case when attribute change \"contains\" remove change.\n\t\t\t\t\t// The attribute change needs to be split into two because changes cannot intersect.\n\t\t\t\t\tif ( inc.offset < old.offset && incEnd > old.offset ) {\n\t\t\t\t\t\tconst attributePart = {\n\t\t\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\t\t\toffset: old.offset,\n\t\t\t\t\t\t\thowMany: incEnd - old.offset,\n\t\t\t\t\t\t\tcount: this._changeCount++\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis._handleChange( attributePart, changes );\n\n\t\t\t\t\t\tchanges.push( attributePart );\n\n\t\t\t\t\t\tinc.nodesToHandle = old.offset - inc.offset;\n\t\t\t\t\t\tinc.howMany = inc.nodesToHandle;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( old.type == 'attribute' ) {\n\t\t\t\t\t// There are only two conflicting scenarios possible here:\n\t\t\t\t\tif ( inc.offset >= old.offset && incEnd <= oldEnd ) {\n\t\t\t\t\t\t// `old` change includes `inc` change, or they are the same.\n\t\t\t\t\t\tinc.nodesToHandle = 0;\n\t\t\t\t\t\tinc.howMany = 0;\n\t\t\t\t\t\tinc.offset = 0;\n\t\t\t\t\t} else if ( inc.offset <= old.offset && incEnd >= oldEnd ) {\n\t\t\t\t\t\t// `inc` change includes `old` change.\n\t\t\t\t\t\told.howMany = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinc.howMany = inc.nodesToHandle;\n\t\tdelete inc.nodesToHandle;\n\t}\n\n\t/**\n\t * Returns an object with a single insert change description.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent The element in which the change happened.\n\t * @param {Number} offset The offset at which change happened.\n\t * @param {String} name The name of the removed element or `'$text'` for a character.\n\t * @returns {Object} The diff item.\n\t */\n\t_getInsertDiff( parent, offset, name ) {\n\t\treturn {\n\t\t\ttype: 'insert',\n\t\t\tposition: Position._createAt( parent, offset ),\n\t\t\tname,\n\t\t\tlength: 1,\n\t\t\tchangeCount: this._changeCount++\n\t\t};\n\t}\n\n\t/**\n\t * Returns an object with a single remove change description.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent The element in which change happened.\n\t * @param {Number} offset The offset at which change happened.\n\t * @param {String} name The name of the removed element or `'$text'` for a character.\n\t * @returns {Object} The diff item.\n\t */\n\t_getRemoveDiff( parent, offset, name ) {\n\t\treturn {\n\t\t\ttype: 'remove',\n\t\t\tposition: Position._createAt( parent, offset ),\n\t\t\tname,\n\t\t\tlength: 1,\n\t\t\tchangeCount: this._changeCount++\n\t\t};\n\t}\n\n\t/**\n\t * Returns an array of objects where each one is a single attribute change description.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range The range where the change happened.\n\t * @param {Map} oldAttributes A map, map iterator or compatible object that contains attributes before the change.\n\t * @param {Map} newAttributes A map, map iterator or compatible object that contains attributes after the change.\n\t * @returns {Array.<Object>} An array containing one or more diff items.\n\t */\n\t_getAttributesDiff( range, oldAttributes, newAttributes ) {\n\t\t// Results holder.\n\t\tconst diffs = [];\n\n\t\t// Clone new attributes as we will be performing changes on this object.\n\t\tnewAttributes = new Map( newAttributes );\n\n\t\t// Look through old attributes.\n\t\tfor ( const [ key, oldValue ] of oldAttributes ) {\n\t\t\t// Check what is the new value of the attribute (or if it was removed).\n\t\t\tconst newValue = newAttributes.has( key ) ? newAttributes.get( key ) : null;\n\n\t\t\t// If values are different (or attribute was removed)...\n\t\t\tif ( newValue !== oldValue ) {\n\t\t\t\t// Add diff item.\n\t\t\t\tdiffs.push( {\n\t\t\t\t\ttype: 'attribute',\n\t\t\t\t\tposition: range.start,\n\t\t\t\t\trange: range.clone(),\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tattributeKey: key,\n\t\t\t\t\tattributeOldValue: oldValue,\n\t\t\t\t\tattributeNewValue: newValue,\n\t\t\t\t\tchangeCount: this._changeCount++\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Prevent returning two diff items for the same change.\n\t\t\tnewAttributes.delete( key );\n\t\t}\n\n\t\t// Look through new attributes that weren't handled above.\n\t\tfor ( const [ key, newValue ] of newAttributes ) {\n\t\t\t// Each of them is a new attribute. Add diff item.\n\t\t\tdiffs.push( {\n\t\t\t\ttype: 'attribute',\n\t\t\t\tposition: range.start,\n\t\t\t\trange: range.clone(),\n\t\t\t\tlength: 1,\n\t\t\t\tattributeKey: key,\n\t\t\t\tattributeOldValue: null,\n\t\t\t\tattributeNewValue: newValue,\n\t\t\t\tchangeCount: this._changeCount++\n\t\t\t} );\n\t\t}\n\n\t\treturn diffs;\n\t}\n\n\t/**\n\t * Checks whether given element or any of its parents is an element that is buffered as an inserted element.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} element Element to check.\n\t * @returns {Boolean}\n\t */\n\t_isInInsertedElement( element ) {\n\t\tconst parent = element.parent;\n\n\t\tif ( !parent ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst changes = this._changesInElement.get( parent );\n\t\tconst offset = element.startOffset;\n\n\t\tif ( changes ) {\n\t\t\tfor ( const change of changes ) {\n\t\t\t\tif ( change.type == 'insert' && offset >= change.offset && offset < change.offset + change.howMany ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this._isInInsertedElement( parent );\n\t}\n\n\t/**\n\t * Removes deeply all buffered changes that are registered in elements from range specified by `parent`, `offset`\n\t * and `howMany`.\n\t *\n\t * @private\n\t * @param {module:engine/model/element~Element} parent\n\t * @param {Number} offset\n\t * @param {Number} howMany\n\t */\n\t_removeAllNestedChanges( parent, offset, howMany ) {\n\t\tconst range = new Range( Position._createAt( parent, offset ), Position._createAt( parent, offset + howMany ) );\n\n\t\tfor ( const item of range.getItems( { shallow: true } ) ) {\n\t\t\tif ( item.is( 'element' ) ) {\n\t\t\t\tthis._elementSnapshots.delete( item );\n\t\t\t\tthis._changesInElement.delete( item );\n\n\t\t\t\tthis._removeAllNestedChanges( item, 0, item.maxOffset );\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Returns an array that is a copy of passed child list with the exception that text nodes are split to one or more\n// objects, each representing one character and attributes set on that character.\nfunction _getChildrenSnapshot( children ) {\n\tconst snapshot = [];\n\n\tfor ( const child of children ) {\n\t\tif ( child.is( 'text' ) ) {\n\t\t\tfor ( let i = 0; i < child.data.length; i++ ) {\n\t\t\t\tsnapshot.push( {\n\t\t\t\t\tname: '$text',\n\t\t\t\t\tattributes: new Map( child.getAttributes() )\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\t\t\tsnapshot.push( {\n\t\t\t\tname: child.name,\n\t\t\t\tattributes: new Map( child.getAttributes() )\n\t\t\t} );\n\t\t}\n\t}\n\n\treturn snapshot;\n}\n\n// Generates array of actions for given changes set.\n// It simulates what `diff` function does.\n// Generated actions are:\n// - 'e' for 'equal' - when item at that position did not change,\n// - 'i' for 'insert' - when item at that position was inserted,\n// - 'r' for 'remove' - when item at that position was removed,\n// - 'a' for 'attribute' - when item at that position has it attributes changed.\n//\n// Example (assume that uppercase letters have bold attribute, compare with function code):\n//\n// children before:\tfooBAR\n// children after:\tfoxybAR\n//\n// changes: type: remove, offset: 1, howMany: 1\n//\t\t\ttype: insert, offset: 2, howMany: 2\n//\t\t\ttype: attribute, offset: 4, howMany: 1\n//\n// expected actions: equal (f), remove (o), equal (o), insert (x), insert (y), attribute (b), equal (A), equal (R)\n//\n// steps taken by th script:\n//\n// 1. change = \"type: remove, offset: 1, howMany: 1\"; offset = 0; oldChildrenHandled = 0\n//    1.1 between this change and the beginning is one not-changed node, fill with one equal action, one old child has been handled\n//    1.2 this change removes one node, add one remove action\n//    1.3 change last visited `offset` to 1\n//    1.4 since an old child has been removed, one more old child has been handled\n//    1.5 actions at this point are: equal, remove\n//\n// 2. change = \"type: insert, offset: 2, howMany: 2\"; offset = 1; oldChildrenHandled = 2\n//    2.1 between this change and previous change is one not-changed node, add equal action, another one old children has been handled\n//    2.2 this change inserts two nodes, add two insert actions\n//    2.3 change last visited offset to the end of the inserted range, that is 4\n//    2.4 actions at this point are: equal, remove, equal, insert, insert\n//\n// 3. change = \"type: attribute, offset: 4, howMany: 1\"; offset = 4, oldChildrenHandled = 3\n//    3.1 between this change and previous change are no not-changed nodes\n//    3.2 this change changes one node, add one attribute action\n//    3.3 change last visited `offset` to the end of change range, that is 5\n//    3.4 since an old child has been changed, one more old child has been handled\n//    3.5 actions at this point are: equal, remove, equal, insert, insert, attribute\n//\n// 4. after loop oldChildrenHandled = 4, oldChildrenLength = 6 (fooBAR is 6 characters)\n//    4.1 fill up with two equal actions\n//\n// The result actions are: equal, remove, equal, insert, insert, attribute, equal, equal.\nfunction _generateActionsFromChanges( oldChildrenLength, changes ) {\n\tconst actions = [];\n\n\tlet offset = 0;\n\tlet oldChildrenHandled = 0;\n\n\t// Go through all buffered changes.\n\tfor ( const change of changes ) {\n\t\t// First, fill \"holes\" between changes with \"equal\" actions.\n\t\tif ( change.offset > offset ) {\n\t\t\tactions.push( ...'e'.repeat( change.offset - offset ).split( '' ) );\n\n\t\t\toldChildrenHandled += change.offset - offset;\n\t\t}\n\n\t\t// Then, fill up actions accordingly to change type.\n\t\tif ( change.type == 'insert' ) {\n\t\t\tactions.push( ...'i'.repeat( change.howMany ).split( '' ) );\n\n\t\t\t// The last handled offset is after inserted range.\n\t\t\toffset = change.offset + change.howMany;\n\t\t} else if ( change.type == 'remove' ) {\n\t\t\tactions.push( ...'r'.repeat( change.howMany ).split( '' ) );\n\n\t\t\t// The last handled offset is at the position where the nodes were removed.\n\t\t\toffset = change.offset;\n\t\t\t// We removed `howMany` old nodes, update `oldChildrenHandled`.\n\t\t\toldChildrenHandled += change.howMany;\n\t\t} else {\n\t\t\tactions.push( ...'a'.repeat( change.howMany ).split( '' ) );\n\n\t\t\t// The last handled offset is at the position after the changed range.\n\t\t\toffset = change.offset + change.howMany;\n\t\t\t// We changed `howMany` old nodes, update `oldChildrenHandled`.\n\t\t\toldChildrenHandled += change.howMany;\n\t\t}\n\t}\n\n\t// Fill \"equal\" actions at the end of actions set. Use `oldChildrenHandled` to see how many children\n\t// has not been changed / removed at the end of their parent.\n\tif ( oldChildrenHandled < oldChildrenLength ) {\n\t\tactions.push( ...'e'.repeat( oldChildrenLength - oldChildrenHandled ).split( '' ) );\n\t}\n\n\treturn actions;\n}\n\n// Filter callback for Array.filter that filters out change entries that are in graveyard.\nfunction _changesInGraveyardFilter( entry ) {\n\tconst posInGy = entry.position && entry.position.root.rootName == '$graveyard';\n\tconst rangeInGy = entry.range && entry.range.root.rootName == '$graveyard';\n\n\treturn !posInGy && !rangeInGy;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/history\n */\n\n/**\n * `History` keeps the track of all the operations applied to the {@link module:engine/model/document~Document document}.\n */\nexport default class History {\n\t/**\n\t * Creates an empty History instance.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Operations added to the history.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/model/operation/operation~Operation>} module:engine/model/history~History#_operations\n\t\t */\n\t\tthis._operations = [];\n\n\t\t/**\n\t\t * Holds an information which {@link module:engine/model/operation/operation~Operation operation} undoes which\n\t\t * {@link module:engine/model/operation/operation~Operation operation}.\n\t\t *\n\t\t * Keys of the map are \"undoing operations\", that is operations that undone some other operations. For each key, the\n\t\t * value is an operation that has been undone by the \"undoing operation\".\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/model/history~History#_undoPairs\n\t\t */\n\t\tthis._undoPairs = new Map();\n\n\t\t/**\n\t\t * Holds all undone operations.\n\t\t *\n\t\t * @private\n\t\t * @member {Set.<module:engine/model/operation/operation~Operation>} module:engine/model/history~History#_undoneOperations\n\t\t */\n\t\tthis._undoneOperations = new Set();\n\t}\n\n\t/**\n\t * Adds an operation to the history.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to add.\n\t */\n\taddOperation( operation ) {\n\t\tif ( this._operations.includes( operation ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._operations.push( operation );\n\t}\n\n\t/**\n\t * Returns operations added to the history.\n\t *\n\t * @param {Number} [from=0] Base version from which operations should be returned (inclusive). Defaults to `0`, which means\n\t * that operations from the first one will be returned.\n\t * @param {Number} [to=Number.POSITIVE_INFINITY] Base version up to which operations should be returned (exclusive).\n\t * Defaults to `Number.POSITIVE_INFINITY` which means that operations up to the last one will be returned.\n\t * @returns {Iterable.<module:engine/model/operation/operation~Operation>} Operations added to the history.\n\t */\n\tgetOperations( from = 0, to = Number.POSITIVE_INFINITY ) {\n\t\tif ( from < 0 ) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn this._operations.slice( from, to );\n\t}\n\n\t/**\n\t * Returns operation from the history that bases on given `baseVersion`.\n\t *\n\t * @param {Number} baseVersion Base version of the operation to get.\n\t * @returns {module:engine/model/operation/operation~Operation|null} Operation with given base version or `null` if\n\t * there is no such operation in history.\n\t */\n\tgetOperation( baseVersion ) {\n\t\treturn this._operations[ baseVersion ];\n\t}\n\n\t/**\n\t * Marks in history that one operation is an operation that is undoing the other operation. By marking operation this way,\n\t * history is keeping more context information about operations, which helps in operational transformation.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} undoneOperation Operation which is undone by `undoingOperation`.\n\t * @param {module:engine/model/operation/operation~Operation} undoingOperation Operation which undoes `undoneOperation`.\n\t */\n\tsetOperationAsUndone( undoneOperation, undoingOperation ) {\n\t\tthis._undoPairs.set( undoingOperation, undoneOperation );\n\t\tthis._undoneOperations.add( undoneOperation );\n\t}\n\n\t/**\n\t * Checks whether given `operation` is undoing any other operation.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to check.\n\t * @returns {Boolean} `true` if given `operation` is undoing any other operation, `false` otherwise.\n\t */\n\tisUndoingOperation( operation ) {\n\t\treturn this._undoPairs.has( operation );\n\t}\n\n\t/**\n\t * Checks whether given `operation` has been undone by any other operation.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to check.\n\t * @returns {Boolean} `true` if given `operation` has been undone any other operation, `false` otherwise.\n\t */\n\tisUndoneOperation( operation ) {\n\t\treturn this._undoneOperations.has( operation );\n\t}\n\n\t/**\n\t * For given `undoingOperation`, returns the operation which has been undone by it.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} undoingOperation\n\t * @returns {module:engine/model/operation/operation~Operation|undefined} Operation that has been undone by given\n\t * `undoingOperation` or `undefined` if given `undoingOperation` is not undoing any other operation.\n\t */\n\tgetUndoneOperation( undoingOperation ) {\n\t\treturn this._undoPairs.get( undoingOperation );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Set of utils to handle unicode characters.\n *\n * @module utils/unicode\n */\n\n/**\n * Checks whether given `character` is a combining mark.\n *\n * @param {String} character Character to check.\n * @returns {Boolean}\n */\nexport function isCombiningMark( character ) {\n\treturn !!character && character.length == 1 && /[\\u0300-\\u036f\\u1ab0-\\u1aff\\u1dc0-\\u1dff\\u20d0-\\u20ff\\ufe20-\\ufe2f]/.test( character );\n}\n\n/**\n * Checks whether given `character` is a high half of surrogate pair.\n *\n * Using UTF-16 terminology, a surrogate pair denotes UTF-16 character using two UTF-8 characters. The surrogate pair\n * consist of high surrogate pair character followed by low surrogate pair character.\n *\n * @param {String} character Character to check.\n * @returns {Boolean}\n */\nexport function isHighSurrogateHalf( character ) {\n\treturn !!character && character.length == 1 && /[\\ud800-\\udbff]/.test( character );\n}\n\n/**\n * Checks whether given `character` is a low half of surrogate pair.\n *\n * Using UTF-16 terminology, a surrogate pair denotes UTF-16 character using two UTF-8 characters. The surrogate pair\n * consist of high surrogate pair character followed by low surrogate pair character.\n *\n * @param {String} character Character to check.\n * @returns {Boolean}\n */\nexport function isLowSurrogateHalf( character ) {\n\treturn !!character && character.length == 1 && /[\\udc00-\\udfff]/.test( character );\n}\n\n/**\n * Checks whether given offset in a string is inside a surrogate pair (between two surrogate halves).\n *\n * @param {String} string String to check.\n * @param {Number} offset Offset to check.\n * @returns {Boolean}\n */\nexport function isInsideSurrogatePair( string, offset ) {\n\treturn isHighSurrogateHalf( string.charAt( offset - 1 ) ) && isLowSurrogateHalf( string.charAt( offset ) );\n}\n\n/**\n * Checks whether given offset in a string is between base character and combining mark or between two combining marks.\n *\n * @param {String} string String to check.\n * @param {Number} offset Offset to check.\n * @returns {Boolean}\n */\nexport function isInsideCombinedSymbol( string, offset ) {\n\treturn isCombiningMark( string.charAt( offset ) );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/document\n */\n\nimport Differ from './differ';\nimport RootElement from './rootelement';\nimport History from './history';\nimport DocumentSelection from './documentselection';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { isInsideSurrogatePair, isInsideCombinedSymbol } from '@ckeditor/ckeditor5-utils/src/unicode';\nimport { clone } from 'lodash-es';\n\nconst graveyardName = '$graveyard';\n\n/**\n * Data model's document. It contains the model's structure, its selection and the history of changes.\n *\n * Read more about working with the model in\n * {@glink framework/guides/architecture/editing-engine#model introduction to the the editing engine's architecture}.\n *\n * Usually, the document contains just one {@link module:engine/model/document~Document#roots root element}, so\n * you can retrieve it by just calling {@link module:engine/model/document~Document#getRoot} without specifying its name:\n *\n *\t\tmodel.document.getRoot(); // -> returns the main root\n *\n * However, the document may contain multiple roots – e.g. when the editor has multiple editable areas\n * (e.g. a title and a body of a message).\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Document {\n\t/**\n\t * Creates an empty document instance with no {@link #roots} (other than\n\t * the {@link #graveyard graveyard root}).\n\t */\n\tconstructor( model ) {\n\t\t/**\n\t\t * The {@link module:engine/model/model~Model model} that the document is a part of.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * The document version. It starts from `0` and every operation increases the version number. It is used to ensure that\n\t\t * operations are applied on a proper document version.\n\t\t *\n\t\t * If the {@link module:engine/model/operation/operation~Operation#baseVersion base version} does not match the document version,\n\t\t * a {@link module:utils/ckeditorerror~CKEditorError model-document-applyOperation-wrong-version} error is thrown.\n\t\t *\n\t\t * @readonly\n\t\t * @type {Number}\n\t\t */\n\t\tthis.version = 0;\n\n\t\t/**\n\t\t * The document's history.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/history~History}\n\t\t */\n\t\tthis.history = new History( this );\n\n\t\t/**\n\t\t * The selection in this document.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/documentselection~DocumentSelection}\n\t\t */\n\t\tthis.selection = new DocumentSelection( this );\n\n\t\t/**\n\t\t * A list of roots that are owned and managed by this document. Use {@link #createRoot} and\n\t\t * {@link #getRoot} to manipulate it.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/collection~Collection}\n\t\t */\n\t\tthis.roots = new Collection( { idProperty: 'rootName' } );\n\n\t\t/**\n\t\t * The model differ object. Its role is to buffer changes done on the model document and then calculate a diff of those changes.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/model/differ~Differ}\n\t\t */\n\t\tthis.differ = new Differ( model.markers );\n\n\t\t/**\n\t\t * Post-fixer callbacks registered to the model document.\n\t\t *\n\t\t * @private\n\t\t * @type {Set.<Function>}\n\t\t */\n\t\tthis._postFixers = new Set();\n\n\t\t/**\n\t\t * A boolean indicates whether the selection has changed until\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._hasSelectionChangedFromTheLastChangeBlock = false;\n\n\t\t// Graveyard tree root. Document always have a graveyard root, which stores removed nodes.\n\t\tthis.createRoot( '$root', graveyardName );\n\n\t\t// First, if the operation is a document operation check if it's base version is correct.\n\t\tthis.listenTo( model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( operation.isDocumentOperation && operation.baseVersion !== this.version ) {\n\t\t\t\t/**\n\t\t\t\t * Only operations with matching versions can be applied.\n\t\t\t\t *\n\t\t\t\t * @error document-applyOperation-wrong-version\n\t\t\t\t * @param {module:engine/model/operation/operation~Operation} operation\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ operation }\n\t\t\t\t);\n\t\t\t}\n\t\t}, { priority: 'highest' } );\n\n\t\t// Then, still before an operation is applied on model, buffer the change in differ.\n\t\tthis.listenTo( model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( operation.isDocumentOperation ) {\n\t\t\t\tthis.differ.bufferOperation( operation );\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\n\t\t// After the operation is applied, bump document's version and add the operation to the history.\n\t\tthis.listenTo( model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( operation.isDocumentOperation ) {\n\t\t\t\tthis.version++;\n\t\t\t\tthis.history.addOperation( operation );\n\t\t\t}\n\t\t}, { priority: 'low' } );\n\n\t\t// Listen to selection changes. If selection changed, mark it.\n\t\tthis.listenTo( this.selection, 'change', () => {\n\t\t\tthis._hasSelectionChangedFromTheLastChangeBlock = true;\n\t\t} );\n\n\t\t// Buffer marker changes.\n\t\t// This is not covered in buffering operations because markers may change outside of them (when they\n\t\t// are modified using `model.markers` collection, not through `MarkerOperation`).\n\t\tthis.listenTo( model.markers, 'update', ( evt, marker, oldRange, newRange ) => {\n\t\t\t// Whenever marker is updated, buffer that change.\n\t\t\tthis.differ.bufferMarkerChange( marker.name, oldRange, newRange, marker.affectsData );\n\n\t\t\tif ( oldRange === null ) {\n\t\t\t\t// If this is a new marker, add a listener that will buffer change whenever marker changes.\n\t\t\t\tmarker.on( 'change', ( evt, oldRange ) => {\n\t\t\t\t\tthis.differ.bufferMarkerChange( marker.name, oldRange, marker.getRange(), marker.affectsData );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * The graveyard tree root. A document always has a graveyard root that stores removed nodes.\n\t *\n\t * @readonly\n\t * @member {module:engine/model/rootelement~RootElement}\n\t */\n\tget graveyard() {\n\t\treturn this.getRoot( graveyardName );\n\t}\n\n\t/**\n\t * Creates a new root.\n\t *\n\t * @param {String} [elementName='$root'] The element name. Defaults to `'$root'` which also has some basic schema defined\n\t * (`$block`s are allowed inside the `$root`). Make sure to define a proper schema if you use a different name.\n\t * @param {String} [rootName='main'] A unique root name.\n\t * @returns {module:engine/model/rootelement~RootElement} The created root.\n\t */\n\tcreateRoot( elementName = '$root', rootName = 'main' ) {\n\t\tif ( this.roots.get( rootName ) ) {\n\t\t\t/**\n\t\t\t * A root with the specified name already exists.\n\t\t\t *\n\t\t\t * @error model-document-createRoot-name-exists\n\t\t\t * @param {module:engine/model/document~Document} doc\n\t\t\t * @param {String} name\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-document-createRoot-name-exists: Root with specified name already exists.',\n\t\t\t\tthis,\n\t\t\t\t{ name: rootName }\n\t\t\t);\n\t\t}\n\n\t\tconst root = new RootElement( this, elementName, rootName );\n\t\tthis.roots.add( root );\n\n\t\treturn root;\n\t}\n\n\t/**\n\t * Removes all event listeners set by the document instance.\n\t */\n\tdestroy() {\n\t\tthis.selection.destroy();\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Returns a root by its name.\n\t *\n\t * @param {String} [name='main'] A unique root name.\n\t * @returns {module:engine/model/rootelement~RootElement|null} The root registered under a given name or `null` when\n\t * there is no root with the given name.\n\t */\n\tgetRoot( name = 'main' ) {\n\t\treturn this.roots.get( name );\n\t}\n\n\t/**\n\t * Returns an array with names of all roots (without the {@link #graveyard}) added to the document.\n\t *\n\t * @returns {Array.<String>} Roots names.\n\t */\n\tgetRootNames() {\n\t\treturn Array.from( this.roots, root => root.rootName ).filter( name => name != graveyardName );\n\t}\n\n\t/**\n\t * Used to register a post-fixer callback. A post-fixer mechanism guarantees that the features\n\t * will operate on a correct model state.\n\t *\n\t * An execution of a feature may lead to an incorrect document tree state. The callbacks are used to fix the document tree after\n\t * it has changed. Post-fixers are fired just after all changes from the outermost change block were applied but\n\t * before the {@link module:engine/model/document~Document#event:change change event} is fired. If a post-fixer callback made\n\t * a change, it should return `true`. When this happens, all post-fixers are fired again to check if something else should\n\t * not be fixed in the new document tree state.\n\t *\n\t * As a parameter, a post-fixer callback receives a {@link module:engine/model/writer~Writer writer} instance connected with the\n\t * executed changes block. Thanks to that, all changes done by the callback will be added to the same\n\t * {@link module:engine/model/batch~Batch batch} (and undo step) as the original changes. This makes post-fixer changes transparent\n\t * for the user.\n\t *\n\t * An example of a post-fixer is a callback that checks if all the data were removed from the editor. If so, the\n\t * callback should add an empty paragraph so that the editor is never empty:\n\t *\n\t *\t\tdocument.registerPostFixer( writer => {\n\t *\t\t\tconst changes = document.differ.getChanges();\n\t *\n\t *\t\t\t// Check if the changes lead to an empty root in the editor.\n\t *\t\t\tfor ( const entry of changes ) {\n\t *\t\t\t\tif ( entry.type == 'remove' && entry.position.root.isEmpty ) {\n\t *\t\t\t\t\twriter.insertElement( 'paragraph', entry.position.root, 0 );\n\t *\n\t *\t\t\t\t\t// It is fine to return early, even if multiple roots would need to be fixed.\n\t *\t\t\t\t\t// All post-fixers will be fired again, so if there are more empty roots, those will be fixed, too.\n\t *\t\t\t\t\treturn true;\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * @param {Function} postFixer\n\t */\n\tregisterPostFixer( postFixer ) {\n\t\tthis._postFixers.add( postFixer );\n\t}\n\n\t/**\n\t * A custom `toJSON()` method to solve child-parent circular dependencies.\n\t *\n\t * @returns {Object} A clone of this object with the document property changed to a string.\n\t */\n\ttoJSON() {\n\t\tconst json = clone( this );\n\n\t\t// Due to circular references we need to remove parent reference.\n\t\tjson.selection = '[engine.model.DocumentSelection]';\n\t\tjson.model = '[engine.model.Model]';\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Check if there were any changes done on document, and if so, call post-fixers,\n\t * fire `change` event for features and conversion and then reset the differ.\n\t * Fire `change:data` event when at least one operation or buffered marker changes the data.\n\t *\n\t * @protected\n\t * @fires change\n\t * @fires change:data\n\t * @param {module:engine/model/writer~Writer} writer The writer on which post-fixers will be called.\n\t */\n\t_handleChangeBlock( writer ) {\n\t\tif ( this._hasDocumentChangedFromTheLastChangeBlock() ) {\n\t\t\tthis._callPostFixers( writer );\n\n\t\t\t// Refresh selection attributes according to the final position in the model after the change.\n\t\t\tthis.selection.refresh();\n\n\t\t\tif ( this.differ.hasDataChanges() ) {\n\t\t\t\tthis.fire( 'change:data', writer.batch );\n\t\t\t} else {\n\t\t\t\tthis.fire( 'change', writer.batch );\n\t\t\t}\n\n\t\t\t// Theoretically, it is not necessary to refresh selection after change event because\n\t\t\t// post-fixers are the last who should change the model, but just in case...\n\t\t\tthis.selection.refresh();\n\n\t\t\tthis.differ.reset();\n\t\t}\n\n\t\tthis._hasSelectionChangedFromTheLastChangeBlock = false;\n\t}\n\n\t/**\n\t * Returns whether there is a buffered change or if the selection has changed from the last\n\t * {@link module:engine/model/model~Model#enqueueChange `enqueueChange()` block}\n\t * or {@link module:engine/model/model~Model#change `change()` block}.\n\t *\n\t * @protected\n\t * @returns {Boolean} Returns `true` if document has changed from the last `change()` or `enqueueChange()` block.\n\t */\n\t_hasDocumentChangedFromTheLastChangeBlock() {\n\t\treturn !this.differ.isEmpty || this._hasSelectionChangedFromTheLastChangeBlock;\n\t}\n\n\t/**\n\t * Returns the default root for this document which is either the first root that was added to the document using\n\t * {@link #createRoot} or the {@link #graveyard graveyard root} if no other roots were created.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/rootelement~RootElement} The default root for this document.\n\t */\n\t_getDefaultRoot() {\n\t\tfor ( const root of this.roots ) {\n\t\t\tif ( root !== this.graveyard ) {\n\t\t\t\treturn root;\n\t\t\t}\n\t\t}\n\n\t\treturn this.graveyard;\n\t}\n\n\t/**\n\t * Returns the default range for this selection. The default range is a collapsed range that starts and ends\n\t * at the beginning of this selection's document {@link #_getDefaultRoot default root}.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/range~Range}\n\t */\n\t_getDefaultRange() {\n\t\tconst defaultRoot = this._getDefaultRoot();\n\t\tconst model = this.model;\n\t\tconst schema = model.schema;\n\n\t\t// Find the first position where the selection can be put.\n\t\tconst position = model.createPositionFromPath( defaultRoot, [ 0 ] );\n\t\tconst nearestRange = schema.getNearestSelectionRange( position );\n\n\t\t// If valid selection range is not found - return range collapsed at the beginning of the root.\n\t\treturn nearestRange || model.createRange( position );\n\t}\n\n\t/**\n\t * Checks whether a given {@link module:engine/model/range~Range range} is a valid range for\n\t * the {@link #selection document's selection}.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range A range to check.\n\t * @returns {Boolean} `true` if `range` is valid, `false` otherwise.\n\t */\n\t_validateSelectionRange( range ) {\n\t\treturn validateTextNodePosition( range.start ) && validateTextNodePosition( range.end );\n\t}\n\n\t/**\n\t * Performs post-fixer loops. Executes post-fixer callbacks as long as none of them has done any changes to the model.\n\t *\n\t * @private\n\t * @param {module:engine/model/writer~Writer} writer The writer on which post-fixer callbacks will be called.\n\t */\n\t_callPostFixers( writer ) {\n\t\tlet wasFixed = false;\n\n\t\tdo {\n\t\t\tfor ( const callback of this._postFixers ) {\n\t\t\t\t// Ensure selection attributes are up to date before each post-fixer.\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/1673.\n\t\t\t\t//\n\t\t\t\t// It might be good to refresh the selection after each operation but at the moment it leads\n\t\t\t\t// to losing attributes for composition or and spell checking\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-typing/issues/188\n\t\t\t\tthis.selection.refresh();\n\n\t\t\t\twasFixed = callback( writer );\n\n\t\t\t\tif ( wasFixed ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} while ( wasFixed );\n\t}\n\n\t/**\n\t * Fired after each {@link module:engine/model/model~Model#enqueueChange `enqueueChange()` block} or the outermost\n\t * {@link module:engine/model/model~Model#change `change()` block} was executed and the document was changed\n\t * during that block's execution.\n\t *\n\t * The changes which this event will cover include:\n\t *\n\t * * document structure changes,\n\t * * selection changes,\n\t * * marker changes.\n\t *\n\t * If you want to be notified about all these changes, then simply listen to this event like this:\n\t *\n\t *\t\tmodel.document.on( 'change', () => {\n\t *\t\t\tconsole.log( 'The document has changed!' );\n\t *\t\t} );\n\t *\n\t * If, however, you only want to be notified about the data changes, then use the\n\t * {@link module:engine/model/document~Document#event:change:data change:data} event,\n\t * which is fired for document structure changes and marker changes (which affects the data).\n\t *\n\t *\t\tmodel.document.on( 'change:data', () => {\n\t *\t\t\tconsole.log( 'The data has changed!' );\n\t *\t\t} );\n\t *\n\t * @event change\n\t * @param {module:engine/model/batch~Batch} batch The batch that was used in the executed changes block.\n\t */\n\n\t/**\n\t * It is a narrower version of the {@link #event:change} event. It is fired for changes which\n\t * affect the editor data. This is:\n\t *\n\t * * document structure changes,\n\t * * marker changes (which affects the data).\n\t *\n\t * If you want to be notified about the data changes, then listen to this event:\n\t *\n\t *\t\tmodel.document.on( 'change:data', () => {\n\t *\t\t\tconsole.log( 'The data has changed!' );\n\t *\t\t} );\n\t *\n\t * If you would like to listen to all document changes, then check out the\n\t * {@link module:engine/model/document~Document#event:change change} event.\n\t *\n\t * @event change:data\n\t * @param {module:engine/model/batch~Batch} batch The batch that was used in the executed changes block.\n\t */\n}\n\nmix( Document, EmitterMixin );\n\n// Checks whether given range boundary position is valid for document selection, meaning that is not between\n// unicode surrogate pairs or base character and combining marks.\nfunction validateTextNodePosition( rangeBoundary ) {\n\tconst textNode = rangeBoundary.textNode;\n\n\tif ( textNode ) {\n\t\tconst data = textNode.data;\n\t\tconst offset = rangeBoundary.offset - textNode.startOffset;\n\n\t\treturn !isInsideSurrogatePair( data, offset ) && !isInsideCombinedSymbol( data, offset );\n\t}\n\n\treturn true;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/markercollection\n */\n\nimport LiveRange from './liverange';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The collection of all {@link module:engine/model/markercollection~Marker markers} attached to the document.\n * It lets you {@link module:engine/model/markercollection~MarkerCollection#get get} markers or track them using\n * {@link module:engine/model/markercollection~MarkerCollection#event:update} event.\n *\n * To create, change or remove makers use {@link module:engine/model/writer~Writer model writers'} methods:\n * {@link module:engine/model/writer~Writer#addMarker} or {@link module:engine/model/writer~Writer#removeMarker}. Since\n * the writer is the only proper way to change the data model it is not possible to change markers directly using this\n * collection. All markers created by the writer will be automatically added to this collection.\n *\n * By default there is one marker collection available as {@link module:engine/model/model~Model#markers model property}.\n *\n * @see module:engine/model/markercollection~Marker\n */\nexport default class MarkerCollection {\n\t/**\n\t * Creates a markers collection.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Stores {@link ~Marker markers} added to the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} #_markers\n\t\t */\n\t\tthis._markers = new Map();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link ~Marker markers} added to the collection.\n\t *\n\t * @returns {Iterable}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._markers.values();\n\t}\n\n\t/**\n\t * Checks if marker with given `markerName` is in the collection.\n\t *\n\t * @param {String} markerName Marker name.\n\t * @returns {Boolean} `true` if marker with given `markerName` is in the collection, `false` otherwise.\n\t */\n\thas( markerName ) {\n\t\treturn this._markers.has( markerName );\n\t}\n\n\t/**\n\t * Returns {@link ~Marker marker} with given `markerName`.\n\t *\n\t * @param {String} markerName Name of marker to get.\n\t * @returns {module:engine/model/markercollection~Marker|null} Marker with given name or `null` if such marker was\n\t * not added to the collection.\n\t */\n\tget( markerName ) {\n\t\treturn this._markers.get( markerName ) || null;\n\t}\n\n\t/**\n\t * Creates and adds a {@link ~Marker marker} to the `MarkerCollection` with given name on given\n\t * {@link module:engine/model/range~Range range}.\n\t *\n\t * If `MarkerCollection` already had a marker with given name (or {@link ~Marker marker} was passed), the marker in\n\t * collection is updated and {@link module:engine/model/markercollection~MarkerCollection#event:update} event is fired\n\t * but only if there was a change (marker range or {@link module:engine/model/markercollection~Marker#managedUsingOperations}\n\t * flag has changed.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String|module:engine/model/markercollection~Marker} markerOrName Name of marker to set or marker instance to update.\n\t * @param {module:engine/model/range~Range} range Marker range.\n\t * @param {Boolean} [managedUsingOperations=false] Specifies whether the marker is managed using operations.\n\t * @param {Boolean} [affectsData=false] Specifies whether the marker affects the data produced by the data pipeline\n\t * (is persisted in the editor's data).\n\t * @returns {module:engine/model/markercollection~Marker} `Marker` instance which was added or updated.\n\t */\n\t_set( markerOrName, range, managedUsingOperations = false, affectsData = false ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\t\tconst oldMarker = this._markers.get( markerName );\n\n\t\tif ( oldMarker ) {\n\t\t\tconst oldRange = oldMarker.getRange();\n\t\t\tlet hasChanged = false;\n\n\t\t\tif ( !oldRange.isEqual( range ) ) {\n\t\t\t\toldMarker._attachLiveRange( LiveRange.fromRange( range ) );\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( managedUsingOperations != oldMarker.managedUsingOperations ) {\n\t\t\t\toldMarker._managedUsingOperations = managedUsingOperations;\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( typeof affectsData === 'boolean' && affectsData != oldMarker.affectsData ) {\n\t\t\t\toldMarker._affectsData = affectsData;\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( hasChanged ) {\n\t\t\t\tthis.fire( 'update:' + markerName, oldMarker, oldRange, range );\n\t\t\t}\n\n\t\t\treturn oldMarker;\n\t\t}\n\n\t\tconst liveRange = LiveRange.fromRange( range );\n\t\tconst marker = new Marker( markerName, liveRange, managedUsingOperations, affectsData );\n\n\t\tthis._markers.set( markerName, marker );\n\t\tthis.fire( 'update:' + markerName, marker, null, range );\n\n\t\treturn marker;\n\t}\n\n\t/**\n\t * Removes given {@link ~Marker marker} or a marker with given name from the `MarkerCollection`.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String} markerOrName Marker or name of a marker to remove.\n\t * @returns {Boolean} `true` if marker was found and removed, `false` otherwise.\n\t */\n\t_remove( markerOrName ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\t\tconst oldMarker = this._markers.get( markerName );\n\n\t\tif ( oldMarker ) {\n\t\t\tthis._markers.delete( markerName );\n\t\t\tthis.fire( 'update:' + markerName, oldMarker, oldMarker.getRange(), null );\n\n\t\t\tthis._destroyMarker( oldMarker );\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Fires an {@link module:engine/model/markercollection~MarkerCollection#event:update} event for the given {@link ~Marker marker}\n\t * but does not change the marker. Useful to force {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher downcast\n\t * conversion} for the marker.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String} markerOrName Marker or name of a marker to refresh.\n\t */\n\t_refresh( markerOrName ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\t\tconst marker = this._markers.get( markerName );\n\n\t\tif ( !marker ) {\n\t\t\tthrow new CKEditorError( 'markercollection-refresh-marker-not-exists: Marker with provided name does not exists.', this );\n\t\t}\n\n\t\tconst range = marker.getRange();\n\n\t\tthis.fire( 'update:' + markerName, marker, range, range, marker.managedUsingOperations, marker.affectsData );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over all markers, which ranges contain given {@link module:engine/model/position~Position position}.\n\t *\n\t * @param {module:engine/model/position~Position} position\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersAtPosition( position ) {\n\t\tfor ( const marker of this ) {\n\t\t\tif ( marker.getRange().containsPosition( position ) ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns iterator that iterates over all markers, which intersects with given {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {module:engine/model/range~Range} range\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersIntersectingRange( range ) {\n\t\tfor ( const marker of this ) {\n\t\t\tif ( marker.getRange().getIntersection( range ) !== null ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroys marker collection and all markers inside it.\n\t */\n\tdestroy() {\n\t\tfor ( const marker of this._markers.values() ) {\n\t\t\tthis._destroyMarker( marker );\n\t\t}\n\n\t\tthis._markers = null;\n\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Iterates over all markers that starts with given `prefix`.\n\t *\n\t *\t\tconst markerFooA = markersCollection.set( 'foo:a', rangeFooA );\n\t *\t\tconst markerFooB = markersCollection.set( 'foo:b', rangeFooB );\n\t *\t\tconst markerBarA = markersCollection.set( 'bar:a', rangeBarA );\n\t *\t\tconst markerFooBarA = markersCollection.set( 'foobar:a', rangeFooBarA );\n\t *\t\tArray.from( markersCollection.getMarkersGroup( 'foo' ) ); // [ markerFooA, markerFooB ]\n\t *\t\tArray.from( markersCollection.getMarkersGroup( 'a' ) ); // []\n\t *\n\t * @param prefix\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersGroup( prefix ) {\n\t\tfor ( const marker of this._markers.values() ) {\n\t\t\tif ( marker.name.startsWith( prefix + ':' ) ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroys the marker.\n\t *\n\t * @private\n\t * @param {module:engine/model/markercollection~Marker} marker Marker to destroy.\n\t */\n\t_destroyMarker( marker ) {\n\t\tmarker.stopListening();\n\t\tmarker._detachLiveRange();\n\t}\n\n\t/**\n\t * Fired whenever marker is added, updated or removed from `MarkerCollection`.\n\t *\n\t * @event update\n\t * @param {module:engine/model/markercollection~Marker} marker Updated Marker.\n\t * @param {module:engine/model/range~Range|null} oldRange Marker range before the update. When is not defined it\n\t * means that marker is just added.\n\t * @param {module:engine/model/range~Range|null} newRange Marker range after update. When is not defined it\n\t * means that marker is just removed.\n\t */\n}\n\nmix( MarkerCollection, EmitterMixin );\n\n/**\n * `Marker` is a continuous parts of model (like a range), is named and represent some kind of information about marked\n * part of model document. In contrary to {@link module:engine/model/node~Node nodes}, which are building blocks of\n * model document tree, markers are not stored directly in document tree but in\n * {@link module:engine/model/model~Model#markers model markers' collection}. Still, they are document data, by giving\n * additional meaning to the part of a model document between marker start and marker end.\n *\n * In this sense, markers are similar to adding and converting attributes on nodes. The difference is that attribute is\n * connected with a given node (e.g. a character is bold no matter if it gets moved or content around it changes).\n * Markers on the other hand are continuous ranges and are characterized by their start and end position. This means that\n * any character in the marker is marked by the marker. For example, if a character is moved outside of marker it stops being\n * \"special\" and the marker is shrunk. Similarly, when a character is moved into the marker from other place in document\n * model, it starts being \"special\" and the marker is enlarged.\n *\n * Another upside of markers is that finding marked part of document is fast and easy. Using attributes to mark some nodes\n * and then trying to find that part of document would require traversing whole document tree. Marker gives instant access\n * to the range which it is marking at the moment.\n *\n * Markers are built from a name and a range.\n *\n * Range of the marker is updated automatically when document changes, using\n * {@link module:engine/model/liverange~LiveRange live range} mechanism.\n *\n * Name is used to group and identify markers. Names have to be unique, but markers can be grouped by\n * using common prefixes, separated with `:`, for example: `user:john` or `search:3`. That's useful in term of creating\n * namespaces for custom elements (e.g. comments, highlights). You can use this prefixes in\n * {@link module:engine/model/markercollection~MarkerCollection#event:update} listeners to listen on changes in a group of markers.\n * For instance: `model.markers.on( 'set:user', callback );` will be called whenever any `user:*` markers changes.\n *\n * There are two types of markers.\n *\n * 1. Markers managed directly, without using operations. They are added directly by {@link module:engine/model/writer~Writer}\n * to the {@link module:engine/model/markercollection~MarkerCollection} without any additional mechanism. They can be used\n * as bookmarks or visual markers. They are great for showing results of the find, or select link when the focus is in the input.\n *\n * 1. Markers managed using operations. These markers are also stored in {@link module:engine/model/markercollection~MarkerCollection}\n * but changes in these markers is managed the same way all other changes in the model structure - using operations.\n * Therefore, they are handled in the undo stack and synchronized between clients if the collaboration plugin is enabled.\n * This type of markers is useful for solutions like spell checking or comments.\n *\n * Both type of them should be added / updated by {@link module:engine/model/writer~Writer#addMarker}\n * and removed by {@link module:engine/model/writer~Writer#removeMarker} methods.\n *\n *\t\tmodel.change( ( writer ) => {\n * \t\t\tconst marker = writer.addMarker( name, { range, usingOperation: true } );\n *\n * \t\t\t// ...\n *\n * \t\t\twriter.removeMarker( marker );\n *\t\t} );\n *\n * See {@link module:engine/model/writer~Writer} to find more examples.\n *\n * Since markers need to track change in the document, for efficiency reasons, it is best to create and keep as little\n * markers as possible and remove them as soon as they are not needed anymore.\n *\n * Markers can be downcasted and upcasted.\n *\n * Markers downcast happens on {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker} and\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removeMarker} events.\n * Use {@link module:engine/conversion/downcasthelpers downcast converters} or attach a custom converter to mentioned events.\n * For {@link module:engine/controller/datacontroller~DataController data pipeline}, marker should be downcasted to an element.\n * Then, it can be upcasted back to a marker. Again, use {@link module:engine/conversion/upcasthelpers upcast converters} or\n * attach a custom converter to {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element}.\n *\n * `Marker` instances are created and destroyed only by {@link ~MarkerCollection MarkerCollection}.\n */\nclass Marker {\n\t/**\n\t * Creates a marker instance.\n\t *\n\t * @param {String} name Marker name.\n\t * @param {module:engine/model/liverange~LiveRange} liveRange Range marked by the marker.\n\t * @param {Boolean} managedUsingOperations Specifies whether the marker is managed using operations.\n\t * @param {Boolean} affectsData Specifies whether the marker affects the data produced by the data pipeline\n\t * (is persisted in the editor's data).\n\t */\n\tconstructor( name, liveRange, managedUsingOperations, affectsData ) {\n\t\t/**\n\t\t * Marker's name.\n\t\t *\n\t\t * @readonly\n\t\t * @type {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Range marked by the marker.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:engine/model/liverange~LiveRange}\n\t\t */\n\t\tthis._liveRange = this._attachLiveRange( liveRange );\n\n\t\t/**\n\t\t * Flag indicates if the marker is managed using operations or not.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._managedUsingOperations = managedUsingOperations;\n\n\t\t/**\n\t\t * Specifies whether the marker affects the data produced by the data pipeline\n\t\t * (is persisted in the editor's data).\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._affectsData = affectsData;\n\t}\n\n\t/**\n\t * A value indicating if the marker is managed using operations.\n\t * See {@link ~Marker marker class description} to learn more about marker types.\n\t * See {@link module:engine/model/writer~Writer#addMarker}.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget managedUsingOperations() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._managedUsingOperations;\n\t}\n\n\t/**\n\t * A value indicating if the marker changes the data.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget affectsData() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._affectsData;\n\t}\n\n\t/**\n\t * Returns current marker start position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetStart() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._liveRange.start.clone();\n\t}\n\n\t/**\n\t * Returns current marker end position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetEnd() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._liveRange.end.clone();\n\t}\n\n\t/**\n\t * Returns a range that represents the current state of the marker.\n\t *\n\t * Keep in mind that returned value is a {@link module:engine/model/range~Range Range}, not a\n\t * {@link module:engine/model/liverange~LiveRange LiveRange}. This means that it is up-to-date and relevant only\n\t * until next model document change. Do not store values returned by this method. Instead, store {@link ~Marker#name}\n\t * and get `Marker` instance from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection} every\n\t * time there is a need to read marker properties. This will guarantee that the marker has not been removed and\n\t * that it's data is up-to-date.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tgetRange() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._liveRange.toRange();\n\t}\n\n\t/**\n\t * Binds new live range to the marker and detach the old one if is attached.\n\t *\n\t * @protected\n\t * @param {module:engine/model/liverange~LiveRange} liveRange Live range to attach\n\t * @returns {module:engine/model/liverange~LiveRange} Attached live range.\n\t */\n\t_attachLiveRange( liveRange ) {\n\t\tif ( this._liveRange ) {\n\t\t\tthis._detachLiveRange();\n\t\t}\n\n\t\t// Delegating does not work with namespaces. Alternatively, we could delegate all events (using `*`).\n\t\tliveRange.delegate( 'change:range' ).to( this );\n\t\tliveRange.delegate( 'change:content' ).to( this );\n\n\t\tthis._liveRange = liveRange;\n\n\t\treturn liveRange;\n\t}\n\n\t/**\n\t * Unbinds and destroys currently attached live range.\n\t *\n\t * @protected\n\t */\n\t_detachLiveRange() {\n\t\tthis._liveRange.stopDelegating( 'change:range', this );\n\t\tthis._liveRange.stopDelegating( 'change:content', this );\n\t\tthis._liveRange.detach();\n\t\tthis._liveRange = null;\n\t}\n\n\t/**\n\t * Fired whenever {@link ~Marker#_liveRange marker range} is changed due to changes on {@link module:engine/model/document~Document}.\n\t * This is a delegated {@link module:engine/model/liverange~LiveRange#event:change:range LiveRange change:range event}.\n\t *\n\t * When marker is removed from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection},\n\t * all event listeners listening to it should be removed. It is best to do it on\n\t * {@link module:engine/model/markercollection~MarkerCollection#event:update MarkerCollection update event}.\n\t *\n\t * @see module:engine/model/liverange~LiveRange#event:change:range\n\t * @event change:range\n\t * @param {module:engine/model/range~Range} oldRange\n\t * @param {Object} data\n\t */\n\n\t/**\n\t * Fired whenever change on {@link module:engine/model/document~Document} is done inside {@link ~Marker#_liveRange marker range}.\n\t * This is a delegated {@link module:engine/model/liverange~LiveRange#event:change:content LiveRange change:content event}.\n\t *\n\t * When marker is removed from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection},\n\t * all event listeners listening to it should be removed. It is best to do it on\n\t * {@link module:engine/model/markercollection~MarkerCollection#event:update MarkerCollection update event}.\n\t *\n\t * @see module:engine/model/liverange~LiveRange#event:change:content\n\t * @event change:content\n\t * @param {module:engine/model/range~Range} oldRange\n\t * @param {Object} data\n\t */\n}\n\nmix( Marker, EmitterMixin );\n\n/**\n * Cannot use a {@link module:engine/model/markercollection~MarkerCollection#destroy destroyed marker} instance.\n *\n * @error marker-destroyed\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/insertcontent\n */\n\nimport Position from '../position';\nimport LivePosition from '../liveposition';\nimport Element from '../element';\nimport Range from '../range';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\nimport DocumentSelection from '../documentselection';\nimport Selection from '../selection';\n\n/**\n * Inserts content into the editor (specified selection) as one would expect the paste\n * functionality to work.\n *\n * If an instance of {@link module:engine/model/selection~Selection} is passed as `selectable` it will be modified\n * to the insertion selection (equal to a range to be selected after insertion).\n *\n * If `selectable` is not passed, the content will be inserted using the current selection of the model document.\n *\n * **Note:** Use {@link module:engine/model/model~Model#insertContent} instead of this function.\n * This function is only exposed to be reusable in algorithms which change the {@link module:engine/model/model~Model#insertContent}\n * method's behavior.\n *\n * @param {module:engine/model/model~Model} model The model in context of which the insertion\n * should be performed.\n * @param {module:engine/model/documentfragment~DocumentFragment|module:engine/model/item~Item} content The content to insert.\n * @param {module:engine/model/selection~Selectable} [selectable=model.document.selection]\n * Selection into which the content should be inserted.\n * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n * @returns {module:engine/model/range~Range} Range which contains all the performed changes. This is a range that, if removed,\n * would return the model to the state before the insertion. If no changes were preformed by `insertContent`, returns a range collapsed\n * at the insertion position.\n */\nexport default function insertContent( model, content, selectable, placeOrOffset ) {\n\treturn model.change( writer => {\n\t\tlet selection;\n\n\t\tif ( !selectable ) {\n\t\t\tselection = model.document.selection;\n\t\t} else if ( selectable instanceof Selection || selectable instanceof DocumentSelection ) {\n\t\t\tselection = selectable;\n\t\t} else {\n\t\t\tselection = writer.createSelection( selectable, placeOrOffset );\n\t\t}\n\n\t\tconst insertionPosition = selection.getFirstPosition();\n\n\t\tif ( !selection.isCollapsed ) {\n\t\t\tmodel.deleteContent( selection, { doNotAutoparagraph: true } );\n\t\t}\n\n\t\tconst insertion = new Insertion( model, writer, insertionPosition );\n\n\t\tlet nodesToInsert;\n\n\t\tif ( content.is( 'documentFragment' ) ) {\n\t\t\tnodesToInsert = content.getChildren();\n\t\t} else {\n\t\t\tnodesToInsert = [ content ];\n\t\t}\n\n\t\tinsertion.handleNodes( nodesToInsert, {\n\t\t\t// The set of children being inserted is the only set in this context\n\t\t\t// so it's the first and last (it's a hack ;)).\n\t\t\tisFirst: true,\n\t\t\tisLast: true\n\t\t} );\n\n\t\tconst newRange = insertion.getSelectionRange();\n\n\t\t/* istanbul ignore else */\n\t\tif ( newRange ) {\n\t\t\tif ( selection instanceof DocumentSelection ) {\n\t\t\t\twriter.setSelection( newRange );\n\t\t\t} else {\n\t\t\t\tselection.setTo( newRange );\n\t\t\t}\n\t\t} else {\n\t\t\t// We are not testing else because it's a safe check for unpredictable edge cases:\n\t\t\t// an insertion without proper range to select.\n\n\t\t\t/**\n\t\t\t * Cannot determine a proper selection range after insertion.\n\t\t\t *\n\t\t\t * @warning insertcontent-no-range\n\t\t\t */\n\t\t\tlog.warn( 'insertcontent-no-range: Cannot determine a proper selection range after insertion.' );\n\t\t}\n\n\t\tconst affectedRange = insertion.getAffectedRange() || model.createRange( insertionPosition );\n\n\t\tinsertion.destroy();\n\n\t\treturn affectedRange;\n\t} );\n}\n\n/**\n * Utility class for performing content insertion.\n *\n * @private\n */\nclass Insertion {\n\tconstructor( model, writer, position ) {\n\t\t/**\n\t\t * The model in context of which the insertion should be performed.\n\t\t *\n\t\t * @member {module:engine/model~Model} #model\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * Batch to which operations will be added.\n\t\t *\n\t\t * @member {module:engine/controller/writer~Batch} #writer\n\t\t */\n\t\tthis.writer = writer;\n\n\t\t/**\n\t\t * The position at which (or near which) the next node will be inserted.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} #position\n\t\t */\n\t\tthis.position = position;\n\n\t\t/**\n\t\t * Elements with which the inserted elements can be merged.\n\t\t *\n\t\t *\t\t<p>x^</p><p>y</p> + <p>z</p> (can merge to <p>x</p>)\n\t\t *\t\t<p>x</p><p>^y</p> + <p>z</p> (can merge to <p>y</p>)\n\t\t *\t\t<p>x^y</p> + <p>z</p> (can merge to <p>xy</p> which will be split during the action,\n\t\t *\t\t\t\t\t\t\t\tso both its pieces will be added to this set)\n\t\t *\n\t\t *\n\t\t * @member {Set} #canMergeWith\n\t\t */\n\t\tthis.canMergeWith = new Set( [ this.position.parent ] );\n\n\t\t/**\n\t\t * Schema of the model.\n\t\t *\n\t\t * @member {module:engine/model/schema~Schema} #schema\n\t\t */\n\t\tthis.schema = model.schema;\n\n\t\tthis._filterAttributesOf = [];\n\n\t\t/**\n\t\t * Beginning of the affected range. See {@link module:engine/model/utils/insertcontent~Insertion#getAffectedRange}.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/liveposition~LivePosition|null} #_affectedStart\n\t\t */\n\t\tthis._affectedStart = null;\n\n\t\t/**\n\t\t * End of the affected range. See {@link module:engine/model/utils/insertcontent~Insertion#getAffectedRange}.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/liveposition~LivePosition|null} #_affectedEnd\n\t\t */\n\t\tthis._affectedEnd = null;\n\t}\n\n\t/**\n\t * Handles insertion of a set of nodes.\n\t *\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes to insert.\n\t * @param {Object} parentContext Context in which parent of these nodes was supposed to be inserted.\n\t * If the parent context is passed it means that the parent element was stripped (was not allowed).\n\t */\n\thandleNodes( nodes, parentContext ) {\n\t\tnodes = Array.from( nodes );\n\n\t\tfor ( let i = 0; i < nodes.length; i++ ) {\n\t\t\tconst node = nodes[ i ];\n\n\t\t\tthis._handleNode( node, {\n\t\t\t\tisFirst: i === 0 && parentContext.isFirst,\n\t\t\t\tisLast: ( i === ( nodes.length - 1 ) ) && parentContext.isLast\n\t\t\t} );\n\t\t}\n\n\t\t// TMP this will become a post-fixer.\n\t\tthis.schema.removeDisallowedAttributes( this._filterAttributesOf, this.writer );\n\t\tthis._filterAttributesOf = [];\n\t}\n\n\t/**\n\t * Returns range to be selected after insertion.\n\t * Returns `null` if there is no valid range to select after insertion.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetSelectionRange() {\n\t\tif ( this.nodeToSelect ) {\n\t\t\treturn Range._createOn( this.nodeToSelect );\n\t\t}\n\n\t\treturn this.model.schema.getNearestSelectionRange( this.position );\n\t}\n\n\t/**\n\t * Returns a range which contains all the performed changes. This is a range that, if removed, would return the model to the state\n\t * before the insertion. Returns `null` if no changes were done.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetAffectedRange() {\n\t\tif ( !this._affectedStart ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new Range( this._affectedStart, this._affectedEnd );\n\t}\n\n\t/**\n\t * Destroys `Insertion` instance.\n\t */\n\tdestroy() {\n\t\tif ( this._affectedStart ) {\n\t\t\tthis._affectedStart.detach();\n\t\t}\n\n\t\tif ( this._affectedEnd ) {\n\t\t\tthis._affectedEnd.detach();\n\t\t}\n\t}\n\n\t/**\n\t * Handles insertion of a single node.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node\n\t * @param {Object} context\n\t * @param {Boolean} context.isFirst Whether the given node is the first one in the content to be inserted.\n\t * @param {Boolean} context.isLast Whether the given node is the last one in the content to be inserted.\n\t */\n\t_handleNode( node, context ) {\n\t\t// Let's handle object in a special way.\n\t\t// * They should never be merged with other elements.\n\t\t// * If they are not allowed in any of the selection ancestors, they could be either autoparagraphed or totally removed.\n\t\tif ( this.schema.isObject( node ) ) {\n\t\t\tthis._handleObject( node, context );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Try to find a place for the given node.\n\t\t// Split the position.parent's branch up to a point where the node can be inserted.\n\t\t// If it isn't allowed in the whole branch, then of course don't split anything.\n\t\tconst isAllowed = this._checkAndSplitToAllowedPosition( node, context );\n\n\t\tif ( !isAllowed ) {\n\t\t\tthis._handleDisallowedNode( node, context );\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._insert( node );\n\n\t\t// After the node was inserted we may try to merge it with its siblings.\n\t\t// This should happen only if it was the first and/or last of the nodes (so only with boundary nodes)\n\t\t// and only if the selection was in those elements initially.\n\t\t//\n\t\t// E.g.:\n\t\t// <p>x^</p> + <p>y</p> => <p>x</p><p>y</p> => <p>xy[]</p>\n\t\t// and:\n\t\t// <p>x^y</p> + <p>z</p> => <p>x</p>^<p>y</p> + <p>z</p> => <p>x</p><p>z</p><p>y</p> => <p>xz[]y</p>\n\t\t// but:\n\t\t// <p>x</p><p>^</p><p>z</p> + <p>y</p> => <p>x</p><p>y</p><p>z</p> (no merging)\n\t\t// <p>x</p>[<img>]<p>z</p> + <p>y</p> => <p>x</p><p>y</p><p>z</p> (no merging, note: after running deleteContents\n\t\t//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t it's exactly the same case as above)\n\t\tthis._mergeSiblingsOf( node, context );\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/element~Element} node The object element.\n\t * @param {Object} context\n\t */\n\t_handleObject( node, context ) {\n\t\t// Try finding it a place in the tree.\n\t\tif ( this._checkAndSplitToAllowedPosition( node ) ) {\n\t\t\tthis._insert( node );\n\t\t}\n\t\t// Try autoparagraphing.\n\t\telse {\n\t\t\tthis._tryAutoparagraphing( node, context );\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/node~Node} node The disallowed node which needs to be handled.\n\t * @param {Object} context\n\t */\n\t_handleDisallowedNode( node, context ) {\n\t\t// If the node is an element, try inserting its children (strip the parent).\n\t\tif ( node.is( 'element' ) ) {\n\t\t\tthis.handleNodes( node.getChildren(), context );\n\t\t}\n\t\t// If text is not allowed, try autoparagraphing it.\n\t\telse {\n\t\t\tthis._tryAutoparagraphing( node, context );\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node to insert.\n\t */\n\t_insert( node ) {\n\t\t/* istanbul ignore if */\n\t\tif ( !this.schema.checkChild( this.position, node ) ) {\n\t\t\t// Algorithm's correctness check. We should never end up here but it's good to know that we did.\n\t\t\t// Note that it would often be a silent issue if we insert node in a place where it's not allowed.\n\t\t\tlog.error(\n\t\t\t\t'insertcontent-wrong-position: The node cannot be inserted on the given position.',\n\t\t\t\t{ node, position: this.position }\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst livePos = LivePosition.fromPosition( this.position, 'toNext' );\n\n\t\tthis._setAffectedBoundaries( this.position );\n\t\tthis.writer.insert( node, this.position );\n\n\t\tthis.position = livePos.toPosition();\n\t\tlivePos.detach();\n\n\t\t// The last inserted object should be selected because we can't put a collapsed selection after it.\n\t\tif ( this.schema.isObject( node ) && !this.schema.checkChild( this.position, '$text' ) ) {\n\t\t\tthis.nodeToSelect = node;\n\t\t} else {\n\t\t\tthis.nodeToSelect = null;\n\t\t}\n\n\t\tthis._filterAttributesOf.push( node );\n\t}\n\n\t/**\n\t * Sets `_affectedStart` and `_affectedEnd` to the given `position`. Should be used before a change is done during insertion process to\n\t * mark the affected range.\n\t *\n\t * This method is used before inserting a node or splitting a parent node. `_affectedStart` and `_affectedEnd` are also changed\n\t * during merging, but the logic there is more complicated so it is left out of this function.\n\t *\n\t * @private\n\t * @param {module:engine/model/position~Position} position\n\t */\n\t_setAffectedBoundaries( position ) {\n\t\t// Set affected boundaries stickiness so that those position will \"expand\" when something is inserted in between them:\n\t\t// <paragraph>Foo][bar</paragraph> -> <paragraph>Foo]xx[bar</paragraph>\n\t\t// This is why it cannot be a range but two separate positions.\n\t\tif ( !this._affectedStart ) {\n\t\t\tthis._affectedStart = LivePosition.fromPosition( position, 'toPrevious' );\n\t\t}\n\n\t\t// If `_affectedEnd` is before the new boundary position, expand `_affectedEnd`. This can happen if first inserted node was\n\t\t// inserted into the parent but the next node is moved-out of that parent:\n\t\t// (1) <paragraph>Foo][</paragraph> -> <paragraph>Foo]xx[</paragraph>\n\t\t// (2) <paragraph>Foo]xx[</paragraph> -> <paragraph>Foo]xx</paragraph><widget></widget>[\n\t\tif ( !this._affectedEnd || this._affectedEnd.isBefore( position ) ) {\n\t\t\tif ( this._affectedEnd ) {\n\t\t\t\tthis._affectedEnd.detach();\n\t\t\t}\n\n\t\t\tthis._affectedEnd = LivePosition.fromPosition( position, 'toNext' );\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node which could potentially be merged.\n\t * @param {Object} context\n\t */\n\t_mergeSiblingsOf( node, context ) {\n\t\tif ( !( node instanceof Element ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst mergeLeft = this._canMergeLeft( node, context );\n\t\tconst mergeRight = this._canMergeRight( node, context );\n\t\tconst mergePosLeft = LivePosition._createBefore( node );\n\t\tmergePosLeft.stickiness = 'toNext';\n\t\tconst mergePosRight = LivePosition._createAfter( node );\n\t\tmergePosRight.stickiness = 'toNext';\n\n\t\tif ( mergeLeft ) {\n\t\t\tconst livePosition = LivePosition.fromPosition( this.position );\n\t\t\tlivePosition.stickiness = 'toNext';\n\n\t\t\t// If `_affectedStart` is sames as merge position, it means that the element \"marked\" by `_affectedStart` is going to be\n\t\t\t// removed and its contents will be moved. This won't transform `LivePosition` so `_affectedStart` needs to be moved\n\t\t\t// by hand to properly reflect affected range. (Due to `_affectedStart` and `_affectedEnd` stickiness, the \"range\" is\n\t\t\t// shown as `][`).\n\t\t\t//\n\t\t\t// Example - insert `<paragraph>Abc</paragraph><paragraph>Xyz</paragraph>` at the end of `<paragraph>Foo^</paragraph>`:\n\t\t\t//\n\t\t\t// <paragraph>Foo</paragraph><paragraph>Bar</paragraph>   -->\n\t\t\t// <paragraph>Foo</paragraph>]<paragraph>Abc</paragraph><paragraph>Xyz</paragraph>[<paragraph>Bar</paragraph>   -->\n\t\t\t// <paragraph>Foo]Abc</paragraph><paragraph>Xyz</paragraph>[<paragraph>Bar</paragraph>\n\t\t\t//\n\t\t\t// Note, that if we are here then something must have been inserted, so `_affectedStart` and `_affectedEnd` have to be set.\n\t\t\tif ( this._affectedStart.isEqual( mergePosLeft ) ) {\n\t\t\t\tthis._affectedStart.detach();\n\t\t\t\tthis._affectedStart = LivePosition._createAt( mergePosLeft.nodeBefore, 'end', 'toPrevious' );\n\t\t\t}\n\n\t\t\tthis.writer.merge( mergePosLeft );\n\n\t\t\t// If only one element (the merged one) is in the \"affected range\", also move the affected range end appropriately.\n\t\t\t//\n\t\t\t// Example - insert `<paragraph>Abc</paragraph>` at the of `<paragraph>Foo^</paragraph>`:\n\t\t\t//\n\t\t\t// <paragraph>Foo</paragraph><paragraph>Bar</paragraph>   -->\n\t\t\t// <paragraph>Foo</paragraph>]<paragraph>Abc</paragraph>[<paragraph>Bar</paragraph>   -->\n\t\t\t// <paragraph>Foo]Abc</paragraph>[<paragraph>Bar</paragraph>   -->\n\t\t\t// <paragraph>Foo]Abc[</paragraph><paragraph>Bar</paragraph>\n\t\t\tif ( mergePosLeft.isEqual( this._affectedEnd ) && context.isLast ) {\n\t\t\t\tthis._affectedEnd.detach();\n\t\t\t\tthis._affectedEnd = LivePosition._createAt( mergePosLeft.nodeBefore, 'end', 'toNext' );\n\t\t\t}\n\n\t\t\tthis.position = livePosition.toPosition();\n\t\t\tlivePosition.detach();\n\t\t}\n\n\t\tif ( mergeRight ) {\n\t\t\t/* istanbul ignore if */\n\t\t\tif ( !this.position.isEqual( mergePosRight ) ) {\n\t\t\t\t// Algorithm's correctness check. We should never end up here but it's good to know that we did.\n\t\t\t\t// At this point the insertion position should be after the node we'll merge. If it isn't,\n\t\t\t\t// it should need to be secured as in the left merge case.\n\t\t\t\tlog.error( 'insertcontent-wrong-position-on-merge: The insertion position should equal the merge position' );\n\t\t\t}\n\n\t\t\t// Move the position to the previous node, so it isn't moved to the graveyard on merge.\n\t\t\t// <p>x</p>[]<p>y</p> => <p>x[]</p><p>y</p>\n\t\t\tthis.position = Position._createAt( mergePosRight.nodeBefore, 'end' );\n\n\t\t\t// OK:  <p>xx[]</p> + <p>yy</p> => <p>xx[]yy</p> (when sticks to previous)\n\t\t\t// NOK: <p>xx[]</p> + <p>yy</p> => <p>xxyy[]</p> (when sticks to next)\n\t\t\tconst livePosition = LivePosition.fromPosition( this.position, 'toPrevious' );\n\n\t\t\t// See comment above on moving `_affectedStart`.\n\t\t\tif ( this._affectedEnd.isEqual( mergePosRight ) ) {\n\t\t\t\tthis._affectedEnd.detach();\n\t\t\t\tthis._affectedEnd = LivePosition._createAt( mergePosRight.nodeBefore, 'end', 'toNext' );\n\t\t\t}\n\n\t\t\tthis.writer.merge( mergePosRight );\n\n\t\t\t// See comment above on moving `_affectedStart`.\n\t\t\tif ( mergePosRight.getShiftedBy( -1 ).isEqual( this._affectedStart ) && context.isFirst ) {\n\t\t\t\tthis._affectedStart.detach();\n\t\t\t\tthis._affectedStart = LivePosition._createAt( mergePosRight.nodeBefore, 0, 'toPrevious' );\n\t\t\t}\n\n\t\t\tthis.position = livePosition.toPosition();\n\t\t\tlivePosition.detach();\n\t\t}\n\n\t\tif ( mergeLeft || mergeRight ) {\n\t\t\t// After merge elements that were marked by _insert() to be filtered might be gone so\n\t\t\t// we need to mark the new container.\n\t\t\tthis._filterAttributesOf.push( this.position.parent );\n\t\t}\n\n\t\tmergePosLeft.detach();\n\t\tmergePosRight.detach();\n\t}\n\n\t/**\n\t * Checks whether specified node can be merged with previous sibling element.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node which could potentially be merged.\n\t * @param {Object} context\n\t * @returns {Boolean}\n\t */\n\t_canMergeLeft( node, context ) {\n\t\tconst previousSibling = node.previousSibling;\n\n\t\treturn context.isFirst &&\n\t\t\t( previousSibling instanceof Element ) &&\n\t\t\tthis.canMergeWith.has( previousSibling ) &&\n\t\t\tthis.model.schema.checkMerge( previousSibling, node );\n\t}\n\n\t/**\n\t * Checks whether specified node can be merged with next sibling element.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node which could potentially be merged.\n\t * @param {Object} context\n\t * @returns {Boolean}\n\t */\n\t_canMergeRight( node, context ) {\n\t\tconst nextSibling = node.nextSibling;\n\n\t\treturn context.isLast &&\n\t\t\t( nextSibling instanceof Element ) &&\n\t\t\tthis.canMergeWith.has( nextSibling ) &&\n\t\t\tthis.model.schema.checkMerge( node, nextSibling );\n\t}\n\n\t/**\n\t * Tries wrapping the node in a new paragraph and inserting it this way.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node which needs to be autoparagraphed.\n\t * @param {Object} context\n\t */\n\t_tryAutoparagraphing( node, context ) {\n\t\tconst paragraph = this.writer.createElement( 'paragraph' );\n\n\t\t// Do not autoparagraph if the paragraph won't be allowed there,\n\t\t// cause that would lead to an infinite loop. The paragraph would be rejected in\n\t\t// the next _handleNode() call and we'd be here again.\n\t\tif ( this._getAllowedIn( paragraph, this.position.parent ) && this.schema.checkChild( paragraph, node ) ) {\n\t\t\tparagraph._appendChild( node );\n\t\t\tthis._handleNode( paragraph, context );\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {module:engine/model/node~Node} node\n\t * @returns {Boolean} Whether an allowed position was found.\n\t * `false` is returned if the node isn't allowed at any position up in the tree, `true` if was.\n\t */\n\t_checkAndSplitToAllowedPosition( node ) {\n\t\tconst allowedIn = this._getAllowedIn( node, this.position.parent );\n\n\t\tif ( !allowedIn ) {\n\t\t\treturn false;\n\t\t}\n\n\t\twhile ( allowedIn != this.position.parent ) {\n\t\t\t// If a parent which we'd need to leave is a limit element, break.\n\t\t\tif ( this.schema.isLimit( this.position.parent ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( this.position.isAtStart ) {\n\t\t\t\t// If insertion position is at the beginning of the parent, move it out instead of splitting.\n\t\t\t\t// <p>^Foo</p> -> ^<p>Foo</p>\n\t\t\t\tconst parent = this.position.parent;\n\n\t\t\t\tthis.position = this.writer.createPositionBefore( parent );\n\n\t\t\t\t// Special case – parent is empty (<p>^</p>).\n\t\t\t\t//\n\t\t\t\t// 1. parent.isEmpty\n\t\t\t\t// We can remove the element after moving insertion position out of it.\n\t\t\t\t//\n\t\t\t\t// 2. parent.parent === allowedIn\n\t\t\t\t// However parent should remain in place when allowed element is above limit element in document tree.\n\t\t\t\t// For example there shouldn't be allowed to remove empty paragraph from tableCell, when is pasted\n\t\t\t\t// content allowed in $root.\n\t\t\t\tif ( parent.isEmpty && parent.parent === allowedIn ) {\n\t\t\t\t\tthis.writer.remove( parent );\n\t\t\t\t}\n\t\t\t} else if ( this.position.isAtEnd ) {\n\t\t\t\t// If insertion position is at the end of the parent, move it out instead of splitting.\n\t\t\t\t// <p>Foo^</p> -> <p>Foo</p>^\n\t\t\t\tthis.position = this.writer.createPositionAfter( this.position.parent );\n\t\t\t} else {\n\t\t\t\tconst tempPos = this.writer.createPositionAfter( this.position.parent );\n\n\t\t\t\tthis._setAffectedBoundaries( this.position );\n\t\t\t\tthis.writer.split( this.position );\n\n\t\t\t\tthis.position = tempPos;\n\n\t\t\t\tthis.canMergeWith.add( this.position.nodeAfter );\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Gets the element in which the given node is allowed. It checks the passed element and all its ancestors.\n\t *\n\t * @private\n\t * @param {module:engine/model/node~Node} node The node to check.\n\t * @param {module:engine/model/element~Element} element The element in which the node's correctness should be checked.\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\t_getAllowedIn( node, element ) {\n\t\tif ( this.schema.checkChild( element, node ) ) {\n\t\t\treturn element;\n\t\t}\n\n\t\tif ( element.parent ) {\n\t\t\treturn this._getAllowedIn( node, element.parent );\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/deletecontent\n */\n\nimport LivePosition from '../liveposition';\nimport Range from '../range';\nimport DocumentSelection from '../documentselection';\n\n/**\n * Deletes content of the selection and merge siblings. The resulting selection is always collapsed.\n *\n * **Note:** Use {@link module:engine/model/model~Model#deleteContent} instead of this function.\n * This function is only exposed to be reusable in algorithms\n * which change the {@link module:engine/model/model~Model#deleteContent}\n * method's behavior.\n *\n * @param {module:engine/model/model~Model} model The model in context of which the insertion\n * should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * Selection of which the content should be deleted.\n * @param {module:engine/model/batch~Batch} batch Batch to which the operations will be added.\n * @param {Object} [options]\n * @param {Boolean} [options.leaveUnmerged=false] Whether to merge elements after removing the content of the selection.\n *\n * For example `<heading>x[x</heading><paragraph>y]y</paragraph>` will become:\n *\n * * `<heading>x^y</heading>` with the option disabled (`leaveUnmerged == false`)\n * * `<heading>x^</heading><paragraph>y</paragraph>` with enabled (`leaveUnmerged == true`).\n *\n * Note: {@link module:engine/model/schema~Schema#isObject object} and {@link module:engine/model/schema~Schema#isLimit limit}\n * elements will not be merged.\n *\n * @param {Boolean} [options.doNotResetEntireContent=false] Whether to skip replacing the entire content with a\n * paragraph when the entire content was selected.\n *\n * For example `<heading>[x</heading><paragraph>y]</paragraph>` will become:\n *\n * * `<paragraph>^</paragraph>` with the option disabled (`doNotResetEntireContent == false`)\n * * `<heading>^</heading>` with enabled (`doNotResetEntireContent == true`).\n *\n * @param {Boolean} [options.doNotAutoparagraph=false] Whether to create a paragraph if after content deletion selection is moved\n * to a place where text cannot be inserted.\n *\n * For example `<paragraph>x</paragraph>[<image src=\"foo.jpg\"></image>]` will become:\n *\n * * `<paragraph>x</paragraph><paragraph>[]</paragraph>` with the option disabled (`doNotAutoparagraph == false`)\n * * `<paragraph>x[]</paragraph>` with the option enabled (`doNotAutoparagraph == true`).\n *\n * **Note:** if there is no valid position for the selection, the paragraph will always be created:\n *\n * `[<image src=\"foo.jpg\"></image>]` -> `<paragraph>[]</paragraph>`.\n */\nexport default function deleteContent( model, selection, options = {} ) {\n\tif ( selection.isCollapsed ) {\n\t\treturn;\n\t}\n\n\tconst selRange = selection.getFirstRange();\n\n\t// If the selection is already removed, don't do anything.\n\tif ( selRange.root.rootName == '$graveyard' ) {\n\t\treturn;\n\t}\n\n\tconst schema = model.schema;\n\n\tmodel.change( writer => {\n\t\t// 1. Replace the entire content with paragraph.\n\t\t// See: https://github.com/ckeditor/ckeditor5-engine/issues/1012#issuecomment-315017594.\n\t\tif ( !options.doNotResetEntireContent && shouldEntireContentBeReplacedWithParagraph( schema, selection ) ) {\n\t\t\treplaceEntireContentWithParagraph( writer, selection, schema );\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst startPos = selRange.start;\n\t\tconst endPos = LivePosition.fromPosition( selRange.end, 'toNext' );\n\n\t\t// 2. Remove the content if there is any.\n\t\tif ( !selRange.start.isTouching( selRange.end ) ) {\n\t\t\twriter.remove( selRange );\n\t\t}\n\n\t\t// 3. Merge elements in the right branch to the elements in the left branch.\n\t\t// The only reasonable (in terms of data and selection correctness) case in which we need to do that is:\n\t\t//\n\t\t// <heading type=1>Fo[</heading><paragraph>]ar</paragraph> => <heading type=1>Fo^ar</heading>\n\t\t//\n\t\t// However, the algorithm supports also merging deeper structures (up to the depth of the shallower branch),\n\t\t// as it's hard to imagine what should actually be the default behavior. Usually, specific features will\n\t\t// want to override that behavior anyway.\n\t\tif ( !options.leaveUnmerged ) {\n\t\t\tmergeBranches( writer, startPos, endPos );\n\n\t\t\t// TMP this will be replaced with a postfixer.\n\t\t\t// We need to check and strip disallowed attributes in all nested nodes because after merge\n\t\t\t// some attributes could end up in a path where are disallowed.\n\t\t\t//\n\t\t\t// e.g. bold is disallowed for <H1>\n\t\t\t// <h1>Fo{o</h1><p>b}a<b>r</b><p> -> <h1>Fo{}a<b>r</b><h1> -> <h1>Fo{}ar<h1>.\n\t\t\tschema.removeDisallowedAttributes( startPos.parent.getChildren(), writer );\n\t\t}\n\n\t\tcollapseSelectionAt( writer, selection, startPos );\n\n\t\t// 4. Add a paragraph to set selection in it.\n\t\t// Check if a text is allowed in the new container. If not, try to create a new paragraph (if it's allowed here).\n\t\tif ( shouldAutoparagraph( schema, startPos ) ) {\n\t\t\t// If auto-paragraphing is off, find the closest valid selection range and collapse the selection there.\n\t\t\t// If there is no valid selection range, create paragraph anyway and set selection there.\n\t\t\tconst validSelectionRange = schema.getNearestSelectionRange( startPos );\n\n\t\t\tif ( options.doNotAutoparagraph && validSelectionRange ) {\n\t\t\t\tcollapseSelectionAt( writer, selection, validSelectionRange );\n\t\t\t} else {\n\t\t\t\tinsertParagraph( writer, startPos, selection );\n\t\t\t}\n\t\t}\n\n\t\tendPos.detach();\n\t} );\n}\n\n// This function is a result of reaching the Ballmer's peak for just the right amount of time.\n// Even I had troubles documenting it after a while and after reading it again I couldn't believe that it really works.\nfunction mergeBranches( writer, startPos, endPos ) {\n\tconst startParent = startPos.parent;\n\tconst endParent = endPos.parent;\n\n\t// If both positions ended up in the same parent, then there's nothing more to merge:\n\t// <$root><p>x[]</p><p>{}y</p></$root> => <$root><p>xy</p>[]{}</$root>\n\tif ( startParent == endParent ) {\n\t\treturn;\n\t}\n\n\t// If one of the positions is a limit element, then there's nothing to merge because we don't want to cross the limit boundaries.\n\tif ( writer.model.schema.isLimit( startParent ) || writer.model.schema.isLimit( endParent ) ) {\n\t\treturn;\n\t}\n\n\t// Check if operations we'll need to do won't need to cross object or limit boundaries.\n\t// E.g., we can't merge endParent into startParent in this case:\n\t// <limit><startParent>x[]</startParent></limit><endParent>{}</endParent>\n\tif ( !checkCanBeMerged( startPos, endPos, writer.model.schema ) ) {\n\t\treturn;\n\t}\n\n\t// Remember next positions to merge. For example:\n\t// <a><b>x[]</b></a><c><d>{}y</d></c>\n\t// will become:\n\t// <a><b>xy</b>[]</a><c>{}</c>\n\tstartPos = writer.createPositionAfter( startParent );\n\tendPos = writer.createPositionBefore( endParent );\n\n\tif ( !endPos.isEqual( startPos ) ) {\n\t\t// In this case, before we merge, we need to move `endParent` to the `startPos`:\n\t\t// <a><b>x[]</b></a><c><d>{}y</d></c>\n\t\t// becomes:\n\t\t// <a><b>x</b>[]<d>y</d></a><c>{}</c>\n\t\twriter.insert( endParent, startPos );\n\t}\n\n\t// Merge two siblings:\n\t// <a>x</a>[]<b>y</b> -> <a>xy</a> (the usual case)\n\t// <a><b>x</b>[]<d>y</d></a><c></c> -> <a><b>xy</b>[]</a><c></c> (this is the \"move parent\" case shown above)\n\twriter.merge( startPos );\n\n\t// Remove empty end ancestors:\n\t// <a>fo[o</a><b><a><c>bar]</c></a></b>\n\t// becomes:\n\t// <a>fo[]</a><b><a>{}</a></b>\n\t// So we can remove <a> and <b>.\n\twhile ( endPos.parent.isEmpty ) {\n\t\tconst parentToRemove = endPos.parent;\n\n\t\tendPos = writer.createPositionBefore( parentToRemove );\n\n\t\twriter.remove( parentToRemove );\n\t}\n\n\t// Continue merging next level.\n\tmergeBranches( writer, startPos, endPos );\n}\n\nfunction shouldAutoparagraph( schema, position ) {\n\tconst isTextAllowed = schema.checkChild( position, '$text' );\n\tconst isParagraphAllowed = schema.checkChild( position, 'paragraph' );\n\n\treturn !isTextAllowed && isParagraphAllowed;\n}\n\n// Check if parents of two positions can be merged by checking if there are no limit/object\n// boundaries between those two positions.\n//\n// E.g. in <bQ><p>x[]</p></bQ><widget><caption>{}</caption></widget>\n// we'll check <p>, <bQ>, <widget> and <caption>.\n// Usually, widget and caption are marked as objects/limits in the schema, so in this case merging will be blocked.\nfunction checkCanBeMerged( leftPos, rightPos, schema ) {\n\tconst rangeToCheck = new Range( leftPos, rightPos );\n\n\tfor ( const value of rangeToCheck.getWalker() ) {\n\t\tif ( schema.isLimit( value.item ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction insertParagraph( writer, position, selection ) {\n\tconst paragraph = writer.createElement( 'paragraph' );\n\n\twriter.insert( paragraph, position );\n\n\tcollapseSelectionAt( writer, selection, writer.createPositionAt( paragraph, 0 ) );\n}\n\nfunction replaceEntireContentWithParagraph( writer, selection ) {\n\tconst limitElement = writer.model.schema.getLimitElement( selection );\n\n\twriter.remove( writer.createRangeIn( limitElement ) );\n\tinsertParagraph( writer, writer.createPositionAt( limitElement, 0 ), selection );\n}\n\n// We want to replace the entire content with a paragraph when:\n// * the entire content is selected,\n// * selection contains at least two elements,\n// * whether the paragraph is allowed in schema in the common ancestor.\nfunction shouldEntireContentBeReplacedWithParagraph( schema, selection ) {\n\tconst limitElement = schema.getLimitElement( selection );\n\n\tif ( !selection.containsEntireContent( limitElement ) ) {\n\t\treturn false;\n\t}\n\n\tconst range = selection.getFirstRange();\n\n\tif ( range.start.parent == range.end.parent ) {\n\t\treturn false;\n\t}\n\n\treturn schema.checkChild( limitElement, 'paragraph' );\n}\n\n// Helper function that sets the selection. Depending whether given `selection` is a document selection or not,\n// uses a different method to set it.\nfunction collapseSelectionAt( writer, selection, positionOrRange ) {\n\tif ( selection instanceof DocumentSelection ) {\n\t\twriter.setSelection( positionOrRange );\n\t} else {\n\t\tselection.setTo( positionOrRange );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/modifyselection\n */\n\nimport Position from '../position';\nimport TreeWalker from '../treewalker';\nimport Range from '../range';\nimport { isInsideSurrogatePair, isInsideCombinedSymbol } from '@ckeditor/ckeditor5-utils/src/unicode';\nimport DocumentSelection from '../documentselection';\n\nconst wordBoundaryCharacters = ' ,.?!:;\"-()';\n\n/**\n * Modifies the selection. Currently, the supported modifications are:\n *\n * * Extending. The selection focus is moved in the specified `options.direction` with a step specified in `options.unit`.\n * Possible values for `unit` are:\n *  * `'character'` (default) - moves selection by one user-perceived character. In most cases this means moving by one\n *  character in `String` sense. However, unicode also defines \"combing marks\". These are special symbols, that combines\n *  with a symbol before it (\"base character\") to create one user-perceived character. For example, `q̣̇` is a normal\n *  letter `q` with two \"combining marks\": upper dot (`Ux0307`) and lower dot (`Ux0323`). For most actions, i.e. extending\n *  selection by one position, it is correct to include both \"base character\" and all of it's \"combining marks\". That is\n *  why `'character'` value is most natural and common method of modifying selection.\n *  * `'codePoint'` - moves selection by one unicode code point. In contrary to, `'character'` unit, this will insert\n *  selection between \"base character\" and \"combining mark\", because \"combining marks\" have their own unicode code points.\n *  However, for technical reasons, unicode code points with values above `UxFFFF` are represented in native `String` by\n *  two characters, called \"surrogate pairs\". Halves of \"surrogate pairs\" have a meaning only when placed next to each other.\n *  For example `𨭎` is represented in `String` by `\\uD862\\uDF4E`. Both `\\uD862` and `\\uDF4E` do not have any meaning\n *  outside the pair (are rendered as ? when alone). Position between them would be incorrect. In this case, selection\n *  extension will include whole \"surrogate pair\".\n *  * `'word'` - moves selection by a whole word.\n *\n * **Note:** if you extend a forward selection in a backward direction you will in fact shrink it.\n *\n * **Note:** Use {@link module:engine/model/model~Model#modifySelection} instead of this function.\n * This function is only exposed to be reusable in algorithms\n * which change the {@link module:engine/model/model~Model#modifySelection}\n * method's behavior.\n *\n * @param {module:engine/model/model~Model} model The model in context of which\n * the selection modification should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * The selection to modify.\n * @param {Object} [options]\n * @param {'forward'|'backward'} [options.direction='forward'] The direction in which the selection should be modified.\n * @param {'character'|'codePoint'|'word'} [options.unit='character'] The unit by which selection should be modified.\n */\nexport default function modifySelection( model, selection, options = {} ) {\n\tconst schema = model.schema;\n\tconst isForward = options.direction != 'backward';\n\tconst unit = options.unit ? options.unit : 'character';\n\n\tconst focus = selection.focus;\n\n\tconst walker = new TreeWalker( {\n\t\tboundaries: getSearchRange( focus, isForward ),\n\t\tsingleCharacters: true,\n\t\tdirection: isForward ? 'forward' : 'backward'\n\t} );\n\n\tconst data = { walker, schema, isForward, unit };\n\n\tlet next;\n\n\twhile ( ( next = walker.next() ) ) {\n\t\tif ( next.done ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = tryExtendingTo( data, next.value );\n\n\t\tif ( position ) {\n\t\t\tif ( selection instanceof DocumentSelection ) {\n\t\t\t\tmodel.change( writer => {\n\t\t\t\t\twriter.setSelectionFocus( position );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tselection.setFocus( position );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n// Checks whether the selection can be extended to the the walker's next value (next position).\n// @param {{ walker, unit, isForward, schema }} data\n// @param {module:engine/view/treewalker~TreeWalkerValue} value\nfunction tryExtendingTo( data, value ) {\n\t// If found text, we can certainly put the focus in it. Let's just find a correct position\n\t// based on the unit.\n\tif ( value.type == 'text' ) {\n\t\tif ( data.unit === 'word' ) {\n\t\t\treturn getCorrectWordBreakPosition( data.walker, data.isForward );\n\t\t}\n\n\t\treturn getCorrectPosition( data.walker, data.unit, data.isForward );\n\t}\n\n\t// Entering an element.\n\tif ( value.type == ( data.isForward ? 'elementStart' : 'elementEnd' ) ) {\n\t\t// If it's an object, we can select it now.\n\t\tif ( data.schema.isObject( value.item ) ) {\n\t\t\treturn Position._createAt( value.item, data.isForward ? 'after' : 'before' );\n\t\t}\n\n\t\t// If text allowed on this position, extend to this place.\n\t\tif ( data.schema.checkChild( value.nextPosition, '$text' ) ) {\n\t\t\treturn value.nextPosition;\n\t\t}\n\t}\n\t// Leaving an element.\n\telse {\n\t\t// If leaving a limit element, stop.\n\t\tif ( data.schema.isLimit( value.item ) ) {\n\t\t\t// NOTE: Fast-forward the walker until the end.\n\t\t\tdata.walker.skip( () => true );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// If text allowed on this position, extend to this place.\n\t\tif ( data.schema.checkChild( value.nextPosition, '$text' ) ) {\n\t\t\treturn value.nextPosition;\n\t\t}\n\t}\n}\n\n// Finds a correct position by walking in a text node and checking whether selection can be extended to given position\n// or should be extended further.\n//\n// @param {module:engine/model/treewalker~TreeWalker} walker\n// @param {String} unit The unit by which selection should be modified.\nfunction getCorrectPosition( walker, unit ) {\n\tconst textNode = walker.position.textNode;\n\n\tif ( textNode ) {\n\t\tconst data = textNode.data;\n\t\tlet offset = walker.position.offset - textNode.startOffset;\n\n\t\twhile ( isInsideSurrogatePair( data, offset ) || ( unit == 'character' && isInsideCombinedSymbol( data, offset ) ) ) {\n\t\t\twalker.next();\n\n\t\t\toffset = walker.position.offset - textNode.startOffset;\n\t\t}\n\t}\n\n\treturn walker.position;\n}\n\n// Finds a correct position of a word break by walking in a text node and checking whether selection can be extended to given position\n// or should be extended further.\n//\n// @param {module:engine/model/treewalker~TreeWalker} walker\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction getCorrectWordBreakPosition( walker, isForward ) {\n\tlet textNode = walker.position.textNode;\n\n\tif ( textNode ) {\n\t\tlet offset = walker.position.offset - textNode.startOffset;\n\n\t\twhile ( !isAtWordBoundary( textNode.data, offset, isForward ) && !isAtNodeBoundary( textNode, offset, isForward ) ) {\n\t\t\twalker.next();\n\n\t\t\t// Check of adjacent text nodes with different attributes (like BOLD).\n\t\t\t// Example          : 'foofoo []bar<$text bold=\"true\">bar</$text> bazbaz'\n\t\t\t// should expand to : 'foofoo [bar<$text bold=\"true\">bar</$text>] bazbaz'.\n\t\t\tconst nextNode = isForward ? walker.position.nodeAfter : walker.position.nodeBefore;\n\n\t\t\t// Scan only text nodes. Ignore inline elements (like `<softBreak>`).\n\t\t\tif ( nextNode && nextNode.is( 'text' ) ) {\n\t\t\t\t// Check boundary char of an adjacent text node.\n\t\t\t\tconst boundaryChar = nextNode.data.charAt( isForward ? 0 : nextNode.data.length - 1 );\n\n\t\t\t\t// Go to the next node if the character at the boundary of that node belongs to the same word.\n\t\t\t\tif ( !wordBoundaryCharacters.includes( boundaryChar ) ) {\n\t\t\t\t\t// If adjacent text node belongs to the same word go to it & reset values.\n\t\t\t\t\twalker.next();\n\n\t\t\t\t\ttextNode = walker.position.textNode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toffset = walker.position.offset - textNode.startOffset;\n\t\t}\n\t}\n\n\treturn walker.position;\n}\n\nfunction getSearchRange( start, isForward ) {\n\tconst root = start.root;\n\tconst searchEnd = Position._createAt( root, isForward ? 'end' : 0 );\n\n\tif ( isForward ) {\n\t\treturn new Range( start, searchEnd );\n\t} else {\n\t\treturn new Range( searchEnd, start );\n\t}\n}\n\n// Checks if selection is on word boundary.\n//\n// @param {String} data The text node value to investigate.\n// @param {Number} offset Position offset.\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction isAtWordBoundary( data, offset, isForward ) {\n\t// The offset to check depends on direction.\n\tconst offsetToCheck = offset + ( isForward ? 0 : -1 );\n\n\treturn wordBoundaryCharacters.includes( data.charAt( offsetToCheck ) );\n}\n\n// Checks if selection is on node boundary.\n//\n// @param {module:engine/model/text~Text} textNode The text node to investigate.\n// @param {Number} offset Position offset.\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction isAtNodeBoundary( textNode, offset, isForward ) {\n\treturn offset === ( isForward ? textNode.endOffset : 0 );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/getselectedcontent\n */\n\n/**\n * Gets a clone of the selected content.\n *\n * For example, for the following selection:\n *\n * ```html\n * <p>x</p><quote><p>y</p><h>fir[st</h></quote><p>se]cond</p><p>z</p>\n * ```\n *\n * It will return a document fragment with such a content:\n *\n * ```html\n * <quote><h>st</h></quote><p>se</p>\n * ```\n *\n * @param {module:engine/model/model~Model} model The model in context of which\n * the selection modification should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * The selection of which content will be returned.\n * @returns {module:engine/model/documentfragment~DocumentFragment}\n */\nexport default function getSelectedContent( model, selection ) {\n\treturn model.change( writer => {\n\t\tconst frag = writer.createDocumentFragment();\n\t\tconst range = selection.getFirstRange();\n\n\t\tif ( !range || range.isCollapsed ) {\n\t\t\treturn frag;\n\t\t}\n\n\t\tconst root = range.start.root;\n\t\tconst commonPath = range.start.getCommonPath( range.end );\n\t\tconst commonParent = root.getNodeByPath( commonPath );\n\n\t\t// ## 1st step\n\t\t//\n\t\t// First, we'll clone a fragment represented by a minimal flat range\n\t\t// containing the original range to be cloned.\n\t\t// E.g. let's consider such a range:\n\t\t//\n\t\t// <p>x</p><quote><p>y</p><h>fir[st</h></quote><p>se]cond</p><p>z</p>\n\t\t//\n\t\t// A minimal flat range containing this one is:\n\t\t//\n\t\t// <p>x</p>[<quote><p>y</p><h>first</h></quote><p>second</p>]<p>z</p>\n\t\t//\n\t\t// We can easily clone this structure, preserving e.g. the <quote> element.\n\t\tlet flatSubtreeRange;\n\n\t\tif ( range.start.parent == range.end.parent ) {\n\t\t\t// The original range is flat, so take it.\n\t\t\tflatSubtreeRange = range;\n\t\t} else {\n\t\t\tflatSubtreeRange = writer.createRange(\n\t\t\t\twriter.createPositionAt( commonParent, range.start.path[ commonPath.length ] ),\n\t\t\t\twriter.createPositionAt( commonParent, range.end.path[ commonPath.length ] + 1 )\n\t\t\t);\n\t\t}\n\n\t\tconst howMany = flatSubtreeRange.end.offset - flatSubtreeRange.start.offset;\n\n\t\t// Clone the whole contents.\n\t\tfor ( const item of flatSubtreeRange.getItems( { shallow: true } ) ) {\n\t\t\tif ( item.is( 'textProxy' ) ) {\n\t\t\t\twriter.appendText( item.data, item.getAttributes(), frag );\n\t\t\t} else {\n\t\t\t\twriter.append( item._clone( true ), frag );\n\t\t\t}\n\t\t}\n\n\t\t// ## 2nd step\n\t\t//\n\t\t// If the original range wasn't flat, then we need to remove the excess nodes from the both ends of the cloned fragment.\n\t\t//\n\t\t// For example, for the range shown in the 1st step comment, we need to remove these pieces:\n\t\t//\n\t\t// <quote>[<p>y</p>]<h>[fir]st</h></quote><p>se[cond]</p>\n\t\t//\n\t\t// So this will be the final copied content:\n\t\t//\n\t\t// <quote><h>st</h></quote><p>se</p>\n\t\t//\n\t\t// In order to do that, we remove content from these two ranges:\n\t\t//\n\t\t// [<quote><p>y</p><h>fir]st</h></quote><p>se[cond</p>]\n\t\tif ( flatSubtreeRange != range ) {\n\t\t\t// Find the position of the original range in the cloned fragment.\n\t\t\tconst newRange = range._getTransformedByMove( flatSubtreeRange.start, writer.createPositionAt( frag, 0 ), howMany )[ 0 ];\n\n\t\t\tconst leftExcessRange = writer.createRange( writer.createPositionAt( frag, 0 ), newRange.start );\n\t\t\tconst rightExcessRange = writer.createRange( newRange.end, writer.createPositionAt( frag, 'end' ) );\n\n\t\t\tremoveRangeContent( rightExcessRange, writer );\n\t\t\tremoveRangeContent( leftExcessRange, writer );\n\t\t}\n\n\t\treturn frag;\n\t} );\n}\n\n// After https://github.com/ckeditor/ckeditor5-engine/issues/690 is fixed,\n// this function will, most likely, be able to rewritten using getMinimalFlatRanges().\nfunction removeRangeContent( range, writer ) {\n\tconst parentsToCheck = [];\n\n\tArray.from( range.getItems( { direction: 'backward' } ) )\n\t\t// We should better store ranges because text proxies will lose integrity\n\t\t// with the text nodes when we'll start removing content.\n\t\t.map( item => writer.createRangeOn( item ) )\n\t\t// Filter only these items which are fully contained in the passed range.\n\t\t//\n\t\t// E.g. for the following range: [<quote><p>y</p><h>fir]st</h>\n\t\t// the walker will return the entire <h> element, when only the \"fir\" item inside it is fully contained.\n\t\t.filter( itemRange => {\n\t\t\t// We should be able to use Range.containsRange, but https://github.com/ckeditor/ckeditor5-engine/issues/691.\n\t\t\tconst contained =\n\t\t\t\t( itemRange.start.isAfter( range.start ) || itemRange.start.isEqual( range.start ) ) &&\n\t\t\t\t( itemRange.end.isBefore( range.end ) || itemRange.end.isEqual( range.end ) );\n\n\t\t\treturn contained;\n\t\t} )\n\t\t.forEach( itemRange => {\n\t\t\tparentsToCheck.push( itemRange.start.parent );\n\n\t\t\twriter.remove( itemRange );\n\t\t} );\n\n\t// Remove ancestors of the removed items if they turned to be empty now\n\t// (their whole content was contained in the range).\n\tparentsToCheck.forEach( parentToCheck => {\n\t\tlet parent = parentToCheck;\n\n\t\twhile ( parent.parent && parent.isEmpty ) {\n\t\t\tconst removeRange = writer.createRangeOn( parent );\n\n\t\t\tparent = parent.parent;\n\n\t\t\twriter.remove( removeRange );\n\t\t}\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/selection-post-fixer\n */\n\nimport Range from '../range';\nimport Position from '../position';\n\n/**\n * Injects selection post-fixer to the model.\n *\n * The role of the selection post-fixer is to ensure that the selection is in a correct place\n * after a {@link module:engine/model/model~Model#change `change()`} block was executed.\n *\n * The correct position means that:\n *\n * * All collapsed selection ranges are in a place where the {@link module:engine/model/schema~Schema}\n * allows a `$text`.\n * * None of the selection's non-collapsed ranges crosses a {@link module:engine/model/schema~Schema#isLimit limit element}\n * boundary (a range must be rooted within one limit element).\n * * Only {@link module:engine/model/schema~Schema#isObject object elements} can be selected from the outside\n * (e.g. `[<paragraph>foo</paragraph>]` is invalid). This rule applies independently to both selection ends, so this\n * selection is correct: `<paragraph>f[oo</paragraph><image></image>]`.\n *\n * If the position is not correct, the post-fixer will automatically correct it.\n *\n * ## Fixing a non-collapsed selection\n *\n * See as an example a selection that starts in a P1 element and ends inside the text of a TD element\n * (`[` and `]` are range boundaries and `(l)` denotes an element defined as `isLimit=true`):\n *\n *\t\troot\n *\t\t |- element P1\n *\t\t |   |- \"foo\"                                      root\n *\t\t |- element TABLE (l)                   P1         TABLE             P2\n *\t\t |   |- element TR (l)                 f o[o     TR      TR         b a r\n *\t\t |   |   |- element TD (l)                       TD      TD\n *\t\t |   |       |- \"aaa\"                          a]a a    b b b\n *\t\t |   |- element TR (l)\n *\t\t |   |   |- element TD (l)                           ||\n *\t\t |   |       |- \"bbb\"                                ||\n *\t\t |- element P2                                       VV\n *\t\t |   |- \"bar\"\n *\t\t                                                   root\n *\t\t                                        P1         TABLE]            P2\n *\t\t                                       f o[o     TR      TR         b a r\n *\t\t                                                 TD      TD\n *\t\t                                               a a a    b b b\n *\n * In the example above, the TABLE, TR and TD are defined as `isLimit=true` in the schema. The range which is not contained within\n * a single limit element must be expanded to select the outermost limit element. The range end is inside the text node of the TD element.\n * As the TD element is a child of the TR and TABLE elements, where both are defined as `isLimit=true` in the schema, the range must be\n * expanded to select the whole TABLE element.\n *\n * **Note** If the selection contains multiple ranges, the method returns a minimal set of ranges that are not intersecting after expanding\n * them to select `isLimit=true` elements.\n *\n * @param {module:engine/model/model~Model} model\n */\nexport function injectSelectionPostFixer( model ) {\n\tmodel.document.registerPostFixer( writer => selectionPostFixer( writer, model ) );\n}\n\n// The selection post-fixer.\n//\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/model~Model} model\nfunction selectionPostFixer( writer, model ) {\n\tconst selection = model.document.selection;\n\tconst schema = model.schema;\n\n\tconst ranges = [];\n\n\tlet wasFixed = false;\n\n\tfor ( const modelRange of selection.getRanges() ) {\n\t\t// Go through all ranges in selection and try fixing each of them.\n\t\t// Those ranges might overlap but will be corrected later.\n\t\tconst correctedRange = tryFixingRange( modelRange, schema );\n\n\t\tif ( correctedRange ) {\n\t\t\tranges.push( correctedRange );\n\t\t\twasFixed = true;\n\t\t} else {\n\t\t\tranges.push( modelRange );\n\t\t}\n\t}\n\n\t// If any of ranges were corrected update the selection.\n\tif ( wasFixed ) {\n\t\t// The above algorithm might create ranges that intersects each other when selection contains more then one range.\n\t\t// This is case happens mostly on Firefox which creates multiple ranges for selected table.\n\t\tlet fixedRanges = ranges;\n\n\t\t// Fixing selection with many ranges usually breaks the selection in Firefox. As only Firefox supports multiple selection ranges\n\t\t// we simply create one continuous range from fixed selection ranges (even if they are not adjacent).\n\t\tif ( ranges.length > 1 ) {\n\t\t\tconst selectionStart = ranges[ 0 ].start;\n\t\t\tconst selectionEnd = ranges[ ranges.length - 1 ].end;\n\n\t\t\tfixedRanges = [ new Range( selectionStart, selectionEnd ) ];\n\t\t}\n\n\t\twriter.setSelection( fixedRanges, { backward: selection.isBackward } );\n\t}\n}\n\n// Tries fixing a range if it's incorrect.\n//\n// @param {module:engine/model/range~Range} range\n// @param {module:engine/model/schema~Schema} schema\n// @returns {module:engine/model/range~Range|null} Returns fixed range or null if range is valid.\nfunction tryFixingRange( range, schema ) {\n\tif ( range.isCollapsed ) {\n\t\treturn tryFixingCollapsedRange( range, schema );\n\t}\n\n\treturn tryFixingNonCollapsedRage( range, schema );\n}\n\n// Tries to fix collapsed ranges.\n//\n// * Fixes situation when a range is in a place where $text is not allowed\n//\n// @param {module:engine/model/range~Range} range Collapsed range to fix.\n// @param {module:engine/model/schema~Schema} schema\n// @returns {module:engine/model/range~Range|null} Returns fixed range or null if range is valid.\nfunction tryFixingCollapsedRange( range, schema ) {\n\tconst originalPosition = range.start;\n\n\tconst nearestSelectionRange = schema.getNearestSelectionRange( originalPosition );\n\n\t// This might be null ie when editor data is empty.\n\t// In such cases there is no need to fix the selection range.\n\tif ( !nearestSelectionRange ) {\n\t\treturn null;\n\t}\n\n\tconst fixedPosition = nearestSelectionRange.start;\n\n\t// Fixed position is the same as original - no need to return corrected range.\n\tif ( originalPosition.isEqual( fixedPosition ) ) {\n\t\treturn null;\n\t}\n\n\t// Check single node selection (happens in tables).\n\tif ( fixedPosition.nodeAfter && schema.isLimit( fixedPosition.nodeAfter ) ) {\n\t\treturn new Range( fixedPosition, Position._createAfter( fixedPosition.nodeAfter ) );\n\t}\n\n\treturn new Range( fixedPosition );\n}\n\n// Tries to fix an expanded range.\n//\n// @param {module:engine/model/range~Range} range Expanded range to fix.\n// @param {module:engine/model/schema~Schema} schema\n// @returns {module:engine/model/range~Range|null} Returns fixed range or null if range is valid.\nfunction tryFixingNonCollapsedRage( range, schema ) {\n\tconst start = range.start;\n\tconst end = range.end;\n\n\tconst isTextAllowedOnStart = schema.checkChild( start, '$text' );\n\tconst isTextAllowedOnEnd = schema.checkChild( end, '$text' );\n\n\tconst startLimitElement = schema.getLimitElement( start );\n\tconst endLimitElement = schema.getLimitElement( end );\n\n\t// Ranges which both end are inside the same limit element (or root) might needs only minor fix.\n\tif ( startLimitElement === endLimitElement ) {\n\t\t// Range is valid when both position allows to place a text:\n\t\t// - <block>f[oobarba]z</block>\n\t\t// This would be \"fixed\" by a next check but as it will be the same it's better to return null so the selection stays the same.\n\t\tif ( isTextAllowedOnStart && isTextAllowedOnEnd ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Range that is on non-limit element (or is partially) must be fixed so it is placed inside the block around $text:\n\t\t// - [<block>foo</block>]    ->    <block>[foo]</block>\n\t\t// - [<block>foo]</block>    ->    <block>[foo]</block>\n\t\t// - <block>f[oo</block>]    ->    <block>f[oo]</block>\n\t\t// - [<block>foo</block><object></object>]    ->    <block>[foo</block><object></object>]\n\t\tif ( checkSelectionOnNonLimitElements( start, end, schema ) ) {\n\t\t\tconst isStartObject = start.nodeAfter && schema.isObject( start.nodeAfter );\n\t\t\tconst fixedStart = isStartObject ? null : schema.getNearestSelectionRange( start, 'forward' );\n\n\t\t\tconst isEndObject = end.nodeBefore && schema.isObject( end.nodeBefore );\n\t\t\tconst fixedEnd = isEndObject ? null : schema.getNearestSelectionRange( end, 'backward' );\n\n\t\t\t// The schema.getNearestSelectionRange might return null - if that happens use original position.\n\t\t\tconst rangeStart = fixedStart ? fixedStart.start : start;\n\t\t\tconst rangeEnd = fixedEnd ? fixedEnd.start : end;\n\n\t\t\treturn new Range( rangeStart, rangeEnd );\n\t\t}\n\t}\n\n\tconst isStartInLimit = startLimitElement && !startLimitElement.is( 'rootElement' );\n\tconst isEndInLimit = endLimitElement && !endLimitElement.is( 'rootElement' );\n\n\t// At this point we eliminated valid positions on text nodes so if one of range positions is placed inside a limit element\n\t// then the range crossed limit element boundaries and needs to be fixed.\n\tif ( isStartInLimit || isEndInLimit ) {\n\t\tconst bothInSameParent = ( start.nodeAfter && end.nodeBefore ) && start.nodeAfter.parent === end.nodeBefore.parent;\n\n\t\tconst expandStart = isStartInLimit && ( !bothInSameParent || !isInObject( start.nodeAfter, schema ) );\n\t\tconst expandEnd = isEndInLimit && ( !bothInSameParent || !isInObject( end.nodeBefore, schema ) );\n\n\t\t// Although we've already found limit element on start/end positions we must find the outer-most limit element.\n\t\t// as limit elements might be nested directly inside (ie table > tableRow > tableCell).\n\t\tlet fixedStart = start;\n\t\tlet fixedEnd = end;\n\n\t\tif ( expandStart ) {\n\t\t\tfixedStart = Position._createBefore( findOutermostLimitAncestor( startLimitElement, schema ) );\n\t\t}\n\n\t\tif ( expandEnd ) {\n\t\t\tfixedEnd = Position._createAfter( findOutermostLimitAncestor( endLimitElement, schema ) );\n\t\t}\n\n\t\treturn new Range( fixedStart, fixedEnd );\n\t}\n\n\t// Range was not fixed at this point so it is valid - ie it was placed around limit element already.\n\treturn null;\n}\n\n// Finds the outer-most ancestor.\n//\n// @param {module:engine/model/node~Node} startingNode\n// @param {module:engine/model/schema~Schema} schema\n// @param {String} expandToDirection Direction of expansion - either 'start' or 'end' of the range.\n// @returns {module:engine/model/node~Node}\nfunction findOutermostLimitAncestor( startingNode, schema ) {\n\tlet isLimitNode = startingNode;\n\tlet parent = isLimitNode;\n\n\t// Find outer most isLimit block as such blocks might be nested (ie. in tables).\n\twhile ( schema.isLimit( parent ) && parent.parent ) {\n\t\tisLimitNode = parent;\n\t\tparent = parent.parent;\n\t}\n\n\treturn isLimitNode;\n}\n\n// Checks whether any of range boundaries is placed around non-limit elements.\n//\n// @param {module:engine/model/position~Position} start\n// @param {module:engine/model/position~Position} end\n// @param {module:engine/model/schema~Schema} schema\n// @returns {Boolean}\nfunction checkSelectionOnNonLimitElements( start, end, schema ) {\n\tconst startIsOnBlock = ( start.nodeAfter && !schema.isLimit( start.nodeAfter ) ) || schema.checkChild( start, '$text' );\n\tconst endIsOnBlock = ( end.nodeBefore && !schema.isLimit( end.nodeBefore ) ) || schema.checkChild( end, '$text' );\n\n\t// We should fix such selection when one of those nodes needs fixing.\n\treturn startIsOnBlock || endIsOnBlock;\n}\n\n// Checks if node exists and if it's an object.\n//\n// @param {module:engine/model/node~Node} node\n// @param {module:engine/model/schema~Schema} schema\n// @returns {Boolean}\nfunction isInObject( node, schema ) {\n\treturn node && schema.isObject( node );\n}\n\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/model\n */\n\nimport Batch from './batch';\nimport Writer from './writer';\nimport Schema from './schema';\nimport Document from './document';\nimport MarkerCollection from './markercollection';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ModelElement from './element';\nimport ModelRange from './range';\nimport ModelPosition from './position';\nimport ModelSelection from './selection';\n\nimport insertContent from './utils/insertcontent';\nimport deleteContent from './utils/deletecontent';\nimport modifySelection from './utils/modifyselection';\nimport getSelectedContent from './utils/getselectedcontent';\nimport { injectSelectionPostFixer } from './utils/selection-post-fixer';\n\n/**\n * Editor's data model. Read about the model in the\n * {@glink framework/guides/architecture/editing-engine engine architecture guide}.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Model {\n\tconstructor() {\n\t\t/**\n\t\t * Model's marker collection.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/markercollection~MarkerCollection}\n\t\t */\n\t\tthis.markers = new MarkerCollection();\n\n\t\t/**\n\t\t * Model's document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/document~Document}\n\t\t */\n\t\tthis.document = new Document( this );\n\n\t\t/**\n\t\t * Model's schema.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/schema~Schema}\n\t\t */\n\t\tthis.schema = new Schema();\n\n\t\t/**\n\t\t * All callbacks added by {@link module:engine/model/model~Model#change} or\n\t\t * {@link module:engine/model/model~Model#enqueueChange} methods waiting to be executed.\n\t\t *\n\t\t * @private\n\t\t * @type {Array.<Function>}\n\t\t */\n\t\tthis._pendingChanges = [];\n\n\t\t/**\n\t\t * The last created and currently used writer instance.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/writer~Writer}\n\t\t */\n\t\tthis._currentWriter = null;\n\n\t\t[ 'insertContent', 'deleteContent', 'modifySelection', 'getSelectedContent', 'applyOperation' ]\n\t\t\t.forEach( methodName => this.decorate( methodName ) );\n\n\t\t// Adding operation validation with `highest` priority, so it is called before any other feature would like\n\t\t// to do anything with the operation. If the operation has incorrect parameters it should throw on the earliest occasion.\n\t\tthis.on( 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\toperation._validate();\n\t\t}, { priority: 'highest' } );\n\n\t\t// Register some default abstract entities.\n\t\tthis.schema.register( '$root', {\n\t\t\tisLimit: true\n\t\t} );\n\t\tthis.schema.register( '$block', {\n\t\t\tallowIn: '$root',\n\t\t\tisBlock: true\n\t\t} );\n\t\tthis.schema.register( '$text', {\n\t\t\tallowIn: '$block',\n\t\t\tisInline: true\n\t\t} );\n\t\tthis.schema.register( '$clipboardHolder', {\n\t\t\tallowContentOf: '$root',\n\t\t\tisLimit: true\n\t\t} );\n\t\tthis.schema.extend( '$text', { allowIn: '$clipboardHolder' } );\n\n\t\t// An element needed by the `upcastElementToMarker` converter.\n\t\t// This element temporarily represents a marker boundary during the conversion process and is removed\n\t\t// at the end of the conversion. `UpcastDispatcher` or at least `Conversion` class looks like a\n\t\t// better place for this registration but both know nothing about `Schema`.\n\t\tthis.schema.register( '$marker' );\n\t\tthis.schema.addChildCheck( ( context, childDefinition ) => {\n\t\t\tif ( childDefinition.name === '$marker' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} );\n\n\t\tinjectSelectionPostFixer( this );\n\t}\n\n\t/**\n\t * The `change()` method is the primary way of changing the model. You should use it to modify all document nodes\n\t * (including detached nodes – i.e. nodes not added to the {@link module:engine/model/model~Model#document model document}),\n\t * the {@link module:engine/model/document~Document#selection document's selection}, and\n\t * {@link module:engine/model/model~Model#markers model markers}.\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\twriter.insertText( 'foo', paragraph, 'end' );\n\t *\t\t} );\n\t *\n\t * All changes inside the change block use the same {@link module:engine/model/batch~Batch} so they are combined\n\t * into a single undo step.\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\twriter.insertText( 'foo', paragraph, 'end' ); // foo.\n\t *\n\t *\t\t\tmodel.change( writer => {\n\t *\t\t\t\twriter.insertText( 'bar', paragraph, 'end' ); // foobar.\n\t *\t\t\t} );\n\t *\n\t * \t\t\twriter.insertText( 'bom', paragraph, 'end' ); // foobarbom.\n\t *\t\t} );\n\t *\n\t * The callback of the `change()` block is executed synchronously.\n\t *\n\t * You can also return a value from the change block.\n\t *\n\t *\t\tconst img = model.change( writer => {\n\t *\t\t\treturn writer.createElement( 'img' );\n\t *\t\t} );\n\t *\n\t * @see #enqueueChange\n\t * @param {Function} callback Callback function which may modify the model.\n\t * @returns {*} Value returned by the callback.\n\t */\n\tchange( callback ) {\n\t\tif ( this._pendingChanges.length === 0 ) {\n\t\t\t// If this is the outermost block, create a new batch and start `_runPendingChanges` execution flow.\n\t\t\tthis._pendingChanges.push( { batch: new Batch(), callback } );\n\n\t\t\treturn this._runPendingChanges()[ 0 ];\n\t\t} else {\n\t\t\t// If this is not the outermost block, just execute the callback.\n\t\t\treturn callback( this._currentWriter );\n\t\t}\n\t}\n\n\t/**\n\t * The `enqueueChange()` method performs similar task as the {@link #change `change()` method}, with two major differences.\n\t *\n\t * First, the callback of `enqueueChange()` is executed when all other enqueued changes are done. It might be executed\n\t * immediately if it is not nested in any other change block, but if it is nested in another (enqueue)change block,\n\t * it will be delayed and executed after the outermost block.\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\tconsole.log( 1 );\n\t *\n\t *\t\t\tmodel.enqueueChange( writer => {\n\t *\t\t\t\tconsole.log( 2 );\n\t *\t\t\t} );\n\t *\n\t * \t\t\tconsole.log( 3 );\n\t *\t\t} ); // Will log: 1, 3, 2.\n\t *\n\t * Second, it lets you define the {@link module:engine/model/batch~Batch} into which you want to add your changes.\n\t * By default, a new batch is created. In the sample above, `change` and `enqueueChange` blocks use a different\n\t * batch (and different {@link module:engine/model/writer~Writer} since each of them operates on the separate batch).\n\t *\n\t * When using the `enqueueChange()` block you can also add some changes to the batch you used before.\n\t *\n\t *\t\tmodel.enqueueChange( batch, writer => {\n\t *\t\t\twriter.insertText( 'foo', paragraph, 'end' );\n\t *\t\t} );\n\t *\n\t * The batch instance can be obtained from {@link module:engine/model/writer~Writer#batch the writer}.\n\t *\n\t * @param {module:engine/model/batch~Batch|'transparent'|'default'} batchOrType Batch or batch type should be used in the callback.\n\t * If not defined, a new batch will be created.\n\t * @param {Function} callback Callback function which may modify the model.\n\t */\n\tenqueueChange( batchOrType, callback ) {\n\t\tif ( typeof batchOrType === 'string' ) {\n\t\t\tbatchOrType = new Batch( batchOrType );\n\t\t} else if ( typeof batchOrType == 'function' ) {\n\t\t\tcallback = batchOrType;\n\t\t\tbatchOrType = new Batch();\n\t\t}\n\n\t\tthis._pendingChanges.push( { batch: batchOrType, callback } );\n\n\t\tif ( this._pendingChanges.length == 1 ) {\n\t\t\tthis._runPendingChanges();\n\t\t}\n\t}\n\n\t/**\n\t * {@link module:utils/observablemixin~ObservableMixin#decorate Decorated} function for applying\n\t * {@link module:engine/model/operation/operation~Operation operations} to the model.\n\t *\n\t * This is a low-level way of changing the model. It is exposed for very specific use cases (like the undo feature).\n\t * Normally, to modify the model, you will want to use {@link module:engine/model/writer~Writer `Writer`}.\n\t * See also {@glink framework/guides/architecture/editing-engine#changing-the-model Changing the model} section\n\t * of the {@glink framework/guides/architecture/editing-engine Editing architecture} guide.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation The operation to apply.\n\t */\n\tapplyOperation( operation ) {\n\t\toperation._execute();\n\t}\n\n\t/**\n\t * Inserts content at the position in the editor specified by the selection, as one would expect the paste\n\t * functionality to work.\n\t *\n\t * This is a high-level method. It takes the {@link #schema schema} into consideration when inserting\n\t * the content, clears the given selection's content before inserting nodes and moves the selection\n\t * to its target position at the end of the process.\n\t * It can split elements, merge them, wrap bare text nodes with paragraphs, etc. &mdash; just like the\n\t * pasting feature should do.\n\t *\n\t * For lower-level methods see {@link module:engine/model/writer~Writer `Writer`}.\n\t *\n\t * This method, unlike {@link module:engine/model/writer~Writer `Writer`}'s methods, does not have to be used\n\t * inside a {@link #change `change()` block}.\n\t *\n\t * # Conversion and schema\n\t *\n\t * Inserting elements and text nodes into the model is not enough to make CKEditor 5 render that content\n\t * to the user. CKEditor 5 implements a model-view-controller architecture and what `model.insertContent()` does\n\t * is only adding nodes to the model. Additionally, you need to define\n\t * {@glink framework/guides/architecture/editing-engine#conversion converters} between the model and view\n\t * and define those nodes in the {@glink framework/guides/architecture/editing-engine#schema schema}.\n\t *\n\t * So, while this method may seem similar to CKEditor 4 `editor.insertHtml()` (in fact, both methods\n\t * are used for paste-like content insertion), the CKEditor 5 method cannot be use to insert arbitrary HTML\n\t * unless converters are defined for all elements and attributes in that HTML.\n\t *\n\t * # Examples\n\t *\n\t * Using `insertContent()` with a manually created model structure:\n\t *\n\t *\t\t// Let's create a document fragment containing such content as:\n\t *\t\t//\n\t *\t\t// <paragrap>foo</paragraph>\n\t *\t\t// <blockQuote>\n\t *\t\t//    <paragraph>bar</paragraph>\n\t *\t\t// </blockQuote>\n\t *\t\tconst docFrag = editor.model.change( writer => {\n\t *\t\t\tconst p1 = writer.createElement( 'paragraph' );\n\t *\t\t\tconst p2 = writer.createElement( 'paragraph' );\n\t *\t\t\tconst blockQuote = writer.createElement( 'blockQuote' );\n\t *\t\t\tconst docFrag = writer.createDocumentFragment();\n\t *\n\t *\t\t\twriter.append( p1, docFrag );\n\t *\t\t\twriter.append( blockQuote, docFrag );\n\t *\t\t\twriter.append( p2, blockQuote );\n\t *\t\t\twriter.insertText( 'foo', p1 );\n\t *\t\t\twriter.insertText( 'bar', p2 );\n\t *\n\t *\t\t\treturn docFrag;\n\t *\t\t} );\n\t *\n\t *\t\t// insertContent() does not have to be used in a change() block. It can, though,\n\t *\t\t// so this code could be moved to the callback defined above.\n\t *\t\teditor.model.insertContent( docFrag );\n\t *\n\t * Using `insertContent()` with an HTML string converted to a model document fragment (similar to the pasting mechanism):\n\t *\n\t *\t\t// You can create your own HtmlDataProcessor instance or use editor.data.processor\n\t *\t\t// if you have not overridden the default one (which is the HtmlDataProcessor instance).\n\t *\t\tconst htmlDP = new HtmlDataProcessor();\n\t *\n\t *\t\t// Convert an HTML string to a view document fragment:\n\t *\t\tconst viewFragment = htmlDP.toView( htmlString );\n\t *\n\t *\t\t// Convert the view document fragment to a model document fragment\n\t *\t\t// in the context of $root. This conversion takes the schema into\n\t *\t\t// account so if, for example, the view document fragment contained a bare text node,\n\t *\t\t// this text node cannot be a child of $root, so it will be automatically\n\t *\t\t// wrapped with a <paragraph>. You can define the context yourself (in the second parameter),\n\t *\t\t// and e.g. convert the content like it would happen in a <paragraph>.\n\t *\t\t// Note: The clipboard feature uses a custom context called $clipboardHolder\n\t *\t\t// which has a loosened schema.\n\t *\t\tconst modelFragment = editor.data.toModel( viewFragment );\n\t *\n\t *\t\teditor.model.insertContent( modelFragment );\n\t *\n\t * By default this method will use the document selection but it can also be used with a position, range or selection instance.\n\t *\n\t *\t\t// Insert text at the current document selection position.\n\t *\t\teditor.model.change( writer => {\n\t *\t\t\teditor.model.insertContent( writer.createText( 'x' ) );\n\t *\t\t} );\n\t *\n\t *\t\t// Insert text at a given position - the document selection will not be modified.\n\t *\t\teditor.model.change( writer => {\n\t *\t\t\teditor.model.insertContent( writer.createText( 'x' ), doc.getRoot(), 2 );\n\t *\n\t *\t\t\t// Which is a shorthand for:\n\t *\t\t\teditor.model.insertContent( writer.createText( 'x' ), writer.createPositionAt( doc.getRoot(), 2 ) );\n\t *\t\t} );\n\t *\n\t * If an instance of {@link module:engine/model/selection~Selection} is passed as `selectable`\n\t * it will be moved to the target position (where the document selection should be moved after the insertion).\n\t *\n\t *\t\teditor.model.change( writer => {\n\t *\t\t\t// Insert text replacing the given selection instance.\n\t *\t\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t\teditor.model.insertContent( writer.createText( 'x' ), selection );\n\t *\n\t *\t\t\t// insertContent() modifies the passed selection instance so it can be used to set the document selection.\n\t *\t\t\t// Note: This is not necessary when you passed the document selection to insertContent().\n\t *\t\t\twriter.setSelection( selection );\n\t *\t\t} );\n\t *\n\t * @fires insertContent\n\t * @param {module:engine/model/documentfragment~DocumentFragment|module:engine/model/item~Item} content The content to insert.\n\t * @param {module:engine/model/selection~Selectable} [selectable=model.document.selection]\n\t * The selection into which the content should be inserted. If not provided the current model document selection will be used.\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] To be used when a model item was passed as `selectable`.\n\t * This param defines a position in relation to that item.\n\t * @returns {module:engine/model/range~Range} Range which contains all the performed changes. This is a range that, if removed,\n\t * would return the model to the state before the insertion. If no changes were preformed by `insertContent`, returns a range collapsed\n\t * at the insertion position.\n\t */\n\tinsertContent( content, selectable, placeOrOffset ) {\n\t\treturn insertContent( this, content, selectable, placeOrOffset );\n\t}\n\n\t/**\n\t * Deletes content of the selection and merge siblings. The resulting selection is always collapsed.\n\t *\n\t * **Note:** For the sake of predictability, the resulting selection should always be collapsed.\n\t * In cases where a feature wants to modify deleting behavior so selection isn't collapsed\n\t * (e.g. a table feature may want to keep row selection after pressing <kbd>Backspace</kbd>),\n\t * then that behavior should be implemented in the view's listener. At the same time, the table feature\n\t * will need to modify this method's behavior too, e.g. to \"delete contents and then collapse\n\t * the selection inside the last selected cell\" or \"delete the row and collapse selection somewhere near\".\n\t * That needs to be done in order to ensure that other features which use `deleteContent()` will work well with tables.\n\t *\n\t * @fires deleteContent\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n\t * Selection of which the content should be deleted.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.leaveUnmerged=false] Whether to merge elements after removing the content of the selection.\n\t *\n\t * For example `<heading1>x[x</heading1><paragraph>y]y</paragraph>` will become:\n\t *\n\t * * `<heading1>x^y</heading1>` with the option disabled (`leaveUnmerged == false`)\n\t * * `<heading1>x^</heading1><paragraph>y</paragraph>` with enabled (`leaveUnmerged == true`).\n\t *\n\t * Note: {@link module:engine/model/schema~Schema#isObject object} and {@link module:engine/model/schema~Schema#isLimit limit}\n\t * elements will not be merged.\n\t *\n\t * @param {Boolean} [options.doNotResetEntireContent=false] Whether to skip replacing the entire content with a\n\t * paragraph when the entire content was selected.\n\t *\n\t * For example `<heading1>[x</heading1><paragraph>y]</paragraph>` will become:\n\t *\n\t * * `<paragraph>^</paragraph>` with the option disabled (`doNotResetEntireContent == false`)\n\t * * `<heading1>^</heading1>` with enabled (`doNotResetEntireContent == true`)\n\t *\n\t * @param {Boolean} [options.doNotAutoparagraph=false] Whether to create a paragraph if after content deletion selection is moved\n\t * to a place where text cannot be inserted.\n\t *\n\t * For example `<paragraph>x</paragraph>[<image src=\"foo.jpg\"></image>]` will become:\n\t *\n\t * * `<paragraph>x</paragraph><paragraph>[]</paragraph>` with the option disabled (`doNotAutoparagraph == false`)\n\t * * `<paragraph>x[]</paragraph>` with the option enabled (`doNotAutoparagraph == true`).\n\t *\n\t * **Note:** if there is no valid position for the selection, the paragraph will always be created:\n\t *\n\t * `[<image src=\"foo.jpg\"></image>]` -> `<paragraph>[]</paragraph>`.\n\t */\n\tdeleteContent( selection, options ) {\n\t\tdeleteContent( this, selection, options );\n\t}\n\n\t/**\n\t * Modifies the selection. Currently, the supported modifications are:\n\t *\n\t * * Extending. The selection focus is moved in the specified `options.direction` with a step specified in `options.unit`.\n\t * Possible values for `unit` are:\n\t *  * `'character'` (default) - moves selection by one user-perceived character. In most cases this means moving by one\n\t *  character in `String` sense. However, unicode also defines \"combing marks\". These are special symbols, that combines\n\t *  with a symbol before it (\"base character\") to create one user-perceived character. For example, `q̣̇` is a normal\n\t *  letter `q` with two \"combining marks\": upper dot (`Ux0307`) and lower dot (`Ux0323`). For most actions, i.e. extending\n\t *  selection by one position, it is correct to include both \"base character\" and all of it's \"combining marks\". That is\n\t *  why `'character'` value is most natural and common method of modifying selection.\n\t *  * `'codePoint'` - moves selection by one unicode code point. In contrary to, `'character'` unit, this will insert\n\t *  selection between \"base character\" and \"combining mark\", because \"combining marks\" have their own unicode code points.\n\t *  However, for technical reasons, unicode code points with values above `UxFFFF` are represented in native `String` by\n\t *  two characters, called \"surrogate pairs\". Halves of \"surrogate pairs\" have a meaning only when placed next to each other.\n\t *  For example `𨭎` is represented in `String` by `\\uD862\\uDF4E`. Both `\\uD862` and `\\uDF4E` do not have any meaning\n\t *  outside the pair (are rendered as ? when alone). Position between them would be incorrect. In this case, selection\n\t *  extension will include whole \"surrogate pair\".\n\t *  * `'word'` - moves selection by a whole word.\n\t *\n\t * **Note:** if you extend a forward selection in a backward direction you will in fact shrink it.\n\t *\n\t * @fires modifySelection\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n\t * The selection to modify.\n\t * @param {Object} [options]\n\t * @param {'forward'|'backward'} [options.direction='forward'] The direction in which the selection should be modified.\n\t * @param {'character'|'codePoint'|'word'} [options.unit='character'] The unit by which selection should be modified.\n\t */\n\tmodifySelection( selection, options ) {\n\t\tmodifySelection( this, selection, options );\n\t}\n\n\t/**\n\t * Gets a clone of the selected content.\n\t *\n\t * For example, for the following selection:\n\t *\n\t * ```html\n\t * <paragraph>x</paragraph>\n\t * <blockQuote>\n\t *\t<paragraph>y</paragraph>\n\t *\t<heading1>fir[st</heading1>\n\t * </blockQuote>\n\t * <paragraph>se]cond</paragraph>\n\t * <paragraph>z</paragraph>\n\t * ```\n\t *\n\t * It will return a document fragment with such a content:\n\t *\n\t * ```html\n\t * <blockQuote>\n\t *\t<heading1>st</heading1>\n\t * </blockQuote>\n\t * <paragraph>se</paragraph>\n\t * ```\n\t *\n\t * @fires getSelectedContent\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n\t * The selection of which content will be returned.\n\t * @returns {module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tgetSelectedContent( selection ) {\n\t\treturn getSelectedContent( this, selection );\n\t}\n\n\t/**\n\t * Checks whether the given {@link module:engine/model/range~Range range} or\n\t * {@link module:engine/model/element~Element element} has any meaningful content.\n\t *\n\t * Meaningful content is:\n\t *\n\t * * any text node (`options.ignoreWhitespaces` allows controlling whether this text node must also contain\n\t * any non-whitespace characters),\n\t * * or any {@link module:engine/model/schema~Schema#isObject object element},\n\t * * or any {@link module:engine/model/markercollection~Marker marker} which\n\t * {@link module:engine/model/markercollection~Marker#_affectsData affects data}.\n\t *\n\t * This means that a range containing an empty `<paragraph></paragraph>` is not considered to have a meaningful content.\n\t * However, a range containing an `<image></image>` (which would normally be marked in the schema as an object element)\n\t * is considered non-empty.\n\t *\n\t * @param {module:engine/model/range~Range|module:engine/model/element~Element} rangeOrElement Range or element to check.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.ignoreWhitespaces] Whether text node with whitespaces only should be considered empty.\n\t * @returns {Boolean}\n\t */\n\thasContent( rangeOrElement, options ) {\n\t\tconst range = rangeOrElement instanceof ModelElement ? ModelRange._createIn( rangeOrElement ) : rangeOrElement;\n\n\t\tif ( range.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if there are any markers which affects data in this given range.\n\t\tfor ( const intersectingMarker of this.markers.getMarkersIntersectingRange( range ) ) {\n\t\t\tif ( intersectingMarker.affectsData ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tconst { ignoreWhitespaces = false } = options || {};\n\n\t\tfor ( const item of range.getItems() ) {\n\t\t\tif ( item.is( 'textProxy' ) ) {\n\t\t\t\tif ( !ignoreWhitespaces ) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else if ( item.data.search( /\\S/ ) !== -1 ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if ( this.schema.isObject( item ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Creates a position from the given root and path in that root.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createPositionFromPath `Writer#createPositionFromPath()`}.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} root Root of the position.\n\t * @param {Array.<Number>} path Position path. See {@link module:engine/model/position~Position#path}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * See {@link module:engine/model/position~PositionStickiness}.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionFromPath( root, path, stickiness ) {\n\t\treturn new ModelPosition( root, path, stickiness );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/model/position~Position position},\n\t * * a parent element and offset in that element,\n\t * * a parent element and `'end'` (the position will be set at the end of that element),\n\t * * a {@link module:engine/model/item~Item model item} and `'before'` or `'after'`\n\t * (the position will be set before or after the given model item).\n\t *\n\t * This method is a shortcut to other factory methods such as:\n\t *\n\t * * {@link module:engine/model/model~Model#createPositionBefore `createPositionBefore()`},\n\t * * {@link module:engine/model/model~Model#createPositionAfter `createPositionAfter()`}.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createPositionAt `Writer#createPositionAt()`},\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn ModelPosition._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after the given {@link module:engine/model/item~Item model item}.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createPositionAfter `Writer#createPositionAfter()`}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn ModelPosition._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before the given {@link module:engine/model/item~Item model item}.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createPositionBefore `Writer#createPositionBefore()`}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item before which the position should be placed.\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn ModelPosition._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from the `start` position to the `end` position.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createRange `Writer#createRange()`}:\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\tconst range = writer.createRange( start, end );\n\t *\t\t} );\n\t *\n\t * @param {module:engine/model/position~Position} start Start position.\n\t * @param {module:engine/model/position~Position} [end] End position. If not set, the range will be collapsed\n\t * to the `start` position.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new ModelRange( start, end );\n\t}\n\n\t/**\n\t * Creates a range inside the given element which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createRangeIn `Writer#createRangeIn()`}:\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\tconst range = writer.createRangeIn( paragraph );\n\t *\t\t} );\n\t *\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn ModelRange._createIn( element );\n\t}\n\n\t/**\n\t * Creates a range that starts before the given {@link module:engine/model/item~Item model item} and ends after it.\n\t *\n\t * Note: This method is also available on `writer` instance as\n\t * {@link module:engine/model/writer~Writer#createRangeOn `Writer.createRangeOn()`}:\n\t *\n\t *\t\tmodel.change( writer => {\n\t *\t\t\tconst range = writer.createRangeOn( paragraph );\n\t *\t\t} );\n\t *\n\t * @param {module:engine/model/item~Item} item\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn ModelRange._createOn( item );\n\t}\n\n\t/**\n\t * Creates a new selection instance based on the given {@link module:engine/model/selection~Selectable selectable}\n\t * or creates an empty selection if no arguments were passed.\n\t *\n\t * Note: This method is also available as\n\t * {@link module:engine/model/writer~Writer#createSelection `Writer#createSelection()`}.\n\t *\n\t *\t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the given document selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst documentSelection = model.document.selection;\n\t *\t\tconst selection = writer.createSelection( documentSelection );\n\t *\n\t *\t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates selection at the given offset in the given element.\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/model/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t *\t\t// Additional options (`'backward'`) can be specified as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @returns {module:engine/model/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new ModelSelection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/batch~Batch} instance.\n\t *\n\t * **Note:** In most cases creating a batch instance is not necessary as they are created when using:\n\t *\n\t * * {@link #change `change()`},\n\t * * {@link #enqueueChange `enqueueChange()`}.\n\t *\n\t * @param {'transparent'|'default'} [type='default'] The type of the batch.\n\t * @returns {module:engine/model/batch~Batch}\n\t */\n\tcreateBatch( type ) {\n\t\treturn new Batch( type );\n\t}\n\n\t/**\n\t * Removes all events listeners set by model instance and destroys {@link module:engine/model/document~Document}.\n\t */\n\tdestroy() {\n\t\tthis.document.destroy();\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Common part of {@link module:engine/model/model~Model#change} and {@link module:engine/model/model~Model#enqueueChange}\n\t * which calls callbacks and returns array of values returned by these callbacks.\n\t *\n\t * @private\n\t * @returns {Array.<*>} Array of values returned by callbacks.\n\t */\n\t_runPendingChanges() {\n\t\tconst ret = [];\n\n\t\tthis.fire( '_beforeChanges' );\n\n\t\twhile ( this._pendingChanges.length ) {\n\t\t\t// Create a new writer using batch instance created for this chain of changes.\n\t\t\tconst currentBatch = this._pendingChanges[ 0 ].batch;\n\t\t\tthis._currentWriter = new Writer( this, currentBatch );\n\n\t\t\t// Execute changes callback and gather the returned value.\n\t\t\tconst callbackReturnValue = this._pendingChanges[ 0 ].callback( this._currentWriter );\n\t\t\tret.push( callbackReturnValue );\n\n\t\t\tthis.document._handleChangeBlock( this._currentWriter );\n\n\t\t\tthis._pendingChanges.shift();\n\t\t\tthis._currentWriter = null;\n\t\t}\n\n\t\tthis.fire( '_afterChanges' );\n\n\t\treturn ret;\n\t}\n\n\t/**\n\t * Fired when entering the outermost {@link module:engine/model/model~Model#enqueueChange} or\n\t * {@link module:engine/model/model~Model#change} block.\n\t *\n\t * @protected\n\t * @event _beforeChanges\n\t */\n\n\t/**\n\t * Fired when leaving the outermost {@link module:engine/model/model~Model#enqueueChange} or\n\t * {@link module:engine/model/model~Model#change} block.\n\t *\n\t * @protected\n\t * @event _afterChanges\n\t */\n\n\t/**\n\t * Fired every time any {@link module:engine/model/operation/operation~Operation operation} is applied on the model\n\t * using {@link #applyOperation}.\n\t *\n\t * Note that this event is suitable only for very specific use-cases. Use it if you need to listen to every single operation\n\t * applied on the document. However, in most cases {@link module:engine/model/document~Document#event:change} should\n\t * be used.\n\t *\n\t * A few callbacks are already added to this event by engine internal classes:\n\t *\n\t * * with `highest` priority operation is validated,\n\t * * with `normal` priority operation is executed,\n\t * * with `low` priority the {@link module:engine/model/document~Document} updates its version,\n\t * * with `low` priority {@link module:engine/model/liveposition~LivePosition} and {@link module:engine/model/liverange~LiveRange}\n\t * update themselves.\n\t *\n\t * @event applyOperation\n\t * @param {Array} args Arguments of the `applyOperation` which is an array with a single element - applied\n\t * {@link module:engine/model/operation/operation~Operation operation}.\n\t */\n\n\t/**\n\t * Event fired when {@link #insertContent} method is called.\n\t *\n\t * The {@link #insertContent default action of that method} is implemented as a\n\t * listener to this event so it can be fully customized by the features.\n\t *\n\t * **Note** The `selectable` parameter for the {@link #insertContent} is optional. When `undefined` value is passed the method uses\n\t * `model.document.selection`.\n\t *\n\t * @event insertContent\n\t * @param {Array} args The arguments passed to the original method.\n\t */\n\n\t/**\n\t * Event fired when {@link #deleteContent} method is called.\n\t *\n\t * The {@link #deleteContent default action of that method} is implemented as a\n\t * listener to this event so it can be fully customized by the features.\n\t *\n\t * @event deleteContent\n\t * @param {Array} args The arguments passed to the original method.\n\t */\n\n\t/**\n\t * Event fired when {@link #modifySelection} method is called.\n\t *\n\t * The {@link #modifySelection default action of that method} is implemented as a\n\t * listener to this event so it can be fully customized by the features.\n\t *\n\t * @event modifySelection\n\t * @param {Array} args The arguments passed to the original method.\n\t */\n\n\t/**\n\t * Event fired when {@link #getSelectedContent} method is called.\n\t *\n\t * The {@link #getSelectedContent default action of that method} is implemented as a\n\t * listener to this event so it can be fully customized by the features.\n\t *\n\t * @event getSelectedContent\n\t * @param {Array} args The arguments passed to the original method.\n\t */\n}\n\nmix( Model, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editingkeystrokehandler\n */\n\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\n\n/**\n * A keystroke handler for editor editing. Its instance is available\n * in {@link module:core/editor/editor~Editor#keystrokes} so plugins\n * can register their keystrokes.\n *\n * E.g. an undo plugin would do this:\n *\n *\t\teditor.keystrokes.set( 'Ctrl+Z', 'undo' );\n *\t\teditor.keystrokes.set( 'Ctrl+Shift+Z', 'redo' );\n *\t\teditor.keystrokes.set( 'Ctrl+Y', 'redo' );\n *\n * @extends utils/keystrokehandler~KeystrokeHandler\n */\nexport default class EditingKeystrokeHandler extends KeystrokeHandler {\n\t/**\n\t * Creates an instance of the keystroke handler.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor\n\t */\n\tconstructor( editor ) {\n\t\tsuper();\n\n\t\t/**\n\t\t * The editor instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor}\n\t\t */\n\t\tthis.editor = editor;\n\t}\n\n\t/**\n\t * Registers a handler for the specified keystroke.\n\t *\n\t * The handler can be specified as a command name or a callback.\n\t *\n\t * @param {String|Array.<String|Number>} keystroke Keystroke defined in a format accepted by\n\t * the {@link module:utils/keyboard~parseKeystroke} function.\n\t * @param {Function|String} callback If a string is passed, then the keystroke will\n\t * {@link module:core/editor/editor~Editor#execute execute a command}.\n\t * If a function, then it will be called with the\n\t * {@link module:engine/view/observer/keyobserver~KeyEventData key event data} object and\n\t * a `cancel()` helper to both `preventDefault()` and `stopPropagation()` of the event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of the keystroke\n\t * callback. The higher the priority value the sooner the callback will be executed. Keystrokes having the same priority\n\t * are called in the order they were added.\n\t */\n\tset( keystroke, callback, options = {} ) {\n\t\tif ( typeof callback == 'string' ) {\n\t\t\tconst commandName = callback;\n\n\t\t\tcallback = ( evtData, cancel ) => {\n\t\t\t\tthis.editor.execute( commandName );\n\t\t\t\tcancel();\n\t\t\t};\n\t\t}\n\n\t\tsuper.set( keystroke, callback, options );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editor/editor\n */\n\nimport Config from '@ckeditor/ckeditor5-utils/src/config';\nimport EditingController from '@ckeditor/ckeditor5-engine/src/controller/editingcontroller';\nimport PluginCollection from '../plugincollection';\nimport CommandCollection from '../commandcollection';\nimport Locale from '@ckeditor/ckeditor5-utils/src/locale';\nimport DataController from '@ckeditor/ckeditor5-engine/src/controller/datacontroller';\nimport Conversion from '@ckeditor/ckeditor5-engine/src/conversion/conversion';\nimport Model from '@ckeditor/ckeditor5-engine/src/model/model';\nimport EditingKeystrokeHandler from '../editingkeystrokehandler';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Class representing a basic, generic editor.\n *\n * Check out the list of its subclasses to learn about specific editor implementations.\n *\n * All editor implementations (like {@link module:editor-classic/classiceditor~ClassicEditor} or\n * {@link module:editor-inline/inlineeditor~InlineEditor}) should extend this class. They can add their\n * own methods and properties.\n *\n * When you are implementing a plugin, then this editor represents the API\n * which your plugin can expect to get when using its {@link module:core/plugin~Plugin#editor} property.\n *\n * This API should be sufficient in order to implement the \"editing\" part of your feature\n * (schema definition, conversion, commands, keystrokes, etc.).\n * It does not define the editor UI, which is available only if the\n * the specific editor implements also the {@link module:core/editor/editorwithui~EditorWithUI} interface\n * (as most editor implementations do).\n *\n * @abstract\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Editor {\n\t/**\n\t * Creates a new instance of the Editor class.\n\t *\n\t * Usually, not to be used directly. See the static {@link module:core/editor/editor~Editor.create `create()`} method.\n\t *\n\t * @param {Object} [config] The editor config.\n\t */\n\tconstructor( config ) {\n\t\tconst availablePlugins = this.constructor.builtinPlugins;\n\n\t\t/**\n\t\t * Holds all configurations specific to this editor instance.\n\t\t *\n\t\t *\t\teditor.config.get( 'image.toolbar' );\n\t\t *\t\t// -> [ 'imageStyle:full', 'imageStyle:side', '|', 'imageTextAlternative' ]\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/config~Config}\n\t\t */\n\t\tthis.config = new Config( config, this.constructor.defaultConfig );\n\n\t\tthis.config.define( 'plugins', availablePlugins );\n\n\t\t/**\n\t\t * The plugins loaded and in use by this editor instance.\n\t\t *\n\t\t *\t\teditor.plugins.get( 'Clipboard' ); // -> instance of the Clipboard plugin.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/plugincollection~PluginCollection}\n\t\t */\n\t\tthis.plugins = new PluginCollection( this, availablePlugins );\n\n\t\t/**\n\t\t * Commands registered to the editor.\n\t\t *\n\t\t * Use the shorthand {@link #execute `editor.execute()`} method to execute commands:\n\t\t *\n\t\t *\t\t// Execute the bold command:\n\t\t *\t\teditor.execute( 'bold' );\n\t\t *\n\t\t *\t\t// Check the state of the bold command:\n\t\t *\t\teditor.commands.get( 'bold' ).value;\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/commandcollection~CommandCollection}\n\t\t */\n\t\tthis.commands = new CommandCollection();\n\n\t\t/**\n\t\t * @readonly\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = new Locale( this.config.get( 'language' ) );\n\n\t\t/**\n\t\t * Shorthand for {@link module:utils/locale~Locale#t}.\n\t\t *\n\t\t * @see module:utils/locale~Locale#t\n\t\t * @method #t\n\t\t */\n\t\tthis.t = this.locale.t;\n\n\t\t/**\n\t\t * Indicates the editor life-cycle state.\n\t\t *\n\t\t * The editor is in one of the following states:\n\t\t *\n\t\t * * `initializing` - during the editor initialization (before {@link module:core/editor/editor~Editor.create `Editor.create()`})\n\t\t * finished its job,\n\t\t * * `ready` - after the promise returned by the {@link module:core/editor/editor~Editor.create `Editor.create()`}\n\t\t * method is resolved,\n\t\t * * `destroyed` - once the {@link #destroy `editor.destroy()`} method was called.\n\t\t *\n\t\t * @observable\n\t\t * @member {'initializing'|'ready'|'destroyed'} #state\n\t\t */\n\t\tthis.set( 'state', 'initializing' );\n\t\tthis.once( 'ready', () => ( this.state = 'ready' ), { priority: 'high' } );\n\t\tthis.once( 'destroy', () => ( this.state = 'destroyed' ), { priority: 'high' } );\n\n\t\t/**\n\t\t * Defines whether this editor is in read-only mode.\n\t\t *\n\t\t * In read-only mode the editor {@link #commands commands} are disabled so it is not possible\n\t\t * to modify the document by using them. Also, the editable element(s) become non-editable.\n\t\t *\n\t\t * In order to make the editor read-only, you can set this value directly:\n\t\t *\n\t\t *\t\teditor.isReadOnly = true;\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * The editor's model.\n\t\t *\n\t\t * The central point of the editor's abstract data model.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model}\n\t\t */\n\t\tthis.model = new Model();\n\n\t\t/**\n\t\t * The {@link module:engine/controller/datacontroller~DataController data controller}.\n\t\t * Used e.g. for setting and retrieving editor data.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/controller/datacontroller~DataController}\n\t\t */\n\t\tthis.data = new DataController( this.model );\n\n\t\t/**\n\t\t * The {@link module:engine/controller/editingcontroller~EditingController editing controller}.\n\t\t * Controls user input and rendering the content for editing.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/controller/editingcontroller~EditingController}\n\t\t */\n\t\tthis.editing = new EditingController( this.model );\n\t\tthis.editing.view.document.bind( 'isReadOnly' ).to( this );\n\n\t\t/**\n\t\t * Conversion manager through which you can register model to view and view to model converters.\n\t\t *\n\t\t * See {@link module:engine/conversion/conversion~Conversion}'s documentation to learn how to add converters.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/conversion/conversion~Conversion}\n\t\t */\n\t\tthis.conversion = new Conversion( [ this.editing.downcastDispatcher, this.data.downcastDispatcher ], this.data.upcastDispatcher );\n\t\tthis.conversion.addAlias( 'dataDowncast', this.data.downcastDispatcher );\n\t\tthis.conversion.addAlias( 'editingDowncast', this.editing.downcastDispatcher );\n\n\t\t/**\n\t\t * Instance of the {@link module:core/editingkeystrokehandler~EditingKeystrokeHandler}.\n\t\t *\n\t\t * It allows setting simple keystrokes:\n\t\t *\n\t\t *\t\t// Execute the bold command on Ctrl+E:\n\t\t *\t\teditor.keystrokes.set( 'Ctrl+E', 'bold' );\n\t\t *\n\t\t *\t\t// Execute your own callback:\n\t\t *\t\teditor.keystrokes.set( 'Ctrl+E', ( data, cancel ) => {\n\t\t *\t\t\tconsole.log( data.keyCode );\n\t\t *\n\t\t *\t\t\t// Prevent default (native) action and stop the underlying keydown event\n\t\t *\t\t\t// so no other editor feature will interfere.\n\t\t *\t\t\tcancel();\n\t\t *\t\t} );\n\t\t *\n\t\t * Note: Certain, typing oriented keystrokes (like <kbd>Backspace</kbd> or <kbd>Enter</kbd>) are handled\n\t\t * by low level mechanism and trying to listen to them via the keystroke handler will not work reliably.\n\t\t * To handle those specific keystrokes see the events fired by the\n\t\t * {@link module:engine/view/document~Document editing view document} (`editor.editing.view.document`).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editingkeystrokehandler~EditingKeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new EditingKeystrokeHandler( this );\n\t\tthis.keystrokes.listenTo( this.editing.view.document );\n\t}\n\n\t/**\n\t * Loads and initializes plugins specified in the config.\n\t *\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which resolves\n\t * once the initialization is completed providing an array of loaded plugins.\n\t */\n\tinitPlugins() {\n\t\tconst config = this.config;\n\t\tconst plugins = config.get( 'plugins' ) || [];\n\t\tconst removePlugins = config.get( 'removePlugins' ) || [];\n\t\tconst extraPlugins = config.get( 'extraPlugins' ) || [];\n\n\t\treturn this.plugins.init( plugins.concat( extraPlugins ), removePlugins );\n\t}\n\n\t/**\n\t * Destroys the editor instance, releasing all resources used by it.\n\t *\n\t * **Note** The editor cannot be destroyed during the initialization phase so if it is called\n\t * while the editor {@link #state is being initialized}, it will wait for the editor initialization before destroying it.\n\t *\n\t * @fires destroy\n\t * @returns {Promise} A promise that resolves once the editor instance is fully destroyed.\n\t */\n\tdestroy() {\n\t\tlet readyPromise = Promise.resolve();\n\n\t\tif ( this.state == 'initializing' ) {\n\t\t\treadyPromise = new Promise( resolve => this.once( 'ready', resolve ) );\n\t\t}\n\n\t\treturn readyPromise\n\t\t\t.then( () => {\n\t\t\t\tthis.fire( 'destroy' );\n\t\t\t\tthis.stopListening();\n\t\t\t\tthis.commands.destroy();\n\t\t\t} )\n\t\t\t.then( () => this.plugins.destroy() )\n\t\t\t.then( () => {\n\t\t\t\tthis.model.destroy();\n\t\t\t\tthis.data.destroy();\n\t\t\t\tthis.editing.destroy();\n\t\t\t\tthis.keystrokes.destroy();\n\t\t\t} );\n\t}\n\n\t/**\n\t * Executes specified command with given parameters.\n\t *\n\t * Shorthand for:\n\t *\n\t *\t\teditor.commands.get( commandName ).execute( ... );\n\t *\n\t * @param {String} commandName Name of command to execute.\n\t * @param {*} [...commandParams] Command parameters.\n\t */\n\texecute( ...args ) {\n\t\tthis.commands.execute( ...args );\n\t}\n\n\t/**\n\t * Creates and initializes a new editor instance.\n\t *\n\t * This is an abstract method. Every editor type needs to implement its own initialization logic.\n\t *\n\t * See the `create()` methods of the existing editor types to learn how to use them:\n\t *\n\t * * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}\n\t * * {@link module:editor-balloon/ballooneditor~BalloonEditor.create `BalloonEditor.create()`}\n\t * * {@link module:editor-decoupled/decouplededitor~DecoupledEditor.create `DecoupledEditor.create()`}\n\t * * {@link module:editor-inline/inlineeditor~InlineEditor.create `InlineEditor.create()`}\n\t *\n\t * @abstract\n\t * @method module:core/editor/editor~Editor.create\n\t */\n}\n\nmix( Editor, ObservableMixin );\n\n/**\n * Fired when {@link module:engine/controller/datacontroller~DataController#event:ready data} and all additional\n * editor components are ready.\n *\n * Note: This event is most useful for plugin developers. When integrating the editor with your website or\n * application you do not have to listen to `editor#ready` because when the promise returned by the static\n * {@link module:core/editor/editor~Editor.create `Editor.create()`} event is resolved, the editor is already ready.\n * In fact, since the first moment when the editor instance is available to you is inside `then()`'s callback,\n * you cannot even add a listener to the `editor#ready` event.\n *\n * See also the {@link #state `editor.state`} property.\n *\n * @event ready\n */\n\n/**\n * Fired when this editor instance is destroyed. The editor at this point is not usable and this event should be used to\n * perform the clean-up in any plugin.\n *\n *\n * See also the {@link #state `editor.state`} property.\n *\n * @event destroy\n */\n\n/**\n * This error is thrown when a user tries to use a `<textarea>` element to create a non-classic editor in it.\n *\n * Textarea element represents a plain-text and cannot be used as a editable root element with included CKEditor5.\n * Content of an editor should be nicely present to the user and show him how it's going to looks like. Textarea element\n * doesn't support such behavior.\n *\n * Only {@glink builds/guides/overview#classic-editor Classic Editor} has implemented a special system, which\n * **replace** DOM element and load data from it\n * ({@link module:editor-classic/classiceditor~ClassicEditor.create more information}). All other editors\n * use an existing element, load data from it and make this element editable. Details about behaviour of each editor\n * might be found in an associated description of a `create` method of each editor.\n *\n * @error editor-wrong-element\n */\n\n/**\n * An array of plugins built into this editor class.\n * It is used in CKEditor 5 builds to provide a list of plugins which are later automatically initialized\n * during the editor initialization.\n *\n * They will be automatically initialized by the editor, unless listed in `config.removePlugins` and\n * unless `config.plugins` is passed.\n *\n *\t\t// Build some plugins into the editor class first.\n *\t\tClassicEditor.builtinPlugins = [ FooPlugin, BarPlugin ];\n *\n *\t\t// Normally, you need to define config.plugins, but since ClassicEditor.builtinPlugins was\n *\t\t// defined, now you can call create() without any configuration.\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> instance of the Foo plugin\n *\t\t\t\teditor.plugins.get( BarPlugin ); // -> instance of the Bar plugin\n *\t\t\t} );\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, {\n *\t\t\t\t// Don't initialize this plugins (note: it's defined by a string):\n *\t\t\t\tremovePlugins: [ 'Foo' ]\n *\t\t\t} )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> undefined\n *\t\t\t\teditor.config.get( BarPlugin ); // -> instance of the Bar plugin\n *\t\t\t} );\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, {\n *\t\t\t\t// Load only this plugin. Can also be define by a string if\n *\t\t\t\t// this plugin was built into the editor class.\n *\t\t\t\tplugins: [ FooPlugin ]\n *\t\t\t} )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.plugins.get( FooPlugin ); // -> instance of the Foo plugin\n *\t\t\t\teditor.config.get( BarPlugin ); // -> undefined\n *\t\t\t} );\n *\n * See also {@link module:core/editor/editor~Editor.defaultConfig}.\n *\n * @static\n * @member {Array.<Function>} module:core/editor/editor~Editor.builtinPlugins\n */\n\n/**\n * The default config which is built into the editor class.\n * It is used in CKEditor 5 builds to provide the default config options which are later used during editor initialization.\n *\n *\t\tClassicEditor.defaultConfig = {\n *\t\t\tfoo: 1,\n *\t\t\tbar: 2\n *\t\t};\n *\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.config.get( 'foo' ); // -> 1\n *\t\t\t\teditor.config.get( 'bar' ); // -> 2\n *\t\t\t} );\n *\n *\t\t// The default options can be overridden by the config passed to create().\n *\t\tClassicEditor\n *\t\t\t.create( sourceElement, { bar: 3 } )\n *\t\t\t.then( editor => {\n *\t\t\t\teditor.config.get( 'foo' ); // -> 1\n *\t\t\t\teditor.config.get( 'bar' ); // -> 3\n *\t\t\t} );\n *\n * See also {@link module:core/editor/editor~Editor.builtinPlugins}.\n *\n * @static\n * @member {Object} module:core/editor/editor~Editor.defaultConfig\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/utils/changebuffer\n */\n\n/**\n * Change buffer allows to group atomic changes (like characters that have been typed) into\n * {@link module:engine/model/batch~Batch batches}.\n *\n * Batches represent single undo steps, hence changes added to one single batch are undone together.\n *\n * The buffer has a configurable limit of atomic changes that it can accommodate. After the limit was\n * exceeded (see {@link ~ChangeBuffer#input}), a new batch is created in {@link ~ChangeBuffer#batch}.\n *\n * To use the change buffer you need to let it know about the number of changes that were added to the batch:\n *\n *\t\tconst buffer = new ChangeBuffer( model, LIMIT );\n *\n *\t\t// Later on in your feature:\n *\t\tbuffer.batch.insert( pos, insertedCharacters );\n *\t\tbuffer.input( insertedCharacters.length );\n *\n */\nexport default class ChangeBuffer {\n\t/**\n\t * Creates a new instance of the change buffer.\n\t *\n\t * @param {module:engine/model/model~Model} model\n\t * @param {Number} [limit=20] The maximum number of atomic changes which can be contained in one batch.\n\t */\n\tconstructor( model, limit = 20 ) {\n\t\t/**\n\t\t * The model instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model} #model\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * The number of atomic changes in the buffer. Once it exceeds the {@link #limit},\n\t\t * the {@link #batch batch} is set to a new one.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #size\n\t\t */\n\t\tthis.size = 0;\n\n\t\t/**\n\t\t * The maximum number of atomic changes which can be contained in one batch.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #limit\n\t\t */\n\t\tthis.limit = limit;\n\n\t\t/**\n\t\t * Whether the buffer is locked. A locked buffer cannot be reset unless it gets unlocked.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isLocked\n\t\t */\n\t\tthis.isLocked = false;\n\n\t\t// The function to be called in order to notify the buffer about batches which appeared in the document.\n\t\t// The callback will check whether it is a new batch and in that case the buffer will be flushed.\n\t\t//\n\t\t// The reason why the buffer needs to be flushed whenever a new batch appears is that the changes added afterwards\n\t\t// should be added to a new batch. For instance, when the  user types, then inserts an image, and then types again,\n\t\t// the characters typed after inserting the image should be added to a different batch than the characters typed before.\n\t\tthis._changeCallback = ( evt, batch ) => {\n\t\t\tif ( batch.type != 'transparent' && batch !== this._batch ) {\n\t\t\t\tthis._reset( true );\n\t\t\t}\n\t\t};\n\n\t\tthis._selectionChangeCallback = () => {\n\t\t\tthis._reset();\n\t\t};\n\n\t\tthis.model.document.on( 'change', this._changeCallback );\n\n\t\tthis.model.document.selection.on( 'change:range', this._selectionChangeCallback );\n\t\tthis.model.document.selection.on( 'change:attribute', this._selectionChangeCallback );\n\n\t\t/**\n\t\t * The current batch instance.\n\t\t *\n\t\t * @private\n\t\t * @member #_batch\n\t\t */\n\n\t\t/**\n\t\t * The callback to document the change event which later needs to be removed.\n\t\t *\n\t\t * @private\n\t\t * @member #_changeCallback\n\t\t */\n\n\t\t/**\n\t\t * The callback to document selection `change:attribute` and `change:range` events which resets the buffer.\n\t\t *\n\t\t * @private\n\t\t * @member #_selectionChangeCallback\n\t\t */\n\t}\n\n\t/**\n\t * The current batch to which a feature should add its operations. Once the {@link #size}\n\t * is reached or exceeds the {@link #limit}, the batch is set to a new instance and the size is reset.\n\t *\n\t * @type {module:engine/model/batch~Batch}\n\t */\n\tget batch() {\n\t\tif ( !this._batch ) {\n\t\t\tthis._batch = this.model.createBatch();\n\t\t}\n\n\t\treturn this._batch;\n\t}\n\n\t/**\n\t * The input number of changes into the buffer. Once the {@link #size} is\n\t * reached or exceeds the {@link #limit}, the batch is set to a new instance and the size is reset.\n\t *\n\t * @param {Number} changeCount The number of atomic changes to input.\n\t */\n\tinput( changeCount ) {\n\t\tthis.size += changeCount;\n\n\t\tif ( this.size >= this.limit ) {\n\t\t\tthis._reset( true );\n\t\t}\n\t}\n\n\t/**\n\t * Locks the buffer.\n\t */\n\tlock() {\n\t\tthis.isLocked = true;\n\t}\n\n\t/**\n\t * Unlocks the buffer.\n\t */\n\tunlock() {\n\t\tthis.isLocked = false;\n\t}\n\n\t/**\n\t * Destroys the buffer.\n\t */\n\tdestroy() {\n\t\tthis.model.document.off( 'change', this._changeCallback );\n\t\tthis.model.document.selection.off( 'change:range', this._selectionChangeCallback );\n\t\tthis.model.document.selection.off( 'change:attribute', this._selectionChangeCallback );\n\t}\n\n\t/**\n\t * Resets the change buffer.\n\t *\n\t * @private\n\t * @param {Boolean} [ignoreLock] Whether internal lock {@link #isLocked} should be ignored.\n\t */\n\t_reset( ignoreLock ) {\n\t\tif ( !this.isLocked || ignoreLock ) {\n\t\t\tthis._batch = null;\n\t\t\tthis.size = 0;\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/inputcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\nimport ChangeBuffer from './utils/changebuffer';\n\n/**\n * The input command. Used by the {@link module:typing/input~Input input feature} to handle typing.\n *\n * @extends module:core/command~Command\n */\nexport default class InputCommand extends Command {\n\t/**\n\t * Creates an instance of the command.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {Number} undoStepSize The maximum number of atomic changes\n\t * which can be contained in one batch in the command buffer.\n\t */\n\tconstructor( editor, undoStepSize ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * Typing's change buffer used to group subsequent changes into batches.\n\t\t *\n\t\t * @readonly\n\t\t * @private\n\t\t * @member {module:typing/utils/changebuffer~ChangeBuffer} #_buffer\n\t\t */\n\t\tthis._buffer = new ChangeBuffer( editor.model, undoStepSize );\n\t}\n\n\t/**\n\t * The current change buffer.\n\t *\n\t * @type {module:typing/utils/changebuffer~ChangeBuffer}\n\t */\n\tget buffer() {\n\t\treturn this._buffer;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tthis._buffer.destroy();\n\t}\n\n\t/**\n\t * Executes the input command. It replaces the content within the given range with the given text.\n\t * Replacing is a two step process, first the content within the range is removed and then the new text is inserted\n\t * at the beginning of the range (which after the removal is a collapsed range).\n\t *\n\t * @fires execute\n\t * @param {Object} [options] The command options.\n\t * @param {String} [options.text=''] The text to be inserted.\n\t * @param {module:engine/model/range~Range} [options.range] The range in which the text is inserted. Defaults\n\t * to the first range in the current selection.\n\t * @param {module:engine/model/range~Range} [options.resultRange] The range where the selection\n\t * should be placed after the insertion. If not specified, the selection will be placed right after\n\t * the inserted text.\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst text = options.text || '';\n\t\tconst textInsertions = text.length;\n\t\tconst range = options.range || doc.selection.getFirstRange();\n\t\tconst resultRange = options.resultRange;\n\n\t\tmodel.enqueueChange( this._buffer.batch, writer => {\n\t\t\tconst isCollapsedRange = range.isCollapsed;\n\n\t\t\tthis._buffer.lock();\n\n\t\t\tmodel.deleteContent( model.createSelection( range ) );\n\n\t\t\tif ( text ) {\n\t\t\t\tmodel.insertContent( writer.createText( text, doc.selection.getAttributes() ), range.start );\n\t\t\t}\n\n\t\t\tif ( resultRange ) {\n\t\t\t\twriter.setSelection( resultRange );\n\t\t\t} else if ( isCollapsedRange ) {\n\t\t\t\t// If range was collapsed just shift the selection by the number of inserted characters.\n\t\t\t\twriter.setSelection( range.start.getShiftedBy( textInsertions ) );\n\t\t\t}\n\n\t\t\tthis._buffer.unlock();\n\n\t\t\tthis._buffer.input( textInsertions );\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/utils/injectunsafekeystrokeshandling\n */\n\nimport { getCode } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Handles keystrokes which are unsafe for typing. This handler's logic is explained\n * in https://github.com/ckeditor/ckeditor5-typing/issues/83#issuecomment-398690251.\n *\n * @param {module:core/editor/editor~Editor} editor The editor instance.\n */\nexport default function injectUnsafeKeystrokesHandling( editor ) {\n\tlet latestCompositionSelection = null;\n\n\tconst model = editor.model;\n\tconst view = editor.editing.view;\n\tconst inputCommand = editor.commands.get( 'input' );\n\n\t// For Android, we want to handle keystrokes on `beforeinput` to be sure that code in `DeleteObserver` already had a chance to be fired.\n\t/* istanbul ignore if */\n\tif ( env.isAndroid ) {\n\t\tview.document.on( 'beforeinput', ( evt, evtData ) => handleUnsafeKeystroke( evtData ), { priority: 'lowest' } );\n\t} else {\n\t\tview.document.on( 'keydown', ( evt, evtData ) => handleUnsafeKeystroke( evtData ), { priority: 'lowest' } );\n\t}\n\n\tview.document.on( 'compositionstart', handleCompositionStart, { priority: 'lowest' } );\n\n\tview.document.on( 'compositionend', () => {\n\t\tlatestCompositionSelection = model.createSelection( model.document.selection );\n\t}, { priority: 'lowest' } );\n\n\t// Handles the keydown event. We need to guess whether such keystroke is going to result\n\t// in typing. If so, then before character insertion happens, any selected content needs\n\t// to be deleted. Otherwise the default browser deletion mechanism would be\n\t// triggered, resulting in:\n\t//\n\t// * Hundreds of mutations which could not be handled.\n\t// * But most importantly, loss of control over how the content is being deleted.\n\t//\n\t// The method is used in a low-priority listener, hence allowing other listeners (e.g. delete or enter features)\n\t// to handle the event.\n\t//\n\t// @param {module:engine/view/observer/keyobserver~KeyEventData} evtData\n\tfunction handleUnsafeKeystroke( evtData ) {\n\t\tconst doc = model.document;\n\t\tconst isComposing = view.document.isComposing;\n\t\tconst isSelectionUnchanged = latestCompositionSelection && latestCompositionSelection.isEqual( doc.selection );\n\n\t\t// Reset stored composition selection.\n\t\tlatestCompositionSelection = null;\n\n\t\t// By relying on the state of the input command we allow disabling the entire input easily\n\t\t// by just disabling the input command. We could’ve used here the delete command but that\n\t\t// would mean requiring the delete feature which would block loading one without the other.\n\t\t// We could also check the editor.isReadOnly property, but that wouldn't allow to block\n\t\t// the input without blocking other features.\n\t\tif ( !inputCommand.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isSafeKeystroke( evtData ) || doc.selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If during composition, deletion should be prevented as it may remove composed sequence (#83).\n\t\tif ( isComposing && evtData.keyCode === 229 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there is a `keydown` event fired with '229' keycode it might be related\n\t\t// to recent composition. Check if selection is the same as upon ending recent composition,\n\t\t// if so do not remove selected content as it will remove composed sequence (#83).\n\t\tif ( !isComposing && evtData.keyCode === 229 && isSelectionUnchanged ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdeleteSelectionContent();\n\t}\n\n\t// Handles the `compositionstart` event. It is used only in special cases to remove the contents\n\t// of a non-collapsed selection so composition itself does not result in complex mutations.\n\t//\n\t// The special case mentioned above is a situation in which the `keydown` event is fired after\n\t// `compositionstart` event. In such cases {@link #handleKeydown} cannot clear current selection\n\t// contents (because it is too late and will break the composition) so the composition handler takes care of it.\n\tfunction handleCompositionStart() {\n\t\tconst doc = model.document;\n\t\tconst isFlatSelection = doc.selection.rangeCount === 1 ? doc.selection.getFirstRange().isFlat : true;\n\n\t\t// If on `compositionstart` there is a non-collapsed selection which start and end have different parents\n\t\t// it means the `handleKeydown()` method did not remove its contents. It happens usually because\n\t\t// of different order of events (`compositionstart` before `keydown` - in Safari). In such cases\n\t\t// we need to remove selection contents on composition start (#83).\n\t\tif ( doc.selection.isCollapsed || isFlatSelection ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdeleteSelectionContent();\n\t}\n\n\tfunction deleteSelectionContent() {\n\t\tconst buffer = inputCommand.buffer;\n\n\t\tbuffer.lock();\n\n\t\tmodel.enqueueChange( buffer.batch, () => {\n\t\t\tmodel.deleteContent( model.document.selection );\n\t\t} );\n\n\t\tbuffer.unlock();\n\t}\n}\n\nconst safeKeycodes = [\n\tgetCode( 'arrowUp' ),\n\tgetCode( 'arrowRight' ),\n\tgetCode( 'arrowDown' ),\n\tgetCode( 'arrowLeft' ),\n\t9, // Tab\n\t16, // Shift\n\t17, // Ctrl\n\t18, // Alt\n\t19, // Pause\n\t20, // CapsLock\n\t27, // Escape\n\t33, // PageUp\n\t34, // PageDown\n\t35, // Home\n\t36, // End,\n\t45, // Insert,\n\t91, // Windows,\n\t93, // Menu key,\n\t144, // NumLock\n\t145, // ScrollLock,\n\t173, // Mute/Unmute\n\t174, // Volume up\n\t175, // Volume down,\n\t176, // Next song,\n\t177, // Previous song,\n\t178, // Stop,\n\t179, // Play/Pause,\n\t255 // Display brightness (increase and decrease)\n];\n\n// Function keys.\nfor ( let code = 112; code <= 135; code++ ) {\n\tsafeKeycodes.push( code );\n}\n\n// Returns `true` if a keystroke should not cause any content change caused by \"typing\".\n//\n// Note: This implementation is very simple and will need to be refined with time.\n//\n// @private\n// @param {engine.view.observer.keyObserver.KeyEventData} keyData\n// @returns {Boolean}\nfunction isSafeKeystroke( keyData ) {\n\t// Keystrokes which contain Ctrl don't represent typing.\n\tif ( keyData.ctrlKey ) {\n\t\treturn true;\n\t}\n\n\treturn safeKeycodes.includes( keyData.keyCode );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/utils/utils\n */\n\nimport diff from '@ckeditor/ckeditor5-utils/src/diff';\nimport diffToChanges from '@ckeditor/ckeditor5-utils/src/difftochanges';\n\n/**\n * Returns true if container children have mutated or more than a single text node was changed.\n *\n * @private\n * @param {Array.<module:engine/view/observer/mutationobserver~MutatedText|\n * module:engine/view/observer/mutationobserver~MutatedChildren>} mutations\n * @returns {Boolean}\n */\nexport function containerChildrenMutated( mutations ) {\n\tif ( mutations.length == 0 ) {\n\t\treturn false;\n\t}\n\n\t// Check if there is any mutation of `children` type or any mutation that changes more than one text node.\n\tfor ( const mutation of mutations ) {\n\t\tif ( mutation.type === 'children' && !getSingleTextNodeChange( mutation ) ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Returns change made to a single text node.\n *\n * @private\n * @param {module:engine/view/observer/mutationobserver~MutatedText|\n * module:engine/view/observer/mutationobserver~MutatedChildren} mutation\n * @returns {Object|undefined} Change object (see {@link module:utils/difftochanges~diffToChanges} output)\n * or undefined if more than a single text node was changed.\n */\nexport function getSingleTextNodeChange( mutation ) {\n\t// One new node.\n\tif ( mutation.newChildren.length - mutation.oldChildren.length != 1 ) {\n\t\treturn;\n\t}\n\n\t// Which is text.\n\tconst diffResult = diff( mutation.oldChildren, mutation.newChildren, compareChildNodes );\n\tconst changes = diffToChanges( diffResult, mutation.newChildren );\n\n\t// In case of [ delete, insert, insert ] the previous check will not exit.\n\tif ( changes.length > 1 ) {\n\t\treturn;\n\t}\n\n\tconst change = changes[ 0 ];\n\n\t// Which is text.\n\tif ( !( !!change.values[ 0 ] && change.values[ 0 ].is( 'text' ) ) ) {\n\t\treturn;\n\t}\n\n\treturn change;\n}\n\n/**\n * Checks whether two view nodes are identical, which means they are the same object\n * or contain exactly same data (in case of text nodes).\n *\n * @private\n * @param {module:engine/view/node~Node} oldChild\n * @param {module:engine/view/node~Node} newChild\n * @returns {Boolean}\n */\nexport function compareChildNodes( oldChild, newChild ) {\n\tif ( !!oldChild && oldChild.is( 'text' ) && !!newChild && newChild.is( 'text' ) ) {\n\t\treturn oldChild.data === newChild.data;\n\t} else {\n\t\treturn oldChild === newChild;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/difftochanges\n */\n\n/**\n * Creates a set of changes which need to be applied to the input in order to transform\n * it into the output. This function can be used with strings or arrays.\n *\n *\t\tconst input = Array.from( 'abc' );\n *\t\tconst output = Array.from( 'xaby' );\n *\t\tconst changes = diffToChanges( diff( input, output ), output );\n *\n *\t\tchanges.forEach( change => {\n *\t\t\tif ( change.type == 'insert' ) {\n *\t\t\t\tinput.splice( change.index, 0, ...change.values );\n *\t\t\t} else if ( change.type == 'delete' ) {\n *\t\t\t\tinput.splice( change.index, change.howMany );\n *\t\t\t}\n *\t\t} );\n *\n *\t\tinput.join( '' ) == output.join( '' ); // -> true\n *\n * @param {Array.<'equal'|'insert'|'delete'>} diff Result of {@link module:utils/diff~diff}.\n * @param {String|Array} output The string or array which was passed as diff's output.\n * @returns {Array.<Object>} Set of changes (insert or delete) which need to be applied to the input\n * in order to transform it into the output.\n */\nexport default function diffToChanges( diff, output ) {\n\tconst changes = [];\n\tlet index = 0;\n\tlet lastOperation;\n\n\tdiff.forEach( change => {\n\t\tif ( change == 'equal' ) {\n\t\t\tpushLast();\n\n\t\t\tindex++;\n\t\t} else if ( change == 'insert' ) {\n\t\t\tif ( isContinuationOf( 'insert' ) ) {\n\t\t\t\tlastOperation.values.push( output[ index ] );\n\t\t\t} else {\n\t\t\t\tpushLast();\n\n\t\t\t\tlastOperation = {\n\t\t\t\t\ttype: 'insert',\n\t\t\t\t\tindex,\n\t\t\t\t\tvalues: [ output[ index ] ]\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tindex++;\n\t\t} else /* if ( change == 'delete' ) */ {\n\t\t\tif ( isContinuationOf( 'delete' ) ) {\n\t\t\t\tlastOperation.howMany++;\n\t\t\t} else {\n\t\t\t\tpushLast();\n\n\t\t\t\tlastOperation = {\n\t\t\t\t\ttype: 'delete',\n\t\t\t\t\tindex,\n\t\t\t\t\thowMany: 1\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t} );\n\n\tpushLast();\n\n\treturn changes;\n\n\tfunction pushLast() {\n\t\tif ( lastOperation ) {\n\t\t\tchanges.push( lastOperation );\n\t\t\tlastOperation = null;\n\t\t}\n\t}\n\n\tfunction isContinuationOf( expected ) {\n\t\treturn lastOperation && lastOperation.type == expected;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/utils/injecttypingmutationshandling\n */\n\nimport diff from '@ckeditor/ckeditor5-utils/src/diff';\nimport DomConverter from '@ckeditor/ckeditor5-engine/src/view/domconverter';\n\nimport { getSingleTextNodeChange, containerChildrenMutated } from './utils';\n\n/**\n * Handles mutations caused by normal typing.\n *\n * @param {module:core/editor/editor~Editor} editor The editor instance.\n */\nexport default function injectTypingMutationsHandling( editor ) {\n\teditor.editing.view.document.on( 'mutations', ( evt, mutations, viewSelection ) => {\n\t\tnew MutationHandler( editor ).handle( mutations, viewSelection );\n\t} );\n}\n\n/**\n * Helper class for translating DOM mutations into model changes.\n *\n * @private\n */\nclass MutationHandler {\n\t/**\n\t * Creates an instance of the mutation handler.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * Editor instance for which mutations are handled.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor} #editor\n\t\t */\n\t\tthis.editor = editor;\n\n\t\t/**\n\t\t * The editing controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/controller/editingcontroller~EditingController} #editing\n\t\t */\n\t\tthis.editing = this.editor.editing;\n\t}\n\n\t/**\n\t * Handles given mutations.\n\t *\n\t * @param {Array.<module:engine/view/observer/mutationobserver~MutatedText|\n\t * module:engine/view/observer/mutationobserver~MutatedChildren>} mutations\n\t * @param {module:engine/view/selection~Selection|null} viewSelection\n\t */\n\thandle( mutations, viewSelection ) {\n\t\tif ( containerChildrenMutated( mutations ) ) {\n\t\t\tthis._handleContainerChildrenMutations( mutations, viewSelection );\n\t\t} else {\n\t\t\tfor ( const mutation of mutations ) {\n\t\t\t\t// Fortunately it will never be both.\n\t\t\t\tthis._handleTextMutation( mutation, viewSelection );\n\t\t\t\tthis._handleTextNodeInsertion( mutation );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handles situations when container's children mutated during input. This can happen when\n\t * the browser is trying to \"fix\" DOM in certain situations. For example, when the user starts to type\n\t * in `<p><a href=\"\"><i>Link{}</i></a></p>`, the browser might change the order of elements\n\t * to `<p><i><a href=\"\">Link</a>x{}</i></p>`. A similar situation happens when the spell checker\n\t * replaces a word wrapped with `<strong>` with a word wrapped with a `<b>` element.\n\t *\n\t * To handle such situations, the common DOM ancestor of all mutations is converted to the model representation\n\t * and then compared with the current model to calculate the proper text change.\n\t *\n\t * Note: Single text node insertion is handled in {@link #_handleTextNodeInsertion} and text node mutation is handled\n\t * in {@link #_handleTextMutation}).\n\t *\n\t * @private\n\t * @param {Array.<module:engine/view/observer/mutationobserver~MutatedText|\n\t * module:engine/view/observer/mutationobserver~MutatedChildren>} mutations\n\t * @param {module:engine/view/selection~Selection|null} viewSelection\n\t */\n\t_handleContainerChildrenMutations( mutations, viewSelection ) {\n\t\t// Get common ancestor of all mutations.\n\t\tconst mutationsCommonAncestor = getMutationsContainer( mutations );\n\n\t\t// Quit if there is no common ancestor.\n\t\tif ( !mutationsCommonAncestor ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domConverter = this.editor.editing.view.domConverter;\n\n\t\t// Get common ancestor in DOM.\n\t\tconst domMutationCommonAncestor = domConverter.mapViewToDom( mutationsCommonAncestor );\n\n\t\t// Create fresh DomConverter so it will not use existing mapping and convert current DOM to model.\n\t\t// This wouldn't be needed if DomConverter would allow to create fresh view without checking any mappings.\n\t\tconst freshDomConverter = new DomConverter();\n\t\tconst modelFromCurrentDom = this.editor.data.toModel(\n\t\t\tfreshDomConverter.domToView( domMutationCommonAncestor )\n\t\t).getChild( 0 );\n\n\t\t// Current model.\n\t\tconst currentModel = this.editor.editing.mapper.toModelElement( mutationsCommonAncestor );\n\n\t\t// If common ancestor is not mapped, do not do anything. It probably is a parent of another view element.\n\t\t// That means that we would need to diff model elements (see `if` below). Better return early instead of\n\t\t// trying to get a reasonable model ancestor. It will fell into the `if` below anyway.\n\t\t// This situation happens for example for lists. If `<ul>` is a common ancestor, `currentModel` is `undefined`\n\t\t// because `<ul>` is not mapped (`<li>`s are).\n\t\t// See https://github.com/ckeditor/ckeditor5/issues/718.\n\t\tif ( !currentModel ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get children from both ancestors.\n\t\tconst modelFromDomChildren = Array.from( modelFromCurrentDom.getChildren() );\n\t\tconst currentModelChildren = Array.from( currentModel.getChildren() );\n\n\t\t// Remove the last `<softBreak>` from the end of `modelFromDomChildren` if there is no `<softBreak>` in current model.\n\t\t// If the described scenario happened, it means that this is a bogus `<br />` added by a browser.\n\t\tconst lastDomChild = modelFromDomChildren[ modelFromDomChildren.length - 1 ];\n\t\tconst lastCurrentChild = currentModelChildren[ currentModelChildren.length - 1 ];\n\n\t\tif ( lastDomChild && lastDomChild.is( 'softBreak' ) && lastCurrentChild && !lastCurrentChild.is( 'softBreak' ) ) {\n\t\t\tmodelFromDomChildren.pop();\n\t\t}\n\n\t\tconst schema = this.editor.model.schema;\n\n\t\t// Skip situations when common ancestor has any container elements.\n\t\tif ( !isSafeForTextMutation( modelFromDomChildren, schema ) || !isSafeForTextMutation( currentModelChildren, schema ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Replace &nbsp; inserted by the browser with normal space. See comment in `_handleTextMutation`.\n\t\t// Replace non-texts with any character. This is potentially dangerous but passes in manual tests. The thing is\n\t\t// that we need to take care of proper indexes so we cannot simply remove non-text elements from the content.\n\t\t// By inserting a character we keep all the real texts on their indexes.\n\t\tconst newText = modelFromDomChildren.map( item => item.is( 'text' ) ? item.data : '@' ).join( '' ).replace( /\\u00A0/g, ' ' );\n\t\tconst oldText = currentModelChildren.map( item => item.is( 'text' ) ? item.data : '@' ).join( '' ).replace( /\\u00A0/g, ' ' );\n\n\t\t// Do nothing if mutations created same text.\n\t\tif ( oldText === newText ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst diffResult = diff( oldText, newText );\n\n\t\tconst { firstChangeAt, insertions, deletions } = calculateChanges( diffResult );\n\n\t\t// Try setting new model selection according to passed view selection.\n\t\tlet modelSelectionRange = null;\n\n\t\tif ( viewSelection ) {\n\t\t\tmodelSelectionRange = this.editing.mapper.toModelRange( viewSelection.getFirstRange() );\n\t\t}\n\n\t\tconst insertText = newText.substr( firstChangeAt, insertions );\n\t\tconst removeRange = this.editor.model.createRange(\n\t\t\tthis.editor.model.createPositionAt( currentModel, firstChangeAt ),\n\t\t\tthis.editor.model.createPositionAt( currentModel, firstChangeAt + deletions )\n\t\t);\n\n\t\tthis.editor.execute( 'input', {\n\t\t\ttext: insertText,\n\t\t\trange: removeRange,\n\t\t\tresultRange: modelSelectionRange\n\t\t} );\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_handleTextMutation( mutation, viewSelection ) {\n\t\tif ( mutation.type != 'text' ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Replace &nbsp; inserted by the browser with normal space.\n\t\t// We want only normal spaces in the model and in the view. Renderer and DOM Converter will be then responsible\n\t\t// for rendering consecutive spaces using &nbsp;, but the model and the view has to be clear.\n\t\t// Other feature may introduce inserting non-breakable space on specific key stroke (for example shift + space).\n\t\t// However then it will be handled outside of mutations, like enter key is.\n\t\t// The replacing is here because it has to be done before `diff` and `diffToChanges` functions, as they\n\t\t// take `newText` and compare it to (cleaned up) view.\n\t\t// It could also be done in mutation observer too, however if any outside plugin would like to\n\t\t// introduce additional events for mutations, they would get already cleaned up version (this may be good or not).\n\t\tconst newText = mutation.newText.replace( /\\u00A0/g, ' ' );\n\t\t// To have correct `diffResult`, we also compare view node text data with &nbsp; replaced by space.\n\t\tconst oldText = mutation.oldText.replace( /\\u00A0/g, ' ' );\n\n\t\t// Do nothing if mutations created same text.\n\t\tif ( oldText === newText ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst diffResult = diff( oldText, newText );\n\n\t\tconst { firstChangeAt, insertions, deletions } = calculateChanges( diffResult );\n\n\t\t// Try setting new model selection according to passed view selection.\n\t\tlet modelSelectionRange = null;\n\n\t\tif ( viewSelection ) {\n\t\t\tmodelSelectionRange = this.editing.mapper.toModelRange( viewSelection.getFirstRange() );\n\t\t}\n\n\t\t// Get the position in view and model where the changes will happen.\n\t\tconst viewPos = this.editing.view.createPositionAt( mutation.node, firstChangeAt );\n\t\tconst modelPos = this.editing.mapper.toModelPosition( viewPos );\n\t\tconst removeRange = this.editor.model.createRange( modelPos, modelPos.getShiftedBy( deletions ) );\n\t\tconst insertText = newText.substr( firstChangeAt, insertions );\n\n\t\tthis.editor.execute( 'input', {\n\t\t\ttext: insertText,\n\t\t\trange: removeRange,\n\t\t\tresultRange: modelSelectionRange\n\t\t} );\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_handleTextNodeInsertion( mutation ) {\n\t\tif ( mutation.type != 'children' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst change = getSingleTextNodeChange( mutation );\n\t\tconst viewPos = this.editing.view.createPositionAt( mutation.node, change.index );\n\t\tconst modelPos = this.editing.mapper.toModelPosition( viewPos );\n\t\tconst insertedText = change.values[ 0 ].data;\n\n\t\tthis.editor.execute( 'input', {\n\t\t\t// Replace &nbsp; inserted by the browser with normal space.\n\t\t\t// See comment in `_handleTextMutation`.\n\t\t\t// In this case we don't need to do this before `diff` because we diff whole nodes.\n\t\t\t// Just change &nbsp; in case there are some.\n\t\t\ttext: insertedText.replace( /\\u00A0/g, ' ' ),\n\t\t\trange: this.editor.model.createRange( modelPos )\n\t\t} );\n\t}\n}\n\n// Returns first common ancestor of all mutations that is either {@link module:engine/view/containerelement~ContainerElement}\n// or {@link module:engine/view/rootelement~RootElement}.\n//\n// @private\n// @param {Array.<module:engine/view/observer/mutationobserver~MutatedText|\n// module:engine/view/observer/mutationobserver~MutatedChildren>} mutations\n// @returns {module:engine/view/containerelement~ContainerElement|engine/view/rootelement~RootElement|undefined}\nfunction getMutationsContainer( mutations ) {\n\tconst lca = mutations\n\t\t.map( mutation => mutation.node )\n\t\t.reduce( ( commonAncestor, node ) => {\n\t\t\treturn commonAncestor.getCommonAncestor( node, { includeSelf: true } );\n\t\t} );\n\n\tif ( !lca ) {\n\t\treturn;\n\t}\n\n\t// We need to look for container and root elements only, so check all LCA's\n\t// ancestors (starting from itself).\n\treturn lca.getAncestors( { includeSelf: true, parentFirst: true } )\n\t\t.find( element => element.is( 'containerElement' ) || element.is( 'rootElement' ) );\n}\n\n// Returns true if provided array contains content that won't be problematic during diffing and text mutation handling.\n//\n// @param {Array.<module:engine/model/node~Node>} children\n// @param {module:engine/model/schema~Schema} schema\n// @returns {Boolean}\nfunction isSafeForTextMutation( children, schema ) {\n\treturn children.every( child => schema.isInline( child ) );\n}\n\n// Calculates first change index and number of characters that should be inserted and deleted starting from that index.\n//\n// @private\n// @param diffResult\n// @returns {{insertions: number, deletions: number, firstChangeAt: *}}\nfunction calculateChanges( diffResult ) {\n\t// Index where the first change happens. Used to set the position from which nodes will be removed and where will be inserted.\n\tlet firstChangeAt = null;\n\t// Index where the last change happens. Used to properly count how many characters have to be removed and inserted.\n\tlet lastChangeAt = null;\n\n\t// Get `firstChangeAt` and `lastChangeAt`.\n\tfor ( let i = 0; i < diffResult.length; i++ ) {\n\t\tconst change = diffResult[ i ];\n\n\t\tif ( change != 'equal' ) {\n\t\t\tfirstChangeAt = firstChangeAt === null ? i : firstChangeAt;\n\t\t\tlastChangeAt = i;\n\t\t}\n\t}\n\n\t// How many characters, starting from `firstChangeAt`, should be removed.\n\tlet deletions = 0;\n\t// How many characters, starting from `firstChangeAt`, should be inserted.\n\tlet insertions = 0;\n\n\tfor ( let i = firstChangeAt; i <= lastChangeAt; i++ ) {\n\t\t// If there is no change (equal) or delete, the character is existing in `oldText`. We count it for removing.\n\t\tif ( diffResult[ i ] != 'insert' ) {\n\t\t\tdeletions++;\n\t\t}\n\n\t\t// If there is no change (equal) or insert, the character is existing in `newText`. We count it for inserting.\n\t\tif ( diffResult[ i ] != 'delete' ) {\n\t\t\tinsertions++;\n\t\t}\n\t}\n\n\treturn { insertions, deletions, firstChangeAt };\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/input\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport InputCommand from './inputcommand';\n\nimport injectUnsafeKeystrokesHandling from './utils/injectunsafekeystrokeshandling';\nimport injectTypingMutationsHandling from './utils/injecttypingmutationshandling';\n\n/**\n * Handles text input coming from the keyboard or other input methods.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Input extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Input';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\t// TODO The above default configuration value should be defined using editor.config.define() once it's fixed.\n\t\tconst inputCommand = new InputCommand( editor, editor.config.get( 'typing.undoStep' ) || 20 );\n\n\t\teditor.commands.add( 'input', inputCommand );\n\n\t\tinjectUnsafeKeystrokesHandling( editor );\n\t\tinjectTypingMutationsHandling( editor );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/deletecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport count from '@ckeditor/ckeditor5-utils/src/count';\n\nimport ChangeBuffer from './utils/changebuffer';\n\n/**\n * The delete command. Used by the {@link module:typing/delete~Delete delete feature} to handle the <kbd>Delete</kbd> and\n * <kbd>Backspace</kbd> keys.\n *\n * @extends module:core/command~Command\n */\nexport default class DeleteCommand extends Command {\n\t/**\n\t * Creates an instance of the command.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {'forward'|'backward'} direction The directionality of the delete describing in what direction it\n\t * should consume the content when the selection is collapsed.\n\t */\n\tconstructor( editor, direction ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The directionality of the delete describing in what direction it should\n\t\t * consume the content when the selection is collapsed.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'forward'|'backward'} #direction\n\t\t */\n\t\tthis.direction = direction;\n\n\t\t/**\n\t\t * Delete's change buffer used to group subsequent changes into batches.\n\t\t *\n\t\t * @readonly\n\t\t * @private\n\t\t * @member {typing.ChangeBuffer} #buffer\n\t\t */\n\t\tthis._buffer = new ChangeBuffer( editor.model, editor.config.get( 'typing.undoStep' ) );\n\t}\n\n\t/**\n\t * The current change buffer.\n\t *\n\t * @type {module:typing/utils/changebuffer~ChangeBuffer}\n\t */\n\tget buffer() {\n\t\treturn this._buffer;\n\t}\n\n\t/**\n\t * Executes the delete command. Depending on whether the selection is collapsed or not, deletes its content\n\t * or a piece of content in the {@link #direction defined direction}.\n\t *\n\t * @fires execute\n\t * @param {Object} [options] The command options.\n\t * @param {'character'} [options.unit='character'] See {@link module:engine/model/utils/modifyselection~modifySelection}'s options.\n\t * @param {Number} [options.sequence=1] A number describing which subsequent delete event it is without the key being released.\n\t * See the {@link module:engine/view/document~Document#event:delete} event data.\n\t * @param {module:engine/model/selection~Selection} [options.selection] Selection to remove. If not set, current model selection\n\t * will be used.\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tmodel.enqueueChange( this._buffer.batch, writer => {\n\t\t\tthis._buffer.lock();\n\n\t\t\tconst selection = writer.createSelection( options.selection || doc.selection );\n\n\t\t\t// Do not replace the whole selected content if selection was collapsed.\n\t\t\t// This prevents such situation:\n\t\t\t//\n\t\t\t// <h1></h1><p>[]</p>\t-->  <h1>[</h1><p>]</p> \t\t-->  <p></p>\n\t\t\t// starting content\t\t-->   after `modifySelection`\t-->  after `deleteContent`.\n\t\t\tconst doNotResetEntireContent = selection.isCollapsed;\n\n\t\t\t// Try to extend the selection in the specified direction.\n\t\t\tif ( selection.isCollapsed ) {\n\t\t\t\tmodel.modifySelection( selection, { direction: this.direction, unit: options.unit } );\n\t\t\t}\n\n\t\t\t// Check if deleting in an empty editor. See #61.\n\t\t\tif ( this._shouldEntireContentBeReplacedWithParagraph( options.sequence || 1 ) ) {\n\t\t\t\tthis._replaceEntireContentWithParagraph( writer );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If selection is still collapsed, then there's nothing to delete.\n\t\t\tif ( selection.isCollapsed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet changeCount = 0;\n\n\t\t\tselection.getFirstRange().getMinimalFlatRanges().forEach( range => {\n\t\t\t\tchangeCount += count(\n\t\t\t\t\trange.getWalker( { singleCharacters: true, ignoreElementEnd: true, shallow: true } )\n\t\t\t\t);\n\t\t\t} );\n\n\t\t\tmodel.deleteContent( selection, { doNotResetEntireContent } );\n\t\t\tthis._buffer.input( changeCount );\n\n\t\t\twriter.setSelection( selection );\n\n\t\t\tthis._buffer.unlock();\n\t\t} );\n\t}\n\n\t/**\n\t * If the user keeps <kbd>Backspace</kbd> or <kbd>Delete</kbd> key pressed, the content of the current\n\t * editable will be cleared. However, this will not yet lead to resetting the remaining block to a paragraph\n\t * (which happens e.g. when the user does <kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>Backspace</kbd>).\n\t *\n\t * But, if the user pressed the key in an empty editable for the first time,\n\t * we want to replace the entire content with a paragraph if:\n\t *\n\t * * the current limit element is empty,\n\t * * the paragraph is allowed in the limit element,\n\t * * the limit doesn't already have a paragraph inside.\n\t *\n\t * See https://github.com/ckeditor/ckeditor5-typing/issues/61.\n\t *\n\t * @private\n\t * @param {Number} sequence A number describing which subsequent delete event it is without the key being released.\n\t * @returns {Boolean}\n\t */\n\t_shouldEntireContentBeReplacedWithParagraph( sequence ) {\n\t\t// Does nothing if user pressed and held the \"Backspace\" or \"Delete\" key.\n\t\tif ( sequence > 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\t\tconst limitElement = model.schema.getLimitElement( selection );\n\n\t\t// If a collapsed selection contains the whole content it means that the content is empty\n\t\t// (from the user perspective).\n\t\tconst limitElementIsEmpty = selection.isCollapsed && selection.containsEntireContent( limitElement );\n\n\t\tif ( !limitElementIsEmpty ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !model.schema.checkChild( limitElement, 'paragraph' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst limitElementFirstChild = limitElement.getChild( 0 );\n\n\t\t// Does nothing if the limit element already contains only a paragraph.\n\t\t// We ignore the case when paragraph might have some inline elements (<p><inlineWidget>[]</inlineWidget></p>)\n\t\t// because we don't support such cases yet and it's unclear whether inlineWidget shouldn't be a limit itself.\n\t\tif ( limitElementFirstChild && limitElementFirstChild.name === 'paragraph' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * The entire content is replaced with the paragraph. Selection is moved inside the paragraph.\n\t *\n\t * @private\n\t */\n\t_replaceEntireContentWithParagraph( writer ) {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\t\tconst limitElement = model.schema.getLimitElement( selection );\n\t\tconst paragraph = writer.createElement( 'paragraph' );\n\n\t\twriter.remove( writer.createRangeIn( limitElement ) );\n\t\twriter.insert( paragraph, limitElement );\n\n\t\twriter.setSelection( paragraph, 0 );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/deleteobserver\n */\n\nimport Observer from '@ckeditor/ckeditor5-engine/src/view/observer/observer';\nimport DomEventData from '@ckeditor/ckeditor5-engine/src/view/observer/domeventdata';\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Delete observer introduces the {@link module:engine/view/document~Document#event:delete} event.\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class DeleteObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tconst document = view.document;\n\t\tlet sequence = 0;\n\n\t\tdocument.on( 'keyup', ( evt, data ) => {\n\t\t\tif ( data.keyCode == keyCodes.delete || data.keyCode == keyCodes.backspace ) {\n\t\t\t\tsequence = 0;\n\t\t\t}\n\t\t} );\n\n\t\tdocument.on( 'keydown', ( evt, data ) => {\n\t\t\tconst deleteData = {};\n\n\t\t\tif ( data.keyCode == keyCodes.delete ) {\n\t\t\t\tdeleteData.direction = 'forward';\n\t\t\t\tdeleteData.unit = 'character';\n\t\t\t} else if ( data.keyCode == keyCodes.backspace ) {\n\t\t\t\tdeleteData.direction = 'backward';\n\t\t\t\tdeleteData.unit = 'codePoint';\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst hasWordModifier = env.isMac ? data.altKey : data.ctrlKey;\n\t\t\tdeleteData.unit = hasWordModifier ? 'word' : deleteData.unit;\n\t\t\tdeleteData.sequence = ++sequence;\n\n\t\t\tfireViewDeleteEvent( evt, data.domEvent, deleteData );\n\t\t} );\n\n\t\t// `beforeinput` is handled only for Android devices. Desktop Chrome and iOS are skipped because they are working fine now.\n\t\t/* istanbul ignore if */\n\t\tif ( env.isAndroid ) {\n\t\t\tdocument.on( 'beforeinput', ( evt, data ) => {\n\t\t\t\t// If event type is other than `deleteContentBackward` then this is not deleting.\n\t\t\t\tif ( data.domEvent.inputType != 'deleteContentBackward' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst deleteData = {\n\t\t\t\t\tunit: 'codepoint',\n\t\t\t\t\tdirection: 'backward',\n\t\t\t\t\tsequence: 1\n\t\t\t\t};\n\n\t\t\t\t// Android IMEs may change the DOM selection on `beforeinput` event so that the selection contains all the text\n\t\t\t\t// that the IME wants to remove. We will pass this information to `delete` event so proper part of the content is removed.\n\t\t\t\t//\n\t\t\t\t// Sometimes it is only expanding by a one character (in case of collapsed selection). In this case we don't need to\n\t\t\t\t// set a different selection to remove, it will work just fine.\n\t\t\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\n\t\t\t\tif ( domSelection.anchorNode == domSelection.focusNode && domSelection.anchorOffset + 1 != domSelection.focusOffset ) {\n\t\t\t\t\tdeleteData.selectionToRemove = view.domConverter.domSelectionToView( domSelection );\n\t\t\t\t}\n\n\t\t\t\tfireViewDeleteEvent( evt, data.domEvent, deleteData );\n\t\t\t} );\n\t\t}\n\n\t\tfunction fireViewDeleteEvent( originalEvent, domEvent, deleteData ) {\n\t\t\t// Save the event object to check later if it was stopped or not.\n\t\t\tlet event;\n\t\t\tdocument.once( 'delete', evt => ( event = evt ), { priority: Number.POSITIVE_INFINITY } );\n\n\t\t\tdocument.fire( 'delete', new DomEventData( document, domEvent, deleteData ) );\n\n\t\t\t// Stop the original event if `delete` event was stopped.\n\t\t\t// https://github.com/ckeditor/ckeditor5/issues/753\n\t\t\tif ( event && event.stop.called ) {\n\t\t\t\toriginalEvent.stop();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve() {}\n}\n\n/**\n * Event fired when the user tries to delete content (e.g. presses <kbd>Delete</kbd> or <kbd>Backspace</kbd>).\n *\n * Note: This event is fired by the {@link module:typing/deleteobserver~DeleteObserver observer}\n * (usually registered by the {@link module:typing/delete~Delete delete feature}).\n *\n * @event module:engine/view/document~Document#event:delete\n * @param {module:engine/view/observer/domeventdata~DomEventData} data\n * @param {'forward'|'delete'} data.direction The direction in which the deletion should happen.\n * @param {'character'|'word'} data.unit The \"amount\" of content that should be deleted.\n * @param {Number} data.sequence A number describing which subsequent delete event it is without the key being released.\n * If it's 2 or more it means that the key was pressed and hold.\n * @param {module:engine/view/selection~Selection} [data.selectionToRemove] View selection which content should be removed. If not set,\n * current selection should be used.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/delete\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport DeleteCommand from './deletecommand';\nimport DeleteObserver from './deleteobserver';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * The delete and backspace feature. Handles the <kbd>Delete</kbd> and <kbd>Backspace</kbd> keys in the editor.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Delete extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Delete';\n\t}\n\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst view = editor.editing.view;\n\t\tconst viewDocument = view.document;\n\n\t\tview.addObserver( DeleteObserver );\n\n\t\teditor.commands.add( 'forwardDelete', new DeleteCommand( editor, 'forward' ) );\n\t\teditor.commands.add( 'delete', new DeleteCommand( editor, 'backward' ) );\n\n\t\tthis.listenTo( viewDocument, 'delete', ( evt, data ) => {\n\t\t\tconst deleteCommandParams = { unit: data.unit, sequence: data.sequence };\n\n\t\t\t// If a specific (view) selection to remove was set, convert it to a model selection and set as a parameter for `DeleteCommand`.\n\t\t\tif ( data.selectionToRemove ) {\n\t\t\t\tconst modelSelection = editor.model.createSelection();\n\t\t\t\tconst ranges = [];\n\n\t\t\t\tfor ( const viewRange of data.selectionToRemove.getRanges() ) {\n\t\t\t\t\tranges.push( editor.editing.mapper.toModelRange( viewRange ) );\n\t\t\t\t}\n\n\t\t\t\tmodelSelection.setTo( ranges );\n\n\t\t\t\tdeleteCommandParams.selection = modelSelection;\n\t\t\t}\n\n\t\t\teditor.execute( data.direction == 'forward' ? 'forwardDelete' : 'delete', deleteCommandParams );\n\n\t\t\tdata.preventDefault();\n\n\t\t\tview.scrollToTheSelection();\n\t\t} );\n\n\t\t// Android IMEs have a quirk - they change DOM selection after the input changes were performed by the browser.\n\t\t// This happens on `keyup` event. Android doesn't know anything about our deletion and selection handling. Even if the selection\n\t\t// was changed during input events, IME remembers the position where the selection \"should\" be placed and moves it there.\n\t\t//\n\t\t// To prevent incorrect selection, we save the selection after deleting here and then re-set it on `keyup`. This has to be done\n\t\t// on DOM selection level, because on `keyup` the model selection is still the same as it was just after deletion, so it\n\t\t// wouldn't be changed and the fix would do nothing.\n\t\t//\n\t\t/* istanbul ignore if */\n\t\tif ( env.isAndroid ) {\n\t\t\tlet domSelectionAfterDeletion = null;\n\n\t\t\tthis.listenTo( viewDocument, 'delete', ( evt, data ) => {\n\t\t\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\n\t\t\t\tdomSelectionAfterDeletion = {\n\t\t\t\t\tanchorNode: domSelection.anchorNode,\n\t\t\t\t\tanchorOffset: domSelection.anchorOffset,\n\t\t\t\t\tfocusNode: domSelection.focusNode,\n\t\t\t\t\tfocusOffset: domSelection.focusOffset\n\t\t\t\t};\n\t\t\t}, { priority: 'lowest' } );\n\n\t\t\tthis.listenTo( viewDocument, 'keyup', ( evt, data ) => {\n\t\t\t\tif ( domSelectionAfterDeletion ) {\n\t\t\t\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\n\t\t\t\t\tdomSelection.collapse( domSelectionAfterDeletion.anchorNode, domSelectionAfterDeletion.anchorOffset );\n\t\t\t\t\tdomSelection.extend( domSelectionAfterDeletion.focusNode, domSelectionAfterDeletion.focusOffset );\n\n\t\t\t\t\tdomSelectionAfterDeletion = null;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/typing\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Input from './input';\nimport Delete from './delete';\n\n/**\n * The typing feature. It handles typing.\n *\n * This is a \"glue\" plugin which loads the {@link module:typing/input~Input} and {@link module:typing/delete~Delete}\n * plugins.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Typing extends Plugin {\n\tstatic get requires() {\n\t\treturn [ Input, Delete ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Typing';\n\t}\n}\n\n/**\n * The configuration of the typing features. Used by the features from the `@ckeditor/ckeditor5-typing` package.\n *\n * Read more in {@link module:typing/typing~TypingConfig}.\n *\n * @member {module:typing/typing~TypingConfig} module:core/editor/editorconfig~EditorConfig#typing\n */\n\n/**\n * The configuration of the typing features. Used by the typing features in `@ckeditor/ckeditor5-typing` package.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n * \t\t\t\ttyping: ... // Typing feature options.\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See {@link module:core/editor/editorconfig~EditorConfig all editor options}.\n *\n * @interface TypingConfig\n */\n\n/**\n * The granularity of undo/redo for typing and deleting. The value `20` means (more or less) that a new undo step\n * is created every 20 characters are inserted or deleted.\n *\n * @member {Number} [module:typing/typing~TypingConfig#undoStep=20]\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/nooperation\n */\n\nimport Operation from './operation';\n\n/**\n * Operation which is doing nothing (\"empty operation\", \"do-nothing operation\", \"noop\"). This is an operation,\n * which when executed does not change the tree model. It still has some parameters defined for transformation purposes.\n *\n * In most cases this operation is a result of transforming operations. When transformation returns\n * {@link module:engine/model/operation/nooperation~NoOperation} it means that changes done by the transformed operation\n * have already been applied.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class NoOperation extends Operation {\n\tget type() {\n\t\treturn 'noop';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/nooperation~NoOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new NoOperation( this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/nooperation~NoOperation}\n\t */\n\tgetReversed() {\n\t\treturn new NoOperation( this.baseVersion + 1 );\n\t}\n\n\t_execute() {\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'NoOperation';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport InsertOperation from './insertoperation';\nimport AttributeOperation from './attributeoperation';\nimport RenameOperation from './renameoperation';\nimport MarkerOperation from './markeroperation';\nimport MoveOperation from './moveoperation';\nimport RootAttributeOperation from './rootattributeoperation';\nimport MergeOperation from './mergeoperation';\nimport SplitOperation from './splitoperation';\nimport NoOperation from './nooperation';\nimport Range from '../range';\nimport Position from '../position';\n\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\n\nconst transformations = new Map();\n\n/**\n * @module engine/model/operation/transform\n */\n\n/**\n * Sets a transformation function to be be used to transform instances of class `OperationA` by instances of class `OperationB`.\n *\n * The `transformationFunction` is passed three parameters:\n *\n * * `a` - operation to be transformed, an instance of `OperationA`,\n * * `b` - operation to be transformed by, an instance of `OperationB`,\n * * {@link module:engine/model/operation/transform~TransformationContext `context`} - object with additional information about\n * transformation context.\n *\n * The `transformationFunction` should return transformation result, which is an array with one or multiple\n * {@link module:engine/model/operation/operation~Operation operation} instances.\n *\n * @protected\n * @param {Function} OperationA\n * @param {Function} OperationB\n * @param {Function} transformationFunction Function to use for transforming.\n */\nfunction setTransformation( OperationA, OperationB, transformationFunction ) {\n\tlet aGroup = transformations.get( OperationA );\n\n\tif ( !aGroup ) {\n\t\taGroup = new Map();\n\t\ttransformations.set( OperationA, aGroup );\n\t}\n\n\taGroup.set( OperationB, transformationFunction );\n}\n\n/**\n * Returns a previously set transformation function for transforming an instance of `OperationA` by an instance of `OperationB`.\n *\n * If no transformation was set for given pair of operations, {@link module:engine/model/operation/transform~noUpdateTransformation}\n * is returned. This means that if no transformation was set, the `OperationA` instance will not change when transformed\n * by the `OperationB` instance.\n *\n * @private\n * @param {Function} OperationA\n * @param {Function} OperationB\n * @returns {Function} Function set to transform an instance of `OperationA` by an instance of `OperationB`.\n */\nfunction getTransformation( OperationA, OperationB ) {\n\tconst aGroup = transformations.get( OperationA );\n\n\tif ( aGroup && aGroup.has( OperationB ) ) {\n\t\treturn aGroup.get( OperationB );\n\t}\n\n\treturn noUpdateTransformation;\n}\n\n/**\n * A transformation function that only clones operation to transform, without changing it.\n *\n * @private\n * @param {module:engine/model/operation/operation~Operation} a Operation to transform.\n * @returns {Array.<module:engine/model/operation/operation~Operation>}\n */\nfunction noUpdateTransformation( a ) {\n\treturn [ a ];\n}\n\n/**\n * Transforms operation `a` by operation `b`.\n *\n * @param {module:engine/model/operation/operation~Operation} a Operation to be transformed.\n * @param {module:engine/model/operation/operation~Operation} b Operation to transform by.\n * @param {module:engine/model/operation/transform~TransformationContext} context Transformation context for this transformation.\n * @returns {Array.<module:engine/model/operation/operation~Operation>} Transformation result.\n */\nexport function transform( a, b, context = {} ) {\n\tconst transformationFunction = getTransformation( a.constructor, b.constructor );\n\n\ttry {\n\t\ta = a.clone();\n\n\t\treturn transformationFunction( a, b, context );\n\t} catch ( e ) {\n\t\tlog.error( 'Error during operation transformation!', e.message );\n\t\tlog.error( 'Transformed operation', a );\n\t\tlog.error( 'Operation transformed by', b );\n\t\tlog.error( 'context.aIsStrong', context.aIsStrong );\n\t\tlog.error( 'context.aWasUndone', context.aWasUndone );\n\t\tlog.error( 'context.bWasUndone', context.bWasUndone );\n\t\tlog.error( 'context.abRelation', context.abRelation );\n\t\tlog.error( 'context.baRelation', context.baRelation );\n\n\t\tthrow e;\n\t}\n}\n\n/**\n * Performs a transformation of two sets of operations - `operationsA` and `operationsB`. The transformation is two-way -\n * both transformed `operationsA` and transformed `operationsB` are returned.\n *\n * Note, that the first operation in each set should base on the same document state (\n * {@link module:engine/model/document~Document#version document version}).\n *\n * It is assumed that `operationsA` are \"more important\" during conflict resolution between two operations.\n *\n * New copies of both passed arrays and operations inside them are returned. Passed arguments are not altered.\n *\n * Base versions of the transformed operations sets are updated accordingly. For example, assume that base versions are `4`\n * and there are `3` operations in `operationsA` and `5` operations in `operationsB`. Then:\n *\n * * transformed `operationsA` will start from base version `9` (`4` base version + `5` operations B),\n * * transformed `operationsB` will start from base version `7` (`4` base version + `3` operations A).\n *\n * If no operation was broken into two during transformation, then both sets will end up with an operation that bases on version `11`:\n *\n * * transformed `operationsA` start from `9` and there are `3` of them, so the last will have `baseVersion` equal to `11`,\n * * transformed `operationsB` start from `7` and there are `5` of them, so the last will have `baseVersion` equal to `11`.\n *\n * @param {Array.<module:engine/model/operation/operation~Operation>} operationsA\n * @param {Array.<module:engine/model/operation/operation~Operation>} operationsB\n * @param {Object} options Additional transformation options.\n * @param {module:engine/model/document~Document|null} options.document Document which the operations change.\n * @param {Boolean} [options.useRelations=false] Whether during transformation relations should be used (used during undo for\n * better conflict resolution).\n * @param {Boolean} [options.padWithNoOps=false] Whether additional {@link module:engine/model/operation/nooperation~NoOperation}s\n * should be added to the transformation results to force the same last base version for both transformed sets (in case\n * if some operations got broken into multiple operations during transformation).\n * @returns {Object} Transformation result.\n * @returns {Array.<module:engine/model/operation/operation~Operation>} return.operationsA Transformed `operationsA`.\n * @returns {Array.<module:engine/model/operation/operation~Operation>} return.operationsB Transformed `operationsB`.\n */\nexport function transformSets( operationsA, operationsB, options ) {\n\t// Create new arrays so the originally passed arguments are not changed.\n\t// No need to clone operations, they are cloned as they are transformed.\n\toperationsA = operationsA.slice();\n\toperationsB = operationsB.slice();\n\n\t// If one of sets is empty there is simply nothing to transform, so return sets as they are.\n\tif ( operationsA.length == 0 || operationsB.length == 0 ) {\n\t\treturn { operationsA, operationsB };\n\t}\n\t//\n\t// Following is a description of transformation process:\n\t//\n\t// There are `operationsA` and `operationsB` to be transformed, both by both.\n\t//\n\t// So, suppose we have sets of two operations each: `operationsA` = `[ a1, a2 ]`, `operationsB` = `[ b1, b2 ]`.\n\t//\n\t// Remember, that we can only transform operations that base on the same context. We assert that `a1` and `b1` base on\n\t// the same context and we transform them. Then, we get `a1'` and `b1'`. `a2` bases on a context with `a1` -- `a2`\n\t// is an operation that followed `a1`. Similarly, `b2` bases on a context with `b1`.\n\t//\n\t// However, since `a1'` is a result of transformation by `b1`, `a1'` now also has a context with `b1`. This means that\n\t// we can safely transform `a1'` by `b2`. As we finish transforming `a1`, we also transformed all `operationsB`.\n\t// All `operationsB` also have context including `a1`. Now, we can properly transform `a2` by those operations.\n\t//\n\t// The transformation process can be visualized on a transformation diagram (\"diamond diagram\"):\n\t//\n\t//          [the initial state]\n\t//         [common for a1 and b1]\n\t//\n\t//                   *\n\t//                  / \\\n\t//                 /   \\\n\t//               b1     a1\n\t//               /       \\\n\t//              /         \\\n\t//             *           *\n\t//            / \\         / \\\n\t//           /   \\       /   \\\n\t//         b2    a1'   b1'    a2\n\t//         /       \\   /       \\\n\t//        /         \\ /         \\\n\t//       *           *           *\n\t//        \\         / \\         /\n\t//         \\       /   \\       /\n\t//        a1''   b2'   a2'   b1''\n\t//           \\   /       \\   /\n\t//            \\ /         \\ /\n\t//             *           *\n\t//              \\         /\n\t//               \\       /\n\t//              a2''   b2''\n\t//                 \\   /\n\t//                  \\ /\n\t//                   *\n\t//\n\t//           [the final state]\n\t//\n\t// The final state can be reached from the initial state by applying `a1`, `a2`, `b1''` and `b2''`, as well as by\n\t// applying `b1`, `b2`, `a1''`, `a2''`. Note how the operations get to a proper common state before each pair is\n\t// transformed.\n\t//\n\t// Another thing to consider is that an operation during transformation can be broken into multiple operations.\n\t// Suppose that `a1` * `b1` = `[ a11', a12' ]` (instead of `a1'` that we considered previously).\n\t//\n\t// In that case, we leave `a12'` for later and we continue transforming `a11'` until it is transformed by all `operationsB`\n\t// (in our case it is just `b2`). At this point, `b1` is transformed by \"whole\" `a1`, while `b2` is only transformed\n\t// by `a11'`. Similarly, `a12'` is only transformed by `b1`. This leads to a conclusion that we need to start transforming `a12'`\n\t// from the moment just after it was broken. So, `a12'` is transformed by `b2`. Now, \"the whole\" `a1` is transformed\n\t// by `operationsB`, while all `operationsB` are transformed by \"the whole\" `a1`. This means that we can continue with\n\t// following `operationsA` (in our case it is just `a2`).\n\t//\n\t// Of course, also `operationsB` can be broken. However, since we focus on transforming operation `a` to the end,\n\t// the only thing to do is to store both pieces of operation `b`, so that the next transformed operation `a` will\n\t// be transformed by both of them.\n\t//\n\t//                       *\n\t//                      / \\\n\t//                     /   \\\n\t//                    /     \\\n\t//                  b1       a1\n\t//                  /         \\\n\t//                 /           \\\n\t//                /             \\\n\t//               *               *\n\t//              / \\             / \\\n\t//             /  a11'         /   \\\n\t//            /     \\         /     \\\n\t//          b2       *      b1'      a2\n\t//          /       / \\     /         \\\n\t//         /       /  a12' /           \\\n\t//        /       /     \\ /             \\\n\t//       *       b2'     *               *\n\t//        \\     /       / \\             /\n\t//       a11'' /     b21'' \\           /\n\t//          \\ /       /     \\         /\n\t//           *       *      a2'     b1''\n\t//            \\     / \\       \\     /\n\t//          a12'' b22''\\       \\   /\n\t//              \\ /     \\       \\ /\n\t//               *      a2''     *\n\t//                \\       \\     /\n\t//                 \\       \\  b21'''\n\t//                  \\       \\ /\n\t//                a2'''      *\n\t//                    \\     /\n\t//                     \\  b22'''\n\t//                      \\ /\n\t//                       *\n\t//\n\t// Note, how `a1` is broken and transformed into `a11'` and `a12'`, while `b2'` got broken and transformed into `b21''` and `b22''`.\n\t//\n\t// Having all that on mind, here is an outline for the transformation process algorithm:\n\t//\n\t// 1. We have `operationsA` and `operationsB` array, which we dynamically update as the transformation process goes.\n\t//\n\t// 2. We take next (or first) operation from `operationsA` and check from which operation `b` we need to start transforming it.\n\t// All original `operationsA` are set to be transformed starting from the first operation `b`.\n\t//\n\t// 3. We take operations from `operationsB`, one by one, starting from the correct one, and transform operation `a`\n\t// by operation `b` (and vice versa). We update `operationsA` and `operationsB` by replacing the original operations\n\t// with the transformation results.\n\t//\n\t// 4. If operation is broken into multiple operations, we save all the new operations in the place of the\n\t// original operation.\n\t//\n\t// 5. Additionally, if operation `a` was broken, for the \"new\" operation, we remember from which operation `b` it should\n\t// be transformed by.\n\t//\n\t// 6. We continue transforming \"current\" operation `a` until it is transformed by all `operationsB`. Then, go to 2.\n\t// unless the last operation `a` was transformed.\n\t//\n\t// The actual implementation of the above algorithm is slightly different, as only one loop (while) is used.\n\t// The difference is that we have \"current\" `a` operation to transform and we store the index of the next `b` operation\n\t// to transform by. Each loop operates on two indexes then: index pointing to currently processed `a` operation and\n\t// index pointing to next `b` operation. Each loop is just one `a * b` + `b * a` transformation. After each loop\n\t// operation `b` index is updated. If all `b` operations were visited for the current `a` operation, we change\n\t// current `a` operation index to the next one.\n\t//\n\n\t// For each operation `a`, keeps information what is the index in `operationsB` from which the transformation should start.\n\tconst nextTransformIndex = new WeakMap();\n\n\t// For all the original `operationsA`, set that they should be transformed starting from the first of `operationsB`.\n\tfor ( const op of operationsA ) {\n\t\tnextTransformIndex.set( op, 0 );\n\t}\n\n\t// Additional data that is used for some postprocessing after the main transformation process is done.\n\tconst data = {\n\t\tnextBaseVersionA: operationsA[ operationsA.length - 1 ].baseVersion + 1,\n\t\tnextBaseVersionB: operationsB[ operationsB.length - 1 ].baseVersion + 1,\n\t\toriginalOperationsACount: operationsA.length,\n\t\toriginalOperationsBCount: operationsB.length\n\t};\n\n\tconst contextFactory = new ContextFactory( options.document, options.useRelations, options.forceWeakRemove );\n\tcontextFactory.setOriginalOperations( operationsA );\n\tcontextFactory.setOriginalOperations( operationsB );\n\n\t// Index of currently transformed operation `a`.\n\tlet i = 0;\n\n\t// While not all `operationsA` are transformed...\n\twhile ( i < operationsA.length ) {\n\t\t// Get \"current\" operation `a`.\n\t\tconst opA = operationsA[ i ];\n\n\t\t// For the \"current\" operation `a`, get the index of the next operation `b` to transform by.\n\t\tconst indexB = nextTransformIndex.get( opA );\n\n\t\t// If operation `a` was already transformed by every operation `b`, change \"current\" operation `a` to the next one.\n\t\tif ( indexB == operationsB.length ) {\n\t\t\ti++;\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst opB = operationsB[ indexB ];\n\n\t\t// Transform `a` by `b` and `b` by `a`.\n\t\tconst newOpsA = transform( opA, opB, contextFactory.getContext( opA, opB, true ) );\n\t\tconst newOpsB = transform( opB, opA, contextFactory.getContext( opB, opA, false ) );\n\t\t// As a result we get one or more `newOpsA` and one or more `newOpsB` operations.\n\n\t\t// Update contextual information about operations.\n\t\tcontextFactory.updateRelation( opA, opB );\n\n\t\tcontextFactory.setOriginalOperations( newOpsA, opA );\n\t\tcontextFactory.setOriginalOperations( newOpsB, opB );\n\n\t\t// For new `a` operations, update their index of the next operation `b` to transform them by.\n\t\t//\n\t\t// This is needed even if there was only one result (`a` was not broken) because that information is used\n\t\t// at the beginning of this loop every time.\n\t\tfor ( const newOpA of newOpsA ) {\n\t\t\t// Acknowledge, that operation `b` also might be broken into multiple operations.\n\t\t\t//\n\t\t\t// This is why we raise `indexB` not just by 1. If `newOpsB` are multiple operations, they will be\n\t\t\t// spliced in the place of `opB`. So we need to change `transformBy` accordingly, so that an operation won't\n\t\t\t// be transformed by the same operation (part of it) again.\n\t\t\tnextTransformIndex.set( newOpA, indexB + newOpsB.length );\n\t\t}\n\n\t\t// Update `operationsA` and `operationsB` with the transformed versions.\n\t\toperationsA.splice( i, 1, ...newOpsA );\n\t\toperationsB.splice( indexB, 1, ...newOpsB );\n\t}\n\n\tif ( options.padWithNoOps ) {\n\t\t// If no-operations padding is enabled, count how many extra `a` and `b` operations were generated.\n\t\tconst brokenOperationsACount = operationsA.length - data.originalOperationsACount;\n\t\tconst brokenOperationsBCount = operationsB.length - data.originalOperationsBCount;\n\n\t\t// Then, if that number is not the same, pad `operationsA` or `operationsB` with correct number of no-ops so\n\t\t// that the base versions are equalled.\n\t\t//\n\t\t// Note that only one array will be updated, as only one of those subtractions can be greater than zero.\n\t\tpadWithNoOps( operationsA, brokenOperationsBCount - brokenOperationsACount );\n\t\tpadWithNoOps( operationsB, brokenOperationsACount - brokenOperationsBCount );\n\t}\n\n\t// Finally, update base versions of transformed operations.\n\tupdateBaseVersions( operationsA, data.nextBaseVersionB );\n\tupdateBaseVersions( operationsB, data.nextBaseVersionA );\n\n\treturn { operationsA, operationsB };\n}\n\n// Gathers additional data about operations processed during transformation. Can be used to obtain contextual information\n// about two operations that are about to be transformed. This contextual information can be used for better conflict resolution.\nclass ContextFactory {\n\t// Creates `ContextFactory` instance.\n\t//\n\t// @param {module:engine/model/document~Document} document Document which the operations change.\n\t// @param {Boolean} useRelations Whether during transformation relations should be used (used during undo for\n\t// better conflict resolution).\n\t// @param {Boolean} [forceWeakRemove=false] If set to `false`, remove operation will be always stronger than move operation,\n\t// so the removed nodes won't end up back in the document root. When set to `true`, context data will be used.\n\tconstructor( document, useRelations, forceWeakRemove = false ) {\n\t\t// `model.History` instance which information about undone operations will be taken from.\n\t\tthis._history = document.history;\n\n\t\t// Whether additional context should be used.\n\t\tthis._useRelations = useRelations;\n\n\t\tthis._forceWeakRemove = !!forceWeakRemove;\n\n\t\t// For each operation that is created during transformation process, we keep a reference to the original operation\n\t\t// which it comes from. The original operation works as a kind of \"identifier\". Every contextual information\n\t\t// gathered during transformation that we want to save for given operation, is actually saved for the original operation.\n\t\t// This way no matter if operation `a` is cloned, then transformed, even breaks, we still have access to the previously\n\t\t// gathered data through original operation reference.\n\t\tthis._originalOperations = new Map();\n\n\t\t// Relations is a double-map structure (maps in map) where for two operations we store how those operations were related\n\t\t// to each other. Those relations are evaluated during transformation process. For every transformated pair of operations\n\t\t// we keep relations between them.\n\t\tthis._relations = new Map();\n\t}\n\n\t// Sets \"original operation\" for given operations.\n\t//\n\t// During transformation process, operations are cloned, then changed, then processed again, sometimes broken into two\n\t// or multiple operations. When gathering additional data it is important that all operations can be somehow linked\n\t// so a cloned and transformed \"version\" still kept track of the data assigned earlier to it.\n\t//\n\t// The original operation object will be used as such an universal linking id. Throughout the transformation process\n\t// all cloned operations will refer to \"the original operation\" when storing and reading additional data.\n\t//\n\t// If `takeFrom` is not set, each operation from `operations` array will be assigned itself as \"the original operation\".\n\t// This should be used as an initialization step.\n\t//\n\t// If `takeFrom` is set, each operation from `operations` will be assigned the same original operation as assigned\n\t// for `takeFrom` operation. This should be used to update original operations. It should be used in a way that\n\t// `operations` are the result of `takeFrom` transformation to ensure proper \"original operation propagation\".\n\t//\n\t// @param {Array.<module:engine/model/operation/operation~Operation>} operations\n\t// @param {module:engine/model/operation/operation~Operation|null} [takeFrom=null]\n\tsetOriginalOperations( operations, takeFrom = null ) {\n\t\tconst originalOperation = takeFrom ? this._originalOperations.get( takeFrom ) : null;\n\n\t\tfor ( const operation of operations ) {\n\t\t\tthis._originalOperations.set( operation, originalOperation || operation );\n\t\t}\n\t}\n\n\t// Saves a relation between operations `opA` and `opB`.\n\t//\n\t// Relations are then later used to help solve conflicts when operations are transformed.\n\t//\n\t// @param {module:engine/model/operation/operation~Operation} opA\n\t// @param {module:engine/model/operation/operation~Operation} opB\n\tupdateRelation( opA, opB ) {\n\t\t// The use of relations is described in a bigger detail in transformation functions.\n\t\t//\n\t\t// In brief, this function, for specified pairs of operation types, checks how positions defined in those operations relate.\n\t\t// Then those relations are saved. For example, for two move operations, it is saved if one of those operations target\n\t\t// position is before the other operation source position. This kind of information gives contextual information when\n\t\t// transformation is used during undo. Similar checks are done for other pairs of operations.\n\t\t//\n\t\tswitch ( opA.constructor ) {\n\t\t\tcase MoveOperation: {\n\t\t\t\tswitch ( opB.constructor ) {\n\t\t\t\t\tcase MergeOperation: {\n\t\t\t\t\t\tif ( opA.targetPosition.isEqual( opB.sourcePosition ) || opB.movedRange.containsPosition( opA.targetPosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'insertAtSource' );\n\t\t\t\t\t\t} else if ( opA.targetPosition.isEqual( opB.deletionPosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'insertBetween' );\n\t\t\t\t\t\t} else if ( opA.targetPosition.isAfter( opB.sourcePosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'moveTargetAfter' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase MoveOperation: {\n\t\t\t\t\t\tif ( opA.targetPosition.isEqual( opB.sourcePosition ) || opA.targetPosition.isBefore( opB.sourcePosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'insertBefore' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'insertAfter' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SplitOperation: {\n\t\t\t\tswitch ( opB.constructor ) {\n\t\t\t\t\tcase MergeOperation: {\n\t\t\t\t\t\tif ( opA.splitPosition.isBefore( opB.sourcePosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'splitBefore' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase MoveOperation: {\n\t\t\t\t\t\tif ( opA.splitPosition.isEqual( opB.sourcePosition ) || opA.splitPosition.isBefore( opB.sourcePosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'splitBefore' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase MergeOperation: {\n\t\t\t\tswitch ( opB.constructor ) {\n\t\t\t\t\tcase MergeOperation: {\n\t\t\t\t\t\tif ( !opA.targetPosition.isEqual( opB.sourcePosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'mergeTargetNotMoved' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( opA.sourcePosition.isEqual( opB.targetPosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'mergeSourceNotMoved' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( opA.sourcePosition.isEqual( opB.sourcePosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'mergeSameElement' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase SplitOperation: {\n\t\t\t\t\t\tif ( opA.sourcePosition.isEqual( opB.splitPosition ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, 'splitAtSource' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase MarkerOperation: {\n\t\t\t\tconst markerRange = opA.newRange;\n\n\t\t\t\tif ( !markerRange ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch ( opB.constructor ) {\n\t\t\t\t\tcase MoveOperation: {\n\t\t\t\t\t\tconst movedRange = Range._createFromPositionAndShift( opB.sourcePosition, opB.howMany );\n\n\t\t\t\t\t\tconst affectedLeft = movedRange.containsPosition( markerRange.start ) ||\n\t\t\t\t\t\t\tmovedRange.start.isEqual( markerRange.start );\n\n\t\t\t\t\t\tconst affectedRight = movedRange.containsPosition( markerRange.end ) ||\n\t\t\t\t\t\t\tmovedRange.end.isEqual( markerRange.end );\n\n\t\t\t\t\t\tif ( ( affectedLeft || affectedRight ) && !movedRange.containsRange( markerRange ) ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, {\n\t\t\t\t\t\t\t\tside: affectedLeft ? 'left' : 'right',\n\t\t\t\t\t\t\t\tpath: affectedLeft ? markerRange.start.path.slice() : markerRange.end.path.slice()\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase MergeOperation: {\n\t\t\t\t\t\tconst wasInLeftElement = markerRange.start.isEqual( opB.targetPosition );\n\t\t\t\t\t\tconst wasStartBeforeMergedElement = markerRange.start.isEqual( opB.deletionPosition );\n\t\t\t\t\t\tconst wasEndBeforeMergedElement = markerRange.end.isEqual( opB.deletionPosition );\n\t\t\t\t\t\tconst wasInRightElement = markerRange.end.isEqual( opB.sourcePosition );\n\n\t\t\t\t\t\tif ( wasInLeftElement || wasStartBeforeMergedElement || wasEndBeforeMergedElement || wasInRightElement ) {\n\t\t\t\t\t\t\tthis._setRelation( opA, opB, {\n\t\t\t\t\t\t\t\twasInLeftElement,\n\t\t\t\t\t\t\t\twasStartBeforeMergedElement,\n\t\t\t\t\t\t\t\twasEndBeforeMergedElement,\n\t\t\t\t\t\t\t\twasInRightElement\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Evaluates and returns contextual information about two given operations `opA` and `opB` which are about to be transformed.\n\t//\n\t// @param {module:engine/model/operation/operation~Operation} opA\n\t// @param {module:engine/model/operation/operation~Operation} opB\n\t// @returns {module:engine/model/operation/transform~TransformationContext}\n\tgetContext( opA, opB, aIsStrong ) {\n\t\treturn {\n\t\t\taIsStrong,\n\t\t\taWasUndone: this._wasUndone( opA ),\n\t\t\tbWasUndone: this._wasUndone( opB ),\n\t\t\tabRelation: this._useRelations ? this._getRelation( opA, opB ) : null,\n\t\t\tbaRelation: this._useRelations ? this._getRelation( opB, opA ) : null,\n\t\t\tforceWeakRemove: this._forceWeakRemove\n\t\t};\n\t}\n\n\t// Returns whether given operation `op` has already been undone.\n\t//\n\t// Information whether an operation was undone gives more context when making a decision when two operations are in conflict.\n\t//\n\t// @param {module:engine/model/operation/operation~Operation} op\n\t// @returns {Boolean}\n\t_wasUndone( op ) {\n\t\t// For `op`, get its original operation. After all, if `op` is a clone (or even transformed clone) of another\n\t\t// operation, literally `op` couldn't be undone. It was just generated. If anything, it was the operation it origins\n\t\t// from which was undone. So get that original operation.\n\t\tconst originalOp = this._originalOperations.get( op );\n\n\t\t// And check with the document if the original operation was undone.\n\t\treturn originalOp.wasUndone || this._history.isUndoneOperation( originalOp );\n\t}\n\n\t// Returns a relation between `opA` and an operation which is undone by `opB`. This can be `String` value if a relation\n\t// was set earlier or `null` if there was no relation between those operations.\n\t//\n\t// This is a little tricky to understand, so let's compare it to `ContextFactory#_wasUndone`.\n\t//\n\t// When `wasUndone( opB )` is used, we check if the `opB` has already been undone. It is obvious, that the\n\t// undoing operation must happen after the undone operation. So, essentially, we have `opB`, we take document history,\n\t// we look forward in the future and ask if in that future `opB` was undone.\n\t//\n\t// Relations is a backward process to `wasUndone()`.\n\t//\n\t// Long story short - using relations is asking what happened in the past. Looking back. This time we have an undoing\n\t// operation `opB` which has undone some other operation. When there is a transformation `opA` x `opB` and there is\n\t// a conflict to solve and `opB` is an undoing operation, we can look back in the history and see what was a relation\n\t// between `opA` and the operation which `opB` undone. Basing on that relation from the past, we can now make\n\t// a better decision when resolving a conflict between two operations, because we know more about the context of\n\t// those two operations.\n\t//\n\t// This is why this function does not return a relation directly between `opA` and `opB` because we need to look\n\t// back to search for a meaningful contextual information.\n\t//\n\t// @param {module:engine/model/operation/operation~Operation} opA\n\t// @param {module:engine/model/operation/operation~Operation} opB\n\t// @returns {String|null}\n\t_getRelation( opA, opB ) {\n\t\t// Get the original operation. Similarly as in `wasUndone()` it is used as an universal identifier for stored data.\n\t\tconst origB = this._originalOperations.get( opB );\n\t\tconst undoneB = this._history.getUndoneOperation( origB );\n\n\t\t// If `opB` is not undoing any operation, there is no relation.\n\t\tif ( !undoneB ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst origA = this._originalOperations.get( opA );\n\t\tconst relationsA = this._relations.get( origA );\n\n\t\t// Get all relations for `opA`, and check if there is a relation with `opB`-undone-counterpart. If so, return it.\n\t\tif ( relationsA ) {\n\t\t\treturn relationsA.get( undoneB ) || null;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t// Helper function for `ContextFactory#updateRelations`.\n\t//\n\t// @private\n\t// @param {module:engine/model/operation/operation~Operation} opA\n\t// @param {module:engine/model/operation/operation~Operation} opB\n\t// @param {String} relation\n\t_setRelation( opA, opB, relation ) {\n\t\t// As always, setting is for original operations, not the clones/transformed operations.\n\t\tconst origA = this._originalOperations.get( opA );\n\t\tconst origB = this._originalOperations.get( opB );\n\n\t\tlet relationsA = this._relations.get( origA );\n\n\t\tif ( !relationsA ) {\n\t\t\trelationsA = new Map();\n\t\t\tthis._relations.set( origA, relationsA );\n\t\t}\n\n\t\trelationsA.set( origB, relation );\n\t}\n}\n\n/**\n * Holds additional contextual information about a transformed pair of operations (`a` and `b`). Those information\n * can be used for better conflict resolving.\n *\n * @typedef {Object} module:engine/model/operation/transform~TransformationContext\n *\n * @property {Boolean} aIsStrong Whether `a` is strong operation in this transformation, or weak.\n * @property {Boolean} aWasUndone Whether `a` operation was undone.\n * @property {Boolean} bWasUndone Whether `b` operation was undone.\n * @property {String|null} abRelation The relation between `a` operation and an operation undone by `b` operation.\n * @property {String|null} baRelation The relation between `b` operation and an operation undone by `a` operation.\n */\n\n/**\n * An utility function that updates {@link module:engine/model/operation/operation~Operation#baseVersion base versions}\n * of passed operations.\n *\n * The function simply sets `baseVersion` as a base version of the first passed operation and then increments it for\n * each following operation in `operations`.\n *\n * @private\n * @param {Array.<module:engine/model/operation/operation~Operation>} operations Operations to update.\n * @param {Number} baseVersion Base version to set for the first operation in `operations`.\n */\nfunction updateBaseVersions( operations, baseVersion ) {\n\tfor ( const operation of operations ) {\n\t\toperation.baseVersion = baseVersion++;\n\t}\n}\n\n/**\n * Adds `howMany` instances of {@link module:engine/model/operation/nooperation~NoOperation} to `operations` set.\n *\n * @private\n * @param {Array.<module:engine/model/operation/operation~Operation>} operations\n * @param {Number} howMany\n */\nfunction padWithNoOps( operations, howMany ) {\n\tfor ( let i = 0; i < howMany; i++ ) {\n\t\toperations.push( new NoOperation( 0 ) );\n\t}\n}\n\n// -----------------------\n\nsetTransformation( AttributeOperation, AttributeOperation, ( a, b, context ) => {\n\tif ( a.key === b.key ) {\n\t\t// If operations attributes are in conflict, check if their ranges intersect and manage them properly.\n\n\t\t// First, we want to apply change to the part of a range that has not been changed by the other operation.\n\t\tconst operations = a.range.getDifference( b.range ).map( range => {\n\t\t\treturn new AttributeOperation( range, a.key, a.oldValue, a.newValue, 0 );\n\t\t} );\n\n\t\t// Then we take care of the common part of ranges.\n\t\tconst common = a.range.getIntersection( b.range );\n\n\t\tif ( common ) {\n\t\t\t// If this operation is more important, we also want to apply change to the part of the\n\t\t\t// original range that has already been changed by the other operation. Since that range\n\t\t\t// got changed we also have to update `oldValue`.\n\t\t\tif ( context.aIsStrong ) {\n\t\t\t\toperations.push( new AttributeOperation( common, b.key, b.newValue, a.newValue, 0 ) );\n\t\t\t}\n\t\t}\n\n\t\tif ( operations.length == 0 ) {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t}\n\n\t\treturn operations;\n\t} else {\n\t\t// If operations don't conflict, simply return an array containing just a clone of this operation.\n\t\treturn [ a ];\n\t}\n} );\n\nsetTransformation( AttributeOperation, InsertOperation, ( a, b ) => {\n\t// Case 1:\n\t//\n\t// The attribute operation range includes the position where nodes were inserted.\n\t// There are two possible scenarios: the inserted nodes were text and they should receive attributes or\n\t// the inserted nodes were elements and they should not receive attributes.\n\t//\n\tif ( a.range.start.hasSameParentAs( b.position ) && a.range.containsPosition( b.position ) ) {\n\t\t// If new nodes should not receive attributes, two separated ranges will be returned.\n\t\t// Otherwise, one expanded range will be returned.\n\t\tconst range = a.range._getTransformedByInsertion( b.position, b.howMany, !b.shouldReceiveAttributes );\n\t\tconst result = range.map( r => {\n\t\t\treturn new AttributeOperation( r, a.key, a.oldValue, a.newValue, a.baseVersion );\n\t\t} );\n\n\t\tif ( b.shouldReceiveAttributes ) {\n\t\t\t// `AttributeOperation#range` includes some newly inserted text.\n\t\t\t// The operation should also change the attribute of that text. An example:\n\t\t\t//\n\t\t\t// Bold should be applied on the following range:\n\t\t\t// <p>Fo[zb]ar</p>\n\t\t\t//\n\t\t\t// In meantime, new text is typed:\n\t\t\t// <p>Fozxxbar</p>\n\t\t\t//\n\t\t\t// Bold should be applied also on the new text:\n\t\t\t// <p>Fo[zxxb]ar</p>\n\t\t\t// <p>Fo<$text bold=\"true\">zxxb</$text>ar</p>\n\t\t\t//\n\t\t\t// There is a special case to consider here to consider.\n\t\t\t//\n\t\t\t// Consider setting an attribute with multiple possible values, for example `highlight`. The inserted text might\n\t\t\t// have already an attribute value applied and the `oldValue` property of the attribute operation might be wrong:\n\t\t\t//\n\t\t\t// Attribute `highlight=\"yellow\"` should be applied on the following range:\n\t\t\t// <p>Fo[zb]ar<p>\n\t\t\t//\n\t\t\t// In meantime, character `x` with `highlight=\"red\"` is typed:\n\t\t\t// <p>Fo[z<$text highlight=\"red\">x</$text>b]ar</p>\n\t\t\t//\n\t\t\t// In this case we cannot simply apply operation changing the attribute value from `null` to `\"yellow\"` for the whole range\n\t\t\t// because that would lead to an exception (`oldValue` is incorrect for `x`).\n\t\t\t//\n\t\t\t// We also cannot break the original range as this would mess up a scenario when there are multiple following\n\t\t\t// insert operations, because then only the first inserted character is included in those ranges:\n\t\t\t// <p>Fo[z][x][b]ar</p>   -->   <p>Fo[z][x]x[b]ar</p>   -->   <p>Fo[z][x]xx[b]ar</p>\n\t\t\t//\n\t\t\t// So, the attribute range needs be expanded, no matter what attributes are set on the inserted nodes:\n\t\t\t//\n\t\t\t// <p>Fo[z<$text highlight=\"red\">x</$text>b]ar</p>      <--- Change from `null` to `yellow`, throwing an exception.\n\t\t\t//\n\t\t\t// But before that operation would be applied, we will add an additional attribute operation that will change\n\t\t\t// attributes on the inserted nodes in a way which would make the original operation correct:\n\t\t\t//\n\t\t\t// <p>Fo[z{<$text highlight=\"red\">}x</$text>b]ar</p>    <--- Change range `{}` from `red` to `null`.\n\t\t\t// <p>Fo[zxb]ar</p>                                     <--- Now change from `null` to `yellow` is completely fine.\n\t\t\t//\n\n\t\t\t// Generate complementary attribute operation. Be sure to add it before the original operation.\n\t\t\tconst op = _getComplementaryAttributeOperations( b, a.key, a.oldValue );\n\n\t\t\tif ( op ) {\n\t\t\t\tresult.unshift( op );\n\t\t\t}\n\t\t}\n\n\t\t// If nodes should not receive new attribute, we are done here.\n\t\treturn result;\n\t}\n\n\t// If insert operation is not expanding the attribute operation range, simply transform the range.\n\ta.range = a.range._getTransformedByInsertion( b.position, b.howMany, false )[ 0 ];\n\n\treturn [ a ];\n} );\n\n/**\n * Helper function for `AttributeOperation` x `InsertOperation` (and reverse) transformation.\n *\n * For given `insertOperation` it checks the inserted node if it has an attribute `key` set to a value different\n * than `newValue`. If so, it generates an `AttributeOperation` which changes the value of `key` attribute to `newValue`.\n *\n * @private\n * @param {module:engine/model/operation/insertoperation~InsertOperation} insertOperation\n * @param {String} key\n * @param {*} newValue\n * @returns {module:engine/model/operation/attributeoperation~AttributeOperation|null}\n */\nfunction _getComplementaryAttributeOperations( insertOperation, key, newValue ) {\n\tconst nodes = insertOperation.nodes;\n\n\t// At the beginning we store the attribute value from the first node.\n\tconst insertValue = nodes.getNode( 0 ).getAttribute( key );\n\n\tif ( insertValue == newValue ) {\n\t\treturn null;\n\t}\n\n\tconst range = new Range( insertOperation.position, insertOperation.position.getShiftedBy( insertOperation.howMany ) );\n\n\treturn new AttributeOperation( range, key, insertValue, newValue, 0 );\n}\n\nsetTransformation( AttributeOperation, MergeOperation, ( a, b ) => {\n\tconst ranges = [];\n\n\t// Case 1:\n\t//\n\t// Attribute change on the merged element. In this case, the merged element was moved to the graveyard.\n\t// An additional attribute operation that will change the (re)moved element needs to be generated.\n\t//\n\tif ( a.range.start.hasSameParentAs( b.deletionPosition ) ) {\n\t\tif ( a.range.containsPosition( b.deletionPosition ) || a.range.start.isEqual( b.deletionPosition ) ) {\n\t\t\tranges.push( Range._createFromPositionAndShift( b.graveyardPosition, 1 ) );\n\t\t}\n\t}\n\n\tconst range = a.range._getTransformedByMergeOperation( b );\n\n\t// Do not add empty (collapsed) ranges to the result. `range` may be collapsed if it contained only the merged element.\n\tif ( !range.isCollapsed ) {\n\t\tranges.push( range );\n\t}\n\n\t// Create `AttributeOperation`s out of the ranges.\n\treturn ranges.map( range => {\n\t\treturn new AttributeOperation( range, a.key, a.oldValue, a.newValue, a.baseVersion );\n\t} );\n} );\n\nsetTransformation( AttributeOperation, MoveOperation, ( a, b ) => {\n\tconst ranges = _breakRangeByMoveOperation( a.range, b );\n\n\t// Create `AttributeOperation`s out of the ranges.\n\treturn ranges.map( range => new AttributeOperation( range, a.key, a.oldValue, a.newValue, a.baseVersion ) );\n} );\n\n// Helper function for `AttributeOperation` x `MoveOperation` transformation.\n//\n// Takes the passed `range` and transforms it by move operation `moveOp` in a specific way. Only top-level nodes of `range`\n// are considered to be in the range. If move operation moves nodes deep from inside of the range, those nodes won't\n// be included in the result. In other words, top-level nodes of the ranges from the result are exactly the same as\n// top-level nodes of the original `range`.\n//\n// This is important for `AttributeOperation` because, for its range, it changes only the top-level nodes. So we need to\n// track only how those nodes have been affected by `MoveOperation`.\n//\n// @private\n// @param {module:engine/model/range~Range} range\n// @param {module:engine/model/operation/moveoperation~MoveOperation} moveOp\n// @returns {Array.<module:engine/model/range~Range>}\nfunction _breakRangeByMoveOperation( range, moveOp ) {\n\tconst moveRange = Range._createFromPositionAndShift( moveOp.sourcePosition, moveOp.howMany );\n\n\t// We are transforming `range` (original range) by `moveRange` (range moved by move operation). As usual when it comes to\n\t// transforming a ranges, we may have a common part of the ranges and we may have a difference part (zero to two ranges).\n\tlet common = null;\n\tlet difference = [];\n\n\t// Let's compare the ranges.\n\tif ( moveRange.containsRange( range, true ) ) {\n\t\t// If the whole original range is moved, treat it whole as a common part. There's also no difference part.\n\t\tcommon = range;\n\t} else if ( range.start.hasSameParentAs( moveRange.start ) ) {\n\t\t// If the ranges are \"on the same level\" (in the same parent) then move operation may move exactly those nodes\n\t\t// that are changed by the attribute operation. In this case we get common part and difference part in the usual way.\n\t\tdifference = range.getDifference( moveRange );\n\t\tcommon = range.getIntersection( moveRange );\n\t} else {\n\t\t// In any other situation we assume that original range is different than move range, that is that move operation\n\t\t// moves other nodes that attribute operation change. Even if the moved range is deep inside in the original range.\n\t\t//\n\t\t// Note that this is different than in `.getIntersection` (we would get a common part in that case) and different\n\t\t// than `.getDifference` (we would get two ranges).\n\t\tdifference = [ range ];\n\t}\n\n\tconst result = [];\n\n\t// The default behaviour of `_getTransformedByMove` might get wrong results for difference part, though, so\n\t// we do it by hand.\n\tfor ( let diff of difference ) {\n\t\t// First, transform the range by removing moved nodes. Since this is a difference, this is safe, `null` won't be returned\n\t\t// as the range is different than the moved range.\n\t\tdiff = diff._getTransformedByDeletion( moveOp.sourcePosition, moveOp.howMany );\n\n\t\t// Transform also `targetPosition`.\n\t\tconst targetPosition = moveOp.getMovedRangeStart();\n\n\t\t// Spread the range only if moved nodes are inserted only between the top-level nodes of the `diff` range.\n\t\tconst spread = diff.start.hasSameParentAs( targetPosition );\n\n\t\t// Transform by insertion of moved nodes.\n\t\tdiff = diff._getTransformedByInsertion( targetPosition, moveOp.howMany, spread );\n\n\t\tresult.push( ...diff );\n\t}\n\n\t// Common part can be simply transformed by the move operation. This is because move operation will not target to\n\t// that common part (the operation would have to target inside its own moved range).\n\tif ( common ) {\n\t\tresult.push(\n\t\t\tcommon._getTransformedByMove( moveOp.sourcePosition, moveOp.targetPosition, moveOp.howMany, false )[ 0 ]\n\t\t);\n\t}\n\n\treturn result;\n}\n\nsetTransformation( AttributeOperation, SplitOperation, ( a, b ) => {\n\t// Case 1:\n\t//\n\t// Split node is the last node in `AttributeOperation#range`.\n\t// `AttributeOperation#range` needs to be expanded to include the new (split) node.\n\t//\n\t// Attribute `type` to be changed to `numbered` but the `listItem` is split.\n\t// <listItem type=\"bulleted\">foobar</listItem>\n\t//\n\t// After split:\n\t// <listItem type=\"bulleted\">foo</listItem><listItem type=\"bulleted\">bar</listItem>\n\t//\n\t// After attribute change:\n\t// <listItem type=\"numbered\">foo</listItem><listItem type=\"numbered\">foo</listItem>\n\t//\n\tif ( a.range.end.isEqual( b.insertionPosition ) ) {\n\t\tif ( !b.graveyardPosition ) {\n\t\t\ta.range.end.offset++;\n\t\t}\n\n\t\treturn [ a ];\n\t}\n\n\t// Case 2:\n\t//\n\t// Split position is inside `AttributeOperation#range`, at the same level, so the nodes to change are\n\t// not going to make a flat range.\n\t//\n\t// Content with range-to-change and split position:\n\t// <p>Fo[zb^a]r</p>\n\t//\n\t// After split:\n\t// <p>Fozb</p><p>ar</p>\n\t//\n\t// Make two separate ranges containing all nodes to change:\n\t// <p>Fo[zb]</p><p>[a]r</p>\n\t//\n\tif ( a.range.start.hasSameParentAs( b.splitPosition ) && a.range.containsPosition( b.splitPosition ) ) {\n\t\tconst secondPart = a.clone();\n\n\t\tsecondPart.range = new Range(\n\t\t\tb.moveTargetPosition.clone(),\n\t\t\ta.range.end._getCombined( b.splitPosition, b.moveTargetPosition )\n\t\t);\n\n\t\ta.range.end = b.splitPosition.clone();\n\t\ta.range.end.stickiness = 'toPrevious';\n\n\t\treturn [ a, secondPart ];\n\t}\n\n\t// The default case.\n\t//\n\ta.range = a.range._getTransformedBySplitOperation( b );\n\n\treturn [ a ];\n} );\n\nsetTransformation( InsertOperation, AttributeOperation, ( a, b ) => {\n\tconst result = [ a ];\n\n\t// Case 1:\n\t//\n\t// The attribute operation range includes the position where nodes were inserted.\n\t// There are two possible scenarios: the inserted nodes were text and they should receive attributes or\n\t// the inserted nodes were elements and they should not receive attributes.\n\t//\n\t// This is a mirror scenario to the one described in `AttributeOperation` x `InsertOperation` transformation,\n\t// although this case is a little less complicated. In this case we simply need to change attributes of the\n\t// inserted nodes and that's it.\n\t//\n\tif ( a.shouldReceiveAttributes && a.position.hasSameParentAs( b.range.start ) && b.range.containsPosition( a.position ) ) {\n\t\tconst op = _getComplementaryAttributeOperations( a, b.key, b.newValue );\n\n\t\tif ( op ) {\n\t\t\tresult.push( op );\n\t\t}\n\t}\n\n\t// The default case is: do nothing.\n\t// `AttributeOperation` does not change the model tree structure so `InsertOperation` does not need to be changed.\n\t//\n\treturn result;\n} );\n\nsetTransformation( InsertOperation, InsertOperation, ( a, b, context ) => {\n\t// Case 1:\n\t//\n\t// Two insert operations insert nodes at the same position. Since they are the same, it needs to be decided\n\t// what will be the order of inserted nodes. However, there is no additional information to help in that\n\t// decision. Also, when `b` will be transformed by `a`, the same order must be maintained.\n\t//\n\t// To achieve that, we will check if the operation is strong.\n\t// If it is, it won't get transformed. If it is not, it will be moved.\n\t//\n\tif ( a.position.isEqual( b.position ) && context.aIsStrong ) {\n\t\treturn [ a ];\n\t}\n\n\t// The default case.\n\t//\n\ta.position = a.position._getTransformedByInsertOperation( b );\n\n\treturn [ a ];\n} );\n\nsetTransformation( InsertOperation, MoveOperation, ( a, b ) => {\n\t// The default case.\n\t//\n\ta.position = a.position._getTransformedByMoveOperation( b );\n\n\treturn [ a ];\n} );\n\nsetTransformation( InsertOperation, SplitOperation, ( a, b ) => {\n\t// The default case.\n\t//\n\ta.position = a.position._getTransformedBySplitOperation( b );\n\n\treturn [ a ];\n} );\n\nsetTransformation( InsertOperation, MergeOperation, ( a, b ) => {\n\ta.position = a.position._getTransformedByMergeOperation( b );\n\n\treturn [ a ];\n} );\n\n// -----------------------\n\nsetTransformation( MarkerOperation, InsertOperation, ( a, b ) => {\n\tif ( a.oldRange ) {\n\t\ta.oldRange = a.oldRange._getTransformedByInsertOperation( b )[ 0 ];\n\t}\n\n\tif ( a.newRange ) {\n\t\ta.newRange = a.newRange._getTransformedByInsertOperation( b )[ 0 ];\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( MarkerOperation, MarkerOperation, ( a, b, context ) => {\n\tif ( a.name == b.name ) {\n\t\tif ( context.aIsStrong ) {\n\t\t\ta.oldRange = b.newRange ? b.newRange.clone() : null;\n\t\t} else {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t}\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( MarkerOperation, MergeOperation, ( a, b ) => {\n\tif ( a.oldRange ) {\n\t\ta.oldRange = a.oldRange._getTransformedByMergeOperation( b );\n\t}\n\n\tif ( a.newRange ) {\n\t\ta.newRange = a.newRange._getTransformedByMergeOperation( b );\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( MarkerOperation, MoveOperation, ( a, b, context ) => {\n\tif ( a.oldRange ) {\n\t\ta.oldRange = Range._createFromRanges( a.oldRange._getTransformedByMoveOperation( b ) );\n\t}\n\n\tif ( a.newRange ) {\n\t\tif ( context.abRelation ) {\n\t\t\tconst aNewRange = Range._createFromRanges( a.newRange._getTransformedByMoveOperation( b ) );\n\n\t\t\tif ( context.abRelation.side == 'left' && b.targetPosition.isEqual( a.newRange.start ) ) {\n\t\t\t\ta.newRange.start.path = context.abRelation.path;\n\t\t\t\ta.newRange.end = aNewRange.end;\n\n\t\t\t\treturn [ a ];\n\t\t\t} else if ( context.abRelation.side == 'right' && b.targetPosition.isEqual( a.newRange.end ) ) {\n\t\t\t\ta.newRange.start = aNewRange.start;\n\t\t\t\ta.newRange.end.path = context.abRelation.path;\n\n\t\t\t\treturn [ a ];\n\t\t\t}\n\t\t}\n\n\t\ta.newRange = Range._createFromRanges( a.newRange._getTransformedByMoveOperation( b ) );\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( MarkerOperation, SplitOperation, ( a, b, context ) => {\n\tif ( a.oldRange ) {\n\t\ta.oldRange = a.oldRange._getTransformedBySplitOperation( b );\n\t}\n\n\tif ( a.newRange ) {\n\t\tif ( context.abRelation ) {\n\t\t\tconst aNewRange = a.newRange._getTransformedBySplitOperation( b );\n\n\t\t\tif ( a.newRange.start.isEqual( b.splitPosition ) && context.abRelation.wasStartBeforeMergedElement ) {\n\t\t\t\ta.newRange.start = Position._createAt( b.insertionPosition );\n\t\t\t} else if ( a.newRange.start.isEqual( b.splitPosition ) && !context.abRelation.wasInLeftElement ) {\n\t\t\t\ta.newRange.start = Position._createAt( b.moveTargetPosition );\n\t\t\t}\n\n\t\t\tif ( a.newRange.end.isEqual( b.splitPosition ) && context.abRelation.wasInRightElement ) {\n\t\t\t\ta.newRange.end = Position._createAt( b.moveTargetPosition );\n\t\t\t} else if ( a.newRange.end.isEqual( b.splitPosition ) && context.abRelation.wasEndBeforeMergedElement ) {\n\t\t\t\ta.newRange.end = Position._createAt( b.insertionPosition );\n\t\t\t} else {\n\t\t\t\ta.newRange.end = aNewRange.end;\n\t\t\t}\n\n\t\t\treturn [ a ];\n\t\t}\n\n\t\ta.newRange = a.newRange._getTransformedBySplitOperation( b );\n\t}\n\n\treturn [ a ];\n} );\n\n// -----------------------\n\nsetTransformation( MergeOperation, InsertOperation, ( a, b ) => {\n\tif ( a.sourcePosition.hasSameParentAs( b.position ) ) {\n\t\ta.howMany += b.howMany;\n\t}\n\n\ta.sourcePosition = a.sourcePosition._getTransformedByInsertOperation( b );\n\ta.targetPosition = a.targetPosition._getTransformedByInsertOperation( b );\n\n\treturn [ a ];\n} );\n\nsetTransformation( MergeOperation, MergeOperation, ( a, b, context ) => {\n\t// Case 1:\n\t//\n\t// Same merge operations.\n\t//\n\t// Both operations have same source and target positions. So the element already got merged and there is\n\t// theoretically nothing to do.\n\t//\n\tif ( a.sourcePosition.isEqual( b.sourcePosition ) && a.targetPosition.isEqual( b.targetPosition ) ) {\n\t\t// There are two ways that we can provide a do-nothing operation.\n\t\t//\n\t\t// First is simply a NoOperation instance. We will use it if `b` operation was not undone.\n\t\t//\n\t\t// Second is a merge operation that has the source operation in the merged element - in the graveyard -\n\t\t// same target position and `howMany` equal to `0`. So it is basically merging an empty element from graveyard\n\t\t// which is almost the same as NoOperation.\n\t\t//\n\t\t// This way the merge operation can be later transformed by split operation\n\t\t// to provide correct undo. This will be used if `b` operation was undone (only then it is correct).\n\t\t//\n\t\tif ( !context.bWasUndone ) {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t} else {\n\t\t\tconst path = b.graveyardPosition.path.slice();\n\t\t\tpath.push( 0 );\n\n\t\t\ta.sourcePosition = new Position( b.graveyardPosition.root, path );\n\t\t\ta.howMany = 0;\n\n\t\t\treturn [ a ];\n\t\t}\n\t}\n\n\t// Case 2:\n\t//\n\t// Same merge source position but different target position.\n\t//\n\t// This can happen during collaboration. For example, if one client merged a paragraph to the previous paragraph\n\t// and the other person removed that paragraph and merged the same paragraph to something before:\n\t//\n\t// Client A:\n\t// <p>Foo</p><p>Bar</p><p>[]Xyz</p>\n\t// <p>Foo</p><p>BarXyz</p>\n\t//\n\t// Client B:\n\t// <p>Foo</p>[<p>Bar</p>]<p>Xyz</p>\n\t// <p>Foo</p><p>[]Xyz</p>\n\t// <p>FooXyz</p>\n\t//\n\t// In this case we need to decide where finally \"Xyz\" will land:\n\t//\n\t// <p>FooXyz</p>               graveyard: <p>Bar</p>\n\t// <p>Foo</p>                  graveyard: <p>BarXyz</p>\n\t//\n\t// Let's move it in a way so that a merge operation that does not target to graveyard is more important so that\n\t// nodes does not end up in the graveyard. It makes sense. Both for Client A and for Client B \"Xyz\" finally did not\n\t// end up in the graveyard (see above).\n\t//\n\t// If neither or both operations point to graveyard, then let `aIsStrong` decide.\n\t//\n\tif (\n\t\ta.sourcePosition.isEqual( b.sourcePosition ) && !a.targetPosition.isEqual( b.targetPosition ) &&\n\t\t!context.bWasUndone && context.abRelation != 'splitAtSource'\n\t) {\n\t\tconst aToGraveyard = a.targetPosition.root.rootName == '$graveyard';\n\t\tconst bToGraveyard = b.targetPosition.root.rootName == '$graveyard';\n\n\t\t// If `aIsWeak` it means that `a` points to graveyard while `b` doesn't. Don't move nodes then.\n\t\tconst aIsWeak = aToGraveyard && !bToGraveyard;\n\n\t\t// If `bIsWeak` it means that `b` points to graveyard while `a` doesn't. Force moving nodes then.\n\t\tconst bIsWeak = bToGraveyard && !aToGraveyard;\n\n\t\t// Force move if `b` is weak or neither operation is weak but `a` is stronger through `context.aIsStrong`.\n\t\tconst forceMove = bIsWeak || ( !aIsWeak && context.aIsStrong );\n\n\t\tif ( forceMove ) {\n\t\t\tconst sourcePosition = b.targetPosition._getTransformedByMergeOperation( b );\n\t\t\tconst targetPosition = a.targetPosition._getTransformedByMergeOperation( b );\n\n\t\t\treturn [ new MoveOperation( sourcePosition, a.howMany, targetPosition, 0 ) ];\n\t\t} else {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t}\n\t}\n\n\t// The default case.\n\t//\n\tif ( a.sourcePosition.hasSameParentAs( b.targetPosition ) ) {\n\t\ta.howMany += b.howMany;\n\t}\n\n\ta.sourcePosition = a.sourcePosition._getTransformedByMergeOperation( b );\n\ta.targetPosition = a.targetPosition._getTransformedByMergeOperation( b );\n\n\t// Handle positions in graveyard.\n\t// If graveyard positions are same and `a` operation is strong - do not transform.\n\tif ( !a.graveyardPosition.isEqual( b.graveyardPosition ) || !context.aIsStrong ) {\n\t\ta.graveyardPosition = a.graveyardPosition._getTransformedByMergeOperation( b );\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( MergeOperation, MoveOperation, ( a, b, context ) => {\n\t// Case 1:\n\t//\n\t// The element to merge got removed.\n\t//\n\t// Merge operation does support merging elements which are not siblings. So it would not be a problem\n\t// from technical point of view. However, if the element was removed, the intention of the user deleting it\n\t// was to have it all deleted, together with its children. From user experience point of view, moving back the\n\t// removed nodes might be unexpected. This means that in this scenario we will block the merging.\n\t//\n\t// The exception of this rule would be if the remove operation was later undone.\n\t//\n\tconst removedRange = Range._createFromPositionAndShift( b.sourcePosition, b.howMany );\n\n\tif ( b.type == 'remove' && !context.bWasUndone && !context.forceWeakRemove ) {\n\t\tif ( a.deletionPosition.hasSameParentAs( b.sourcePosition ) && removedRange.containsPosition( a.sourcePosition ) ) {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t}\n\t}\n\n\t// The default case.\n\t//\n\tif ( a.sourcePosition.hasSameParentAs( b.targetPosition ) ) {\n\t\ta.howMany += b.howMany;\n\t}\n\n\tif ( a.sourcePosition.hasSameParentAs( b.sourcePosition ) ) {\n\t\ta.howMany -= b.howMany;\n\t}\n\n\ta.sourcePosition = a.sourcePosition._getTransformedByMoveOperation( b );\n\ta.targetPosition = a.targetPosition._getTransformedByMoveOperation( b );\n\n\t// `MergeOperation` graveyard position is like `MoveOperation` target position. It is a position where element(s) will\n\t// be moved. Like in other similar cases, we need to consider the scenario when those positions are same.\n\t// Here, we will treat `MergeOperation` like it is always strong (see `InsertOperation` x `InsertOperation` for comparison).\n\t// This means that we won't transform graveyard position if it is equal to move operation target position.\n\tif ( !a.graveyardPosition.isEqual( b.targetPosition ) ) {\n\t\ta.graveyardPosition = a.graveyardPosition._getTransformedByMoveOperation( b );\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( MergeOperation, SplitOperation, ( a, b, context ) => {\n\tif ( b.graveyardPosition ) {\n\t\t// If `b` operation defines graveyard position, a node from graveyard will be moved. This means that we need to\n\t\t// transform `a.graveyardPosition` accordingly.\n\t\ta.graveyardPosition = a.graveyardPosition._getTransformedByDeletion( b.graveyardPosition, 1 );\n\n\t\t// This is a scenario foreseen in `MergeOperation` x `MergeOperation`, with two identical merge operations.\n\t\t//\n\t\t// So, there was `MergeOperation` x `MergeOperation` transformation earlier. Now, `a` is a merge operation which\n\t\t// source position is in graveyard. Interestingly, split operation wants to use the node to be merged by `a`. This\n\t\t// means that `b` is undoing that merge operation from earlier, which caused `a` to be in graveyard.\n\t\t//\n\t\t// If that's the case, at this point, we will only \"fix\" `a.howMany`. It was earlier set to `0` in\n\t\t// `MergeOperation` x `MergeOperation` transformation. Later transformations in this function will change other\n\t\t// properties.\n\t\t//\n\t\tif ( a.deletionPosition.isEqual( b.graveyardPosition ) ) {\n\t\t\ta.howMany = b.howMany;\n\t\t}\n\t}\n\n\t// Case 1:\n\t//\n\t// Merge operation moves nodes to the place where split happens.\n\t// This is a classic situation when there are two paragraphs, and there is a split (enter) after the first\n\t// paragraph and there is a merge (delete) at the beginning of the second paragraph:\n\t//\n\t// <p>Foo{}</p><p>[]Bar</p>.\n\t//\n\t// Split is after `Foo`, while merge is from `Bar` to the end of `Foo`.\n\t//\n\t// State after split:\n\t// <p>Foo</p><p></p><p>Bar</p>\n\t//\n\t// Now, `Bar` should be merged to the new paragraph:\n\t// <p>Foo</p><p>Bar</p>\n\t//\n\t// Instead of merging it to the original paragraph:\n\t// <p>FooBar</p><p></p>\n\t//\n\t// This means that `targetPosition` needs to be transformed. This is the default case though.\n\t// For example, if the split would be after `F`, `targetPosition` should also be transformed.\n\t//\n\t// There are three exceptions, though, when we want to keep `targetPosition` as it was.\n\t//\n\t// First exception is when the merge target position is inside an element (not at the end, as usual). This\n\t// happens when the merge operation earlier was transformed by \"the same\" merge operation. If merge operation\n\t// targets inside the element we want to keep the original target position (and not transform it) because\n\t// we have additional context telling us that we want to merge to the original element. We can check if the\n\t// merge operation points inside element by checking what is `SplitOperation#howMany`. Since merge target position\n\t// is same as split position, if `howMany` is non-zero, it means that the merge target position is inside an element.\n\t//\n\t// Second exception is when the element to merge is in the graveyard and split operation uses it. In that case\n\t// if target position would be transformed, the merge operation would target at the source position:\n\t//\n\t// root: <p>Foo</p>\t\t\t\tgraveyard: <p></p>\n\t//\n\t// SplitOperation: root [ 0, 3 ] using graveyard [ 0 ] (howMany = 0)\n\t// MergeOperation: graveyard [ 0, 0 ] -> root [ 0, 3 ] (howMany = 0)\n\t//\n\t// Since split operation moves the graveyard node back to the root, the merge operation source position changes.\n\t// We would like to merge from the empty <p> to the \"Foo\" <p>:\n\t//\n\t// root: <p>Foo</p><p></p>\t\t\tgraveyard:\n\t//\n\t// MergeOperation#sourcePosition = root [ 1, 0 ]\n\t//\n\t// If `targetPosition` is transformed, it would become root [ 1, 0 ] as well. It has to be kept as it was.\n\t//\n\t// Third exception is connected with relations. If this happens during undo and we have explicit information\n\t// that target position has not been affected by the operation which is undone by this split then this split should\n\t// not move the target position either.\n\t//\n\tif ( a.targetPosition.isEqual( b.splitPosition ) ) {\n\t\tconst mergeInside = b.howMany != 0;\n\t\tconst mergeSplittingElement = b.graveyardPosition && a.deletionPosition.isEqual( b.graveyardPosition );\n\n\t\tif ( mergeInside || mergeSplittingElement || context.abRelation == 'mergeTargetNotMoved' ) {\n\t\t\ta.sourcePosition = a.sourcePosition._getTransformedBySplitOperation( b );\n\n\t\t\treturn [ a ];\n\t\t}\n\t}\n\n\t// Case 2:\n\t//\n\t// Merge source is at the same position as split position. This sometimes happen, mostly during undo.\n\t// The decision here is mostly to choose whether merge source position should stay where it is (so it will be at the end of the\n\t// split element) or should be move to the beginning of the new element.\n\t//\n\tif ( a.sourcePosition.isEqual( b.splitPosition ) ) {\n\t\t// Use context to check if `SplitOperation` is not undoing a merge operation, that didn't change the `a` operation.\n\t\t// This scenario happens the undone merge operation moved nodes at the source position of `a` operation.\n\t\t// In that case `a` operation source position should stay where it is.\n\t\tif ( context.abRelation == 'mergeSourceNotMoved' ) {\n\t\t\ta.howMany = 0;\n\t\t\ta.targetPosition = a.targetPosition._getTransformedBySplitOperation( b );\n\n\t\t\treturn [ a ];\n\t\t}\n\n\t\t// This merge operation might have been earlier transformed by a merge operation which both merged the same element.\n\t\t// See that case in `MergeOperation` x `MergeOperation` transformation. In that scenario, if the merge operation has been undone,\n\t\t// the special case is not applied.\n\t\t//\n\t\t// Now, the merge operation is transformed by the split which has undone that previous merge operation.\n\t\t// So now we are fixing situation which was skipped in `MergeOperation` x `MergeOperation` case.\n\t\t//\n\t\tif ( context.abRelation == 'mergeSameElement' || a.sourcePosition.offset > 0 ) {\n\t\t\ta.sourcePosition = b.moveTargetPosition.clone();\n\t\t\ta.targetPosition = a.targetPosition._getTransformedBySplitOperation( b );\n\n\t\t\treturn [ a ];\n\t\t}\n\t}\n\n\t// The default case.\n\t//\n\tif ( a.sourcePosition.hasSameParentAs( b.splitPosition ) ) {\n\t\ta.howMany = b.splitPosition.offset;\n\t}\n\n\ta.sourcePosition = a.sourcePosition._getTransformedBySplitOperation( b );\n\ta.targetPosition = a.targetPosition._getTransformedBySplitOperation( b );\n\n\treturn [ a ];\n} );\n\n// -----------------------\n\nsetTransformation( MoveOperation, InsertOperation, ( a, b ) => {\n\tconst moveRange = Range._createFromPositionAndShift( a.sourcePosition, a.howMany );\n\tconst transformed = moveRange._getTransformedByInsertOperation( b, false )[ 0 ];\n\n\ta.sourcePosition = transformed.start;\n\ta.howMany = transformed.end.offset - transformed.start.offset;\n\n\t// See `InsertOperation` x `MoveOperation` transformation for details on this case.\n\t//\n\t// In summary, both operations point to the same place, so the order of nodes needs to be decided.\n\t// `MoveOperation` is considered weaker, so it is always transformed, unless there was a certain relation\n\t// between operations.\n\t//\n\tif ( !a.targetPosition.isEqual( b.position ) ) {\n\t\ta.targetPosition = a.targetPosition._getTransformedByInsertOperation( b );\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( MoveOperation, MoveOperation, ( a, b, context ) => {\n\t//\n\t// Setting and evaluating some variables that will be used in special cases and default algorithm.\n\t//\n\t// Create ranges from `MoveOperations` properties.\n\tconst rangeA = Range._createFromPositionAndShift( a.sourcePosition, a.howMany );\n\tconst rangeB = Range._createFromPositionAndShift( b.sourcePosition, b.howMany );\n\n\t// Assign `context.aIsStrong` to a different variable, because the value may change during execution of\n\t// this algorithm and we do not want to override original `context.aIsStrong` that will be used in later transformations.\n\tlet aIsStrong = context.aIsStrong;\n\n\t// This will be used to decide the order of nodes if both operations target at the same position.\n\t// By default, use strong/weak operation mechanism.\n\tlet insertBefore = !context.aIsStrong;\n\n\t// If the relation is set, then use it to decide nodes order.\n\tif ( context.abRelation == 'insertBefore' || context.baRelation == 'insertAfter' ) {\n\t\tinsertBefore = true;\n\t} else if ( context.abRelation == 'insertAfter' || context.baRelation == 'insertBefore' ) {\n\t\tinsertBefore = false;\n\t}\n\n\t// `a.targetPosition` could be affected by the `b` operation. We will transform it.\n\tlet newTargetPosition;\n\n\tif ( a.targetPosition.isEqual( b.targetPosition ) && insertBefore ) {\n\t\tnewTargetPosition = a.targetPosition._getTransformedByDeletion(\n\t\t\tb.sourcePosition,\n\t\t\tb.howMany\n\t\t);\n\t} else {\n\t\tnewTargetPosition = a.targetPosition._getTransformedByMove(\n\t\t\tb.sourcePosition,\n\t\t\tb.targetPosition,\n\t\t\tb.howMany\n\t\t);\n\t}\n\n\t//\n\t// Special case #1 + mirror.\n\t//\n\t// Special case when both move operations' target positions are inside nodes that are\n\t// being moved by the other move operation. So in other words, we move ranges into inside of each other.\n\t// This case can't be solved reasonably (on the other hand, it should not happen often).\n\tif ( _moveTargetIntoMovedRange( a, b ) && _moveTargetIntoMovedRange( b, a ) ) {\n\t\t// Instead of transforming operation, we return a reverse of the operation that we transform by.\n\t\t// So when the results of this \"transformation\" will be applied, `b` MoveOperation will get reversed.\n\t\treturn [ b.getReversed() ];\n\t}\n\t//\n\t// End of special case #1.\n\t//\n\n\t//\n\t// Special case #2.\n\t//\n\t// Check if `b` operation targets inside `rangeA`.\n\tconst bTargetsToA = rangeA.containsPosition( b.targetPosition );\n\n\t// If `b` targets to `rangeA` and `rangeA` contains `rangeB`, `b` operation has no influence on `a` operation.\n\t// You might say that operation `b` is captured inside operation `a`.\n\tif ( bTargetsToA && rangeA.containsRange( rangeB, true ) ) {\n\t\t// There is a mini-special case here, where `rangeB` is on other level than `rangeA`. That's why\n\t\t// we need to transform `a` operation anyway.\n\t\trangeA.start = rangeA.start._getTransformedByMove( b.sourcePosition, b.targetPosition, b.howMany );\n\t\trangeA.end = rangeA.end._getTransformedByMove( b.sourcePosition, b.targetPosition, b.howMany );\n\n\t\treturn _makeMoveOperationsFromRanges( [ rangeA ], newTargetPosition );\n\t}\n\n\t//\n\t// Special case #2 mirror.\n\t//\n\tconst aTargetsToB = rangeB.containsPosition( a.targetPosition );\n\n\tif ( aTargetsToB && rangeB.containsRange( rangeA, true ) ) {\n\t\t// `a` operation is \"moved together\" with `b` operation.\n\t\t// Here, just move `rangeA` \"inside\" `rangeB`.\n\t\trangeA.start = rangeA.start._getCombined( b.sourcePosition, b.getMovedRangeStart() );\n\t\trangeA.end = rangeA.end._getCombined( b.sourcePosition, b.getMovedRangeStart() );\n\n\t\treturn _makeMoveOperationsFromRanges( [ rangeA ], newTargetPosition );\n\t}\n\t//\n\t// End of special case #2.\n\t//\n\n\t//\n\t// Special case #3 + mirror.\n\t//\n\t// `rangeA` has a node which is an ancestor of `rangeB`. In other words, `rangeB` is inside `rangeA`\n\t// but not on the same tree level. In such case ranges have common part but we have to treat it\n\t// differently, because in such case those ranges are not really conflicting and should be treated like\n\t// two separate ranges. Also we have to discard two difference parts.\n\tconst aCompB = compareArrays( a.sourcePosition.getParentPath(), b.sourcePosition.getParentPath() );\n\n\tif ( aCompB == 'prefix' || aCompB == 'extension' ) {\n\t\t// Transform `rangeA` by `b` operation and make operation out of it, and that's all.\n\t\t// Note that this is a simplified version of default case, but here we treat the common part (whole `rangeA`)\n\t\t// like a one difference part.\n\t\trangeA.start = rangeA.start._getTransformedByMove( b.sourcePosition, b.targetPosition, b.howMany );\n\t\trangeA.end = rangeA.end._getTransformedByMove( b.sourcePosition, b.targetPosition, b.howMany );\n\n\t\treturn _makeMoveOperationsFromRanges( [ rangeA ], newTargetPosition );\n\t}\n\t//\n\t// End of special case #3.\n\t//\n\n\t//\n\t// Default case - ranges are on the same level or are not connected with each other.\n\t//\n\t// Modifier for default case.\n\t// Modifies `aIsStrong` flag in certain conditions.\n\t//\n\t// If only one of operations is a remove operation, we force remove operation to be the \"stronger\" one\n\t// to provide more expected results.\n\tif ( a.type == 'remove' && b.type != 'remove' && !context.aWasUndone && !context.forceWeakRemove ) {\n\t\taIsStrong = true;\n\t} else if ( a.type != 'remove' && b.type == 'remove' && !context.bWasUndone && !context.forceWeakRemove ) {\n\t\taIsStrong = false;\n\t}\n\n\t// Handle operation's source ranges - check how `rangeA` is affected by `b` operation.\n\t// This will aggregate transformed ranges.\n\tconst ranges = [];\n\n\t// Get the \"difference part\" of `a` operation source range.\n\t// This is an array with one or two ranges. Two ranges if `rangeB` is inside `rangeA`.\n\tconst difference = rangeA.getDifference( rangeB );\n\n\tfor ( const range of difference ) {\n\t\t// Transform those ranges by `b` operation. For example if `b` moved range from before those ranges, fix those ranges.\n\t\trange.start = range.start._getTransformedByDeletion( b.sourcePosition, b.howMany );\n\t\trange.end = range.end._getTransformedByDeletion( b.sourcePosition, b.howMany );\n\n\t\t// If `b` operation targets into `rangeA` on the same level, spread `rangeA` into two ranges.\n\t\tconst shouldSpread = compareArrays( range.start.getParentPath(), b.getMovedRangeStart().getParentPath() ) == 'same';\n\t\tconst newRanges = range._getTransformedByInsertion( b.getMovedRangeStart(), b.howMany, shouldSpread );\n\n\t\tranges.push( ...newRanges );\n\t}\n\n\t// Then, we have to manage the \"common part\" of both move ranges.\n\tconst common = rangeA.getIntersection( rangeB );\n\n\tif ( common !== null && aIsStrong ) {\n\t\t// Calculate the new position of that part of original range.\n\t\tcommon.start = common.start._getCombined( b.sourcePosition, b.getMovedRangeStart() );\n\t\tcommon.end = common.end._getCombined( b.sourcePosition, b.getMovedRangeStart() );\n\n\t\t// Take care of proper range order.\n\t\t//\n\t\t// Put `common` at appropriate place. Keep in mind that we are interested in original order.\n\t\t// Basically there are only three cases: there is zero, one or two difference ranges.\n\t\t//\n\t\t// If there is zero difference ranges, just push `common` in the array.\n\t\tif ( ranges.length === 0 ) {\n\t\t\tranges.push( common );\n\t\t}\n\t\t// If there is one difference range, we need to check whether common part was before it or after it.\n\t\telse if ( ranges.length == 1 ) {\n\t\t\tif ( rangeB.start.isBefore( rangeA.start ) || rangeB.start.isEqual( rangeA.start ) ) {\n\t\t\t\tranges.unshift( common );\n\t\t\t} else {\n\t\t\t\tranges.push( common );\n\t\t\t}\n\t\t}\n\t\t// If there are more ranges (which means two), put common part between them. This is the only scenario\n\t\t// where there could be two difference ranges so we don't have to make any comparisons.\n\t\telse {\n\t\t\tranges.splice( 1, 0, common );\n\t\t}\n\t}\n\n\tif ( ranges.length === 0 ) {\n\t\t// If there are no \"source ranges\", nothing should be changed.\n\t\t// Note that this can happen only if `aIsStrong == false` and `rangeA.isEqual( rangeB )`.\n\t\treturn [ new NoOperation( a.baseVersion ) ];\n\t}\n\n\treturn _makeMoveOperationsFromRanges( ranges, newTargetPosition );\n} );\n\nsetTransformation( MoveOperation, SplitOperation, ( a, b, context ) => {\n\tlet newTargetPosition = a.targetPosition.clone();\n\n\t// Do not transform if target position is same as split insertion position and this split comes from undo.\n\t// This should be done on relations but it is too much work for now as it would require relations working in collaboration.\n\t// We need to make a decision how we will resolve such conflict and this is less harmful way.\n\tif ( !a.targetPosition.isEqual( b.insertionPosition ) || !b.graveyardPosition || context.abRelation == 'moveTargetAfter' ) {\n\t\tnewTargetPosition = a.targetPosition._getTransformedBySplitOperation( b );\n\t}\n\n\t// Case 1:\n\t//\n\t// Last element in the moved range got split.\n\t//\n\t// In this case the default range transformation will not work correctly as the element created by\n\t// split operation would be outside the range. The range to move needs to be fixed manually.\n\t//\n\tconst moveRange = Range._createFromPositionAndShift( a.sourcePosition, a.howMany );\n\n\tif ( moveRange.end.isEqual( b.insertionPosition ) ) {\n\t\t// Do it only if this is a \"natural\" split, not a one that comes from undo.\n\t\t// If this is undo split, only `targetPosition` needs to be changed (if the move is a remove).\n\t\tif ( !b.graveyardPosition ) {\n\t\t\ta.howMany++;\n\t\t}\n\n\t\ta.targetPosition = newTargetPosition;\n\n\t\treturn [ a ];\n\t}\n\n\t// Case 2:\n\t//\n\t// Split happened between the moved nodes. In this case two ranges to move need to be generated.\n\t//\n\t// Characters `ozba` are moved to the end of paragraph `Xyz` but split happened.\n\t// <p>F[oz|ba]r</p><p>Xyz</p>\n\t//\n\t// After split:\n\t// <p>F[oz</p><p>ba]r</p><p>Xyz</p>\n\t//\n\t// Correct ranges:\n\t// <p>F[oz]</p><p>[ba]r</p><p>Xyz</p>\n\t//\n\t// After move:\n\t// <p>F</p><p>r</p><p>Xyzozba</p>\n\t//\n\tif ( moveRange.start.hasSameParentAs( b.splitPosition ) && moveRange.containsPosition( b.splitPosition ) ) {\n\t\tlet rightRange = new Range( b.splitPosition, moveRange.end );\n\t\trightRange = rightRange._getTransformedBySplitOperation( b );\n\n\t\tconst ranges = [\n\t\t\tnew Range( moveRange.start, b.splitPosition ),\n\t\t\trightRange\n\t\t];\n\n\t\treturn _makeMoveOperationsFromRanges( ranges, newTargetPosition );\n\t}\n\n\t// Case 3:\n\t//\n\t// Move operation targets at the split position. We need to decide if the nodes should be inserted\n\t// at the end of the split element or at the beginning of the new element.\n\t//\n\tif ( a.targetPosition.isEqual( b.splitPosition ) && context.abRelation == 'insertAtSource' ) {\n\t\tnewTargetPosition = b.moveTargetPosition;\n\t}\n\n\t// Case 4:\n\t//\n\t// Move operation targets just after the split element. We need to decide if the nodes should be inserted\n\t// between two parts of split element, or after the new element.\n\t//\n\t// Split at `|`, while move operation moves `<p>Xyz</p>` and targets at `^`:\n\t// <p>Foo|bar</p>^<p>baz</p>\n\t// <p>Foo</p>^<p>bar</p><p>baz</p> or <p>Foo</p><p>bar</p>^<p>baz</p>?\n\t//\n\t// If there is no contextual information between operations (for example, they come from collaborative\n\t// editing), we don't want to put some unrelated content (move) between parts of related content (split parts).\n\t// However, if the split is from undo, in the past, the moved content might be targeting between the\n\t// split parts, meaning that was exactly user's intention:\n\t//\n\t// <p>Foo</p>^<p>bar</p>\t\t<--- original situation, in \"past\".\n\t// <p>Foobar</p>^\t\t\t\t<--- after merge target position is transformed.\n\t// <p>Foo|bar</p>^\t\t\t\t<--- then the merge is undone, and split happens, which leads us to current situation.\n\t//\n\t// In this case it is pretty clear that the intention was to put new paragraph between those nodes,\n\t// so we need to transform accordingly. We can detect this scenario thanks to relations.\n\t//\n\tif ( a.targetPosition.isEqual( b.insertionPosition ) && context.abRelation == 'insertBetween' ) {\n\t\tnewTargetPosition = a.targetPosition;\n\t}\n\n\t// The default case.\n\t//\n\tconst transformed = moveRange._getTransformedBySplitOperation( b );\n\tconst ranges = [ transformed ];\n\n\t// Case 5:\n\t//\n\t// Moved range contains graveyard element used by split operation. Add extra move operation to the result.\n\t//\n\tif ( b.graveyardPosition ) {\n\t\tconst movesGraveyardElement = moveRange.start.isEqual( b.graveyardPosition ) || moveRange.containsPosition( b.graveyardPosition );\n\n\t\tif ( a.howMany > 1 && movesGraveyardElement && !context.aWasUndone ) {\n\t\t\tranges.push( Range._createFromPositionAndShift( b.insertionPosition, 1 ) );\n\t\t}\n\t}\n\n\treturn _makeMoveOperationsFromRanges( ranges, newTargetPosition );\n} );\n\nsetTransformation( MoveOperation, MergeOperation, ( a, b, context ) => {\n\tconst movedRange = Range._createFromPositionAndShift( a.sourcePosition, a.howMany );\n\n\tif ( b.deletionPosition.hasSameParentAs( a.sourcePosition ) && movedRange.containsPosition( b.sourcePosition ) ) {\n\t\tif ( a.type == 'remove' && !context.forceWeakRemove ) {\n\t\t\t// Case 1:\n\t\t\t//\n\t\t\t// The element to remove got merged.\n\t\t\t//\n\t\t\t// Merge operation does support merging elements which are not siblings. So it would not be a problem\n\t\t\t// from technical point of view. However, if the element was removed, the intention of the user\n\t\t\t// deleting it was to have it all deleted. From user experience point of view, moving back the\n\t\t\t// removed nodes might be unexpected. This means that in this scenario we will reverse merging and remove the element.\n\t\t\t//\n\t\t\tif ( !context.aWasUndone ) {\n\t\t\t\tconst results = [];\n\n\t\t\t\tlet gyMoveSource = b.graveyardPosition.clone();\n\t\t\t\tlet splitNodesMoveSource = b.targetPosition._getTransformedByMergeOperation( b );\n\n\t\t\t\tif ( a.howMany > 1 ) {\n\t\t\t\t\tresults.push( new MoveOperation( a.sourcePosition, a.howMany - 1, a.targetPosition, 0 ) );\n\n\t\t\t\t\tgyMoveSource = gyMoveSource._getTransformedByMove( a.sourcePosition, a.targetPosition, a.howMany - 1 );\n\t\t\t\t\tsplitNodesMoveSource = splitNodesMoveSource._getTransformedByMove( a.sourcePosition, a.targetPosition, a.howMany - 1 );\n\t\t\t\t}\n\n\t\t\t\tconst gyMoveTarget = b.deletionPosition._getCombined( a.sourcePosition, a.targetPosition );\n\t\t\t\tconst gyMove = new MoveOperation( gyMoveSource, 1, gyMoveTarget, 0 );\n\n\t\t\t\tconst splitNodesMoveTargetPath = gyMove.getMovedRangeStart().path.slice();\n\t\t\t\tsplitNodesMoveTargetPath.push( 0 );\n\n\t\t\t\tconst splitNodesMoveTarget = new Position( gyMove.targetPosition.root, splitNodesMoveTargetPath );\n\t\t\t\tsplitNodesMoveSource = splitNodesMoveSource._getTransformedByMove( gyMoveSource, gyMoveTarget, 1 );\n\t\t\t\tconst splitNodesMove = new MoveOperation( splitNodesMoveSource, b.howMany, splitNodesMoveTarget, 0 );\n\n\t\t\t\tresults.push( gyMove );\n\t\t\t\tresults.push( splitNodesMove );\n\n\t\t\t\treturn results;\n\t\t\t}\n\t\t} else {\n\t\t\t// Case 2:\n\t\t\t//\n\t\t\t// The element to move got merged and it was the only element to move.\n\t\t\t// In this case just don't do anything, leave the node in the graveyard. Without special case\n\t\t\t// it would be a move operation that moves 0 nodes, so maybe it is better just to return no-op.\n\t\t\t//\n\t\t\tif ( a.howMany == 1 ) {\n\t\t\t\tif ( !context.bWasUndone ) {\n\t\t\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t\t\t} else {\n\t\t\t\t\ta.sourcePosition = b.graveyardPosition.clone();\n\t\t\t\t\ta.targetPosition = a.targetPosition._getTransformedByMergeOperation( b );\n\n\t\t\t\t\treturn [ a ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// The default case.\n\t//\n\tconst moveRange = Range._createFromPositionAndShift( a.sourcePosition, a.howMany );\n\tconst transformed = moveRange._getTransformedByMergeOperation( b );\n\n\ta.sourcePosition = transformed.start;\n\ta.howMany = transformed.end.offset - transformed.start.offset;\n\ta.targetPosition = a.targetPosition._getTransformedByMergeOperation( b );\n\n\treturn [ a ];\n} );\n\n// -----------------------\n\nsetTransformation( RenameOperation, InsertOperation, ( a, b ) => {\n\ta.position = a.position._getTransformedByInsertOperation( b );\n\n\treturn [ a ];\n} );\n\nsetTransformation( RenameOperation, MergeOperation, ( a, b ) => {\n\t// Case 1:\n\t//\n\t// Element to rename got merged, so it was moved to `b.graveyardPosition`.\n\t//\n\tif ( a.position.isEqual( b.deletionPosition ) ) {\n\t\ta.position = b.graveyardPosition.clone();\n\t\ta.position.stickiness = 'toNext';\n\n\t\treturn [ a ];\n\t}\n\n\ta.position = a.position._getTransformedByMergeOperation( b );\n\n\treturn [ a ];\n} );\n\nsetTransformation( RenameOperation, MoveOperation, ( a, b ) => {\n\ta.position = a.position._getTransformedByMoveOperation( b );\n\n\treturn [ a ];\n} );\n\nsetTransformation( RenameOperation, RenameOperation, ( a, b, context ) => {\n\tif ( a.position.isEqual( b.position ) ) {\n\t\tif ( context.aIsStrong ) {\n\t\t\ta.oldName = b.newName;\n\t\t} else {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t}\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( RenameOperation, SplitOperation, ( a, b ) => {\n\t// Case 1:\n\t//\n\t// The element to rename has been split. In this case, the new element should be also renamed.\n\t//\n\t// User decides to change the paragraph to a list item:\n\t// <paragraph>Foobar</paragraph>\n\t//\n\t// However, in meantime, split happens:\n\t// <paragraph>Foo</paragraph><paragraph>bar</paragraph>\n\t//\n\t// As a result, rename both elements:\n\t// <listItem>Foo</listItem><listItem>bar</listItem>\n\t//\n\tconst renamePath = a.position.path;\n\tconst splitPath = b.splitPosition.getParentPath();\n\n\tif ( compareArrays( renamePath, splitPath ) == 'same' && !b.graveyardPosition ) {\n\t\tconst extraRename = new RenameOperation( a.position.getShiftedBy( 1 ), a.oldName, a.newName, 0 );\n\n\t\treturn [ a, extraRename ];\n\t}\n\n\t// The default case.\n\t//\n\ta.position = a.position._getTransformedBySplitOperation( b );\n\n\treturn [ a ];\n} );\n\n// -----------------------\n\nsetTransformation( RootAttributeOperation, RootAttributeOperation, ( a, b, context ) => {\n\tif ( a.root === b.root && a.key === b.key ) {\n\t\tif ( !context.aIsStrong || a.newValue === b.newValue ) {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t} else {\n\t\t\ta.oldValue = b.newValue;\n\t\t}\n\t}\n\n\treturn [ a ];\n} );\n\n// -----------------------\n\nsetTransformation( SplitOperation, InsertOperation, ( a, b ) => {\n\t// The default case.\n\t//\n\tif ( a.splitPosition.hasSameParentAs( b.position ) && a.splitPosition.offset < b.position.offset ) {\n\t\ta.howMany += b.howMany;\n\t}\n\n\ta.splitPosition = a.splitPosition._getTransformedByInsertOperation( b );\n\ta.insertionPosition = SplitOperation.getInsertionPosition( a.splitPosition );\n\n\treturn [ a ];\n} );\n\nsetTransformation( SplitOperation, MergeOperation, ( a, b, context ) => {\n\t// Case 1:\n\t//\n\t// Split element got merged. If two different elements were merged, clients will have different content.\n\t//\n\t// Example. Merge at `{}`, split at `[]`:\n\t// <heading>Foo</heading>{}<paragraph>B[]ar</paragraph>\n\t//\n\t// On merge side it will look like this:\n\t// <heading>FooB[]ar</heading>\n\t// <heading>FooB</heading><heading>ar</heading>\n\t//\n\t// On split side it will look like this:\n\t// <heading>Foo</heading>{}<paragraph>B</paragraph><paragraph>ar</paragraph>\n\t// <heading>FooB</heading><paragraph>ar</paragraph>\n\t//\n\t// Clearly, the second element is different for both clients.\n\t//\n\t// We could use the removed merge element from graveyard as a split element but then clients would have a different\n\t// model state (in graveyard), because the split side client would still have an element in graveyard (removed by merge).\n\t//\n\t// To overcome this, in `SplitOperation` x `MergeOperation` transformation we will add additional `SplitOperation`\n\t// in the graveyard, which will actually clone the merged-and-deleted element. Then, that cloned element will be\n\t// used for splitting. Example below.\n\t//\n\t// Original state:\n\t// <heading>Foo</heading>{}<paragraph>B[]ar</paragraph>\n\t//\n\t// Merge side client:\n\t//\n\t// After merge:\n\t// <heading>FooB[]ar</heading>                                 graveyard: <paragraph></paragraph>\n\t//\n\t// Extra split:\n\t// <heading>FooB[]ar</heading>                                 graveyard: <paragraph></paragraph><paragraph></paragraph>\n\t//\n\t// Use the \"cloned\" element from graveyard:\n\t// <heading>FooB</heading><paragraph>ar</paragraph>            graveyard: <paragraph></paragraph>\n\t//\n\t// Split side client:\n\t//\n\t// After split:\n\t// <heading>Foo</heading>{}<paragraph>B</paragraph><paragraph>ar</paragraph>\n\t//\n\t// After merge:\n\t// <heading>FooB</heading><paragraph>ar</paragraph>            graveyard: <paragraph></paragraph>\n\t//\n\t// This special case scenario only applies if the original split operation clones the split element.\n\t// If the original split operation has `graveyardPosition` set, it all doesn't have sense because split operation\n\t// knows exactly which element it should use. So there would be no original problem with different contents.\n\t//\n\t// Additionally, the special case applies only if the merge wasn't already undone.\n\t//\n\tif ( !a.graveyardPosition && !context.bWasUndone && a.splitPosition.hasSameParentAs( b.sourcePosition ) ) {\n\t\tconst splitPath = b.graveyardPosition.path.slice();\n\t\tsplitPath.push( 0 );\n\n\t\tconst splitPosition = new Position( b.graveyardPosition.root, splitPath );\n\t\tconst insertionPosition = SplitOperation.getInsertionPosition( new Position( b.graveyardPosition.root, splitPath ) );\n\n\t\tconst additionalSplit = new SplitOperation( splitPosition, 0, null, 0 );\n\t\tadditionalSplit.insertionPosition = insertionPosition;\n\n\t\ta.splitPosition = a.splitPosition._getTransformedByMergeOperation( b );\n\t\ta.insertionPosition = SplitOperation.getInsertionPosition( a.splitPosition );\n\t\ta.graveyardPosition = additionalSplit.insertionPosition.clone();\n\t\ta.graveyardPosition.stickiness = 'toNext';\n\n\t\treturn [ additionalSplit, a ];\n\t}\n\n\t// The default case.\n\t//\n\tif ( a.splitPosition.hasSameParentAs( b.deletionPosition ) && !a.splitPosition.isAfter( b.deletionPosition ) ) {\n\t\ta.howMany--;\n\t}\n\n\tif ( a.splitPosition.hasSameParentAs( b.targetPosition ) ) {\n\t\ta.howMany += b.howMany;\n\t}\n\n\ta.splitPosition = a.splitPosition._getTransformedByMergeOperation( b );\n\ta.insertionPosition = SplitOperation.getInsertionPosition( a.splitPosition );\n\n\tif ( a.graveyardPosition ) {\n\t\ta.graveyardPosition = a.graveyardPosition._getTransformedByMergeOperation( b );\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( SplitOperation, MoveOperation, ( a, b, context ) => {\n\tconst rangeToMove = Range._createFromPositionAndShift( b.sourcePosition, b.howMany );\n\n\tif ( a.graveyardPosition ) {\n\t\t// Case 1:\n\t\t//\n\t\t// Split operation graveyard node was moved. In this case move operation is stronger. Since graveyard element\n\t\t// is already moved to the correct position, we need to only move the nodes after the split position.\n\t\t// This will be done by `MoveOperation` instead of `SplitOperation`.\n\t\t//\n\t\tconst gyElementMoved = rangeToMove.start.isEqual( a.graveyardPosition ) || rangeToMove.containsPosition( a.graveyardPosition );\n\n\t\tif ( !context.bWasUndone && gyElementMoved ) {\n\t\t\tconst sourcePosition = a.splitPosition._getTransformedByMoveOperation( b );\n\n\t\t\tconst newParentPosition = a.graveyardPosition._getTransformedByMoveOperation( b );\n\t\t\tconst newTargetPath = newParentPosition.path.slice();\n\t\t\tnewTargetPath.push( 0 );\n\n\t\t\tconst newTargetPosition = new Position( newParentPosition.root, newTargetPath );\n\t\t\tconst moveOp = new MoveOperation( sourcePosition, a.howMany, newTargetPosition, 0 );\n\n\t\t\treturn [ moveOp ];\n\t\t}\n\n\t\ta.graveyardPosition = a.graveyardPosition._getTransformedByMoveOperation( b );\n\t}\n\n\t// Case 2:\n\t//\n\t// If the split position is inside the moved range, we need to shift the split position to a proper place.\n\t// The position cannot be moved together with moved range because that would result in splitting of an incorrect element.\n\t//\n\t// Characters `bc` should be moved to the second paragraph while split position is between them:\n\t// <paragraph>A[b|c]d</paragraph><paragraph>Xyz</paragraph>\n\t//\n\t// After move, new split position is incorrect:\n\t// <paragraph>Ad</paragraph><paragraph>Xb|cyz</paragraph>\n\t//\n\t// Correct split position:\n\t// <paragraph>A|d</paragraph><paragraph>Xbcyz</paragraph>\n\t//\n\t// After split:\n\t// <paragraph>A</paragraph><paragraph>d</paragraph><paragraph>Xbcyz</paragraph>\n\t//\n\tif ( a.splitPosition.hasSameParentAs( b.sourcePosition ) && rangeToMove.containsPosition( a.splitPosition ) ) {\n\t\tconst howManyRemoved = b.howMany - ( a.splitPosition.offset - b.sourcePosition.offset );\n\t\ta.howMany -= howManyRemoved;\n\n\t\tif ( a.splitPosition.hasSameParentAs( b.targetPosition ) && a.splitPosition.offset < b.targetPosition.offset ) {\n\t\t\ta.howMany += b.howMany;\n\t\t}\n\n\t\ta.splitPosition = b.sourcePosition.clone();\n\t\ta.insertionPosition = SplitOperation.getInsertionPosition( a.splitPosition );\n\n\t\treturn [ a ];\n\t}\n\n\t// Case 3:\n\t//\n\t// Split is at a position where nodes were moved.\n\t//\n\t// This is a scenario described in `MoveOperation` x `SplitOperation` transformation but from the\n\t// \"split operation point of view\".\n\t//\n\tconst splitAtTarget = a.splitPosition.isEqual( b.targetPosition );\n\n\tif ( splitAtTarget && ( context.baRelation == 'insertAtSource' || context.abRelation == 'splitBefore' ) ) {\n\t\ta.howMany += b.howMany;\n\t\ta.splitPosition = a.splitPosition._getTransformedByDeletion( b.sourcePosition, b.howMany );\n\t\ta.insertionPosition = SplitOperation.getInsertionPosition( a.splitPosition );\n\n\t\treturn [ a ];\n\t}\n\n\t// The default case.\n\t// Don't change `howMany` if move operation does not really move anything.\n\t//\n\tif ( !b.sourcePosition.isEqual( b.targetPosition ) ) {\n\t\tif ( a.splitPosition.hasSameParentAs( b.sourcePosition ) && a.splitPosition.offset <= b.sourcePosition.offset ) {\n\t\t\ta.howMany -= b.howMany;\n\t\t}\n\n\t\tif ( a.splitPosition.hasSameParentAs( b.targetPosition ) && a.splitPosition.offset < b.targetPosition.offset ) {\n\t\t\ta.howMany += b.howMany;\n\t\t}\n\t}\n\n\t// Change position stickiness to force a correct transformation.\n\ta.splitPosition.stickiness = 'toNone';\n\ta.splitPosition = a.splitPosition._getTransformedByMoveOperation( b );\n\ta.splitPosition.stickiness = 'toNext';\n\n\tif ( a.graveyardPosition ) {\n\t\ta.insertionPosition = a.insertionPosition._getTransformedByMoveOperation( b );\n\t} else {\n\t\ta.insertionPosition = SplitOperation.getInsertionPosition( a.splitPosition );\n\t}\n\n\treturn [ a ];\n} );\n\nsetTransformation( SplitOperation, SplitOperation, ( a, b, context ) => {\n\t// Case 1:\n\t//\n\t// Split at the same position.\n\t//\n\t// If there already was a split at the same position as in `a` operation, it means that the intention\n\t// conveyed by `a` operation has already been fulfilled and `a` should not do anything (to avoid double split).\n\t//\n\t// However, there is a difference if these are new splits or splits created by undo. These have different\n\t// intentions. Also splits moving back different elements from graveyard have different intentions. They\n\t// are just different operations.\n\t//\n\t// So we cancel split operation only if it was really identical.\n\t//\n\t// Also, there is additional case, where split operations aren't identical and should not be cancelled, however the\n\t// default transformation is incorrect too.\n\t//\n\tif ( a.splitPosition.isEqual( b.splitPosition ) ) {\n\t\tif ( !a.graveyardPosition && !b.graveyardPosition ) {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t}\n\n\t\tif ( a.graveyardPosition && b.graveyardPosition && a.graveyardPosition.isEqual( b.graveyardPosition ) ) {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t}\n\n\t\t// Use context to know that the `a.splitPosition` should stay where it is.\n\t\t// This happens during undo when first a merge operation moved nodes to `a.splitPosition` and now `b` operation undoes that merge.\n\t\tif ( context.abRelation == 'splitBefore' ) {\n\t\t\t// Since split is at the same position, there are no nodes left to split.\n\t\t\ta.howMany = 0;\n\n\t\t\t// Note: there was `if ( a.graveyardPosition )` here but it was uncovered in tests and I couldn't find any scenarios for now.\n\t\t\t// That would have to be a `SplitOperation` that didn't come from undo but is transformed by operations that were undone.\n\t\t\t// It could happen if `context` is enabled in collaboration.\n\t\t\ta.graveyardPosition = a.graveyardPosition._getTransformedBySplitOperation( b );\n\n\t\t\treturn [ a ];\n\t\t}\n\t}\n\n\t// Case 2:\n\t//\n\t// Same node is using to split different elements. This happens in undo when previously same element was merged to\n\t// two different elements. This is described in `MergeOperation` x `MergeOperation` transformation.\n\t//\n\t// In this case we will follow the same logic. We will assume that `insertionPosition` is same for both\n\t// split operations. This might not always be true but in the real cases that were experienced it was. After all,\n\t// if these splits are reverses of merge operations that were merging the same element, then the `insertionPosition`\n\t// should be same for both of those splits.\n\t//\n\t// Again, we will decide which operation is stronger by checking if split happens in graveyard or in non-graveyard root.\n\t//\n\tif ( a.graveyardPosition && b.graveyardPosition && a.graveyardPosition.isEqual( b.graveyardPosition ) ) {\n\t\tconst aInGraveyard = a.splitPosition.root.rootName == '$graveyard';\n\t\tconst bInGraveyard = b.splitPosition.root.rootName == '$graveyard';\n\n\t\t// If `aIsWeak` it means that `a` points to graveyard while `b` doesn't. Don't move nodes then.\n\t\tconst aIsWeak = aInGraveyard && !bInGraveyard;\n\n\t\t// If `bIsWeak` it means that `b` points to graveyard while `a` doesn't. Force moving nodes then.\n\t\tconst bIsWeak = bInGraveyard && !aInGraveyard;\n\n\t\t// Force move if `b` is weak or neither operation is weak but `a` is stronger through `context.aIsStrong`.\n\t\tconst forceMove = bIsWeak || ( !aIsWeak && context.aIsStrong );\n\n\t\tif ( forceMove ) {\n\t\t\tconst result = [];\n\n\t\t\t// First we need to move any nodes split by `b` back to where they were.\n\t\t\t// Do it only if `b` actually moved something.\n\t\t\tif ( b.howMany ) {\n\t\t\t\tresult.push( new MoveOperation( b.moveTargetPosition, b.howMany, b.splitPosition, 0 ) );\n\t\t\t}\n\n\t\t\t// Then we need to move nodes from `a` split position to their new element.\n\t\t\t// Do it only if `a` actually should move something.\n\t\t\tif ( a.howMany ) {\n\t\t\t\tresult.push( new MoveOperation( a.splitPosition, a.howMany, a.moveTargetPosition, 0 ) );\n\t\t\t}\n\n\t\t\treturn result;\n\t\t} else {\n\t\t\treturn [ new NoOperation( 0 ) ];\n\t\t}\n\t}\n\n\tif ( a.graveyardPosition ) {\n\t\ta.graveyardPosition = a.graveyardPosition._getTransformedBySplitOperation( b );\n\t}\n\n\t// Case 3:\n\t//\n\t// Position where operation `b` inserted a new node after split is the same as the operation `a` split position.\n\t// As in similar cases, there is ambiguity if the split should be before the new node (created by `b`) or after.\n\t//\n\tif ( a.splitPosition.isEqual( b.insertionPosition ) && context.abRelation == 'splitBefore' ) {\n\t\ta.howMany++;\n\n\t\treturn [ a ];\n\t}\n\n\t// Case 4:\n\t//\n\t// This is a mirror to the case 2. above.\n\t//\n\tif ( b.splitPosition.isEqual( a.insertionPosition ) && context.baRelation == 'splitBefore' ) {\n\t\tconst newPositionPath = b.insertionPosition.path.slice();\n\t\tnewPositionPath.push( 0 );\n\n\t\tconst newPosition = new Position( b.insertionPosition.root, newPositionPath );\n\t\tconst moveOp = new MoveOperation( a.insertionPosition, 1, newPosition, 0 );\n\n\t\treturn [ a, moveOp ];\n\t}\n\n\t// The default case.\n\t//\n\tif ( a.splitPosition.hasSameParentAs( b.splitPosition ) && a.splitPosition.offset < b.splitPosition.offset ) {\n\t\ta.howMany -= b.howMany;\n\t}\n\n\ta.splitPosition = a.splitPosition._getTransformedBySplitOperation( b );\n\ta.insertionPosition = SplitOperation.getInsertionPosition( a.splitPosition );\n\n\treturn [ a ];\n} );\n\n// Checks whether `MoveOperation` `targetPosition` is inside a node from the moved range of the other `MoveOperation`.\n//\n// @private\n// @param {module:engine/model/operation/moveoperation~MoveOperation} a\n// @param {module:engine/model/operation/moveoperation~MoveOperation} b\n// @returns {Boolean}\nfunction _moveTargetIntoMovedRange( a, b ) {\n\treturn a.targetPosition._getTransformedByDeletion( b.sourcePosition, b.howMany ) === null;\n}\n\n// Helper function for `MoveOperation` x `MoveOperation` transformation. Converts given ranges and target position to\n// move operations and returns them.\n//\n// Ranges and target position will be transformed on-the-fly when generating operations.\n//\n// Given `ranges` should be in the order of how they were in the original transformed operation.\n//\n// Given `targetPosition` is the target position of the first range from `ranges`.\n//\n// @private\n// @param {Array.<module:engine/model/range~Range>} ranges\n// @param {module:engine/model/position~Position} targetPosition\n// @returns {Array.<module:engine/model/operation/moveoperation~MoveOperation>}\nfunction _makeMoveOperationsFromRanges( ranges, targetPosition ) {\n\t// At this moment we have some ranges and a target position, to which those ranges should be moved.\n\t// Order in `ranges` array is the go-to order of after transformation.\n\t//\n\t// We are almost done. We have `ranges` and `targetPosition` to make operations from.\n\t// Unfortunately, those operations may affect each other. Precisely, first operation after move\n\t// may affect source range and target position of second and third operation. Same with second\n\t// operation affecting third.\n\t//\n\t// We need to fix those source ranges and target positions once again, before converting `ranges` to operations.\n\tconst operations = [];\n\n\t// Keep in mind that nothing will be transformed if there is just one range in `ranges`.\n\tfor ( let i = 0; i < ranges.length; i++ ) {\n\t\t// Create new operation out of a range and target position.\n\t\tconst range = ranges[ i ];\n\t\tconst op = new MoveOperation(\n\t\t\trange.start,\n\t\t\trange.end.offset - range.start.offset,\n\t\t\ttargetPosition,\n\t\t\t0\n\t\t);\n\n\t\toperations.push( op );\n\n\t\t// Transform other ranges by the generated operation.\n\t\tfor ( let j = i + 1; j < ranges.length; j++ ) {\n\t\t\t// All ranges in `ranges` array should be:\n\t\t\t//\n\t\t\t// * non-intersecting (these are part of original operation source range), and\n\t\t\t// * `targetPosition` does not target into them (opposite would mean that transformed operation targets \"inside itself\").\n\t\t\t//\n\t\t\t// This means that the transformation will be \"clean\" and always return one result.\n\t\t\tranges[ j ] = ranges[ j ]._getTransformedByMove( op.sourcePosition, op.targetPosition, op.howMany )[ 0 ];\n\t\t}\n\n\t\ttargetPosition = targetPosition._getTransformedByMove( op.sourcePosition, op.targetPosition, op.howMany );\n\t}\n\n\treturn operations;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module undo/basecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { transformSets } from '@ckeditor/ckeditor5-engine/src/model/operation/transform';\n\n/**\n * Base class for undo feature commands: {@link module:undo/undocommand~UndoCommand} and {@link module:undo/redocommand~RedoCommand}.\n *\n * @protected\n * @extends module:core/command~Command\n */\nexport default class BaseCommand extends Command {\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * Stack of items stored by the command. These are pairs of:\n\t\t *\n\t\t * * {@link module:engine/model/batch~Batch batch} saved by the command,\n\t\t * * {@link module:engine/model/selection~Selection selection} state at the moment of saving the batch.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array} #_stack\n\t\t */\n\t\tthis._stack = [];\n\n\t\t/**\n\t\t * Stores all batches that were created by this command.\n\t\t *\n\t\t * @protected\n\t\t * @member {WeakSet.<module:engine/model/batch~Batch>} #_createdBatches\n\t\t */\n\t\tthis._createdBatches = new WeakSet();\n\n\t\t// Refresh state, so the command is inactive right after initialization.\n\t\tthis.refresh();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tthis.isEnabled = this._stack.length > 0;\n\t}\n\n\t/**\n\t * Stores a batch in the command, together with the selection state of the {@link module:engine/model/document~Document document}\n\t * created by the editor which this command is registered to.\n\t *\n\t * @param {module:engine/model/batch~Batch} batch The batch to add.\n\t */\n\taddBatch( batch ) {\n\t\tconst docSelection = this.editor.model.document.selection;\n\n\t\tconst selection = {\n\t\t\tranges: docSelection.hasOwnRange ? Array.from( docSelection.getRanges() ) : [],\n\t\t\tisBackward: docSelection.isBackward\n\t\t};\n\n\t\tthis._stack.push( { batch, selection } );\n\t\tthis.refresh();\n\t}\n\n\t/**\n\t * Removes all items from the stack.\n\t */\n\tclearStack() {\n\t\tthis._stack = [];\n\t\tthis.refresh();\n\t}\n\n\t/**\n\t * Restores the {@link module:engine/model/document~Document#selection document selection} state after a batch was undone.\n\t *\n\t * @protected\n\t * @param {Array.<module:engine/model/range~Range>} ranges Ranges to be restored.\n\t * @param {Boolean} isBackward A flag describing whether the restored range was selected forward or backward.\n\t * @param {Array.<module:engine/model/operation/operation~Operation>} operations Operations which has been applied\n\t * since selection has been stored.\n\t */\n\t_restoreSelection( ranges, isBackward, operations ) {\n\t\tconst model = this.editor.model;\n\t\tconst document = model.document;\n\n\t\t// This will keep the transformed selection ranges.\n\t\tconst selectionRanges = [];\n\n\t\t// Transform all ranges from the restored selection.\n\t\tfor ( const range of ranges ) {\n\t\t\tconst transformed = transformSelectionRange( range, operations );\n\n\t\t\t// For each `range` from `ranges`, we take only one transformed range.\n\t\t\t// This is because we want to prevent situation where single-range selection\n\t\t\t// got transformed to multi-range selection. We will take the first range that\n\t\t\t// is not in the graveyard.\n\t\t\tconst newRange = transformed.find(\n\t\t\t\trange => range.start.root != document.graveyard\n\t\t\t);\n\n\t\t\t// `transformedRange` might be `undefined` if transformed range ended up in graveyard.\n\t\t\tif ( newRange ) {\n\t\t\t\tselectionRanges.push( newRange );\n\t\t\t}\n\t\t}\n\n\t\t// `selectionRanges` may be empty if all ranges ended up in graveyard. If that is the case, do not restore selection.\n\t\tif ( selectionRanges.length ) {\n\t\t\tmodel.change( writer => {\n\t\t\t\twriter.setSelection( selectionRanges, { backward: isBackward } );\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Undoes a batch by reversing that batch, transforming reversed batch and finally applying it.\n\t * This is a helper method for {@link #execute}.\n\t *\n\t * @protected\n\t * @param {module:engine/model/batch~Batch} batchToUndo The batch to be undone.\n\t * @param {module:engine/model/batch~Batch} undoingBatch The batch that will contain undoing changes.\n\t */\n\t_undo( batchToUndo, undoingBatch ) {\n\t\tconst model = this.editor.model;\n\t\tconst document = model.document;\n\n\t\t// All changes done by the command execution will be saved as one batch.\n\t\tthis._createdBatches.add( undoingBatch );\n\n\t\tconst operationsToUndo = batchToUndo.operations.slice().filter( operation => operation.isDocumentOperation );\n\t\toperationsToUndo.reverse();\n\n\t\t// We will process each operation from `batchToUndo`, in reverse order. If there were operations A, B and C in undone batch,\n\t\t// we need to revert them in reverse order, so first C' (reversed C), then B', then A'.\n\t\tfor ( const operationToUndo of operationsToUndo ) {\n\t\t\tconst nextBaseVersion = operationToUndo.baseVersion + 1;\n\t\t\tconst historyOperations = Array.from( document.history.getOperations( nextBaseVersion ) );\n\n\t\t\tconst transformedSets = transformSets(\n\t\t\t\t[ operationToUndo.getReversed() ],\n\t\t\t\thistoryOperations,\n\t\t\t\t{\n\t\t\t\t\tuseRelations: true,\n\t\t\t\t\tdocument: this.editor.model.document,\n\t\t\t\t\tpadWithNoOps: false,\n\t\t\t\t\tforceWeakRemove: true\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst reversedOperations = transformedSets.operationsA;\n\n\t\t\t// After reversed operation has been transformed by all history operations, apply it.\n\t\t\tfor ( const operation of reversedOperations ) {\n\t\t\t\t// Before applying, add the operation to the `undoingBatch`.\n\t\t\t\tundoingBatch.addOperation( operation );\n\t\t\t\tmodel.applyOperation( operation );\n\n\t\t\t\tdocument.history.setOperationAsUndone( operationToUndo, operation );\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Transforms given range `range` by given `operations`.\n// Returns an array containing one or more ranges, which are result of the transformation.\nfunction transformSelectionRange( range, operations ) {\n\tconst transformed = range.getTransformedByOperations( operations );\n\n\t// After `range` got transformed, we have an array of ranges. Some of those\n\t// ranges may be \"touching\" -- they can be next to each other and could be merged.\n\t// First, we have to sort those ranges to assure that they are in order.\n\ttransformed.sort( ( a, b ) => a.start.isBefore( b.start ) ? -1 : 1 );\n\n\t// Then, we check if two consecutive ranges are touching.\n\tfor ( let i = 1; i < transformed.length; i++ ) {\n\t\tconst a = transformed[ i - 1 ];\n\t\tconst b = transformed[ i ];\n\n\t\tif ( a.end.isTouching( b.start ) ) {\n\t\t\t// And join them together if they are.\n\t\t\ta.end = b.end;\n\t\t\ttransformed.splice( i, 1 );\n\t\t\ti--;\n\t\t}\n\t}\n\n\treturn transformed;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module undo/undocommand\n */\n\nimport BaseCommand from './basecommand';\n\n/**\n * The undo command stores {@link module:engine/model/batch~Batch batches} applied to the\n * {@link module:engine/model/document~Document document} and is able to undo a batch by reversing it and transforming by\n * batches from {@link module:engine/model/document~Document#history history} that happened after the reversed batch.\n *\n * The undo command also takes care of restoring the {@link module:engine/model/document~Document#selection document selection}.\n *\n * @extends module:undo/basecommand~BaseCommand\n */\nexport default class UndoCommand extends BaseCommand {\n\t/**\n\t * Executes the command. This method reverts a {@link module:engine/model/batch~Batch batch} added to the command's stack, transforms\n\t * and applies the reverted version on the {@link module:engine/model/document~Document document} and removes the batch from the stack.\n\t * Then, it restores the {@link module:engine/model/document~Document#selection document selection}.\n\t *\n\t * @fires execute\n\t * @fires revert\n\t * @param {module:engine/model/batch~Batch} [batch] A batch that should be undone. If not set, the last added batch will be undone.\n\t */\n\texecute( batch = null ) {\n\t\t// If batch is not given, set `batchIndex` to the last index in command stack.\n\t\tconst batchIndex = batch ? this._stack.findIndex( a => a.batch == batch ) : this._stack.length - 1;\n\n\t\tconst item = this._stack.splice( batchIndex, 1 )[ 0 ];\n\t\tconst undoingBatch = this.editor.model.createBatch( 'transparent' );\n\n\t\t// All changes has to be done in one `enqueueChange` callback so other listeners will not\n\t\t// step between consecutive operations, or won't do changes to the document before selection is properly restored.\n\t\tthis.editor.model.enqueueChange( undoingBatch, () => {\n\t\t\tthis._undo( item.batch, undoingBatch );\n\n\t\t\tconst operations = this.editor.model.document.history.getOperations( item.batch.baseVersion );\n\t\t\tthis._restoreSelection( item.selection.ranges, item.selection.isBackward, operations );\n\n\t\t\tthis.fire( 'revert', item.batch, undoingBatch );\n\t\t} );\n\n\t\tthis.refresh();\n\t}\n}\n\n/**\n * Fired when execution of the command reverts some batch.\n *\n * @event revert\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module undo/redocommand\n */\n\nimport BaseCommand from './basecommand';\n\n/**\n * The redo command stores {@link module:engine/model/batch~Batch batches} that were used to undo a batch by\n * {@link module:undo/undocommand~UndoCommand}. It is able to redo a previously undone batch by reversing the undoing\n * batches created by `UndoCommand`. The reversed batch is transformed by all the batches from\n * {@link module:engine/model/document~Document#history history} that happened after the reversed undo batch.\n *\n * The redo command also takes care of restoring the {@link module:engine/model/document~Document#selection document selection}.\n *\n * @extends module:undo/basecommand~BaseCommand\n */\nexport default class RedoCommand extends BaseCommand {\n\t/**\n\t * Executes the command. This method reverts the last {@link module:engine/model/batch~Batch batch} added to\n\t * the command's stack, applies the reverted and transformed version on the\n\t * {@link module:engine/model/document~Document document} and removes the batch from the stack.\n\t * Then, it restores the {@link module:engine/model/document~Document#selection document selection}.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst item = this._stack.pop();\n\t\tconst redoingBatch = this.editor.model.createBatch( 'transparent' );\n\n\t\t// All changes have to be done in one `enqueueChange` callback so other listeners will not step between consecutive\n\t\t// operations, or won't do changes to the document before selection is properly restored.\n\t\tthis.editor.model.enqueueChange( redoingBatch, () => {\n\t\t\tconst lastOperation = item.batch.operations[ item.batch.operations.length - 1 ];\n\t\t\tconst nextBaseVersion = lastOperation.baseVersion + 1;\n\t\t\tconst operations = this.editor.model.document.history.getOperations( nextBaseVersion );\n\n\t\t\tthis._restoreSelection( item.selection.ranges, item.selection.isBackward, operations );\n\t\t\tthis._undo( item.batch, redoingBatch );\n\t\t} );\n\n\t\tthis.refresh();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module undo/undoediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport UndoCommand from './undocommand';\nimport RedoCommand from './redocommand';\n\n/**\n * The undo engine feature.\n *\n * It introduces the `'undo'` and `'redo'` commands to the editor.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class UndoEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The command that manages undo {@link module:engine/model/batch~Batch batches} stack (history).\n\t\t * Created and registered during the {@link #init feature initialization}.\n\t\t *\n\t\t * @private\n\t\t * @member {module:undo/undocommand~UndoCommand} #_undoCommand\n\t\t */\n\n\t\t/**\n\t\t * The command that manages redo {@link module:engine/model/batch~Batch batches} stack (history).\n\t\t * Created and registered during the {@link #init feature initialization}.\n\t\t *\n\t\t * @private\n\t\t * @member {module:undo/undocommand~UndoCommand} #_redoCommand\n\t\t */\n\n\t\t/**\n\t\t * Keeps track of which batches were registered in undo.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakSet.<module:engine/model/batch~Batch>}\n\t\t */\n\t\tthis._batchRegistry = new WeakSet();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\t// Create commands.\n\t\tthis._undoCommand = new UndoCommand( editor );\n\t\tthis._redoCommand = new RedoCommand( editor );\n\n\t\t// Register command to the editor.\n\t\teditor.commands.add( 'undo', this._undoCommand );\n\t\teditor.commands.add( 'redo', this._redoCommand );\n\n\t\tthis.listenTo( editor.model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\t// Do not register batch if the operation is not a document operation.\n\t\t\t// This prevents from creating empty undo steps, where all operations where non-document operations.\n\t\t\t// Non-document operations creates and alters content in detached tree fragments (for example, document fragments).\n\t\t\t// Most of time this is preparing data before it is inserted into actual tree (for example during copy & paste).\n\t\t\t// Such operations should not be reversed.\n\t\t\tif ( !operation.isDocumentOperation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst batch = operation.batch;\n\n\t\t\tconst isRedoBatch = this._redoCommand._createdBatches.has( batch );\n\t\t\tconst isUndoBatch = this._undoCommand._createdBatches.has( batch );\n\t\t\tconst isRegisteredBatch = this._batchRegistry.has( batch );\n\n\t\t\t// If changes are not a part of a batch or this is not a new batch, omit those changes.\n\t\t\tif ( isRegisteredBatch || ( batch.type == 'transparent' && !isRedoBatch && !isUndoBatch ) ) {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif ( isRedoBatch ) {\n\t\t\t\t\t// If this batch comes from `redoCommand`, add it to `undoCommand` stack.\n\t\t\t\t\tthis._undoCommand.addBatch( batch );\n\t\t\t\t} else if ( !isUndoBatch ) {\n\t\t\t\t\t// A default batch - these are new changes in the document, not introduced by undo feature.\n\t\t\t\t\t// Add them to `undoCommand` stack and clear `redoCommand` stack.\n\t\t\t\t\tthis._undoCommand.addBatch( batch );\n\t\t\t\t\tthis._redoCommand.clearStack();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add the batch to the registry so it will not be processed again.\n\t\t\tthis._batchRegistry.add( batch );\n\t\t}, { priority: 'highest' } );\n\n\t\tthis.listenTo( this._undoCommand, 'revert', ( evt, undoneBatch, undoingBatch ) => {\n\t\t\tthis._redoCommand.addBatch( undoingBatch );\n\t\t} );\n\n\t\teditor.keystrokes.set( 'CTRL+Z', 'undo' );\n\t\teditor.keystrokes.set( 'CTRL+Y', 'redo' );\n\t\teditor.keystrokes.set( 'CTRL+SHIFT+Z', 'redo' );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module enter/entercommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\n/**\n * Enter command. It is used by the {@link module:enter/enter~Enter Enter feature} to handle the <kbd>Enter</kbd> key.\n *\n * @extends module:core/command~Command\n */\nexport default class EnterCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tmodel.change( writer => {\n\t\t\tenterBlock( this.editor.model, writer, doc.selection, model.schema );\n\t\t\tthis.fire( 'afterExecute', { writer } );\n\t\t} );\n\t}\n}\n\n// Creates a new block in the way that the <kbd>Enter</kbd> key is expected to work.\n//\n// @param {module:engine/model~Model} model\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n// Selection on which the action should be performed.\n// @param {module:engine/model/schema~Schema} schema\nfunction enterBlock( model, writer, selection, schema ) {\n\tconst isSelectionEmpty = selection.isCollapsed;\n\tconst range = selection.getFirstRange();\n\tconst startElement = range.start.parent;\n\tconst endElement = range.end.parent;\n\n\t// Don't touch the roots and other limit elements.\n\tif ( schema.isLimit( startElement ) || schema.isLimit( endElement ) ) {\n\t\t// Delete the selected content but only if inside a single limit element.\n\t\t// Abort, when crossing limit elements boundary (e.g. <limit1>x[x</limit1>donttouchme<limit2>y]y</limit2>).\n\t\t// This is an edge case and it's hard to tell what should actually happen because such a selection\n\t\t// is not entirely valid.\n\t\tif ( !isSelectionEmpty && startElement == endElement ) {\n\t\t\tmodel.deleteContent( selection );\n\t\t}\n\n\t\treturn;\n\t}\n\n\tif ( isSelectionEmpty ) {\n\t\tsplitBlock( writer, range.start );\n\t} else {\n\t\tconst leaveUnmerged = !( range.start.isAtStart && range.end.isAtEnd );\n\t\tconst isContainedWithinOneElement = ( startElement == endElement );\n\n\t\tmodel.deleteContent( selection, { leaveUnmerged } );\n\n\t\tif ( leaveUnmerged ) {\n\t\t\t// Partially selected elements.\n\t\t\t//\n\t\t\t// <h>x[xx]x</h>\t\t-> <h>x^x</h>\t\t\t-> <h>x</h><h>^x</h>\n\t\t\tif ( isContainedWithinOneElement ) {\n\t\t\t\tsplitBlock( writer, selection.focus );\n\t\t\t}\n\t\t\t// Selection over multiple elements.\n\t\t\t//\n\t\t\t// <h>x[x</h><p>y]y<p>\t-> <h>x^</h><p>y</p>\t-> <h>x</h><p>^y</p>\n\t\t\telse {\n\t\t\t\twriter.setSelection( endElement, 0 );\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction splitBlock( writer, splitPos ) {\n\twriter.split( splitPos );\n\twriter.setSelection( splitPos.parent.nextSibling, 0 );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module enter/enter\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport EnterCommand from './entercommand';\nimport EnterObserver from './enterobserver';\n\n/**\n * This plugin handles the <kbd>Enter</kbd> key (hard line break) in the editor.\n *\n * See also the {@link module:enter/shiftenter~ShiftEnter} plugin.\n *\n * For more information about this feature see the {@glink api/enter package page}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Enter extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Enter';\n\t}\n\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst view = editor.editing.view;\n\t\tconst viewDocument = view.document;\n\n\t\tview.addObserver( EnterObserver );\n\n\t\teditor.commands.add( 'enter', new EnterCommand( editor ) );\n\n\t\tthis.listenTo( viewDocument, 'enter', ( evt, data ) => {\n\t\t\tdata.preventDefault();\n\n\t\t\t// The soft enter key is handled by the ShiftEnter plugin.\n\t\t\tif ( data.isSoft ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\teditor.execute( 'enter' );\n\t\t\tview.scrollToTheSelection();\n\t\t}, { priority: 'low' } );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/editableui/editableuiview\n */\n\nimport View from '../view';\n\n/**\n * The editable UI view class.\n *\n * @extends module:ui/view~View\n */\nexport default class EditableUIView extends View {\n\t/**\n\t * Creates an instance of EditableUIView class.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The locale instance.\n\t * @param {module:engine/view/view~View} editingView The editing view instance the editable is related to.\n\t * @param {HTMLElement} [editableElement] The editable element. If not specified, this view\n\t * should create it. Otherwise, the existing element should be used.\n\t */\n\tconstructor( locale, editingView, editableElement ) {\n\t\tsuper( locale );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-content',\n\t\t\t\t\t'ck-editor__editable',\n\t\t\t\t\t'ck-rounded-corners'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * The name of the editable UI view.\n\t\t *\n\t\t * @member {String} #name\n\t\t */\n\t\tthis.name = null;\n\n\t\t/**\n\t\t * Controls whether the editable is focused, i.e. the user is typing in it.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\t/**\n\t\t * The element which is the main editable element (usually the one with `contentEditable=\"true\"`).\n\t\t *\n\t\t * @private\n\t\t * @member {HTMLElement} #_editableElement\n\t\t */\n\t\tthis._editableElement = editableElement;\n\n\t\t/**\n\t\t * Whether an external {@link #_editableElement} was passed into the constructor, which also means\n\t\t * the view will not render its {@link #template}.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean} #_hasExternalElement\n\t\t */\n\t\tthis._hasExternalElement = !!this._editableElement;\n\n\t\t/**\n\t\t * The editing view instance the editable is related to. Editable uses the editing\n\t\t * view to dynamically modify its certain DOM attributes after {@link #render rendering}.\n\t\t *\n\t\t * **Note**: The DOM attributes are performed by the editing view and not UI\n\t\t * {@link module:ui/view~View#bindTemplate template bindings} because once rendered,\n\t\t * the editable DOM element must remain under the full control of the engine to work properly.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:engine/view/view~View} #isFocused\n\t\t */\n\t\tthis._editingView = editingView;\n\t}\n\n\t/**\n\t * Renders the view by either applying the {@link #template} to the existing\n\t * {@link #_editableElement} or assigning {@link #element} as {@link #_editableElement}.\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\tif ( this._hasExternalElement ) {\n\t\t\tthis.template.apply( this.element = this._editableElement );\n\t\t} else {\n\t\t\tthis._editableElement = this.element;\n\t\t}\n\n\t\tthis.on( 'change:isFocused', () => this._updateIsFocusedClasses() );\n\t\tthis._updateIsFocusedClasses();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tif ( this._hasExternalElement ) {\n\t\t\tthis.template.revert( this._editableElement );\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Updates the `ck-focused` and `ck-blurred` CSS classes on the {@link #element} according to\n\t * the {@link #isFocused} property value using the {@link #_editingView editing view} API.\n\t *\n\t * @private\n\t */\n\t_updateIsFocusedClasses() {\n\t\tconst editingView = this._editingView;\n\n\t\tif ( editingView.isRenderingInProgress ) {\n\t\t\tupdateAfterRender( this );\n\t\t} else {\n\t\t\tupdate( this );\n\t\t}\n\n\t\tfunction update( view ) {\n\t\t\teditingView.change( writer => {\n\t\t\t\tconst viewRoot = editingView.document.getRoot( view.name );\n\n\t\t\t\twriter.addClass( view.isFocused ? 'ck-focused' : 'ck-blurred', viewRoot );\n\t\t\t\twriter.removeClass( view.isFocused ? 'ck-blurred' : 'ck-focused', viewRoot );\n\t\t\t} );\n\t\t}\n\n\t\t// In a case of a multi-root editor, a callback will be attached more than once (one callback for each root).\n\t\t// While executing one callback the `isRenderingInProgress` observable is changing what causes executing another\n\t\t// callback and render is called inside the already pending render.\n\t\t// We need to be sure that callback is executed only when the value has changed from `true` to `false`.\n\t\t// See https://github.com/ckeditor/ckeditor5/issues/1676.\n\t\tfunction updateAfterRender( view ) {\n\t\t\teditingView.once( 'change:isRenderingInProgress', ( evt, name, value ) => {\n\t\t\t\tif ( !value ) {\n\t\t\t\t\tupdate( view );\n\t\t\t\t} else {\n\t\t\t\t\tupdateAfterRender( view );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module ui/editableui/inline/inlineeditableuiview\n */\nimport EditableUIView from '../../editableui/editableuiview';\n/**\n * The inline editable UI class implementing an inline {@link module:ui/editableui/editableuiview~EditableUIView}.\n *\n * @extends module:ui/editableui/editableuiview~EditableUIView\n */\nexport default class InlineEditableUIView extends EditableUIView {\n    /**\n\t * Creates an instance of the InlineEditableUIView class.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The locale instance.\n\t * @param {module:engine/view/view~View} editingView The editing view instance the editable is related to.\n\t * @param {HTMLElement} [editableElement] The editable element. If not specified, the\n\t * {@link module:ui/editableui/editableuiview~EditableUIView}\n\t * will create it. Otherwise, the existing element will be used.\n\t */\n    constructor(locale, editingView, editableElement) {\n        super(locale, editingView, editableElement);\n        this.extendTemplate({\n            attributes: {\n                role: 'textbox',\n                class: 'ck-editor__editable_inline'\n            }\n        });\n    }\n    /**\n\t * @inheritDoc\n\t */\n    render() {\n        super.render();\n        const editingView = this._editingView;\n        const t = this.t;\n        editingView.change(writer => {\n            const viewRoot = editingView.document.getRoot(this.name);\n            writer.setAttribute('aria-label', t('Rich Text Editor, %0', [this.name]), viewRoot);\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/componentfactory\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * A helper class implementing the UI component ({@link module:ui/view~View view}) factory.\n *\n * It allows functions producing specific UI components to be registered under their unique names\n * in the factory. A registered component can be then instantiated by providing its name.\n * Note that names are case insensitive.\n *\n *\t\t// The editor provides localization tools for the factory.\n *\t\tconst factory = new ComponentFactory( editor );\n *\n *\t\tfactory.add( 'foo', locale => new FooView( locale ) );\n *\t\tfactory.add( 'bar', locale => new BarView( locale ) );\n *\n *\t\t// An instance of FooView.\n *\t\tconst fooInstance = factory.create( 'foo' );\n *\n *\t\t// Names are case insensitive so this is also allowed:\n *\t\tconst barInstance = factory.create( 'Bar' );\n *\n * The {@link module:core/editor/editor~Editor#locale editor locale} is passed to the factory\n * function when {@link module:ui/componentfactory~ComponentFactory#create} is called.\n */\nexport default class ComponentFactory {\n\t/**\n\t * Creates an instance of the factory.\n\t *\n\t * @constructor\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor instance that the factory belongs to.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor}\n\t\t */\n\t\tthis.editor = editor;\n\n\t\t/**\n\t\t * Registered component factories.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._components = new Map();\n\t}\n\n\t/**\n\t * Returns an iterator of registered component names. Names are returned in lower case.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\t* names() {\n\t\tfor ( const value of this._components.values() ) {\n\t\t\tyield value.originalName;\n\t\t}\n\t}\n\n\t/**\n\t * Registers a component factory function that will be used by the\n\t * {@link #create create} method and called with the\n\t * {@link module:core/editor/editor~Editor#locale editor locale} as an argument,\n\t * allowing localization of the {@link module:ui/view~View view}.\n\t *\n\t * @param {String} name The name of the component.\n\t * @param {Function} callback The callback that returns the component.\n\t */\n\tadd( name, callback ) {\n\t\tif ( this.has( name ) ) {\n\t\t\t/**\n\t\t\t * The item already exists in the component factory.\n\t\t\t *\n\t\t\t * @error componentfactory-item-exists\n\t\t\t * @param {String} name The name of the component.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'componentfactory-item-exists: The item already exists in the component factory.',\n\t\t\t\tthis,\n\t\t\t\t{ name }\n\t\t\t);\n\t\t}\n\n\t\tthis._components.set( getNormalized( name ), { callback, originalName: name } );\n\t}\n\n\t/**\n\t * Creates an instance of a component registered in the factory under a specific name.\n\t *\n\t * When called, the {@link module:core/editor/editor~Editor#locale editor locale} is passed to\n\t * the previously {@link #add added} factory function, allowing localization of the\n\t * {@link module:ui/view~View view}.\n\t *\n\t * @param {String} name The name of the component.\n\t * @returns {module:ui/view~View} The instantiated component view.\n\t */\n\tcreate( name ) {\n\t\tif ( !this.has( name ) ) {\n\t\t\t/**\n\t\t\t * The required component is not registered in the component factory. Please make sure\n\t\t\t * the provided name is correct and the component has been correctly\n\t\t\t * {@link #add added} to the factory.\n\t\t\t *\n\t\t\t * @error componentfactory-item-missing\n\t\t\t * @param {String} name The name of the missing component.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'componentfactory-item-missing: The required component is not registered in the factory.',\n\t\t\t\tthis,\n\t\t\t\t{ name }\n\t\t\t);\n\t\t}\n\n\t\treturn this._components.get( getNormalized( name ) ).callback( this.editor.locale );\n\t}\n\n\t/**\n\t * Checks if a component of a given name is registered in the factory.\n\t *\n\t * @param {String} name The name of the component.\n\t * @returns {Boolean}\n\t */\n\thas( name ) {\n\t\treturn this._components.has( getNormalized( name ) );\n\t}\n}\n\n//\n// Ensures that the component name used as the key in the internal map is in lower case.\n//\n// @private\n// @param {String} name\n// @returns {String}\nfunction getNormalized( name ) {\n\treturn String( name ).toLowerCase();\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/editor/editorui\n */\n\nimport ComponentFactory from '@ckeditor/ckeditor5-ui/src/componentfactory';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\n\n/**\n * A class providing the minimal interface that is required to successfully bootstrap any editor UI.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class EditorUI {\n\t/**\n\t * Creates an instance of the editor UI class.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor that the UI belongs to.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor} #editor\n\t\t */\n\t\tthis.editor = editor;\n\n\t\t/**\n\t\t * An instance of the {@link module:ui/componentfactory~ComponentFactory}, a registry used by plugins\n\t\t * to register factories of specific UI components.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/componentfactory~ComponentFactory} #componentFactory\n\t\t */\n\t\tthis.componentFactory = new ComponentFactory( editor );\n\n\t\t/**\n\t\t * Stores the information about the editor UI focus and propagates it so various plugins and components\n\t\t * are unified as a focus group.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker} #focusTracker\n\t\t */\n\t\tthis.focusTracker = new FocusTracker();\n\n\t\t/**\n\t\t * Stores all editable elements used by the editor instance.\n\t\t *\n\t\t * @private\n\t\t * @member {Map.<String,HTMLElement>}\n\t\t */\n\t\tthis._editableElementsMap = new Map();\n\n\t\t// Informs UI components that should be refreshed after layout change.\n\t\tthis.listenTo( editor.editing.view.document, 'layoutChanged', () => this.update() );\n\t}\n\n\t/**\n\t * The main (outermost) DOM element of the editor UI.\n\t *\n\t * For example, in {@link module:editor-classic/classiceditor~ClassicEditor} it is a `<div>` which\n\t * wraps the editable element and the toolbar. In {@link module:editor-inline/inlineeditor~InlineEditor}\n\t * it is the editable element itself (as there is no other wrapper). However, in\n\t * {@link module:editor-decoupled/decouplededitor~DecoupledEditor} it is set to `null` because this editor does not\n\t * come with a single \"main\" HTML element (its editable element and toolbar are separate).\n\t *\n\t * This property can be understood as a shorthand for retrieving the element that a specific editor integration\n\t * considers to be its main DOM element.\n\t *\n\t * @readonly\n\t * @member {HTMLElement|null} #element\n\t */\n\tget element() {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Fires the {@link module:core/editor/editorui~EditorUI#event:update `update`} event.\n\t *\n\t * This method should be called when the editor UI (e.g. positions of its balloons) needs to be updated due to\n\t * some environmental change which CKEditor 5 is not aware of (e.g. resize of a container in which it is used).\n\t */\n\tupdate() {\n\t\tthis.fire( 'update' );\n\t}\n\n\t/**\n\t * Destroys the UI.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\n\t\tthis.focusTracker.destroy();\n\n\t\t// Clean–up the references to the CKEditor instance stored in the native editable DOM elements.\n\t\tfor ( const domElement of this._editableElementsMap.values() ) {\n\t\t\tdomElement.ckeditorInstance = null;\n\t\t}\n\n\t\tthis._editableElementsMap = new Map();\n\t}\n\n\t/**\n\t * Store the native DOM editable element used by the editor under\n\t * a unique name.\n\t *\n\t * @param {String} rootName The unique name of the editable element.\n\t * @param {HTMLElement} domElement The native DOM editable element.\n\t */\n\tsetEditableElement( rootName, domElement ) {\n\t\tthis._editableElementsMap.set( rootName, domElement );\n\n\t\t// Put a reference to the CKEditor instance in the editable native DOM element.\n\t\t// It helps 3rd–party software (browser extensions, other libraries) access and recognize\n\t\t// CKEditor 5 instances (editing roots) and use their API (there is no global editor\n\t\t// instance registry).\n\t\tdomElement.ckeditorInstance = this.editor;\n\t}\n\n\t/**\n\t * Returns the editable editor element with the given name or null if editable does not exist.\n\t *\n\t * @param {String} [rootName=main] The editable name.\n\t * @returns {HTMLElement|undefined}\n\t */\n\tgetEditableElement( rootName = 'main' ) {\n\t\treturn this._editableElementsMap.get( rootName );\n\t}\n\n\t/**\n\t * Returns array of names of all editor editable elements.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetEditableElementsNames() {\n\t\treturn this._editableElementsMap.keys();\n\t}\n\n\t/**\n\t * Stores all editable elements used by the editor instance.\n\t *\n\t * @protected\n\t * @deprecated\n\t * @member {Map.<String,HTMLElement>}\n\t */\n\tget _editableElements() {\n\t\t/**\n\t\t * The {@link module:core/editor/editorui~EditorUI#_editableElements `EditorUI#_editableElements`} property has been\n\t\t * deprecated and will be removed in the near future. Please use {@link #setEditableElement `setEditableElement()`} and\n\t\t * {@link #getEditableElement `getEditableElement()`} methods instead.\n\t\t *\n\t\t * @error editor-ui-deprecated-editable-elements\n\t\t * @param {module:core/editor/editorui~EditorUI} editorUI Editor UI instance the deprecated property belongs to.\n\t\t */\n\t\tlog.warn(\n\t\t\t'editor-ui-deprecated-editable-elements: ' +\n\t\t\t'The EditorUI#_editableElements property has been deprecated and will be removed in the near future.',\n\t\t\t{ editorUI: this } );\n\n\t\treturn this._editableElementsMap;\n\t}\n\n\t/**\n\t * Fired when the editor UI is ready.\n\t *\n\t * Fired before {@link module:engine/controller/datacontroller~DataController#event:ready}.\n\t *\n\t * @event ready\n\t */\n\n\t/**\n\t * Fired whenever the UI (all related components) should be refreshed.\n\t *\n\t * **Note:**: The event is fired after each {@link module:engine/view/document~Document#event:layoutChanged}.\n\t * It can also be fired manually via the {@link module:core/editor/editorui~EditorUI#update} method.\n\t *\n\t * @event update\n\t */\n}\n\nmix( EditorUI, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/enabletoolbarkeyboardfocus\n */\n\n/**\n * Enables focus/blur toolbar navigation using `Alt+F10` and `Esc` keystrokes.\n *\n * @param {Object} options Options of the utility.\n * @param {*} options.origin A view to which the focus will return when `Esc` is pressed and\n * `options.toolbar` is focused.\n * @param {module:utils/keystrokehandler~KeystrokeHandler} options.originKeystrokeHandler A keystroke\n * handler to register `Alt+F10` keystroke.\n * @param {module:utils/focustracker~FocusTracker} options.originFocusTracker A focus tracker\n * for `options.origin`.\n * @param {module:ui/toolbar/toolbarview~ToolbarView} options.toolbar A toolbar which is to gain\n * focus when `Alt+F10` is pressed.\n * @param {Function} [options.beforeFocus] A callback executed before the `options.toolbar` gains focus\n * upon the `Alt+F10` keystroke.\n * @param {Function} [options.afterBlur] A callback executed after `options.toolbar` loses focus upon\n * `Esc` keystroke but before the focus goes back to `options.origin`.\n */\nexport default function enableToolbarKeyboardFocus( {\n\torigin,\n\toriginKeystrokeHandler,\n\toriginFocusTracker,\n\ttoolbar,\n\tbeforeFocus,\n\tafterBlur\n} ) {\n\t// Because toolbar items can get focus, the overall state of the toolbar must\n\t// also be tracked.\n\toriginFocusTracker.add( toolbar.element );\n\n\t// Focus the toolbar on the keystroke, if not already focused.\n\toriginKeystrokeHandler.set( 'Alt+F10', ( data, cancel ) => {\n\t\tif ( originFocusTracker.isFocused && !toolbar.focusTracker.isFocused ) {\n\t\t\tif ( beforeFocus ) {\n\t\t\t\tbeforeFocus();\n\t\t\t}\n\n\t\t\ttoolbar.focus();\n\n\t\t\tcancel();\n\t\t}\n\t} );\n\n\t// Blur the toolbar and bring the focus back to origin.\n\ttoolbar.keystrokes.set( 'Esc', ( data, cancel ) => {\n\t\tif ( toolbar.focusTracker.isFocused ) {\n\t\t\torigin.focus();\n\n\t\t\tif ( afterBlur ) {\n\t\t\t\tafterBlur();\n\t\t\t}\n\n\t\t\tcancel();\n\t\t}\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/normalizetoolbarconfig\n */\n\n/**\n * Normalizes the toolbar configuration (`config.toolbar`), which:\n *\n * * may be defined as an `Array`:\n *\n * \t\ttoolbar: [ 'heading', 'bold', 'italic', 'link', ... ]\n *\n * * or an `Object`:\n *\n *\t\ttoolbar: {\n *\t\t\titems: [ 'heading', 'bold', 'italic', 'link', ... ],\n *\t\t\t...\n *\t\t}\n *\n * * or may not be defined at all (`undefined`)\n *\n * and returns it in the object form.\n *\n * @param {Array|Object|undefined} config The value of `config.toolbar`.\n * @returns {Object} A normalized toolbar config object.\n */\nexport default function normalizeToolbarConfig( config ) {\n\tif ( Array.isArray( config ) ) {\n\t\treturn {\n\t\t\titems: config\n\t\t};\n\t}\n\n\tif ( !config ) {\n\t\treturn {\n\t\t\titems: []\n\t\t};\n\t}\n\n\treturn Object.assign( {\n\t\titems: []\n\t}, config );\n}\n","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z\\\"/></svg>\"","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module enter/shiftentercommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\n/**\n * ShiftEnter command. It is used by the {@link module:enter/shiftenter~ShiftEnter ShiftEnter feature} to handle\n * the <kbd>Shift</kbd>+<kbd>Enter</kbd> keystroke.\n *\n * @extends module:core/command~Command\n */\nexport default class ShiftEnterCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tmodel.change( writer => {\n\t\t\tsoftBreakAction( model, writer, doc.selection );\n\t\t\tthis.fire( 'afterExecute', { writer } );\n\t\t} );\n\t}\n\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tthis.isEnabled = isEnabled( model.schema, doc.selection );\n\t}\n}\n\n// Checks whether the ShiftEnter command should be enabled in the specified selection.\n//\n// @param {module:engine/model/schema~Schema} schema\n// @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\nfunction isEnabled( schema, selection ) {\n\t// At this moment it is okay to support single range selections only.\n\t// But in the future we may need to change that.\n\tif ( selection.rangeCount > 1 ) {\n\t\treturn false;\n\t}\n\n\tconst anchorPos = selection.anchor;\n\n\t// Check whether the break element can be inserted in the current selection anchor.\n\tif ( !anchorPos || !schema.checkChild( anchorPos, 'softBreak' ) ) {\n\t\treturn false;\n\t}\n\n\tconst range = selection.getFirstRange();\n\tconst startElement = range.start.parent;\n\tconst endElement = range.end.parent;\n\n\t// Do not modify the content if selection is cross-limit elements.\n\tif ( ( isInsideLimitElement( startElement, schema ) || isInsideLimitElement( endElement, schema ) ) && startElement !== endElement ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n// Creates a break in the way that the <kbd>Shift</kbd>+<kbd>Enter</kbd> keystroke is expected to work.\n//\n// @param {module:engine/model~Model} model\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n// Selection on which the action should be performed.\nfunction softBreakAction( model, writer, selection ) {\n\tconst isSelectionEmpty = selection.isCollapsed;\n\tconst range = selection.getFirstRange();\n\tconst startElement = range.start.parent;\n\tconst endElement = range.end.parent;\n\tconst isContainedWithinOneElement = ( startElement == endElement );\n\n\tif ( isSelectionEmpty ) {\n\t\tinsertBreak( writer, range.end );\n\t} else {\n\t\tconst leaveUnmerged = !( range.start.isAtStart && range.end.isAtEnd );\n\t\tmodel.deleteContent( selection, { leaveUnmerged } );\n\n\t\t// Selection within one element:\n\t\t//\n\t\t// <h>x[xx]x</h>\t\t-> <h>x^x</h>\t\t\t-> <h>x<br>^x</h>\n\t\tif ( isContainedWithinOneElement ) {\n\t\t\tinsertBreak( writer, selection.focus );\n\t\t}\n\t\t// Selection over multiple elements.\n\t\t//\n\t\t// <h>x[x</h><p>y]y<p>\t-> <h>x^</h><p>y</p>\t-> <h>x</h><p>^y</p>\n\t\t//\n\t\t// We chose not to insert a line break in this case because:\n\t\t//\n\t\t// * it's not a very common scenario,\n\t\t// * it actually surprised me when I saw the \"expected behavior\" in real life.\n\t\t//\n\t\t// It's ok if the user will need to be more specific where they want the <br> to be inserted.\n\t\telse {\n\t\t\t// Move the selection to the 2nd element (last step of the example above).\n\t\t\tif ( leaveUnmerged ) {\n\t\t\t\twriter.setSelection( endElement, 0 );\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction insertBreak( writer, position ) {\n\tconst breakLineElement = writer.createElement( 'softBreak' );\n\n\twriter.insert( breakLineElement, position );\n\twriter.setSelection( breakLineElement, 'after' );\n}\n\n// Checks whether the specified `element` is a child of the limit element.\n//\n// Checking whether the `<p>` element is inside a limit element:\n//   - <$root><p>Text.</p></$root> => false\n//   - <$root><limitElement><p>Text</p></limitElement></$root> => true\n//\n// @param {module:engine/model/element~Element} element\n// @param {module:engine/schema~Schema} schema\n// @returns {Boolean}\nfunction isInsideLimitElement( element, schema ) {\n\t// `$root` is a limit element but in this case is an invalid element.\n\tif ( element.is( 'rootElement' ) ) {\n\t\treturn false;\n\t}\n\n\treturn schema.isLimit( element ) || isInsideLimitElement( element.parent, schema );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module enter/shiftenter\n */\n\nimport ShiftEnterCommand from './shiftentercommand';\nimport EnterObserver from './enterobserver';\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\n/**\n * This plugin handles the <kbd>Shift</kbd>+<kbd>Enter</kbd> keystroke (soft line break) in the editor.\n *\n * See also the {@link module:enter/enter~Enter} plugin.\n *\n * For more information about this feature see the {@glink api/enter package page}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ShiftEnter extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ShiftEnter';\n\t}\n\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst schema = editor.model.schema;\n\t\tconst conversion = editor.conversion;\n\t\tconst view = editor.editing.view;\n\t\tconst viewDocument = view.document;\n\n\t\t// Configure the schema.\n\t\tschema.register( 'softBreak', {\n\t\t\tallowWhere: '$text',\n\t\t\tisInline: true\n\t\t} );\n\n\t\t// Configure converters.\n\t\tconversion.for( 'upcast' )\n\t\t\t.elementToElement( {\n\t\t\t\tmodel: 'softBreak',\n\t\t\t\tview: 'br'\n\t\t\t} );\n\n\t\tconversion.for( 'downcast' )\n\t\t\t.elementToElement( {\n\t\t\t\tmodel: 'softBreak',\n\t\t\t\tview: ( modelElement, viewWriter ) => viewWriter.createEmptyElement( 'br' )\n\t\t\t} );\n\n\t\tview.addObserver( EnterObserver );\n\n\t\teditor.commands.add( 'shiftEnter', new ShiftEnterCommand( editor ) );\n\n\t\tthis.listenTo( viewDocument, 'enter', ( evt, data ) => {\n\t\t\tdata.preventDefault();\n\n\t\t\t// The hard enter key is handled by the Enter plugin.\n\t\t\tif ( !data.isSoft ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\teditor.execute( 'shiftEnter' );\n\t\t\tview.scrollToTheSelection();\n\t\t}, { priority: 'low' } );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module essentials/essentials\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport Clipboard from '@ckeditor/ckeditor5-clipboard/src/clipboard';\nimport Enter from '@ckeditor/ckeditor5-enter/src/enter';\nimport ShiftEnter from '@ckeditor/ckeditor5-enter/src/shiftenter';\nimport Typing from '@ckeditor/ckeditor5-typing/src/typing';\nimport Undo from '@ckeditor/ckeditor5-undo/src/undo';\n\n/**\n * A plugin including all essential editing features. It represents a set of features that enables similar functionalities\n * to a `<textarea>` element.\n *\n * It includes:\n *\n * * {@link module:clipboard/clipboard~Clipboard},\n * * {@link module:enter/enter~Enter},\n * * {@link module:enter/shiftenter~ShiftEnter},\n * * {@link module:typing/typing~Typing},\n * * {@link module:undo/undo~Undo}.\n *\n * This plugin set does not define any block-level containers (such as {@link module:paragraph/paragraph~Paragraph}).\n * If your editor is supposed to handle block content, make sure to include it.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Essentials extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ Clipboard, Enter, ShiftEnter, Typing, Undo ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Essentials';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module heading/headingcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * The heading command. It is used by the {@link module:heading/heading~Heading heading feature} to apply headings.\n *\n * @extends module:core/command~Command\n */\nexport default class HeadingCommand extends Command {\n\t/**\n\t * Creates an instance of the command.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor Editor instance.\n\t * @param {Array.<String>} modelElements Names of the element which this command can apply in the model.\n\t */\n\tconstructor( editor, modelElements ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * If the selection starts in a heading (which {@link #modelElements is supported by this command})\n\t\t * the value is set to the name of that heading model element.\n\t\t * It is  set to `false` otherwise.\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean|String} #value\n\t\t */\n\n\t\t/**\n\t\t * Set of defined model's elements names that this command support.\n\t\t * See {@link module:heading/heading~HeadingOption}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<String>}\n\t\t */\n\t\tthis.modelElements = modelElements;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst block = first( this.editor.model.document.selection.getSelectedBlocks() );\n\n\t\tthis.value = !!block && this.modelElements.includes( block.name ) && block.name;\n\t\tthis.isEnabled = !!block && this.modelElements.some( heading => checkCanBecomeHeading( block, heading, this.editor.model.schema ) );\n\t}\n\n\t/**\n\t * Executes the command. Applies the heading to the selected blocks or, if the first selected\n\t * block is a heading already, turns selected headings (of this level only) to paragraphs.\n\t *\n\t * @param {Object} options\n\t * @param {String} options.value Name of the element which this command will apply in the model.\n\t * @fires execute\n\t */\n\texecute( options ) {\n\t\tconst model = this.editor.model;\n\t\tconst document = model.document;\n\n\t\tconst modelElement = options.value;\n\n\t\tmodel.change( writer => {\n\t\t\tconst blocks = Array.from( document.selection.getSelectedBlocks() )\n\t\t\t\t.filter( block => {\n\t\t\t\t\treturn checkCanBecomeHeading( block, modelElement, model.schema );\n\t\t\t\t} );\n\n\t\t\tfor ( const block of blocks ) {\n\t\t\t\tif ( !block.is( modelElement ) ) {\n\t\t\t\t\twriter.rename( block, modelElement );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n}\n\n// Checks whether the given block can be replaced by a specific heading.\n//\n// @private\n// @param {module:engine/model/element~Element} block A block to be tested.\n// @param {module:heading/headingcommand~HeadingCommand#modelElement} heading Command element name in the model.\n// @param {module:engine/model/schema~Schema} schema The schema of the document.\n// @returns {Boolean}\nfunction checkCanBecomeHeading( block, heading, schema ) {\n\treturn schema.checkChild( block.parent, heading ) && !schema.isObject( block );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module heading/headingediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\nimport HeadingCommand from './headingcommand';\n\nimport priorities from '@ckeditor/ckeditor5-utils/src/priorities';\n\nconst defaultModelElement = 'paragraph';\n\n/**\n * The headings engine feature. It handles switching between block formats &ndash; headings and paragraph.\n * This class represents the engine part of the heading feature. See also {@link module:heading/heading~Heading}.\n * It introduces `heading1`-`headingN` commands which allow to convert paragraphs into headings.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class HeadingEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\teditor.config.define( 'heading', {\n\t\t\toptions: [\n\t\t\t\t{ model: 'paragraph', title: 'Paragraph', class: 'ck-heading_paragraph' },\n\t\t\t\t{ model: 'heading1', view: 'h2', title: 'Heading 1', class: 'ck-heading_heading1' },\n\t\t\t\t{ model: 'heading2', view: 'h3', title: 'Heading 2', class: 'ck-heading_heading2' },\n\t\t\t\t{ model: 'heading3', view: 'h4', title: 'Heading 3', class: 'ck-heading_heading3' }\n\t\t\t]\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ Paragraph ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst options = editor.config.get( 'heading.options' );\n\n\t\tconst modelElements = [];\n\n\t\tfor ( const option of options ) {\n\t\t\t// Skip paragraph - it is defined in required Paragraph feature.\n\t\t\tif ( option.model !== defaultModelElement ) {\n\t\t\t\t// Schema.\n\t\t\t\teditor.model.schema.register( option.model, {\n\t\t\t\t\tinheritAllFrom: '$block'\n\t\t\t\t} );\n\n\t\t\t\teditor.conversion.elementToElement( option );\n\n\t\t\t\tmodelElements.push( option.model );\n\t\t\t}\n\t\t}\n\n\t\tthis._addDefaultH1Conversion( editor );\n\n\t\t// Register the heading command for this option.\n\t\teditor.commands.add( 'heading', new HeadingCommand( editor, modelElements ) );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\t// If the enter command is added to the editor, alter its behavior.\n\t\t// Enter at the end of a heading element should create a paragraph.\n\t\tconst editor = this.editor;\n\t\tconst enterCommand = editor.commands.get( 'enter' );\n\t\tconst options = editor.config.get( 'heading.options' );\n\n\t\tif ( enterCommand ) {\n\t\t\tthis.listenTo( enterCommand, 'afterExecute', ( evt, data ) => {\n\t\t\t\tconst positionParent = editor.model.document.selection.getFirstPosition().parent;\n\t\t\t\tconst isHeading = options.some( option => positionParent.is( option.model ) );\n\n\t\t\t\tif ( isHeading && !positionParent.is( defaultModelElement ) && positionParent.childCount === 0 ) {\n\t\t\t\t\tdata.writer.rename( positionParent, defaultModelElement );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Adds default conversion for `h1` -> `heading1` with a low priority.\n\t *\n\t * @private\n\t * @param {module:core/editor/editor~Editor} editor Editor instance on which to add the `h1` conversion.\n\t */\n\t_addDefaultH1Conversion( editor ) {\n\t\teditor.conversion.for( 'upcast' ).elementToElement( {\n\t\t\tmodel: 'heading1',\n\t\t\tview: 'h1',\n\t\t\t// With a `low` priority, `paragraph` plugin autoparagraphing mechanism is executed. Make sure\n\t\t\t// this listener is called before it. If not, `h1` will be transformed into a paragraph.\n\t\t\tconverterPriority: priorities.get( 'low' ) + 1\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module heading/utils\n */\n/**\n * Returns heading options as defined in `config.heading.options` but processed to consider\n * editor localization, i.e. to display {@link module:heading/heading~HeadingOption}\n * in the correct language.\n *\n * Note: The reason behind this method is that there's no way to use {@link module:utils/locale~Locale#t}\n * when the user config is defined because the editor does not exist yet.\n *\n * @param {module:core/editor/editor~Editor} editor\n * @returns {Array.<module:heading/heading~HeadingOption>}.\n */\nexport function getLocalizedOptions(editor) {\n    const t = editor.t;\n    const localizedTitles = {\n        Paragraph: t('Paragraph'),\n        'Heading 1': t('Heading 1'),\n        'Heading 2': t('Heading 2'),\n        'Heading 3': t('Heading 3'),\n        'Heading 4': t('Heading 4'),\n        'Heading 5': t('Heading 5'),\n        'Heading 6': t('Heading 6')\n    };\n    return editor.config.get('heading.options').map(option => {\n        const title = localizedTitles[option.title];\n        if (title && title != option.title) {\n            option.title = title;\n        }\n        return option;\n    });\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport setDataInElement from '@ckeditor/ckeditor5-utils/src/dom/setdatainelement';\n\n/**\n * @module core/editor/utils/elementapimixin\n */\n\n/**\n * Implementation of the {@link module:core/editor/utils/elementapimixin~ElementApi}.\n *\n * @mixin ElementApiMixin\n * @implements module:core/editor/utils/elementapimixin~ElementApi\n */\nconst ElementApiMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\tupdateSourceElement() {\n\t\tif ( !this.sourceElement ) {\n\t\t\t/**\n\t\t\t * Cannot update the source element of a detached editor.\n\t\t\t *\n\t\t\t * The {@link ~ElementApi#updateSourceElement `updateSourceElement()`} method cannot be called if you did not\n\t\t\t * pass an element to `Editor.create()`.\n\t\t\t *\n\t\t\t * @error editor-missing-sourceelement\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'editor-missing-sourceelement: Cannot update the source element of a detached editor.',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tsetDataInElement( this.sourceElement, this.data.get() );\n\t}\n};\n\nexport default ElementApiMixin;\n\n/**\n * Interface describing an editor that replaced a DOM element (was \"initialized on an element\").\n *\n * Such an editor should provide a method to\n * {@link module:core/editor/utils/elementapimixin~ElementApi#updateSourceElement update the replaced element with the current data}.\n *\n * @interface ElementApi\n */\n\n/**\n * The element on which the editor has been initialized.\n *\n * @readonly\n * @member {HTMLElement} #sourceElement\n */\n\n/**\n * Updates the {@link #sourceElement editor source element}'s content with the data.\n *\n * @method #updateSourceElement\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport { isFunction } from 'lodash-es';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * @module core/editor/utils/attachtoform\n */\n\n/**\n * Checks if the editor is initialized on a `<textarea>` element that belongs to a form. If yes, it updates the editor's element\n * content before submitting the form.\n *\n * This helper requires the {@link module:core/editor/utils/elementapimixin~ElementApi ElementApi interface}.\n *\n * @param {module:core/editor/editor~Editor} editor Editor instance.\n */\nexport default function attachToForm( editor ) {\n\tif ( !isFunction( editor.updateSourceElement ) ) {\n\t\t/**\n\t\t * The editor passed to `attachToForm()` must implement the\n\t\t * {@link module:core/editor/utils/elementapimixin~ElementApi} interface.\n\t\t *\n\t\t * @error attachtoform-missing-elementapi-interface\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'attachtoform-missing-elementapi-interface: Editor passed to attachToForm() must implement ElementApi.',\n\t\t\teditor\n\t\t);\n\t}\n\n\tconst sourceElement = editor.sourceElement;\n\n\t// Only when replacing a textarea which is inside of a form element.\n\tif ( sourceElement && sourceElement.tagName.toLowerCase() === 'textarea' && sourceElement.form ) {\n\t\tlet originalSubmit;\n\t\tconst form = sourceElement.form;\n\t\tconst onSubmit = () => editor.updateSourceElement();\n\n\t\t// Replace the original form#submit() to call a custom submit function first.\n\t\t// Check if #submit is a function because the form might have an input named \"submit\".\n\t\tif ( isFunction( form.submit ) ) {\n\t\t\toriginalSubmit = form.submit;\n\n\t\t\tform.submit = () => {\n\t\t\t\tonSubmit();\n\t\t\t\toriginalSubmit.apply( form );\n\t\t\t};\n\t\t}\n\n\t\t// Update the replaced textarea with data before each form#submit event.\n\t\tform.addEventListener( 'submit', onSubmit );\n\n\t\t// Remove the submit listener and revert the original submit method on\n\t\t// editor#destroy.\n\t\teditor.on( 'destroy', () => {\n\t\t\tform.removeEventListener( 'submit', onSubmit );\n\n\t\t\tif ( originalSubmit ) {\n\t\t\t\tform.submit = originalSubmit;\n\t\t\t}\n\t\t} );\n\t}\n}\n","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z\\\" /></svg>\\n\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z\\\"/></svg>\\n\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z\\\"/></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 700 250\\\"><rect rx=\\\"4\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z\\\"/></svg>\"","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module list/listcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * The list command. It is used by the {@link module:list/list~List list feature}.\n *\n * @extends module:core/command~Command\n */\nexport default class ListCommand extends Command {\n\t/**\n\t * Creates an instance of the command.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t * @param {'numbered'|'bulleted'} type List type that will be handled by this command.\n\t */\n\tconstructor( editor, type ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The type of the list created by the command.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'numbered'|'bulleted'}\n\t\t */\n\t\tthis.type = type == 'bulleted' ? 'bulleted' : 'numbered';\n\n\t\t/**\n\t\t * A flag indicating whether the command is active, which means that the selection starts in a list of the same type.\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #value\n\t\t */\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tthis.value = this._getValue();\n\t\tthis.isEnabled = this._checkEnabled();\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * @protected\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst document = model.document;\n\t\tconst blocks = Array.from( document.selection.getSelectedBlocks() )\n\t\t\t.filter( block => checkCanBecomeListItem( block, model.schema ) );\n\n\t\t// Whether we are turning off some items.\n\t\tconst turnOff = this.value === true;\n\t\t// If we are turning off items, we are going to rename them to paragraphs.\n\n\t\tmodel.change( writer => {\n\t\t\t// If part of a list got turned off, we need to handle (outdent) all of sub-items of the last turned-off item.\n\t\t\t// To be sure that model is all the time in a good state, we first fix items below turned-off item.\n\t\t\tif ( turnOff ) {\n\t\t\t\t// Start from the model item that is just after the last turned-off item.\n\t\t\t\tlet next = blocks[ blocks.length - 1 ].nextSibling;\n\t\t\t\tlet currentIndent = Number.POSITIVE_INFINITY;\n\t\t\t\tlet changes = [];\n\n\t\t\t\t// Correct indent of all items after the last turned off item.\n\t\t\t\t// Rules that should be followed:\n\t\t\t\t// 1. All direct sub-items of turned-off item should become indent 0, because the first item after it\n\t\t\t\t//    will be the first item of a new list. Other items are at the same level, so should have same 0 index.\n\t\t\t\t// 2. All items with indent lower than indent of turned-off item should become indent 0, because they\n\t\t\t\t//    should not end up as a child of any of list items that they were not children of before.\n\t\t\t\t// 3. All other items should have their indent changed relatively to it's parent.\n\t\t\t\t//\n\t\t\t\t// For example:\n\t\t\t\t// 1  * --------\n\t\t\t\t// 2     * --------\n\t\t\t\t// 3        * --------\t\t\t<-- this is turned off.\n\t\t\t\t// 4           * --------\t\t<-- this has to become indent = 0, because it will be first item on a new list.\n\t\t\t\t// 5              * --------\t<-- this should be still be a child of item above, so indent = 1.\n\t\t\t\t// 6        * --------\t\t\t<-- this has to become indent = 0, because it should not be a child of any of items above.\n\t\t\t\t// 7           * --------\t\t<-- this should be still be a child of item above, so indent = 1.\n\t\t\t\t// 8     * --------\t\t\t\t<-- this has to become indent = 0.\n\t\t\t\t// 9        * --------\t\t\t<-- this should still be a child of item above, so indent = 1.\n\t\t\t\t// 10          * --------\t\t<-- this should still be a child of item above, so indent = 2.\n\t\t\t\t// 11          * --------\t\t<-- this should still be at the same level as item above, so indent = 2.\n\t\t\t\t// 12 * --------\t\t\t\t<-- this and all below are left unchanged.\n\t\t\t\t// 13    * --------\n\t\t\t\t// 14       * --------\n\t\t\t\t//\n\t\t\t\t// After turning off 3 the list becomes:\n\t\t\t\t//\n\t\t\t\t// 1  * --------\n\t\t\t\t// 2     * --------\n\t\t\t\t//\n\t\t\t\t// 3  --------\n\t\t\t\t//\n\t\t\t\t// 4  * --------\n\t\t\t\t// 5     * --------\n\t\t\t\t// 6  * --------\n\t\t\t\t// 7     * --------\n\t\t\t\t// 8  * --------\n\t\t\t\t// 9     * --------\n\t\t\t\t// 10       * --------\n\t\t\t\t// 11       * --------\n\t\t\t\t// 12 * --------\n\t\t\t\t// 13    * --------\n\t\t\t\t// 14       * --------\n\t\t\t\t//\n\t\t\t\t// Thanks to this algorithm no lists are mismatched and no items get unexpected children/parent, while\n\t\t\t\t// those parent-child connection which are possible to maintain are still maintained. It's worth noting\n\t\t\t\t// that this is the same effect that we would be get by multiple use of outdent command. However doing\n\t\t\t\t// it like this is much more efficient because it's less operation (less memory usage, easier OT) and\n\t\t\t\t// less conversion (faster).\n\t\t\t\twhile ( next && next.name == 'listItem' && next.getAttribute( 'listIndent' ) !== 0 ) {\n\t\t\t\t\t// Check each next list item, as long as its indent is bigger than 0.\n\t\t\t\t\t// If the indent is 0 we are not going to change anything anyway.\n\t\t\t\t\tconst indent = next.getAttribute( 'listIndent' );\n\n\t\t\t\t\t// We check if that's item indent is lower as current relative indent.\n\t\t\t\t\tif ( indent < currentIndent ) {\n\t\t\t\t\t\t// If it is, current relative indent becomes that indent.\n\t\t\t\t\t\tcurrentIndent = indent;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fix indent relatively to current relative indent.\n\t\t\t\t\t// Note, that if we just changed the current relative indent, the newIndent will be equal to 0.\n\t\t\t\t\tconst newIndent = indent - currentIndent;\n\n\t\t\t\t\t// Save the entry in changes array. We do not apply it at the moment, because we will need to\n\t\t\t\t\t// reverse the changes so the last item is changed first.\n\t\t\t\t\t// This is to keep model in correct state all the time.\n\t\t\t\t\tchanges.push( { element: next, listIndent: newIndent } );\n\n\t\t\t\t\t// Find next item.\n\t\t\t\t\tnext = next.nextSibling;\n\t\t\t\t}\n\n\t\t\t\tchanges = changes.reverse();\n\n\t\t\t\tfor ( const item of changes ) {\n\t\t\t\t\twriter.setAttribute( 'listIndent', item.listIndent, item.element );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are turning on, we might change some items that are already `listItem`s but with different type.\n\t\t\t// Changing one nested list item to other type should also trigger changing all its siblings so the\n\t\t\t// whole nested list is of the same type.\n\t\t\t// Example (assume changing to numbered list):\n\t\t\t// * ------\t\t\t\t<-- do not fix, top level item\n\t\t\t//   * ------\t\t\t<-- fix, because latter list item of this item's list is changed\n\t\t\t//      * ------\t\t<-- do not fix, item is not affected (different list)\n\t\t\t//   * ------\t\t\t<-- fix, because latter list item of this item's list is changed\n\t\t\t//      * ------\t\t<-- fix, because latter list item of this item's list is changed\n\t\t\t//      * ---[--\t\t<-- already in selection\n\t\t\t//   * ------\t\t\t<-- already in selection\n\t\t\t//   * ------\t\t\t<-- already in selection\n\t\t\t// * ------\t\t\t\t<-- already in selection, but does not cause other list items to change because is top-level\n\t\t\t//   * ---]--\t\t\t<-- already in selection\n\t\t\t//   * ------\t\t\t<-- fix, because preceding list item of this item's list is changed\n\t\t\t//      * ------\t\t<-- do not fix, item is not affected (different list)\n\t\t\t// * ------\t\t\t\t<-- do not fix, top level item\n\t\t\tif ( !turnOff ) {\n\t\t\t\t// Find lowest indent among selected items. This will be indicator what is the indent of\n\t\t\t\t// top-most list affected by the command.\n\t\t\t\tlet lowestIndent = Number.POSITIVE_INFINITY;\n\n\t\t\t\tfor ( const item of blocks ) {\n\t\t\t\t\tif ( item.is( 'listItem' ) && item.getAttribute( 'listIndent' ) < lowestIndent ) {\n\t\t\t\t\t\tlowestIndent = item.getAttribute( 'listIndent' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Do not execute the fix for top-level lists.\n\t\t\t\tlowestIndent = lowestIndent === 0 ? 1 : lowestIndent;\n\n\t\t\t\t// Fix types of list items that are \"before\" the selected blocks.\n\t\t\t\t_fixType( blocks, true, lowestIndent );\n\n\t\t\t\t// Fix types of list items that are \"after\" the selected blocks.\n\t\t\t\t_fixType( blocks, false, lowestIndent );\n\t\t\t}\n\n\t\t\t// Phew! Now it will be easier :).\n\t\t\t// For each block element that was in the selection, we will either: turn it to list item,\n\t\t\t// turn it to paragraph, or change it's type. Or leave it as it is.\n\t\t\t// Do it in reverse as there might be multiple blocks (same as with changing indents).\n\t\t\tfor ( const element of blocks.reverse() ) {\n\t\t\t\tif ( turnOff && element.name == 'listItem' ) {\n\t\t\t\t\t// We are turning off and the element is a `listItem` - it should be converted to `paragraph`.\n\t\t\t\t\t// List item specific attributes are removed by post fixer.\n\t\t\t\t\twriter.rename( element, 'paragraph' );\n\t\t\t\t} else if ( !turnOff && element.name != 'listItem' ) {\n\t\t\t\t\t// We are turning on and the element is not a `listItem` - it should be converted to `listItem`.\n\t\t\t\t\t// The order of operations is important to keep model in correct state.\n\t\t\t\t\twriter.setAttributes( { listType: this.type, listIndent: 0 }, element );\n\t\t\t\t\twriter.rename( element, 'listItem' );\n\t\t\t\t} else if ( !turnOff && element.name == 'listItem' && element.getAttribute( 'listType' ) != this.type ) {\n\t\t\t\t\t// We are turning on and the element is a `listItem` but has different type - change it's type and\n\t\t\t\t\t// type of it's all siblings that have same indent.\n\t\t\t\t\twriter.setAttribute( 'listType', this.type, element );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Checks the command's {@link #value}.\n\t *\n\t * @private\n\t * @returns {Boolean} The current value.\n\t */\n\t_getValue() {\n\t\t// Check whether closest `listItem` ancestor of the position has a correct type.\n\t\tconst listItem = first( this.editor.model.document.selection.getSelectedBlocks() );\n\n\t\treturn !!listItem && listItem.is( 'listItem' ) && listItem.getAttribute( 'listType' ) == this.type;\n\t}\n\n\t/**\n\t * Checks whether the command can be enabled in the current context.\n\t *\n\t * @private\n\t * @returns {Boolean} Whether the command should be enabled.\n\t */\n\t_checkEnabled() {\n\t\t// If command value is true it means that we are in list item, so the command should be enabled.\n\t\tif ( this.value ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst selection = this.editor.model.document.selection;\n\t\tconst schema = this.editor.model.schema;\n\n\t\tconst firstBlock = first( selection.getSelectedBlocks() );\n\n\t\tif ( !firstBlock ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Otherwise, check if list item can be inserted at the position start.\n\t\treturn checkCanBecomeListItem( firstBlock, schema );\n\t}\n}\n\n// Helper function used when one or more list item have their type changed. Fixes type of other list items\n// that are affected by the change (are in same lists) but are not directly in selection. The function got extracted\n// not to duplicated code, as same fix has to be performed before and after selection.\n//\n// @param {Array.<module:engine/model/node~Node>} blocks Blocks that are in selection.\n// @param {Boolean} isBackward Specified whether fix will be applied for blocks before first selected block (`true`)\n// or blocks after last selected block (`false`).\n// @param {Number} lowestIndent Lowest indent among selected blocks.\nfunction _fixType( blocks, isBackward, lowestIndent ) {\n\t// We need to check previous sibling of first changed item and next siblings of last changed item.\n\tconst startingItem = isBackward ? blocks[ 0 ] : blocks[ blocks.length - 1 ];\n\n\tif ( startingItem.is( 'listItem' ) ) {\n\t\tlet item = startingItem[ isBackward ? 'previousSibling' : 'nextSibling' ];\n\t\t// During processing items, keeps the lowest indent of already processed items.\n\t\t// This saves us from changing too many items.\n\t\t// Following example is for going forward as it is easier to read, however same applies to going backward.\n\t\t// * ------\n\t\t//   * ------\n\t\t//     * --[---\n\t\t//   * ------\t\t<-- `lowestIndent` should be 1\n\t\t//     * --]---\t\t<-- `startingItem`, `currentIndent` = 2, `lowestIndent` == 1\n\t\t//     * ------\t\t<-- should be fixed, `indent` == 2 == `currentIndent`\n\t\t//   * ------\t\t<-- should be fixed, set `currentIndent` to 1, `indent` == 1 == `currentIndent`\n\t\t//     * ------\t\t<-- should not be fixed, item is in different list, `indent` = 2, `indent` != `currentIndent`\n\t\t//   * ------\t\t<-- should be fixed, `indent` == 1 == `currentIndent`\n\t\t// * ------\t\t\t<-- break loop (`indent` < `lowestIndent`)\n\t\tlet currentIndent = startingItem.getAttribute( 'listIndent' );\n\n\t\t// Look back until a list item with indent lower than reference `lowestIndent`.\n\t\t// That would be the parent of nested sublist which contains item having `lowestIndent`.\n\t\twhile ( item && item.is( 'listItem' ) && item.getAttribute( 'listIndent' ) >= lowestIndent ) {\n\t\t\tif ( currentIndent > item.getAttribute( 'listIndent' ) ) {\n\t\t\t\tcurrentIndent = item.getAttribute( 'listIndent' );\n\t\t\t}\n\n\t\t\t// Found an item that is in the same nested sublist.\n\t\t\tif ( item.getAttribute( 'listIndent' ) == currentIndent ) {\n\t\t\t\t// Just add the item to selected blocks like it was selected by the user.\n\t\t\t\tblocks[ isBackward ? 'unshift' : 'push' ]( item );\n\t\t\t}\n\n\t\t\titem = item[ isBackward ? 'previousSibling' : 'nextSibling' ];\n\t\t}\n\t}\n}\n\n// Checks whether the given block can be replaced by a listItem.\n//\n// @private\n// @param {module:engine/model/element~Element} block A block to be tested.\n// @param {module:engine/model/schema~Schema} schema The schema of the document.\n// @returns {Boolean}\nfunction checkCanBecomeListItem( block, schema ) {\n\treturn schema.checkChild( block.parent, 'listItem' ) && !schema.isObject( block );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module list/indentcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * The list indent command. It is used by the {@link module:list/list~List list feature}.\n *\n * @extends module:core/command~Command\n */\nexport default class IndentCommand extends Command {\n\t/**\n\t * Creates an instance of the command.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t * @param {'forward'|'backward'} indentDirection The direction of indent. If it is equal to `backward`, the command\n\t * will outdent a list item.\n\t */\n\tconstructor( editor, indentDirection ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * Determines by how much the command will change the list item's indent attribute.\n\t\t *\n\t\t * @readonly\n\t\t * @private\n\t\t * @member {Number}\n\t\t */\n\t\tthis._indentBy = indentDirection == 'forward' ? 1 : -1;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tthis.isEnabled = this._checkEnabled();\n\t}\n\n\t/**\n\t * Indents or outdents (depends on the {@link #constructor}'s `indentDirection` parameter) selected list items.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tlet itemsToChange = Array.from( doc.selection.getSelectedBlocks() );\n\n\t\tmodel.change( writer => {\n\t\t\tconst lastItem = itemsToChange[ itemsToChange.length - 1 ];\n\n\t\t\t// Indenting a list item should also indent all the items that are already sub-items of indented item.\n\t\t\tlet next = lastItem.nextSibling;\n\n\t\t\t// Check all items after last indented item, as long as their indent is bigger than indent of that item.\n\t\t\twhile ( next && next.name == 'listItem' && next.getAttribute( 'listIndent' ) > lastItem.getAttribute( 'listIndent' ) ) {\n\t\t\t\titemsToChange.push( next );\n\n\t\t\t\tnext = next.nextSibling;\n\t\t\t}\n\n\t\t\t// We need to be sure to keep model in correct state after each small change, because converters\n\t\t\t// bases on that state and assumes that model is correct.\n\t\t\t// Because of that, if the command outdents items, we will outdent them starting from the last item, as\n\t\t\t// it is safer.\n\t\t\tif ( this._indentBy < 0 ) {\n\t\t\t\titemsToChange = itemsToChange.reverse();\n\t\t\t}\n\n\t\t\tfor ( const item of itemsToChange ) {\n\t\t\t\tconst indent = item.getAttribute( 'listIndent' ) + this._indentBy;\n\n\t\t\t\t// If indent is lower than 0, it means that the item got outdented when it was not indented.\n\t\t\t\t// This means that we need to convert that list item to paragraph.\n\t\t\t\tif ( indent < 0 ) {\n\t\t\t\t\t// To keep the model as correct as possible, first rename listItem, then remove attributes,\n\t\t\t\t\t// as listItem without attributes is very incorrect and will cause problems in converters.\n\t\t\t\t\t// No need to remove attributes, will be removed by post fixer.\n\t\t\t\t\twriter.rename( item, 'paragraph' );\n\t\t\t\t}\n\t\t\t\t// If indent is >= 0, change the attribute value.\n\t\t\t\telse {\n\t\t\t\t\twriter.setAttribute( 'listIndent', indent, item );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Checks whether the command can be enabled in the current context.\n\t *\n\t * @private\n\t * @returns {Boolean} Whether the command should be enabled.\n\t */\n\t_checkEnabled() {\n\t\t// Check whether any of position's ancestor is a list item.\n\t\tconst listItem = first( this.editor.model.document.selection.getSelectedBlocks() );\n\n\t\t// If selection is not in a list item, the command is disabled.\n\t\tif ( !listItem || !listItem.is( 'listItem' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this._indentBy > 0 ) {\n\t\t\t// Cannot indent first item in it's list. Check if before `listItem` is a list item that is in same list.\n\t\t\t// To be in the same list, the item has to have same attributes and cannot be \"split\" by an item with lower indent.\n\t\t\tconst indent = listItem.getAttribute( 'listIndent' );\n\t\t\tconst type = listItem.getAttribute( 'listType' );\n\n\t\t\tlet prev = listItem.previousSibling;\n\n\t\t\twhile ( prev && prev.is( 'listItem' ) && prev.getAttribute( 'listIndent' ) >= indent ) {\n\t\t\t\tif ( prev.getAttribute( 'listIndent' ) == indent ) {\n\t\t\t\t\t// The item is on the same level.\n\t\t\t\t\t// If it has same type, it means that we found a preceding sibling from the same list.\n\t\t\t\t\t// If it does not have same type, it means that `listItem` is on different list (this can happen only\n\t\t\t\t\t// on top level lists, though).\n\t\t\t\t\treturn prev.getAttribute( 'listType' ) == type;\n\t\t\t\t}\n\n\t\t\t\tprev = prev.previousSibling;\n\t\t\t}\n\n\t\t\t// Could not find similar list item, this means that `listItem` is first in its list.\n\t\t\treturn false;\n\t\t}\n\n\t\t// If we are outdenting it is enough to be in list item. Every list item can always be outdented.\n\t\treturn true;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module list/utils\n */\n\nimport { getFillerOffset } from '@ckeditor/ckeditor5-engine/src/view/containerelement';\n\n/**\n * Creates list item {@link module:engine/view/containerelement~ContainerElement}.\n *\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer The writer instance.\n * @returns {module:engine/view/containerelement~ContainerElement}\n */\nexport function createViewListItemElement( writer ) {\n\tconst viewItem = writer.createContainerElement( 'li' );\n\tviewItem.getFillerOffset = getListItemFillerOffset;\n\n\treturn viewItem;\n}\n\n// Implementation of getFillerOffset for view list item element.\n//\n// @returns {Number|null} Block filler offset or `null` if block filler is not needed.\nfunction getListItemFillerOffset() {\n\tconst hasOnlyLists = !this.isEmpty && ( this.getChild( 0 ).name == 'ul' || this.getChild( 0 ).name == 'ol' );\n\n\tif ( this.isEmpty || hasOnlyLists ) {\n\t\treturn 0;\n\t}\n\n\treturn getFillerOffset.call( this );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module list/converters\n */\n\nimport { createViewListItemElement } from './utils';\nimport TreeWalker from '@ckeditor/ckeditor5-engine/src/model/treewalker';\n\n/**\n * A model-to-view converter for `listItem` model element insertion.\n *\n * It creates a `<ul><li></li><ul>` (or `<ol>`) view structure out of a `listItem` model element, inserts it at the correct\n * position, and merges the list with surrounding lists (if available).\n *\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert\n * @param {module:engine/model/model~Model} model Model instance.\n * @returns {Function} Returns a conversion callback.\n */\nexport function modelViewInsertion( model ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst consumable = conversionApi.consumable;\n\n\t\tif ( !consumable.test( data.item, 'insert' ) ||\n\t\t\t!consumable.test( data.item, 'attribute:listType' ) ||\n\t\t\t!consumable.test( data.item, 'attribute:listIndent' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconsumable.consume( data.item, 'insert' );\n\t\tconsumable.consume( data.item, 'attribute:listType' );\n\t\tconsumable.consume( data.item, 'attribute:listIndent' );\n\n\t\tconst modelItem = data.item;\n\t\tconst viewItem = generateLiInUl( modelItem, conversionApi );\n\n\t\tinjectViewList( modelItem, viewItem, conversionApi, model );\n\t};\n}\n\n/**\n * A model-to-view converter for `listItem` model element removal.\n *\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:remove\n * @param {module:engine/model/model~Model} model Model instance.\n * @returns {Function} Returns a conversion callback.\n */\nexport function modelViewRemove( model ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tconst viewStart = conversionApi.mapper.toViewPosition( data.position ).getLastMatchingPosition( value => !value.item.is( 'li' ) );\n\t\tconst viewItem = viewStart.nodeAfter;\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\t// 1. Break the container after and before the list item.\n\t\t// This will create a view list with one view list item - the one to remove.\n\t\tviewWriter.breakContainer( viewWriter.createPositionBefore( viewItem ) );\n\t\tviewWriter.breakContainer( viewWriter.createPositionAfter( viewItem ) );\n\n\t\t// 2. Remove the list with the item to remove.\n\t\tconst viewList = viewItem.parent;\n\t\tconst viewListPrev = viewList.previousSibling;\n\t\tconst removeRange = viewWriter.createRangeOn( viewList );\n\t\tconst removed = viewWriter.remove( removeRange );\n\n\t\t// 3. Merge the whole created by breaking and removing the list.\n\t\tif ( viewListPrev && viewListPrev.nextSibling ) {\n\t\t\tmergeViewLists( viewWriter, viewListPrev, viewListPrev.nextSibling );\n\t\t}\n\n\t\t// 4. Bring back nested list that was in the removed <li>.\n\t\tconst modelItem = conversionApi.mapper.toModelElement( viewItem );\n\n\t\thoistNestedLists( modelItem.getAttribute( 'listIndent' ) + 1, data.position, removeRange.start, viewItem, conversionApi, model );\n\n\t\t// 5. Unbind removed view item and all children.\n\t\tfor ( const child of viewWriter.createRangeIn( removed ).getItems() ) {\n\t\t\tconversionApi.mapper.unbindViewElement( child );\n\t\t}\n\n\t\tevt.stop();\n\t};\n}\n\n/**\n * A model-to-view converter for `type` attribute change on `listItem` model element.\n *\n * This change means that `<li>` elements parent changes from `<ul>` to `<ol>` (or vice versa). This is accomplished\n * by breaking view elements, changing their name and merging them.\n *\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute\n * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n * @param {Object} data Additional information about the change.\n * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface.\n */\nexport function modelViewChangeType( evt, data, conversionApi ) {\n\tif ( !conversionApi.consumable.consume( data.item, 'attribute:listType' ) ) {\n\t\treturn;\n\t}\n\n\tconst viewItem = conversionApi.mapper.toViewElement( data.item );\n\tconst viewWriter = conversionApi.writer;\n\n\t// 1. Break the container after and before the list item.\n\t// This will create a view list with one view list item -- the one that changed type.\n\tviewWriter.breakContainer( viewWriter.createPositionBefore( viewItem ) );\n\tviewWriter.breakContainer( viewWriter.createPositionAfter( viewItem ) );\n\n\t// 2. Change name of the view list that holds the changed view item.\n\t// We cannot just change name property, because that would not render properly.\n\tlet viewList = viewItem.parent;\n\tconst listName = data.attributeNewValue == 'numbered' ? 'ol' : 'ul';\n\tviewList = viewWriter.rename( listName, viewList );\n\n\t// 3. Merge the changed view list with other lists, if possible.\n\tmergeViewLists( viewWriter, viewList, viewList.nextSibling );\n\tmergeViewLists( viewWriter, viewList.previousSibling, viewList );\n\n\t// 4. Consumable insertion of children inside the item. They are already handled by re-building the item in view.\n\tfor ( const child of data.item.getChildren() ) {\n\t\tconversionApi.consumable.consume( child, 'insert' );\n\t}\n}\n\n/**\n * A model-to-view converter for `listIndent` attribute change on `listItem` model element.\n *\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute\n * @param {module:engine/model/model~Model} model Model instance.\n * @returns {Function} Returns a conversion callback.\n */\nexport function modelViewChangeIndent( model ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !conversionApi.consumable.consume( data.item, 'attribute:listIndent' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewItem = conversionApi.mapper.toViewElement( data.item );\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\t// 1. Break the container after and before the list item.\n\t\t// This will create a view list with one view list item -- the one that changed type.\n\t\tviewWriter.breakContainer( viewWriter.createPositionBefore( viewItem ) );\n\t\tviewWriter.breakContainer( viewWriter.createPositionAfter( viewItem ) );\n\n\t\t// 2. Extract view list with changed view list item and merge \"hole\" possibly created by breaking and removing elements.\n\t\tconst viewList = viewItem.parent;\n\t\tconst viewListPrev = viewList.previousSibling;\n\t\tconst removeRange = viewWriter.createRangeOn( viewList );\n\t\tviewWriter.remove( removeRange );\n\n\t\tif ( viewListPrev && viewListPrev.nextSibling ) {\n\t\t\tmergeViewLists( viewWriter, viewListPrev, viewListPrev.nextSibling );\n\t\t}\n\n\t\t// 3. Bring back nested list that was in the removed <li>.\n\t\thoistNestedLists( data.attributeOldValue + 1, data.range.start, removeRange.start, viewItem, conversionApi, model );\n\n\t\t// 4. Inject view list like it is newly inserted.\n\t\tinjectViewList( data.item, viewItem, conversionApi, model );\n\n\t\t// 5. Consume insertion of children inside the item. They are already handled by re-building the item in view.\n\t\tfor ( const child of data.item.getChildren() ) {\n\t\t\tconversionApi.consumable.consume( child, 'insert' );\n\t\t}\n\t};\n}\n\n/**\n * A special model-to-view converter introduced by the {@link module:list/list~List list feature}. This converter is fired for\n * insert change of every model item, and should be fired before the actual converter. The converter checks whether the inserted\n * model item is a non-`listItem` element. If it is, and it is inserted inside a view list, the converter breaks the\n * list so the model element is inserted to the view parent element corresponding to its model parent element.\n *\n * The converter prevents such situations:\n *\n *\t\t// Model:                        // View:\n *\t\t<listItem>foo</listItem>         <ul>\n *\t\t<listItem>bar</listItem>             <li>foo</li>\n *\t\t                                     <li>bar</li>\n *\t\t                                 </ul>\n *\n *\t\t// After change:                 // Correct view guaranteed by this converter:\n *\t\t<listItem>foo</listItem>         <ul><li>foo</li></ul><p>xxx</p><ul><li>bar</li></ul>\n *\t\t<paragraph>xxx</paragraph>       // Instead of this wrong view state:\n *\t\t<listItem>bar</listItem>         <ul><li>foo</li><p>xxx</p><li>bar</li></ul>\n *\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert\n * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n * @param {Object} data Additional information about the change.\n * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface.\n */\nexport function modelViewSplitOnInsert( evt, data, conversionApi ) {\n\tif ( data.item.name != 'listItem' ) {\n\t\tlet viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst lists = [];\n\n\t\t// Break multiple ULs/OLs if there are.\n\t\t//\n\t\t// Imagine following list:\n\t\t//\n\t\t// 1 --------\n\t\t//   1.1 --------\n\t\t//     1.1.1 --------\n\t\t//     1.1.2 --------\n\t\t//     1.1.3 --------\n\t\t//       1.1.3.1 --------\n\t\t//   1.2 --------\n\t\t//     1.2.1 --------\n\t\t// 2 --------\n\t\t//\n\t\t// Insert paragraph after item 1.1.1:\n\t\t//\n\t\t// 1 --------\n\t\t//   1.1 --------\n\t\t//     1.1.1 --------\n\t\t//\n\t\t// Lorem ipsum.\n\t\t//\n\t\t//     1.1.2 --------\n\t\t//     1.1.3 --------\n\t\t//       1.1.3.1 --------\n\t\t//   1.2 --------\n\t\t//     1.2.1 --------\n\t\t// 2 --------\n\t\t//\n\t\t// In this case 1.1.2 has to become beginning of a new list.\n\t\t// We need to break list before 1.1.2 (obvious), then we need to break list also before 1.2.\n\t\t// Then we need to move those broken pieces one after another and merge:\n\t\t//\n\t\t// 1 --------\n\t\t//   1.1 --------\n\t\t//     1.1.1 --------\n\t\t//\n\t\t// Lorem ipsum.\n\t\t//\n\t\t// 1.1.2 --------\n\t\t//   1.1.3 --------\n\t\t//     1.1.3.1 --------\n\t\t// 1.2 --------\n\t\t//   1.2.1 --------\n\t\t// 2 --------\n\t\t//\n\t\twhile ( viewPosition.parent.name == 'ul' || viewPosition.parent.name == 'ol' ) {\n\t\t\tviewPosition = viewWriter.breakContainer( viewPosition );\n\n\t\t\tif ( viewPosition.parent.name != 'li' ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Remove lists that are after inserted element.\n\t\t\t// They will be brought back later, below the inserted element.\n\t\t\tconst removeStart = viewPosition;\n\t\t\tconst removeEnd = viewWriter.createPositionAt( viewPosition.parent, 'end' );\n\n\t\t\t// Don't remove if there is nothing to remove.\n\t\t\tif ( !removeStart.isEqual( removeEnd ) ) {\n\t\t\t\tconst removed = viewWriter.remove( viewWriter.createRange( removeStart, removeEnd ) );\n\t\t\t\tlists.push( removed );\n\t\t\t}\n\n\t\t\tviewPosition = viewWriter.createPositionAfter( viewPosition.parent );\n\t\t}\n\n\t\t// Bring back removed lists.\n\t\tif ( lists.length > 0 ) {\n\t\t\tfor ( let i = 0; i < lists.length; i++ ) {\n\t\t\t\tconst previousList = viewPosition.nodeBefore;\n\t\t\t\tconst insertedRange = viewWriter.insert( viewPosition, lists[ i ] );\n\t\t\t\tviewPosition = insertedRange.end;\n\n\t\t\t\t// Don't merge first list! We want a split in that place (this is why this converter is introduced).\n\t\t\t\tif ( i > 0 ) {\n\t\t\t\t\tconst mergePos = mergeViewLists( viewWriter, previousList, previousList.nextSibling );\n\n\t\t\t\t\t// If `mergePos` is in `previousList` it means that the lists got merged.\n\t\t\t\t\t// In this case, we need to fix insert position.\n\t\t\t\t\tif ( mergePos && mergePos.parent == previousList ) {\n\t\t\t\t\t\tviewPosition.offset--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Merge last inserted list with element after it.\n\t\t\tmergeViewLists( viewWriter, viewPosition.nodeBefore, viewPosition.nodeAfter );\n\t\t}\n\t}\n}\n\n/**\n * A special model-to-view converter introduced by the {@link module:list/list~List list feature}. This converter takes care of\n * merging view lists after something is removed or moved from near them.\n *\n * Example:\n *\n *\t\t// Model:                        // View:\n *\t\t<listItem>foo</listItem>         <ul><li>foo</li></ul>\n *\t\t<paragraph>xxx</paragraph>       <p>xxx</p>\n *\t\t<listItem>bar</listItem>         <ul><li>bar</li></ul>\n *\n *\t\t// After change:                 // Correct view guaranteed by this converter:\n *\t\t<listItem>foo</listItem>         <ul>\n *\t\t<listItem>bar</listItem>             <li>foo</li>\n *\t\t                                     <li>bar</li>\n *\t\t                                 </ul>\n *\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:remove\n * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n * @param {Object} data Additional information about the change.\n * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface.\n */\nexport function modelViewMergeAfter( evt, data, conversionApi ) {\n\tconst viewPosition = conversionApi.mapper.toViewPosition( data.position );\n\tconst viewItemPrev = viewPosition.nodeBefore;\n\tconst viewItemNext = viewPosition.nodeAfter;\n\n\t// Merge lists if something (remove, move) was done from inside of list.\n\t// Merging will be done only if both items are view lists of the same type.\n\t// The check is done inside the helper function.\n\tmergeViewLists( conversionApi.writer, viewItemPrev, viewItemNext );\n}\n\n/**\n * A view-to-model converter that converts `<li>` view elements into `listItem` model elements.\n *\n * To set correct values of the `listType` and `listIndent` attributes the converter:\n * * checks `<li>`'s parent,\n * * stores and increases the `conversionApi.store.indent` value when `<li>`'s sub-items are converted.\n *\n * @see module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\n * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n * @param {Object} data An object containing conversion input and a placeholder for conversion output and possibly other values.\n * @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion interface to be used by the callback.\n */\nexport function viewModelConverter( evt, data, conversionApi ) {\n\tif ( conversionApi.consumable.consume( data.viewItem, { name: true } ) ) {\n\t\tconst writer = conversionApi.writer;\n\t\tconst conversionStore = this.conversionApi.store;\n\n\t\t// 1. Create `listItem` model element.\n\t\tconst listItem = writer.createElement( 'listItem' );\n\n\t\t// 2. Handle `listItem` model element attributes.\n\t\tconversionStore.indent = conversionStore.indent || 0;\n\t\twriter.setAttribute( 'listIndent', conversionStore.indent, listItem );\n\n\t\t// Set 'bulleted' as default. If this item is pasted into a context,\n\t\tconst type = data.viewItem.parent && data.viewItem.parent.name == 'ol' ? 'numbered' : 'bulleted';\n\t\twriter.setAttribute( 'listType', type, listItem );\n\n\t\t// `listItem`s created recursively should have bigger indent.\n\t\tconversionStore.indent++;\n\n\t\t// Try to find allowed parent for list item.\n\t\tconst splitResult = conversionApi.splitToAllowedParent( listItem, data.modelCursor );\n\n\t\t// When there is no allowed parent it means that list item cannot be converted at current model position\n\t\t// and in any of position ancestors.\n\t\tif ( !splitResult ) {\n\t\t\treturn;\n\t\t}\n\n\t\twriter.insert( listItem, splitResult.position );\n\n\t\tconst nextPosition = viewToModelListItemChildrenConverter( listItem, data.viewItem.getChildren(), conversionApi );\n\n\t\tconversionStore.indent--;\n\n\t\t// Result range starts before the first item and ends after the last.\n\t\tdata.modelRange = writer.createRange( data.modelCursor, nextPosition );\n\n\t\t// When `data.modelCursor` parent had to be split to insert list item...\n\t\tif ( splitResult.cursorParent ) {\n\t\t\t// Continue conversion in the split element.\n\t\t\tdata.modelCursor = writer.createPositionAt( splitResult.cursorParent, 0 );\n\t\t} else {\n\t\t\t// Otherwise continue conversion after the last list item.\n\t\t\tdata.modelCursor = data.modelRange.end;\n\t\t}\n\t}\n}\n\n/**\n * A view-to-model converter for `<ul>` and `<ol>` view elements that cleans the input view of garbage.\n * This is mostly to clean whitespaces from between `<li>` view elements inside the view list element, however, also\n * incorrect data can be cleared if the view was incorrect.\n *\n * @see module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\n * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n * @param {Object} data An object containing conversion input and a placeholder for conversion output and possibly other values.\n * @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion interface to be used by the callback.\n */\nexport function cleanList( evt, data, conversionApi ) {\n\tif ( conversionApi.consumable.test( data.viewItem, { name: true } ) ) {\n\t\t// Caching children because when we start removing them iterating fails.\n\t\tconst children = Array.from( data.viewItem.getChildren() );\n\n\t\tfor ( const child of children ) {\n\t\t\tif ( !child.is( 'li' ) ) {\n\t\t\t\tchild._remove();\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * A view-to-model converter for `<li>` elements that cleans whitespace formatting from the input view.\n *\n * @see module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\n * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n * @param {Object} data An object containing conversion input and a placeholder for conversion output and possibly other values.\n * @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion interface to be used by the callback.\n */\nexport function cleanListItem( evt, data, conversionApi ) {\n\tif ( conversionApi.consumable.test( data.viewItem, { name: true } ) ) {\n\t\tif ( data.viewItem.childCount === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst children = [ ...data.viewItem.getChildren() ];\n\n\t\tlet foundList = false;\n\t\tlet firstNode = true;\n\n\t\tfor ( const child of children ) {\n\t\t\tif ( foundList && !child.is( 'ul' ) && !child.is( 'ol' ) ) {\n\t\t\t\tchild._remove();\n\t\t\t}\n\n\t\t\tif ( child.is( 'text' ) ) {\n\t\t\t\t// If this is the first node and it's a text node, left-trim it.\n\t\t\t\tif ( firstNode ) {\n\t\t\t\t\tchild._data = child.data.replace( /^\\s+/, '' );\n\t\t\t\t}\n\n\t\t\t\t// If this is the last text node before <ul> or <ol>, right-trim it.\n\t\t\t\tif ( !child.nextSibling || ( child.nextSibling.is( 'ul' ) || child.nextSibling.is( 'ol' ) ) ) {\n\t\t\t\t\tchild._data = child.data.replace( /\\s+$/, '' );\n\t\t\t\t}\n\t\t\t} else if ( child.is( 'ul' ) || child.is( 'ol' ) ) {\n\t\t\t\t// If this is a <ul> or <ol>, do not process it, just mark that we already visited list element.\n\t\t\t\tfoundList = true;\n\t\t\t}\n\n\t\t\tfirstNode = false;\n\t\t}\n\t}\n}\n\n/**\n * Returns callback for model position to view position mapping for {@link module:engine/conversion/mapper~Mapper}. The callback fixes\n * positions between `listItem` elements that would be incorrectly mapped because of how list items are represented in model\n * and view.\n *\n * @see module:engine/conversion/mapper~Mapper#event:modelToViewPosition\n * @param {module:engine/view/view~View} view A view instance.\n * @returns {Function}\n */\nexport function modelToViewPosition( view ) {\n\treturn ( evt, data ) => {\n\t\tif ( data.isPhantom ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst modelItem = data.modelPosition.nodeBefore;\n\n\t\tif ( modelItem && modelItem.is( 'listItem' ) ) {\n\t\t\tconst viewItem = data.mapper.toViewElement( modelItem );\n\t\t\tconst topmostViewList = viewItem.getAncestors().find( element => element.is( 'ul' ) || element.is( 'ol' ) );\n\t\t\tconst walker = view.createPositionAt( viewItem, 0 ).getWalker();\n\n\t\t\tfor ( const value of walker ) {\n\t\t\t\tif ( value.type == 'elementStart' && value.item.is( 'li' ) ) {\n\t\t\t\t\tdata.viewPosition = value.previousPosition;\n\n\t\t\t\t\tbreak;\n\t\t\t\t} else if ( value.type == 'elementEnd' && value.item == topmostViewList ) {\n\t\t\t\t\tdata.viewPosition = value.nextPosition;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * The callback for view position to model position mapping for {@link module:engine/conversion/mapper~Mapper}. The callback fixes\n * positions between `<li>` elements that would be incorrectly mapped because of how list items are represented in model\n * and view.\n *\n * @see module:engine/conversion/mapper~Mapper#event:viewToModelPosition\n * @param {module:engine/model/model~Model} model Model instance.\n * @returns {Function} Returns a conversion callback.\n */\nexport function viewToModelPosition( model ) {\n\treturn ( evt, data ) => {\n\t\tconst viewPos = data.viewPosition;\n\t\tconst viewParent = viewPos.parent;\n\t\tconst mapper = data.mapper;\n\n\t\tif ( viewParent.name == 'ul' || viewParent.name == 'ol' ) {\n\t\t\t// Position is directly in <ul> or <ol>.\n\t\t\tif ( !viewPos.isAtEnd ) {\n\t\t\t\t// If position is not at the end, it must be before <li>.\n\t\t\t\t// Get that <li>, map it to `listItem` and set model position before that `listItem`.\n\t\t\t\tconst modelNode = mapper.toModelElement( viewPos.nodeAfter );\n\n\t\t\t\tdata.modelPosition = model.createPositionBefore( modelNode );\n\t\t\t} else {\n\t\t\t\t// Position is at the end of <ul> or <ol>, so there is no <li> after it to be mapped.\n\t\t\t\t// There is <li> before the position, but we cannot just map it to `listItem` and set model position after it,\n\t\t\t\t// because that <li> may contain nested items.\n\t\t\t\t// We will check \"model length\" of that <li>, in other words - how many `listItem`s are in that <li>.\n\t\t\t\tconst modelNode = mapper.toModelElement( viewPos.nodeBefore );\n\t\t\t\tconst modelLength = mapper.getModelLength( viewPos.nodeBefore );\n\n\t\t\t\t// Then we get model position before mapped `listItem` and shift it accordingly.\n\t\t\t\tdata.modelPosition = model.createPositionBefore( modelNode ).getShiftedBy( modelLength );\n\t\t\t}\n\n\t\t\tevt.stop();\n\t\t} else if (\n\t\t\tviewParent.name == 'li' &&\n\t\t\tviewPos.nodeBefore &&\n\t\t\t( viewPos.nodeBefore.name == 'ul' || viewPos.nodeBefore.name == 'ol' )\n\t\t) {\n\t\t\t// In most cases when view position is in <li> it is in text and this is a correct position.\n\t\t\t// However, if position is after <ul> or <ol> we have to fix it -- because in model <ul>/<ol> are not in the `listItem`.\n\t\t\tconst modelNode = mapper.toModelElement( viewParent );\n\n\t\t\t// Check all <ul>s and <ol>s that are in the <li> but before mapped position.\n\t\t\t// Get model length of those elements and then add it to the offset of `listItem` mapped to the original <li>.\n\t\t\tlet modelLength = 1; // Starts from 1 because the original <li> has to be counted in too.\n\t\t\tlet viewList = viewPos.nodeBefore;\n\n\t\t\twhile ( viewList && ( viewList.is( 'ul' ) || viewList.is( 'ol' ) ) ) {\n\t\t\t\tmodelLength += mapper.getModelLength( viewList );\n\n\t\t\t\tviewList = viewList.previousSibling;\n\t\t\t}\n\n\t\t\tdata.modelPosition = model.createPositionBefore( modelNode ).getShiftedBy( modelLength );\n\n\t\t\tevt.stop();\n\t\t}\n\t};\n}\n\n/**\n * Post-fixer that reacts to changes on document and fixes incorrect model states.\n *\n * In an example below, there is a correct list structure.\n * Then the middle element will be removed so the list structure will become incorrect:\n *\n *\t\t<listItem listType=\"bulleted\" listIndent=0>Item 1</listItem>\n *\t\t<listItem listType=\"bulleted\" listIndent=1>Item 2</listItem>   <--- this is removed.\n *\t\t<listItem listType=\"bulleted\" listIndent=2>Item 3</listItem>\n *\n * List structure after the middle element removed:\n *\n * \t\t<listItem listType=\"bulleted\" listIndent=0>Item 1</listItem>\n *\t\t<listItem listType=\"bulleted\" listIndent=2>Item 3</listItem>\n *\n * Should become:\n *\n *\t\t<listItem listType=\"bulleted\" listIndent=0>Item 1</listItem>\n *\t\t<listItem listType=\"bulleted\" listIndent=1>Item 3</listItem>   <--- note that indent got post-fixed.\n *\n * @param {module:engine/model/model~Model} model The data model.\n * @param {module:engine/model/writer~Writer} writer The writer to do changes with.\n * @returns {Boolean} `true` if any change has been applied, `false` otherwise.\n */\nexport function modelChangePostFixer( model, writer ) {\n\tconst changes = model.document.differ.getChanges();\n\tconst itemToListHead = new Map();\n\n\tlet applied = false;\n\n\tfor ( const entry of changes ) {\n\t\tif ( entry.type == 'insert' && entry.name == 'listItem' ) {\n\t\t\t_addListToFix( entry.position );\n\t\t} else if ( entry.type == 'insert' && entry.name != 'listItem' ) {\n\t\t\tif ( entry.name != '$text' ) {\n\t\t\t\t// In case of renamed element.\n\t\t\t\tconst item = entry.position.nodeAfter;\n\n\t\t\t\tif ( item.hasAttribute( 'listIndent' ) ) {\n\t\t\t\t\twriter.removeAttribute( 'listIndent', item );\n\n\t\t\t\t\tapplied = true;\n\t\t\t\t}\n\n\t\t\t\tif ( item.hasAttribute( 'listType' ) ) {\n\t\t\t\t\twriter.removeAttribute( 'listType', item );\n\n\t\t\t\t\tapplied = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst posAfter = entry.position.getShiftedBy( entry.length );\n\n\t\t\t_addListToFix( posAfter );\n\t\t} else if ( entry.type == 'remove' && entry.name == 'listItem' ) {\n\t\t\t_addListToFix( entry.position );\n\t\t} else if ( entry.type == 'attribute' && entry.attributeKey == 'listIndent' ) {\n\t\t\t_addListToFix( entry.range.start );\n\t\t} else if ( entry.type == 'attribute' && entry.attributeKey == 'listType' ) {\n\t\t\t_addListToFix( entry.range.start );\n\t\t}\n\t}\n\n\tfor ( const listHead of itemToListHead.values() ) {\n\t\t_fixListIndents( listHead );\n\t\t_fixListTypes( listHead );\n\t}\n\n\treturn applied;\n\n\tfunction _addListToFix( position ) {\n\t\tconst prev = position.nodeBefore;\n\n\t\tif ( !prev || !prev.is( 'listItem' ) ) {\n\t\t\tconst item = position.nodeAfter;\n\n\t\t\tif ( item && item.is( 'listItem' ) ) {\n\t\t\t\titemToListHead.set( item, item );\n\t\t\t}\n\t\t} else {\n\t\t\tlet listHead = prev;\n\n\t\t\tif ( itemToListHead.has( listHead ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twhile ( listHead.previousSibling && listHead.previousSibling.is( 'listItem' ) ) {\n\t\t\t\tlistHead = listHead.previousSibling;\n\n\t\t\t\tif ( itemToListHead.has( listHead ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\titemToListHead.set( position.nodeBefore, listHead );\n\t\t}\n\t}\n\n\tfunction _fixListIndents( item ) {\n\t\tlet maxIndent = 0;\n\t\tlet fixBy = null;\n\n\t\twhile ( item && item.is( 'listItem' ) ) {\n\t\t\tconst itemIndent = item.getAttribute( 'listIndent' );\n\n\t\t\tif ( itemIndent > maxIndent ) {\n\t\t\t\tlet newIndent;\n\n\t\t\t\tif ( fixBy === null ) {\n\t\t\t\t\tfixBy = itemIndent - maxIndent;\n\t\t\t\t\tnewIndent = maxIndent;\n\t\t\t\t} else {\n\t\t\t\t\tif ( fixBy > itemIndent ) {\n\t\t\t\t\t\tfixBy = itemIndent;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewIndent = itemIndent - fixBy;\n\t\t\t\t}\n\n\t\t\t\twriter.setAttribute( 'listIndent', newIndent, item );\n\n\t\t\t\tapplied = true;\n\t\t\t} else {\n\t\t\t\tfixBy = null;\n\t\t\t\tmaxIndent = item.getAttribute( 'listIndent' ) + 1;\n\t\t\t}\n\n\t\t\titem = item.nextSibling;\n\t\t}\n\t}\n\n\tfunction _fixListTypes( item ) {\n\t\tlet typesStack = [];\n\t\tlet prev = null;\n\n\t\twhile ( item && item.is( 'listItem' ) ) {\n\t\t\tconst itemIndent = item.getAttribute( 'listIndent' );\n\n\t\t\tif ( prev && prev.getAttribute( 'listIndent' ) > itemIndent ) {\n\t\t\t\ttypesStack = typesStack.slice( 0, itemIndent + 1 );\n\t\t\t}\n\n\t\t\tif ( itemIndent != 0 ) {\n\t\t\t\tif ( typesStack[ itemIndent ] ) {\n\t\t\t\t\tconst type = typesStack[ itemIndent ];\n\n\t\t\t\t\tif ( item.getAttribute( 'listType' ) != type ) {\n\t\t\t\t\t\twriter.setAttribute( 'listType', type, item );\n\n\t\t\t\t\t\tapplied = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttypesStack[ itemIndent ] = item.getAttribute( 'listType' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprev = item;\n\t\t\titem = item.nextSibling;\n\t\t}\n\t}\n}\n\n/**\n * A fixer for pasted content that includes list items.\n *\n * It fixes indentation of pasted list items so the pasted items match correctly to the context they are pasted into.\n *\n * Example:\n *\n *\t\t<listItem listType=\"bulleted\" listIndent=0>A</listItem>\n *\t\t<listItem listType=\"bulleted\" listIndent=1>B^</listItem>\n *\t\t// At ^ paste:  <listItem listType=\"bulleted\" listIndent=4>X</listItem>\n *\t\t//              <listItem listType=\"bulleted\" listIndent=5>Y</listItem>\n *\t\t<listItem listType=\"bulleted\" listIndent=2>C</listItem>\n *\n * Should become:\n *\n *\t\t<listItem listType=\"bulleted\" listIndent=0>A</listItem>\n *\t\t<listItem listType=\"bulleted\" listIndent=1>BX</listItem>\n *\t\t<listItem listType=\"bulleted\" listIndent=2>Y/listItem>\n *\t\t<listItem listType=\"bulleted\" listIndent=2>C</listItem>\n *\n * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n * @param {Array} args Arguments of {@link module:engine/model/model~Model#insertContent}.\n */\nexport function modelIndentPasteFixer( evt, [ content, selectable ] ) {\n\t// Check whether inserted content starts from a `listItem`. If it does not, it means that there are some other\n\t// elements before it and there is no need to fix indents, because even if we insert that content into a list,\n\t// that list will be broken.\n\t// Note: we also need to handle singular elements because inserting item with indent 0 into 0,1,[],2\n\t// would create incorrect model.\n\tlet item = content.is( 'documentFragment' ) ? content.getChild( 0 ) : content;\n\n\tlet selection;\n\n\tif ( !selectable ) {\n\t\tselection = this.document.selection;\n\t} else {\n\t\tselection = this.createSelection( selectable );\n\t}\n\n\tif ( item && item.is( 'listItem' ) ) {\n\t\t// Get a reference list item. Inserted list items will be fixed according to that item.\n\t\tconst pos = selection.getFirstPosition();\n\t\tlet refItem = null;\n\n\t\tif ( pos.parent.is( 'listItem' ) ) {\n\t\t\trefItem = pos.parent;\n\t\t} else if ( pos.nodeBefore && pos.nodeBefore.is( 'listItem' ) ) {\n\t\t\trefItem = pos.nodeBefore;\n\t\t}\n\n\t\t// If there is `refItem` it means that we do insert list items into an existing list.\n\t\tif ( refItem ) {\n\t\t\t// First list item in `data` has indent equal to 0 (it is a first list item). It should have indent equal\n\t\t\t// to the indent of reference item. We have to fix the first item and all of it's children and following siblings.\n\t\t\t// Indent of all those items has to be adjusted to reference item.\n\t\t\tconst indentChange = refItem.getAttribute( 'listIndent' );\n\n\t\t\t// Fix only if there is anything to fix.\n\t\t\tif ( indentChange > 0 ) {\n\t\t\t\t// Adjust indent of all \"first\" list items in inserted data.\n\t\t\t\twhile ( item && item.is( 'listItem' ) ) {\n\t\t\t\t\titem._setAttribute( 'listIndent', item.getAttribute( 'listIndent' ) + indentChange );\n\n\t\t\t\t\titem = item.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Helper function that creates a `<ul><li></li></ul>` or (`<ol>`) structure out of given `modelItem` model `listItem` element.\n// Then, it binds created view list item (<li>) with model `listItem` element.\n// The function then returns created view list item (<li>).\nfunction generateLiInUl( modelItem, conversionApi ) {\n\tconst mapper = conversionApi.mapper;\n\tconst viewWriter = conversionApi.writer;\n\tconst listType = modelItem.getAttribute( 'listType' ) == 'numbered' ? 'ol' : 'ul';\n\tconst viewItem = createViewListItemElement( viewWriter );\n\n\tconst viewList = viewWriter.createContainerElement( listType, null );\n\tviewWriter.insert( viewWriter.createPositionAt( viewList, 0 ), viewItem );\n\n\tmapper.bindElements( modelItem, viewItem );\n\n\treturn viewItem;\n}\n\n// Helper function that converts children of a given `<li>` view element into corresponding model elements.\n// The function maintains proper order of elements if model `listItem` is split during the conversion\n// due to block children conversion.\n//\n// @param {module:engine/model/element~Element} listItemModel List item model element to which converted children will be inserted.\n// @param {Iterable.<module:engine/view/node~Node>} viewChildren View elements which will be converted.\n// @param {module:engine/conversion/upcastdispatcher~UpcastConversionApi} conversionApi Conversion interface to be used by the callback.\n// @returns {module:engine/model/position~Position} Position on which next elements should be inserted after children conversion.\nfunction viewToModelListItemChildrenConverter( listItemModel, viewChildren, conversionApi ) {\n\tconst { writer, schema } = conversionApi;\n\n\t// A position after the last inserted `listItem`.\n\tlet nextPosition = writer.createPositionAfter( listItemModel );\n\n\t// Check all children of the converted `<li>`. At this point we assume there are no \"whitespace\" view text nodes\n\t// in view list, between view list items. This should be handled by `<ul>` and `<ol>` converters.\n\tfor ( const child of viewChildren ) {\n\t\tif ( child.name == 'ul' || child.name == 'ol' ) {\n\t\t\t// If the children is a list, we will insert its conversion result after currently handled `listItem`.\n\t\t\t// Then, next insertion position will be set after all the new list items (and maybe other elements if\n\t\t\t// something split list item).\n\t\t\t//\n\t\t\t// If this is a list, we expect that some `listItem`s and possibly other blocks will be inserted, however `.modelCursor`\n\t\t\t// should be set after last `listItem` (or block). This is why it feels safe to use it as `nextPosition`\n\t\t\tnextPosition = conversionApi.convertItem( child, nextPosition ).modelCursor;\n\t\t} else {\n\t\t\t// If this is not a list, try inserting content at the end of the currently handled `listItem`.\n\t\t\tconst result = conversionApi.convertItem( child, writer.createPositionAt( listItemModel, 'end' ) );\n\n\t\t\t// It may end up that the current `listItem` becomes split (if that content cannot be inside `listItem`). For example:\n\t\t\t//\n\t\t\t// <li><p>Foo</p></li>\n\t\t\t//\n\t\t\t// will be converted to:\n\t\t\t//\n\t\t\t// <listItem></listItem><paragraph>Foo</paragraph><listItem></listItem>\n\t\t\t//\n\t\t\tconst convertedChild = result.modelRange.start.nodeAfter;\n\t\t\tconst wasSplit = convertedChild && convertedChild.is( 'element' ) && !schema.checkChild( listItemModel, convertedChild.name );\n\n\t\t\tif ( wasSplit ) {\n\t\t\t\t// As `lastListItem` got split, we need to update it to the second part of the split `listItem` element.\n\t\t\t\t//\n\t\t\t\t// `modelCursor` should be set to a position where the conversion should continue. There are multiple possible scenarios\n\t\t\t\t// that may happen. Usually, `modelCursor` (marked as `#` below) would point to the second list item after conversion:\n\t\t\t\t//\n\t\t\t\t//\t\t`<li><p>Foo</p></li>` -> `<listItem></listItem><paragraph>Foo</paragraph><listItem>#</listItem>`\n\t\t\t\t//\n\t\t\t\t// However, in some cases, like auto-paragraphing, the position is placed at the end of the block element:\n\t\t\t\t//\n\t\t\t\t//\t\t`<li><div>Foo</div></li>` -> `<listItem></listItem><paragraph>Foo#</paragraph><listItem></listItem>`\n\t\t\t\t//\n\t\t\t\t// or after an element if another element broken auto-paragraphed element:\n\t\t\t\t//\n\t\t\t\t//\t\t`<li><div><h2>Foo</h2></div></li>` -> `<listItem></listItem><heading1>Foo</heading1>#<listItem></listItem>`\n\t\t\t\t//\n\t\t\t\t// We need to check for such cases and use proper list item and position based on it.\n\t\t\t\t//\n\t\t\t\tif ( result.modelCursor.parent.is( 'listItem' ) ) {\n\t\t\t\t\t// (1).\n\t\t\t\t\tlistItemModel = result.modelCursor.parent;\n\t\t\t\t} else {\n\t\t\t\t\t// (2), (3).\n\t\t\t\t\tlistItemModel = findNextListItem( result.modelCursor );\n\t\t\t\t}\n\n\t\t\t\tnextPosition = writer.createPositionAfter( listItemModel );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn nextPosition;\n}\n\n// Helper function that seeks for a next list item starting from given `startPosition`.\nfunction findNextListItem( startPosition ) {\n\tconst treeWalker = new TreeWalker( { startPosition } );\n\n\tlet value;\n\n\tdo {\n\t\tvalue = treeWalker.next();\n\t} while ( !value.value.item.is( 'listItem' ) );\n\n\treturn value.value.item;\n}\n\n// Helper function that seeks for a previous list item sibling of given model item which meets given criteria.\n// `options` object may contain one or more of given values (by default they are `false`):\n// `options.sameIndent` - whether sought sibling should have same indent (default = no),\n// `options.smallerIndent` - whether sought sibling should have smaller indent (default = no).\n// `options.listIndent` - the reference indent.\n// Either `options.sameIndent` or `options.smallerIndent` should be set to `true`.\nfunction getSiblingListItem( modelItem, options ) {\n\tconst sameIndent = !!options.sameIndent;\n\tconst smallerIndent = !!options.smallerIndent;\n\tconst indent = options.listIndent;\n\n\tlet item = modelItem;\n\n\twhile ( item && item.name == 'listItem' ) {\n\t\tconst itemIndent = item.getAttribute( 'listIndent' );\n\n\t\tif ( ( sameIndent && indent == itemIndent ) || ( smallerIndent && indent > itemIndent ) ) {\n\t\t\treturn item;\n\t\t}\n\n\t\titem = item.previousSibling;\n\t}\n\n\treturn null;\n}\n\n// Helper function that takes two parameters, that are expected to be view list elements, and merges them.\n// The merge happen only if both parameters are UL or OL elements.\nfunction mergeViewLists( viewWriter, firstList, secondList ) {\n\tif ( firstList && secondList && ( firstList.name == 'ul' || firstList.name == 'ol' ) && firstList.name == secondList.name ) {\n\t\treturn viewWriter.mergeContainers( viewWriter.createPositionAfter( firstList ) );\n\t}\n\n\treturn null;\n}\n\n// Helper function that takes model list item element `modelItem`, corresponding view list item element `injectedItem`\n// that is not added to the view and is inside a view list element (`ul` or `ol`) and is that's list only child.\n// The list is inserted at correct position (element breaking may be needed) and then merged with it's siblings.\n// See comments below to better understand the algorithm.\nfunction injectViewList( modelItem, injectedItem, conversionApi, model ) {\n\tconst injectedList = injectedItem.parent;\n\tconst mapper = conversionApi.mapper;\n\tconst viewWriter = conversionApi.writer;\n\n\t// Position where view list will be inserted.\n\tlet insertPosition = mapper.toViewPosition( model.createPositionBefore( modelItem ) );\n\n\t// 1. Find previous list item that has same or smaller indent. Basically we are looking for a first model item\n\t// that is \"parent\" or \"sibling\" of injected model item.\n\t// If there is no such list item, it means that injected list item is the first item in \"its list\".\n\tconst refItem = getSiblingListItem( modelItem.previousSibling, {\n\t\tsameIndent: true,\n\t\tsmallerIndent: true,\n\t\tlistIndent: modelItem.getAttribute( 'listIndent' )\n\t} );\n\tconst prevItem = modelItem.previousSibling;\n\n\tif ( refItem && refItem.getAttribute( 'listIndent' ) == modelItem.getAttribute( 'listIndent' ) ) {\n\t\t// There is a list item with same indent - we found same-level sibling.\n\t\t// Break the list after it. Inserted view item will be inserted in the broken space.\n\t\tconst viewItem = mapper.toViewElement( refItem );\n\t\tinsertPosition = viewWriter.breakContainer( viewWriter.createPositionAfter( viewItem ) );\n\t} else {\n\t\t// There is no list item with same indent. Check previous model item.\n\t\tif ( prevItem && prevItem.name == 'listItem' ) {\n\t\t\t// If it is a list item, it has to have lower indent.\n\t\t\t// It means that inserted item should be added to it as its nested item.\n\t\t\tinsertPosition = mapper.toViewPosition( model.createPositionAt( prevItem, 'end' ) );\n\t\t} else {\n\t\t\t// Previous item is not a list item (or does not exist at all).\n\t\t\t// Just map the position and insert the view item at mapped position.\n\t\t\tinsertPosition = mapper.toViewPosition( model.createPositionBefore( modelItem ) );\n\t\t}\n\t}\n\n\tinsertPosition = positionAfterUiElements( insertPosition );\n\n\t// Insert the view item.\n\tviewWriter.insert( insertPosition, injectedList );\n\n\t// 2. Handle possible children of injected model item.\n\tif ( prevItem && prevItem.name == 'listItem' ) {\n\t\tconst prevView = mapper.toViewElement( prevItem );\n\n\t\tconst walkerBoundaries = viewWriter.createRange( viewWriter.createPositionAt( prevView, 0 ), insertPosition );\n\t\tconst walker = walkerBoundaries.getWalker( { ignoreElementEnd: true } );\n\n\t\tfor ( const value of walker ) {\n\t\t\tif ( value.item.is( 'li' ) ) {\n\t\t\t\tconst breakPosition = viewWriter.breakContainer( viewWriter.createPositionBefore( value.item ) );\n\t\t\t\tconst viewList = value.item.parent;\n\n\t\t\t\tconst targetPosition = viewWriter.createPositionAt( injectedItem, 'end' );\n\t\t\t\tmergeViewLists( viewWriter, targetPosition.nodeBefore, targetPosition.nodeAfter );\n\t\t\t\tviewWriter.move( viewWriter.createRangeOn( viewList ), targetPosition );\n\n\t\t\t\twalker.position = breakPosition;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst nextViewList = injectedList.nextSibling;\n\n\t\tif ( nextViewList && ( nextViewList.is( 'ul' ) || nextViewList.is( 'ol' ) ) ) {\n\t\t\tlet lastSubChild = null;\n\n\t\t\tfor ( const child of nextViewList.getChildren() ) {\n\t\t\t\tconst modelChild = mapper.toModelElement( child );\n\n\t\t\t\tif ( modelChild && modelChild.getAttribute( 'listIndent' ) > modelItem.getAttribute( 'listIndent' ) ) {\n\t\t\t\t\tlastSubChild = child;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( lastSubChild ) {\n\t\t\t\tviewWriter.breakContainer( viewWriter.createPositionAfter( lastSubChild ) );\n\t\t\t\tviewWriter.move( viewWriter.createRangeOn( lastSubChild.parent ), viewWriter.createPositionAt( injectedItem, 'end' ) );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Merge inserted view list with its possible neighbour lists.\n\tmergeViewLists( viewWriter, injectedList, injectedList.nextSibling );\n\tmergeViewLists( viewWriter, injectedList.previousSibling, injectedList );\n}\n\n// Helper function that takes all children of given `viewRemovedItem` and moves them in a correct place, according\n// to other given parameters.\nfunction hoistNestedLists( nextIndent, modelRemoveStartPosition, viewRemoveStartPosition, viewRemovedItem, conversionApi, model ) {\n\t// Find correct previous model list item element.\n\t// The element has to have either same or smaller indent than given reference indent.\n\t// This will be the model element which will get nested items (if it has smaller indent) or sibling items (if it has same indent).\n\t// Keep in mind that such element might not be found, if removed item was the first item.\n\tconst prevModelItem = getSiblingListItem( modelRemoveStartPosition.nodeBefore, {\n\t\tsameIndent: true,\n\t\tsmallerIndent: true,\n\t\tlistIndent: nextIndent,\n\t\tfoo: 'b'\n\t} );\n\n\tconst mapper = conversionApi.mapper;\n\tconst viewWriter = conversionApi.writer;\n\n\t// Indent of found element or `null` if the element has not been found.\n\tconst prevIndent = prevModelItem ? prevModelItem.getAttribute( 'listIndent' ) : null;\n\n\tlet insertPosition;\n\n\tif ( !prevModelItem ) {\n\t\t// If element has not been found, simply insert lists at the position where the removed item was:\n\t\t//\n\t\t// Lorem ipsum.\n\t\t// 1 --------           <--- this is removed, no previous list item, put nested items in place of removed item.\n\t\t//   1.1 --------       <--- this is reference indent.\n\t\t//     1.1.1 --------\n\t\t//     1.1.2 --------\n\t\t//   1.2 --------\n\t\t//\n\t\t// Becomes:\n\t\t//\n\t\t// Lorem ipsum.\n\t\t// 1.1 --------\n\t\t//   1.1.1 --------\n\t\t//   1.1.2 --------\n\t\t// 1.2 --------\n\t\tinsertPosition = viewRemoveStartPosition;\n\t} else if ( prevIndent == nextIndent ) {\n\t\t// If element has been found and has same indent as reference indent it means that nested items should\n\t\t// become siblings of found element:\n\t\t//\n\t\t// 1 --------\n\t\t//   1.1 --------\n\t\t//   1.2 --------       <--- this is `prevModelItem`.\n\t\t// 2 --------           <--- this is removed, previous list item has indent same as reference indent.\n\t\t//   2.1 --------       <--- this is reference indent, this and 2.2 should become siblings of 1.2.\n\t\t//   2.2 --------\n\t\t//\n\t\t// Becomes:\n\t\t//\n\t\t// 1 --------\n\t\t//   1.1 --------\n\t\t//   1.2 --------\n\t\t//   2.1 --------\n\t\t//   2.2 --------\n\t\tconst prevViewList = mapper.toViewElement( prevModelItem ).parent;\n\t\tinsertPosition = viewWriter.createPositionAfter( prevViewList );\n\t} else {\n\t\t// If element has been found and has smaller indent as reference indent it means that nested items\n\t\t// should become nested items of found item:\n\t\t//\n\t\t// 1 --------           <--- this is `prevModelItem`.\n\t\t//   1.1 --------       <--- this is removed, previous list item has indent smaller than reference indent.\n\t\t//     1.1.1 --------   <--- this is reference indent, this and 1.1.1 should become nested items of 1.\n\t\t//     1.1.2 --------\n\t\t//   1.2 --------\n\t\t//\n\t\t// Becomes:\n\t\t//\n\t\t// 1 --------\n\t\t//   1.1.1 --------\n\t\t//   1.1.2 --------\n\t\t//   1.2 --------\n\t\t//\n\t\t// Note: in this case 1.1.1 have indent 2 while 1 have indent 0. In model that should not be possible,\n\t\t// because following item may have indent bigger only by one. But this is fixed by postfixer.\n\t\tconst modelPosition = model.createPositionAt( prevModelItem, 'end' );\n\t\tinsertPosition = mapper.toViewPosition( modelPosition );\n\t}\n\n\tinsertPosition = positionAfterUiElements( insertPosition );\n\n\t// Handle multiple lists. This happens if list item has nested numbered and bulleted lists. Following lists\n\t// are inserted after the first list (no need to recalculate insertion position for them).\n\tfor ( const child of [ ...viewRemovedItem.getChildren() ] ) {\n\t\tif ( child.is( 'ul' ) || child.is( 'ol' ) ) {\n\t\t\tinsertPosition = viewWriter.move( viewWriter.createRangeOn( child ), insertPosition ).end;\n\n\t\t\tmergeViewLists( viewWriter, child, child.nextSibling );\n\t\t\tmergeViewLists( viewWriter, child.previousSibling, child );\n\t\t}\n\t}\n}\n\n// Helper function that for given `view.Position`, returns a `view.Position` that is after all `view.UIElement`s that\n// are after given position.\n// For example:\n// <container:p>foo^<ui:span></ui:span><ui:span></ui:span>bar</contain:p>\n// For position ^, a position before \"bar\" will be returned.\nfunction positionAfterUiElements( viewPosition ) {\n\treturn viewPosition.getLastMatchingPosition( value => value.item.is( 'uiElement' ) );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module list/listediting\n */\n\nimport ListCommand from './listcommand';\nimport IndentCommand from './indentcommand';\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\n\nimport {\n\tcleanList,\n\tcleanListItem,\n\tmodelViewInsertion,\n\tmodelViewChangeType,\n\tmodelViewMergeAfter,\n\tmodelViewRemove,\n\tmodelViewSplitOnInsert,\n\tmodelViewChangeIndent,\n\tmodelChangePostFixer,\n\tmodelIndentPasteFixer,\n\tviewModelConverter,\n\tmodelToViewPosition,\n\tviewToModelPosition\n} from './converters';\n\n/**\n * The engine of the list feature. It handles creating, editing and removing lists and list items.\n *\n * It registers the `'numberedList'`, `'bulletedList'`, `'indentList'` and `'outdentList'` commands.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ListEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ Paragraph ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\t// Schema.\n\t\t// Note: in case `$block` will ever be allowed in `listItem`, keep in mind that this feature\n\t\t// uses `Selection#getSelectedBlocks()` without any additional processing to obtain all selected list items.\n\t\t// If there are blocks allowed inside list item, algorithms using `getSelectedBlocks()` will have to be modified.\n\t\teditor.model.schema.register( 'listItem', {\n\t\t\tinheritAllFrom: '$block',\n\t\t\tallowAttributes: [ 'listType', 'listIndent' ]\n\t\t} );\n\n\t\t// Converters.\n\t\tconst data = editor.data;\n\t\tconst editing = editor.editing;\n\n\t\teditor.model.document.registerPostFixer( writer => modelChangePostFixer( editor.model, writer ) );\n\n\t\tediting.mapper.registerViewToModelLength( 'li', getViewListItemLength );\n\t\tdata.mapper.registerViewToModelLength( 'li', getViewListItemLength );\n\n\t\tediting.mapper.on( 'modelToViewPosition', modelToViewPosition( editing.view ) );\n\t\tediting.mapper.on( 'viewToModelPosition', viewToModelPosition( editor.model ) );\n\t\tdata.mapper.on( 'modelToViewPosition', modelToViewPosition( editing.view ) );\n\n\t\tediting.downcastDispatcher.on( 'insert', modelViewSplitOnInsert, { priority: 'high' } );\n\t\tediting.downcastDispatcher.on( 'insert:listItem', modelViewInsertion( editor.model ) );\n\t\tdata.downcastDispatcher.on( 'insert', modelViewSplitOnInsert, { priority: 'high' } );\n\t\tdata.downcastDispatcher.on( 'insert:listItem', modelViewInsertion( editor.model ) );\n\n\t\tediting.downcastDispatcher.on( 'attribute:listType:listItem', modelViewChangeType );\n\t\tdata.downcastDispatcher.on( 'attribute:listType:listItem', modelViewChangeType );\n\t\tediting.downcastDispatcher.on( 'attribute:listIndent:listItem', modelViewChangeIndent( editor.model ) );\n\t\tdata.downcastDispatcher.on( 'attribute:listIndent:listItem', modelViewChangeIndent( editor.model ) );\n\n\t\tediting.downcastDispatcher.on( 'remove:listItem', modelViewRemove( editor.model ) );\n\t\tediting.downcastDispatcher.on( 'remove', modelViewMergeAfter, { priority: 'low' } );\n\t\tdata.downcastDispatcher.on( 'remove:listItem', modelViewRemove( editor.model ) );\n\t\tdata.downcastDispatcher.on( 'remove', modelViewMergeAfter, { priority: 'low' } );\n\n\t\tdata.upcastDispatcher.on( 'element:ul', cleanList, { priority: 'high' } );\n\t\tdata.upcastDispatcher.on( 'element:ol', cleanList, { priority: 'high' } );\n\t\tdata.upcastDispatcher.on( 'element:li', cleanListItem, { priority: 'high' } );\n\t\tdata.upcastDispatcher.on( 'element:li', viewModelConverter );\n\n\t\t// Fix indentation of pasted items.\n\t\teditor.model.on( 'insertContent', modelIndentPasteFixer, { priority: 'high' } );\n\n\t\t// Register commands for numbered and bulleted list.\n\t\teditor.commands.add( 'numberedList', new ListCommand( editor, 'numbered' ) );\n\t\teditor.commands.add( 'bulletedList', new ListCommand( editor, 'bulleted' ) );\n\n\t\t// Register commands for indenting.\n\t\teditor.commands.add( 'indentList', new IndentCommand( editor, 'forward' ) );\n\t\teditor.commands.add( 'outdentList', new IndentCommand( editor, 'backward' ) );\n\n\t\tconst viewDocument = this.editor.editing.view.document;\n\n\t\t// Overwrite default Enter key behavior.\n\t\t// If Enter key is pressed with selection collapsed in empty list item, outdent it instead of breaking it.\n\t\tthis.listenTo( viewDocument, 'enter', ( evt, data ) => {\n\t\t\tconst doc = this.editor.model.document;\n\t\t\tconst positionParent = doc.selection.getLastPosition().parent;\n\n\t\t\tif ( doc.selection.isCollapsed && positionParent.name == 'listItem' && positionParent.isEmpty ) {\n\t\t\t\tthis.editor.execute( 'outdentList' );\n\n\t\t\t\tdata.preventDefault();\n\t\t\t\tevt.stop();\n\t\t\t}\n\t\t} );\n\n\t\t// Overwrite default Backspace key behavior.\n\t\t// If Backspace key is pressed with selection collapsed on first position in first list item, outdent it. #83\n\t\tthis.listenTo( viewDocument, 'delete', ( evt, data ) => {\n\t\t\t// Check conditions from those that require less computations like those immediately available.\n\t\t\tif ( data.direction !== 'backward' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selection = this.editor.model.document.selection;\n\n\t\t\tif ( !selection.isCollapsed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst firstPosition = selection.getFirstPosition();\n\n\t\t\tif ( !firstPosition.isAtStart ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst positionParent = firstPosition.parent;\n\n\t\t\tif ( positionParent.name !== 'listItem' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst previousIsAListItem = positionParent.previousSibling && positionParent.previousSibling.name === 'listItem';\n\n\t\t\tif ( previousIsAListItem ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.editor.execute( 'outdentList' );\n\n\t\t\tdata.preventDefault();\n\t\t\tevt.stop();\n\t\t}, { priority: 'high' } );\n\n\t\tconst getCommandExecuter = commandName => {\n\t\t\treturn ( data, cancel ) => {\n\t\t\t\tconst command = this.editor.commands.get( commandName );\n\n\t\t\t\tif ( command.isEnabled ) {\n\t\t\t\t\tthis.editor.execute( commandName );\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\teditor.keystrokes.set( 'Tab', getCommandExecuter( 'indentList' ) );\n\t\teditor.keystrokes.set( 'Shift+Tab', getCommandExecuter( 'outdentList' ) );\n\t}\n\n\tafterInit() {\n\t\tconst commands = this.editor.commands;\n\n\t\tconst indent = commands.get( 'indent' );\n\t\tconst outdent = commands.get( 'outdent' );\n\n\t\tif ( indent ) {\n\t\t\tindent.registerChildCommand( commands.get( 'indentList' ) );\n\t\t}\n\n\t\tif ( outdent ) {\n\t\t\toutdent.registerChildCommand( commands.get( 'outdentList' ) );\n\t\t}\n\t}\n}\n\nfunction getViewListItemLength( element ) {\n\tlet length = 1;\n\n\tfor ( const child of element.getChildren() ) {\n\t\tif ( child.name == 'ul' || child.name == 'ol' ) {\n\t\t\tfor ( const item of child.getChildren() ) {\n\t\t\t\tlength += getViewListItemLength( item );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn length;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module list/listui\n */\nimport numberedListIcon from '../theme/icons/numberedlist.svg';\nimport bulletedListIcon from '../theme/icons/bulletedlist.svg';\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\n/**\n * The list UI feature. It introduces the `'numberedList'` and `'bulletedList'` buttons that\n * allow to convert paragraphs to and from list items and indent or outdent them.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ListUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        // Create two buttons and link them with numberedList and bulletedList commands.\n        const t = this.editor.t;\n        this._addButton('numberedList', t('Numbered List'), numberedListIcon);\n        this._addButton('bulletedList', t('Bulleted List'), bulletedListIcon);\n    }\n    /**\n\t * Helper method for initializing a button and linking it with an appropriate command.\n\t *\n\t * @private\n\t * @param {String} commandName The name of the command.\n\t * @param {Object} label The button label.\n\t * @param {String} icon The source of the icon.\n\t */\n    _addButton(commandName, label, icon) {\n        const editor = this.editor;\n        editor.ui.componentFactory.add(commandName, locale => {\n            const command = editor.commands.get(commandName);\n            const buttonView = new ButtonView(locale);\n            buttonView.set({\n                label,\n                icon,\n                tooltip: true\n            });\n            // Bind button model to command.\n            buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n            // Execute command.\n            this.listenTo(buttonView, 'execute', () => editor.execute(commandName));\n            return buttonView;\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module list/list\n */\n\nimport ListEditing from './listediting';\nimport ListUI from './listui';\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\n/**\n * The list feature.\n *\n * This is a \"glue\" plugin which loads the {@link module:list/listediting~ListEditing list editing feature}\n * and {@link module:list/listui~ListUI list UI feature}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class List extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ListEditing, ListUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'List';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/* eslint-env browser */\n\n'use strict';\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\nconst BASE64_HEADER_REG_EXP = /^data:(\\S*?);base64,/;\n\n/**\n * FileUploader class used to upload single file.\n */\nclass FileUploader {\n\t/**\n\t * Creates `FileUploader` instance.\n\t *\n\t * @param {Blob|String} fileOrData A blob object or a data string encoded with Base64.\n\t * @param {Token} token Token used for authentication.\n\t * @param {String} apiAddress API address.\n\t */\n\tconstructor( fileOrData, token, apiAddress ) {\n\t\tif ( !fileOrData ) {\n\t\t\tthrow new Error( 'File must be provided' );\n\t\t}\n\n\t\tif ( !token ) {\n\t\t\tthrow new Error( 'Token must be provided' );\n\t\t}\n\n\t\tif ( !apiAddress ) {\n\t\t\tthrow new Error( 'Api address must be provided' );\n\t\t}\n\n\t\t/**\n\t\t * A file that is being uploaded.\n\t\t *\n\t\t * @type {Blob}\n\t\t */\n\t\tthis.file = _isBase64( fileOrData ) ? _base64ToBlob( fileOrData ) : fileOrData;\n\n\t\t/**\n\t\t * CKEditor Cloud Services access token.\n\t\t *\n\t\t * @type {Token}\n\t\t * @private\n\t\t */\n\t\tthis._token = token;\n\n\t\t/**\n\t\t * CKEditor Cloud Services API address.\n\t\t *\n\t\t * @type {String}\n\t\t * @private\n\t\t */\n\t\tthis._apiAddress = apiAddress;\n\t}\n\n\t/**\n\t * Registers callback on `progress` event.\n\t *\n\t * @chainable\n\t * @param {Function} callback\n\t * @returns {FileUploader}\n\t */\n\tonProgress( callback ) {\n\t\tthis.on( 'progress', ( event, data ) => callback( data ) );\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Registers callback on `error` event. Event is called once when error occurs.\n\t *\n\t * @chainable\n\t * @param {Function} callback\n\t * @returns {FileUploader}\n\t */\n\tonError( callback ) {\n\t\tthis.once( 'error', ( event, data ) => callback( data ) );\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Aborts upload process.\n\t */\n\tabort() {\n\t\tthis.xhr.abort();\n\t}\n\n\t/**\n\t * Sends XHR request to API.\n\t *\n\t * @chainable\n\t * @returns {Promise.<Object>}\n\t */\n\tsend() {\n\t\tthis._prepareRequest();\n\t\tthis._attachXHRListeners();\n\n\t\treturn this._sendRequest();\n\t}\n\n\t/**\n\t * Prepares XHR request.\n\t *\n\t * @private\n\t */\n\t_prepareRequest() {\n\t\tconst xhr = new XMLHttpRequest();\n\n\t\txhr.open( 'POST', this._apiAddress );\n\t\txhr.setRequestHeader( 'Authorization', this._token.value );\n\t\txhr.responseType = 'json';\n\n\t\tthis.xhr = xhr;\n\t}\n\n\t/**\n\t * Attaches listeners to the XHR.\n\t *\n\t * @private\n\t */\n\t_attachXHRListeners() {\n\t\tconst that = this;\n\t\tconst xhr = this.xhr;\n\n\t\txhr.addEventListener( 'error', onError( 'Network Error' ) );\n\t\txhr.addEventListener( 'abort', onError( 'Abort' ) );\n\n\t\t/* istanbul ignore else */\n\t\tif ( xhr.upload ) {\n\t\t\txhr.upload.addEventListener( 'progress', event => {\n\t\t\t\tif ( event.lengthComputable ) {\n\t\t\t\t\tthis.fire( 'progress', {\n\t\t\t\t\t\ttotal: event.total,\n\t\t\t\t\t\tuploaded: event.loaded\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\txhr.addEventListener( 'load', () => {\n\t\t\tconst statusCode = xhr.status;\n\t\t\tconst xhrResponse = xhr.response;\n\n\t\t\tif ( statusCode < 200 || statusCode > 299 ) {\n\t\t\t\treturn this.fire( 'error', xhrResponse.message || xhrResponse.error );\n\t\t\t}\n\t\t} );\n\n\t\tfunction onError( message ) {\n\t\t\treturn () => that.fire( 'error', message );\n\t\t}\n\t}\n\n\t/**\n\t * Sends XHR request.\n\t *\n\t * @private\n\t */\n\t_sendRequest() {\n\t\tconst formData = new FormData();\n\t\tconst xhr = this.xhr;\n\n\t\tformData.append( 'file', this.file );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\txhr.addEventListener( 'load', () => {\n\t\t\t\tconst statusCode = xhr.status;\n\t\t\t\tconst xhrResponse = xhr.response;\n\n\t\t\t\tif ( statusCode < 200 || statusCode > 299 ) {\n\t\t\t\t\tif ( xhrResponse.message ) {\n\t\t\t\t\t\treturn reject( new Error( xhrResponse.message ) );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn reject( xhrResponse.error );\n\t\t\t\t}\n\n\t\t\t\treturn resolve( xhrResponse );\n\t\t\t} );\n\n\t\t\txhr.addEventListener( 'error', () => reject( new Error( 'Network Error' ) ) );\n\t\t\txhr.addEventListener( 'abort', () => reject( new Error( 'Abort' ) ) );\n\n\t\t\txhr.send( formData );\n\t\t} );\n\t}\n\n\t/**\n\t * Fired when error occurs.\n\t *\n\t * @event error\n\t * @param {String} error Error message\n\t */\n\n\t/**\n\t * Fired on upload progress.\n\t *\n\t * @event progress\n\t * @param {Object} status Total and uploaded status\n\t */\n}\n\nmix( FileUploader, EmitterMixin );\n\n/**\n * Transforms Base64 string data into file.\n *\n * @param {String} base64 String data.\n * @param {Number} [sliceSize=512]\n * @returns {Blob}\n * @private\n */\nfunction _base64ToBlob( base64, sliceSize = 512 ) {\n\ttry {\n\t\tconst contentType = base64.match( BASE64_HEADER_REG_EXP )[ 1 ];\n\t\tconst base64Data = atob( base64.replace( BASE64_HEADER_REG_EXP, '' ) );\n\n\t\tconst byteArrays = [];\n\n\t\tfor ( let offset = 0; offset < base64Data.length; offset += sliceSize ) {\n\t\t\tconst slice = base64Data.slice( offset, offset + sliceSize );\n\t\t\tconst byteNumbers = new Array( slice.length );\n\n\t\t\tfor ( let i = 0; i < slice.length; i++ ) {\n\t\t\t\tbyteNumbers[ i ] = slice.charCodeAt( i );\n\t\t\t}\n\n\t\t\tbyteArrays.push( new Uint8Array( byteNumbers ) );\n\t\t}\n\n\t\treturn new Blob( byteArrays, { type: contentType } );\n\t} catch ( error ) {\n\t\tthrow new Error( 'Problem with decoding Base64 image data.' );\n\t}\n}\n\n/**\n * Checks that string is Base64.\n *\n * @param {String} string\n * @returns {Boolean}\n * @private\n */\nfunction _isBase64( string ) {\n\tif ( typeof string !== 'string' ) {\n\t\treturn false;\n\t}\n\n\tconst match = string.match( BASE64_HEADER_REG_EXP );\n\treturn !!( match && match.length );\n}\n\nexport default FileUploader;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/* eslint-env browser */\n\n'use strict';\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\n\nconst DEFAULT_OPTIONS = { refreshInterval: 3600000, autoRefresh: true };\n\n/**\n * Class representing the token used for communication with CKEditor Cloud Services.\n * Value of the token is retrieving from the specified URL and is refreshed every 1 hour by default.\n *\n * @mixes ObservableMixin\n */\nclass Token {\n\t/**\n\t * Creates `Token` instance.\n\t * Method `init` should be called after using the constructor or use `create` method instead.\n\t *\n\t * @param {String|Function} tokenUrlOrRefreshToken Endpoint address to download the token or a callback that provides the token. If the\n\t * value is a function it has to match the {@link ~refreshToken} interface.\n\t * @param {Object} options\n\t * @param {String} [options.initValue] Initial value of the token.\n\t * @param {Number} [options.refreshInterval=3600000] Delay between refreshes. Default 1 hour.\n\t * @param {Boolean} [options.autoRefresh=true] Specifies whether to start the refresh automatically.\n\t */\n\tconstructor( tokenUrlOrRefreshToken, options = DEFAULT_OPTIONS ) {\n\t\tif ( !tokenUrlOrRefreshToken ) {\n\t\t\tthrow new Error( 'A `tokenUrl` must be provided as the first constructor argument.' );\n\t\t}\n\n\t\t/**\n\t\t * Value of the token.\n\t\t * The value of the token is null if `initValue` is not provided or `init` method was not called.\n\t\t * `create` method creates token with initialized value from url.\n\t\t *\n\t\t * @name value\n\t\t * @member {String} #value\n\t\t * @observable\n\t\t * @readonly\n\t\t */\n\t\tthis.set( 'value', options.initValue );\n\n\t\t/**\n\t\t * Base refreshing function.\n\t\t *\n\t\t * @private\n\t\t * @member {String|Function} #_refresh\n\t\t */\n\t\tif ( typeof tokenUrlOrRefreshToken === 'function' ) {\n\t\t\tthis._refresh = tokenUrlOrRefreshToken;\n\t\t} else {\n\t\t\tthis._refresh = () => defaultRefreshToken( tokenUrlOrRefreshToken );\n\t\t}\n\n\t\t/**\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._options = Object.assign( {}, DEFAULT_OPTIONS, options );\n\t}\n\n\t/**\n\t * Initializes the token.\n\t *\n\t * @returns {Promise.<Token>}\n\t */\n\tinit() {\n\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\tif ( this._options.autoRefresh ) {\n\t\t\t\tthis._startRefreshing();\n\t\t\t}\n\n\t\t\tif ( !this.value ) {\n\t\t\t\tthis._refreshToken()\n\t\t\t\t\t.then( resolve )\n\t\t\t\t\t.catch( reject );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolve( this );\n\t\t} );\n\t}\n\n\t/**\n\t * Refresh token method. Useful in a method form as it can be override in tests.\n\t *\n\t * @protected\n\t */\n\t_refreshToken() {\n\t\treturn this._refresh()\n\t\t\t.then( value => this.set( 'value', value ) )\n\t\t\t.then( () => this );\n\t}\n\n\t/**\n\t * Destroys token instance. Stops refreshing.\n\t */\n\tdestroy() {\n\t\tthis._stopRefreshing();\n\t}\n\n\t/**\n\t * Starts value refreshing every `refreshInterval` time.\n\t *\n\t * @protected\n\t */\n\t_startRefreshing() {\n\t\tthis._refreshInterval = setInterval( () => this._refreshToken(), this._options.refreshInterval );\n\t}\n\n\t/**\n\t * Stops value refreshing.\n\t *\n\t * @protected\n\t */\n\t_stopRefreshing() {\n\t\tclearInterval( this._refreshInterval );\n\t}\n\n\t/**\n\t * Creates a initialized {@link Token} instance.\n\t *\n\t * @param {String|Function} tokenUrlOrRefreshToken Endpoint address to download the token or a callback that provides the token. If the\n\t * value is a function it has to match the {@link ~refreshToken} interface.\n\t * @param {Object} options\n\t * @param {String} [options.initValue] Initial value of the token.\n\t * @param {Number} [options.refreshInterval=3600000] Delay between refreshes. Default 1 hour.\n\t * @param {Boolean} [options.autoRefresh=true] Specifies whether to start the refresh automatically.\n\t * @returns {Promise.<Token>}\n\t */\n\tstatic create( tokenUrlOrRefreshToken, options = DEFAULT_OPTIONS ) {\n\t\tconst token = new Token( tokenUrlOrRefreshToken, options );\n\n\t\treturn token.init();\n\t}\n}\n\nmix( Token, ObservableMixin );\n\n/**\n * This function is called in a defined interval by the {@link ~Token} class.\n * It should return a promise, which resolves with the new token value.\n * If any error occurs it should return a rejected promise with an error message.\n *\n * @function refreshToken\n * @returns {Promise.<String>}\n */\n\n/**\n * @private\n * @param {String} tokenUrl\n */\nfunction defaultRefreshToken( tokenUrl ) {\n\treturn new Promise( ( resolve, reject ) => {\n\t\tconst xhr = new XMLHttpRequest();\n\n\t\txhr.open( 'GET', tokenUrl );\n\n\t\txhr.addEventListener( 'load', () => {\n\t\t\tconst statusCode = xhr.status;\n\t\t\tconst xhrResponse = xhr.response;\n\n\t\t\tif ( statusCode < 200 || statusCode > 299 ) {\n\t\t\t\treturn reject( new Error( 'Cannot download new token!' ) );\n\t\t\t}\n\n\t\t\treturn resolve( xhrResponse );\n\t\t} );\n\n\t\txhr.addEventListener( 'error', () => reject( new Error( 'Network Error' ) ) );\n\t\txhr.addEventListener( 'abort', () => reject( new Error( 'Abort' ) ) );\n\n\t\txhr.send();\n\t} );\n}\n\nexport default Token;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module cloud-services/cloudservices\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Token from '@ckeditor/ckeditor-cloud-services-core/src/token/token';\n\n/**\n * Plugin introducing CKEditor 5's Cloud Services integration.\n *\n * It initializes the token provider based on\n * the {@link module:cloud-services/cloudservices~CloudServicesConfig `config.cloudService`}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class CloudServices extends Plugin {\n\t/**\n\t * @inheritdoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'CloudServices';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst config = editor.config;\n\n\t\tconst options = config.get( 'cloudServices' ) || {};\n\n\t\tfor ( const optionName in options ) {\n\t\t\tthis[ optionName ] = options[ optionName ];\n\t\t}\n\n\t\t/**\n\t\t * The authentication token URL for CKEditor Cloud Services or a callback to the token value promise. See the\n\t\t * {@link module:cloud-services/cloudservices~CloudServicesConfig#tokenUrl} for more details.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String|Function|undefined} #tokenUrl\n\t\t */\n\n\t\t/**\n\t\t * The URL to which the files should be uploaded.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} #uploadUrl\n\t\t */\n\n\t\t/**\n\t\t * Other plugins use this token for the authorization process. It handles token requesting and refreshing.\n\t\t * Its value is `null` when {@link module:cloud-services/cloudservices~CloudServicesConfig#tokenUrl} is not provided.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Object|null} #token\n\t\t */\n\n\t\tif ( !this.tokenUrl ) {\n\t\t\tthis.token = null;\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.token = new CloudServices.Token( this.tokenUrl );\n\n\t\treturn this.token.init();\n\t}\n}\n\nCloudServices.Token = Token;\n\n/**\n * The configuration of CKEditor Cloud Services. Introduced by the {@link module:cloud-services/cloudservices~CloudServices} plugin.\n *\n * Read more in {@link module:cloud-services/cloudservices~CloudServicesConfig}.\n *\n * @member {module:cloud-services/cloudservices~CloudServicesConfig} module:core/editor/editorconfig~EditorConfig#cloudServices\n */\n\n/**\n * The configuration for all plugins using CKEditor Cloud Services.\n *\n *\t\tClassicEditor\n *\t\t\t.create( document.querySelector( '#editor' ), {\n *\t\t\t\tcloudServices: {\n *\t\t\t\t\ttokenUrl: 'https://example.com/cs-token-endpoint',\n *\t\t\t\t\tuploadUrl: 'https://your-organization-id.cke-cs.com/easyimage/upload/'\n *\t\t\t\t}\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See {@link module:core/editor/editorconfig~EditorConfig all editor options}.\n *\n * @interface CloudServicesConfig\n */\n\n/**\n * A token URL or a token request function.\n *\n * As a string it should be a URL to the security token endpoint in your application. The role of this endpoint is to securely authorize the\n * end users of your application to use [CKEditor Cloud Services](https://ckeditor.com/ckeditor-cloud-services), only\n * if they should have access e.g. to upload files with Easy Image or to access the Collaboraation service.\n *\n *\t\tClassicEditor\n *\t\t\t.create( document.querySelector( '#editor' ), {\n *\t\t\t\tcloudServices: {\n *\t\t\t\t\ttokenUrl: 'https://example.com/cs-token-endpoint',\n *\t\t\t\t\t...\n *\t\t\t\t}\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * As a function it should provide a promise to the token value, so you can highly customize the token and provide your token URL endpoint.\n * By using that approach you can set your own headers to the request.\n *\n * \t\tClassicEditor\n *\t\t\t.create( document.querySelector( '#editor' ), {\n *\t\t\t\tcloudServices: {\n *\t\t\t\t\ttokenUrl: () => new Promise( ( resolve, reject ) => {\n *\t\t\t\t\t\tconst xhr = new XMLHttpRequest();\n *\n *\t\t\t\t\t\txhr.open( 'GET', 'https://example.com/cs-token-endpoint' );\n *\n *\t\t\t\t\t\txhr.addEventListener( 'load', () => {\n *\t\t\t\t\t\t\tconst statusCode = xhr.status;\n *\t\t\t\t\t\t\tconst xhrResponse = xhr.response;\n *\n *\t\t\t\t\t\t\tif ( statusCode < 200 || statusCode > 299 ) {\n *\t\t\t\t\t\t\t\treturn reject( new Error( 'Cannot download new token!' ) );\n *\t\t\t\t\t\t\t}\n *\n *\t\t\t\t\t\t\treturn resolve( xhrResponse );\n *\t\t\t\t\t\t} );\n *\n *\t\t\t\t\t\txhr.addEventListener( 'error', () => reject( new Error( 'Network Error' ) ) );\n *\t\t\t\t\t\txhr.addEventListener( 'abort', () => reject( new Error( 'Abort' ) ) );\n *\n *\t\t\t\t\t\txhr.setRequestHeader( customHeader, customValue );\n *\n *\t\t\t\t\t\txhr.send();\n *\t\t\t\t\t} ),\n *\t\t\t\t\t...\n *\t\t\t\t}\n *\t\t\t} )\n *\n * You can find more information about token endpoints in the\n * {@glink @cs guides/easy-image/quick-start#create-token-endpoint Cloud Services - Quick start}\n * and {@glink @cs guides/token-endpoints/tokenendpoint Cloud Services - Creating token endpoint} documentation.\n *\n * Without a properly working token endpoint (token URL) CKEditor plugins will not be able to connect to CKEditor Cloud Services.\n *\n * @member {String|Function} module:cloud-services/cloudservices~CloudServicesConfig#tokenUrl\n */\n\n/**\n * The endpoint URL for [CKEditor Cloud Services](https://ckeditor.com/ckeditor-cloud-services) uploads.\n * This option must be set for Easy Image to work correctly.\n *\n * The upload URL is unique for each customer and can be found in the [CKEditor Ecosystem dashboard](https://dashboard.ckeditor.com)\n * after subscribing to Easy Image service.\n * To learn how to start using Easy Image check {@glink @cs guides/easy-image/quick-start Easy Image - Quick start} documentation.\n *\n * Note: Make sure to also set the {@link module:cloud-services/cloudservices~CloudServicesConfig#tokenUrl} configuration option.\n *\n * @member {String} module:cloud-services/cloudservices~CloudServicesConfig#uploadUrl\n */\n\n/**\n * The URL for web socket communication, used by `RealTimeCollaborativeEditing` plugin. Every customer (organization in the CKEditor\n * Ecosystem dashboard) has its own, unique URLs to communicate with CKEditor Cloud Services. The URL can be found in the\n * CKEditor Ecosystem dashboard.\n *\n * Note: unlike most plugins, `RealTimeCollaborativeEditing` is not included in any CKEditor 5 build and has to be installed manually.\n * Check [Collaboration overview](https://ckeditor.com/docs/ckeditor5/latest/features/collaboration/overview.html) for more details.\n *\n * @member {String} module:cloud-services/cloudservices~CloudServicesConfig#webSocketUrl\n */\n\n/**\n * Document ID, used by `RealTimeCollaborativeEditing` plugin. All editor instances created with the same document ID will collaborate.\n * It means that each document needs a different document ID if you do not want to start collaboration between these documents.\n * The ID is usually a primary key of the document in the database, but you are free to provide whatever identifier fits your scenario.\n *\n * Note: unlike most plugins, `RealTimeCollaborativeEditing` is not included in any CKEditor 5 build and has to be installed manually.\n * Check [Collaboration overview](https://ckeditor.com/docs/ckeditor5/latest/features/collaboration/overview.html) for more details.\n *\n * @member {String} module:cloud-services/cloudservices~CloudServicesConfig#documentId\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n* @module easy-image/cloudservicesuploadadapter\n*/\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileRepository from '@ckeditor/ckeditor5-upload/src/filerepository';\nimport UploadGateway from '@ckeditor/ckeditor-cloud-services-core/src/uploadgateway/uploadgateway';\nimport CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';\n\n/**\n * A plugin that enables upload to [CKEditor Cloud Services](https://ckeditor.com/ckeditor-cloud-services/).\n *\n * It is mainly used by the {@link module:easy-image/easyimage~EasyImage} feature.\n *\n * After enabling this adapter you need to configure the CKEditor Cloud Services integration through\n * {@link module:cloud-services/cloudservices~CloudServicesConfig `config.cloudServices`}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class CloudServicesUploadAdapter extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ FileRepository, CloudServices ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\tconst cloudServices = editor.plugins.get( CloudServices );\n\n\t\tconst token = cloudServices.token;\n\t\tconst uploadUrl = cloudServices.uploadUrl;\n\n\t\tif ( !token ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._uploadGateway = new CloudServicesUploadAdapter._UploadGateway( token, uploadUrl );\n\n\t\teditor.plugins.get( FileRepository ).createUploadAdapter = loader => {\n\t\t\treturn new Adapter( this._uploadGateway, loader );\n\t\t};\n\t}\n}\n\n/**\n * @private\n */\nclass Adapter {\n\tconstructor( uploadGateway, loader ) {\n\t\tthis.uploadGateway = uploadGateway;\n\n\t\tthis.loader = loader;\n\t}\n\n\tupload() {\n\t\treturn this.loader.file.then( file => {\n\t\t\tthis.fileUploader = this.uploadGateway.upload( file );\n\n\t\t\tthis.fileUploader.on( 'progress', ( evt, data ) => {\n\t\t\t\tthis.loader.uploadTotal = data.total;\n\t\t\t\tthis.loader.uploaded = data.uploaded;\n\t\t\t} );\n\n\t\t\treturn this.fileUploader.send();\n\t\t} );\n\t}\n\n\tabort() {\n\t\tthis.fileUploader.abort();\n\t}\n}\n\n// Store the API in static property to easily overwrite it in tests.\n// Too bad dependency injection does not work in Webpack + ES 6 (const) + Babel.\nCloudServicesUploadAdapter._UploadGateway = UploadGateway;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n'use strict';\n\nimport FileUploader from './fileuploader';\n\n/**\n * UploadGateway abstracts file uploads to CKEditor Cloud Services.\n */\nexport default class UploadGateway {\n\t/**\n\t * Creates `UploadGateway` instance.\n\t *\n\t * @param {Token} token Token used for authentication.\n\t * @param {String} apiAddress API address.\n\t */\n\tconstructor( token, apiAddress ) {\n\t\tif ( !token ) {\n\t\t\tthrow new Error( 'Token must be provided' );\n\t\t}\n\n\t\tif ( !apiAddress ) {\n\t\t\tthrow new Error( 'Api address must be provided' );\n\t\t}\n\n\t\t/**\n\t\t * CKEditor Cloud Services access token.\n\t\t *\n\t\t * @type {Token}\n\t\t * @private\n\t\t */\n\t\tthis._token = token;\n\n\t\t/**\n\t\t * CKEditor Cloud Services API address.\n\t\t *\n\t\t * @type {String}\n\t\t * @private\n\t\t */\n\t\tthis._apiAddress = apiAddress;\n\t}\n\n\t/**\n\t * Creates a {@link FileUploader} instance that wraps file upload process.\n\t * The file is being sent at a time when the method {@link FileUploader#then then} is called\n\t * or when {@link FileUploader#send send} method is called.\n\t *\n\t *     const token = await Token.create( 'https://token-endpoint' );\n\t *     new UploadGateway( token, 'https://example.org' )\n\t *        .upload( 'FILE' )\n\t *        .onProgress( ( data ) => console.log( data ) )\n\t *        .send()\n\t *        .then( ( response ) => console.log( response ) );\n\t *\n\t *     // OR\n\t *\n\t *     const token = await Token.create( 'https://token-endpoint' );\n\t *     new UploadGateway( token, 'https://example.org' )\n\t *         .upload( 'FILE' )\n\t *         .onProgress( ( data ) => console.log( data ) )\n\t *         .send()\n\t *         .then( ( response ) => console.log( response ) );\n\t *\n\t * @param {Blob/String} fileOrData A blob object or a data string encoded with Base64.\n\t * @returns {FileUploader} Returns `FileUploader` instance.\n\t */\n\tupload( fileOrData ) {\n\t\treturn new FileUploader( fileOrData, this._token, this._apiAddress );\n\t}\n}\n\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module easy-image/easyimage\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport CloudServicesUploadAdapter from './cloudservicesuploadadapter';\nimport Image from '@ckeditor/ckeditor5-image/src/image';\nimport ImageUpload from '@ckeditor/ckeditor5-image/src/imageupload';\n\n/**\n * The Easy Image feature, which makes the image upload in CKEditor 5 possible with virtually zero\n * server setup. A part of the [CKEditor Cloud Services](https://ckeditor.com/ckeditor-cloud-services/)\n * family.\n *\n * This is a \"glue\" plugin which enables:\n *\n * * {@link module:image/image~Image},\n * * {@link module:image/imageupload~ImageUpload},\n * * {@link module:easy-image/cloudservicesuploadadapter~CloudServicesUploadAdapter}.\n *\n * See the {@glink features/image-upload/easy-image \"Easy Image integration\" guide} to learn how to configure\n * and use this feature.\n *\n * Check out the {@glink features/image-upload/image-upload comprehensive \"Image upload\" guide} to learn about\n * other ways to upload images into CKEditor 5.\n *\n * **Note**: After enabling the Easy Image plugin you need to configure the\n * [CKEditor Cloud Services](https://ckeditor.com/ckeditor-cloud-services/)\n * integration through {@link module:cloud-services/cloudservices~CloudServicesConfig `config.cloudServices`}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class EasyImage extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [\n\t\t\tCloudServicesUploadAdapter,\n\t\t\tImage,\n\t\t\tImageUpload\n\t\t];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'EasyImage';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module heading/headingui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Model from '@ckeditor/ckeditor5-ui/src/model';\nimport {\n    createDropdown,\n    addListToDropdown\n} from '@ckeditor/ckeditor5-ui/src/dropdown/utils';\nimport { getLocalizedOptions } from './utils';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport '../theme/heading.css';\n/**\n * The headings UI feature. It introduces the `headings` dropdown.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class HeadingUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const t = editor.t;\n        const options = getLocalizedOptions(editor);\n        const defaultTitle = t('Choose heading');\n        const dropdownTooltip = t('Heading');\n        // Register UI component.\n        editor.ui.componentFactory.add('heading', locale => {\n            const titles = {};\n            const itemDefinitions = new Collection();\n            const headingCommand = editor.commands.get('heading');\n            const paragraphCommand = editor.commands.get('paragraph');\n            const commands = [headingCommand];\n            for (const option of options) {\n                const def = {\n                    type: 'button',\n                    model: new Model({\n                        label: option.title,\n                        class: option.class,\n                        withText: true\n                    })\n                };\n                if (option.model === 'paragraph') {\n                    def.model.bind('isOn').to(paragraphCommand, 'value');\n                    def.model.set('commandName', 'paragraph');\n                    commands.push(paragraphCommand);\n                } else {\n                    def.model.bind('isOn').to(headingCommand, 'value', value => value === option.model);\n                    def.model.set({\n                        commandName: 'heading',\n                        commandValue: option.model\n                    });\n                }\n                // Add the option to the collection.\n                itemDefinitions.add(def);\n                titles[option.model] = option.title;\n            }\n            const dropdownView = createDropdown(locale);\n            addListToDropdown(dropdownView, itemDefinitions);\n            dropdownView.buttonView.set({\n                isOn: false,\n                withText: true,\n                tooltip: dropdownTooltip\n            });\n            dropdownView.extendTemplate({ attributes: { class: ['ck-heading-dropdown'] } });\n            dropdownView.bind('isEnabled').toMany(commands, 'isEnabled', (...areEnabled) => {\n                return areEnabled.some(isEnabled => isEnabled);\n            });\n            dropdownView.buttonView.bind('label').to(headingCommand, 'value', paragraphCommand, 'value', (value, para) => {\n                const whichModel = value || para && 'paragraph';\n                // If none of the commands is active, display default title.\n                return titles[whichModel] ? titles[whichModel] : defaultTitle;\n            });\n            // Execute command when an item from the dropdown is selected.\n            this.listenTo(dropdownView, 'execute', evt => {\n                editor.execute(evt.source.commandName, evt.source.commandValue ? { value: evt.source.commandValue } : undefined);\n                editor.editing.view.focus();\n            });\n            return dropdownView;\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module heading/heading\n */\n\nimport HeadingEditing from './headingediting';\nimport HeadingUI from './headingui';\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport '../theme/heading.css';\n\n/**\n * The headings feature.\n *\n * For a detailed overview, check the {@glink features/headings Headings feature documentation}\n * and the {@glink api/heading package page}.\n *\n * This is a \"glue\" plugin which loads the {@link module:heading/headingediting~HeadingEditing heading editing feature}\n * and {@link module:heading/headingui~HeadingUI heading UI feature}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Heading extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ HeadingEditing, HeadingUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Heading';\n\t}\n}\n\n/**\n * The configuration of the heading feature. Introduced by the {@link module:heading/headingediting~HeadingEditing} feature.\n *\n * Read more in {@link module:heading/heading~HeadingConfig}.\n *\n * @member {module:heading/heading~HeadingConfig} module:core/editor/editorconfig~EditorConfig#heading\n */\n\n/**\n * The configuration of the heading feature.\n * The option is used by the {@link module:heading/headingediting~HeadingEditing} feature.\n *\n *\t\tClassicEditor\n *\t\t\t.create( {\n * \t\t\t\theading: ... // Heading feature config.\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See {@link module:core/editor/editorconfig~EditorConfig all editor options}.\n *\n * @interface HeadingConfig\n */\n\n/**\n * The available heading options.\n *\n * The default value is:\n *\n *\t\tconst headingConfig = {\n *\t\t\toptions: [\n *\t\t\t\t{ model: 'paragraph', title: 'Paragraph', class: 'ck-heading_paragraph' },\n *\t\t\t\t{ model: 'heading1', view: 'h2', title: 'Heading 1', class: 'ck-heading_heading1' },\n *\t\t\t\t{ model: 'heading2', view: 'h3', title: 'Heading 2', class: 'ck-heading_heading2' },\n *\t\t\t\t{ model: 'heading3', view: 'h4', title: 'Heading 3', class: 'ck-heading_heading3' }\n *\t\t\t]\n *\t\t};\n *\n * It defines 3 levels of headings. In the editor model they will use `heading1`, `heading2`, and `heading3` elements.\n * Their respective view elements (so the elements output by the editor) will be: `h2`, `h3`, and `h4`. This means that\n * if you choose \"Heading 1\" in the headings dropdown the editor will turn the current block to `<heading1>` in the model\n * which will result in rendering (and outputting to data) the `<h2>` element.\n *\n * The `title` and `class` properties will be used by the `headings` dropdown to render available options.\n * Usually, the first option in the headings dropdown is the \"Paragraph\" option, hence it's also defined on the list.\n * However, you don't need to define its view representation because it's handled by\n * the {@link module:paragraph/paragraph~Paragraph} feature (which is required by\n * the {@link module:heading/headingediting~HeadingEditing} feature).\n *\n * You can **read more** about configuring heading levels and **see more examples** in\n * the {@glink features/headings Headings} guide.\n *\n * Note: In the model you should always start from `heading1`, regardless of how the headings are represented in the view.\n * That's assumption is used by features like {@link module:autoformat/autoformat~Autoformat} to know which element\n * they should use when applying the first level heading.\n *\n * The defined headings are also available as values passed to the `'heading'` command under their model names.\n * For example, the below code will apply `<heading1>` to the current selection:\n *\n *\t\teditor.execute( 'heading', { value: 'heading1' } );\n *\n * @member {Array.<module:heading/heading~HeadingOption>} module:heading/heading~HeadingConfig#options\n */\n\n/**\n * Heading option descriptor.\n *\n * @typedef {Object} module:heading/heading~HeadingOption\n * @property {String} model Name of the model element to convert.\n * @property {module:engine/view/elementdefinition~ElementDefinition} view Definition of a view element to convert from/to.\n * @property {String} title The user-readable title of the option.\n * @property {String} class The class which will be added to the dropdown item representing this option.\n * @property {String} [icon] Icon used by {@link module:heading/headingbuttonsui~HeadingButtonsUI}. It can be omitted when using\n * the default configuration.\n * @extends module:engine/conversion/conversion~ConverterDefinition\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/tabletoolbar\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport { getSelectedTableWidget, getTableWidgetAncestor } from './utils';\nimport WidgetToolbarRepository from '@ckeditor/ckeditor5-widget/src/widgettoolbarrepository';\n\n/**\n * The table toolbar class. It creates toolbars for the table feature and its content (for now only for a table cell content).\n *\n * Table toolbar shows up when a table widget is selected. Its components (e.g. buttons) are created based on the\n * {@link module:table/table~TableConfig#tableToolbar `table.tableToolbar` configuration option}.\n *\n * Table content toolbar shows up when the selection is inside the content of a table. It creates its component based on the\n * {@link module:table/table~TableConfig#contentToolbar `table.contentToolbar` configuration option}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class TableToolbar extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ WidgetToolbarRepository ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'TableToolbar';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\tconst editor = this.editor;\n\t\tconst widgetToolbarRepository = editor.plugins.get( WidgetToolbarRepository );\n\n\t\tconst tableContentToolbarItems = editor.config.get( 'table.contentToolbar' );\n\n\t\tconst tableToolbarItems = editor.config.get( 'table.tableToolbar' );\n\n\t\tif ( tableContentToolbarItems ) {\n\t\t\twidgetToolbarRepository.register( 'tableContent', {\n\t\t\t\titems: tableContentToolbarItems,\n\t\t\t\tgetRelatedElement: getTableWidgetAncestor\n\t\t\t} );\n\t\t}\n\n\t\tif ( tableToolbarItems ) {\n\t\t\twidgetToolbarRepository.register( 'table', {\n\t\t\t\titems: tableToolbarItems,\n\t\t\t\tgetRelatedElement: getSelectedTableWidget\n\t\t\t} );\n\t\t}\n\t}\n}\n\n/**\n * Items to be placed in the table content toolbar.\n * The {@link module:table/tabletoolbar~TableToolbar} plugin is required to make this toolbar working.\n *\n * Assuming that you use the {@link module:table/tableui~TableUI} feature, the following toolbar items will be available\n * in {@link module:ui/componentfactory~ComponentFactory}:\n *\n * * `'tableRow'`,\n * * `'tableColumn'`,\n * * `'mergeTableCells'`.\n *\n * You can thus configure the toolbar like this:\n *\n *\t\tconst tableConfig = {\n *\t\t\tcontentToolbar: [ 'tableRow', 'tableColumn', 'mergeTableCells' ]\n *\t\t};\n *\n * Of course, the same buttons can also be used in the\n * {@link module:core/editor/editorconfig~EditorConfig#toolbar main editor toolbar}.\n *\n * Read more about configuring toolbar in {@link module:core/editor/editorconfig~EditorConfig#toolbar}.\n *\n * @member {Array.<String>} module:table/table~TableConfig#contentToolbar\n */\n\n/**\n * Items to be placed in the table toolbar.\n * The {@link module:table/tabletoolbar~TableToolbar} plugin is required to make this toolbar working.\n *\n * You can thus configure the toolbar like this:\n *\n *\t\tconst tableConfig = {\n *\t\t\ttableToolbar: [ 'blockQuote' ]\n *\t\t};\n *\n * Of course, the same buttons can also be used in the\n * {@link module:core/editor/editorconfig~EditorConfig#toolbar main editor toolbar}.\n *\n * Read more about configuring toolbar in {@link module:core/editor/editorconfig~EditorConfig#toolbar}.\n *\n * @member {Array.<String>} module:table/table~TableConfig#tableToolbar\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/converters/upcasttable\n */\n\nimport { createEmptyTableCell } from '../commands/utils';\n\n/**\n * View table element to model table element conversion helper.\n *\n * This conversion helper converts the table element as well as table rows.\n *\n * @returns {Function} Conversion helper.\n */\nexport default function upcastTable() {\n\treturn dispatcher => {\n\t\tdispatcher.on( 'element:table', ( evt, data, conversionApi ) => {\n\t\t\tconst viewTable = data.viewItem;\n\n\t\t\t// When element was already consumed then skip it.\n\t\t\tif ( !conversionApi.consumable.test( viewTable, { name: true } ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { rows, headingRows, headingColumns } = scanTable( viewTable );\n\n\t\t\t// Only set attributes if values is greater then 0.\n\t\t\tconst attributes = {};\n\n\t\t\tif ( headingColumns ) {\n\t\t\t\tattributes.headingColumns = headingColumns;\n\t\t\t}\n\n\t\t\tif ( headingRows ) {\n\t\t\t\tattributes.headingRows = headingRows;\n\t\t\t}\n\n\t\t\tconst table = conversionApi.writer.createElement( 'table', attributes );\n\n\t\t\t// Insert element on allowed position.\n\t\t\tconst splitResult = conversionApi.splitToAllowedParent( table, data.modelCursor );\n\n\t\t\t// When there is no split result it means that we can't insert element to model tree, so let's skip it.\n\t\t\tif ( !splitResult ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconversionApi.writer.insert( table, splitResult.position );\n\t\t\tconversionApi.consumable.consume( viewTable, { name: true } );\n\n\t\t\tif ( rows.length ) {\n\t\t\t\t// Upcast table rows in proper order (heading rows first).\n\t\t\t\trows.forEach( row => conversionApi.convertItem( row, conversionApi.writer.createPositionAt( table, 'end' ) ) );\n\t\t\t} else {\n\t\t\t\t// Create one row and one table cell for empty table.\n\t\t\t\tconst row = conversionApi.writer.createElement( 'tableRow' );\n\t\t\t\tconversionApi.writer.insert( row, conversionApi.writer.createPositionAt( table, 'end' ) );\n\n\t\t\t\tcreateEmptyTableCell( conversionApi.writer, conversionApi.writer.createPositionAt( row, 'end' ) );\n\t\t\t}\n\n\t\t\t// Set conversion result range.\n\t\t\tdata.modelRange = conversionApi.writer.createRange(\n\t\t\t\t// Range should start before inserted element\n\t\t\t\tconversionApi.writer.createPositionBefore( table ),\n\t\t\t\t// Should end after but we need to take into consideration that children could split our\n\t\t\t\t// element, so we need to move range after parent of the last converted child.\n\t\t\t\t// before: <allowed>[]</allowed>\n\t\t\t\t// after: <allowed>[<converted><child></child></converted><child></child><converted>]</converted></allowed>\n\t\t\t\tconversionApi.writer.createPositionAfter( table )\n\t\t\t);\n\n\t\t\t// Now we need to check where the modelCursor should be.\n\t\t\t// If we had to split parent to insert our element then we want to continue conversion inside split parent.\n\t\t\t//\n\t\t\t// before: <allowed><notAllowed>[]</notAllowed></allowed>\n\t\t\t// after:  <allowed><notAllowed></notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\n\t\t\tif ( splitResult.cursorParent ) {\n\t\t\t\tdata.modelCursor = conversionApi.writer.createPositionAt( splitResult.cursorParent, 0 );\n\n\t\t\t\t// Otherwise just continue after inserted element.\n\t\t\t} else {\n\t\t\t\tdata.modelCursor = data.modelRange.end;\n\t\t\t}\n\t\t} );\n\t};\n}\n\nexport function upcastTableCell( elementName ) {\n\treturn dispatcher => {\n\t\tdispatcher.on( `element:${ elementName }`, ( evt, data, conversionApi ) => {\n\t\t\tconst viewTableCell = data.viewItem;\n\n\t\t\t// When element was already consumed then skip it.\n\t\t\tif ( !conversionApi.consumable.test( viewTableCell, { name: true } ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst tableCell = conversionApi.writer.createElement( 'tableCell' );\n\n\t\t\t// Insert element on allowed position.\n\t\t\tconst splitResult = conversionApi.splitToAllowedParent( tableCell, data.modelCursor );\n\n\t\t\t// When there is no split result it means that we can't insert element to model tree, so let's skip it.\n\t\t\tif ( !splitResult ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconversionApi.writer.insert( tableCell, splitResult.position );\n\t\t\tconversionApi.consumable.consume( viewTableCell, { name: true } );\n\n\t\t\tconst modelCursor = conversionApi.writer.createPositionAt( tableCell, 0 );\n\t\t\tconversionApi.convertChildren( viewTableCell, modelCursor );\n\n\t\t\t// Ensure a paragraph in the model for empty table cells.\n\t\t\tif ( !tableCell.childCount ) {\n\t\t\t\tconversionApi.writer.insertElement( 'paragraph', modelCursor );\n\t\t\t}\n\n\t\t\t// Set conversion result range.\n\t\t\tdata.modelRange = conversionApi.writer.createRange(\n\t\t\t\t// Range should start before inserted element\n\t\t\t\tconversionApi.writer.createPositionBefore( tableCell ),\n\t\t\t\t// Should end after but we need to take into consideration that children could split our\n\t\t\t\t// element, so we need to move range after parent of the last converted child.\n\t\t\t\t// before: <allowed>[]</allowed>\n\t\t\t\t// after: <allowed>[<converted><child></child></converted><child></child><converted>]</converted></allowed>\n\t\t\t\tconversionApi.writer.createPositionAfter( tableCell )\n\t\t\t);\n\n\t\t\t// Continue after inserted element.\n\t\t\tdata.modelCursor = data.modelRange.end;\n\t\t} );\n\t};\n}\n\n// Scans table rows and extracts required metadata from the table:\n//\n// headingRows    - the number of rows that goes as table header.\n// headingColumns - max number of row headings.\n// rows           - sorted `<tr>`s as they should go into the model - ie. if `<thead>` is inserted after `<tbody>` in the view.\n//\n// @param {module:engine/view/element~Element} viewTable\n// @returns {{headingRows, headingColumns, rows}}\nfunction scanTable( viewTable ) {\n\tconst tableMeta = {\n\t\theadingRows: 0,\n\t\theadingColumns: 0\n\t};\n\n\t// The `<tbody>` and <thead> sections in the DOM do not have to be in order `<thead>` -> `<tbody>` and there might be more then one of\n\t// them.\n\t// As the model does not have those sections, rows from different sections must be sorted.\n\t// For example, below is a valid HTML table:\n\t//\n\t//\t\t<table>\n\t//\t\t\t<tbody><tr><td>2</td></tr></tbody>\n\t//\t\t\t<thead><tr><td>1</td></tr></thead>\n\t//\t\t\t<tbody><tr><td>3</td></tr></tbody>\n\t//\t\t</table>\n\t//\n\t// But browsers will render rows in order as: 1 as heading and 2 and 3 as (body).\n\tconst headRows = [];\n\tconst bodyRows = [];\n\n\t// Currently the editor does not support more then one <thead> section.\n\t// Only the first <thead> from the view will be used as heading rows and others will be converted to body rows.\n\tlet firstTheadElement;\n\n\tfor ( const tableChild of Array.from( viewTable.getChildren() ) ) {\n\t\t// Only <thead>, <tbody> & <tfoot> from allowed table children can have <tr>s.\n\t\t// The else is for future purposes (mainly <caption>).\n\t\tif ( tableChild.name === 'tbody' || tableChild.name === 'thead' || tableChild.name === 'tfoot' ) {\n\t\t\t// Save the first <thead> in the table as table header - all other ones will be converted to table body rows.\n\t\t\tif ( tableChild.name === 'thead' && !firstTheadElement ) {\n\t\t\t\tfirstTheadElement = tableChild;\n\t\t\t}\n\n\t\t\t// There might be some extra empty text nodes between the `tr`s.\n\t\t\t// Make sure further code operates on `tr`s only. (#145)\n\t\t\tconst trs = Array.from( tableChild.getChildren() ).filter( el => el.is( 'element', 'tr' ) );\n\n\t\t\tfor ( const tr of trs ) {\n\t\t\t\t// This <tr> is a child of a first <thead> element.\n\t\t\t\tif ( tr.parent.name === 'thead' && tr.parent === firstTheadElement ) {\n\t\t\t\t\ttableMeta.headingRows++;\n\t\t\t\t\theadRows.push( tr );\n\t\t\t\t} else {\n\t\t\t\t\tbodyRows.push( tr );\n\t\t\t\t\t// For other rows check how many column headings this row has.\n\n\t\t\t\t\tconst headingCols = scanRowForHeadingColumns( tr, tableMeta, firstTheadElement );\n\n\t\t\t\t\tif ( headingCols > tableMeta.headingColumns ) {\n\t\t\t\t\t\ttableMeta.headingColumns = headingCols;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ttableMeta.rows = [ ...headRows, ...bodyRows ];\n\n\treturn tableMeta;\n}\n\n// Scans `<tr>` and its children for metadata:\n// - For heading row:\n//     - either adds this row to heading or body rows.\n//     - updates number of heading rows.\n// - For body rows:\n//     - calculates the number of column headings.\n//\n// @param {module:engine/view/element~Element} tr\n// @returns {Number}\nfunction scanRowForHeadingColumns( tr ) {\n\tlet headingColumns = 0;\n\tlet index = 0;\n\n\t// Filter out empty text nodes from tr children.\n\tconst children = Array.from( tr.getChildren() )\n\t\t.filter( child => child.name === 'th' || child.name === 'td' );\n\n\t// Count starting adjacent <th> elements of a <tr>.\n\twhile ( index < children.length && children[ index ].name === 'th' ) {\n\t\tconst th = children[ index ];\n\n\t\t// Adjust columns calculation by the number of spanned columns.\n\t\tconst colspan = parseInt( th.getAttribute( 'colspan' ) || 1 );\n\n\t\theadingColumns = headingColumns + colspan;\n\t\tindex++;\n\t}\n\n\treturn headingColumns;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/tablewalker\n */\n\n/**\n * Table iterator class. It allows to iterate over table cells. For each cell the iterator yields\n * {@link module:table/tablewalker~TableWalkerValue} with proper table cell attributes.\n */\nexport default class TableWalker {\n\t/**\n\t * Creates an instance of the table walker.\n\t *\n\t *\n\t * The table walker iterates internally by traversing the table from row index = 0 and column index = 0.\n\t * It walks row by row and column by column in order to output values defined in the constructor.\n\t * By default it will output only those locations that are occupied by a cell. To include also spanned rows and columns,\n\t * pass the `includeSpanned` option to the constructor.\n\t *\n\t * The most important values of the iterator are column and row indexes of a cell.\n\t *\n\t * To iterate over a given row:\n\t *\n\t *\t\tconst tableWalker = new TableWalker( table, { startRow: 1, endRow: 2 } );\n\t *\n\t *\t\tfor ( const cellInfo of tableWalker ) {\n\t *\t\t\tconsole.log( 'A cell at row ' + cellInfo.row + ' and column ' + cellInfo.column );\n\t *\t\t}\n\t *\n\t * For instance the code above for the following table:\n\t *\n\t *\t\t+----+----+----+----+----+----+\n\t *\t\t| 00      | 02 | 03 | 04 | 05 |\n\t *\t\t|         +----+----+----+----+\n\t *\t\t|         | 12      | 14 | 15 |\n\t *\t\t|         +----+----+----+    +\n\t *\t\t|         | 22           |    |\n\t *\t\t|----+----+----+----+----+    +\n\t *\t\t| 30 | 31 | 32 | 33 | 34 |    |\n\t *\t\t+----+----+----+----+----+----+\n\t *\n\t * will log in the console:\n\t *\n\t *\t\t'A cell at row 1 and column 2'\n\t *\t\t'A cell at row 1 and column 4'\n\t *\t\t'A cell at row 1 and column 5'\n\t *\t\t'A cell at row 2 and column 2'\n\t *\n\t * To also iterate over spanned cells:\n\t *\n\t *\t\tconst tableWalker = new TableWalker( table, { startRow: 1, endRow: 1, includeSpanned: true } );\n\t *\n\t *\t\tfor ( const cellInfo of tableWalker ) {\n\t *\t\t\tconsole.log( 'Cell at ' + cellInfo.row + ' x ' + cellInfo.column + ' : ' + ( cellInfo.cell ? 'has data' : 'is spanned' ) );\n\t *\t\t}\n\t *\n\t * will log in the console for the table from previous example:\n\t *\n\t *\t\t'Cell at 1 x 0 : is spanned'\n\t *\t\t'Cell at 1 x 1 : is spanned'\n\t *\t\t'Cell at 1 x 2 : has data'\n\t *\t\t'Cell at 1 x 3 : is spanned'\n\t *\t\t'Cell at 1 x 4 : has data'\n\t *\t\t'Cell at 1 x 5 : has data'\n\t *\n\t * @constructor\n\t * @param {module:engine/model/element~Element} table A table over which the walker iterates.\n\t * @param {Object} [options={}] An object with configuration.\n\t * @param {Number} [options.column] A column index for which this iterator will output cells.\n\t * @param {Number} [options.startRow=0] A row index for which this iterator should start.\n\t * @param {Number} [options.endRow] A row index for which this iterator should end.\n\t * @param {Boolean} [options.includeSpanned] Also return values for spanned cells.\n\t */\n\tconstructor( table, options = {} ) {\n\t\t/**\n\t\t * The walker's table element.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/element~Element}\n\t\t */\n\t\tthis.table = table;\n\n\t\t/**\n\t\t * A row index on which this iterator will start.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.startRow = options.startRow || 0;\n\n\t\t/**\n\t\t * A row index on which this iterator will end.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.endRow = typeof options.endRow == 'number' ? options.endRow : undefined;\n\n\t\t/**\n\t\t * Enables output of spanned cells that are normally not yielded.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.includeSpanned = !!options.includeSpanned;\n\n\t\t/**\n\t\t * If set, the table walker will only output cells of a given column or cells that overlap it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.column = typeof options.column == 'number' ? options.column : undefined;\n\n\t\t/**\n\t\t * Row indexes to skip from the iteration.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set<Number>}\n\t\t * @private\n\t\t */\n\t\tthis._skipRows = new Set();\n\n\t\t/**\n\t\t * The current row index.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t * @private\n\t\t */\n\t\tthis._row = 0;\n\n\t\t/**\n\t\t * The current column index.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t * @private\n\t\t */\n\t\tthis._column = 0;\n\n\t\t/**\n\t\t * The cell index in a parent row. For spanned cells when {@link #includeSpanned} is set to `true`,\n\t\t * this represents the index of the next table cell.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t * @private\n\t\t */\n\t\tthis._cell = 0;\n\n\t\t/**\n\t\t * Holds a map of spanned cells in a table.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Map<Number, Map.<Number, Number>>}\n\t\t * @private\n\t\t */\n\t\tthis._spannedCells = new Map();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<module:table/tablewalker~TableWalkerValue>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets the next table walker's value.\n\t *\n\t * @returns {module:table/tablewalker~TableWalkerValue} The next table walker's value.\n\t */\n\tnext() {\n\t\tconst row = this.table.getChild( this._row );\n\n\t\t// Iterator is done when no row (table end) or the row is after #endRow.\n\t\tif ( !row || this._isOverEndRow() ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Spanned cell location handling.\n\t\tif ( this._isSpanned( this._row, this._column ) ) {\n\t\t\t// Current column must be kept as it will be updated before returning current value.\n\t\t\tconst currentColumn = this._column;\n\t\t\tconst outValue = this._formatOutValue( undefined, currentColumn );\n\n\t\t\t// Advance to next column - always.\n\t\t\tthis._column++;\n\n\t\t\tconst skipCurrentValue = !this.includeSpanned || this._shouldSkipRow() || this._shouldSkipColumn( currentColumn, 1 );\n\n\t\t\t// The current value will be returned only if #includedSpanned=true and also current row and column are not skipped.\n\t\t\treturn skipCurrentValue ? this.next() : outValue;\n\t\t}\n\n\t\t// The cell location is not spanned by other cells.\n\t\tconst cell = row.getChild( this._cell );\n\n\t\tif ( !cell ) {\n\t\t\t// If there are no more cells left in row advance to next row.\n\t\t\tthis._row++;\n\t\t\t// And reset column & cell indexes.\n\t\t\tthis._column = 0;\n\t\t\tthis._cell = 0;\n\n\t\t\t// Return next value.\n\t\t\treturn this.next();\n\t\t}\n\n\t\t// Read table cell attributes.\n\t\tconst colspan = parseInt( cell.getAttribute( 'colspan' ) || 1 );\n\t\tconst rowspan = parseInt( cell.getAttribute( 'rowspan' ) || 1 );\n\n\t\t// Record this cell spans if it's not 1x1 cell.\n\t\tif ( colspan > 1 || rowspan > 1 ) {\n\t\t\tthis._recordSpans( this._row, this._column, rowspan, colspan );\n\t\t}\n\n\t\t// Current column must be kept as it will be updated before returning current value.\n\t\tconst currentColumn = this._column;\n\t\tconst outValue = this._formatOutValue( cell, currentColumn, rowspan, colspan );\n\n\t\t// Advance to next column before returning value.\n\t\tthis._column++;\n\n\t\t// Advance to next cell in a parent row before returning value.\n\t\tthis._cell++;\n\n\t\tconst skipCurrentValue = this._shouldSkipRow() || this._shouldSkipColumn( currentColumn, colspan );\n\n\t\t// The current value will be returned only if current row & column are not skipped.\n\t\treturn skipCurrentValue ? this.next() : outValue;\n\t}\n\n\t/**\n\t * Marks a row to skip in the next iteration. It will also skip cells from the current row if there are any cells from the current row\n\t * to output.\n\t *\n\t * @param {Number} row Row index to skip.\n\t */\n\tskipRow( row ) {\n\t\tthis._skipRows.add( row );\n\t}\n\n\t/**\n\t * Checks if the current row is over {@link #endRow}.\n\t *\n\t * @returns {Boolean}\n\t * @private\n\t */\n\t_isOverEndRow() {\n\t\t// If {@link #endRow) is defined skip all rows above it.\n\t\treturn this.endRow !== undefined && this._row > this.endRow;\n\t}\n\n\t/**\n\t * A common method for formatting the iterator's output value.\n\t *\n\t * @param {module:engine/model/element~Element|undefined} cell The table cell to output. It might be undefined for spanned cell\n\t * locations.\n\t * @param {Number} column Column index (use the cached value)\n\t * @param {Number} rowspan Rowspan of the current cell.\n\t * @param {Number} colspan Colspan of the current cell.\n\t * @returns {{done: boolean, value: {cell: *, row: Number, column: *, rowspan: *, colspan: *, cellIndex: Number}}}\n\t * @private\n\t */\n\t_formatOutValue( cell, column, rowspan = 1, colspan = 1 ) {\n\t\treturn {\n\t\t\tdone: false,\n\t\t\tvalue: {\n\t\t\t\tcell,\n\t\t\t\trow: this._row,\n\t\t\t\tcolumn,\n\t\t\t\trowspan,\n\t\t\t\tcolspan,\n\t\t\t\tcellIndex: this._cell\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Checks if the current row should be skipped.\n\t *\n\t * @returns {Boolean}\n\t * @private\n\t */\n\t_shouldSkipRow() {\n\t\tconst rowIsBelowStartRow = this._row < this.startRow;\n\t\tconst rowIsMarkedAsSkipped = this._skipRows.has( this._row );\n\n\t\treturn rowIsBelowStartRow || rowIsMarkedAsSkipped;\n\t}\n\n\t/**\n\t * Checks if the current column should be skipped.\n\t *\n\t * @param {Number} column\n\t * @param {Number} colspan\n\t * @returns {Boolean}\n\t * @private\n\t */\n\t_shouldSkipColumn( column, colspan ) {\n\t\tif ( this.column === undefined ) {\n\t\t\t// The {@link #column} is not defined so output all columns.\n\t\t\treturn false;\n\t\t}\n\n\t\t// When outputting cells from given column we skip:\n\t\t// - Cells that are not on that column.\n\t\tconst isCurrentColumn = column === this.column;\n\t\t// - CSells that are before given column and they overlaps given column.\n\t\tconst isPreviousThatOverlapsColumn = column < this.column && column + colspan > this.column;\n\n\t\treturn !isCurrentColumn && !isPreviousThatOverlapsColumn;\n\t}\n\n\t/**\n\t * Checks if the current cell location (row x column) is spanned by another cell.\n\t *\n\t * @param {Number} row Row index of a cell location to check.\n\t * @param {Number} column Column index of a cell location to check.\n\t * @returns {Boolean}\n\t * @private\n\t */\n\t_isSpanned( row, column ) {\n\t\tif ( !this._spannedCells.has( row ) ) {\n\t\t\t// No spans for given row.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst rowSpans = this._spannedCells.get( row );\n\n\t\t// If spans for given rows has entry for column it means that this location if spanned by other cell.\n\t\treturn rowSpans.has( column );\n\t}\n\n\t/**\n\t * Updates spanned cells map relative to the current cell location and its span dimensions.\n\t *\n\t * @param {Number} row Row index of a cell.\n\t * @param {Number} column Column index of a cell.\n\t * @param {Number} rowspan Cell height.\n\t * @param {Number} colspan Cell width.\n\t * @private\n\t */\n\t_recordSpans( row, column, rowspan, colspan ) {\n\t\t// This will update all cell locations after current column - ie a cell has colspan set.\n\t\tfor ( let columnToUpdate = column + 1; columnToUpdate <= column + colspan - 1; columnToUpdate++ ) {\n\t\t\tthis._markSpannedCell( row, columnToUpdate );\n\t\t}\n\n\t\t// This will update all rows below current up to row's height.\n\t\tfor ( let rowToUpdate = row + 1; rowToUpdate < row + rowspan; rowToUpdate++ ) {\n\t\t\tfor ( let columnToUpdate = column; columnToUpdate <= column + colspan - 1; columnToUpdate++ ) {\n\t\t\t\tthis._markSpannedCell( rowToUpdate, columnToUpdate );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Marks the cell location as spanned by another cell.\n\t *\n\t * @param {Number} row Row index of the cell location.\n\t * @param {Number} column Column index of the cell location.\n\t * @private\n\t */\n\t_markSpannedCell( row, column ) {\n\t\tif ( !this._spannedCells.has( row ) ) {\n\t\t\tthis._spannedCells.set( row, new Map() );\n\t\t}\n\n\t\tconst rowSpans = this._spannedCells.get( row );\n\n\t\trowSpans.set( column, true );\n\t}\n}\n\n/**\n * An object returned by {@link module:table/tablewalker~TableWalker} when traversing table cells.\n *\n * @typedef {Object} module:table/tablewalker~TableWalkerValue\n * @property {module:engine/model/element~Element} [cell] The current table cell. Might be empty if\n * {@link module:table/tablewalker~TableWalker#includeSpanned} is set to `true`.\n * @property {Number} row The row index of a cell.\n * @property {Number} column The column index of a cell. Column index is adjusted to widths and heights of previous cells.\n * @property {Number} [colspan] The `colspan` attribute of a cell. It is always defined even if the model attribute is not present. Not\n * set if {@link module:table/tablewalker~TableWalker#includeSpanned} is set to `true`.\n * @property {Number} [rowspan] The `rowspan` attribute of a cell. It is always defined even if the model attribute is not present. Not\n * set if {@link module:table/tablewalker~TableWalker#includeSpanned} is set to `true`.\n * @property {Number} cellIndex The index of the current cell in a parent row. When using the `includeSpanned` option it will indicate the\n * next child index if #cell is empty (which indicates that the cell is spanned by another cell).\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/converters/downcast\n */\n\nimport TableWalker from './../tablewalker';\nimport { toWidgetEditable } from '@ckeditor/ckeditor5-widget/src/utils';\nimport { toTableWidget } from '../utils';\n\n/**\n * Model table element to view table element conversion helper.\n *\n * This conversion helper creates the whole table element with child elements.\n *\n * @param {Object} options\n * @param {Boolean} options.asWidget If set to `true`, the downcast conversion will produce a widget.\n * @returns {Function} Conversion helper.\n */\nexport function downcastInsertTable( options = {} ) {\n\treturn dispatcher => dispatcher.on( 'insert:table', ( evt, data, conversionApi ) => {\n\t\tconst table = data.item;\n\n\t\tif ( !conversionApi.consumable.consume( table, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Consume attributes if present to not fire attribute change downcast\n\t\tconversionApi.consumable.consume( table, 'attribute:headingRows:table' );\n\t\tconversionApi.consumable.consume( table, 'attribute:headingColumns:table' );\n\n\t\tconst asWidget = options && options.asWidget;\n\n\t\tconst figureElement = conversionApi.writer.createContainerElement( 'figure', { class: 'table' } );\n\t\tconst tableElement = conversionApi.writer.createContainerElement( 'table' );\n\t\tconversionApi.writer.insert( conversionApi.writer.createPositionAt( figureElement, 0 ), tableElement );\n\n\t\tlet tableWidget;\n\n\t\tif ( asWidget ) {\n\t\t\ttableWidget = toTableWidget( figureElement, conversionApi.writer );\n\t\t}\n\n\t\tconst tableWalker = new TableWalker( table );\n\n\t\tconst tableAttributes = {\n\t\t\theadingRows: table.getAttribute( 'headingRows' ) || 0,\n\t\t\theadingColumns: table.getAttribute( 'headingColumns' ) || 0\n\t\t};\n\n\t\t// Cache for created table rows.\n\t\tconst viewRows = new Map();\n\n\t\tfor ( const tableWalkerValue of tableWalker ) {\n\t\t\tconst { row, cell } = tableWalkerValue;\n\n\t\t\tconst tableSection = getOrCreateTableSection( getSectionName( row, tableAttributes ), tableElement, conversionApi );\n\t\t\tconst tableRow = table.getChild( row );\n\n\t\t\tconst trElement = viewRows.get( row ) || createTr( tableRow, row, tableSection, conversionApi );\n\t\t\tviewRows.set( row, trElement );\n\n\t\t\t// Consume table cell - it will be always consumed as we convert whole table at once.\n\t\t\tconversionApi.consumable.consume( cell, 'insert' );\n\n\t\t\tconst insertPosition = conversionApi.writer.createPositionAt( trElement, 'end' );\n\n\t\t\tcreateViewTableCellElement( tableWalkerValue, tableAttributes, insertPosition, conversionApi, options );\n\t\t}\n\n\t\tconst viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n\n\t\tconversionApi.mapper.bindElements( table, asWidget ? tableWidget : figureElement );\n\t\tconversionApi.writer.insert( viewPosition, asWidget ? tableWidget : figureElement );\n\t} );\n}\n\n/**\n * Model row element to view `<tr>` element conversion helper.\n *\n * This conversion helper creates the whole `<tr>` element with child elements.\n *\n * @returns {Function} Conversion helper.\n */\nexport function downcastInsertRow( options = {} ) {\n\treturn dispatcher => dispatcher.on( 'insert:tableRow', ( evt, data, conversionApi ) => {\n\t\tconst tableRow = data.item;\n\n\t\tif ( !conversionApi.consumable.consume( tableRow, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst table = tableRow.parent;\n\n\t\tconst figureElement = conversionApi.mapper.toViewElement( table );\n\t\tconst tableElement = getViewTable( figureElement );\n\n\t\tconst row = table.getChildIndex( tableRow );\n\n\t\tconst tableWalker = new TableWalker( table, { startRow: row, endRow: row } );\n\n\t\tconst tableAttributes = {\n\t\t\theadingRows: table.getAttribute( 'headingRows' ) || 0,\n\t\t\theadingColumns: table.getAttribute( 'headingColumns' ) || 0\n\t\t};\n\n\t\t// Cache for created table rows.\n\t\tconst viewRows = new Map();\n\n\t\tfor ( const tableWalkerValue of tableWalker ) {\n\t\t\tconst tableSection = getOrCreateTableSection( getSectionName( row, tableAttributes ), tableElement, conversionApi );\n\n\t\t\tconst trElement = viewRows.get( row ) || createTr( tableRow, row, tableSection, conversionApi );\n\t\t\tviewRows.set( row, trElement );\n\n\t\t\t// Consume table cell - it will be always consumed as we convert whole row at once.\n\t\t\tconversionApi.consumable.consume( tableWalkerValue.cell, 'insert' );\n\n\t\t\tconst insertPosition = conversionApi.writer.createPositionAt( trElement, 'end' );\n\n\t\t\tcreateViewTableCellElement( tableWalkerValue, tableAttributes, insertPosition, conversionApi, options );\n\t\t}\n\t} );\n}\n\n/**\n * Model table cell element to view `<td>` or `<th>` element conversion helper.\n *\n * This conversion helper will create proper `<th>` elements for table cells that are in the heading section (heading row or column)\n * and `<td>` otherwise.\n *\n * @returns {Function} Conversion helper.\n */\nexport function downcastInsertCell( options = {} ) {\n\treturn dispatcher => dispatcher.on( 'insert:tableCell', ( evt, data, conversionApi ) => {\n\t\tconst tableCell = data.item;\n\n\t\tif ( !conversionApi.consumable.consume( tableCell, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\t\tconst rowIndex = table.getChildIndex( tableRow );\n\n\t\tconst tableWalker = new TableWalker( table, { startRow: rowIndex, endRow: rowIndex } );\n\n\t\tconst tableAttributes = {\n\t\t\theadingRows: table.getAttribute( 'headingRows' ) || 0,\n\t\t\theadingColumns: table.getAttribute( 'headingColumns' ) || 0\n\t\t};\n\n\t\t// We need to iterate over a table in order to get proper row & column values from a walker\n\t\tfor ( const tableWalkerValue of tableWalker ) {\n\t\t\tif ( tableWalkerValue.cell === tableCell ) {\n\t\t\t\tconst trElement = conversionApi.mapper.toViewElement( tableRow );\n\t\t\t\tconst insertPosition = conversionApi.writer.createPositionAt( trElement, tableRow.getChildIndex( tableCell ) );\n\n\t\t\t\tcreateViewTableCellElement( tableWalkerValue, tableAttributes, insertPosition, conversionApi, options );\n\n\t\t\t\t// No need to iterate further.\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t} );\n}\n\n/**\n * Conversion helper that acts on heading rows table attribute change.\n *\n * This converter will:\n *\n * * Rename `<td>` to `<th>` elements or vice versa depending on headings.\n * * Create `<thead>` or `<tbody>` elements if needed.\n * * Remove empty `<thead>` or `<tbody>` if needed.\n *\n * @returns {Function} Conversion helper.\n */\nexport function downcastTableHeadingRowsChange( options = {} ) {\n\tconst asWidget = !!options.asWidget;\n\n\treturn dispatcher => dispatcher.on( 'attribute:headingRows:table', ( evt, data, conversionApi ) => {\n\t\tconst table = data.item;\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst figureElement = conversionApi.mapper.toViewElement( table );\n\t\tconst viewTable = getViewTable( figureElement );\n\n\t\tconst oldRows = data.attributeOldValue;\n\t\tconst newRows = data.attributeNewValue;\n\n\t\t// The head section has grown so move rows from <tbody> to <thead>.\n\t\tif ( newRows > oldRows ) {\n\t\t\t// Filter out only those rows that are in wrong section.\n\t\t\tconst rowsToMove = Array.from( table.getChildren() ).filter( ( { index } ) => isBetween( index, oldRows - 1, newRows ) );\n\n\t\t\tconst viewTableHead = getOrCreateTableSection( 'thead', viewTable, conversionApi );\n\t\t\tmoveViewRowsToTableSection( rowsToMove, viewTableHead, conversionApi, 'end' );\n\n\t\t\t// Rename all table cells from moved rows to 'th' as they lands in <thead>.\n\t\t\tfor ( const tableRow of rowsToMove ) {\n\t\t\t\tfor ( const tableCell of tableRow.getChildren() ) {\n\t\t\t\t\trenameViewTableCell( tableCell, 'th', conversionApi, asWidget );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Cleanup: this will remove any empty section from the view which may happen when moving all rows from a table section.\n\t\t\tremoveTableSectionIfEmpty( 'tbody', viewTable, conversionApi );\n\t\t}\n\t\t// The head section has shrunk so move rows from <thead> to <tbody>.\n\t\telse {\n\t\t\t// Filter out only those rows that are in wrong section.\n\t\t\tconst rowsToMove = Array.from( table.getChildren() )\n\t\t\t\t.filter( ( { index } ) => isBetween( index, newRows - 1, oldRows ) )\n\t\t\t\t.reverse(); // The rows will be moved from <thead> to <tbody> in reverse order at the beginning of a <tbody>.\n\n\t\t\tconst viewTableBody = getOrCreateTableSection( 'tbody', viewTable, conversionApi );\n\t\t\tmoveViewRowsToTableSection( rowsToMove, viewTableBody, conversionApi, 0 );\n\n\t\t\t// Check if cells moved from <thead> to <tbody> requires renaming to <td> as this depends on current heading columns attribute.\n\t\t\tconst tableWalker = new TableWalker( table, { startRow: newRows ? newRows - 1 : newRows, endRow: oldRows - 1 } );\n\n\t\t\tconst tableAttributes = {\n\t\t\t\theadingRows: table.getAttribute( 'headingRows' ) || 0,\n\t\t\t\theadingColumns: table.getAttribute( 'headingColumns' ) || 0\n\t\t\t};\n\n\t\t\tfor ( const tableWalkerValue of tableWalker ) {\n\t\t\t\trenameViewTableCellIfRequired( tableWalkerValue, tableAttributes, conversionApi, asWidget );\n\t\t\t}\n\n\t\t\t// Cleanup: this will remove any empty section from the view which may happen when moving all rows from a table section.\n\t\t\tremoveTableSectionIfEmpty( 'thead', viewTable, conversionApi );\n\t\t}\n\n\t\tfunction isBetween( index, lower, upper ) {\n\t\t\treturn index > lower && index < upper;\n\t\t}\n\t} );\n}\n\n/**\n * Conversion helper that acts on heading columns table attribute change.\n *\n * Depending on changed attributes this converter will rename `<td` to `<th>` elements or vice versa depending of the cell column index.\n *\n * @returns {Function} Conversion helper.\n */\nexport function downcastTableHeadingColumnsChange( options = {} ) {\n\tconst asWidget = !!options.asWidget;\n\n\treturn dispatcher => dispatcher.on( 'attribute:headingColumns:table', ( evt, data, conversionApi ) => {\n\t\tconst table = data.item;\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tableAttributes = {\n\t\t\theadingRows: table.getAttribute( 'headingRows' ) || 0,\n\t\t\theadingColumns: table.getAttribute( 'headingColumns' ) || 0\n\t\t};\n\n\t\tconst oldColumns = data.attributeOldValue;\n\t\tconst newColumns = data.attributeNewValue;\n\n\t\tconst lastColumnToCheck = ( oldColumns > newColumns ? oldColumns : newColumns ) - 1;\n\n\t\tfor ( const tableWalkerValue of new TableWalker( table ) ) {\n\t\t\t// Skip cells that were not in heading section before and after the change.\n\t\t\tif ( tableWalkerValue.column > lastColumnToCheck ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\trenameViewTableCellIfRequired( tableWalkerValue, tableAttributes, conversionApi, asWidget );\n\t\t}\n\t} );\n}\n\n/**\n * Conversion helper that acts on a removed row.\n *\n * @returns {Function} Conversion helper.\n */\nexport function downcastRemoveRow() {\n\treturn dispatcher => dispatcher.on( 'remove:tableRow', ( evt, data, conversionApi ) => {\n\t\t// Prevent default remove converter.\n\t\tevt.stop();\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst mapper = conversionApi.mapper;\n\n\t\tconst viewStart = mapper.toViewPosition( data.position ).getLastMatchingPosition( value => !value.item.is( 'tr' ) );\n\t\tconst viewItem = viewStart.nodeAfter;\n\t\tconst tableSection = viewItem.parent;\n\n\t\t// Remove associated <tr> from the view.\n\t\tconst removeRange = viewWriter.createRangeOn( viewItem );\n\t\tconst removed = viewWriter.remove( removeRange );\n\n\t\tfor ( const child of viewWriter.createRangeIn( removed ).getItems() ) {\n\t\t\tmapper.unbindViewElement( child );\n\t\t}\n\n\t\t// Check if table section has any children left - if not remove it from the view.\n\t\tif ( !tableSection.childCount ) {\n\t\t\t// No need to unbind anything as table section is not represented in the model.\n\t\t\tviewWriter.remove( viewWriter.createRangeOn( tableSection ) );\n\t\t}\n\t}, { priority: 'higher' } );\n}\n\n// Renames an existing table cell in the view to a given element name.\n//\n// **Note** This method will not do anything if a view table cell was not yet converted.\n//\n// @param {module:engine/model/element~Element} tableCell\n// @param {String} desiredCellElementName\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\n// @param {Boolean} asWidget\nfunction renameViewTableCell( tableCell, desiredCellElementName, conversionApi, asWidget ) {\n\tconst viewWriter = conversionApi.writer;\n\tconst viewCell = conversionApi.mapper.toViewElement( tableCell );\n\n\t// View cell might be not yet converted - skip it as it will be properly created by cell converter later on.\n\tif ( !viewCell ) {\n\t\treturn;\n\t}\n\n\tlet renamedCell;\n\n\tif ( asWidget ) {\n\t\tconst editable = viewWriter.createEditableElement( desiredCellElementName, viewCell.getAttributes() );\n\t\trenamedCell = toWidgetEditable( editable, viewWriter );\n\n\t\tviewWriter.insert( viewWriter.createPositionAfter( viewCell ), renamedCell );\n\t\tviewWriter.move( viewWriter.createRangeIn( viewCell ), viewWriter.createPositionAt( renamedCell, 0 ) );\n\t\tviewWriter.remove( viewWriter.createRangeOn( viewCell ) );\n\t} else {\n\t\trenamedCell = viewWriter.rename( desiredCellElementName, viewCell );\n\t}\n\n\tconversionApi.mapper.bindElements( tableCell, renamedCell );\n}\n\n// Renames a table cell element in the view according to its location in the table.\n//\n// @param {module:table/tablewalker~TableWalkerValue} tableWalkerValue\n// @param {{headingColumns, headingRows}} tableAttributes\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\n// @param {Boolean} asWidget\nfunction renameViewTableCellIfRequired( tableWalkerValue, tableAttributes, conversionApi, asWidget ) {\n\tconst { cell } = tableWalkerValue;\n\n\t// Check whether current columnIndex is overlapped by table cells from previous rows.\n\tconst desiredCellElementName = getCellElementName( tableWalkerValue, tableAttributes );\n\n\tconst viewCell = conversionApi.mapper.toViewElement( cell );\n\n\t// If in single change we're converting attribute changes and inserting cell the table cell might not be inserted into view\n\t// because of child conversion is done after parent.\n\tif ( viewCell && viewCell.name !== desiredCellElementName ) {\n\t\trenameViewTableCell( cell, desiredCellElementName, conversionApi, asWidget );\n\t}\n}\n\n// Creates a table cell element in the view.\n//\n// @param {module:table/tablewalker~TableWalkerValue} tableWalkerValue\n// @param {module:engine/view/position~Position} insertPosition\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\nfunction createViewTableCellElement( tableWalkerValue, tableAttributes, insertPosition, conversionApi, options ) {\n\tconst asWidget = options && options.asWidget;\n\tconst cellElementName = getCellElementName( tableWalkerValue, tableAttributes );\n\n\tconst cellElement = asWidget ?\n\t\ttoWidgetEditable( conversionApi.writer.createEditableElement( cellElementName ), conversionApi.writer ) :\n\t\tconversionApi.writer.createContainerElement( cellElementName );\n\n\tconst tableCell = tableWalkerValue.cell;\n\n\tconst firstChild = tableCell.getChild( 0 );\n\tconst isSingleParagraph = tableCell.childCount === 1 && firstChild.name === 'paragraph';\n\n\tconversionApi.writer.insert( insertPosition, cellElement );\n\n\tif ( isSingleParagraph && !hasAnyAttribute( firstChild ) ) {\n\t\tconst innerParagraph = tableCell.getChild( 0 );\n\t\tconst paragraphInsertPosition = conversionApi.writer.createPositionAt( cellElement, 'end' );\n\n\t\tconversionApi.consumable.consume( innerParagraph, 'insert' );\n\n\t\tif ( options.asWidget ) {\n\t\t\tconst fakeParagraph = conversionApi.writer.createContainerElement( 'span' );\n\n\t\t\tconversionApi.mapper.bindElements( innerParagraph, fakeParagraph );\n\t\t\tconversionApi.writer.insert( paragraphInsertPosition, fakeParagraph );\n\n\t\t\tconversionApi.mapper.bindElements( tableCell, cellElement );\n\t\t} else {\n\t\t\tconversionApi.mapper.bindElements( tableCell, cellElement );\n\t\t\tconversionApi.mapper.bindElements( innerParagraph, cellElement );\n\t\t}\n\t} else {\n\t\tconversionApi.mapper.bindElements( tableCell, cellElement );\n\t}\n}\n\n// Creates `<tr>` view element.\n//\n// @param {module:engine/view/element~Element} tableRow\n// @param {Number} rowIndex\n// @param {module:engine/view/element~Element} tableSection\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\n// @returns {module:engine/view/element~Element}\nfunction createTr( tableRow, rowIndex, tableSection, conversionApi ) {\n\t// Will always consume since we're converting <tableRow> element from a parent <table>.\n\tconversionApi.consumable.consume( tableRow, 'insert' );\n\n\tconst trElement = conversionApi.writer.createContainerElement( 'tr' );\n\tconversionApi.mapper.bindElements( tableRow, trElement );\n\n\tconst headingRows = tableRow.parent.getAttribute( 'headingRows' ) || 0;\n\tconst offset = headingRows > 0 && rowIndex >= headingRows ? rowIndex - headingRows : rowIndex;\n\n\tconst position = conversionApi.writer.createPositionAt( tableSection, offset );\n\tconversionApi.writer.insert( position, trElement );\n\n\treturn trElement;\n}\n\n// Returns `th` for heading cells and `td` for other cells for the current table walker value.\n//\n// @param {module:table/tablewalker~TableWalkerValue} tableWalkerValue\n// @param {{headingColumns, headingRows}} tableAttributes\n// @returns {String}\nfunction getCellElementName( tableWalkerValue, tableAttributes ) {\n\tconst { row, column } = tableWalkerValue;\n\tconst { headingColumns, headingRows } = tableAttributes;\n\n\t// Column heading are all tableCells in the first `columnHeading` rows.\n\tconst isColumnHeading = headingRows && headingRows > row;\n\n\t// So a whole row gets <th> element.\n\tif ( isColumnHeading ) {\n\t\treturn 'th';\n\t}\n\n\t// Row heading are tableCells which columnIndex is lower then headingColumns.\n\tconst isRowHeading = headingColumns && headingColumns > column;\n\n\treturn isRowHeading ? 'th' : 'td';\n}\n\n// Returns the table section name for the current table walker value.\n//\n// @param {Number} row\n// @param {{headingColumns, headingRows}} tableAttributes\n// @returns {String}\nfunction getSectionName( row, tableAttributes ) {\n\treturn row < tableAttributes.headingRows ? 'thead' : 'tbody';\n}\n\n// Creates or returns an existing `<tbody>` or `<thead>` element witch caching.\n//\n// @param {String} sectionName\n// @param {module:engine/view/element~Element} viewTable\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\n// @param {Object} cachedTableSection An object that stores cached elements.\n// @returns {module:engine/view/containerelement~ContainerElement}\nfunction getOrCreateTableSection( sectionName, viewTable, conversionApi ) {\n\tconst viewTableSection = getExistingTableSectionElement( sectionName, viewTable );\n\n\treturn viewTableSection ? viewTableSection : createTableSection( sectionName, viewTable, conversionApi );\n}\n\n// Finds an existing `<tbody>` or `<thead>` element or returns undefined.\n//\n// @param {String} sectionName\n// @param {module:engine/view/element~Element} tableElement\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\nfunction getExistingTableSectionElement( sectionName, tableElement ) {\n\tfor ( const tableSection of tableElement.getChildren() ) {\n\t\tif ( tableSection.name == sectionName ) {\n\t\t\treturn tableSection;\n\t\t}\n\t}\n}\n\n// Creates a table section at the end of the table.\n//\n// @param {String} sectionName\n// @param {module:engine/view/element~Element} tableElement\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\n// @returns {module:engine/view/containerelement~ContainerElement}\nfunction createTableSection( sectionName, tableElement, conversionApi ) {\n\tconst tableChildElement = conversionApi.writer.createContainerElement( sectionName );\n\n\tconst insertPosition = conversionApi.writer.createPositionAt( tableElement, sectionName == 'tbody' ? 'end' : 0 );\n\n\tconversionApi.writer.insert( insertPosition, tableChildElement );\n\n\treturn tableChildElement;\n}\n\n// Removes an existing `<tbody>` or `<thead>` element if it is empty.\n//\n// @param {String} sectionName\n// @param {module:engine/view/element~Element} tableElement\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\nfunction removeTableSectionIfEmpty( sectionName, tableElement, conversionApi ) {\n\tconst tableSection = getExistingTableSectionElement( sectionName, tableElement );\n\n\tif ( tableSection && tableSection.childCount === 0 ) {\n\t\tconversionApi.writer.remove( conversionApi.writer.createRangeOn( tableSection ) );\n\t}\n}\n\n// Moves view table rows associated with passed model rows to the provided table section element.\n//\n// **Note** This method will skip not converted table rows.\n//\n// @param {Array.<module:engine/model/element~Element>} rowsToMove\n// @param {module:engine/view/element~Element} viewTableSection\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\n// @param {Number|'end'|'before'|'after'} offset Offset or one of the flags.\nfunction moveViewRowsToTableSection( rowsToMove, viewTableSection, conversionApi, offset ) {\n\tfor ( const tableRow of rowsToMove ) {\n\t\tconst viewTableRow = conversionApi.mapper.toViewElement( tableRow );\n\n\t\t// View table row might be not yet converted - skip it as it will be properly created by cell converter later on.\n\t\tif ( viewTableRow ) {\n\t\t\tconversionApi.writer.move(\n\t\t\t\tconversionApi.writer.createRangeOn( viewTableRow ),\n\t\t\t\tconversionApi.writer.createPositionAt( viewTableSection, offset )\n\t\t\t);\n\t\t}\n\t}\n}\n\n// Properly finds '<table>' element inside `<figure>` widget.\n//\n// @param {module:engine/view/element~Element} viewFigure\nfunction getViewTable( viewFigure ) {\n\tfor ( const child of viewFigure.getChildren() ) {\n\t\tif ( child.name === 'table' ) {\n\t\t\treturn child;\n\t\t}\n\t}\n}\n\n// Checks if element has any attribute set.\n//\n// @param {module:engine/model/element~Element element\n// @returns {Boolean}\nfunction hasAnyAttribute( element ) {\n\treturn !![ ...element.getAttributeKeys() ].length;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/inserttablecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { findOptimalInsertionPosition } from '@ckeditor/ckeditor5-widget/src/utils';\n\n/**\n * The insert table command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'insertTable'` editor command.\n *\n * To insert a table at the current selection, execute the command and specify the dimensions:\n *\n *\t\teditor.execute( 'insertTable', { rows: 20, columns: 5 } );\n *\n * @extends module:core/command~Command\n */\nexport default class InsertTableCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\t\tconst schema = model.schema;\n\n\t\tconst validParent = getInsertTableParent( selection.getFirstPosition() );\n\n\t\tthis.isEnabled = schema.checkChild( validParent, 'table' );\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * Inserts a table with the given number of rows and columns into the editor.\n\t *\n\t * @param {Object} options\n\t * @param {Number} [options.rows=2] The number of rows to create in the inserted table.\n\t * @param {Number} [options.columns=2] The number of columns to create in the inserted table.\n\t * @fires execute\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\t\tconst tableUtils = this.editor.plugins.get( 'TableUtils' );\n\n\t\tconst rows = parseInt( options.rows ) || 2;\n\t\tconst columns = parseInt( options.columns ) || 2;\n\n\t\tconst insertPosition = findOptimalInsertionPosition( selection, model );\n\n\t\tmodel.change( writer => {\n\t\t\tconst table = tableUtils.createTable( writer, rows, columns );\n\n\t\t\tmodel.insertContent( table, insertPosition );\n\n\t\t\twriter.setSelection( writer.createPositionAt( table.getNodeByPath( [ 0, 0, 0 ] ), 0 ) );\n\t\t} );\n\t}\n}\n\n// Returns valid parent to insert table\n//\n// @param {module:engine/model/position} position\nfunction getInsertTableParent( position ) {\n\tconst parent = position.parent;\n\n\treturn parent === parent.root ? parent : parent.parent;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/insertrowcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { findAncestor } from './utils';\n\n/**\n * The insert row command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'insertTableRowBelow'` and\n * `'insertTableRowAbove'` editor commands.\n *\n * To insert a row below the selected cell, execute the following command:\n *\n *\t\teditor.execute( 'insertTableRowBelow' );\n *\n * To insert a row above the selected cell, execute the following command:\n *\n *\t\teditor.execute( 'insertTableRowAbove' );\n *\n * @extends module:core/command~Command\n */\nexport default class InsertRowCommand extends Command {\n\t/**\n\t * Creates a new `InsertRowCommand` instance.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor on which this command will be used.\n\t * @param {Object} options\n\t * @param {String} [options.order=\"below\"] The order of insertion relative to the row in which the caret is located.\n\t * Possible values: `\"above\"` and `\"below\"`.\n\t */\n\tconstructor( editor, options = {} ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The order of insertion relative to the row in which the caret is located.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} module:table/commands/insertrowcommand~InsertRowCommand#order\n\t\t */\n\t\tthis.order = options.order || 'below';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst selection = this.editor.model.document.selection;\n\n\t\tconst tableParent = findAncestor( 'table', selection.getFirstPosition() );\n\n\t\tthis.isEnabled = !!tableParent;\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * Depending on the command's {@link #order} value, it inserts a row `'below'` or `'above'` the row in which selection is set.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst editor = this.editor;\n\t\tconst selection = editor.model.document.selection;\n\t\tconst tableUtils = editor.plugins.get( 'TableUtils' );\n\n\t\tconst tableCell = findAncestor( 'tableCell', selection.getFirstPosition() );\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst row = table.getChildIndex( tableRow );\n\t\tconst insertAt = this.order === 'below' ? row + 1 : row;\n\n\t\ttableUtils.insertRows( table, { rows: 1, at: insertAt } );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/insertcolumncommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { findAncestor } from './utils';\n\n/**\n * The insert column command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'insertTableColumnLeft'` and\n * `'insertTableColumnRight'` editor commands.\n *\n * To insert a column to the left of the selected cell, execute the following command:\n *\n *\t\teditor.execute( 'insertTableColumnLeft' );\n *\n * To insert a column to the right of the selected cell, execute the following command:\n *\n *\t\teditor.execute( 'insertTableColumnRight' );\n *\n * @extends module:core/command~Command\n */\nexport default class InsertColumnCommand extends Command {\n\t/**\n\t * Creates a new `InsertColumnCommand` instance.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor An editor on which this command will be used.\n\t * @param {Object} options\n\t * @param {String} [options.order=\"right\"] The order of insertion relative to the column in which the caret is located.\n\t * Possible values: `\"left\"` and `\"right\"`.\n\t */\n\tconstructor( editor, options = {} ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The order of insertion relative to the column in which the caret is located.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} module:table/commands/insertcolumncommand~InsertColumnCommand#order\n\t\t */\n\t\tthis.order = options.order || 'right';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst selection = this.editor.model.document.selection;\n\n\t\tconst tableParent = findAncestor( 'table', selection.getFirstPosition() );\n\n\t\tthis.isEnabled = !!tableParent;\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * Depending on the command's {@link #order} value, it inserts a column to the `'left'` or `'right'` of the column\n\t * in which the selection is set.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst editor = this.editor;\n\t\tconst selection = editor.model.document.selection;\n\t\tconst tableUtils = editor.plugins.get( 'TableUtils' );\n\n\t\tconst firstPosition = selection.getFirstPosition();\n\n\t\tconst tableCell = findAncestor( 'tableCell', firstPosition );\n\t\tconst table = tableCell.parent.parent;\n\n\t\tconst { column } = tableUtils.getCellLocation( tableCell );\n\t\tconst insertAt = this.order === 'right' ? column + 1 : column;\n\n\t\ttableUtils.insertColumns( table, { columns: 1, at: insertAt } );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/splitcellcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { findAncestor } from './utils';\n\n/**\n * The split cell command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'splitTableCellVertically'`\n * and `'splitTableCellHorizontally'`  editor commands.\n *\n * You can split any cell vertically or horizontally by executing this command. For example, to split the selected table cell vertically:\n *\n *\t\teditor.execute( 'splitTableCellVertically' );\n *\n * @extends module:core/command~Command\n */\nexport default class SplitCellCommand extends Command {\n\t/**\n\t * Creates a new `SplitCellCommand` instance.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor on which this command will be used.\n\t * @param {Object} options\n\t * @param {String} options.direction Indicates whether the command should split cells `'horizontally'` or `'vertically'`.\n\t */\n\tconstructor( editor, options = {} ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The direction that indicates which cell will be split.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} #direction\n\t\t */\n\t\tthis.direction = options.direction || 'horizontally';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tconst tableCell = findAncestor( 'tableCell', doc.selection.getFirstPosition() );\n\n\t\tthis.isEnabled = !!tableCell;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst document = model.document;\n\t\tconst selection = document.selection;\n\n\t\tconst firstPosition = selection.getFirstPosition();\n\t\tconst tableCell = findAncestor( 'tableCell', firstPosition );\n\n\t\tconst isHorizontally = this.direction === 'horizontally';\n\n\t\tconst tableUtils = this.editor.plugins.get( 'TableUtils' );\n\n\t\tif ( isHorizontally ) {\n\t\t\ttableUtils.splitCellHorizontally( tableCell, 2 );\n\t\t} else {\n\t\t\ttableUtils.splitCellVertically( tableCell, 2 );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/mergecellcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport TableWalker from '../tablewalker';\nimport { findAncestor, updateNumericAttribute } from './utils';\n\n/**\n * The merge cell command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'mergeTableCellRight'`, `'mergeTableCellLeft'`,\n * `'mergeTableCellUp'` and `'mergeTableCellDown'` editor commands.\n *\n * To merge a table cell at the current selection with another cell, execute the command corresponding with the preferred direction.\n *\n * For example, to merge with a cell to the right:\n *\n *\t\teditor.execute( 'mergeTableCellRight' );\n *\n * **Note**: If a table cell has a different [`rowspan`](https://www.w3.org/TR/html50/tabular-data.html#attr-tdth-rowspan)\n * (for `'mergeTableCellRight'` and `'mergeTableCellLeft'`) or [`colspan`](https://www.w3.org/TR/html50/tabular-data.html#attr-tdth-colspan)\n * (for `'mergeTableCellUp'` and `'mergeTableCellDown'`), the command will be disabled.\n *\n * @extends module:core/command~Command\n */\nexport default class MergeCellCommand extends Command {\n\t/**\n\t * Creates a new `MergeCellCommand` instance.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor on which this command will be used.\n\t * @param {Object} options\n\t * @param {String} options.direction Indicates which cell to merge with the currently selected one.\n\t * Possible values are: `'left'`, `'right'`, `'up'` and `'down'`.\n\t */\n\tconstructor( editor, options ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The direction that indicates which cell will be merged with the currently selected one.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} #direction\n\t\t */\n\t\tthis.direction = options.direction;\n\n\t\t/**\n\t\t * Whether the merge is horizontal (left/right) or vertical (up/down).\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isHorizontal\n\t\t */\n\t\tthis.isHorizontal = this.direction == 'right' || this.direction == 'left';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst cellToMerge = this._getMergeableCell();\n\n\t\tthis.isEnabled = !!cellToMerge;\n\t\t// In order to check if currently selected cell can be merged with one defined by #direction some computation are done beforehand.\n\t\t// As such we can cache it as a command's value.\n\t\tthis.value = cellToMerge;\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * Depending on the command's {@link #direction} value, it will merge the cell that is to the `'left'`, `'right'`, `'up'` or `'down'`.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst tableCell = findAncestor( 'tableCell', doc.selection.getFirstPosition() );\n\t\tconst cellToMerge = this.value;\n\t\tconst direction = this.direction;\n\n\t\tmodel.change( writer => {\n\t\t\tconst isMergeNext = direction == 'right' || direction == 'down';\n\n\t\t\t// The merge mechanism is always the same so sort cells to be merged.\n\t\t\tconst cellToExpand = isMergeNext ? tableCell : cellToMerge;\n\t\t\tconst cellToRemove = isMergeNext ? cellToMerge : tableCell;\n\n\t\t\t// Cache the parent of cell to remove for later check.\n\t\t\tconst removedTableCellRow = cellToRemove.parent;\n\n\t\t\tmergeTableCells( cellToRemove, cellToExpand, writer );\n\n\t\t\tconst spanAttribute = this.isHorizontal ? 'colspan' : 'rowspan';\n\t\t\tconst cellSpan = parseInt( tableCell.getAttribute( spanAttribute ) || 1 );\n\t\t\tconst cellToMergeSpan = parseInt( cellToMerge.getAttribute( spanAttribute ) || 1 );\n\n\t\t\t// Update table cell span attribute and merge set selection on merged contents.\n\t\t\twriter.setAttribute( spanAttribute, cellSpan + cellToMergeSpan, cellToExpand );\n\t\t\twriter.setSelection( writer.createRangeIn( cellToExpand ) );\n\n\t\t\t// Remove empty row after merging.\n\t\t\tif ( !removedTableCellRow.childCount ) {\n\t\t\t\tremoveEmptyRow( removedTableCellRow, writer );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Returns a cell that can be merged with the current cell depending on the command's direction.\n\t *\n\t * @returns {module:engine/model/element|undefined}\n\t * @private\n\t */\n\t_getMergeableCell() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst tableCell = findAncestor( 'tableCell', doc.selection.getFirstPosition() );\n\n\t\tif ( !tableCell ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tableUtils = this.editor.plugins.get( 'TableUtils' );\n\n\t\t// First get the cell on proper direction.\n\t\tconst cellToMerge = this.isHorizontal ?\n\t\t\tgetHorizontalCell( tableCell, this.direction, tableUtils ) :\n\t\t\tgetVerticalCell( tableCell, this.direction );\n\n\t\tif ( !cellToMerge ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If found check if the span perpendicular to merge direction is equal on both cells.\n\t\tconst spanAttribute = this.isHorizontal ? 'rowspan' : 'colspan';\n\t\tconst span = parseInt( tableCell.getAttribute( spanAttribute ) || 1 );\n\n\t\tconst cellToMergeSpan = parseInt( cellToMerge.getAttribute( spanAttribute ) || 1 );\n\n\t\tif ( cellToMergeSpan === span ) {\n\t\t\treturn cellToMerge;\n\t\t}\n\t}\n}\n\n// Returns the cell that can be merged horizontally.\n//\n// @param {module:engine/model/element~Element} tableCell\n// @param {String} direction\n// @returns {module:engine/model/node~Node|null}\nfunction getHorizontalCell( tableCell, direction, tableUtils ) {\n\tconst horizontalCell = direction == 'right' ? tableCell.nextSibling : tableCell.previousSibling;\n\n\tif ( !horizontalCell ) {\n\t\treturn;\n\t}\n\n\t// Sort cells:\n\tconst cellOnLeft = direction == 'right' ? tableCell : horizontalCell;\n\tconst cellOnRight = direction == 'right' ? horizontalCell : tableCell;\n\n\t// Get their column indexes:\n\tconst { column: leftCellColumn } = tableUtils.getCellLocation( cellOnLeft );\n\tconst { column: rightCellColumn } = tableUtils.getCellLocation( cellOnRight );\n\n\tconst leftCellSpan = parseInt( cellOnLeft.getAttribute( 'colspan' ) || 1 );\n\n\t// The cell on the right must have index that is distant to the cell on the left by the left cell's width (colspan).\n\tconst cellsAreTouching = leftCellColumn + leftCellSpan === rightCellColumn;\n\n\t// If the right cell's column index is different it means that there are rowspanned cells between them.\n\treturn cellsAreTouching ? horizontalCell : undefined;\n}\n\n// Returns the cell that can be merged vertically.\n//\n// @param {module:engine/model/element~Element} tableCell\n// @param {String} direction\n// @returns {module:engine/model/node~Node|null}\nfunction getVerticalCell( tableCell, direction ) {\n\tconst tableRow = tableCell.parent;\n\tconst table = tableRow.parent;\n\n\tconst rowIndex = table.getChildIndex( tableRow );\n\n\t// Don't search for mergeable cell if direction points out of the table.\n\tif ( ( direction == 'down' && rowIndex === table.childCount - 1 ) || ( direction == 'up' && rowIndex === 0 ) ) {\n\t\treturn;\n\t}\n\n\tconst rowspan = parseInt( tableCell.getAttribute( 'rowspan' ) || 1 );\n\tconst headingRows = table.getAttribute( 'headingRows' ) || 0;\n\n\tconst isMergeWithBodyCell = direction == 'down' && ( rowIndex + rowspan ) === headingRows;\n\tconst isMergeWithHeadCell = direction == 'up' && rowIndex === headingRows;\n\n\t// Don't search for mergeable cell if direction points out of the current table section.\n\tif ( headingRows && ( isMergeWithBodyCell || isMergeWithHeadCell ) ) {\n\t\treturn;\n\t}\n\n\tconst currentCellRowSpan = parseInt( tableCell.getAttribute( 'rowspan' ) || 1 );\n\tconst rowOfCellToMerge = direction == 'down' ? rowIndex + currentCellRowSpan : rowIndex;\n\n\tconst tableMap = [ ...new TableWalker( table, { endRow: rowOfCellToMerge } ) ];\n\n\tconst currentCellData = tableMap.find( value => value.cell === tableCell );\n\tconst mergeColumn = currentCellData.column;\n\n\tconst cellToMergeData = tableMap.find( ( { row, rowspan, column } ) => {\n\t\tif ( column !== mergeColumn ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( direction == 'down' ) {\n\t\t\t// If merging a cell below the mergeRow is already calculated.\n\t\t\treturn row === rowOfCellToMerge;\n\t\t} else {\n\t\t\t// If merging a cell above calculate if it spans to mergeRow.\n\t\t\treturn rowOfCellToMerge === row + rowspan;\n\t\t}\n\t} );\n\n\treturn cellToMergeData && cellToMergeData.cell;\n}\n\n// Properly removes empty row from a table. Will update `rowspan` attribute of cells that overlaps removed row.\n//\n// @param {module:engine/model/element~Element} removedTableCellRow\n// @param {module:engine/model/writer~Writer} writer\nfunction removeEmptyRow( removedTableCellRow, writer ) {\n\tconst table = removedTableCellRow.parent;\n\n\tconst removedRowIndex = table.getChildIndex( removedTableCellRow );\n\n\tfor ( const { cell, row, rowspan } of new TableWalker( table, { endRow: removedRowIndex } ) ) {\n\t\tconst overlapsRemovedRow = row + rowspan - 1 >= removedRowIndex;\n\n\t\tif ( overlapsRemovedRow ) {\n\t\t\tupdateNumericAttribute( 'rowspan', rowspan - 1, cell, writer );\n\t\t}\n\t}\n\n\twriter.remove( removedTableCellRow );\n}\n\n// Merges two table cells - will ensure that after merging cells with empty paragraph the result table cell will only have one paragraph.\n// If one of the merged table cell is empty the merged table cell will have contents of the non-empty table cell.\n// If both are empty the merged table cell will have only one empty paragraph.\n//\n// @param {module:engine/model/element~Element} cellToRemove\n// @param {module:engine/model/element~Element} cellToExpand\n// @param {module:engine/model/writer~Writer} writer\nfunction mergeTableCells( cellToRemove, cellToExpand, writer ) {\n\tif ( !isEmpty( cellToRemove ) ) {\n\t\tif ( isEmpty( cellToExpand ) ) {\n\t\t\twriter.remove( writer.createRangeIn( cellToExpand ) );\n\t\t}\n\n\t\twriter.move( writer.createRangeIn( cellToRemove ), writer.createPositionAt( cellToExpand, 'end' ) );\n\t}\n\n\t// Remove merged table cell.\n\twriter.remove( cellToRemove );\n}\n\n// Checks if passed table cell contains empty paragraph.\n//\n// @param {module:engine/model/element~Element} tableCell\n// @returns {Boolean}\nfunction isEmpty( tableCell ) {\n\treturn tableCell.childCount == 1 && tableCell.getChild( 0 ).is( 'paragraph' ) && tableCell.getChild( 0 ).isEmpty;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/removerowcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\nimport TableWalker from '../tablewalker';\nimport { findAncestor, updateNumericAttribute } from './utils';\n\n/**\n * The remove row command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'removeTableRow'` editor command.\n *\n * To remove the row containing the selected cell, execute the command:\n *\n *\t\teditor.execute( 'removeTableRow' );\n *\n * @extends module:core/command~Command\n */\nexport default class RemoveRowCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tconst tableCell = findAncestor( 'tableCell', doc.selection.getFirstPosition() );\n\n\t\tthis.isEnabled = !!tableCell && tableCell.parent.parent.childCount > 1;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\n\t\tconst firstPosition = selection.getFirstPosition();\n\t\tconst tableCell = findAncestor( 'tableCell', firstPosition );\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst currentRow = table.getChildIndex( tableRow );\n\t\tconst headingRows = table.getAttribute( 'headingRows' ) || 0;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( headingRows && currentRow <= headingRows ) {\n\t\t\t\tupdateNumericAttribute( 'headingRows', headingRows - 1, table, writer, 0 );\n\t\t\t}\n\n\t\t\tconst tableMap = [ ...new TableWalker( table, { endRow: currentRow } ) ];\n\n\t\t\tconst cellsToMove = new Map();\n\n\t\t\t// Get cells from removed row that are spanned over multiple rows.\n\t\t\ttableMap\n\t\t\t\t.filter( ( { row, rowspan } ) => row === currentRow && rowspan > 1 )\n\t\t\t\t.forEach( ( { column, cell, rowspan } ) => cellsToMove.set( column, { cell, rowspanToSet: rowspan - 1 } ) );\n\n\t\t\t// Reduce rowspan on cells that are above removed row and overlaps removed row.\n\t\t\ttableMap\n\t\t\t\t.filter( ( { row, rowspan } ) => row <= currentRow - 1 && row + rowspan > currentRow )\n\t\t\t\t.forEach( ( { cell, rowspan } ) => updateNumericAttribute( 'rowspan', rowspan - 1, cell, writer ) );\n\n\t\t\t// Move cells to another row.\n\t\t\tconst targetRow = currentRow + 1;\n\t\t\tconst tableWalker = new TableWalker( table, { includeSpanned: true, startRow: targetRow, endRow: targetRow } );\n\n\t\t\tlet previousCell;\n\n\t\t\tfor ( const { row, column, cell } of [ ...tableWalker ] ) {\n\t\t\t\tif ( cellsToMove.has( column ) ) {\n\t\t\t\t\tconst { cell: cellToMove, rowspanToSet } = cellsToMove.get( column );\n\t\t\t\t\tconst targetPosition = previousCell ?\n\t\t\t\t\t\twriter.createPositionAfter( previousCell ) :\n\t\t\t\t\t\twriter.createPositionAt( table.getChild( row ), 0 );\n\n\t\t\t\t\twriter.move( writer.createRangeOn( cellToMove ), targetPosition );\n\t\t\t\t\tupdateNumericAttribute( 'rowspan', rowspanToSet, cellToMove, writer );\n\n\t\t\t\t\tpreviousCell = cellToMove;\n\t\t\t\t} else {\n\t\t\t\t\tpreviousCell = cell;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twriter.remove( tableRow );\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/removecolumncommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\nimport TableWalker from '../tablewalker';\nimport { findAncestor, updateNumericAttribute } from './utils';\n\n/**\n * The remove column command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'removeTableColumn'` editor command.\n *\n * To remove the column containing the selected cell, execute the command:\n *\n *\t\teditor.execute( 'removeTableColumn' );\n *\n * @extends module:core/command~Command\n */\nexport default class RemoveColumnCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst editor = this.editor;\n\t\tconst selection = editor.model.document.selection;\n\t\tconst tableUtils = editor.plugins.get( 'TableUtils' );\n\n\t\tconst tableCell = findAncestor( 'tableCell', selection.getFirstPosition() );\n\n\t\tthis.isEnabled = !!tableCell && tableUtils.getColumns( tableCell.parent.parent ) > 1;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\n\t\tconst firstPosition = selection.getFirstPosition();\n\n\t\tconst tableCell = findAncestor( 'tableCell', firstPosition );\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst headingColumns = table.getAttribute( 'headingColumns' ) || 0;\n\t\tconst row = table.getChildIndex( tableRow );\n\n\t\t// Cache the table before removing or updating colspans.\n\t\tconst tableMap = [ ...new TableWalker( table ) ];\n\n\t\t// Get column index of removed column.\n\t\tconst cellData = tableMap.find( value => value.cell === tableCell );\n\t\tconst removedColumn = cellData.column;\n\n\t\tmodel.change( writer => {\n\t\t\t// Update heading columns attribute if removing a row from head section.\n\t\t\tif ( headingColumns && row <= headingColumns ) {\n\t\t\t\twriter.setAttribute( 'headingColumns', headingColumns - 1, table );\n\t\t\t}\n\n\t\t\tfor ( const { cell, column, colspan } of tableMap ) {\n\t\t\t\t// If colspaned cell overlaps removed column decrease it's span.\n\t\t\t\tif ( column <= removedColumn && colspan > 1 && column + colspan > removedColumn ) {\n\t\t\t\t\tupdateNumericAttribute( 'colspan', colspan - 1, cell, writer );\n\t\t\t\t} else if ( column === removedColumn ) {\n\t\t\t\t\t// The cell in removed column has colspan of 1.\n\t\t\t\t\twriter.remove( cell );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/setheaderrowcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\nimport { createEmptyTableCell, findAncestor, updateNumericAttribute } from './utils';\nimport TableWalker from '../tablewalker';\n\n/**\n * The header row command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'setTableColumnHeader'` editor command.\n *\n * You can make the row containing the selected cell a [header](https://www.w3.org/TR/html50/tabular-data.html#the-th-element) by executing:\n *\n *\t\teditor.execute( 'setTableRowHeader' );\n *\n * **Note:** All preceding rows will also become headers. If the current row is already a header, executing this command\n * will make it a regular row back again (including the following rows).\n *\n * @extends module:core/command~Command\n */\nexport default class SetHeaderRowCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\n\t\tconst position = selection.getFirstPosition();\n\t\tconst tableCell = findAncestor( 'tableCell', position );\n\t\tconst isInTable = !!tableCell;\n\n\t\tthis.isEnabled = isInTable;\n\n\t\t/**\n\t\t * Flag indicating whether the command is active. The command is active when the\n\t\t * {@link module:engine/model/selection~Selection} is in a header row.\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #value\n\t\t */\n\t\tthis.value = isInTable && this._isInHeading( tableCell, tableCell.parent.parent );\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * When the selection is in a non-header row, the command will set the `headingRows` table attribute to cover that row.\n\t *\n\t * When the selection is already in a header row, it will set `headingRows` so the heading section will end before that row.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\n\t\tconst position = selection.getFirstPosition();\n\t\tconst tableCell = findAncestor( 'tableCell', position );\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst currentHeadingRows = table.getAttribute( 'headingRows' ) || 0;\n\t\tconst selectionRow = tableRow.index;\n\n\t\tconst headingRowsToSet = currentHeadingRows > selectionRow ? selectionRow : selectionRow + 1;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( headingRowsToSet ) {\n\t\t\t\t// Changing heading rows requires to check if any of a heading cell is overlapping vertically the table head.\n\t\t\t\t// Any table cell that has a rowspan attribute > 1 will not exceed the table head so we need to fix it in rows below.\n\t\t\t\tconst cellsToSplit = getOverlappingCells( table, headingRowsToSet, currentHeadingRows );\n\n\t\t\t\tfor ( const cell of cellsToSplit ) {\n\t\t\t\t\tsplitHorizontally( cell, headingRowsToSet, writer );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tupdateNumericAttribute( 'headingRows', headingRowsToSet, table, writer, 0 );\n\t\t} );\n\t}\n\n\t/**\n\t * Checks if a table cell is in the heading section.\n\t *\n\t * @param {module:engine/model/element~Element} tableCell\n\t * @param {module:engine/model/element~Element} table\n\t * @returns {Boolean}\n\t * @private\n\t */\n\t_isInHeading( tableCell, table ) {\n\t\tconst headingRows = parseInt( table.getAttribute( 'headingRows' ) || 0 );\n\n\t\treturn !!headingRows && tableCell.parent.index < headingRows;\n\t}\n}\n\n// Returns cells that span beyond the new heading section.\n//\n// @param {module:engine/model/element~Element} table The table to check.\n// @param {Number} headingRowsToSet New heading rows attribute.\n// @param {Number} currentHeadingRows Current heading rows attribute.\n// @returns {Array.<module:engine/model/element~Element>}\nfunction getOverlappingCells( table, headingRowsToSet, currentHeadingRows ) {\n\tconst cellsToSplit = [];\n\n\tconst startAnalysisRow = headingRowsToSet > currentHeadingRows ? currentHeadingRows : 0;\n\t// We're analyzing only when headingRowsToSet > 0.\n\tconst endAnalysisRow = headingRowsToSet - 1;\n\n\tconst tableWalker = new TableWalker( table, { startRow: startAnalysisRow, endRow: endAnalysisRow } );\n\n\tfor ( const { row, rowspan, cell } of tableWalker ) {\n\t\tif ( rowspan > 1 && row + rowspan > headingRowsToSet ) {\n\t\t\tcellsToSplit.push( cell );\n\t\t}\n\t}\n\n\treturn cellsToSplit;\n}\n\n// Splits the table cell horizontally.\n//\n// @param {module:engine/model/element~Element} tableCell\n// @param {Number} headingRows\n// @param {module:engine/model/writer~Writer} writer\nfunction splitHorizontally( tableCell, headingRows, writer ) {\n\tconst tableRow = tableCell.parent;\n\tconst table = tableRow.parent;\n\tconst rowIndex = tableRow.index;\n\n\tconst rowspan = parseInt( tableCell.getAttribute( 'rowspan' ) );\n\tconst newRowspan = headingRows - rowIndex;\n\n\tconst attributes = {};\n\n\tconst spanToSet = rowspan - newRowspan;\n\n\tif ( spanToSet > 1 ) {\n\t\tattributes.rowspan = spanToSet;\n\t}\n\n\tconst startRow = table.getChildIndex( tableRow );\n\tconst endRow = startRow + newRowspan;\n\tconst tableMap = [ ...new TableWalker( table, { startRow, endRow, includeSpanned: true } ) ];\n\n\tlet columnIndex;\n\n\tfor ( const { row, column, cell, colspan, cellIndex } of tableMap ) {\n\t\tif ( cell === tableCell ) {\n\t\t\tcolumnIndex = column;\n\n\t\t\tif ( colspan > 1 ) {\n\t\t\t\tattributes.colspan = colspan;\n\t\t\t}\n\t\t}\n\n\t\tif ( columnIndex !== undefined && columnIndex === column && row === endRow ) {\n\t\t\tconst tableRow = table.getChild( row );\n\t\t\tconst tableCellPosition = writer.createPositionAt( tableRow, cellIndex );\n\n\t\t\tcreateEmptyTableCell( writer, tableCellPosition, attributes );\n\t\t}\n\t}\n\n\t// Update the rowspan attribute after updating table.\n\tupdateNumericAttribute( 'rowspan', newRowspan, tableCell, writer );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/setheadercolumncommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\nimport { findAncestor, updateNumericAttribute } from './utils';\n\n/**\n * The header column command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'setTableColumnHeader'` editor command.\n *\n * You can make the column containing the selected cell a [header](https://www.w3.org/TR/html50/tabular-data.html#the-th-element)\n * by executing:\n *\n *\t\teditor.execute( 'setTableColumnHeader' );\n *\n * **Note:** All preceding columns will also become headers. If the current column is already a header, executing this command\n * will make it a regular column back again (including the following columns).\n *\n * @extends module:core/command~Command\n */\nexport default class SetHeaderColumnCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\n\t\tconst position = selection.getFirstPosition();\n\t\tconst tableCell = findAncestor( 'tableCell', position );\n\n\t\tconst isInTable = !!tableCell;\n\n\t\tthis.isEnabled = isInTable;\n\n\t\t/**\n\t\t * Flag indicating whether the command is active. The command is active when the\n\t\t * {@link module:engine/model/selection~Selection} is in a header column.\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #value\n\t\t */\n\t\tthis.value = isInTable && this._isInHeading( tableCell, tableCell.parent.parent );\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * When the selection is in a non-header column, the command will set the `headingColumns` table attribute to cover that column.\n\t *\n\t * When the selection is already in a header column, it will set `headingColumns` so the heading section will end before that column.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\t\tconst tableUtils = this.editor.plugins.get( 'TableUtils' );\n\n\t\tconst position = selection.getFirstPosition();\n\t\tconst tableCell = findAncestor( 'tableCell', position.parent );\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst currentHeadingColumns = parseInt( table.getAttribute( 'headingColumns' ) || 0 );\n\t\tconst { column: selectionColumn } = tableUtils.getCellLocation( tableCell );\n\n\t\tconst headingColumnsToSet = currentHeadingColumns > selectionColumn ? selectionColumn : selectionColumn + 1;\n\n\t\tmodel.change( writer => {\n\t\t\tupdateNumericAttribute( 'headingColumns', headingColumnsToSet, table, writer, 0 );\n\t\t} );\n\t}\n\n\t/**\n\t * Checks if a table cell is in the heading section.\n\t *\n\t * @param {module:engine/model/element~Element} tableCell\n\t * @param {module:engine/model/element~Element} table\n\t * @returns {Boolean}\n\t * @private\n\t */\n\t_isInHeading( tableCell, table ) {\n\t\tconst headingColumns = parseInt( table.getAttribute( 'headingColumns' ) || 0 );\n\n\t\tconst tableUtils = this.editor.plugins.get( 'TableUtils' );\n\n\t\tconst { column } = tableUtils.getCellLocation( tableCell );\n\n\t\treturn !!headingColumns && column < headingColumns;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/tableutils\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport TableWalker from './tablewalker';\nimport { createEmptyTableCell, updateNumericAttribute } from './commands/utils';\n\n/**\n * The table utilities plugin.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class TableUtils extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'TableUtils';\n\t}\n\n\t/**\n\t * Returns the table cell location as an object with table row and table column indexes.\n\t *\n\t * For instance in the table below:\n\t *\n\t *\t\t    0   1   2   3\n\t *\t\t  +---+---+---+---+\n\t *\t\t0 | a     | b | c |\n\t *\t\t  +       +   +---+\n\t *\t\t1 |       |   | d |\n\t *\t\t  +---+---+   +---+\n\t *\t\t2 | e     |   | f |\n\t *\t\t  +---+---+---+---+\n\t *\n\t * the method will return:\n\t *\n\t *\t\tconst cellA = table.getNodeByPath( [ 0, 0 ] );\n\t *\t\teditor.plugins.get( 'TableUtils' ).getCellLocation( cellA );\n\t *\t\t// will return { row: 0, column: 0 }\n\t *\n\t *\t\tconst cellD = table.getNodeByPath( [ 1, 0 ] );\n\t *\t\teditor.plugins.get( 'TableUtils' ).getCellLocation( cellD );\n\t *\t\t// will return { row: 1, column: 3 }\n\t *\n\t * @param {module:engine/model/element~Element} tableCell\n\t * @returns {Object} Returns a `{row, column}` object.\n\t */\n\tgetCellLocation( tableCell ) {\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst rowIndex = table.getChildIndex( tableRow );\n\n\t\tconst tableWalker = new TableWalker( table, { startRow: rowIndex, endRow: rowIndex } );\n\n\t\tfor ( const { cell, row, column } of tableWalker ) {\n\t\t\tif ( cell === tableCell ) {\n\t\t\t\treturn { row, column };\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates an empty table with proper structure. The table needs to be inserted into the model,\n\t * ie. using {@link module:engine/model/model~Model#insertContent} function.\n\t *\n\t *\t\tmodel.change( ( writer ) => {\n\t *\t\t\t// Create a table of 2 rows and 7 columns:\n\t *\t\t\tconst table = tableUtils.createTable( writer, 2, 7);\n\t *\n\t *\t\t\t// Insert table to the model at the best position taking current selection:\n\t *\t\t\tmodel.insertContent( table );\n\t *\t\t}\n\t *\n\t * @param {module:engine/model/writer~Writer} writer The model writer.\n\t * @param {Number} rows The number of rows to create.\n\t * @param {Number} columns The number of columns to create.\n\t * @returns {module:engine/model/element~Element} The created table element.\n\t */\n\tcreateTable( writer, rows, columns ) {\n\t\tconst table = writer.createElement( 'table' );\n\n\t\tcreateEmptyRows( writer, table, 0, rows, columns );\n\n\t\treturn table;\n\t}\n\n\t/**\n\t * Inserts rows into a table.\n\t *\n\t *\t\teditor.plugins.get( 'TableUtils' ).insertRows( table, { at: 1, rows: 2 } );\n\t *\n\t * Assuming the table on the left, the above code will transform it to the table on the right:\n\t *\n\t *\t\trow index\n\t *\t\t  0 +---+---+---+       `at` = 1,      +---+---+---+ 0\n\t *\t\t    | a | b | c |       `rows` = 2,    | a | b | c |\n\t *\t\t  1 +   +---+---+   <-- insert here    +   +---+---+ 1\n\t *\t\t    |   | d | e |                      |   |   |   |\n\t *\t\t  2 +   +---+---+       will give:     +   +---+---+ 2\n\t *\t\t    |   | f | g |                      |   |   |   |\n\t *\t\t  3 +---+---+---+                      +   +---+---+ 3\n\t *\t\t                                       |   | d | e |\n\t *\t\t                                       +---+---+---+ 4\n\t *\t\t                                       +   + f | g |\n\t *\t\t                                       +---+---+---+ 5\n\t *\n\t * @param {module:engine/model/element~Element} table The table model element where the rows will be inserted.\n\t * @param {Object} options\n\t * @param {Number} [options.at=0] Row index at which the rows will be inserted.\n\t * @param {Number} [options.rows=1] The number of rows to insert.\n\t */\n\tinsertRows( table, options = {} ) {\n\t\tconst model = this.editor.model;\n\n\t\tconst insertAt = options.at || 0;\n\t\tconst rowsToInsert = options.rows || 1;\n\n\t\tmodel.change( writer => {\n\t\t\tconst headingRows = table.getAttribute( 'headingRows' ) || 0;\n\n\t\t\t// Inserting rows inside heading section requires to update `headingRows` attribute as the heading section will grow.\n\t\t\tif ( headingRows > insertAt ) {\n\t\t\t\twriter.setAttribute( 'headingRows', headingRows + rowsToInsert, table );\n\t\t\t}\n\n\t\t\t// Inserting at the end and at the beginning of a table doesn't require to calculate anything special.\n\t\t\tif ( insertAt === 0 || insertAt === table.childCount ) {\n\t\t\t\tcreateEmptyRows( writer, table, insertAt, rowsToInsert, this.getColumns( table ) );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Iterate over all rows above inserted rows in order to check for rowspanned cells.\n\t\t\tconst tableIterator = new TableWalker( table, { endRow: insertAt } );\n\n\t\t\t// Will hold number of cells needed to insert in created rows.\n\t\t\t// The number might be different then table cell width when there are rowspanned cells.\n\t\t\tlet cellsToInsert = 0;\n\n\t\t\tfor ( const { row, rowspan, colspan, cell } of tableIterator ) {\n\t\t\t\tconst isBeforeInsertedRow = row < insertAt;\n\t\t\t\tconst overlapsInsertedRow = row + rowspan > insertAt;\n\n\t\t\t\tif ( isBeforeInsertedRow && overlapsInsertedRow ) {\n\t\t\t\t\t// This cell overlaps inserted rows so we need to expand it further.\n\t\t\t\t\twriter.setAttribute( 'rowspan', rowspan + rowsToInsert, cell );\n\t\t\t\t}\n\n\t\t\t\t// Calculate how many cells to insert based on the width of cells in a row at insert position.\n\t\t\t\t// It might be lower then table width as some cells might overlaps inserted row.\n\t\t\t\t// In the table above the cell 'a' overlaps inserted row so only two empty cells are need to be created.\n\t\t\t\tif ( row === insertAt ) {\n\t\t\t\t\tcellsToInsert += colspan;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcreateEmptyRows( writer, table, insertAt, rowsToInsert, cellsToInsert );\n\t\t} );\n\t}\n\n\t/**\n\t * Inserts columns into a table.\n\t *\n\t *\t\teditor.plugins.get( 'TableUtils' ).insertColumns( table, { at: 1, columns: 2 } );\n\t *\n\t * Assuming the table on the left, the above code will transform it to the table on the right:\n\t *\n\t *\t\t0   1   2   3                   0   1   2   3   4   5\n\t *\t\t+---+---+---+                   +---+---+---+---+---+\n\t *\t\t| a     | b |                   | a             | b |\n\t *\t\t+       +---+                   +               +---+\n\t *\t\t|       | c |                   |               | c |\n\t *\t\t+---+---+---+     will give:    +---+---+---+---+---+\n\t *\t\t| d | e | f |                   | d |   |   | e | f |\n\t *\t\t+---+   +---+                   +---+---+---+  +---+\n\t *\t\t| g |   | h |                   | g |   |   |   | h |\n\t *\t\t+---+---+---+                   +---+---+---+---+---+\n\t *\t\t| i         |                   | i                 |\n\t *\t\t+---+---+---+                   +---+---+---+---+---+\n\t *\t\t    ^---- insert here, `at` = 1, `columns` = 2\n\t *\n\t * @param {module:engine/model/element~Element} table The table model element where the columns will be inserted.\n\t * @param {Object} options\n\t * @param {Number} [options.at=0] Column index at which the columns will be inserted.\n\t * @param {Number} [options.columns=1] The number of columns to insert.\n\t */\n\tinsertColumns( table, options = {} ) {\n\t\tconst model = this.editor.model;\n\n\t\tconst insertAt = options.at || 0;\n\t\tconst columnsToInsert = options.columns || 1;\n\n\t\tmodel.change( writer => {\n\t\t\tconst headingColumns = table.getAttribute( 'headingColumns' );\n\n\t\t\t// Inserting columns inside heading section requires to update `headingColumns` attribute as the heading section will grow.\n\t\t\tif ( insertAt < headingColumns ) {\n\t\t\t\twriter.setAttribute( 'headingColumns', headingColumns + columnsToInsert, table );\n\t\t\t}\n\n\t\t\tconst tableColumns = this.getColumns( table );\n\n\t\t\t// Inserting at the end and at the beginning of a table doesn't require to calculate anything special.\n\t\t\tif ( insertAt === 0 || tableColumns === insertAt ) {\n\t\t\t\tfor ( const tableRow of table.getChildren() ) {\n\t\t\t\t\tcreateCells( columnsToInsert, writer, writer.createPositionAt( tableRow, insertAt ? 'end' : 0 ) );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst tableWalker = new TableWalker( table, { column: insertAt, includeSpanned: true } );\n\n\t\t\tfor ( const { row, column, cell, colspan, rowspan, cellIndex } of tableWalker ) {\n\t\t\t\t// When iterating over column the table walker outputs either:\n\t\t\t\t// - cells at given column index (cell \"e\" from method docs),\n\t\t\t\t// - spanned columns (spanned cell from row between cells \"g\" and \"h\" - spanned by \"e\", only if `includeSpanned: true`),\n\t\t\t\t// - or a cell from the same row which spans over this column (cell \"a\").\n\n\t\t\t\tif ( column !== insertAt ) {\n\t\t\t\t\t// If column is different than `insertAt`, it is a cell that spans over an inserted column (cell \"a\" & \"i\").\n\t\t\t\t\t// For such cells expand them by a number of columns inserted.\n\t\t\t\t\twriter.setAttribute( 'colspan', colspan + columnsToInsert, cell );\n\n\t\t\t\t\t// The `includeSpanned` option will output the \"empty\"/spanned column so skip this row already.\n\t\t\t\t\ttableWalker.skipRow( row );\n\n\t\t\t\t\t// This cell will overlap cells in rows below so skip them also (because of `includeSpanned` option) - (cell \"a\")\n\t\t\t\t\tif ( rowspan > 1 ) {\n\t\t\t\t\t\tfor ( let i = row + 1; i < row + rowspan; i++ ) {\n\t\t\t\t\t\t\ttableWalker.skipRow( i );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// It's either cell at this column index or spanned cell by a rowspanned cell from row above.\n\t\t\t\t\t// In table above it's cell \"e\" and a spanned position from row below (empty cell between cells \"g\" and \"h\")\n\t\t\t\t\tconst insertPosition = writer.createPositionAt( table.getChild( row ), cellIndex );\n\n\t\t\t\t\tcreateCells( columnsToInsert, writer, insertPosition );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Divides a table cell vertically into several ones.\n\t *\n\t * The cell will be visually split into more cells by updating colspans of other cells in a column\n\t * and inserting cells (columns) after that cell.\n\t *\n\t * In the table below, if cell \"a\" is split to 3 cells:\n\t *\n\t *\t\t+---+---+---+\n\t *\t\t| a | b | c |\n\t *\t\t+---+---+---+\n\t *\t\t| d | e | f |\n\t *\t\t+---+---+---+\n\t *\n\t * it will result in the table below:\n\t *\n\t *\t\t+---+---+---+---+---+\n\t *\t\t| a |   |   | b | c |\n\t *\t\t+---+---+---+---+---+\n\t *\t\t| d         | e | f |\n\t *\t\t+---+---+---+---+---+\n\t *\n\t * So cell \"d\" will get its `colspan` updated to `3` and 2 cells will be added (2 columns will be created).\n\t *\n\t * Splitting a cell that already has a `colspan` attribute set will distribute the cell `colspan` evenly and the remainder\n\t * will be left to the original cell:\n\t *\n\t *\t\t+---+---+---+\n\t *\t\t| a         |\n\t *\t\t+---+---+---+\n\t *\t\t| b | c | d |\n\t *\t\t+---+---+---+\n\t *\n\t * Splitting cell \"a\" with `colspan=3` to 2 cells will create 1 cell with a `colspan=a` and cell \"a\" that will have `colspan=2`:\n\t *\n\t *\t\t+---+---+---+\n\t *\t\t| a     |   |\n\t *\t\t+---+---+---+\n\t *\t\t| b | c | d |\n\t *\t\t+---+---+---+\n\t *\n\t * @param {module:engine/model/element~Element} tableCell\n\t * @param {Number} numberOfCells\n\t */\n\tsplitCellVertically( tableCell, numberOfCells = 2 ) {\n\t\tconst model = this.editor.model;\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst rowspan = parseInt( tableCell.getAttribute( 'rowspan' ) || 1 );\n\t\tconst colspan = parseInt( tableCell.getAttribute( 'colspan' ) || 1 );\n\n\t\tmodel.change( writer => {\n\t\t\t// First check - the cell spans over multiple rows so before doing anything else just split this cell.\n\t\t\tif ( colspan > 1 ) {\n\t\t\t\t// Get spans of new (inserted) cells and span to update of split cell.\n\t\t\t\tconst { newCellsSpan, updatedSpan } = breakSpanEvenly( colspan, numberOfCells );\n\n\t\t\t\tupdateNumericAttribute( 'colspan', updatedSpan, tableCell, writer );\n\n\t\t\t\t// Each inserted cell will have the same attributes:\n\t\t\t\tconst newCellsAttributes = {};\n\n\t\t\t\t// Do not store default value in the model.\n\t\t\t\tif ( newCellsSpan > 1 ) {\n\t\t\t\t\tnewCellsAttributes.colspan = newCellsSpan;\n\t\t\t\t}\n\n\t\t\t\t// Copy rowspan of split cell.\n\t\t\t\tif ( rowspan > 1 ) {\n\t\t\t\t\tnewCellsAttributes.rowspan = rowspan;\n\t\t\t\t}\n\n\t\t\t\tconst cellsToInsert = colspan > numberOfCells ? numberOfCells - 1 : colspan - 1;\n\t\t\t\tcreateCells( cellsToInsert, writer, writer.createPositionAfter( tableCell ), newCellsAttributes );\n\t\t\t}\n\n\t\t\t// Second check - the cell has colspan of 1 or we need to create more cells then the currently one spans over.\n\t\t\tif ( colspan < numberOfCells ) {\n\t\t\t\tconst cellsToInsert = numberOfCells - colspan;\n\n\t\t\t\t// First step: expand cells on the same column as split cell.\n\t\t\t\tconst tableMap = [ ...new TableWalker( table ) ];\n\n\t\t\t\t// Get the column index of split cell.\n\t\t\t\tconst { column: splitCellColumn } = tableMap.find( ( { cell } ) => cell === tableCell );\n\n\t\t\t\t// Find cells which needs to be expanded vertically - those on the same column or those that spans over split cell's column.\n\t\t\t\tconst cellsToUpdate = tableMap.filter( ( { cell, colspan, column } ) => {\n\t\t\t\t\tconst isOnSameColumn = cell !== tableCell && column === splitCellColumn;\n\t\t\t\t\tconst spansOverColumn = ( column < splitCellColumn && column + colspan > splitCellColumn );\n\n\t\t\t\t\treturn isOnSameColumn || spansOverColumn;\n\t\t\t\t} );\n\n\t\t\t\t// Expand cells vertically.\n\t\t\t\tfor ( const { cell, colspan } of cellsToUpdate ) {\n\t\t\t\t\twriter.setAttribute( 'colspan', colspan + cellsToInsert, cell );\n\t\t\t\t}\n\n\t\t\t\t// Second step: create columns after split cell.\n\n\t\t\t\t// Each inserted cell will have the same attributes:\n\t\t\t\tconst newCellsAttributes = {};\n\n\t\t\t\t// Do not store default value in the model.\n\n\t\t\t\t// Copy rowspan of split cell.\n\t\t\t\tif ( rowspan > 1 ) {\n\t\t\t\t\tnewCellsAttributes.rowspan = rowspan;\n\t\t\t\t}\n\n\t\t\t\tcreateCells( cellsToInsert, writer, writer.createPositionAfter( tableCell ), newCellsAttributes );\n\n\t\t\t\tconst headingColumns = table.getAttribute( 'headingColumns' ) || 0;\n\n\t\t\t\t// Update heading section if split cell is in heading section.\n\t\t\t\tif ( headingColumns > splitCellColumn ) {\n\t\t\t\t\tupdateNumericAttribute( 'headingColumns', headingColumns + cellsToInsert, table, writer );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Divides a table cell horizontally into several ones.\n\t *\n\t * The cell will be visually split into more cells by updating rowspans of other cells in the row and inserting rows with a single cell\n\t * below.\n\t *\n\t * If in the table below cell \"b\" is split to 3 cells:\n\t *\n\t *\t\t+---+---+---+\n\t *\t\t| a | b | c |\n\t *\t\t+---+---+---+\n\t *\t\t| d | e | f |\n\t *\t\t+---+---+---+\n\t *\n\t * It will result in the table below:\n\t *\n\t *\t\t+---+---+---+\n\t *\t\t| a | b | c |\n\t *\t\t+   +---+   +\n\t *\t\t|   |   |   |\n\t *\t\t+   +---+   +\n\t *\t\t|   |   |   |\n\t *\t\t+---+---+---+\n\t *\t\t| d | e | f |\n\t *\t\t+---+---+---+\n\t *\n\t * So cells \"a\" and \"b\" will get their `rowspan` updated to `3` and 2 rows with a single cell will be added.\n\t *\n\t * Splitting a cell that already has a `rowspan` attribute set will distribute the cell `rowspan` evenly and the remainder\n\t * will be left to the original cell:\n\t *\n\t *\t\t+---+---+---+\n\t *\t\t| a | b | c |\n\t *\t\t+   +---+---+\n\t *\t\t|   | d | e |\n\t *\t\t+   +---+---+\n\t *\t\t|   | f | g |\n\t *\t\t+   +---+---+\n\t *\t\t|   | h | i |\n\t *\t\t+---+---+---+\n\t *\n\t * Splitting cell \"a\" with `rowspan=4` to 3 cells will create 2 cells with a `rowspan=1` and cell \"a\" will have `rowspan=2`:\n\t *\n\t *\t\t+---+---+---+\n\t *\t\t| a | b | c |\n\t *\t\t+   +---+---+\n\t *\t\t|   | d | e |\n\t *\t\t+---+---+---+\n\t *\t\t|   | f | g |\n\t *\t\t+---+---+---+\n\t *\t\t|   | h | i |\n\t *\t\t+---+---+---+\n\t *\n\t * @param {module:engine/model/element~Element} tableCell\n\t * @param {Number} numberOfCells\n\t */\n\tsplitCellHorizontally( tableCell, numberOfCells = 2 ) {\n\t\tconst model = this.editor.model;\n\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\t\tconst splitCellRow = table.getChildIndex( tableRow );\n\n\t\tconst rowspan = parseInt( tableCell.getAttribute( 'rowspan' ) || 1 );\n\t\tconst colspan = parseInt( tableCell.getAttribute( 'colspan' ) || 1 );\n\n\t\tmodel.change( writer => {\n\t\t\t// First check - the cell spans over multiple rows so before doing anything else just split this cell.\n\t\t\tif ( rowspan > 1 ) {\n\t\t\t\t// Cache table map before updating table.\n\t\t\t\tconst tableMap = [ ...new TableWalker( table, {\n\t\t\t\t\tstartRow: splitCellRow,\n\t\t\t\t\tendRow: splitCellRow + rowspan - 1,\n\t\t\t\t\tincludeSpanned: true\n\t\t\t\t} ) ];\n\n\t\t\t\t// Get spans of new (inserted) cells and span to update of split cell.\n\t\t\t\tconst { newCellsSpan, updatedSpan } = breakSpanEvenly( rowspan, numberOfCells );\n\n\t\t\t\tupdateNumericAttribute( 'rowspan', updatedSpan, tableCell, writer );\n\n\t\t\t\tconst { column: cellColumn } = tableMap.find( ( { cell } ) => cell === tableCell );\n\n\t\t\t\t// Each inserted cell will have the same attributes:\n\t\t\t\tconst newCellsAttributes = {};\n\n\t\t\t\t// Do not store default value in the model.\n\t\t\t\tif ( newCellsSpan > 1 ) {\n\t\t\t\t\tnewCellsAttributes.rowspan = newCellsSpan;\n\t\t\t\t}\n\n\t\t\t\t// Copy colspan of split cell.\n\t\t\t\tif ( colspan > 1 ) {\n\t\t\t\t\tnewCellsAttributes.colspan = colspan;\n\t\t\t\t}\n\n\t\t\t\tfor ( const { column, row, cellIndex } of tableMap ) {\n\t\t\t\t\t// As both newly created cells and the split cell might have rowspan,\n\t\t\t\t\t// the insertion of new cells must go to appropriate rows:\n\t\t\t\t\t//\n\t\t\t\t\t// 1. It's a row after split cell + it's height.\n\t\t\t\t\tconst isAfterSplitCell = row >= splitCellRow + updatedSpan;\n\t\t\t\t\t// 2. Is on the same column.\n\t\t\t\t\tconst isOnSameColumn = column === cellColumn;\n\t\t\t\t\t// 3. And it's row index is after previous cell height.\n\t\t\t\t\tconst isInEvenlySplitRow = ( row + splitCellRow + updatedSpan ) % newCellsSpan === 0;\n\n\t\t\t\t\tif ( isAfterSplitCell && isOnSameColumn && isInEvenlySplitRow ) {\n\t\t\t\t\t\tconst position = writer.createPositionAt( table.getChild( row ), cellIndex );\n\n\t\t\t\t\t\tcreateCells( 1, writer, position, newCellsAttributes );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Second check - the cell has rowspan of 1 or we need to create more cells than the current cell spans over.\n\t\t\tif ( rowspan < numberOfCells ) {\n\t\t\t\t// We already split the cell in check one so here we split to the remaining number of cells only.\n\t\t\t\tconst cellsToInsert = numberOfCells - rowspan;\n\n\t\t\t\t// This check is needed since we need to check if there are any cells from previous rows than spans over this cell's row.\n\t\t\t\tconst tableMap = [ ...new TableWalker( table, { startRow: 0, endRow: splitCellRow } ) ];\n\n\t\t\t\t// First step: expand cells.\n\t\t\t\tfor ( const { cell, rowspan, row } of tableMap ) {\n\t\t\t\t\t// Expand rowspan of cells that are either:\n\t\t\t\t\t// - on the same row as current cell,\n\t\t\t\t\t// - or are below split cell row and overlaps that row.\n\t\t\t\t\tif ( cell !== tableCell && row + rowspan > splitCellRow ) {\n\t\t\t\t\t\tconst rowspanToSet = rowspan + cellsToInsert;\n\n\t\t\t\t\t\twriter.setAttribute( 'rowspan', rowspanToSet, cell );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Second step: create rows with single cell below split cell.\n\t\t\t\tconst newCellsAttributes = {};\n\n\t\t\t\t// Copy colspan of split cell.\n\t\t\t\tif ( colspan > 1 ) {\n\t\t\t\t\tnewCellsAttributes.colspan = colspan;\n\t\t\t\t}\n\n\t\t\t\tcreateEmptyRows( writer, table, splitCellRow + 1, cellsToInsert, 1, newCellsAttributes );\n\n\t\t\t\t// Update heading section if split cell is in heading section.\n\t\t\t\tconst headingRows = table.getAttribute( 'headingRows' ) || 0;\n\n\t\t\t\tif ( headingRows > splitCellRow ) {\n\t\t\t\t\tupdateNumericAttribute( 'headingRows', headingRows + cellsToInsert, table, writer );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Returns the number of columns for a given table.\n\t *\n\t *\t\teditor.plugins.get( 'TableUtils' ).getColumns( table );\n\t *\n\t * @param {module:engine/model/element~Element} table The table to analyze.\n\t * @returns {Number}\n\t */\n\tgetColumns( table ) {\n\t\t// Analyze first row only as all the rows should have the same width.\n\t\tconst row = table.getChild( 0 );\n\n\t\treturn [ ...row.getChildren() ].reduce( ( columns, row ) => {\n\t\t\tconst columnWidth = parseInt( row.getAttribute( 'colspan' ) || 1 );\n\n\t\t\treturn columns + columnWidth;\n\t\t}, 0 );\n\t}\n}\n\n// Creates empty rows at the given index in an existing table.\n//\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/element~Element} table\n// @param {Number} insertAt Row index of row insertion.\n// @param {Number} rows Number of rows to create.\n// @param {Number} tableCellToInsert Number of cells to insert in each row.\nfunction createEmptyRows( writer, table, insertAt, rows, tableCellToInsert, attributes = {} ) {\n\tfor ( let i = 0; i < rows; i++ ) {\n\t\tconst tableRow = writer.createElement( 'tableRow' );\n\n\t\twriter.insert( tableRow, table, insertAt );\n\n\t\tcreateCells( tableCellToInsert, writer, writer.createPositionAt( tableRow, 'end' ), attributes );\n\t}\n}\n\n// Creates cells at a given position.\n//\n// @param {Number} columns Number of columns to create\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/position~Position} insertPosition\nfunction createCells( cells, writer, insertPosition, attributes = {} ) {\n\tfor ( let i = 0; i < cells; i++ ) {\n\t\tcreateEmptyTableCell( writer, insertPosition, attributes );\n\t}\n}\n\n// Evenly distributes the span of a cell to a number of provided cells.\n// The resulting spans will always be integer values.\n//\n// For instance breaking a span of 7 into 3 cells will return:\n//\n//\t\t{ newCellsSpan: 2, updatedSpan: 3 }\n//\n// as two cells will have a span of 2 and the remainder will go the first cell so its span will change to 3.\n//\n// @param {Number} span Span value do break.\n// @param {Number} numberOfCells Number of resulting spans.\n// @returns {{newCellsSpan: Number, updatedSpan: Number}}\nfunction breakSpanEvenly( span, numberOfCells ) {\n\tif ( span < numberOfCells ) {\n\t\treturn { newCellsSpan: 1, updatedSpan: 1 };\n\t}\n\n\tconst newCellsSpan = Math.floor( span / numberOfCells );\n\tconst updatedSpan = ( span - newCellsSpan * numberOfCells ) + newCellsSpan;\n\n\treturn { newCellsSpan, updatedSpan };\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/converters/table-layout-post-fixer\n */\n\nimport { createEmptyTableCell, findAncestor, updateNumericAttribute } from './../commands/utils';\nimport TableWalker from './../tablewalker';\n\n/**\n * Injects a table layout post-fixer into the model.\n *\n * The role of the table layout post-fixer is to ensure that the table rows have the correct structure\n * after a {@link module:engine/model/model~Model#change `change()`} block was executed.\n *\n * The correct structure means that:\n *\n * * All table rows have the same size.\n * * None of a table cells that extend vertically beyond their section (either header or body).\n * * A table cell has always at least one element as child.\n *\n * If the table structure is not correct, the post-fixer will automatically correct it in two steps:\n *\n * 1. It will clip table cells that extends beyond it section.\n * 2. It will add empty table cells to those rows which are narrower then the widest table row.\n *\n * ## Clipping overlapping table cells\n *\n * Such situation may occur when pasting a table (or part of a table) to the editor from external sources.\n *\n * For example, see the following table which has the cell (FOO) with the rowspan attribute (2):\n *\n *\t\t<table headingRows=\"1\">\n *\t\t\t<tableRow>\n *\t\t\t\t<tableCell rowspan=\"2\"><paragraph>FOO</paragraph></tableCell>\n *\t\t\t\t<tableCell colspan=\"2\"><paragraph>BAR</paragraph></tableCell>\n *\t\t\t</tableRow>\n *\t\t\t<tableRow>\n *\t\t\t\t<tableCell><paragraph>BAZ</paragraph></tableCell>\n *\t\t\t\t<tableCell><paragraph>XYZ</paragraph></tableCell>\n *\t\t\t</tableRow>\n *\t\t</table>\n *\n * will be rendered in the view as:\n *\n *\t\t<table>\n *\t\t\t<thead>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td rowspan=\"2\">FOO</td>\n *\t\t\t\t\t<td colspan=\"2\">BAR</td>\n *\t\t\t\t</tr>\n *\t\t\t</thead>\n *\t\t\t<tbody>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>BAZ</td>\n *\t\t\t\t\t<td>XYZ</td>\n *\t\t\t\t</tr>\n *\t\t\t</tbody>\n *\t\t</table>\n *\n * In the above example the table will be rendered as a table with two rows - one in the header and second one in the body.\n * The table cell (FOO) cannot span over multiple rows as it would expand from the header to the body section.\n * The `rowspan` attribute must be changed to (1). The value (1) is a default value of the `rowspan` attribute\n * so the `rowspan` attribute will be removed from the model.\n *\n * The table cell with BAZ contents will be in the first column of the table.\n *\n * ## Adding missing table cells\n *\n * The table post-fixer will insert empty table cells to equalize table rows sizes (number of columns).\n * The size of a table row is calculated by counting column spans of table cells - both horizontal (from the same row) and\n * vertical (from rows above).\n *\n * In the above example, the table row in the body section of the table is narrower then the row from the header - it has two cells\n * with the default colspan (1). The header row has one cell with colspan (1) and second with colspan (2).\n * The table cell (FOO) does not expand beyond the head section (and as such will be fixed in the first step of this post-fixer).\n * The post-fixer will add a missing table cell to the row in the body section of the table.\n *\n * The table from the above example will be fixed and rendered to the view as below:\n *\n *\t\t<table>\n *\t\t\t<thead>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td rowspan=\"2\">FOO</td>\n *\t\t\t\t\t<td colspan=\"2\">BAR</td>\n *\t\t\t\t</tr>\n *\t\t\t</thead>\n *\t\t\t<tbody>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>BAZ</td>\n *\t\t\t\t\t<td>XYZ</td>\n *\t\t\t\t</tr>\n *\t\t\t</tbody>\n *\t\t</table>\n *\n * ## Collaboration & Undo - Expectations vs post-fixer results\n *\n * The table post-fixer only ensures proper structure without deeper analysis of the nature of a change. As such, it might lead\n * to a structure which was not intended by the user changes. In particular, it will also fix undo steps (in conjunction with collaboration)\n * in which editor content might not return to the original state.\n *\n * This will usually happen when one or more users changes size of the table.\n *\n * As en example see a table below:\n *\n *\t\t<table>\n *\t\t\t<tbody>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>11</td>\n *\t\t\t\t\t<td>12</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>21</td>\n *\t\t\t\t\t<td>22</td>\n *\t\t\t\t</tr>\n *\t\t\t</tbody>\n *\t\t</table>\n *\n * and user actions:\n *\n * 1. Both user have table with two rows and two columns.\n * 2. User A adds a column at the end of the table - this will insert empty table cells to two rows.\n * 3. User B adds a row at the end of the table- this will insert a row with two empty table cells.\n * 4. Both users will have a table as below:\n *\n *\n *\t\t<table>\n *\t\t\t<tbody>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>11</td>\n *\t\t\t\t\t<td>12</td>\n *\t\t\t\t\t<td>(empty, inserted by A)</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>21</td>\n *\t\t\t\t\t<td>22</td>\n *\t\t\t\t\t<td>(empty, inserted by A)</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>(empty, inserted by B)</td>\n *\t\t\t\t\t<td>(empty, inserted by B)</td>\n *\t\t\t\t</tr>\n *\t\t\t</tbody>\n *\t\t</table>\n *\n * The last row is shorter then others so table post-fixer will add empty row to tha last row:\n *\n *\t\t<table>\n *\t\t\t<tbody>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>11</td>\n *\t\t\t\t\t<td>12</td>\n *\t\t\t\t\t<td>(empty, inserted by A)</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>21</td>\n *\t\t\t\t\t<td>22</td>\n *\t\t\t\t\t<td>(empty, inserted by A)</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>(empty, inserted by B)</td>\n *\t\t\t\t\t<td>(empty, inserted by B)</td>\n *\t\t\t\t\t<td>(empty, inserted by a post-fixer)</td>\n *\t\t\t\t</tr>\n *\t\t\t</tbody>\n *\t\t</table>\n *\n * Unfortunately undo doesn't know the nature of changes and depending which user will apply post-fixer changes undoing them might lead to\n * broken table. If User B will undo inserting column to a table the undo engine will undo only operations of\n * inserting empty cells to rows from initial table state (row 1 & 2) but the cell in post-fixed row will remain:\n *\n *\t\t<table>\n *\t\t\t<tbody>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>11</td>\n *\t\t\t\t\t<td>12</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>21</td>\n *\t\t\t\t\t<td>22</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>(empty, inserted by B)</td>\n *\t\t\t\t\t<td>(empty, inserted by B)</td>\n *\t\t\t\t\t<td>(empty, inserted by a post-fixer)</td>\n *\t\t\t\t</tr>\n *\t\t\t</tbody>\n *\t\t</table>\n *\n * After undo the table post-fixer will detect that two rows are shorter then other and will fix table to:\n *\n *\t\t<table>\n *\t\t\t<tbody>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>11</td>\n *\t\t\t\t\t<td>12</td>\n *\t\t\t\t\t<td>(empty, inserted by a post-fixer after undo)</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>21</td>\n *\t\t\t\t\t<td>22</td>\n *\t\t\t\t\t<td>(empty, inserted by a post-fixer after undo)</td>\n *\t\t\t\t</tr>\n *\t\t\t\t<tr>\n *\t\t\t\t\t<td>(empty, inserted by B)</td>\n *\t\t\t\t\t<td>(empty, inserted by B)</td>\n *\t\t\t\t\t<td>(empty, inserted by a post-fixer)</td>\n *\t\t\t\t</tr>\n *\t\t\t</tbody>\n *\t\t</table>\n * @param {module:engine/model/model~Model} model\n */\nexport default function injectTableLayoutPostFixer( model ) {\n\tmodel.document.registerPostFixer( writer => tableLayoutPostFixer( writer, model ) );\n}\n\n// The table layout post-fixer.\n//\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/model~Model} model\nfunction tableLayoutPostFixer( writer, model ) {\n\tconst changes = model.document.differ.getChanges();\n\n\tlet wasFixed = false;\n\n\t// Do not analyze the same table more then once - may happen for multiple changes in the same table.\n\tconst analyzedTables = new Set();\n\n\tfor ( const entry of changes ) {\n\t\tlet table;\n\n\t\tif ( entry.name == 'table' && entry.type == 'insert' ) {\n\t\t\ttable = entry.position.nodeAfter;\n\t\t}\n\n\t\t// Fix table on adding/removing table cells and rows.\n\t\tif ( entry.name == 'tableRow' || entry.name == 'tableCell' ) {\n\t\t\ttable = findAncestor( 'table', entry.position );\n\t\t}\n\n\t\t// Fix table on any table's attribute change - including attributes of table cells.\n\t\tif ( isTableAttributeEntry( entry ) ) {\n\t\t\ttable = findAncestor( 'table', entry.range.start );\n\t\t}\n\n\t\tif ( table && !analyzedTables.has( table ) ) {\n\t\t\t// Step 1: correct rowspans of table cells if necessary.\n\t\t\t// The wasFixed flag should be true if any of tables in batch was fixed - might be more then one.\n\t\t\twasFixed = fixTableCellsRowspan( table, writer ) || wasFixed;\n\t\t\t// Step 2: fix table rows sizes.\n\t\t\twasFixed = fixTableRowsSizes( table, writer ) || wasFixed;\n\n\t\t\tanalyzedTables.add( table );\n\t\t}\n\t}\n\n\treturn wasFixed;\n}\n\n// Fixes the invalid value of the rowspan attribute because a table cell cannot vertically extend beyond the table section it belongs to.\n//\n// @param {module:engine/model/element~Element} table\n// @param {module:engine/model/writer~Writer} writer\n// @returns {Boolean} Returns true if table was fixed.\nfunction fixTableCellsRowspan( table, writer ) {\n\tlet wasFixed = false;\n\n\tconst cellsToTrim = findCellsToTrim( table );\n\n\tif ( cellsToTrim.length ) {\n\t\twasFixed = true;\n\n\t\tfor ( const data of cellsToTrim ) {\n\t\t\tupdateNumericAttribute( 'rowspan', data.rowspan, data.cell, writer, 1 );\n\t\t}\n\t}\n\n\treturn wasFixed;\n}\n\n// Makes all table rows in a table the same size.\n//\n// @param {module:engine/model/element~Element} table\n// @param {module:engine/model/writer~Writer} writer\n// @returns {Boolean} Returns true if table was fixed.\nfunction fixTableRowsSizes( table, writer ) {\n\tlet wasFixed = false;\n\n\tconst rowsLengths = getRowsLengths( table );\n\tconst tableSize = rowsLengths[ 0 ];\n\n\tconst isValid = Object.values( rowsLengths ).every( length => length === tableSize );\n\n\tif ( !isValid ) {\n\t\tconst maxColumns = Object.values( rowsLengths ).reduce( ( prev, current ) => current > prev ? current : prev, 0 );\n\n\t\tfor ( const [ rowIndex, size ] of Object.entries( rowsLengths ) ) {\n\t\t\tconst columnsToInsert = maxColumns - size;\n\n\t\t\tif ( columnsToInsert ) {\n\t\t\t\tfor ( let i = 0; i < columnsToInsert; i++ ) {\n\t\t\t\t\tcreateEmptyTableCell( writer, writer.createPositionAt( table.getChild( rowIndex ), 'end' ) );\n\t\t\t\t}\n\n\t\t\t\twasFixed = true;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn wasFixed;\n}\n\n// Searches for the table cells that extends beyond the table section to which they belong to. It will return an array of objects\n// that holds table cells to be trimmed and correct value of a rowspan attribute to set.\n//\n// @param {module:engine/model/element~Element} table\n// @returns {Array.<{{cell, rowspan}}>}\nfunction findCellsToTrim( table ) {\n\tconst headingRows = parseInt( table.getAttribute( 'headingRows' ) || 0 );\n\tconst maxRows = table.childCount;\n\n\tconst cellsToTrim = [];\n\n\tfor ( const { row, rowspan, cell } of new TableWalker( table ) ) {\n\t\t// Skip cells that do not expand over its row.\n\t\tif ( rowspan < 2 ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst isInHeader = row < headingRows;\n\n\t\t// Row limit is either end of header section or whole table as table body is after the header.\n\t\tconst rowLimit = isInHeader ? headingRows : maxRows;\n\n\t\t// If table cell expands over its limit reduce it height to proper value.\n\t\tif ( row + rowspan > rowLimit ) {\n\t\t\tconst newRowspan = rowLimit - row;\n\n\t\t\tcellsToTrim.push( { cell, rowspan: newRowspan } );\n\t\t}\n\t}\n\n\treturn cellsToTrim;\n}\n\n// Returns an object with lengths of rows assigned to the corresponding row index.\n//\n// @param {module:engine/model/element~Element} table\n// @returns {Object}\nfunction getRowsLengths( table ) {\n\tconst lengths = {};\n\n\tfor ( const { row } of new TableWalker( table, { includeSpanned: true } ) ) {\n\t\tif ( !lengths[ row ] ) {\n\t\t\tlengths[ row ] = 0;\n\t\t}\n\n\t\tlengths[ row ] += 1;\n\t}\n\n\treturn lengths;\n}\n\n// Checks if the differ entry for an attribute change is one of table's attributes.\n//\n// @param entry\n// @returns {Boolean}\nfunction isTableAttributeEntry( entry ) {\n\tconst isAttributeType = entry.type === 'attribute';\n\tconst key = entry.attributeKey;\n\n\treturn isAttributeType && ( key === 'headingRows' || key === 'colspan' || key === 'rowspan' );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/converters/table-cell-content-post-fixer\n */\n\n/**\n * Injects a table cell post-fixer into the model.\n *\n * The role of the table post-fixer is to ensure that the table cells have the correct content\n * after a {@link module:engine/model/model~Model#change `change()`} block was executed.\n *\n * A table cells must contains at least one block as a child. The empty table cell will have empty `<paragraph>` as a child.\n *\n *\t\t<table>\n *\t\t\t<tableRow>\n *\t\t\t\t<tableCell></tableCell>\n *\t\t\t</tableRow>\n *\t\t</table>\n *\n * Will be fixed to:\n *\n *\t\t<table>\n *\t\t\t<tableRow>\n *\t\t\t\t<tableCell><paragraph></paragraph></tableCell>\n *\t\t\t</tableRow>\n *\t\t</table>\n *\n * @param {module:engine/model/model~Model} model\n */\nexport default function injectTableCellContentPostFixer( model ) {\n\tmodel.document.registerPostFixer( writer => tableCellContentsPostFixer( writer, model ) );\n}\n\n// The table cell contents post-fixer.\n//\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/model~Model} model\nfunction tableCellContentsPostFixer( writer, model ) {\n\tconst changes = model.document.differ.getChanges();\n\n\tlet wasFixed = false;\n\n\tfor ( const entry of changes ) {\n\t\t// Enforce paragraph in tableCell even after other feature remove its contents.\n\t\tif ( entry.type == 'remove' && entry.position.parent.is( 'tableCell' ) ) {\n\t\t\twasFixed = fixTableCellContent( entry.position.parent, writer ) || wasFixed;\n\t\t}\n\n\t\t// Analyze table cells on insertion.\n\t\tif ( entry.type == 'insert' ) {\n\t\t\tif ( entry.name == 'table' ) {\n\t\t\t\twasFixed = fixTable( entry.position.nodeAfter, writer ) || wasFixed;\n\t\t\t}\n\n\t\t\tif ( entry.name == 'tableRow' ) {\n\t\t\t\twasFixed = fixTableRow( entry.position.nodeAfter, writer ) || wasFixed;\n\t\t\t}\n\n\t\t\tif ( entry.name == 'tableCell' ) {\n\t\t\t\twasFixed = fixTableCellContent( entry.position.nodeAfter, writer ) || wasFixed;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn wasFixed;\n}\n\n// Fixes all table cells in a table.\n//\n// @param {module:engine/model/element~Element} table\n// @param {module:engine/model/writer~Writer} writer\nfunction fixTable( table, writer ) {\n\tlet wasFixed = false;\n\n\tfor ( const row of table.getChildren() ) {\n\t\twasFixed = fixTableRow( row, writer ) || wasFixed;\n\t}\n\n\treturn wasFixed;\n}\n\n// Fixes all table cells in a table row.\n//\n// @param {module:engine/model/element~Element} tableRow\n// @param {module:engine/model/writer~Writer} writer\nfunction fixTableRow( tableRow, writer ) {\n\tlet wasFixed = false;\n\n\tfor ( const tableCell of tableRow.getChildren() ) {\n\t\twasFixed = fixTableCellContent( tableCell, writer ) || wasFixed;\n\t}\n\n\treturn wasFixed;\n}\n\n// Fixes all table cell content by:\n// - adding paragraph to a table cell without any child.\n// - wrapping direct $text in <paragraph>.\n//\n// @param {module:engine/model/element~Element} table\n// @param {module:engine/model/writer~Writer} writer\n// @returns {Boolean}\nfunction fixTableCellContent( tableCell, writer ) {\n\t// Insert paragraph to an empty table cell.\n\tif ( tableCell.childCount == 0 ) {\n\t\twriter.insertElement( 'paragraph', tableCell );\n\n\t\treturn true;\n\t}\n\n\t// Check table cell children for directly placed $text nodes.\n\t// Temporary solution. See https://github.com/ckeditor/ckeditor5/issues/1464.\n\tconst textNodes = Array.from( tableCell.getChildren() ).filter( child => child.is( 'text' ) );\n\n\tfor ( const child of textNodes ) {\n\t\twriter.wrap( writer.createRangeOn( child ), 'paragraph' );\n\t}\n\n\t// Return true when there were text nodes to fix.\n\treturn !!textNodes.length;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/converters/tablecell-post-fixer\n */\n\n/**\n * Injects a table cell post-fixer into the editing controller.\n *\n * The role of the table cell post-fixer is to ensure that the table cell contents in the editing view are properly converted.\n *\n * This post-fixer will ensure that after model changes in the editing view:\n * * single paragraphs are rendered as `<span>\n * * single paragraphs with one or more attributes are rendered as `<p>`\n * * single paragraphs in table cell with other block elements are rendered as `<p>`\n * * paragraphs in table cells with other block elements (including other paragraphs) are rendered as `<p>`.\n *\n * In the model each table cell has always at least one block element inside. If no other block was defined (empty table cell) the table\n * feature will insert empty `<paragraph>`. Similarly text nodes will be wrapped in paragraphs. Rendering in the data pipeline differs\n * from rendering in the editing pipeline - text nodes in single `<paragraph>` are rendered in the data pipeline as direct children\n * of the `<td>` or `<th>` elements. In other cases `<paragraph>` elements are rendered as `<p>` blocks.\n *\n * To ensure proper mappings between model and view elements and positions in the editing pipeline the table feature will always render\n * an element in the view: `<span>` for single or empty `<paragraph>` and `<p>` otherwise.\n *\n * Example:\n *\n *\t\t<table>\n *\t\t\t<tableRow>\n *\t\t\t\t<tableCell><paragraph></paragraph></tableCell>\n *\t\t\t\t<tableCell><paragraph>foo</paragraph></tableCell>\n *\t\t\t\t<tableCell><paragraph baz=\"bar\">foo</paragraph></tableCell>\n *\t\t\t\t<tableCell><heading2>bar</heading2><paragraph>baz</paragraph></tableCell>\n *\t\t\t</tableRow>\n *\t\t</table>\n *\n * The editor will render in the data pipeline:\n *\n *\t\t<figure>\n *\t\t\t<table>\n *\t\t\t\t<tbody>\n *\t\t\t\t\t<tr>\n *\t\t\t\t\t\t<td></td>\n *\t\t\t\t\t\t<td>foo</td>\n *\t\t\t\t\t\t<td><p baz=\"bar\">foo</p></td>\n *\t\t\t\t\t\t<td><h3>bar</h3><p>baz</p></td>\n *\t\t\t\t\t</tr>\n *\t\t\t\t</tbody>\n *\t\t\t</table>\n *\t\t</figure>\n *\n * and in the editing view (without widget markup):\n *\n *\t\t<figure>\n *\t\t\t<table>\n *\t\t\t\t<tbody>\n *\t\t\t\t\t<tr>\n *\t\t\t\t\t\t<td><span></span></td>\n *\t\t\t\t\t\t<td><span>foo</span></td>\n *\t\t\t\t\t\t<td><p baz=\"bar\">foo</p></td>\n *\t\t\t\t\t\t<td><h3>bar</h3><p>baz</p></td>\n *\t\t\t\t\t</tr>\n *\t\t\t\t</tbody>\n *\t\t\t</table>\n *\t\t</figure>\n *\n * @param {module:engine/model/model~Model} model\n * @param {module:engine/controller/editingcontroller~EditingController} editing\n */\nexport default function injectTableCellPostFixer( model, editing ) {\n\tediting.view.document.registerPostFixer( writer => tableCellPostFixer( writer, model, editing.mapper, editing.view ) );\n}\n\n// The table cell post-fixer.\n//\n// @param {module:engine/view/writer~Writer} writer\n// @param {module:engine/model/model~Model} model\n// @param {module:engine/conversion/mapper~Mapper} mapper\nfunction tableCellPostFixer( writer, model, mapper, view ) {\n\tlet wasFixed = false;\n\n\tconst elementsToCheck = getElementsToCheck( view );\n\n\tfor ( const element of elementsToCheck ) {\n\t\twasFixed = ensureProperElementName( element, mapper, writer ) || wasFixed;\n\t}\n\n\t// Selection in the view might not be updated to renamed elements. Happens mostly when other feature inserts paragraph to the table cell\n\t// (ie. when deleting table cell contents) and sets selection to it while table-post fixer changes view <p> to <span> element.\n\t// The view.selection would have outdated nodes.\n\tif ( wasFixed && selectionNeedsFix( view.document.selection, mapper ) ) {\n\t\tupdateRangesInViewSelection( model.document.selection, mapper, writer );\n\t}\n\n\treturn wasFixed;\n}\n\n// Returns view elements changed in current view.change() block.\n//\n// **Note**: Currently it uses private property of the view: _renderer to get changed view elements to check.\n//\n// @param {module:engine/view/view~View} view\nfunction getElementsToCheck( view ) {\n\tconst elementsWithChangedAttributes = Array.from( view._renderer.markedAttributes )\n\t\t.filter( el => !!el.parent )\n\t\t.filter( isSpanOrP )\n\t\t.filter( el => isTdOrTh( el.parent ) );\n\n\tconst changedChildren = Array.from( view._renderer.markedChildren )\n\t\t.filter( el => !!el.parent )\n\t\t.filter( isTdOrTh )\n\t\t.reduce( ( prev, element ) => {\n\t\t\tconst childrenToCheck = Array.from( element.getChildren() ).filter( isSpanOrP );\n\n\t\t\treturn [ ...prev, ...childrenToCheck ];\n\t\t}, [] );\n\n\treturn [ ...elementsWithChangedAttributes, ...changedChildren ];\n}\n\n// This method checks if view element for model's <paragraph> was properly converter.\n// Paragraph should be either\n// - span: for single paragraph with no attributes.\n// - p   : in other cases.\nfunction ensureProperElementName( currentViewElement, mapper, writer ) {\n\t// This situation may happen if a view element was changed and removed at the same time.\n\t// In this case, the view element is already unbound so the post-fixer would crash.\n\tif ( !currentViewElement.root.is( 'rootElement' ) ) {\n\t\treturn false;\n\t}\n\n\tconst modelParagraph = mapper.toModelElement( currentViewElement );\n\tconst expectedViewElementName = getExpectedElementName( modelParagraph.parent, modelParagraph );\n\n\tif ( currentViewElement.name !== expectedViewElementName ) {\n\t\t// Unbind current view element as it should be cleared from mapper.\n\t\tmapper.unbindViewElement( currentViewElement );\n\n\t\tconst renamedViewElement = writer.rename( expectedViewElementName, currentViewElement );\n\n\t\t// Bind paragraph inside table cell to the renamed view element.\n\t\tmapper.bindElements( modelParagraph, renamedViewElement );\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// Expected view element name depends on model elements:\n// - <paragraph> with any attribute set should be rendered as <p>\n// - all <paragraphs> in <tableCell> that has more then one children should be rendered as <p>\n// - an only <paragraph> child with no attributes should be rendered as <span>\n//\n// @param {module:engine/model/element~Element} tableCell\n// @param {module:engine/model/element~Element} paragraph\n// @returns {String}\nfunction getExpectedElementName( tableCell, paragraph ) {\n\tconst isOnlyChild = tableCell.childCount > 1;\n\tconst hasAttributes = !![ ...paragraph.getAttributes() ].length;\n\n\treturn ( isOnlyChild || hasAttributes ) ? 'p' : 'span';\n}\n\n// Method to filter out <span> and <p> elements.\n//\n// @param {module:engine/view/element~Element} element\nfunction isSpanOrP( element ) {\n\treturn element.is( 'p' ) || element.is( 'span' );\n}\n\n// Method to filter out <td> and <th> elements.\n//\n// @param {module:engine/view/element~Element} element\nfunction isTdOrTh( element ) {\n\treturn element.is( 'td' ) || element.is( 'th' );\n}\n\n// Resets view selections based on model selection.\nfunction updateRangesInViewSelection( selection, mapper, writer ) {\n\tconst fixedRanges = Array.from( selection.getRanges() )\n\t\t.map( range => mapper.toViewRange( range ) );\n\n\twriter.setSelection( fixedRanges, { backward: selection.isBackward } );\n}\n\n// Checks if selection needs to be fixed by ensuring that current view selection position's parents are present in the editable view.\n//\n// @param {module:engine/view/selection~Selection} viewSelection\nfunction selectionNeedsFix( viewSelection ) {\n\tconst anchor = viewSelection.anchor;\n\tconst focus = viewSelection.focus;\n\n\treturn viewSelection.rangeCount && ( !anchor.root.is( 'rootElement' ) || !focus.root.is( 'rootElement' ) );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/tableediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport upcastTable, { upcastTableCell } from './converters/upcasttable';\nimport {\n\tdowncastInsertCell,\n\tdowncastInsertRow,\n\tdowncastInsertTable,\n\tdowncastRemoveRow,\n\tdowncastTableHeadingColumnsChange,\n\tdowncastTableHeadingRowsChange\n} from './converters/downcast';\n\nimport InsertTableCommand from './commands/inserttablecommand';\nimport InsertRowCommand from './commands/insertrowcommand';\nimport InsertColumnCommand from './commands/insertcolumncommand';\nimport SplitCellCommand from './commands/splitcellcommand';\nimport MergeCellCommand from './commands/mergecellcommand';\nimport RemoveRowCommand from './commands/removerowcommand';\nimport RemoveColumnCommand from './commands/removecolumncommand';\nimport SetHeaderRowCommand from './commands/setheaderrowcommand';\nimport SetHeaderColumnCommand from './commands/setheadercolumncommand';\nimport { findAncestor } from './commands/utils';\nimport TableUtils from '../src/tableutils';\n\nimport injectTableLayoutPostFixer from './converters/table-layout-post-fixer';\nimport injectTableCellContentsPostFixer from './converters/table-cell-content-post-fixer';\nimport injectTableCellPostFixer from './converters/tablecell-post-fixer';\n\nimport '../theme/tableediting.css';\n\n/**\n * The table editing feature.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class TableEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst model = editor.model;\n\t\tconst schema = model.schema;\n\t\tconst conversion = editor.conversion;\n\n\t\tschema.register( 'table', {\n\t\t\tallowWhere: '$block',\n\t\t\tallowAttributes: [ 'headingRows', 'headingColumns' ],\n\t\t\tisLimit: true,\n\t\t\tisObject: true,\n\t\t\tisBlock: true\n\t\t} );\n\n\t\tschema.register( 'tableRow', {\n\t\t\tallowIn: 'table',\n\t\t\tisLimit: true\n\t\t} );\n\n\t\tschema.register( 'tableCell', {\n\t\t\tallowIn: 'tableRow',\n\t\t\tallowAttributes: [ 'colspan', 'rowspan' ],\n\t\t\tisLimit: true\n\t\t} );\n\n\t\t// Allow all $block content inside table cell.\n\t\tschema.extend( '$block', { allowIn: 'tableCell' } );\n\n\t\t// Disallow table in table.\n\t\tschema.addChildCheck( ( context, childDefinition ) => {\n\t\t\tif ( childDefinition.name == 'table' && Array.from( context.getNames() ).includes( 'table' ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t\t// Table conversion.\n\t\tconversion.for( 'upcast' ).add( upcastTable() );\n\n\t\tconversion.for( 'editingDowncast' ).add( downcastInsertTable( { asWidget: true } ) );\n\t\tconversion.for( 'dataDowncast' ).add( downcastInsertTable() );\n\n\t\t// Table row conversion.\n\t\tconversion.for( 'upcast' ).elementToElement( { model: 'tableRow', view: 'tr' } );\n\n\t\tconversion.for( 'editingDowncast' ).add( downcastInsertRow( { asWidget: true } ) );\n\t\tconversion.for( 'dataDowncast' ).add( downcastInsertRow() );\n\t\tconversion.for( 'downcast' ).add( downcastRemoveRow() );\n\n\t\t// Table cell conversion.\n\t\tconversion.for( 'upcast' ).add( upcastTableCell( 'td' ) );\n\t\tconversion.for( 'upcast' ).add( upcastTableCell( 'th' ) );\n\n\t\tconversion.for( 'editingDowncast' ).add( downcastInsertCell( { asWidget: true } ) );\n\t\tconversion.for( 'dataDowncast' ).add( downcastInsertCell() );\n\n\t\t// Table attributes conversion.\n\t\tconversion.attributeToAttribute( { model: 'colspan', view: 'colspan' } );\n\t\tconversion.attributeToAttribute( { model: 'rowspan', view: 'rowspan' } );\n\n\t\t// Table heading rows and cols conversion.\n\t\tconversion.for( 'editingDowncast' ).add( downcastTableHeadingColumnsChange( { asWidget: true } ) );\n\t\tconversion.for( 'dataDowncast' ).add( downcastTableHeadingColumnsChange() );\n\t\tconversion.for( 'editingDowncast' ).add( downcastTableHeadingRowsChange( { asWidget: true } ) );\n\t\tconversion.for( 'dataDowncast' ).add( downcastTableHeadingRowsChange() );\n\n\t\tinjectTableCellPostFixer( editor.model, editor.editing );\n\n\t\t// Define all the commands.\n\t\teditor.commands.add( 'insertTable', new InsertTableCommand( editor ) );\n\t\teditor.commands.add( 'insertTableRowAbove', new InsertRowCommand( editor, { order: 'above' } ) );\n\t\teditor.commands.add( 'insertTableRowBelow', new InsertRowCommand( editor, { order: 'below' } ) );\n\t\teditor.commands.add( 'insertTableColumnLeft', new InsertColumnCommand( editor, { order: 'left' } ) );\n\t\teditor.commands.add( 'insertTableColumnRight', new InsertColumnCommand( editor, { order: 'right' } ) );\n\n\t\teditor.commands.add( 'removeTableRow', new RemoveRowCommand( editor ) );\n\t\teditor.commands.add( 'removeTableColumn', new RemoveColumnCommand( editor ) );\n\n\t\teditor.commands.add( 'splitTableCellVertically', new SplitCellCommand( editor, { direction: 'vertically' } ) );\n\t\teditor.commands.add( 'splitTableCellHorizontally', new SplitCellCommand( editor, { direction: 'horizontally' } ) );\n\n\t\teditor.commands.add( 'mergeTableCellRight', new MergeCellCommand( editor, { direction: 'right' } ) );\n\t\teditor.commands.add( 'mergeTableCellLeft', new MergeCellCommand( editor, { direction: 'left' } ) );\n\t\teditor.commands.add( 'mergeTableCellDown', new MergeCellCommand( editor, { direction: 'down' } ) );\n\t\teditor.commands.add( 'mergeTableCellUp', new MergeCellCommand( editor, { direction: 'up' } ) );\n\n\t\teditor.commands.add( 'setTableColumnHeader', new SetHeaderColumnCommand( editor ) );\n\t\teditor.commands.add( 'setTableRowHeader', new SetHeaderRowCommand( editor ) );\n\n\t\tinjectTableLayoutPostFixer( model );\n\t\tinjectTableCellContentsPostFixer( model );\n\n\t\t// Handle tab key navigation.\n\t\tthis.editor.keystrokes.set( 'Tab', ( ...args ) => this._handleTabOnSelectedTable( ...args ), { priority: 'low' } );\n\t\tthis.editor.keystrokes.set( 'Tab', this._getTabHandler( true ), { priority: 'low' } );\n\t\tthis.editor.keystrokes.set( 'Shift+Tab', this._getTabHandler( false ), { priority: 'low' } );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ TableUtils ];\n\t}\n\n\t/**\n\t * Handles {@link module:engine/view/document~Document#event:keydown keydown} events for the <kbd>Tab</kbd> key executed\n\t * when the table widget is selected.\n\t *\n\t * @private\n\t * @param {module:utils/eventinfo~EventInfo} eventInfo\n\t * @param {module:engine/view/observer/domeventdata~DomEventData} domEventData\n\t */\n\t_handleTabOnSelectedTable( domEventData, cancel ) {\n\t\tconst editor = this.editor;\n\t\tconst selection = editor.model.document.selection;\n\n\t\tif ( !selection.isCollapsed && selection.rangeCount === 1 && selection.getFirstRange().isFlat ) {\n\t\t\tconst selectedElement = selection.getSelectedElement();\n\n\t\t\tif ( !selectedElement || !selectedElement.is( 'table' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcancel();\n\n\t\t\teditor.model.change( writer => {\n\t\t\t\twriter.setSelection( writer.createRangeIn( selectedElement.getChild( 0 ).getChild( 0 ) ) );\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a handler for {@link module:engine/view/document~Document#event:keydown keydown} events for the <kbd>Tab</kbd> key executed\n\t * inside table cell.\n\t *\n\t * @private\n\t * @param {Boolean} isForward Whether this handler will move selection to the next cell or previous.\n\t */\n\t_getTabHandler( isForward ) {\n\t\tconst editor = this.editor;\n\n\t\treturn ( domEventData, cancel ) => {\n\t\t\tconst selection = editor.model.document.selection;\n\n\t\t\tconst firstPosition = selection.getFirstPosition();\n\n\t\t\tconst tableCell = findAncestor( 'tableCell', firstPosition );\n\n\t\t\tif ( !tableCell ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcancel();\n\n\t\t\tconst tableRow = tableCell.parent;\n\t\t\tconst table = tableRow.parent;\n\n\t\t\tconst currentRowIndex = table.getChildIndex( tableRow );\n\t\t\tconst currentCellIndex = tableRow.getChildIndex( tableCell );\n\n\t\t\tconst isFirstCellInRow = currentCellIndex === 0;\n\n\t\t\tif ( !isForward && isFirstCellInRow && currentRowIndex === 0 ) {\n\t\t\t\t// It's the first cell of a table - don't do anything (stay in current position).\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isLastCellInRow = currentCellIndex === tableRow.childCount - 1;\n\t\t\tconst isLastRow = currentRowIndex === table.childCount - 1;\n\n\t\t\tif ( isForward && isLastRow && isLastCellInRow ) {\n\t\t\t\teditor.execute( 'insertTableRowBelow' );\n\n\t\t\t\t// Check if the command actually added a row. If `insertTableRowBelow` execution didn't add a row (because it was disabled\n\t\t\t\t// or it got overwritten) do not change the selection.\n\t\t\t\tif ( currentRowIndex === table.childCount - 1 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet cellToFocus;\n\n\t\t\t// Move to first cell in next row.\n\t\t\tif ( isForward && isLastCellInRow ) {\n\t\t\t\tconst nextRow = table.getChild( currentRowIndex + 1 );\n\n\t\t\t\tcellToFocus = nextRow.getChild( 0 );\n\t\t\t}\n\t\t\t// Move to last cell in a previous row.\n\t\t\telse if ( !isForward && isFirstCellInRow ) {\n\t\t\t\tconst previousRow = table.getChild( currentRowIndex - 1 );\n\n\t\t\t\tcellToFocus = previousRow.getChild( previousRow.childCount - 1 );\n\t\t\t}\n\t\t\t// Move to next/previous cell.\n\t\t\telse {\n\t\t\t\tcellToFocus = tableRow.getChild( currentCellIndex + ( isForward ? 1 : -1 ) );\n\t\t\t}\n\n\t\t\teditor.model.change( writer => {\n\t\t\t\twriter.setSelection( writer.createRangeIn( cellToFocus ) );\n\t\t\t} );\n\t\t};\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/ui/inserttableview\n */\n\nimport View from '@ckeditor/ckeditor5-ui/src/view';\n\nimport './../../theme/inserttable.css';\n\n/**\n * The table size view.\n *\n * It renders a 10x10 grid to choose the inserted table size.\n *\n * @extends module:ui/view~View\n * @implements module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable\n */\nexport default class InsertTableView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * A collection of table size box items.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.items = this.createCollection();\n\n\t\t/**\n\t\t * The currently selected number of rows of the new table.\n\t\t *\n\t\t * @observable\n\t\t * @member {Number} #rows\n\t\t */\n\t\tthis.set( 'rows', 0 );\n\n\t\t/**\n\t\t * The currently selected number of columns of the new table.\n\t\t *\n\t\t * @observable\n\t\t * @member {Number} #columns\n\t\t */\n\t\tthis.set( 'columns', 0 );\n\n\t\t/**\n\t\t * The label text displayed under the boxes.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #label\n\t\t */\n\t\tthis.bind( 'label' )\n\t\t\t.to( this, 'columns', this, 'rows', ( columns, rows ) => `${ rows } x ${ columns }` );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [ 'ck' ]\n\t\t\t},\n\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: [ 'ck-insert-table-dropdown__grid' ]\n\t\t\t\t\t},\n\t\t\t\t\tchildren: this.items\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttag: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: [ 'ck-insert-table-dropdown__label' ]\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: bind.to( 'label' )\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\n\t\t\ton: {\n\t\t\t\tmousedown: bind.to( evt => {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t} ),\n\n\t\t\t\tclick: bind.to( () => {\n\t\t\t\t\tthis.fire( 'execute' );\n\t\t\t\t} )\n\t\t\t}\n\t\t} );\n\n\t\t// Add grid boxes to table selection view.\n\t\tfor ( let index = 0; index < 100; index++ ) {\n\t\t\tconst boxView = new TableSizeGridBoxView();\n\n\t\t\t// Listen to box view 'over' event which indicates that mouse is over this box.\n\t\t\tboxView.on( 'over', () => {\n\t\t\t\t// Translate box index to the row & column index.\n\t\t\t\tconst row = Math.floor( index / 10 );\n\t\t\t\tconst column = index % 10;\n\n\t\t\t\t// As row & column indexes are zero-based transform it to number of selected rows & columns.\n\t\t\t\tthis.set( 'rows', row + 1 );\n\t\t\t\tthis.set( 'columns', column + 1 );\n\t\t\t} );\n\n\t\t\tthis.items.add( boxView );\n\t\t}\n\n\t\tthis.on( 'change:columns', () => {\n\t\t\tthis._highlightGridBoxes();\n\t\t} );\n\n\t\tthis.on( 'change:rows', () => {\n\t\t\tthis._highlightGridBoxes();\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tfocus() {\n\t\t// The dropdown panel expects DropdownPanelFocusable interface on views passed to dropdown panel. See #30.\n\t\t// The method should be implemented while working on keyboard support for this view. See #22.\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tfocusLast() {\n\t\t// The dropdown panel expects DropdownPanelFocusable interface on views passed to dropdown panel. See #30.\n\t\t// The method should be implemented while working on keyboard support for this view. See #22.\n\t}\n\n\t/**\n\t * Highlights grid boxes depending on rows and columns selected.\n\t *\n\t * @private\n\t */\n\t_highlightGridBoxes() {\n\t\tconst rows = this.rows;\n\t\tconst columns = this.columns;\n\n\t\tthis.items.map( ( boxView, index ) => {\n\t\t\t// Translate box index to the row & column index.\n\t\t\tconst itemRow = Math.floor( index / 10 );\n\t\t\tconst itemColumn = index % 10;\n\n\t\t\t// Grid box is highlighted when its row & column index belongs to selected number of rows & columns.\n\t\t\tconst isOn = itemRow < rows && itemColumn < columns;\n\n\t\t\tboxView.set( 'isOn', isOn );\n\t\t} );\n\t}\n}\n\n/**\n * A single grid box view element.\n *\n * This class is used to render the table size selection grid in {@link module:table/ui/inserttableview~InsertTableView}.\n *\n * @private\n */\nclass TableSizeGridBoxView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * Controls whether the grid box view is \"on\".\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isOn\n\t\t */\n\t\tthis.set( 'isOn', false );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck-insert-table-dropdown-grid-box',\n\t\t\t\t\tbind.if( 'isOn', 'ck-on' )\n\t\t\t\t]\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tmouseover: bind.to( 'over' )\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module table/tableui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport {\n    addListToDropdown,\n    createDropdown\n} from '@ckeditor/ckeditor5-ui/src/dropdown/utils';\nimport Model from '@ckeditor/ckeditor5-ui/src/model';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport InsertTableView from './ui/inserttableview';\nimport tableIcon from './../theme/icons/table.svg';\nimport tableColumnIcon from './../theme/icons/table-column.svg';\nimport tableRowIcon from './../theme/icons/table-row.svg';\nimport tableMergeCellIcon from './../theme/icons/table-merge-cell.svg';\n/**\n * The table UI plugin. It introduces:\n *\n * * The `'insertTable'` dropdown,\n * * The `'tableColumn'` dropdown,\n * * The `'tableRow'` dropdown,\n * * The `'mergeTableCells'` dropdown.\n *\n * The `'tableColumn'`, `'tableRow'`, `'mergeTableCells'` dropdowns work best with {@link module:table/tabletoolbar~TableToolbar}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class TableUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const t = this.editor.t;\n        editor.ui.componentFactory.add('insertTable', locale => {\n            const command = editor.commands.get('insertTable');\n            const dropdownView = createDropdown(locale);\n            dropdownView.bind('isEnabled').to(command);\n            // Decorate dropdown's button.\n            dropdownView.buttonView.set({\n                icon: tableIcon,\n                label: t('Insert table'),\n                tooltip: true\n            });\n            // Prepare custom view for dropdown's panel.\n            const insertTableView = new InsertTableView(locale);\n            dropdownView.panelView.children.add(insertTableView);\n            insertTableView.delegate('execute').to(dropdownView);\n            dropdownView.buttonView.on('open', () => {\n                // Reset the chooser before showing it to the user.\n                insertTableView.rows = 0;\n                insertTableView.columns = 0;\n            });\n            dropdownView.on('execute', () => {\n                editor.execute('insertTable', {\n                    rows: insertTableView.rows,\n                    columns: insertTableView.columns\n                });\n                editor.editing.view.focus();\n            });\n            return dropdownView;\n        });\n        editor.ui.componentFactory.add('tableColumn', locale => {\n            const options = [\n                {\n                    type: 'switchbutton',\n                    model: {\n                        commandName: 'setTableColumnHeader',\n                        label: t('Header column'),\n                        bindIsOn: true\n                    }\n                },\n                { type: 'separator' },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'insertTableColumnLeft',\n                        label: t('Insert column left')\n                    }\n                },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'insertTableColumnRight',\n                        label: t('Insert column right')\n                    }\n                },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'removeTableColumn',\n                        label: t('Delete column')\n                    }\n                }\n            ];\n            return this._prepareDropdown(t('Column'), tableColumnIcon, options, locale);\n        });\n        editor.ui.componentFactory.add('tableRow', locale => {\n            const options = [\n                {\n                    type: 'switchbutton',\n                    model: {\n                        commandName: 'setTableRowHeader',\n                        label: t('Header row'),\n                        bindIsOn: true\n                    }\n                },\n                { type: 'separator' },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'insertTableRowBelow',\n                        label: t('Insert row below')\n                    }\n                },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'insertTableRowAbove',\n                        label: t('Insert row above')\n                    }\n                },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'removeTableRow',\n                        label: t('Delete row')\n                    }\n                }\n            ];\n            return this._prepareDropdown(t('Row'), tableRowIcon, options, locale);\n        });\n        editor.ui.componentFactory.add('mergeTableCells', locale => {\n            const options = [\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'mergeTableCellUp',\n                        label: t('Merge cell up')\n                    }\n                },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'mergeTableCellRight',\n                        label: t('Merge cell right')\n                    }\n                },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'mergeTableCellDown',\n                        label: t('Merge cell down')\n                    }\n                },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'mergeTableCellLeft',\n                        label: t('Merge cell left')\n                    }\n                },\n                { type: 'separator' },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'splitTableCellVertically',\n                        label: t('Split cell vertically')\n                    }\n                },\n                {\n                    type: 'button',\n                    model: {\n                        commandName: 'splitTableCellHorizontally',\n                        label: t('Split cell horizontally')\n                    }\n                }\n            ];\n            return this._prepareDropdown(t('Merge cells'), tableMergeCellIcon, options, locale);\n        });\n    }\n    /**\n\t * Creates a dropdown view from the set of options.\n\t *\n\t * @private\n\t * @param {String} label The dropdown button label.\n\t * @param {String} icon An icon for the dropdown button.\n\t * @param {Array.<module:ui/dropdown/utils~ListDropdownItemDefinition>} options The list of options for the dropdown.\n\t * @param {module:utils/locale~Locale} locale\n\t * @returns {module:ui/dropdown/dropdownview~DropdownView}\n\t */\n    _prepareDropdown(label, icon, options, locale) {\n        const editor = this.editor;\n        const dropdownView = createDropdown(locale);\n        const commands = [];\n        // Prepare dropdown list items for list dropdown.\n        const itemDefinitions = new Collection();\n        for (const option of options) {\n            addListOption(option, editor, commands, itemDefinitions);\n        }\n        addListToDropdown(dropdownView, itemDefinitions);\n        // Decorate dropdown's button.\n        dropdownView.buttonView.set({\n            label,\n            icon,\n            tooltip: true\n        });\n        // Make dropdown button disabled when all options are disabled.\n        dropdownView.bind('isEnabled').toMany(commands, 'isEnabled', (...areEnabled) => {\n            return areEnabled.some(isEnabled => isEnabled);\n        });\n        this.listenTo(dropdownView, 'execute', evt => {\n            editor.execute(evt.source.commandName);\n            editor.editing.view.focus();\n        });\n        return dropdownView;\n    }\n}\n// Adds an option to a list view.\n//\n// @param {module:table/tableui~DropdownOption} option Configuration option.\n// @param {module:core/editor/editor~Editor} editor\n// @param {Array.<module:core/command~Command>} commands List of commands to update.\n// @param {Iterable.<module:ui/dropdown/utils~ListDropdownItemDefinition>} itemDefinitions\n// Collection of dropdown items to update with given option.\nfunction addListOption(option, editor, commands, itemDefinitions) {\n    const model = option.model = new Model(option.model);\n    const {commandName, bindIsOn} = option.model;\n    if (option.type !== 'separator') {\n        const command = editor.commands.get(commandName);\n        commands.push(command);\n        model.set({ commandName });\n        model.bind('isEnabled').to(command);\n        if (bindIsOn) {\n            model.bind('isOn').to(command, 'value');\n        }\n    }\n    model.set({ withText: true });\n    itemDefinitions.add(option);\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/table\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport TableEditing from './tableediting';\nimport TableUI from './tableui';\nimport Widget from '@ckeditor/ckeditor5-widget/src/widget';\n\nimport '../theme/table.css';\n\n/**\n * The table plugin.\n *\n * For a detailed overview, check the {@glink features/table Table feature documentation}.\n *\n * This is a \"glue\" plugin which loads the {@link module:table/tableediting~TableEditing table editing feature}\n * and {@link module:table/tableui~TableUI table UI feature}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Table extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ TableEditing, TableUI, Widget ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Table';\n\t}\n}\n\n/**\n * The configuration of the table features. Used by the table features in the `@ckeditor/ckeditor5-table` package.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n * \t\t\t\ttable: ... // Table feature options.\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See {@link module:core/editor/editorconfig~EditorConfig all editor options}.\n *\n * @interface TableConfig\n */\n\n/**\n * The configuration of the {@link module:table/table~Table} feature.\n *\n * Read more in {@link module:table/table~TableConfig}.\n *\n * @member {module:table/table~TableConfig} module:core/editor/editorconfig~EditorConfig#table\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module media-embed/converters\n */\n\n/**\n * Returns a function that converts the model \"url\" attribute to the view representation.\n *\n * Depending on the configuration, the view representation can be \"semantic\" (for the data pipeline):\n *\n *\t\t<figure class=\"media\">\n *\t\t\t<oembed url=\"foo\"></oembed>\n *\t\t</figure>\n *\n * or \"non-semantic\" (for the editing view pipeline):\n *\n *\t\t<figure class=\"media\">\n *\t\t\t<div data-oembed-url=\"foo\">[ non-semantic media preview for \"foo\" ]</div>\n *\t\t</figure>\n *\n * **Note:** Changing the model \"url\" attribute replaces the entire content of the\n * `<figure>` in the view.\n *\n * @param {module:media-embed/mediaregistry~MediaRegistry} registry The registry providing\n * the media and their content.\n * @param {Object} options\n * @param {String} [options.renderMediaPreview] When `true`, the converter will create the view in the non-semantic form.\n * @param {String} [options.renderForEditingView] When `true`, the converter will create a view specific for the\n * editing pipeline (e.g. including CSS classes, content placeholders).\n * @returns {Function}\n */\nexport function modelToViewUrlAttributeConverter( registry, options ) {\n\treturn dispatcher => {\n\t\tdispatcher.on( 'attribute:url:media', converter );\n\t};\n\n\tfunction converter( evt, data, conversionApi ) {\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst url = data.attributeNewValue;\n\t\tconst viewWriter = conversionApi.writer;\n\t\tconst figure = conversionApi.mapper.toViewElement( data.item );\n\n\t\t// TODO: removing it and creating it from scratch is a hack. We can do better than that.\n\t\tviewWriter.remove( viewWriter.createRangeIn( figure ) );\n\n\t\tconst mediaViewElement = registry.getMediaViewElement( viewWriter, url, options );\n\n\t\tviewWriter.insert( viewWriter.createPositionAt( figure, 0 ), mediaViewElement );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module media-embed/utils\n */\n\nimport { isWidget, toWidget } from '@ckeditor/ckeditor5-widget/src/utils';\n\n/**\n * Converts a given {@link module:engine/view/element~Element} to a media embed widget:\n * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to recognize the media widget element.\n * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer An instance of the view writer.\n * @param {String} label The element's label.\n * @returns {module:engine/view/element~Element}\n */\nexport function toMediaWidget( viewElement, writer, label ) {\n\twriter.setCustomProperty( 'media', true, viewElement );\n\n\treturn toWidget( viewElement, writer, { label } );\n}\n\n/**\n * Returns a media widget editing view element if one is selected.\n *\n * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} selection\n * @returns {module:engine/view/element~Element|null}\n */\nexport function getSelectedMediaViewWidget( selection ) {\n\tconst viewElement = selection.getSelectedElement();\n\n\tif ( viewElement && isMediaWidget( viewElement ) ) {\n\t\treturn viewElement;\n\t}\n\n\treturn null;\n}\n\n/**\n * Checks if a given view element is a media widget.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @returns {Boolean}\n */\nexport function isMediaWidget( viewElement ) {\n\treturn !!viewElement.getCustomProperty( 'media' ) && isWidget( viewElement );\n}\n\n/**\n * Creates a view element representing the media. Either \"semantic\" one for the data pipeline:\n *\n *\t\t<figure class=\"media\">\n *\t\t\t<oembed url=\"foo\"></oembed>\n *\t\t</figure>\n *\n * or \"non-semantic\" (for the editing view pipeline):\n *\n *\t\t<figure class=\"media\">\n *\t\t\t<div data-oembed-url=\"foo\">[ non-semantic media preview for \"foo\" ]</div>\n *\t\t</figure>\n *\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n * @param {module:media-embed/mediaregistry~MediaRegistry} registry\n * @param {String} url\n * @param {Object} options\n * @param {String} [options.useSemanticWrapper]\n * @param {String} [options.renderForEditingView]\n * @returns {module:engine/view/containerelement~ContainerElement}\n */\nexport function createMediaFigureElement( writer, registry, url, options ) {\n\tconst figure = writer.createContainerElement( 'figure', { class: 'media' } );\n\n\t// TODO: This is a hack. Without it, the figure in the data pipeline will contain &nbsp; because\n\t// its only child is the UIElement (wrapper).\n\t//\n\t// Note: The hack is a copy&paste from widget utils; it makes the figure act like it's a widget.\n\tfigure.getFillerOffset = getFillerOffset;\n\n\twriter.insert( writer.createPositionAt( figure, 0 ), registry.getMediaViewElement( writer, url, options ) );\n\n\treturn figure;\n}\n\n/**\n * Returns a selected media element in the model, if any.\n *\n * @param {module:engine/model/selection~Selection} selection\n * @returns {module:engine/model/element~Element|null}\n */\nexport function getSelectedMediaModelWidget( selection ) {\n\tconst selectedElement = selection.getSelectedElement();\n\n\tif ( selectedElement && selectedElement.is( 'media' ) ) {\n\t\treturn selectedElement;\n\t}\n\n\treturn null;\n}\n\n/**\n * Creates a media element and inserts it into the model.\n *\n * **Note**: This method will use {@link module:engine/model/model~Model#insertContent `model.insertContent()`} logic of inserting content\n * if no `insertPosition` is passed.\n *\n * @param {module:engine/model/model~Model} model\n * @param {String} url An URL of an embeddable media.\n * @param {module:engine/model/position~Position} [insertPosition] Position to insert media. If not specified,\n * the default behavior of {@link module:engine/model/model~Model#insertContent `model.insertContent()`} will\n * be applied.\n */\nexport function insertMedia( model, url, insertPosition ) {\n\tmodel.change( writer => {\n\t\tconst mediaElement = writer.createElement( 'media', { url } );\n\n\t\tmodel.insertContent( mediaElement, insertPosition );\n\n\t\twriter.setSelection( mediaElement, 'on' );\n\t} );\n}\n\nfunction getFillerOffset() {\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module media-embed/mediaembedcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { findOptimalInsertionPosition } from '@ckeditor/ckeditor5-widget/src/utils';\nimport { getSelectedMediaModelWidget, insertMedia } from './utils';\n\n/**\n * The insert media command.\n *\n * The command is registered by the {@link module:media-embed/mediaembedediting~MediaEmbedEditing} as `'mediaEmbed'`.\n *\n * To insert media at the current selection, execute the command and specify the URL:\n *\n *\t\teditor.execute( 'mediaEmbed', 'http://url.to.the/media' );\n *\n * @extends module:core/command~Command\n */\nexport default class MediaEmbedCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\t\tconst schema = model.schema;\n\t\tconst position = selection.getFirstPosition();\n\t\tconst selectedMedia = getSelectedMediaModelWidget( selection );\n\n\t\tlet parent = position.parent;\n\n\t\tif ( parent != parent.root ) {\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\tthis.value = selectedMedia ? selectedMedia.getAttribute( 'url' ) : null;\n\t\tthis.isEnabled = schema.checkChild( parent, 'media' );\n\t}\n\n\t/**\n\t * Executes the command, which either:\n\t *\n\t * * updates the URL of the selected media,\n\t * * inserts the new media into the editor and puts the selection around it.\n\t *\n\t * @fires execute\n\t * @param {String} url The URL of the media.\n\t */\n\texecute( url ) {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\t\tconst selectedMedia = getSelectedMediaModelWidget( selection );\n\n\t\tif ( selectedMedia ) {\n\t\t\tmodel.change( writer => {\n\t\t\t\twriter.setAttribute( 'url', url, selectedMedia );\n\t\t\t} );\n\t\t} else {\n\t\t\tconst insertPosition = findOptimalInsertionPosition( selection, model );\n\n\t\t\tinsertMedia( model, url, insertPosition );\n\t\t}\n\t}\n}\n\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module media-embed/mediaregistry\n */\n\nimport mediaPlaceholderIcon from '../theme/icons/media-placeholder.svg';\nimport log from '@ckeditor/ckeditor5-utils/src/log';\nimport TooltipView from '@ckeditor/ckeditor5-ui/src/tooltip/tooltipview';\nimport IconView from '@ckeditor/ckeditor5-ui/src/icon/iconview';\nimport Template from '@ckeditor/ckeditor5-ui/src/template';\n\nconst mediaPlaceholderIconViewBox = '0 0 64 42';\n\n/**\n * A bridge between the raw media content provider definitions and the editor view content.\n *\n * It helps translating media URLs to corresponding {@link module:engine/view/element~Element view elements}.\n *\n * Mostly used by the {@link module:media-embed/mediaembedediting~MediaEmbedEditing} plugin.\n */\nexport default class MediaRegistry {\n\t/**\n\t * Creates an instance of the {@link module:media-embed/mediaregistry~MediaRegistry} class.\n\t *\n\t * @param {module:utils/locale~Locale} locale The localization services instance.\n\t * @param {module:media-embed/mediaembed~MediaEmbedConfig} config The configuration of the media embed feature.\n\t */\n\tconstructor( locale, config ) {\n\t\tconst providers = config.providers;\n\t\tconst extraProviders = config.extraProviders || [];\n\t\tconst removedProviders = new Set( config.removeProviders );\n\t\tconst providerDefinitions = providers\n\t\t\t.concat( extraProviders )\n\t\t\t.filter( provider => {\n\t\t\t\tconst name = provider.name;\n\n\t\t\t\tif ( !name ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * One of the providers (or extra providers) specified in the media embed configuration\n\t\t\t\t\t * has no name and will not be used by the editor. In order to get this media\n\t\t\t\t\t * provider working, double check your editor configuration.\n\t\t\t\t\t *\n\t\t\t\t\t * @warning media-embed-no-provider-name\n\t\t\t\t\t */\n\t\t\t\t\tlog.warn( 'media-embed-no-provider-name: The configured media provider has no name and cannot be used.',\n\t\t\t\t\t\t{ provider } );\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn !removedProviders.has( name );\n\t\t\t} );\n\n\t\t/**\n\t\t * The locale {@link module:utils/locale~Locale} instance.\n\t\t *\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = locale;\n\n\t\t/**\n\t\t * The media provider definitions available for the registry. Usually corresponding with the\n\t\t * {@link module:media-embed/mediaembed~MediaEmbedConfig media configuration}.\n\t\t *\n\t\t * @member {Array}\n\t\t */\n\t\tthis.providerDefinitions = providerDefinitions;\n\t}\n\n\t/**\n\t * Checks whether the passed URL is representing a certain media type allowed in the editor.\n\t *\n\t * @param {String} url The URL to be checked\n\t * @returns {Boolean}\n\t */\n\thasMedia( url ) {\n\t\treturn !!this._getMedia( url );\n\t}\n\n\t/**\n\t * For the given media URL string and options, it returns the {@link module:engine/view/element~Element view element}\n\t * representing that media.\n\t *\n\t * **Note:** If no URL is specified, an empty view element is returned.\n\t *\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer used to produce a view element.\n\t * @param {String} url The URL to be translated into a view element.\n\t * @param {Object} options\n\t * @param {String} [options.renderMediaPreview]\n\t * @param {String} [options.renderForEditingView]\n\t * @returns {module:engine/view/element~Element}\n\t */\n\tgetMediaViewElement( writer, url, options ) {\n\t\treturn this._getMedia( url ).getViewElement( writer, options );\n\t}\n\n\t/**\n\t * Returns a `Media` instance for the given URL.\n\t *\n\t * @protected\n\t * @param {String} url The URL of the media.\n\t * @returns {module:media-embed/mediaregistry~Media|null} The `Media` instance or `null` when there is none.\n\t */\n\t_getMedia( url ) {\n\t\tif ( !url ) {\n\t\t\treturn new Media( this.locale );\n\t\t}\n\n\t\turl = url.trim();\n\n\t\tfor ( const definition of this.providerDefinitions ) {\n\t\t\tconst previewRenderer = definition.html;\n\t\t\tlet pattern = definition.url;\n\n\t\t\tif ( !Array.isArray( pattern ) ) {\n\t\t\t\tpattern = [ pattern ];\n\t\t\t}\n\n\t\t\tfor ( const subPattern of pattern ) {\n\t\t\t\tconst match = this._getUrlMatches( url, subPattern );\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\treturn new Media( this.locale, url, match, previewRenderer );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Tries to match `url` to `pattern`.\n\t *\n\t * @private\n\t * @param {String} url The URL of the media.\n\t * @param {RegExp} pattern The pattern that should accept the media URL.\n\t * @returns {Array|null}\n\t */\n\t_getUrlMatches( url, pattern ) {\n\t\t// 1. Try to match without stripping the protocol and \"www\" subdomain.\n\t\tlet match = url.match( pattern );\n\n\t\tif ( match ) {\n\t\t\treturn match;\n\t\t}\n\n\t\t// 2. Try to match after stripping the protocol.\n\t\tlet rawUrl = url.replace( /^https?:\\/\\//, '' );\n\t\tmatch = rawUrl.match( pattern );\n\n\t\tif ( match ) {\n\t\t\treturn match;\n\t\t}\n\n\t\t// 3. Try to match after stripping the \"www\" subdomain.\n\t\trawUrl = rawUrl.replace( /^www\\./, '' );\n\t\tmatch = rawUrl.match( pattern );\n\n\t\tif ( match ) {\n\t\t\treturn match;\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n/**\n * Represents media defined by the provider configuration.\n *\n * It can be rendered to the {@link module:engine/view/element~Element view element} and used in the editing or data pipeline.\n *\n * @private\n */\nclass Media {\n\tconstructor( locale, url, match, previewRenderer ) {\n\t\t/**\n\t\t * The URL this Media instance represents.\n\t\t *\n\t\t * @member {String}\n\t\t */\n\t\tthis.url = this._getValidUrl( url );\n\n\t\t/**\n\t\t * Shorthand for {@link module:utils/locale~Locale#t}.\n\t\t *\n\t\t * @see module:utils/locale~Locale#t\n\t\t * @method\n\t\t */\n\t\tthis._t = locale.t;\n\n\t\t/**\n\t\t * The output of the `RegExp.match` which validated the {@link #url} of this media.\n\t\t *\n\t\t * @member {Object}\n\t\t */\n\t\tthis._match = match;\n\n\t\t/**\n\t\t * The function returning the HTML string preview of this media.\n\t\t *\n\t\t * @member {Function}\n\t\t */\n\t\tthis._previewRenderer = previewRenderer;\n\t}\n\n\t/**\n\t * Returns the view element representation of the media.\n\t *\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer used to produce a view element.\n\t * @param {Object} options\n\t * @param {String} [options.renderMediaPreview]\n\t * @param {String} [options.renderForEditingView]\n\t * @returns {module:engine/view/element~Element}\n\t */\n\tgetViewElement( writer, options ) {\n\t\tconst attributes = {};\n\n\t\tif ( options.renderForEditingView || ( options.renderMediaPreview && this.url && this._previewRenderer ) ) {\n\t\t\tif ( this.url ) {\n\t\t\t\tattributes[ 'data-oembed-url' ] = this.url;\n\t\t\t}\n\n\t\t\tif ( options.renderForEditingView ) {\n\t\t\t\tattributes.class = 'ck-media__wrapper';\n\t\t\t}\n\n\t\t\tconst mediaHtml = this._getPreviewHtml( options );\n\n\t\t\treturn writer.createUIElement( 'div', attributes, function( domDocument ) {\n\t\t\t\tconst domElement = this.toDomElement( domDocument );\n\n\t\t\t\tdomElement.innerHTML = mediaHtml;\n\n\t\t\t\treturn domElement;\n\t\t\t} );\n\t\t} else {\n\t\t\tif ( this.url ) {\n\t\t\t\tattributes.url = this.url;\n\t\t\t}\n\n\t\t\treturn writer.createEmptyElement( 'oembed', attributes );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the HTML string of the media content preview.\n\t *\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer used to produce a view element.\n\t * @param {Object} options\n\t * @param {String} [options.renderForEditingView]\n\t * @returns {String}\n\t */\n\t_getPreviewHtml( options ) {\n\t\tif ( this._previewRenderer ) {\n\t\t\treturn this._previewRenderer( this._match );\n\t\t} else {\n\t\t\t// The placeholder only makes sense for editing view and media which have URLs.\n\t\t\t// Placeholder is never displayed in data and URL-less media have no content.\n\t\t\tif ( this.url && options.renderForEditingView ) {\n\t\t\t\treturn this._getPlaceholderHtml();\n\t\t\t}\n\n\t\t\treturn '';\n\t\t}\n\t}\n\n\t/**\n\t * Returns the placeholder HTML when the media has no content preview.\n\t *\n\t * @returns {String}\n\t */\n\t_getPlaceholderHtml() {\n\t\tconst tooltip = new TooltipView();\n\t\tconst icon = new IconView();\n\n\t\ttooltip.text = this._t( 'Open media in new tab' );\n\t\ticon.content = mediaPlaceholderIcon;\n\t\ticon.viewBox = mediaPlaceholderIconViewBox;\n\n\t\tconst placeholder = new Template( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: 'ck ck-reset_all ck-media__placeholder'\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: 'ck-media__placeholder__icon'\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [ icon ]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttag: 'a',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: 'ck-media__placeholder__url',\n\t\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\t\trel: 'noopener noreferrer',\n\t\t\t\t\t\thref: this.url\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttag: 'span',\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tclass: 'ck-media__placeholder__url__text'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tchildren: [ this.url ]\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltip\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t} ).render();\n\n\t\treturn placeholder.outerHTML;\n\t}\n\n\t/**\n\t * Returns the full URL to the specified media.\n\t *\n\t * @param {String} url The URL of the media.\n\t * @returns {String|null}\n\t */\n\t_getValidUrl( url ) {\n\t\tif ( !url ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( url.match( /^https?/ ) ) {\n\t\t\treturn url;\n\t\t}\n\n\t\treturn 'https://' + url;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module media-embed/mediaembedediting\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport { modelToViewUrlAttributeConverter } from './converters';\nimport MediaEmbedCommand from './mediaembedcommand';\nimport MediaRegistry from './mediaregistry';\nimport {\n    toMediaWidget,\n    createMediaFigureElement\n} from './utils';\nimport '../theme/mediaembedediting.css';\n/**\n * The media embed editing feature.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class MediaEmbedEditing extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'MediaEmbedEditing';\n    }\n    /**\n\t * @inheritDoc\n\t */\n    constructor(editor) {\n        super(editor);\n        editor.config.define('mediaEmbed', {\n            providers: [\n                {\n                    name: 'dailymotion',\n                    url: /^dailymotion\\.com\\/video\\/(\\w+)/,\n                    html: match => {\n                        const id = match[1];\n                        return '<div style=\"position: relative; padding-bottom: 100%; height: 0; \">' + `<iframe src=\"https://www.dailymotion.com/embed/video/${ id }\" ` + 'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' + 'frameborder=\"0\" width=\"480\" height=\"270\" allowfullscreen allow=\"autoplay\">' + '</iframe>' + '</div>';\n                    }\n                },\n                {\n                    name: 'spotify',\n                    url: [\n                        /^open\\.spotify\\.com\\/(artist\\/\\w+)/,\n                        /^open\\.spotify\\.com\\/(album\\/\\w+)/,\n                        /^open\\.spotify\\.com\\/(track\\/\\w+)/\n                    ],\n                    html: match => {\n                        const id = match[1];\n                        return '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;\">' + `<iframe src=\"https://open.spotify.com/embed/${ id }\" ` + 'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' + 'frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\">' + '</iframe>' + '</div>';\n                    }\n                },\n                {\n                    name: 'youtube',\n                    url: [\n                        /^(?:m\\.)?youtube\\.com\\/watch\\?v=([\\w-]+)/,\n                        /^(?:m\\.)?youtube\\.com\\/v\\/([\\w-]+)/,\n                        /^youtube\\.com\\/embed\\/([\\w-]+)/,\n                        /^youtu\\.be\\/([\\w-]+)/\n                    ],\n                    html: match => {\n                        const id = match[1];\n                        return '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' + `<iframe src=\"https://www.youtube.com/embed/${ id }\" ` + 'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' + 'frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen>' + '</iframe>' + '</div>';\n                    }\n                },\n                {\n                    name: 'vimeo',\n                    url: [\n                        /^vimeo\\.com\\/(\\d+)/,\n                        /^vimeo\\.com\\/[^/]+\\/[^/]+\\/video\\/(\\d+)/,\n                        /^vimeo\\.com\\/album\\/[^/]+\\/video\\/(\\d+)/,\n                        /^vimeo\\.com\\/channels\\/[^/]+\\/(\\d+)/,\n                        /^vimeo\\.com\\/groups\\/[^/]+\\/videos\\/(\\d+)/,\n                        /^vimeo\\.com\\/ondemand\\/[^/]+\\/(\\d+)/,\n                        /^player\\.vimeo\\.com\\/video\\/(\\d+)/\n                    ],\n                    html: match => {\n                        const id = match[1];\n                        return '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' + `<iframe src=\"https://player.vimeo.com/video/${ id }\" ` + 'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' + 'frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen>' + '</iframe>' + '</div>';\n                    }\n                },\n                {\n                    name: 'instagram',\n                    url: /^instagram\\.com\\/p\\/(\\w+)/\n                },\n                {\n                    name: 'twitter',\n                    url: /^twitter\\.com/\n                },\n                {\n                    name: 'googleMaps',\n                    url: /^google\\.com\\/maps/\n                },\n                {\n                    name: 'flickr',\n                    url: /^flickr\\.com/\n                },\n                {\n                    name: 'facebook',\n                    url: /^facebook\\.com/\n                }\n            ]\n        });\n        /**\n\t\t * The media registry managing the media providers in the editor.\n\t\t *\n\t\t * @member {module:media-embed/mediaregistry~MediaRegistry} #registry\n\t\t */\n        this.registry = new MediaRegistry(editor.locale, editor.config.get('mediaEmbed'));\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const schema = editor.model.schema;\n        const t = editor.t;\n        const conversion = editor.conversion;\n        const renderMediaPreview = editor.config.get('mediaEmbed.previewsInData');\n        const registry = this.registry;\n        editor.commands.add('mediaEmbed', new MediaEmbedCommand(editor));\n        // Configure the schema.\n        schema.register('media', {\n            isObject: true,\n            isBlock: true,\n            allowWhere: '$block',\n            allowAttributes: ['url']\n        });\n        // Model -> Data\n        conversion.for('dataDowncast').elementToElement({\n            model: 'media',\n            view: (modelElement, viewWriter) => {\n                const url = modelElement.getAttribute('url');\n                return createMediaFigureElement(viewWriter, registry, url, { renderMediaPreview: url && renderMediaPreview });\n            }\n        });\n        // Model -> Data (url -> data-oembed-url)\n        conversion.for('dataDowncast').add(modelToViewUrlAttributeConverter(registry, { renderMediaPreview }));\n        // Model -> View (element)\n        conversion.for('editingDowncast').elementToElement({\n            model: 'media',\n            view: (modelElement, viewWriter) => {\n                const url = modelElement.getAttribute('url');\n                const figure = createMediaFigureElement(viewWriter, registry, url, { renderForEditingView: true });\n                return toMediaWidget(figure, viewWriter, t('media widget'));\n            }\n        });\n        // Model -> View (url -> data-oembed-url)\n        conversion.for('editingDowncast').add(modelToViewUrlAttributeConverter(registry, { renderForEditingView: true }));\n        // View -> Model (data-oembed-url -> url)\n        conversion.for('upcast')    // Upcast semantic media.\n.elementToElement({\n            view: {\n                name: 'oembed',\n                attributes: { url: true }\n            },\n            model: (viewMedia, modelWriter) => {\n                const url = viewMedia.getAttribute('url');\n                if (registry.hasMedia(url)) {\n                    return modelWriter.createElement('media', { url });\n                }\n            }\n        })    // Upcast non-semantic media.\n.elementToElement({\n            view: {\n                name: 'div',\n                attributes: { 'data-oembed-url': true }\n            },\n            model: (viewMedia, modelWriter) => {\n                const url = viewMedia.getAttribute('data-oembed-url');\n                if (registry.hasMedia(url)) {\n                    return modelWriter.createElement('media', { url });\n                }\n            }\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module media-embed/automediaembed\n */\n\nimport MediaEmbedEditing from './mediaembedediting';\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Clipboard from '@ckeditor/ckeditor5-clipboard/src/clipboard';\nimport LiveRange from '@ckeditor/ckeditor5-engine/src/model/liverange';\nimport LivePosition from '@ckeditor/ckeditor5-engine/src/model/liveposition';\nimport Undo from '@ckeditor/ckeditor5-undo/src/undo';\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport { insertMedia } from './utils';\n\nconst URL_REGEXP = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w.-]+)+[\\w\\-._~:/?#[\\]@!$&'()*+,;=]+$/;\n\n/**\n * The auto-media embed plugin. It recognizes media links in the pasted content and embeds\n * them shortly after they are injected into the document.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class AutoMediaEmbed extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ Clipboard, Undo ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'AutoMediaEmbed';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The paste–to–embed `setTimeout` ID. Stored as a property to allow\n\t\t * cleaning of the timeout.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} #_timeoutId\n\t\t */\n\t\tthis._timeoutId = null;\n\n\t\t/**\n\t\t * The position where the `<media>` element will be inserted after the timeout,\n\t\t * determined each time the new content is pasted into the document.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/liveposition~LivePosition} #_positionToInsert\n\t\t */\n\t\tthis._positionToInsert = null;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst modelDocument = editor.model.document;\n\n\t\t// We need to listen on `Clipboard#inputTransformation` because we need to save positions of selection.\n\t\t// After pasting, the content between those positions will be checked for a URL that could be transformed\n\t\t// into media.\n\t\tthis.listenTo( editor.plugins.get( Clipboard ), 'inputTransformation', () => {\n\t\t\tconst firstRange = modelDocument.selection.getFirstRange();\n\n\t\t\tconst leftLivePosition = LivePosition.fromPosition( firstRange.start );\n\t\t\tleftLivePosition.stickiness = 'toPrevious';\n\n\t\t\tconst rightLivePosition = LivePosition.fromPosition( firstRange.end );\n\t\t\trightLivePosition.stickiness = 'toNext';\n\n\t\t\tmodelDocument.once( 'change:data', () => {\n\t\t\t\tthis._embedMediaBetweenPositions( leftLivePosition, rightLivePosition );\n\n\t\t\t\tleftLivePosition.detach();\n\t\t\t\trightLivePosition.detach();\n\t\t\t}, { priority: 'high' } );\n\t\t} );\n\n\t\teditor.commands.get( 'undo' ).on( 'execute', () => {\n\t\t\tif ( this._timeoutId ) {\n\t\t\t\tglobal.window.clearTimeout( this._timeoutId );\n\t\t\t\tthis._positionToInsert.detach();\n\n\t\t\t\tthis._timeoutId = null;\n\t\t\t\tthis._positionToInsert = null;\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\t}\n\n\t/**\n\t * Analyzes the part of the document between provided positions in search for a URL representing media.\n\t * When the URL is found, it is automatically converted into media.\n\t *\n\t * @protected\n\t * @param {module:engine/model/liveposition~LivePosition} leftPosition Left position of the selection.\n\t * @param {module:engine/model/liveposition~LivePosition} rightPosition Right position of the selection.\n\t */\n\t_embedMediaBetweenPositions( leftPosition, rightPosition ) {\n\t\tconst editor = this.editor;\n\t\tconst mediaRegistry = editor.plugins.get( MediaEmbedEditing ).registry;\n\t\t// TODO: Use marker instead of LiveRange & LivePositions.\n\t\tconst urlRange = new LiveRange( leftPosition, rightPosition );\n\t\tconst walker = urlRange.getWalker( { ignoreElementEnd: true } );\n\n\t\tlet url = '';\n\n\t\tfor ( const node of walker ) {\n\t\t\tif ( node.item.is( 'textProxy' ) ) {\n\t\t\t\turl += node.item.data;\n\t\t\t}\n\t\t}\n\n\t\turl = url.trim();\n\n\t\t// If the URL does not match to universal URL regexp, let's skip that.\n\t\tif ( !url.match( URL_REGEXP ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the URL represents a media, let's use it.\n\t\tif ( !mediaRegistry.hasMedia( url ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst mediaEmbedCommand = editor.commands.get( 'mediaEmbed' );\n\n\t\t// Do not anything if media element cannot be inserted at the current position (#47).\n\t\tif ( !mediaEmbedCommand.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Position won't be available in the `setTimeout` function so let's clone it.\n\t\tthis._positionToInsert = LivePosition.fromPosition( leftPosition );\n\n\t\t// This action mustn't be executed if undo was called between pasting and auto-embedding.\n\t\tthis._timeoutId = global.window.setTimeout( () => {\n\t\t\teditor.model.change( writer => {\n\t\t\t\tthis._timeoutId = null;\n\n\t\t\t\twriter.remove( urlRange );\n\n\t\t\t\tlet insertionPosition;\n\n\t\t\t\t// Check if position where the media element should be inserted is still valid.\n\t\t\t\t// Otherwise leave it as undefined to use document.selection - default behavior of model.insertContent().\n\t\t\t\tif ( this._positionToInsert.root.rootName !== '$graveyard' ) {\n\t\t\t\t\tinsertionPosition = this._positionToInsert;\n\t\t\t\t}\n\n\t\t\t\tinsertMedia( editor.model, url, insertionPosition );\n\n\t\t\t\tthis._positionToInsert.detach();\n\t\t\t\tthis._positionToInsert = null;\n\t\t\t} );\n\t\t}, 100 );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module media-embed/ui/mediaformview\n */\nimport View from '@ckeditor/ckeditor5-ui/src/view';\nimport ViewCollection from '@ckeditor/ckeditor5-ui/src/viewcollection';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport LabeledInputView from '@ckeditor/ckeditor5-ui/src/labeledinput/labeledinputview';\nimport InputTextView from '@ckeditor/ckeditor5-ui/src/inputtext/inputtextview';\nimport submitHandler from '@ckeditor/ckeditor5-ui/src/bindings/submithandler';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '@ckeditor/ckeditor5-ui/src/focuscycler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\nimport checkIcon from '@ckeditor/ckeditor5-core/theme/icons/check.svg';\nimport cancelIcon from '@ckeditor/ckeditor5-core/theme/icons/cancel.svg';\nimport '../../theme/mediaform.css';\n/**\n * The media form view controller class.\n *\n * See {@link module:media-embed/ui/mediaformview~MediaFormView}.\n *\n * @extends module:ui/view~View\n */\nexport default class MediaFormView extends View {\n    /**\n\t * @param {Array.<Function>} validators Form validators used by {@link #isValid}.\n\t * @param {module:utils/locale~Locale} [locale] The localization services instance.\n\t */\n    constructor(validators, locale) {\n        super(locale);\n        const t = locale.t;\n        /**\n\t\t * Tracks information about DOM focus in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n        this.focusTracker = new FocusTracker();\n        /**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n        this.keystrokes = new KeystrokeHandler();\n        /**\n\t\t * The URL input view.\n\t\t *\n\t\t * @member {module:ui/labeledinput/labeledinputview~LabeledInputView}\n\t\t */\n        this.urlInputView = this._createUrlInput();\n        /**\n\t\t * The Save button view.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView}\n\t\t */\n        this.saveButtonView = this._createButton(t('Save'), checkIcon, 'ck-button-save');\n        this.saveButtonView.type = 'submit';\n        /**\n\t\t * The Cancel button view.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView}\n\t\t */\n        this.cancelButtonView = this._createButton(t('Cancel'), cancelIcon, 'ck-button-cancel', 'cancel');\n        /**\n\t\t * A collection of views that can be focused in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this._focusables = new ViewCollection();\n        /**\n\t\t * Helps cycling over {@link #_focusables} in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n        this._focusCycler = new FocusCycler({\n            focusables: this._focusables,\n            focusTracker: this.focusTracker,\n            keystrokeHandler: this.keystrokes,\n            actions: {\n                // Navigate form fields backwards using the Shift + Tab keystroke.\n                focusPrevious: 'shift + tab',\n                // Navigate form fields forwards using the Tab key.\n                focusNext: 'tab'\n            }\n        });\n        /**\n\t\t * An array of form validators used by {@link #isValid}.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {Array.<Function>}\n\t\t */\n        this._validators = validators;\n        this.setTemplate({\n            tag: 'form',\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-media-form'\n                ],\n                tabindex: '-1'\n            },\n            children: [\n                this.urlInputView,\n                this.saveButtonView,\n                this.cancelButtonView\n            ]\n        });    /**\n\t\t * The default info text for the {@link #urlInputView}.\n\t\t *\n\t\t * @private\n\t\t * @member {String} #_urlInputViewInfoDefault\n\t\t */\n               /**\n\t\t * The info text with an additional tip for the {@link #urlInputView},\n\t\t * displayed when the input has some value.\n\t\t *\n\t\t * @private\n\t\t * @member {String} #_urlInputViewInfoTip\n\t\t */\n    }\n    /**\n\t * @inheritDoc\n\t */\n    render() {\n        super.render();\n        submitHandler({ view: this });\n        const childViews = [\n            this.urlInputView,\n            this.saveButtonView,\n            this.cancelButtonView\n        ];\n        childViews.forEach(v => {\n            // Register the view as focusable.\n            this._focusables.add(v);\n            // Register the view in the focus tracker.\n            this.focusTracker.add(v.element);\n        });\n        // Start listening for the keystrokes coming from #element.\n        this.keystrokes.listenTo(this.element);\n        const stopPropagation = data => data.stopPropagation();\n        // Since the form is in the dropdown panel which is a child of the toolbar, the toolbar's\n        // keystroke handler would take over the key management in the URL input. We need to prevent\n        // this ASAP. Otherwise, the basic caret movement using the arrow keys will be impossible.\n        this.keystrokes.set('arrowright', stopPropagation);\n        this.keystrokes.set('arrowleft', stopPropagation);\n        this.keystrokes.set('arrowup', stopPropagation);\n        this.keystrokes.set('arrowdown', stopPropagation);\n        // Intercept the \"selectstart\" event, which is blocked by default because of the default behavior\n        // of the DropdownView#panelView.\n        // TODO: blocking \"selectstart\" in the #panelView should be configurable per–drop–down instance.\n        this.listenTo(this.urlInputView.element, 'selectstart', (evt, domEvt) => {\n            domEvt.stopPropagation();\n        }, { priority: 'high' });\n    }\n    /**\n\t * Focuses the fist {@link #_focusables} in the form.\n\t */\n    focus() {\n        this._focusCycler.focusFirst();\n    }\n    /**\n\t * The native DOM `value` of the {@link #urlInputView} element.\n\t *\n\t * **Note**: Do not confuse it with the {@link module:ui/inputtext/inputtextview~InputTextView#value}\n\t * which works one way only and may not represent the actual state of the component in the DOM.\n\t *\n\t * @type {Number}\n\t */\n    get url() {\n        return this.urlInputView.inputView.element.value.trim();\n    }\n    /**\n\t * Sets the native DOM `value` of the {@link #urlInputView} element.\n\t *\n\t * **Note**: Do not confuse it with the {@link module:ui/inputtext/inputtextview~InputTextView#value}\n\t * which works one way only and may not represent the actual state of the component in the DOM.\n\t *\n\t * @param {String} url\n\t */\n    set url(url) {\n        this.urlInputView.inputView.element.value = url.trim();\n    }\n    /**\n\t * Validates the form and returns `false` when some fields are invalid.\n\t *\n\t * @returns {Boolean}\n\t */\n    isValid() {\n        this.resetFormStatus();\n        for (const validator of this._validators) {\n            const errorText = validator(this);\n            // One error per field is enough.\n            if (errorText) {\n                // Apply updated error.\n                this.urlInputView.errorText = errorText;\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n\t * Cleans up the supplementary error and information text of the {@link #urlInputView}\n\t * bringing them back to the state when the form has been displayed for the first time.\n\t *\n\t * See {@link #isValid}.\n\t */\n    resetFormStatus() {\n        this.urlInputView.errorText = null;\n        this.urlInputView.infoText = this._urlInputViewInfoDefault;\n    }\n    /**\n\t * Creates a labeled input view.\n\t *\n\t * @private\n\t * @returns {module:ui/labeledinput/labeledinputview~LabeledInputView} Labeled input view instance.\n\t */\n    _createUrlInput() {\n        const t = this.locale.t;\n        const labeledInput = new LabeledInputView(this.locale, InputTextView);\n        const inputView = labeledInput.inputView;\n        this._urlInputViewInfoDefault = t('Paste the media URL in the input.');\n        this._urlInputViewInfoTip = t('Tip: Paste the URL into the content to embed faster.');\n        labeledInput.label = t('Media URL');\n        labeledInput.infoText = this._urlInputViewInfoDefault;\n        inputView.placeholder = 'https://example.com';\n        inputView.on('input', () => {\n            // Display the tip text only when there's some value. Otherwise fall back to the default info text.\n            labeledInput.infoText = inputView.element.value ? this._urlInputViewInfoTip : this._urlInputViewInfoDefault;\n        });\n        return labeledInput;\n    }\n    /**\n\t * Creates a button view.\n\t *\n\t * @private\n\t * @param {String} label The button label.\n\t * @param {String} icon The button icon.\n\t * @param {String} className The additional button CSS class name.\n\t * @param {String} [eventName] An event name that the `ButtonView#execute` event will be delegated to.\n\t * @returns {module:ui/button/buttonview~ButtonView} The button view instance.\n\t */\n    _createButton(label, icon, className, eventName) {\n        const button = new ButtonView(this.locale);\n        button.set({\n            label,\n            icon,\n            tooltip: true\n        });\n        button.extendTemplate({ attributes: { class: className } });\n        if (eventName) {\n            button.delegate('execute').to(this, eventName);\n        }\n        return button;\n    }\n}    /**\n * Fired when the form view is submitted (when one of the children triggered the submit event),\n * e.g. click on {@link #saveButtonView}.\n *\n * @event submit\n */\n     /**\n * Fired when the form view is canceled, e.g. click on {@link #cancelButtonView}.\n *\n * @event cancel\n */","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module media-embed/mediaembedui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport { createDropdown } from '@ckeditor/ckeditor5-ui/src/dropdown/utils';\nimport MediaFormView from './ui/mediaformview';\nimport MediaEmbedEditing from './mediaembedediting';\nimport mediaIcon from '../theme/icons/media.svg';\n/**\n * The media embed UI plugin.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class MediaEmbedUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get requires() {\n        return [MediaEmbedEditing];\n    }\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'MediaEmbedUI';\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const command = editor.commands.get('mediaEmbed');\n        const registry = editor.plugins.get(MediaEmbedEditing).registry;\n        /**\n\t\t * The form view displayed inside the drop-down.\n\t\t *\n\t\t * @member {module:media-embed/ui/mediaformview~MediaFormView}\n\t\t */\n        this.form = new MediaFormView(getFormValidators(editor.t, registry), editor.locale);\n        // Setup `imageUpload` button.\n        editor.ui.componentFactory.add('mediaEmbed', locale => {\n            const dropdown = createDropdown(locale);\n            this._setUpDropdown(dropdown, this.form, command, editor);\n            this._setUpForm(this.form, dropdown, command);\n            return dropdown;\n        });\n    }\n    _setUpDropdown(dropdown, form, command) {\n        const editor = this.editor;\n        const t = editor.t;\n        const button = dropdown.buttonView;\n        dropdown.bind('isEnabled').to(command);\n        dropdown.panelView.children.add(form);\n        button.set({\n            label: t('Insert media'),\n            icon: mediaIcon,\n            tooltip: true\n        });\n        // Note: Use the low priority to make sure the following listener starts working after the\n        // default action of the drop-down is executed (i.e. the panel showed up). Otherwise, the\n        // invisible form/input cannot be focused/selected.\n        button.on('open', () => {\n            // Make sure that each time the panel shows up, the URL field remains in sync with the value of\n            // the command. If the user typed in the input, then canceled (`urlInputView#value` stays\n            // unaltered) and re-opened it without changing the value of the media command (e.g. because they\n            // didn't change the selection), they would see the old value instead of the actual value of the\n            // command.\n            form.url = command.value || '';\n            form.urlInputView.select();\n            form.focus();\n        }, { priority: 'low' });\n        dropdown.on('submit', () => {\n            if (form.isValid()) {\n                editor.execute('mediaEmbed', form.url);\n                closeUI();\n            }\n        });\n        dropdown.on('change:isOpen', () => form.resetFormStatus());\n        dropdown.on('cancel', () => closeUI());\n        function closeUI() {\n            editor.editing.view.focus();\n            dropdown.isOpen = false;\n        }\n    }\n    _setUpForm(form, dropdown, command) {\n        form.delegate('submit', 'cancel').to(dropdown);\n        form.urlInputView.bind('value').to(command, 'value');\n        // Form elements should be read-only when corresponding commands are disabled.\n        form.urlInputView.bind('isReadOnly').to(command, 'isEnabled', value => !value);\n        form.saveButtonView.bind('isEnabled').to(command);\n    }\n}\nfunction getFormValidators(t, registry) {\n    return [\n        form => {\n            if (!form.url.length) {\n                return t('The URL must not be empty.');\n            }\n        },\n        form => {\n            if (!registry.hasMedia(form.url)) {\n                return t('This media URL is not supported.');\n            }\n        }\n    ];\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module media-embed/mediaembed\n */\n\nimport MediaEmbedEditing from './mediaembedediting';\nimport AutoMediaEmbed from './automediaembed';\nimport MediaEmbedUI from './mediaembedui';\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Widget from '@ckeditor/ckeditor5-widget/src/widget';\n\nimport '../theme/mediaembed.css';\n\n/**\n * The media embed plugin.\n *\n * For a detailed overview, check the {@glink features/media-embed Media Embed feature documentation}.\n *\n * This is a \"glue\" plugin which loads the following plugins:\n *\n * * The {@link module:media-embed/mediaembedediting~MediaEmbedEditing media embed editing feature},\n * * The {@link module:media-embed/mediaembedui~MediaEmbedUI media embed UI feature} and\n * * The {@link module:media-embed/automediaembed~AutoMediaEmbed auto-media embed feature}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class MediaEmbed extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ MediaEmbedEditing, MediaEmbedUI, AutoMediaEmbed, Widget ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'MediaEmbed';\n\t}\n}\n\n/**\n * The media embed provider descriptor. Used in\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#providers `config.mediaEmbed.providers`} and\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#extraProviders `config.mediaEmbed.extraProviders`}.\n *\n * See {@link module:media-embed/mediaembed~MediaEmbedConfig} to learn more.\n *\n *\t\t{\n *\t\t\tname: 'example',\n *\n *\t\t\t// The following RegExp matches https://www.example.com/media/{media id},\n *\t\t\t// (either with \"http(s)://\" and \"www\" or without), so the valid URLs are:\n *\t\t\t//\n *\t\t\t// * https://www.example.com/media/{media id},\n *\t\t\t// * http://www.example.com/media/{media id},\n *\t\t\t// * www.example.com/media/{media id},\n *\t\t\t// * example.com/media/{media id}\n *\t\t\turl: /^example\\.com\\/media\\/(\\w+)/,\n *\n *\t\t\t// The rendering function of the provider.\n *\t\t\t// Used to represent the media when editing the content (i.e. in the view)\n *\t\t\t// and also in the data output of the editor if semantic data output is disabled.\n *\t\t\thtml: match => `The HTML representing the media with ID=${ match[ 1 ] }.`\n *\t\t}\n *\n * You can allow any sort of media in the editor using the \"allow–all\" `RegExp`.\n * But mind that, since URLs are processed in the order of configuration, if one of the previous\n * `RegExps` matches the URL, it will have a precedence over this one.\n *\n *\t\t{\n *\t\t\tname: 'allow-all',\n *\t\t\turl: /^.+/\n *\t\t}\n *\n * To implement responsive media, you can use the following HTML structure:\n *\n *\t\t{\n *\t\t\t...\n *\t\t\thtml: match =>\n *\t\t\t\t'<div style=\"position:relative; padding-bottom:100%; height:0\">' +\n *\t\t\t\t\t'<iframe src=\"...\" frameborder=\"0\" ' +\n *\t\t\t\t\t\t'style=\"position:absolute; width:100%; height:100%; top:0; left:0\">' +\n *\t\t\t\t\t'</iframe>' +\n *\t\t\t\t'</div>'\n *\t\t}\n *\n * @typedef {Object} module:media-embed/mediaembed~MediaEmbedProvider\n * @property {String} name The name of the provider. Used e.g. when\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#removeProviders removing providers}.\n * @property {RegExp|Array.<RegExp>} url The `RegExp` object (or array of objects) defining the URL of the media.\n * If any URL matches the `RegExp`, it becomes the media in the editor model, as defined by the provider. The result\n * of matching (output of `String.prototype.match()`) is passed to the `html` rendering function of the media.\n *\n * **Note:** You do not need to include the protocol (`http://`, `https://`) and `www` subdomain in your `RegExps`,\n * they are stripped from the URLs before matching anyway.\n * @property {Function} [html] (optional) The rendering function of the media. The function receives the entire matching\n * array from the corresponding `url` `RegExp` as an argument, allowing rendering a dedicated\n * preview of the media identified by a certain ID or a hash. When not defined, the media embed feature\n * will use a generic media representation in the view and output data.\n * Note that when\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#previewsInData `config.mediaEmbed.previewsInData`}\n * is `true`, the rendering function **will always** be used for the media in the editor data output.\n */\n\n/**\n * The configuration of the {@link module:media-embed/mediaembed~MediaEmbed} feature.\n *\n * Read more in {@link module:media-embed/mediaembed~MediaEmbedConfig}.\n *\n * @member {module:media-embed/mediaembed~MediaEmbedConfig} module:core/editor/editorconfig~EditorConfig#mediaEmbed\n */\n\n/**\n * The configuration of the media embed features.\n *\n * Read more about {@glink features/media-embed#configuration configuring the media embed feature}.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n * \t\t\t\tmediaEmbed: ... // Media embed feature options.\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See {@link module:core/editor/editorconfig~EditorConfig all editor options}.\n *\n * @interface MediaEmbedConfig\n */\n\n/**\n * The default media providers supported by the editor.\n *\n * The names of providers with rendering functions (previews):\n *\n * * \"dailymotion\",\n * * \"spotify\",\n * * \"youtube\",\n * * \"vimeo\"\n *\n * The names of providers without rendering functions:\n *\n * * \"instagram\",\n * * \"twitter\",\n * * \"googleMaps\",\n * * \"flickr\",\n * * \"facebook\"\n *\n * See the {@link module:media-embed/mediaembed~MediaEmbedProvider provider syntax} to learn more about\n * different kinds of media and media providers.\n *\n * **Note**: The default media provider configuration may not support all possible media URLs,\n * only the most common are included.\n *\n * Media without rendering functions are always represented in the data using the \"semantic\" markup. See\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#previewsInData `config.mediaEmbed.previewsInData`} to\n * learn more about possible data outputs.\n *\n * The priority of media providers corresponds to the order of configuration. The first provider\n * to match the URL is always used, even if there are other providers that support a particular URL.\n * The URL is never matched against the remaining providers.\n *\n * To discard **all** default media providers, simply override this configuration with your own\n * {@link module:media-embed/mediaembed~MediaEmbedProvider definitions}:\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n *\t\t\t\tplugins: [ MediaEmbed, ... ],\n *\t\t\t\tmediaEmbed: {\n *\t\t\t\t\tproviders: [\n *\t\t\t\t\t\t{\n *\t\t\t\t\t\t\t name: 'myProvider',\n *\t\t\t\t\t\t\t url: /^example\\.com\\/media\\/(\\w+)/,\n *\t\t\t\t\t\t\t html: match => '...'\n *\t\t\t\t\t\t},\n *\t\t\t\t\t\t...\n * \t\t\t\t\t]\n *\t\t\t\t}\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * You can take inspiration from the default configuration of this feature which you can find in:\n * https://github.com/ckeditor/ckeditor5-media-embed/blob/master/src/mediaembedediting.js\n *\n * To **extend** the list of default providers, use\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#extraProviders `config.mediaEmbed.extraProviders`}.\n *\n * To **remove** certain providers, use\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#removeProviders `config.mediaEmbed.removeProviders`}.\n *\n * @member {Array.<module:media-embed/mediaembed~MediaEmbedProvider>} module:media-embed/mediaembed~MediaEmbedConfig#providers\n */\n\n/**\n * The additional media providers supported by the editor. This configuration helps extend the default\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#providers}.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n *\t\t\t\tplugins: [ MediaEmbed, ... ],\n *\t\t\t\tmediaEmbed: {\n *\t\t\t\t\textraProviders: [\n *\t\t\t\t\t\t{\n *\t\t\t\t\t\t\t name: 'extraProvider',\n *\t\t\t\t\t\t\t url: /^example\\.com\\/media\\/(\\w+)/,\n *\t\t\t\t\t\t\t html: match => '...'\n *\t\t\t\t\t\t},\n *\t\t\t\t\t\t...\n * \t\t\t\t\t]\n *\t\t\t\t}\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See the {@link module:media-embed/mediaembed~MediaEmbedProvider provider syntax} to learn more.\n *\n * @member {Array.<module:media-embed/mediaembed~MediaEmbedProvider>} module:media-embed/mediaembed~MediaEmbedConfig#extraProviders\n */\n\n/**\n * The list of media providers that should not be used despite being available in\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#providers `config.mediaEmbed.providers`} and\n * {@link module:media-embed/mediaembed~MediaEmbedConfig#extraProviders `config.mediaEmbed.extraProviders`}\n *\n *\t\tmediaEmbed: {\n *\t\t\tremoveProviders: [ 'youtube', 'twitter' ]\n *\t\t}\n *\n * @member {Array.<String>} module:media-embed/mediaembed~MediaEmbedConfig#removeProviders\n */\n\n/**\n * Controls the data format produced by the feature.\n *\n * When `false` (default), the feature produces \"semantic\" data, i.e. it does not include the preview of\n * the media, just the `<oembed>` tag with the `url` attribute:\n *\n *\t\t<figure class=\"media\">\n *\t\t\t<oembed url=\"https://url\"></oembed>\n *\t\t</figure>\n *\n * When `true`, the media is represented in the output in the same way it looks in the editor,\n * i.e. the media preview is saved to the database:\n *\n *\t\t<figure class=\"media\">\n *\t\t\t<div data-oembed-url=\"https://url\">\n *\t\t\t\t<iframe src=\"https://preview\"></iframe>\n *\t\t\t</div>\n *\t\t</figure>\n *\n * **Note:** Media without preview are always represented in the data using the \"semantic\" markup\n * regardless of the value of the `previewsInData`. Learn more about different kinds of media\n * in the {@link module:media-embed/mediaembed~MediaEmbedConfig#providers `config.mediaEmbed.providers`}\n * configuration description.\n *\n * @member {Boolean} [module:media-embed/mediaembed~MediaEmbedConfig#previewsInData=false]\n */\n","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z\\\"/></svg>\"","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagetoolbar\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport { getSelectedImageWidget } from './image/utils';\nimport WidgetToolbarRepository from '@ckeditor/ckeditor5-widget/src/widgettoolbarrepository';\n\n/**\n * The image toolbar plugin. It creates and manages the image toolbar (the toolbar displayed when an image is selected).\n *\n * For a detailed overview, check the {@glink features/image#image-contextual-toolbar image contextual toolbar} documentation.\n *\n * Instances of toolbar components (e.g. buttons) are created using the editor's\n * {@link module:ui/componentfactory~ComponentFactory component factory}\n * based on the {@link module:image/image~ImageConfig#toolbar `image.toolbar` configuration option}.\n *\n * The toolbar uses the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageToolbar extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ WidgetToolbarRepository ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageToolbar';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\tconst editor = this.editor;\n\t\tconst widgetToolbarRepository = editor.plugins.get( WidgetToolbarRepository );\n\n\t\twidgetToolbarRepository.register( 'image', {\n\t\t\titems: editor.config.get( 'image.toolbar' ) || [],\n\t\t\tgetRelatedElement: getSelectedImageWidget,\n\t\t} );\n\t}\n}\n\n/**\n * Items to be placed in the image toolbar.\n * This option is used by the {@link module:image/imagetoolbar~ImageToolbar} feature.\n *\n * Assuming that you use the following features:\n *\n * * {@link module:image/imagestyle~ImageStyle} (with a default configuration),\n * * {@link module:image/imagetextalternative~ImageTextAlternative},\n *\n * three toolbar items will be available in {@link module:ui/componentfactory~ComponentFactory}:\n * `'imageStyle:full'`, `'imageStyle:side'`, and `'imageTextAlternative'` so you can configure the toolbar like this:\n *\n *\t\tconst imageConfig = {\n *\t\t\ttoolbar: [ 'imageStyle:full', 'imageStyle:side', '|', 'imageTextAlternative' ]\n *\t\t};\n *\n * Of course, the same buttons can also be used in the\n * {@link module:core/editor/editorconfig~EditorConfig#toolbar main editor toolbar}.\n *\n * Read more about configuring toolbar in {@link module:core/editor/editorconfig~EditorConfig#toolbar}.\n *\n * @member {Array.<String>} module:image/image~ImageConfig#toolbar\n */\n","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 64 42\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M18.68 2.53c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.08c0-.58-.01-.55.6-.55h17.38zM15.77 14.5v-10H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 6.677a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V6.676z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\\\" opacity=\\\".6\\\"/><path d=\\\"M18 7v1H2V7h16zm0 5v1H2v-1h16z\\\" opacity=\\\".6\\\"/><path d=\\\"M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\\\" opacity=\\\".6\\\"/><path d=\\\"M7 2h1v16H7V2zm5 0h1v16h-1V2z\\\" opacity=\\\".6\\\"/><path d=\\\"M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z\\\"/></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\\\" opacity=\\\".6\\\"/><path d=\\\"M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z\\\" opacity=\\\".6\\\"/><path d=\\\"M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z\\\"/></svg>\"","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module link/findlinkrange\n */\n\n/**\n * Returns a range containing the entire link in which the given `position` is placed.\n *\n * It can be used e.g. to get the entire range on which the `linkHref` attribute needs to be changed when having a\n * selection inside a link.\n *\n * @param {module:engine/model/position~Position} position The start position.\n * @param {String} value The `linkHref` attribute value.\n * @returns {module:engine/model/range~Range} The link range.\n */\nexport default function findLinkRange( position, value, model ) {\n\treturn model.createRange( _findBound( position, value, true, model ), _findBound( position, value, false, model ) );\n}\n\n// Walks forward or backward (depends on the `lookBack` flag), node by node, as long as they have the same `linkHref` attribute value\n// and returns a position just before or after (depends on the `lookBack` flag) the last matched node.\n//\n// @param {module:engine/model/position~Position} position The start position.\n// @param {String} value The `linkHref` attribute value.\n// @param {Boolean} lookBack Whether the walk direction is forward (`false`) or backward (`true`).\n// @returns {module:engine/model/position~Position} The position just before the last matched node.\nfunction _findBound( position, value, lookBack, model ) {\n\t// Get node before or after position (depends on `lookBack` flag).\n\t// When position is inside text node then start searching from text node.\n\tlet node = position.textNode || ( lookBack ? position.nodeBefore : position.nodeAfter );\n\n\tlet lastNode = null;\n\n\twhile ( node && node.getAttribute( 'linkHref' ) == value ) {\n\t\tlastNode = node;\n\t\tnode = lookBack ? node.previousSibling : node.nextSibling;\n\t}\n\n\treturn lastNode ? model.createPositionAt( lastNode, lookBack ? 'before' : 'after' ) : position;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module link/linkcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport findLinkRange from './findlinkrange';\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\n\n/**\n * The link command. It is used by the {@link module:link/link~Link link feature}.\n *\n * @extends module:core/command~Command\n */\nexport default class LinkCommand extends Command {\n\t/**\n\t * The value of the `'linkHref'` attribute if the start of the selection is located in a node with this attribute.\n\t *\n\t * @observable\n\t * @readonly\n\t * @member {Object|undefined} #value\n\t */\n\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * A collection of {@link module:link/utils~ManualDecorator manual decorators}\n\t\t * corresponding to the {@link module:link/link~LinkConfig#decorators decorator configuration}.\n\t\t *\n\t\t * You can consider it a model with states of manual decorators added to currently selected link.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/collection~Collection}\n\t\t */\n\t\tthis.manualDecorators = new Collection();\n\t}\n\n\t/**\n\t * Synchronize state of {@link #manualDecorators} with actually present elements in the model.\n\t */\n\trestoreManualDecoratorStates() {\n\t\tfor ( const manualDecorator of this.manualDecorators ) {\n\t\t\tmanualDecorator.value = this._getDecoratorStateFromModel( manualDecorator.id );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tthis.value = doc.selection.getAttribute( 'linkHref' );\n\n\t\tfor ( const manualDecorator of this.manualDecorators ) {\n\t\t\tmanualDecorator.value = this._getDecoratorStateFromModel( manualDecorator.id );\n\t\t}\n\n\t\tthis.isEnabled = model.schema.checkAttributeInSelection( doc.selection, 'linkHref' );\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * When the selection is non-collapsed, the `linkHref` attribute will be applied to nodes inside the selection, but only to\n\t * those nodes where the `linkHref` attribute is allowed (disallowed nodes will be omitted).\n\t *\n\t * When the selection is collapsed and is not inside the text with the `linkHref` attribute, the\n\t * new {@link module:engine/model/text~Text Text node} with the `linkHref` attribute will be inserted in place of caret, but\n\t * only if such element is allowed in this place. The `_data` of the inserted text will equal the `href` parameter.\n\t * The selection will be updated to wrap the just inserted text node.\n\t *\n\t * When the selection is collapsed and inside the text with the `linkHref` attribute, the attribute value will be updated.\n\t *\n\t * # Decorators and model attribute management\n\t *\n\t * There is an optional argument to this command, which applies or removes model\n\t * {@glink framework/guides/architecture/editing-engine#text-attributes text attributes} brought by\n\t * {@link module:link/utils~ManualDecorator manual link decorators}.\n\t *\n\t * Text attribute names in the model correspond to the entries in the {@link module:link/link~LinkConfig#decorators configuration}.\n\t * For every decorator configured, a model text attribute exists with the \"link\" prefix. For example, a `'linkMyDecorator'` attribute\n\t * corresponds to the `'myDecorator'` in the configuration.\n\t *\n\t * To learn more about link decorators, check out the {@link module:link/link~LinkConfig#decorators `config.link.decorators`}\n\t * documentation.\n\t *\n\t * Here is how to manage decorator attributes via the link command:\n\t *\n\t *\t\tconst linkCommand = editor.commands.get( 'link' );\n\t *\n\t *\t\t// Adding a new decorator attribute.\n\t *\t\tlinkCommand.execute( 'http://example.com', {\n\t *\t\t\tlinkIsExternal: true\n\t *\t\t} );\n\t *\n\t *\t\t// Removing a decorator attribute from a selection.\n\t *\t\tlinkCommand.execute( 'http://example.com', {\n\t *\t\t\tlinkIsExternal: false\n\t *\t\t} );\n\t *\n\t *\t\t// Adding multiple decorator attributes at a time.\n\t *\t\tlinkCommand.execute( 'http://example.com', {\n\t *\t\t\tlinkIsExternal: true,\n\t *\t\t\tlinkIsDownloadable: true,\n\t *\t\t} );\n\t *\n\t *\t\t// Removing and adding decorator attributes at a time.\n\t *\t\tlinkCommand.execute( 'http://example.com', {\n\t *\t\t\tlinkIsExternal: false,\n\t *\t\t\tlinkFoo: true,\n\t *\t\t\tlinkIsDownloadable: false,\n\t *\t\t} );\n\t *\n\t * **Note**: If decorator attribute name is not specified its state remains untouched.\n\t *\n\t * **Note**: {@link module:link/unlinkcommand~UnlinkCommand#execute `UnlinkCommand#execute()`} removes all\n\t * decorator attributes.\n\t *\n\t * @fires execute\n\t * @param {String} href Link destination.\n\t * @param {Object} [manualDecoratorIds={}] The information about manual decorator attributes to be applied or removed upon execution.\n\t */\n\texecute( href, manualDecoratorIds = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\t\t// Stores information about manual decorators to turn them on/off when command is applied.\n\t\tconst truthyManualDecorators = [];\n\t\tconst falsyManualDecorators = [];\n\n\t\tfor ( const name in manualDecoratorIds ) {\n\t\t\tif ( manualDecoratorIds[ name ] ) {\n\t\t\t\ttruthyManualDecorators.push( name );\n\t\t\t} else {\n\t\t\t\tfalsyManualDecorators.push( name );\n\t\t\t}\n\t\t}\n\n\t\tmodel.change( writer => {\n\t\t\t// If selection is collapsed then update selected link or insert new one at the place of caret.\n\t\t\tif ( selection.isCollapsed ) {\n\t\t\t\tconst position = selection.getFirstPosition();\n\n\t\t\t\t// When selection is inside text with `linkHref` attribute.\n\t\t\t\tif ( selection.hasAttribute( 'linkHref' ) ) {\n\t\t\t\t\t// Then update `linkHref` value.\n\t\t\t\t\tconst linkRange = findLinkRange( position, selection.getAttribute( 'linkHref' ), model );\n\n\t\t\t\t\twriter.setAttribute( 'linkHref', href, linkRange );\n\n\t\t\t\t\ttruthyManualDecorators.forEach( item => {\n\t\t\t\t\t\twriter.setAttribute( item, true, linkRange );\n\t\t\t\t\t} );\n\n\t\t\t\t\tfalsyManualDecorators.forEach( item => {\n\t\t\t\t\t\twriter.removeAttribute( item, linkRange );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Create new range wrapping changed link.\n\t\t\t\t\twriter.setSelection( linkRange );\n\t\t\t\t}\n\t\t\t\t// If not then insert text node with `linkHref` attribute in place of caret.\n\t\t\t\t// However, since selection in collapsed, attribute value will be used as data for text node.\n\t\t\t\t// So, if `href` is empty, do not create text node.\n\t\t\t\telse if ( href !== '' ) {\n\t\t\t\t\tconst attributes = toMap( selection.getAttributes() );\n\n\t\t\t\t\tattributes.set( 'linkHref', href );\n\n\t\t\t\t\ttruthyManualDecorators.forEach( item => {\n\t\t\t\t\t\tattributes.set( item, true );\n\t\t\t\t\t} );\n\n\t\t\t\t\tconst node = writer.createText( href, attributes );\n\n\t\t\t\t\tmodel.insertContent( node, position );\n\n\t\t\t\t\t// Create new range wrapping created node.\n\t\t\t\t\twriter.setSelection( writer.createRangeOn( node ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If selection has non-collapsed ranges, we change attribute on nodes inside those ranges\n\t\t\t\t// omitting nodes where `linkHref` attribute is disallowed.\n\t\t\t\tconst ranges = model.schema.getValidRanges( selection.getRanges(), 'linkHref' );\n\n\t\t\t\tfor ( const range of ranges ) {\n\t\t\t\t\twriter.setAttribute( 'linkHref', href, range );\n\n\t\t\t\t\ttruthyManualDecorators.forEach( item => {\n\t\t\t\t\t\twriter.setAttribute( item, true, range );\n\t\t\t\t\t} );\n\n\t\t\t\t\tfalsyManualDecorators.forEach( item => {\n\t\t\t\t\t\twriter.removeAttribute( item, range );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Method provides the information if a decorator with given name is present in currently processed selection.\n\t *\n\t * @private\n\t * @param {String} decoratorName name of a manual decorator used in the model\n\t * @returns {Boolean} The information if a given decorator is currently present in a selection\n\t */\n\t_getDecoratorStateFromModel( decoratorName ) {\n\t\tconst doc = this.editor.model.document;\n\t\treturn doc.selection.getAttribute( decoratorName ) || false;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module link/unlinkcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport findLinkRange from './findlinkrange';\n\n/**\n * The unlink command. It is used by the {@link module:link/link~Link link plugin}.\n *\n * @extends module:core/command~Command\n */\nexport default class UnlinkCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tthis.isEnabled = this.editor.model.document.selection.hasAttribute( 'linkHref' );\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * When the selection is collapsed, removes the `linkHref` attribute from each node with the same `linkHref` attribute value.\n\t * When the selection is non-collapsed, removes the `linkHref` attribute from each node in selected ranges.\n\t *\n\t * # Decorators\n\t *\n\t * If {@link module:link/link~LinkConfig#decorators `config.link.decorators`} is specified,\n\t * all configured decorators are removed together with the `linkHref` attribute.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst editor = this.editor;\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\t\tconst linkCommand = editor.commands.get( 'link' );\n\n\t\tmodel.change( writer => {\n\t\t\t// Get ranges to unlink.\n\t\t\tconst rangesToUnlink = selection.isCollapsed ?\n\t\t\t\t[ findLinkRange( selection.getFirstPosition(), selection.getAttribute( 'linkHref' ), model ) ] : selection.getRanges();\n\n\t\t\t// Remove `linkHref` attribute from specified ranges.\n\t\t\tfor ( const range of rangesToUnlink ) {\n\t\t\t\twriter.removeAttribute( 'linkHref', range );\n\t\t\t\t// If there are registered custom attributes, then remove them during unlink.\n\t\t\t\tif ( linkCommand ) {\n\t\t\t\t\tfor ( const manualDecorator of linkCommand.manualDecorators ) {\n\t\t\t\t\t\twriter.removeAttribute( manualDecorator.id, range );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseSlice from './_baseSlice.js';\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nexport default castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nexport default hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nexport default asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nexport default unicodeToArray;\n","import asciiToArray from './_asciiToArray.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeToArray from './_unicodeToArray.js';\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nexport default stringToArray;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nexport default createCaseFirst;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nexport default upperFirst;\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module link/utils\n */\nimport { upperFirst } from 'lodash-es';\nconst ATTRIBUTE_WHITESPACES = /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g;\n// eslint-disable-line no-control-regex\nconst SAFE_URL = /^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;\n/**\n * Returns `true` if a given view node is the link element.\n *\n * @param {module:engine/view/node~Node} node\n * @returns {Boolean}\n */\nexport function isLinkElement(node) {\n    return node.is('attributeElement') && !!node.getCustomProperty('link');\n}\n/**\n * Creates link {@link module:engine/view/attributeelement~AttributeElement} with provided `href` attribute.\n *\n * @param {String} href\n * @returns {module:engine/view/attributeelement~AttributeElement}\n */\nexport function createLinkElement(href, writer) {\n    // Priority 5 - https://github.com/ckeditor/ckeditor5-link/issues/121.\n    const linkElement = writer.createAttributeElement('a', { href }, { priority: 5 });\n    writer.setCustomProperty('link', true, linkElement);\n    return linkElement;\n}\n/**\n * Returns a safe URL based on a given value.\n *\n * An URL is considered safe if it is safe for the user (does not contain any malicious code).\n *\n * If URL is considered unsafe, a simple `\"#\"` is returned.\n *\n * @protected\n * @param {*} url\n * @returns {String} Safe URL.\n */\nexport function ensureSafeUrl(url) {\n    url = String(url);\n    return isSafeUrl(url) ? url : '#';\n}\n// Checks whether the given URL is safe for the user (does not contain any malicious code).\n//\n// @param {String} url URL to check.\nfunction isSafeUrl(url) {\n    const normalizedUrl = url.replace(ATTRIBUTE_WHITESPACES, '');\n    return normalizedUrl.match(SAFE_URL);\n}\n/**\n * Returns {@link module:link/link~LinkConfig#decorators `config.link.decorators`} configuration processed\n * to respect the locale of the editor, i.e. to display {@link module:link/link~LinkDecoratorManualDefinition label}\n * in the correct language.\n *\n * **Note**: Only the few most commonly used labels are translated automatically. Other labels should be manually\n * translated in the {@link module:link/link~LinkConfig#decorators `config.link.decorators`} configuration.\n *\n * @param {module:utils/locale~Locale#t} t shorthand for {@link module:utils/locale~Locale#t Locale#t}\n * @param {Array.<module:link/link~LinkDecoratorDefinition>} decorators reference\n * where labels' values should be localized.\n * @returns {Array.<module:link/link~LinkDecoratorDefinition>}\n */\nexport function getLocalizedDecorators(t, decorators) {\n    const localizedDecoratorsLabels = {\n        'Open in a new tab': t('Open in a new tab'),\n        'Downloadable': t('Downloadable')\n    };\n    decorators.forEach(decorator => {\n        if (decorator.label && localizedDecoratorsLabels[decorator.label]) {\n            decorator.label = localizedDecoratorsLabels[decorator.label];\n        }\n        return decorator;\n    });\n    return decorators;\n}\n/**\n * Converts an object with defined decorators to a normalized array of decorators. There is also added `id` key for each decorator,\n * which is used as attribute's name in the model.\n *\n * @param {Object.<String, module:link/link~LinkDecoratorDefinition>} decorators\n * @returns {Array.<module:link/link~LinkDecoratorDefinition>}\n */\nexport function normalizeDecorators(decorators) {\n    const retArray = [];\n    if (decorators) {\n        for (const [key, value] of Object.entries(decorators)) {\n            const decorator = Object.assign({}, value, { id: `link${ upperFirst(key) }` });\n            retArray.push(decorator);\n        }\n    }\n    return retArray;\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module link/utils\n */\n\n/**\n * Helper class which tight together all {@link module:link/link~LinkDecoratorAutomaticDefinition} and provides\n * a {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToElement downcast dispatcher} for them.\n */\nexport default class AutomaticDecorators {\n\tconstructor() {\n\t\t/**\n\t\t * Stores definition of {@link module:link/link~LinkDecoratorAutomaticDefinition automatic decorators}.\n\t\t * Those data are used as source for a downcast dispatcher to make proper conversion to output data.\n\t\t *\n\t\t * @private\n\t\t * @type {Set}\n\t\t */\n\t\tthis._definitions = new Set();\n\t}\n\n\t/**\n\t * Gives information how many decorators is stored in {@link module:link/utils~AutomaticDecorators} instance.\n\t *\n\t * @readonly\n\t * @protected\n\t * @type {Number}\n\t */\n\tget length() {\n\t\treturn this._definitions.size;\n\t}\n\n\t/**\n\t * Add automatic decorator objects or array with them to be used during downcasting.\n\t *\n\t * @param {module:link/link~LinkDecoratorAutomaticDefinition|Array.<module:link/link~LinkDecoratorAutomaticDefinition>} item\n\t * configuration object of automatic rules for decorating links. It might be also array of such objects.\n\t */\n\tadd( item ) {\n\t\tif ( Array.isArray( item ) ) {\n\t\t\titem.forEach( item => this._definitions.add( item ) );\n\t\t} else {\n\t\t\tthis._definitions.add( item );\n\t\t}\n\t}\n\n\t/**\n\t * Provides the conversion helper used in an {@link module:engine/conversion/downcasthelpers~DowncastHelpers#add} method.\n\t *\n\t * @returns {Function} dispatcher function used as conversion helper\n\t * in {@link module:engine/conversion/downcasthelpers~DowncastHelpers#add}\n\t */\n\tgetDispatcher() {\n\t\treturn dispatcher => {\n\t\t\tdispatcher.on( 'attribute:linkHref', ( evt, data, conversionApi ) => {\n\t\t\t\t// There is only test as this behavior decorates links and\n\t\t\t\t// it is run before dispatcher which actually consumes this node.\n\t\t\t\t// This allows on writing own dispatcher with highest priority,\n\t\t\t\t// which blocks both native converter and this additional decoration.\n\t\t\t\tif ( !conversionApi.consumable.test( data.item, 'attribute:linkHref' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst viewWriter = conversionApi.writer;\n\t\t\t\tconst viewSelection = viewWriter.document.selection;\n\n\t\t\t\tfor ( const item of this._definitions ) {\n\t\t\t\t\tconst viewElement = viewWriter.createAttributeElement( 'a', item.attributes, {\n\t\t\t\t\t\tpriority: 5\n\t\t\t\t\t} );\n\t\t\t\t\tviewWriter.setCustomProperty( 'link', true, viewElement );\n\t\t\t\t\tif ( item.callback( data.attributeNewValue ) ) {\n\t\t\t\t\t\tif ( data.item.is( 'selection' ) ) {\n\t\t\t\t\t\t\tviewWriter.wrap( viewSelection.getFirstRange(), viewElement );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tviewWriter.wrap( conversionApi.mapper.toViewRange( data.range ), viewElement );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tviewWriter.unwrap( conversionApi.mapper.toViewRange( data.range ), viewElement );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, { priority: 'high' } );\n\t\t};\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module link/utils\n */\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Helper class which stores manual decorators with observable {@link module:link/utils~ManualDecorator#value}\n * to support integration with the UI state. An instance of this class is a model with state of single manual decorators.\n * These decorators are kept as collections in {@link module:link/linkcommand~LinkCommand#manualDecorators}.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class ManualDecorator {\n\t/**\n\t * Creates new instance of {@link module:link/utils~ManualDecorator}.\n\t *\n\t * @param {Object} config\n\t * @param {String} config.id name of attribute used in model, which represents given manual decorator.\n\t * For example `'linkIsExternal'`.\n\t * @param {String} config.label The label used in user interface to toggle manual decorator.\n\t * @param {Object} config.attributes Set of attributes added to output data, when decorator is active for specific link.\n\t * Attributes should keep format of attributes defined in {@link module:engine/view/elementdefinition~ElementDefinition}.\n\t */\n\tconstructor( { id, label, attributes } ) {\n\t\t/**\n\t\t * Id of manual decorator, which is a name of attribute in model, for example 'linkManualDecorator0'.\n\t\t *\n\t\t * @type {String}\n\t\t */\n\t\tthis.id = id;\n\n\t\t/**\n\t\t * Value of current manual decorator. It reflects its state from UI.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} module:link/utils~ManualDecorator#value\n\t\t */\n\t\tthis.set( 'value' );\n\n\t\t/**\n\t\t * The label used in user interface to toggle manual decorator.\n\t\t *\n\t\t * @type {String}\n\t\t */\n\t\tthis.label = label;\n\n\t\t/**\n\t\t * Set of attributes added to downcasted data, when decorator is activated for specific link.\n\t\t * Attributes should be added in a form of attributes defined in {@link module:engine/view/elementdefinition~ElementDefinition}.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tthis.attributes = attributes;\n\t}\n}\n\nmix( ManualDecorator, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/utils/bindtwostepcarettoattribute\n */\n\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport priorities from '@ckeditor/ckeditor5-utils/src/priorities';\n\n/**\n * This helper enabled the two-step caret (phantom) movement behavior for the given {@link module:engine/model/model~Model}\n * attribute on arrow right (<kbd>→</kbd>) and left (<kbd>←</kbd>) key press.\n *\n * Thanks to this (phantom) caret movement the user is able to type before/after as well as at the\n * beginning/end of an attribute.\n *\n * # Forward movement\n *\n * ## \"Entering\" an attribute:\n *\n * When this behavior is enabled for the `a` attribute and the selection is right before it\n * (at the attribute boundary), pressing the right arrow key will not move the selection but update its\n * attributes accordingly:\n *\n * * When enabled:\n *\n *   \t\tfoo{}<$text a=\"true\">bar</$text>\n *\n *    <kbd>→</kbd>\n *\n *   \t\tfoo<$text a=\"true\">{}bar</$text>\n *\n * * When disabled:\n *\n *   \t\tfoo{}<$text a=\"true\">bar</$text>\n *\n *   <kbd>→</kbd>\n *\n *   \t\tfoo<$text a=\"true\">b{}ar</$text>\n *\n *\n * ## \"Leaving\" an attribute:\n *\n * * When enabled:\n *\n *   \t\t<$text a=\"true\">bar{}</$text>baz\n *\n *    <kbd>→</kbd>\n *\n *   \t\t<$text a=\"true\">bar</$text>{}baz\n *\n * * When disabled:\n *\n *   \t\t<$text a=\"true\">bar{}</$text>baz\n *\n *   <kbd>→</kbd>\n *\n *   \t\t<$text a=\"true\">bar</$text>b{}az\n *\n * # Backward movement\n *\n * * When enabled:\n *\n *   \t\t<$text a=\"true\">bar</$text>{}baz\n *\n *    <kbd>←</kbd>\n *\n *   \t\t<$text a=\"true\">bar{}</$text>baz\n *\n * * When disabled:\n *\n *   \t\t<$text a=\"true\">bar</$text>{}baz\n *\n *   <kbd>←</kbd>\n *\n *   \t\t<$text a=\"true\">ba{}r</$text>b{}az\n *\n * @param {module:engine/view/view~View} view View controller instance.\n * @param {module:engine/model/model~Model} model Data model instance.\n * @param {module:utils/dom/emittermixin~Emitter} emitter The emitter to which this behavior should be added\n * (e.g. a plugin instance).\n * @param {String} attribute Attribute for which this behavior will be added.\n */\nexport default function bindTwoStepCaretToAttribute( view, model, emitter, attribute ) {\n\tconst twoStepCaretHandler = new TwoStepCaretHandler( model, emitter, attribute );\n\tconst modelSelection = model.document.selection;\n\n\t// Listen to keyboard events and handle the caret movement according to the 2-step caret logic.\n\t//\n\t// Note: This listener has the \"high+1\" priority:\n\t// * \"high\" because of the filler logic implemented in the renderer which also engages on #keydown.\n\t// When the gravity is overridden the attributes of the (model) selection attributes are reset.\n\t// It may end up with the filler kicking in and breaking the selection.\n\t// * \"+1\" because we would like to avoid collisions with other features (like Widgets), which\n\t// take over the keydown events with the \"high\" priority. Two-step caret movement takes precedence\n\t// over Widgets in that matter.\n\t//\n\t// Find out more in https://github.com/ckeditor/ckeditor5-engine/issues/1301.\n\temitter.listenTo( view.document, 'keydown', ( evt, data ) => {\n\t\t// This implementation works only for collapsed selection.\n\t\tif ( !modelSelection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// When user tries to expand the selection or jump over the whole word or to the beginning/end then\n\t\t// two-steps movement is not necessary.\n\t\tif ( data.shiftKey || data.altKey || data.ctrlKey ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst arrowRightPressed = data.keyCode == keyCodes.arrowright;\n\t\tconst arrowLeftPressed = data.keyCode == keyCodes.arrowleft;\n\n\t\t// When neither left or right arrow has been pressed then do noting.\n\t\tif ( !arrowRightPressed && !arrowLeftPressed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = modelSelection.getFirstPosition();\n\t\tlet isMovementHandled;\n\n\t\tif ( arrowRightPressed ) {\n\t\t\tisMovementHandled = twoStepCaretHandler.handleForwardMovement( position, data );\n\t\t} else {\n\t\t\tisMovementHandled = twoStepCaretHandler.handleBackwardMovement( position, data );\n\t\t}\n\n\t\t// Stop the keydown event if the two-step arent movement handled it. Avoid collisions\n\t\t// with other features which may also take over the caret movement (e.g. Widget).\n\t\tif ( isMovementHandled ) {\n\t\t\tevt.stop();\n\t\t}\n\t}, { priority: priorities.get( 'high' ) + 1 } );\n}\n\n/**\n * This is a private helper–class for {@link module:engine/utils/bindtwostepcarettoattribute}.\n * It handles the state of the 2-step caret movement for a single {@link module:engine/model/model~Model}\n * attribute upon the `keypress` in the {@link module:engine/view/view~View}.\n *\n * @private\n */\nclass TwoStepCaretHandler {\n\t/*\n\t * Creates two step handler instance.\n\t *\n\t * @param {module:engine/model/model~Model} model Data model instance.\n\t * @param {module:utils/dom/emittermixin~Emitter} emitter The emitter to which this behavior should be added\n\t * (e.g. a plugin instance).\n\t * @param {String} attribute Attribute for which the behavior will be added.\n\t */\n\tconstructor( model, emitter, attribute ) {\n\t\t/**\n\t\t * The model instance this class instance operates on.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/model~Model#schema}\n\t\t */\n\t\tthis.model = model;\n\n\t\t/**\n\t\t * The Attribute this class instance operates on.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.attribute = attribute;\n\n\t\t/**\n\t\t * A reference to the document selection.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/selection~Selection}\n\t\t */\n\t\tthis._modelSelection = model.document.selection;\n\n\t\t/**\n\t\t * The current UID of the overridden gravity, as returned by\n\t\t * {@link module:engine/model/writer~Writer#overrideSelectionGravity}.\n\t\t *\n\t\t * @private\n\t\t * @member {String}\n\t\t */\n\t\tthis._overrideUid = null;\n\n\t\t/**\n\t\t * A flag indicating that the automatic gravity restoration for this attribute\n\t\t * should not happen upon the next\n\t\t * {@link module:engine/model/selection~Selection#event:change:range} event.\n\t\t *\n\t\t * @private\n\t\t * @member {String}\n\t\t */\n\t\tthis._isNextGravityRestorationSkipped = false;\n\n\t\t// The automatic gravity restoration logic.\n\t\temitter.listenTo( this._modelSelection, 'change:range', ( evt, data ) => {\n\t\t\t// Skipping the automatic restoration is needed if the selection should change\n\t\t\t// but the gravity must remain overridden afterwards. See the #handleBackwardMovement\n\t\t\t// to learn more.\n\t\t\tif ( this._isNextGravityRestorationSkipped ) {\n\t\t\t\tthis._isNextGravityRestorationSkipped = false;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Skip automatic restore when the gravity is not overridden — simply, there's nothing to restore\n\t\t\t// at this moment.\n\t\t\tif ( !this._isGravityOverridden ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Skip automatic restore when the change is indirect AND the selection is at the attribute boundary.\n\t\t\t// It means that e.g. if the change was external (collaboration) and the user had their\n\t\t\t// selection around the link, its gravity should remain intact in this change:range event.\n\t\t\tif ( !data.directChange && isAtBoundary( this._modelSelection.getFirstPosition(), attribute ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._restoreGravity();\n\t\t} );\n\t}\n\n\t/**\n\t * Updates the document selection and the view according to the two–step caret movement state\n\t * when moving **forwards**. Executed upon `keypress` in the {@link module:engine/view/view~View}.\n\t *\n\t * @param {module:engine/model/position~Position} position The model position at the moment of the key press.\n\t * @param {module:engine/view/observer/domeventdata~DomEventData} data Data of the key press.\n\t * @returns {Boolean} `true` when the handler prevented caret movement\n\t */\n\thandleForwardMovement( position, data ) {\n\t\tconst attribute = this.attribute;\n\n\t\t// DON'T ENGAGE 2-SCM if gravity is already overridden. It means that we just entered\n\t\t//\n\t\t// \t\t<paragraph>foo<$text attribute>{}bar</$text>baz</paragraph>\n\t\t//\n\t\t// or left the attribute\n\t\t//\n\t\t// \t\t<paragraph>foo<$text attribute>bar</$text>{}baz</paragraph>\n\t\t//\n\t\t// and the gravity will be restored automatically.\n\t\tif ( this._isGravityOverridden ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// DON'T ENGAGE 2-SCM when the selection is at the beginning of the block AND already has the\n\t\t// attribute:\n\t\t// * when the selection was initially set there using the mouse,\n\t\t// * when the editor has just started\n\t\t//\n\t\t//\t\t<paragraph><$text attribute>{}bar</$text>baz</paragraph>\n\t\t//\n\t\tif ( position.isAtStart && this._hasSelectionAttribute ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// ENGAGE 2-SCM when about to leave one attribute value and enter another:\n\t\t//\n\t\t// \t\t<paragraph><$text attribute=\"1\">foo{}</$text><$text attribute=\"2\">bar</$text></paragraph>\n\t\t//\n\t\t// but DON'T when already in between of them (no attribute selection):\n\t\t//\n\t\t// \t\t<paragraph><$text attribute=\"1\">foo</$text>{}<$text attribute=\"2\">bar</$text></paragraph>\n\t\t//\n\t\tif ( isBetweenDifferentValues( position, attribute ) && this._hasSelectionAttribute ) {\n\t\t\tthis._preventCaretMovement( data );\n\t\t\tthis._removeSelectionAttribute();\n\n\t\t\treturn true;\n\t\t}\n\n\t\t// ENGAGE 2-SCM when entering an attribute:\n\t\t//\n\t\t// \t\t<paragraph>foo{}<$text attribute>bar</$text>baz</paragraph>\n\t\t//\n\t\tif ( isAtStartBoundary( position, attribute ) ) {\n\t\t\tthis._preventCaretMovement( data );\n\t\t\tthis._overrideGravity();\n\n\t\t\treturn true;\n\t\t}\n\n\t\t// ENGAGE 2-SCM when leaving an attribute:\n\t\t//\n\t\t//\t\t<paragraph>foo<$text attribute>bar{}</$text>baz</paragraph>\n\t\t//\n\t\tif ( isAtEndBoundary( position, attribute ) && this._hasSelectionAttribute ) {\n\t\t\tthis._preventCaretMovement( data );\n\t\t\tthis._overrideGravity();\n\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t/**\n\t * Updates the document selection and the view according to the two–step caret movement state\n\t * when moving **backwards**. Executed upon `keypress` in the {@link module:engine/view/view~View}.\n\t *\n\t * @param {module:engine/model/position~Position} position The model position at the moment of the key press.\n\t * @param {module:engine/view/observer/domeventdata~DomEventData} data Data of the key press.\n\t * @returns {Boolean} `true` when the handler prevented caret movement\n\t */\n\thandleBackwardMovement( position, data ) {\n\t\tconst attribute = this.attribute;\n\n\t\t// When the gravity is already overridden...\n\t\tif ( this._isGravityOverridden ) {\n\t\t\t// ENGAGE 2-SCM & REMOVE SELECTION ATTRIBUTE\n\t\t\t// when about to leave one attribute value and enter another:\n\t\t\t//\n\t\t\t// \t\t<paragraph><$text attribute=\"1\">foo</$text><$text attribute=\"2\">{}bar</$text></paragraph>\n\t\t\t//\n\t\t\t// but DON'T when already in between of them (no attribute selection):\n\t\t\t//\n\t\t\t// \t\t<paragraph><$text attribute=\"1\">foo</$text>{}<$text attribute=\"2\">bar</$text></paragraph>\n\t\t\t//\n\t\t\tif ( isBetweenDifferentValues( position, attribute ) && this._hasSelectionAttribute ) {\n\t\t\t\tthis._preventCaretMovement( data );\n\t\t\t\tthis._restoreGravity();\n\t\t\t\tthis._removeSelectionAttribute();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// ENGAGE 2-SCM when at any boundary of the attribute:\n\t\t\t//\n\t\t\t// \t\t<paragraph>foo<$text attribute>bar</$text>{}baz</paragraph>\n\t\t\t// \t\t<paragraph>foo<$text attribute>{}bar</$text>baz</paragraph>\n\t\t\t//\n\t\t\telse {\n\t\t\t\tthis._preventCaretMovement( data );\n\t\t\t\tthis._restoreGravity();\n\n\t\t\t\t// REMOVE SELECTION ATRIBUTE at the beginning of the block.\n\t\t\t\t// It's like restoring gravity but towards a non-existent content when\n\t\t\t\t// the gravity is overridden:\n\t\t\t\t//\n\t\t\t\t// \t\t<paragraph><$text attribute>{}bar</$text></paragraph>\n\t\t\t\t//\n\t\t\t\t// becomes:\n\t\t\t\t//\n\t\t\t\t// \t\t<paragraph>{}<$text attribute>bar</$text></paragraph>\n\t\t\t\t//\n\t\t\t\tif ( position.isAtStart ) {\n\t\t\t\t\tthis._removeSelectionAttribute();\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\t// ENGAGE 2-SCM when between two different attribute values but selection has no attribute:\n\t\t\t//\n\t\t\t// \t\t<paragraph><$text attribute=\"1\">foo</$text>{}<$text attribute=\"2\">bar</$text></paragraph>\n\t\t\t//\n\t\t\tif ( isBetweenDifferentValues( position, attribute ) && !this._hasSelectionAttribute ) {\n\t\t\t\tthis._preventCaretMovement( data );\n\t\t\t\tthis._setSelectionAttributeFromTheNodeBefore( position );\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// End of block boundary cases:\n\t\t\t//\n\t\t\t// \t\t<paragraph><$text attribute>bar{}</$text></paragraph>\n\t\t\t// \t\t<paragraph><$text attribute>bar</$text>{}</paragraph>\n\t\t\t//\n\t\t\tif ( position.isAtEnd && isAtEndBoundary( position, attribute ) ) {\n\t\t\t\t// DON'T ENGAGE 2-SCM if the selection has the attribute already.\n\t\t\t\t// This is a common selection if set using the mouse.\n\t\t\t\t//\n\t\t\t\t// \t\t<paragraph><$text attribute>bar{}</$text></paragraph>\n\t\t\t\t//\n\t\t\t\tif ( this._hasSelectionAttribute ) {\n\t\t\t\t\t// DON'T ENGAGE 2-SCM if the attribute at the end of the block which has length == 1.\n\t\t\t\t\t// Make sure the selection will not the attribute after it moves backwards.\n\t\t\t\t\t//\n\t\t\t\t\t// \t\t<paragraph>foo<$text attribute>b{}</$text></paragraph>\n\t\t\t\t\t//\n\t\t\t\t\tif ( isStepAfterTheAttributeBoundary( position, attribute ) ) {\n\t\t\t\t\t\t// Skip the automatic gravity restore upon the next selection#change:range event.\n\t\t\t\t\t\t// If not skipped, it would automatically restore the gravity, which should remain\n\t\t\t\t\t\t// overridden.\n\t\t\t\t\t\tthis._skipNextAutomaticGravityRestoration();\n\t\t\t\t\t\tthis._overrideGravity();\n\n\t\t\t\t\t\t// Don't return \"true\" here because we didn't call _preventCaretMovement.\n\t\t\t\t\t\t// Returning here will destabilize the filler logic, which also listens to\n\t\t\t\t\t\t// keydown (and the event would be stopped).\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// ENGAGE 2-SCM if the selection has no attribute. This may happen when the user\n\t\t\t\t// left the attribute using a FORWARD 2-SCM.\n\t\t\t\t//\n\t\t\t\t// \t\t<paragraph><$text attribute>bar</$text>{}</paragraph>\n\t\t\t\t//\n\t\t\t\telse {\n\t\t\t\t\tthis._preventCaretMovement( data );\n\t\t\t\t\tthis._setSelectionAttributeFromTheNodeBefore( position );\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// REMOVE SELECTION ATRIBUTE when restoring gravity towards a non-existent content at the\n\t\t\t// beginning of the block.\n\t\t\t//\n\t\t\t// \t\t<paragraph>{}<$text attribute>bar</$text></paragraph>\n\t\t\t//\n\t\t\tif ( position.isAtStart ) {\n\t\t\t\tif ( this._hasSelectionAttribute ) {\n\t\t\t\t\tthis._removeSelectionAttribute();\n\t\t\t\t\tthis._preventCaretMovement( data );\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// DON'T ENGAGE 2-SCM when about to enter of leave an attribute.\n\t\t\t// We need to check if the caret is a one position before the attribute boundary:\n\t\t\t//\n\t\t\t// \t\t<paragraph>foo<$text attribute>b{}ar</$text>baz</paragraph>\n\t\t\t// \t\t<paragraph>foo<$text attribute>bar</$text>b{}az</paragraph>\n\t\t\t//\n\t\t\tif ( isStepAfterTheAttributeBoundary( position, attribute ) ) {\n\t\t\t\t// Skip the automatic gravity restore upon the next selection#change:range event.\n\t\t\t\t// If not skipped, it would automatically restore the gravity, which should remain\n\t\t\t\t// overridden.\n\t\t\t\tthis._skipNextAutomaticGravityRestoration();\n\t\t\t\tthis._overrideGravity();\n\n\t\t\t\t// Don't return \"true\" here because we didn't call _preventCaretMovement.\n\t\t\t\t// Returning here will destabilize the filler logic, which also listens to\n\t\t\t\t// keydown (and the event would be stopped).\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * `true` when the gravity is overridden for the {@link #attribute}.\n\t *\n\t * @readonly\n\t * @private\n\t * @type {Boolean}\n\t */\n\tget _isGravityOverridden() {\n\t\treturn !!this._overrideUid;\n\t}\n\n\t/**\n\t * `true` when the {@link module:engine/model/selection~Selection} has the {@link #attribute}.\n\t *\n\t * @readonly\n\t * @private\n\t * @type {Boolean}\n\t */\n\tget _hasSelectionAttribute() {\n\t\treturn this._modelSelection.hasAttribute( this.attribute );\n\t}\n\n\t/**\n\t * Overrides the gravity using the {@link module:engine/model/writer~Writer model writer}\n\t * and stores the information about this fact in the {@link #_overrideUid}.\n\t *\n\t * A shorthand for {@link module:engine/model/writer~Writer#overrideSelectionGravity}.\n\t *\n\t * @private\n\t */\n\t_overrideGravity() {\n\t\tthis._overrideUid = this.model.change( writer => writer.overrideSelectionGravity() );\n\t}\n\n\t/**\n\t * Restores the gravity using the {@link module:engine/model/writer~Writer model writer}.\n\t *\n\t * A shorthand for {@link module:engine/model/writer~Writer#restoreSelectionGravity}.\n\t *\n\t * @private\n\t */\n\t_restoreGravity() {\n\t\tthis.model.change( writer => {\n\t\t\twriter.restoreSelectionGravity( this._overrideUid );\n\t\t\tthis._overrideUid = null;\n\t\t} );\n\t}\n\n\t/**\n\t * Prevents the caret movement in the view by calling `preventDefault` on the event data.\n\t *\n\t * @private\n\t */\n\t_preventCaretMovement( data ) {\n\t\tdata.preventDefault();\n\t}\n\n\t/**\n\t * Removes the {@link #attribute} from the selection using using the\n\t * {@link module:engine/model/writer~Writer model writer}.\n\t *\n\t * @private\n\t */\n\t_removeSelectionAttribute() {\n\t\tthis.model.change( writer => {\n\t\t\twriter.removeSelectionAttribute( this.attribute );\n\t\t} );\n\t}\n\n\t/**\n\t * Applies the {@link #attribute} to the current selection using using the\n\t * value from the node before the current position. Uses\n\t * the {@link module:engine/model/writer~Writer model writer}.\n\t *\n\t * @private\n\t * @param {module:engine/model/position~Position} position\n\t */\n\t_setSelectionAttributeFromTheNodeBefore( position ) {\n\t\tconst attribute = this.attribute;\n\n\t\tthis.model.change( writer => {\n\t\t\twriter.setSelectionAttribute( this.attribute, position.nodeBefore.getAttribute( attribute ) );\n\t\t} );\n\t}\n\n\t/**\n\t * Skips the next automatic selection gravity restoration upon the\n\t * {@link module:engine/model/selection~Selection#event:change:range} event.\n\t *\n\t * See {@link #_isNextGravityRestorationSkipped}.\n\t *\n\t * @private\n\t */\n\t_skipNextAutomaticGravityRestoration() {\n\t\tthis._isNextGravityRestorationSkipped = true;\n\t}\n}\n\n// @param {module:engine/model/position~Position} position\n// @param {String} attribute\n// @returns {Boolean} `true` when position between the nodes sticks to the bound of text with given attribute.\nfunction isAtBoundary( position, attribute ) {\n\treturn isAtStartBoundary( position, attribute ) || isAtEndBoundary( position, attribute );\n}\n\n// @param {module:engine/model/position~Position} position\n// @param {String} attribute\nfunction isAtStartBoundary( position, attribute ) {\n\tconst { nodeBefore, nodeAfter } = position;\n\tconst isAttrBefore = nodeBefore ? nodeBefore.hasAttribute( attribute ) : false;\n\tconst isAttrAfter = nodeAfter ? nodeAfter.hasAttribute( attribute ) : false;\n\n\treturn isAttrAfter && ( !isAttrBefore || nodeBefore.getAttribute( attribute ) !== nodeAfter.getAttribute( attribute ) );\n}\n\n// @param {module:engine/model/position~Position} position\n// @param {String} attribute\nfunction isAtEndBoundary( position, attribute ) {\n\tconst { nodeBefore, nodeAfter } = position;\n\tconst isAttrBefore = nodeBefore ? nodeBefore.hasAttribute( attribute ) : false;\n\tconst isAttrAfter = nodeAfter ? nodeAfter.hasAttribute( attribute ) : false;\n\n\treturn isAttrBefore && ( !isAttrAfter || nodeBefore.getAttribute( attribute ) !== nodeAfter.getAttribute( attribute ) );\n}\n\n// @param {module:engine/model/position~Position} position\n// @param {String} attribute\nfunction isBetweenDifferentValues( position, attribute ) {\n\tconst { nodeBefore, nodeAfter } = position;\n\tconst isAttrBefore = nodeBefore ? nodeBefore.hasAttribute( attribute ) : false;\n\tconst isAttrAfter = nodeAfter ? nodeAfter.hasAttribute( attribute ) : false;\n\n\tif ( !isAttrAfter || !isAttrBefore ) {\n\t\treturn;\n\t}\n\n\treturn nodeAfter.getAttribute( attribute ) !== nodeBefore.getAttribute( attribute );\n}\n\n// @param {module:engine/model/position~Position} position\n// @param {String} attribute\nfunction isStepAfterTheAttributeBoundary( position, attribute ) {\n\treturn isAtBoundary( position.getShiftedBy( -1 ), attribute );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module link/linkediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport LinkCommand from './linkcommand';\nimport UnlinkCommand from './unlinkcommand';\nimport { createLinkElement, ensureSafeUrl, getLocalizedDecorators, normalizeDecorators } from './utils';\nimport AutomaticDecorators from './utils/automaticdecorators';\nimport ManualDecorator from './utils/manualdecorator';\nimport bindTwoStepCaretToAttribute from '@ckeditor/ckeditor5-engine/src/utils/bindtwostepcarettoattribute';\nimport findLinkRange from './findlinkrange';\nimport '../theme/link.css';\n\nconst HIGHLIGHT_CLASS = 'ck-link_selected';\nconst DECORATOR_AUTOMATIC = 'automatic';\nconst DECORATOR_MANUAL = 'manual';\nconst EXTERNAL_LINKS_REGEXP = /^(https?:)?\\/\\//;\n\n/**\n * The link engine feature.\n *\n * It introduces the `linkHref=\"url\"` attribute in the model which renders to the view as a `<a href=\"url\">` element\n * as well as `'link'` and `'unlink'` commands.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class LinkEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\teditor.config.define( 'link', {\n\t\t\taddTargetToExternalLinks: false\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\t// Allow link attribute on all inline nodes.\n\t\teditor.model.schema.extend( '$text', { allowAttributes: 'linkHref' } );\n\n\t\teditor.conversion.for( 'dataDowncast' )\n\t\t\t.attributeToElement( { model: 'linkHref', view: createLinkElement } );\n\n\t\teditor.conversion.for( 'editingDowncast' )\n\t\t\t.attributeToElement( { model: 'linkHref', view: ( href, writer ) => {\n\t\t\t\treturn createLinkElement( ensureSafeUrl( href ), writer );\n\t\t\t} } );\n\n\t\teditor.conversion.for( 'upcast' )\n\t\t\t.elementToAttribute( {\n\t\t\t\tview: {\n\t\t\t\t\tname: 'a',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\thref: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmodel: {\n\t\t\t\t\tkey: 'linkHref',\n\t\t\t\t\tvalue: viewElement => viewElement.getAttribute( 'href' )\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// Create linking commands.\n\t\teditor.commands.add( 'link', new LinkCommand( editor ) );\n\t\teditor.commands.add( 'unlink', new UnlinkCommand( editor ) );\n\n\t\tconst linkDecorators = getLocalizedDecorators( editor.t, normalizeDecorators( editor.config.get( 'link.decorators' ) ) );\n\n\t\tthis._enableAutomaticDecorators( linkDecorators.filter( item => item.mode === DECORATOR_AUTOMATIC ) );\n\t\tthis._enableManualDecorators( linkDecorators.filter( item => item.mode === DECORATOR_MANUAL ) );\n\n\t\t// Enable two-step caret movement for `linkHref` attribute.\n\t\tbindTwoStepCaretToAttribute( editor.editing.view, editor.model, this, 'linkHref' );\n\n\t\t// Setup highlight over selected link.\n\t\tthis._setupLinkHighlight();\n\t}\n\n\t/**\n\t * Processes an array of configured {@link module:link/link~LinkDecoratorAutomaticDefinition automatic decorators}\n\t * and registers a {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher downcast dispatcher}\n\t * for each one of them. Downcast dispatchers are obtained using the\n\t * {@link module:link/utils~AutomaticDecorators#getDispatcher} method.\n\t *\n\t * **Note**: This method also activates the automatic external link decorator if enabled via\n\t * {@link module:link/link~LinkConfig#addTargetToExternalLinks `config.link.addTargetToExternalLinks`}.\n\t *\n\t * @private\n\t * @param {Array.<module:link/link~LinkDecoratorAutomaticDefinition>} automaticDecoratorDefinitions\n\t */\n\t_enableAutomaticDecorators( automaticDecoratorDefinitions ) {\n\t\tconst editor = this.editor;\n\t\tconst automaticDecorators = new AutomaticDecorators();\n\n\t\t// Adds default decorator for external links.\n\t\tif ( editor.config.get( 'link.addTargetToExternalLinks' ) ) {\n\t\t\tautomaticDecorators.add( {\n\t\t\t\tid: 'linkIsExternal',\n\t\t\t\tmode: DECORATOR_AUTOMATIC,\n\t\t\t\tcallback: url => EXTERNAL_LINKS_REGEXP.test( url ),\n\t\t\t\tattributes: {\n\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\trel: 'noopener noreferrer'\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tautomaticDecorators.add( automaticDecoratorDefinitions );\n\n\t\tif ( automaticDecorators.length ) {\n\t\t\teditor.conversion.for( 'downcast' ).add( automaticDecorators.getDispatcher() );\n\t\t}\n\t}\n\n\t/**\n\t * Processes an array of configured {@link module:link/link~LinkDecoratorManualDefinition manual decorators}\n\t * and transforms them into {@link module:link/utils~ManualDecorator} instances and stores them in the\n\t * {@link module:link/linkcommand~LinkCommand#manualDecorators} collection (a model for manual decorators state).\n\t *\n\t * Also registers an {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToElement attributeToElement}\n\t * converter for each manual decorator and extends the {@link module:engine/model/schema~Schema model's schema}\n\t * with adequate model attributes.\n\t *\n\t * @private\n\t * @param {Array.<module:link/link~LinkDecoratorManualDefinition>} manualDecoratorDefinitions\n\t */\n\t_enableManualDecorators( manualDecoratorDefinitions ) {\n\t\tif ( !manualDecoratorDefinitions.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst editor = this.editor;\n\t\tconst command = editor.commands.get( 'link' );\n\t\tconst manualDecorators = command.manualDecorators;\n\n\t\tmanualDecoratorDefinitions.forEach( decorator => {\n\t\t\teditor.model.schema.extend( '$text', { allowAttributes: decorator.id } );\n\n\t\t\t// Keeps reference to manual decorator to decode its name to attributes during downcast.\n\t\t\tmanualDecorators.add( new ManualDecorator( decorator ) );\n\n\t\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t\t\t\tmodel: decorator.id,\n\t\t\t\tview: ( manualDecoratorName, writer ) => {\n\t\t\t\t\tif ( manualDecoratorName ) {\n\t\t\t\t\t\tconst attributes = manualDecorators.get( decorator.id ).attributes;\n\t\t\t\t\t\tconst element = writer.createAttributeElement( 'a', attributes, { priority: 5 } );\n\t\t\t\t\t\twriter.setCustomProperty( 'link', true, element );\n\n\t\t\t\t\t\treturn element;\n\t\t\t\t\t}\n\t\t\t\t} } );\n\n\t\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t\t\t\tview: {\n\t\t\t\t\tname: 'a',\n\t\t\t\t\tattributes: manualDecorators.get( decorator.id ).attributes\n\t\t\t\t},\n\t\t\t\tmodel: {\n\t\t\t\t\tkey: decorator.id\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Adds a visual highlight style to a link in which the selection is anchored.\n\t * Together with two-step caret movement, they indicate that the user is typing inside the link.\n\t *\n\t * Highlight is turned on by adding `.ck-link_selected` class to the link in the view:\n\t *\n\t * * the class is removed before conversion has started, as callbacks added with `'highest'` priority\n\t * to {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} events,\n\t * * the class is added in the view post fixer, after other changes in the model tree were converted to the view.\n\t *\n\t * This way, adding and removing highlight does not interfere with conversion.\n\t *\n\t * @private\n\t */\n\t_setupLinkHighlight() {\n\t\tconst editor = this.editor;\n\t\tconst view = editor.editing.view;\n\t\tconst highlightedLinks = new Set();\n\n\t\t// Adding the class.\n\t\tview.document.registerPostFixer( writer => {\n\t\t\tconst selection = editor.model.document.selection;\n\n\t\t\tif ( selection.hasAttribute( 'linkHref' ) ) {\n\t\t\t\tconst modelRange = findLinkRange( selection.getFirstPosition(), selection.getAttribute( 'linkHref' ), editor.model );\n\t\t\t\tconst viewRange = editor.editing.mapper.toViewRange( modelRange );\n\n\t\t\t\t// There might be multiple `a` elements in the `viewRange`, for example, when the `a` element is\n\t\t\t\t// broken by a UIElement.\n\t\t\t\tfor ( const item of viewRange.getItems() ) {\n\t\t\t\t\tif ( item.is( 'a' ) ) {\n\t\t\t\t\t\twriter.addClass( HIGHLIGHT_CLASS, item );\n\t\t\t\t\t\thighlightedLinks.add( item );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// Removing the class.\n\t\teditor.conversion.for( 'editingDowncast' ).add( dispatcher => {\n\t\t\t// Make sure the highlight is removed on every possible event, before conversion is started.\n\t\t\tdispatcher.on( 'insert', removeHighlight, { priority: 'highest' } );\n\t\t\tdispatcher.on( 'remove', removeHighlight, { priority: 'highest' } );\n\t\t\tdispatcher.on( 'attribute', removeHighlight, { priority: 'highest' } );\n\t\t\tdispatcher.on( 'selection', removeHighlight, { priority: 'highest' } );\n\n\t\t\tfunction removeHighlight() {\n\t\t\t\tview.change( writer => {\n\t\t\t\t\tfor ( const item of highlightedLinks.values() ) {\n\t\t\t\t\t\twriter.removeClass( HIGHLIGHT_CLASS, item );\n\t\t\t\t\t\thighlightedLinks.delete( item );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n}\n","\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/clickobserver\n */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * {@link module:engine/view/document~Document#event:click Click} event observer.\n *\n * Note that this observer is not available by default. To make it available it needs to be added to\n * {@link module:engine/view/view~View view controller}\n * by a {@link module:engine/view/view~View#addObserver} method.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class ClickObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = 'click';\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n}\n\n/**\n * Fired when one of the editables has been clicked.\n *\n * Introduced by {@link module:engine/view/observer/clickobserver~ClickObserver}.\n *\n * Note that this event is not available by default. To make it available\n * {@link module:engine/view/observer/clickobserver~ClickObserver} needs to be added\n * to {@link module:engine/view/view~View} by a {@link module:engine/view/view~View#addObserver} method.\n *\n * @see module:engine/view/observer/clickobserver~ClickObserver\n * @event module:engine/view/document~Document#event:click\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module link/ui/linkformview\n */\nimport View from '@ckeditor/ckeditor5-ui/src/view';\nimport ViewCollection from '@ckeditor/ckeditor5-ui/src/viewcollection';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport SwitchButtonView from '@ckeditor/ckeditor5-ui/src/button/switchbuttonview';\nimport LabeledInputView from '@ckeditor/ckeditor5-ui/src/labeledinput/labeledinputview';\nimport InputTextView from '@ckeditor/ckeditor5-ui/src/inputtext/inputtextview';\nimport submitHandler from '@ckeditor/ckeditor5-ui/src/bindings/submithandler';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '@ckeditor/ckeditor5-ui/src/focuscycler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\nimport checkIcon from '@ckeditor/ckeditor5-core/theme/icons/check.svg';\nimport cancelIcon from '@ckeditor/ckeditor5-core/theme/icons/cancel.svg';\nimport '../../theme/linkform.css';\n/**\n * The link form view controller class.\n *\n * See {@link module:link/ui/linkformview~LinkFormView}.\n *\n * @extends module:ui/view~View\n */\nexport default class LinkFormView extends View {\n    /**\n\t * Creates an instance of the {@link module:link/ui/linkformview~LinkFormView} class.\n\t *\n\t * Also see {@link #render}.\n\t *\n\t * @param {module:utils/locale~Locale} [locale] The localization services instance.\n\t * @param {module:utils/collection~Collection} [manualDecorators] Reference to manual decorators in\n\t * {@link module:link/linkcommand~LinkCommand#manualDecorators}.\n\t */\n    constructor(locale, manualDecorators = []) {\n        super(locale);\n        const t = locale.t;\n        /**\n\t\t * Tracks information about DOM focus in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n        this.focusTracker = new FocusTracker();\n        /**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n        this.keystrokes = new KeystrokeHandler();\n        /**\n\t\t * The URL input view.\n\t\t *\n\t\t * @member {module:ui/labeledinput/labeledinputview~LabeledInputView}\n\t\t */\n        this.urlInputView = this._createUrlInput();\n        /**\n\t\t * The Save button view.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView}\n\t\t */\n        this.saveButtonView = this._createButton(t('Save'), checkIcon, 'ck-button-save');\n        this.saveButtonView.type = 'submit';\n        /**\n\t\t * The Cancel button view.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView}\n\t\t */\n        this.cancelButtonView = this._createButton(t('Cancel'), cancelIcon, 'ck-button-cancel', 'cancel');\n        /**\n\t\t * A collection of {@link module:ui/button/switchbuttonview~SwitchButtonView},\n\t\t * which corresponds to {@link module:link/linkcommand~LinkCommand#manualDecorators manual decorators}\n\t\t * configured in the editor.\n\t\t *\n\t\t * @private\n\t\t * @readonly\n\t\t * @type {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this._manualDecoratorSwitches = this._createManualDecoratorSwitches(manualDecorators);\n        /**\n\t\t * Collection of child views in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this.children = this._createFormChildren(manualDecorators);\n        /**\n\t\t * A collection of views which can be focused in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this._focusables = new ViewCollection();\n        /**\n\t\t * Helps cycling over {@link #_focusables} in the form.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n        this._focusCycler = new FocusCycler({\n            focusables: this._focusables,\n            focusTracker: this.focusTracker,\n            keystrokeHandler: this.keystrokes,\n            actions: {\n                // Navigate form fields backwards using the Shift + Tab keystroke.\n                focusPrevious: 'shift + tab',\n                // Navigate form fields forwards using the Tab key.\n                focusNext: 'tab'\n            }\n        });\n        const classList = [\n            'ck',\n            'ck-link-form'\n        ];\n        if (manualDecorators.length) {\n            classList.push('ck-link-form_layout-vertical');\n        }\n        this.setTemplate({\n            tag: 'form',\n            attributes: {\n                class: classList,\n                // https://github.com/ckeditor/ckeditor5-link/issues/90\n                tabindex: '-1'\n            },\n            children: this.children\n        });\n    }\n    /**\n\t * Obtains the state of the {@link module:ui/button/switchbuttonview~SwitchButtonView switch buttons} representing\n\t * {@link module:link/linkcommand~LinkCommand#manualDecorators manual link decorators}\n\t * in the {@link module:link/ui/linkformview~LinkFormView}.\n\t *\n\t * @returns {Object.<String,Boolean>} key-value pairs, where the key is the name of the decorator and the value is\n\t * its state.\n\t */\n    getDecoratorSwitchesState() {\n        return Array.from(this._manualDecoratorSwitches).reduce((accumulator, switchButton) => {\n            accumulator[switchButton.name] = switchButton.isOn;\n            return accumulator;\n        }, {});\n    }\n    /**\n\t * @inheritDoc\n\t */\n    render() {\n        super.render();\n        submitHandler({ view: this });\n        const childViews = [\n            this.urlInputView,\n            ...this._manualDecoratorSwitches,\n            this.saveButtonView,\n            this.cancelButtonView\n        ];\n        childViews.forEach(v => {\n            // Register the view as focusable.\n            this._focusables.add(v);\n            // Register the view in the focus tracker.\n            this.focusTracker.add(v.element);\n        });\n        // Start listening for the keystrokes coming from #element.\n        this.keystrokes.listenTo(this.element);\n    }\n    /**\n\t * Focuses the fist {@link #_focusables} in the form.\n\t */\n    focus() {\n        this._focusCycler.focusFirst();\n    }\n    /**\n\t * Creates a labeled input view.\n\t *\n\t * @private\n\t * @returns {module:ui/labeledinput/labeledinputview~LabeledInputView} Labeled input view instance.\n\t */\n    _createUrlInput() {\n        const t = this.locale.t;\n        const labeledInput = new LabeledInputView(this.locale, InputTextView);\n        labeledInput.label = t('Link URL');\n        labeledInput.inputView.placeholder = 'https://example.com';\n        return labeledInput;\n    }\n    /**\n\t * Creates a button view.\n\t *\n\t * @private\n\t * @param {String} label The button label.\n\t * @param {String} icon The button's icon.\n\t * @param {String} className The additional button CSS class name.\n\t * @param {String} [eventName] An event name that the `ButtonView#execute` event will be delegated to.\n\t * @returns {module:ui/button/buttonview~ButtonView} The button view instance.\n\t */\n    _createButton(label, icon, className, eventName) {\n        const button = new ButtonView(this.locale);\n        button.set({\n            label,\n            icon,\n            tooltip: true\n        });\n        button.extendTemplate({ attributes: { class: className } });\n        if (eventName) {\n            button.delegate('execute').to(this, eventName);\n        }\n        return button;\n    }\n    /**\n\t * Populates {@link module:ui/viewcollection~ViewCollection} of {@link module:ui/button/switchbuttonview~SwitchButtonView}\n\t * made based on {@link module:link/linkcommand~LinkCommand#manualDecorators}\n\t *\n\t * @private\n\t * @param {module:link/linkcommand~LinkCommand#manualDecorators} manualDecorators reference to\n\t * collection of manual decorators stored in link's command.\n\t * @returns {module:ui/viewcollection~ViewCollection} of Switch Buttons.\n\t */\n    _createManualDecoratorSwitches(manualDecorators) {\n        const switches = this.createCollection();\n        for (const manualDecorator of manualDecorators) {\n            const switchButton = new SwitchButtonView(this.locale);\n            switchButton.set({\n                name: manualDecorator.id,\n                label: manualDecorator.label,\n                withText: true\n            });\n            switchButton.bind('isOn').to(manualDecorator, 'value');\n            switchButton.on('execute', () => {\n                manualDecorator.set('value', !switchButton.isOn);\n            });\n            switches.add(switchButton);\n        }\n        return switches;\n    }\n    /**\n\t * Populates the {@link #children} collection of the form.\n\t *\n\t * If {@link module:link/linkcommand~LinkCommand#manualDecorators manual decorators} are configured in the editor, creates an\n\t * additional `View` wrapping all {@link #_manualDecoratorSwitches} switch buttons corresponding\n\t * to those decorators.\n\t *\n\t * @private\n\t * @param {module:link/linkcommand~LinkCommand#manualDecorators} manualDecorators reference to\n\t * collection of manual decorators stored in link's command.\n\t * @returns {module:ui/viewcollection~ViewCollection} children of LinkFormView.\n\t */\n    _createFormChildren(manualDecorators) {\n        const children = this.createCollection();\n        children.add(this.urlInputView);\n        if (manualDecorators.length) {\n            const additionalButtonsView = new View();\n            additionalButtonsView.setTemplate({\n                tag: 'ul',\n                children: this._manualDecoratorSwitches.map(switchButton => ({\n                    tag: 'li',\n                    children: [switchButton],\n                    attributes: {\n                        class: [\n                            'ck',\n                            'ck-list__item'\n                        ]\n                    }\n                })),\n                attributes: {\n                    class: [\n                        'ck',\n                        'ck-reset',\n                        'ck-list'\n                    ]\n                }\n            });\n            children.add(additionalButtonsView);\n        }\n        children.add(this.saveButtonView);\n        children.add(this.cancelButtonView);\n        return children;\n    }\n}    /**\n * Fired when the form view is submitted (when one of the children triggered the submit event),\n * e.g. click on {@link #saveButtonView}.\n *\n * @event submit\n */\n     /**\n * Fired when the form view is canceled, e.g. click on {@link #cancelButtonView}.\n *\n * @event cancel\n */","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module link/ui/linkactionsview\n */\nimport View from '@ckeditor/ckeditor5-ui/src/view';\nimport ViewCollection from '@ckeditor/ckeditor5-ui/src/viewcollection';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '@ckeditor/ckeditor5-ui/src/focuscycler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\nimport { ensureSafeUrl } from '../utils';\nimport unlinkIcon from '../../theme/icons/unlink.svg';\nimport pencilIcon from '@ckeditor/ckeditor5-core/theme/icons/pencil.svg';\nimport '../../theme/linkactions.css';\n/**\n * The link actions view class. This view displays link preview, allows\n * unlinking or editing the link.\n *\n * @extends module:ui/view~View\n */\nexport default class LinkActionsView extends View {\n    /**\n\t * @inheritDoc\n\t */\n    constructor(locale) {\n        super(locale);\n        const t = locale.t;\n        /**\n\t\t * Tracks information about DOM focus in the actions.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n        this.focusTracker = new FocusTracker();\n        /**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n        this.keystrokes = new KeystrokeHandler();\n        /**\n\t\t * The href preview view.\n\t\t *\n\t\t * @member {module:ui/view~View}\n\t\t */\n        this.previewButtonView = this._createPreviewButton();\n        /**\n\t\t * The unlink button view.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView}\n\t\t */\n        this.unlinkButtonView = this._createButton(t('Unlink'), unlinkIcon, 'unlink');\n        /**\n\t\t * The edit link button view.\n\t\t *\n\t\t * @member {module:ui/button/buttonview~ButtonView}\n\t\t */\n        this.editButtonView = this._createButton(t('Edit link'), pencilIcon, 'edit');\n        /**\n\t\t * Value of the \"href\" attribute of the link to use in the {@link #previewButtonView}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String}\n\t\t */\n        this.set('href');\n        /**\n\t\t * A collection of views which can be focused in the view.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this._focusables = new ViewCollection();\n        /**\n\t\t * Helps cycling over {@link #_focusables} in the view.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n        this._focusCycler = new FocusCycler({\n            focusables: this._focusables,\n            focusTracker: this.focusTracker,\n            keystrokeHandler: this.keystrokes,\n            actions: {\n                // Navigate fields backwards using the Shift + Tab keystroke.\n                focusPrevious: 'shift + tab',\n                // Navigate fields forwards using the Tab key.\n                focusNext: 'tab'\n            }\n        });\n        this.setTemplate({\n            tag: 'div',\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-link-actions'\n                ],\n                // https://github.com/ckeditor/ckeditor5-link/issues/90\n                tabindex: '-1'\n            },\n            children: [\n                this.previewButtonView,\n                this.editButtonView,\n                this.unlinkButtonView\n            ]\n        });\n    }\n    /**\n\t * @inheritDoc\n\t */\n    render() {\n        super.render();\n        const childViews = [\n            this.previewButtonView,\n            this.editButtonView,\n            this.unlinkButtonView\n        ];\n        childViews.forEach(v => {\n            // Register the view as focusable.\n            this._focusables.add(v);\n            // Register the view in the focus tracker.\n            this.focusTracker.add(v.element);\n        });\n        // Start listening for the keystrokes coming from #element.\n        this.keystrokes.listenTo(this.element);\n    }\n    /**\n\t * Focuses the fist {@link #_focusables} in the actions.\n\t */\n    focus() {\n        this._focusCycler.focusFirst();\n    }\n    /**\n\t * Creates a button view.\n\t *\n\t * @private\n\t * @param {String} label The button label.\n\t * @param {String} icon The button's icon.\n\t * @param {String} [eventName] An event name that the `ButtonView#execute` event will be delegated to.\n\t * @returns {module:ui/button/buttonview~ButtonView} The button view instance.\n\t */\n    _createButton(label, icon, eventName) {\n        const button = new ButtonView(this.locale);\n        button.set({\n            label,\n            icon,\n            tooltip: true\n        });\n        button.delegate('execute').to(this, eventName);\n        return button;\n    }\n    /**\n\t * Creates a link href preview button.\n\t *\n\t * @private\n\t * @returns {module:ui/button/buttonview~ButtonView} The button view instance.\n\t */\n    _createPreviewButton() {\n        const button = new ButtonView(this.locale);\n        const bind = this.bindTemplate;\n        const t = this.t;\n        button.set({\n            withText: true,\n            tooltip: t('Open link in new tab')\n        });\n        button.extendTemplate({\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-link-actions__preview'\n                ],\n                href: bind.to('href', href => href && ensureSafeUrl(href)),\n                target: '_blank'\n            }\n        });\n        button.bind('label').to(this, 'href', href => {\n            return href || t('This link has no URL');\n        });\n        button.bind('isEnabled').to(this, 'href', href => !!href);\n        button.template.tag = 'a';\n        button.template.eventListeners = {};\n        return button;\n    }\n}    /**\n * Fired when the {@link #editButtonView} is clicked.\n *\n * @event edit\n */\n     /**\n * Fired when the {@link #unlinkButtonView} is clicked.\n *\n * @event unlink\n */","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module link/linkui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ClickObserver from '@ckeditor/ckeditor5-engine/src/view/observer/clickobserver';\nimport { isLinkElement } from './utils';\nimport ContextualBalloon from '@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon';\nimport clickOutsideHandler from '@ckeditor/ckeditor5-ui/src/bindings/clickoutsidehandler';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport LinkFormView from './ui/linkformview';\nimport LinkActionsView from './ui/linkactionsview';\nimport linkIcon from '../theme/icons/link.svg';\nconst linkKeystroke = 'Ctrl+K';\n/**\n * The link UI plugin. It introduces the `'link'` and `'unlink'` buttons and support for the <kbd>Ctrl+K</kbd> keystroke.\n *\n * It uses the\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon plugin}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class LinkUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get requires() {\n        return [ContextualBalloon];\n    }\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'LinkUI';\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        editor.editing.view.addObserver(ClickObserver);\n        /**\n\t\t * The actions view displayed inside of the balloon.\n\t\t *\n\t\t * @member {module:link/ui/linkactionsview~LinkActionsView}\n\t\t */\n        this.actionsView = this._createActionsView();\n        /**\n\t\t * The form view displayed inside the balloon.\n\t\t *\n\t\t * @member {module:link/ui/linkformview~LinkFormView}\n\t\t */\n        this.formView = this._createFormView();\n        /**\n\t\t * The contextual balloon plugin instance.\n\t\t *\n\t\t * @private\n\t\t * @member {module:ui/panel/balloon/contextualballoon~ContextualBalloon}\n\t\t */\n        this._balloon = editor.plugins.get(ContextualBalloon);\n        // Create toolbar buttons.\n        this._createToolbarLinkButton();\n        // Attach lifecycle actions to the the balloon.\n        this._enableUserBalloonInteractions();\n    }\n    /**\n\t * @inheritDoc\n\t */\n    destroy() {\n        super.destroy();\n        // Destroy created UI components as they are not automatically destroyed (see ckeditor5#1341).\n        this.formView.destroy();\n    }\n    /**\n\t * Creates the {@link module:link/ui/linkactionsview~LinkActionsView} instance.\n\t *\n\t * @private\n\t * @returns {module:link/ui/linkactionsview~LinkActionsView} The link actions view instance.\n\t */\n    _createActionsView() {\n        const editor = this.editor;\n        const actionsView = new LinkActionsView(editor.locale);\n        const linkCommand = editor.commands.get('link');\n        const unlinkCommand = editor.commands.get('unlink');\n        actionsView.bind('href').to(linkCommand, 'value');\n        actionsView.editButtonView.bind('isEnabled').to(linkCommand);\n        actionsView.unlinkButtonView.bind('isEnabled').to(unlinkCommand);\n        // Execute unlink command after clicking on the \"Edit\" button.\n        this.listenTo(actionsView, 'edit', () => {\n            this._addFormView();\n        });\n        // Execute unlink command after clicking on the \"Unlink\" button.\n        this.listenTo(actionsView, 'unlink', () => {\n            editor.execute('unlink');\n            this._hideUI();\n        });\n        // Close the panel on esc key press when the **actions have focus**.\n        actionsView.keystrokes.set('Esc', (data, cancel) => {\n            this._hideUI();\n            cancel();\n        });\n        // Open the form view on Ctrl+K when the **actions have focus**..\n        actionsView.keystrokes.set(linkKeystroke, (data, cancel) => {\n            this._addFormView();\n            cancel();\n        });\n        return actionsView;\n    }\n    /**\n\t * Creates the {@link module:link/ui/linkformview~LinkFormView} instance.\n\t *\n\t * @private\n\t * @returns {module:link/ui/linkformview~LinkFormView} The link form instance.\n\t */\n    _createFormView() {\n        const editor = this.editor;\n        const linkCommand = editor.commands.get('link');\n        const formView = new LinkFormView(editor.locale, linkCommand.manualDecorators);\n        formView.urlInputView.bind('value').to(linkCommand, 'value');\n        // Form elements should be read-only when corresponding commands are disabled.\n        formView.urlInputView.bind('isReadOnly').to(linkCommand, 'isEnabled', value => !value);\n        formView.saveButtonView.bind('isEnabled').to(linkCommand);\n        // Execute link command after clicking the \"Save\" button.\n        this.listenTo(formView, 'submit', () => {\n            editor.execute('link', formView.urlInputView.inputView.element.value, formView.getDecoratorSwitchesState());\n            this._closeFormView();\n        });\n        // Hide the panel after clicking the \"Cancel\" button.\n        this.listenTo(formView, 'cancel', () => {\n            this._closeFormView();\n        });\n        // Close the panel on esc key press when the **form has focus**.\n        formView.keystrokes.set('Esc', (data, cancel) => {\n            this._closeFormView();\n            cancel();\n        });\n        return formView;\n    }\n    /**\n\t * Creates a toolbar Link button. Clicking this button will show\n\t * a {@link #_balloon} attached to the selection.\n\t *\n\t * @private\n\t */\n    _createToolbarLinkButton() {\n        const editor = this.editor;\n        const linkCommand = editor.commands.get('link');\n        const t = editor.t;\n        // Handle the `Ctrl+K` keystroke and show the panel.\n        editor.keystrokes.set(linkKeystroke, (keyEvtData, cancel) => {\n            // Prevent focusing the search bar in FF and opening new tab in Edge. #153, #154.\n            cancel();\n            if (linkCommand.isEnabled) {\n                this._showUI(true);\n            }\n        });\n        editor.ui.componentFactory.add('link', locale => {\n            const button = new ButtonView(locale);\n            button.isEnabled = true;\n            button.label = t('Link');\n            button.icon = linkIcon;\n            button.keystroke = linkKeystroke;\n            button.tooltip = true;\n            // Bind button to the command.\n            button.bind('isOn', 'isEnabled').to(linkCommand, 'value', 'isEnabled');\n            // Show the panel on button click.\n            this.listenTo(button, 'execute', () => this._showUI(true));\n            return button;\n        });\n    }\n    /**\n\t * Attaches actions that control whether the balloon panel containing the\n\t * {@link #formView} is visible or not.\n\t *\n\t * @private\n\t */\n    _enableUserBalloonInteractions() {\n        const viewDocument = this.editor.editing.view.document;\n        // Handle click on view document and show panel when selection is placed inside the link element.\n        // Keep panel open until selection will be inside the same link element.\n        this.listenTo(viewDocument, 'click', () => {\n            const parentLink = this._getSelectedLinkElement();\n            if (parentLink) {\n                // Then show panel but keep focus inside editor editable.\n                this._showUI();\n            }\n        });\n        // Focus the form if the balloon is visible and the Tab key has been pressed.\n        this.editor.keystrokes.set('Tab', (data, cancel) => {\n            if (this._areActionsVisible && !this.actionsView.focusTracker.isFocused) {\n                this.actionsView.focus();\n                cancel();\n            }\n        }, {\n            // Use the high priority because the link UI navigation is more important\n            // than other feature's actions, e.g. list indentation.\n            // https://github.com/ckeditor/ckeditor5-link/issues/146\n            priority: 'high'\n        });\n        // Close the panel on the Esc key press when the editable has focus and the balloon is visible.\n        this.editor.keystrokes.set('Esc', (data, cancel) => {\n            if (this._isUIVisible) {\n                this._hideUI();\n                cancel();\n            }\n        });\n        // Close on click outside of balloon panel element.\n        clickOutsideHandler({\n            emitter: this.formView,\n            activator: () => this._isUIInPanel,\n            contextElements: [this._balloon.view.element],\n            callback: () => this._hideUI()\n        });\n    }\n    /**\n\t * Adds the {@link #actionsView} to the {@link #_balloon}.\n\t *\n\t * @protected\n\t */\n    _addActionsView() {\n        if (this._areActionsInPanel) {\n            return;\n        }\n        this._balloon.add({\n            view: this.actionsView,\n            position: this._getBalloonPositionData()\n        });\n    }\n    /**\n\t * Adds the {@link #formView} to the {@link #_balloon}.\n\t *\n\t * @protected\n\t */\n    _addFormView() {\n        if (this._isFormInPanel) {\n            return;\n        }\n        const editor = this.editor;\n        const linkCommand = editor.commands.get('link');\n        this._balloon.add({\n            view: this.formView,\n            position: this._getBalloonPositionData()\n        });\n        // Select input when form view is currently visible.\n        if (this._balloon.visibleView === this.formView) {\n            this.formView.urlInputView.select();\n        }\n        // Make sure that each time the panel shows up, the URL field remains in sync with the value of\n        // the command. If the user typed in the input, then canceled the balloon (`urlInputView#value` stays\n        // unaltered) and re-opened it without changing the value of the link command (e.g. because they\n        // clicked the same link), they would see the old value instead of the actual value of the command.\n        // https://github.com/ckeditor/ckeditor5-link/issues/78\n        // https://github.com/ckeditor/ckeditor5-link/issues/123\n        this.formView.urlInputView.inputView.element.value = linkCommand.value || '';\n    }\n    /**\n\t * Closes form view. Decides whether the balloon should be hidden completely or if action view should be shown. This is decided upon\n\t * link command value (which has value if the document selection is in link).\n\t *\n\t * If there are defined {@link module:link/link~LinkConfig#decorators} in editor's config, then there are additionally\n\t * rest switch buttons state responsible for manual decorators handling.\n\t *\n\t * @private\n\t */\n    _closeFormView() {\n        const linkCommand = this.editor.commands.get('link');\n        // Reset manual decorator states to represent current model state. This case is important to reset switch buttons,\n        // when user cancel editing form.\n        linkCommand.restoreManualDecoratorStates();\n        if (linkCommand.value !== undefined) {\n            this._removeFormView();\n        } else {\n            this._hideUI();\n        }\n    }\n    /**\n\t * Removes the {@link #formView} from the {@link #_balloon}.\n\t *\n\t * @protected\n\t */\n    _removeFormView() {\n        if (this._isFormInPanel) {\n            // Blur the input element before removing it from DOM to prevent issues in some browsers.\n            // See https://github.com/ckeditor/ckeditor5/issues/1501.\n            this.formView.saveButtonView.focus();\n            this._balloon.remove(this.formView);\n            // Because the form has an input which has focus, the focus must be brought back\n            // to the editor. Otherwise, it would be lost.\n            this.editor.editing.view.focus();\n        }\n    }\n    /**\n\t * Shows the right kind of the UI for current state of the command. It's either\n\t * {@link #formView} or {@link #actionsView}.\n\t *\n\t * @param {Boolean} forceVisible\n\t * @private\n\t */\n    _showUI(forceVisible = false) {\n        const editor = this.editor;\n        const linkCommand = editor.commands.get('link');\n        if (!linkCommand.isEnabled) {\n            return;\n        }\n        // When there's no link under the selection, go straight to the editing UI.\n        if (!this._getSelectedLinkElement()) {\n            this._addActionsView();\n            // Be sure panel with link is visible.\n            if (forceVisible) {\n                this._balloon.showStack('main');\n            }\n            this._addFormView();\n        }    // If there's a link under the selection...\n        else {\n            // Go to the editing UI if actions are already visible.\n            if (this._areActionsVisible) {\n                this._addFormView();\n            }    // Otherwise display just the actions UI.\n            else {\n                this._addActionsView();\n            }\n            // Be sure panel with link is visible.\n            if (forceVisible) {\n                this._balloon.showStack('main');\n            }\n        }\n        // Begin responding to ui#update once the UI is added.\n        this._startUpdatingUI();\n    }\n    /**\n\t * Removes the {@link #formView} from the {@link #_balloon}.\n\t *\n\t * See {@link #_addFormView}, {@link #_addActionsView}.\n\t *\n\t * @protected\n\t */\n    _hideUI() {\n        if (!this._isUIInPanel) {\n            return;\n        }\n        const editor = this.editor;\n        this.stopListening(editor.ui, 'update');\n        // Make sure the focus always gets back to the editable _before_ removing the focused form view.\n        // Doing otherwise causes issues in some browsers. See https://github.com/ckeditor/ckeditor5-link/issues/193.\n        editor.editing.view.focus();\n        // Remove form first because it's on top of the stack.\n        this._removeFormView();\n        // Then remove the actions view because it's beneath the form.\n        this._balloon.remove(this.actionsView);\n    }\n    /**\n\t * Makes the UI react to the {@link module:core/editor/editorui~EditorUI#event:update} event to\n\t * reposition itself when the editor ui should be refreshed.\n\t *\n\t * See: {@link #_hideUI} to learn when the UI stops reacting to the `update` event.\n\t *\n\t * @protected\n\t */\n    _startUpdatingUI() {\n        const editor = this.editor;\n        const viewDocument = editor.editing.view.document;\n        let prevSelectedLink = this._getSelectedLinkElement();\n        let prevSelectionParent = getSelectionParent();\n        this.listenTo(editor.ui, 'update', () => {\n            const selectedLink = this._getSelectedLinkElement();\n            const selectionParent = getSelectionParent();\n            // Hide the panel if:\n            //\n            // * the selection went out of the EXISTING link element. E.g. user moved the caret out\n            //   of the link,\n            // * the selection went to a different parent when creating a NEW link. E.g. someone\n            //   else modified the document.\n            // * the selection has expanded (e.g. displaying link actions then pressing SHIFT+Right arrow).\n            //\n            // Note: #_getSelectedLinkElement will return a link for a non-collapsed selection only\n            // when fully selected.\n            if (prevSelectedLink && !selectedLink || !prevSelectedLink && selectionParent !== prevSelectionParent) {\n                this._hideUI();\n            }    // Update the position of the panel when:\n                 //  * the selection remains in the original link element,\n                 //  * there was no link element in the first place, i.e. creating a new link\n            else {\n                // If still in a link element, simply update the position of the balloon.\n                // If there was no link (e.g. inserting one), the balloon must be moved\n                // to the new position in the editing view (a new native DOM range).\n                this._balloon.updatePosition(this._getBalloonPositionData());\n            }\n            prevSelectedLink = selectedLink;\n            prevSelectionParent = selectionParent;\n        });\n        function getSelectionParent() {\n            return viewDocument.selection.focus.getAncestors().reverse().find(node => node.is('element'));\n        }\n    }\n    /**\n\t * Returns true when {@link #formView} is in the {@link #_balloon}.\n\t *\n\t * @readonly\n\t * @protected\n\t * @type {Boolean}\n\t */\n    get _isFormInPanel() {\n        return this._balloon.hasView(this.formView);\n    }\n    /**\n\t * Returns true when {@link #actionsView} is in the {@link #_balloon}.\n\t *\n\t * @readonly\n\t * @protected\n\t * @type {Boolean}\n\t */\n    get _areActionsInPanel() {\n        return this._balloon.hasView(this.actionsView);\n    }\n    /**\n\t * Returns true when {@link #actionsView} is in the {@link #_balloon} and it is\n\t * currently visible.\n\t *\n\t * @readonly\n\t * @protected\n\t * @type {Boolean}\n\t */\n    get _areActionsVisible() {\n        return this._balloon.visibleView === this.actionsView;\n    }\n    /**\n\t * Returns true when {@link #actionsView} or {@link #formView} is in the {@link #_balloon}.\n\t *\n\t * @readonly\n\t * @protected\n\t * @type {Boolean}\n\t */\n    get _isUIInPanel() {\n        return this._isFormInPanel || this._areActionsInPanel;\n    }\n    /**\n\t * Returns true when {@link #actionsView} or {@link #formView} is in the {@link #_balloon} and it is\n\t * currently visible.\n\t *\n\t * @readonly\n\t * @protected\n\t * @type {Boolean}\n\t */\n    get _isUIVisible() {\n        const visibleView = this._balloon.visibleView;\n        return visibleView == this.formView || this._areActionsVisible;\n    }\n    /**\n\t * Returns positioning options for the {@link #_balloon}. They control the way the balloon is attached\n\t * to the target element or selection.\n\t *\n\t * If the selection is collapsed and inside a link element, the panel will be attached to the\n\t * entire link element. Otherwise, it will be attached to the selection.\n\t *\n\t * @private\n\t * @returns {module:utils/dom/position~Options}\n\t */\n    _getBalloonPositionData() {\n        const view = this.editor.editing.view;\n        const viewDocument = view.document;\n        const targetLink = this._getSelectedLinkElement();\n        const target = targetLink ? // When selection is inside link element, then attach panel to this element.\n        view.domConverter.mapViewToDom(targetLink) : // Otherwise attach panel to the selection.\n        view.domConverter.viewRangeToDom(viewDocument.selection.getFirstRange());\n        return { target };\n    }\n    /**\n\t * Returns the link {@link module:engine/view/attributeelement~AttributeElement} under\n\t * the {@link module:engine/view/document~Document editing view's} selection or `null`\n\t * if there is none.\n\t *\n\t * **Note**: For a non–collapsed selection the link element is only returned when **fully**\n\t * selected and the **only** element within the selection boundaries.\n\t *\n\t * @private\n\t * @returns {module:engine/view/attributeelement~AttributeElement|null}\n\t */\n    _getSelectedLinkElement() {\n        const view = this.editor.editing.view;\n        const selection = view.document.selection;\n        if (selection.isCollapsed) {\n            return findLinkElementAncestor(selection.getFirstPosition());\n        } else {\n            // The range for fully selected link is usually anchored in adjacent text nodes.\n            // Trim it to get closer to the actual link element.\n            const range = selection.getFirstRange().getTrimmed();\n            const startLink = findLinkElementAncestor(range.start);\n            const endLink = findLinkElementAncestor(range.end);\n            if (!startLink || startLink != endLink) {\n                return null;\n            }\n            // Check if the link element is fully selected.\n            if (view.createRangeIn(startLink).getTrimmed().isEqual(range)) {\n                return startLink;\n            } else {\n                return null;\n            }\n        }\n    }\n}\n// Returns a link element if there's one among the ancestors of the provided `Position`.\n//\n// @private\n// @param {module:engine/view/position~Position} View position to analyze.\n// @returns {module:engine/view/attributeelement~AttributeElement|null} Link element at the position or null.\nfunction findLinkElementAncestor(position) {\n    return position.getAncestors().find(ancestor => isLinkElement(ancestor));\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module link/link\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport LinkEditing from './linkediting';\nimport LinkUI from './linkui';\n\n/**\n * The link plugin.\n *\n * This is a \"glue\" plugin which loads the {@link module:link/linkediting~LinkEditing link editing feature}\n * and {@link module:link/linkui~LinkUI link UI feature}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Link extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ LinkEditing, LinkUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Link';\n\t}\n}\n\n/**\n * The configuration of the {@link module:link/link~Link} feature.\n *\n * Read more in {@link module:link/link~LinkConfig}.\n *\n * @member {module:link/link~LinkConfig} module:core/editor/editorconfig~EditorConfig#link\n */\n\n/**\n * The configuration of the {@link module:link/link~Link link feature}.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n * \t\t\t\tlink:  ... // Link feature configuration.\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See {@link module:core/editor/editorconfig~EditorConfig all editor options}.\n * @interface LinkConfig\n */\n\n/**\n * When set `true`, the `target=\"blank\"` and `rel=\"noopener noreferrer\"` attributes are automatically added to all external links\n * in the editor. By external are meant all links in the editor content starting with `http`, `https`, or `//`.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n *\t\t\t\tlink: {\n *\t\t\t\t\taddTargetToExternalLinks: true\n *\t\t\t\t}\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * Internally, this option activates a predefined {@link module:link/link~LinkConfig#decorators automatic link decorator},\n * which extends all external links with the `target` and `rel` attributes without additional configuration.\n *\n * **Note**: To control the `target` and `rel` attributes of specific links in the edited content, a dedicated\n * {@link module:link/link~LinkDecoratorManualDefinition manual} decorator must be defined in the\n * {@link module:link/link~LinkConfig#decorators `config.link.decorators`} array. In such scenario,\n * the `config.link.addTargetToExternalLinks` option should remain `undefined` or `false` to not interfere with the manual decorator.\n *\n * **Note**: It is possible to add other {@link module:link/link~LinkDecoratorAutomaticDefinition automatic}\n * or {@link module:link/link~LinkDecoratorManualDefinition manual} link decorators when this option is active.\n *\n * More information about decorators can be found in the {@link module:link/link~LinkConfig#decorators decorators configuration}\n * reference.\n *\n * @default false\n * @member {Boolean} module:link/link~LinkConfig#addTargetToExternalLinks\n */\n\n/**\n * Decorators provide an easy way to configure and manage additional link attributes in the editor content. There are\n * two types of link decorators:\n *\n * * {@link module:link/link~LinkDecoratorAutomaticDefinition automatic} – they match links against pre–defined rules and\n * manage their attributes based on the results,\n * * {@link module:link/link~LinkDecoratorManualDefinition manual} – they allow users to control link attributes individually\n *  using the editor UI.\n *\n * Link decorators are defined as an object with key-value pairs, where the key is a name provided for a given decorator and the\n * value is the decorator definition.\n *\n * The name of the decorator also corresponds to the {@glink framework/guides/architecture/editing-engine#text-attributes text attribute}\n * in the model. For instance, the `isExternal` decorator below is represented as a `linkIsExternal` attribute in the model.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n *\t\t\t\tlink: {\n *\t\t\t\t\tdecorators: {\n *\t\t\t\t\t\tisExternal: {\n *\t\t\t\t\t\t\tmode: 'automatic',\n *\t\t\t\t\t\t\tcallback: url => url.startsWith( 'http://' ),\n *\t\t\t\t\t\t\tattributes: {\n *\t\t\t\t\t\t\t\ttarget: '_blank',\n *\t\t\t\t\t\t\t\trel: 'noopener noreferrer'\n *\t\t\t\t\t\t\t}\n *\t\t\t\t\t\t},\n *\t\t\t\t\t\tisDownloadable: {\n *\t\t\t\t\t\t\tmode: 'manual',\n *\t\t\t\t\t\t\tlabel: 'Downloadable',\n *\t\t\t\t\t\t\tattributes: {\n *\t\t\t\t\t\t\t\tdownload: 'file.png',\n *\t\t\t\t\t\t\t}\n *\t\t\t\t\t\t},\n *\t\t\t\t\t\t// ...\n *\t\t\t\t\t}\n *\t\t\t\t}\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * To learn more about the configuration syntax, check out the {@link module:link/link~LinkDecoratorAutomaticDefinition automatic}\n * and {@link module:link/link~LinkDecoratorManualDefinition manual} decorator option reference.\n *\n * **Warning:** Currently, link decorators work independently and no conflict resolution mechanism exists.\n * For example, configuring the `target` attribute using both an automatic and a manual decorator at a time could end up with\n * quirky results. The same applies if multiple manual or automatic decorators were defined for the same attribute.\n *\n * **Note**: Since the `target` attribute management for external links is a common use case, there is a predefined automatic decorator\n * dedicated for that purpose which can be enabled by turning a single option on. Check out the\n * {@link module:link/link~LinkConfig#addTargetToExternalLinks `config.link.addTargetToExternalLinks`}\n * configuration description to learn more.\n *\n * See also {@glink features/link#custom-link-attributes-decorators link's feature} guide for more information.\n *\n * @member {Object.<String, module:link/link~LinkDecoratorDefinition>} module:link/link~LinkConfig#decorators\n */\n\n/**\n * Represents a link decorator definition ({@link module:link/link~LinkDecoratorManualDefinition `'manual'`}\n * or {@link module:link/link~LinkDecoratorAutomaticDefinition `'automatic'`}).\n *\n * @interface LinkDecoratorDefinition\n */\n\n/**\n * The kind of the decorator.\n *\n * Check out the {@glink features/link#custom-link-attributes-decorators link feature} guide for more information.\n *\n * @member {'manual'|'automatic'} module:link/link~LinkDecoratorDefinition#mode\n */\n\n/**\n * Describes an automatic link {@link module:link/link~LinkConfig#decorators decorator}. This kind of a decorator matches\n * all links in the editor content against a function which decides whether the link should gain a pre–defined set of attributes\n * or not.\n *\n * It takes an object with key-value pairs of attributes and a callback function which must return a boolean based on link's\n * `href` (URL). When the callback returns `true`, attributes are applied to the link.\n *\n * For example, to add the `target=\"_blank\"` attribute to all links in the editor starting with the `http://`,\n * then configuration could look like this:\n *\n *\t\t{\n *\t\t\tmode: 'automatic',\n *\t\t\tcallback: url => url.startsWith( 'http://' ),\n *\t\t\tattributes: {\n *\t\t\t\ttarget: '_blank'\n *\t\t\t}\n *\t\t}\n *\n * **Note**: Since the `target` attribute management for external links is a common use case, there is a predefined automatic decorator\n * dedicated for that purpose which can be enabled by turning a single option on. Check out the\n * {@link module:link/link~LinkConfig#addTargetToExternalLinks `config.link.addTargetToExternalLinks`}\n * configuration description to learn more.\n *\n * @typedef {Object} module:link/link~LinkDecoratorAutomaticDefinition\n * @property {'automatic'} mode The kind of the decorator. `'automatic'` for all automatic decorators.\n * @property {Function} callback Takes an `url` as a parameter and returns `true` if the `attributes` should be applied to the link.\n * @property {Object} attributes Key-value pairs used as link attributes added to the output during the\n * {@glink framework/guides/architecture/editing-engine#conversion downcasting}.\n * Attributes should follow the {@link module:engine/view/elementdefinition~ElementDefinition} syntax.\n */\n\n/**\n * Describes a manual link {@link module:link/link~LinkConfig#decorators decorator}. This kind of a decorator is represented in\n * the link feature's {@link module:link/linkui user interface} as a switch the user can use to control the presence\n * of a pre–defined set of attributes.\n *\n * For instance, to allow users to manually control the presence of the `target=\"_blank\"` and\n * `rel=\"noopener noreferrer\"` attributes on specific links, the decorator could look as follows:\n *\n *\t\t{\n *\t\t\tmode: 'manual',\n *\t\t\tlabel: 'Open in a new tab',\n *\t\t\tattributes: {\n *\t\t\t\ttarget: '_blank',\n *\t\t\t\trel: 'noopener noreferrer'\n *\t\t\t}\n *\t\t}\n *\n * @typedef {Object} module:link/link~LinkDecoratorManualDefinition\n * @property {'manual'} mode The kind of the decorator. `'manual'` for all manual decorators.\n * @property {String} label The label of the UI button the user can use to control the presence of link attributes.\n * @property {Object} attributes Key-value pairs used as link attributes added to the output during the\n * {@glink framework/guides/architecture/editing-engine#conversion downcasting}.\n * Attributes should follow the {@link module:engine/view/elementdefinition~ElementDefinition} syntax.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagestyle/imagestylecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { isImage } from '../image/utils';\n\n/**\n * The image style command. It is used to apply different image styles.\n *\n * @extends module:core/command~Command\n */\nexport default class ImageStyleCommand extends Command {\n\t/**\n\t * Creates an instance of the image style command. Each command instance is handling one style.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t * @param {Array.<module:image/imagestyle/imagestyleediting~ImageStyleFormat>} styles The styles that this command supports.\n\t */\n\tconstructor( editor, styles ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The name of the default style, if it is present. If there is no default style, it defaults to `false`.\n\t\t *\n\t\t * @readonly\n\t\t * @type {Boolean|String}\n\t\t */\n\t\tthis.defaultStyle = false;\n\n\t\t/**\n\t\t * A style handled by this command.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<module:image/imagestyle/imagestyleediting~ImageStyleFormat>} #styles\n\t\t */\n\t\tthis.styles = styles.reduce( ( styles, style ) => {\n\t\t\tstyles[ style.name ] = style;\n\n\t\t\tif ( style.isDefault ) {\n\t\t\t\tthis.defaultStyle = style.name;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t}, {} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst element = this.editor.model.document.selection.getSelectedElement();\n\n\t\tthis.isEnabled = isImage( element );\n\n\t\tif ( !element ) {\n\t\t\tthis.value = false;\n\t\t} else if ( element.hasAttribute( 'imageStyle' ) ) {\n\t\t\tconst attributeValue = element.getAttribute( 'imageStyle' );\n\t\t\tthis.value = this.styles[ attributeValue ] ? attributeValue : false;\n\t\t} else {\n\t\t\tthis.value = this.defaultStyle;\n\t\t}\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t *\t\teditor.execute( 'imageStyle', { value: 'side' } );\n\t *\n\t * @param {Object} options\n\t * @param {String} options.value The name of the style (based on the\n\t * {@link module:image/image~ImageConfig#styles `image.styles`} configuration option).\n\t * @fires execute\n\t */\n\texecute( options ) {\n\t\tconst styleName = options.value;\n\n\t\tconst model = this.editor.model;\n\t\tconst imageElement = model.document.selection.getSelectedElement();\n\n\t\tmodel.change( writer => {\n\t\t\t// Default style means that there is no `imageStyle` attribute in the model.\n\t\t\t// https://github.com/ckeditor/ckeditor5-image/issues/147\n\t\t\tif ( this.styles[ styleName ].isDefault ) {\n\t\t\t\twriter.removeAttribute( 'imageStyle', imageElement );\n\t\t\t} else {\n\t\t\t\twriter.setAttribute( 'imageStyle', styleName, imageElement );\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * @module image/imagestyle/converters\n */\n\n/**\n * Returns a converter for the `imageStyle` attribute. It can be used for adding, changing and removing the attribute.\n *\n * @param {Object} styles An object containing available styles. See {@link module:image/imagestyle/imagestyleediting~ImageStyleFormat}\n * for more details.\n * @returns {Function} A model-to-view attribute converter.\n */\nexport function modelToViewStyleAttribute( styles ) {\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if there is class name associated with given value.\n\t\tconst newStyle = getStyleByName( data.attributeNewValue, styles );\n\t\tconst oldStyle = getStyleByName( data.attributeOldValue, styles );\n\n\t\tconst viewElement = conversionApi.mapper.toViewElement( data.item );\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\tif ( oldStyle ) {\n\t\t\tviewWriter.removeClass( oldStyle.className, viewElement );\n\t\t}\n\n\t\tif ( newStyle ) {\n\t\t\tviewWriter.addClass( newStyle.className, viewElement );\n\t\t}\n\t};\n}\n\n/**\n * Returns a view-to-model converter converting image CSS classes to a proper value in the model.\n *\n * @param {Array.<module:image/imagestyle/imagestyleediting~ImageStyleFormat>} styles The styles for which the converter is created.\n * @returns {Function} A view-to-model converter.\n */\nexport function viewToModelStyleAttribute( styles ) {\n\t// Convert only non–default styles.\n\tconst filteredStyles = styles.filter( style => !style.isDefault );\n\n\treturn ( evt, data, conversionApi ) => {\n\t\tif ( !data.modelRange ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewFigureElement = data.viewItem;\n\t\tconst modelImageElement = first( data.modelRange.getItems() );\n\n\t\t// Check if `imageStyle` attribute is allowed for current element.\n\t\tif ( !conversionApi.schema.checkAttribute( modelImageElement, 'imageStyle' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Convert style one by one.\n\t\tfor ( const style of filteredStyles ) {\n\t\t\t// Try to consume class corresponding with style.\n\t\t\tif ( conversionApi.consumable.consume( viewFigureElement, { classes: style.className } ) ) {\n\t\t\t\t// And convert this style to model attribute.\n\t\t\t\tconversionApi.writer.setAttribute( 'imageStyle', style.name, modelImageElement );\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Returns the style with a given `name` from an array of styles.\n//\n// @param {String} name\n// @param {Array.<module:image/imagestyle/imagestyleediting~ImageStyleFormat> } styles\n// @returns {module:image/imagestyle/imagestyleediting~ImageStyleFormat|undefined}\nfunction getStyleByName( name, styles ) {\n\tfor ( const style of styles ) {\n\t\tif ( style.name === name ) {\n\t\t\treturn style;\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagestyle/utils\n */\n\nimport log from '@ckeditor/ckeditor5-utils/src/log';\n\nimport fullWidthIcon from '@ckeditor/ckeditor5-core/theme/icons/object-full-width.svg';\nimport leftIcon from '@ckeditor/ckeditor5-core/theme/icons/object-left.svg';\nimport centerIcon from '@ckeditor/ckeditor5-core/theme/icons/object-center.svg';\nimport rightIcon from '@ckeditor/ckeditor5-core/theme/icons/object-right.svg';\n\n/**\n * Default image styles provided by the plugin that can be referred in the\n * {@link module:image/image~ImageConfig#styles} configuration.\n *\n * Among them, 2 default semantic content styles are available:\n *\n * * `full` is a full–width image without any CSS class,\n * * `side` is a side image styled with the `image-style-side` CSS class.\n *\n * There are also 3 styles focused on formatting:\n *\n * * `alignLeft` aligns the image to the left using the `image-style-align-left` class,\n * * `alignCenter` centers the image using the `image-style-align-center` class,\n * * `alignRight` aligns the image to the right using the `image-style-align-right` class,\n *\n * @member {Object.<String,Object>}\n */\nconst defaultStyles = {\n\t// This option is equal to the situation when no style is applied.\n\tfull: {\n\t\tname: 'full',\n\t\ttitle: 'Full size image',\n\t\ticon: fullWidthIcon,\n\t\tisDefault: true\n\t},\n\n\t// This represents a side image.\n\tside: {\n\t\tname: 'side',\n\t\ttitle: 'Side image',\n\t\ticon: rightIcon,\n\t\tclassName: 'image-style-side'\n\t},\n\n\t// This style represents an image aligned to the left.\n\talignLeft: {\n\t\tname: 'alignLeft',\n\t\ttitle: 'Left aligned image',\n\t\ticon: leftIcon,\n\t\tclassName: 'image-style-align-left'\n\t},\n\n\t// This style represents a centered image.\n\talignCenter: {\n\t\tname: 'alignCenter',\n\t\ttitle: 'Centered image',\n\t\ticon: centerIcon,\n\t\tclassName: 'image-style-align-center'\n\t},\n\n\t// This style represents an image aligned to the right.\n\talignRight: {\n\t\tname: 'alignRight',\n\t\ttitle: 'Right aligned image',\n\t\ticon: rightIcon,\n\t\tclassName: 'image-style-align-right'\n\t}\n};\n\n/**\n * Default image style icons provided by the plugin that can be referred in the\n * {@link module:image/image~ImageConfig#styles} configuration.\n *\n * There are 4 icons available: `'full'`, `'left'`, `'center'` and `'right'`.\n *\n * @member {Object.<String, String>}\n */\nconst defaultIcons = {\n\tfull: fullWidthIcon,\n\tleft: leftIcon,\n\tright: rightIcon,\n\tcenter: centerIcon\n};\n\n/**\n * Returns a {@link module:image/image~ImageConfig#styles} array with items normalized in the\n * {@link module:image/imagestyle/imagestyleediting~ImageStyleFormat} format and a complete `icon` markup for each style.\n *\n * @returns {Array.<module:image/imagestyle/imagestyleediting~ImageStyleFormat>}\n */\nexport function normalizeImageStyles( configuredStyles = [] ) {\n\treturn configuredStyles.map( _normalizeStyle );\n}\n\n// Normalizes an image style provided in the {@link module:image/image~ImageConfig#styles}\n// and returns it in a {@link module:image/imagestyle/imagestyleediting~ImageStyleFormat}.\n//\n// @param {Object} style\n// @returns {@link module:image/imagestyle/imagestyleediting~ImageStyleFormat}\nfunction _normalizeStyle( style ) {\n\t// Just the name of the style has been passed.\n\tif ( typeof style == 'string' ) {\n\t\tconst styleName = style;\n\n\t\t// If it's one of the defaults, just use it.\n\t\tif ( defaultStyles[ styleName ] ) {\n\t\t\t// Clone the style to avoid overriding defaults.\n\t\t\tstyle = Object.assign( {}, defaultStyles[ styleName ] );\n\t\t}\n\t\t// If it's just a name but none of the defaults, warn because probably it's a mistake.\n\t\telse {\n\t\t\tlog.warn(\n\t\t\t\t'image-style-not-found: There is no such image style of given name.',\n\t\t\t\t{ name: styleName }\n\t\t\t);\n\n\t\t\t// Normalize the style anyway to prevent errors.\n\t\t\tstyle = {\n\t\t\t\tname: styleName\n\t\t\t};\n\t\t}\n\t}\n\t// If an object style has been passed and if the name matches one of the defaults,\n\t// extend it with defaults – the user wants to customize a default style.\n\t// Note: Don't override the user–defined style object, clone it instead.\n\telse if ( defaultStyles[ style.name ] ) {\n\t\tconst defaultStyle = defaultStyles[ style.name ];\n\t\tconst extendedStyle = Object.assign( {}, style );\n\n\t\tfor ( const prop in defaultStyle ) {\n\t\t\tif ( !style.hasOwnProperty( prop ) ) {\n\t\t\t\textendedStyle[ prop ] = defaultStyle[ prop ];\n\t\t\t}\n\t\t}\n\n\t\tstyle = extendedStyle;\n\t}\n\n\t// If an icon is defined as a string and correspond with a name\n\t// in default icons, use the default icon provided by the plugin.\n\tif ( typeof style.icon == 'string' && defaultIcons[ style.icon ] ) {\n\t\tstyle.icon = defaultIcons[ style.icon ];\n\t}\n\n\treturn style;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagestyle/imagestyleediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ImageStyleCommand from './imagestylecommand';\nimport { viewToModelStyleAttribute, modelToViewStyleAttribute } from './converters';\nimport { normalizeImageStyles } from './utils';\n\n/**\n * The image style engine plugin. It sets the default configuration, creates converters and registers\n * {@link module:image/imagestyle/imagestylecommand~ImageStyleCommand ImageStyleCommand}.\n *\n * @extends {module:core/plugin~Plugin}\n */\nexport default class ImageStyleEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageStyleEditing';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst schema = editor.model.schema;\n\t\tconst data = editor.data;\n\t\tconst editing = editor.editing;\n\n\t\t// Define default configuration.\n\t\teditor.config.define( 'image.styles', [ 'full', 'side' ] );\n\n\t\t// Get configuration.\n\t\tconst styles = normalizeImageStyles( editor.config.get( 'image.styles' ) );\n\n\t\t// Allow imageStyle attribute in image.\n\t\t// We could call it 'style' but https://github.com/ckeditor/ckeditor5-engine/issues/559.\n\t\tschema.extend( 'image', { allowAttributes: 'imageStyle' } );\n\n\t\t// Converters for imageStyle attribute from model to view.\n\t\tconst modelToViewConverter = modelToViewStyleAttribute( styles );\n\t\tediting.downcastDispatcher.on( 'attribute:imageStyle:image', modelToViewConverter );\n\t\tdata.downcastDispatcher.on( 'attribute:imageStyle:image', modelToViewConverter );\n\n\t\t// Converter for figure element from view to model.\n\t\tdata.upcastDispatcher.on( 'element:figure', viewToModelStyleAttribute( styles ), { priority: 'low' } );\n\n\t\t// Register imageStyle command.\n\t\teditor.commands.add( 'imageStyle', new ImageStyleCommand( editor, styles ) );\n\t}\n}\n\n/**\n * The image style format descriptor.\n *\n *\t\timport fullSizeIcon from 'path/to/icon.svg';\n *\n *\t\tconst imageStyleFormat = {\n *\t\t\tname: 'fullSize',\n *\t\t\ticon: fullSizeIcon,\n *\t\t\ttitle: 'Full size image',\n *\t\t\tclassName: 'image-full-size'\n *\t\t}\n *\n * @typedef {Object} module:image/imagestyle/imagestyleediting~ImageStyleFormat\n *\n * @property {String} name The unique name of the style. It will be used to:\n *\n * * Store the chosen style in the model by setting the `imageStyle` attribute of the `<image>` element.\n * * As a value of the {@link module:image/imagestyle/imagestylecommand~ImageStyleCommand#execute `imageStyle` command},\n * * when registering a button for each of the styles (`'imageStyle:{name}'`) in the\n * {@link module:ui/componentfactory~ComponentFactory UI components factory} (this functionality is provided by the\n * {@link module:image/imagestyle/imagestyleui~ImageStyleUI} plugin).\n *\n * @property {Boolean} [isDefault] When set, the style will be used as the default one.\n * A default style does not apply any CSS class to the view element.\n *\n * @property {String} icon One of the following to be used when creating the style's button:\n *\n * * An SVG icon source (as an XML string).\n * * One of {@link module:image/imagestyle/utils~defaultIcons} to use a default icon provided by the plugin.\n *\n * @property {String} title The style's title.\n *\n * @property {String} className The CSS class used to represent the style in the view.\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagestyle/imagestyleui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport { normalizeImageStyles } from './utils';\nimport '../../theme/imagestyle.css';\n/**\n * The image style UI plugin.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageStyleUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'ImageStyleUI';\n    }\n    /**\n\t * Returns the default localized style titles provided by the plugin.\n\t *\n\t * The following localized titles corresponding with\n\t * {@link module:image/imagestyle/utils~defaultStyles} are available:\n\t *\n\t * * `'Full size image'`,\n\t * * `'Side image'`,\n\t * * `'Left aligned image'`,\n\t * * `'Centered image'`,\n\t * * `'Right aligned image'`\n\t *\n\t * @returns {Object.<String,String>}\n\t */\n    get localizedDefaultStylesTitles() {\n        const t = this.editor.t;\n        return {\n            'Full size image': t('Full size image'),\n            'Side image': t('Side image'),\n            'Left aligned image': t('Left aligned image'),\n            'Centered image': t('Centered image'),\n            'Right aligned image': t('Right aligned image')\n        };\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const configuredStyles = editor.config.get('image.styles');\n        const translatedStyles = translateStyles(normalizeImageStyles(configuredStyles), this.localizedDefaultStylesTitles);\n        for (const style of translatedStyles) {\n            this._createButton(style);\n        }\n    }\n    /**\n\t * Creates a button for each style and stores it in the editor {@link module:ui/componentfactory~ComponentFactory ComponentFactory}.\n\t *\n\t * @private\n\t * @param {module:image/imagestyle/imagestyleediting~ImageStyleFormat} style\n\t */\n    _createButton(style) {\n        const editor = this.editor;\n        const componentName = `imageStyle:${ style.name }`;\n        editor.ui.componentFactory.add(componentName, locale => {\n            const command = editor.commands.get('imageStyle');\n            const view = new ButtonView(locale);\n            view.set({\n                label: style.title,\n                icon: style.icon,\n                tooltip: true\n            });\n            view.bind('isEnabled').to(command, 'isEnabled');\n            view.bind('isOn').to(command, 'value', value => value === style.name);\n            this.listenTo(view, 'execute', () => editor.execute('imageStyle', { value: style.name }));\n            return view;\n        });\n    }\n}\n/**\n * Returns the translated `title` from the passed styles array.\n *\n * @param {Array.<module:image/imagestyle/imagestyleediting~ImageStyleFormat>} styles\n * @param titles\n * @returns {Array.<module:image/imagestyle/imagestyleediting~ImageStyleFormat>}\n */\nfunction translateStyles(styles, titles) {\n    for (const style of styles) {\n        // Localize the titles of the styles, if a title corresponds with\n        // a localized default provided by the plugin.\n        if (titles[style.title]) {\n            style.title = titles[style.title];\n        }\n    }\n    return styles;\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagestyle\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ImageStyleEditing from './imagestyle/imagestyleediting';\nimport ImageStyleUI from './imagestyle/imagestyleui';\n\n/**\n * The image style plugin.\n *\n * For a detailed overview, check the {@glink features/image#image-styles image styles} documentation.\n *\n * This is a \"glue\" plugin which loads the {@link module:image/imagestyle/imagestyleediting~ImageStyleEditing}\n * and {@link module:image/imagestyle/imagestyleui~ImageStyleUI} plugins.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageStyle extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ImageStyleEditing, ImageStyleUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageStyle';\n\t}\n}\n\n/**\n * Available image styles.\n *\n * The default value is:\n *\n *\t\tconst imageConfig = {\n *\t\t\tstyles: [ 'full', 'side' ]\n *\t\t};\n *\n * which configures two default styles:\n *\n *  * the \"full\" style which does not apply any class, e.g. for images styled to span 100% width of the content,\n *  * the \"side\" style with the `.image-style-side` CSS class.\n *\n * See {@link module:image/imagestyle/utils~defaultStyles} to learn more about default\n * styles provided by the image feature.\n *\n * The {@link module:image/imagestyle/utils~defaultStyles default styles} can be customized,\n * e.g. to change the icon, title or CSS class of the style. The feature also provides several\n * {@link module:image/imagestyle/utils~defaultIcons default icons} to choose from.\n *\n *\t\timport customIcon from 'custom-icon.svg';\n *\n *\t\t// ...\n *\n *\t\tconst imageConfig = {\n *\t\t\tstyles: [\n *\t\t\t\t// This will only customize the icon of the \"full\" style.\n *\t\t\t\t// Note: 'right' is one of default icons provided by the feature.\n *\t\t\t\t{ name: 'full', icon: 'right' },\n *\n *\t\t\t\t// This will customize the icon, title and CSS class of the default \"side\" style.\n *\t\t\t\t{ name: 'side', icon: customIcon, title: 'My side style', className: 'custom-side-image' }\n *\t\t\t]\n *\t\t};\n *\n * If none of the default styles is good enough, it is possible to define independent custom styles, too:\n *\n *\t\timport fullSizeIcon from '@ckeditor/ckeditor5-core/theme/icons/object-center.svg';\n *\t\timport sideIcon from '@ckeditor/ckeditor5-core/theme/icons/object-right.svg';\n *\n *\t\t// ...\n *\n *\t\tconst imageConfig = {\n *\t\t\tstyles: [\n *\t\t\t\t// A completely custom full size style with no class, used as a default.\n *\t\t\t\t{ name: 'fullSize', title: 'Full size', icon: fullSizeIcon, isDefault: true },\n *\n *\t\t\t\t{ name: 'side', title: 'To the side', icon: sideIcon, className: 'side-image' }\n *\t\t\t]\n *\t\t};\n *\n * Note: Setting `title` to one of {@link module:image/imagestyle/imagestyleui~ImageStyleUI#localizedDefaultStylesTitles}\n * will automatically translate it to the language of the editor.\n *\n * Read more about styling images in the {@glink features/image#image-styles Image styles guide}.\n *\n * The feature creates commands based on defined styles, so you can change the style of a selected image by executing\n * the following command:\n *\n *\t\teditor.execute( 'imageStyle' { value: 'side' } );\n *\n * The feature also creates buttons that execute the commands. So, assuming that you use the\n * default image styles setting, you can {@link module:image/image~ImageConfig#toolbar configure the image toolbar}\n * (or any other toolbar) to contain these options:\n *\n *\t\tconst imageConfig = {\n *\t\t\ttoolbar: [ 'imageStyle:full', 'imageStyle:side' ]\n *\t\t};\n *\n * @member {Array.<module:image/imagestyle/imagestyleediting~ImageStyleFormat>} module:image/image~ImageConfig#styles\n */\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module block-quote/blockquotecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * The block quote command plugin.\n *\n * @extends module:core/command~Command\n */\nexport default class BlockQuoteCommand extends Command {\n\t/**\n\t * Whether the selection starts in a block quote.\n\t *\n\t * @observable\n\t * @readonly\n\t * @member {Boolean} #value\n\t */\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tthis.value = this._getValue();\n\t\tthis.isEnabled = this._checkEnabled();\n\t}\n\n\t/**\n\t * Executes the command. When the command {@link #value is on}, all top-most block quotes within\n\t * the selection will be removed. If it is off, all selected blocks will be wrapped with\n\t * a block quote.\n\t *\n\t * @fires execute\n\t * @param {Object} [options] Command options.\n\t * @param {Boolean} [options.forceValue] If set, it will force the command behavior. If `true`, the command will apply a block quote,\n\t * otherwise the command will remove the block quote. If not set, the command will act basing on its current value.\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst schema = model.schema;\n\t\tconst selection = model.document.selection;\n\n\t\tconst blocks = Array.from( selection.getTopMostBlocks() );\n\n\t\tconst value = ( options.forceValue === undefined ) ? !this.value : options.forceValue;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( !value ) {\n\t\t\t\tthis._removeQuote( writer, blocks.filter( findQuote ) );\n\t\t\t} else {\n\t\t\t\tconst blocksToQuote = blocks.filter( block => {\n\t\t\t\t\t// Already quoted blocks needs to be considered while quoting too\n\t\t\t\t\t// in order to reuse their <bQ> elements.\n\t\t\t\t\treturn findQuote( block ) || checkCanBeQuoted( schema, block );\n\t\t\t\t} );\n\n\t\t\t\tthis._applyQuote( writer, blocksToQuote );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Checks the command's {@link #value}.\n\t *\n\t * @private\n\t * @returns {Boolean} The current value.\n\t */\n\t_getValue() {\n\t\tconst selection = this.editor.model.document.selection;\n\n\t\tconst firstBlock = first( selection.getTopMostBlocks() );\n\n\t\t// In the current implementation, the block quote must be an immediate parent of a block element.\n\t\treturn !!( firstBlock && findQuote( firstBlock ) );\n\t}\n\n\t/**\n\t * Checks whether the command can be enabled in the current context.\n\t *\n\t * @private\n\t * @returns {Boolean} Whether the command should be enabled.\n\t */\n\t_checkEnabled() {\n\t\tif ( this.value ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst selection = this.editor.model.document.selection;\n\t\tconst schema = this.editor.model.schema;\n\n\t\tconst firstBlock = first( selection.getSelectedBlocks() );\n\n\t\tif ( !firstBlock ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn checkCanBeQuoted( schema, firstBlock );\n\t}\n\n\t/**\n\t * Removes the quote from given blocks.\n\t *\n\t * If blocks which are supposed to be \"unquoted\" are in the middle of a quote,\n\t * start it or end it, then the quote will be split (if needed) and the blocks\n\t * will be moved out of it, so other quoted blocks remained quoted.\n\t *\n\t * @private\n\t * @param {module:engine/model/writer~Writer} writer\n\t * @param {Array.<module:engine/model/element~Element>} blocks\n\t */\n\t_removeQuote( writer, blocks ) {\n\t\t// Unquote all groups of block. Iterate in the reverse order to not break following ranges.\n\t\tgetRangesOfBlockGroups( writer, blocks ).reverse().forEach( groupRange => {\n\t\t\tif ( groupRange.start.isAtStart && groupRange.end.isAtEnd ) {\n\t\t\t\twriter.unwrap( groupRange.start.parent );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// The group of blocks are at the beginning of an <bQ> so let's move them left (out of the <bQ>).\n\t\t\tif ( groupRange.start.isAtStart ) {\n\t\t\t\tconst positionBefore = writer.createPositionBefore( groupRange.start.parent );\n\n\t\t\t\twriter.move( groupRange, positionBefore );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// The blocks are in the middle of an <bQ> so we need to split the <bQ> after the last block\n\t\t\t// so we move the items there.\n\t\t\tif ( !groupRange.end.isAtEnd ) {\n\t\t\t\twriter.split( groupRange.end );\n\t\t\t}\n\n\t\t\t// Now we are sure that groupRange.end.isAtEnd is true, so let's move the blocks right.\n\n\t\t\tconst positionAfter = writer.createPositionAfter( groupRange.end.parent );\n\n\t\t\twriter.move( groupRange, positionAfter );\n\t\t} );\n\t}\n\n\t/**\n\t * Applies the quote to given blocks.\n\t *\n\t * @private\n\t * @param {module:engine/model/writer~Writer} writer\n\t * @param {Array.<module:engine/model/element~Element>} blocks\n\t */\n\t_applyQuote( writer, blocks ) {\n\t\tconst quotesToMerge = [];\n\n\t\t// Quote all groups of block. Iterate in the reverse order to not break following ranges.\n\t\tgetRangesOfBlockGroups( writer, blocks ).reverse().forEach( groupRange => {\n\t\t\tlet quote = findQuote( groupRange.start );\n\n\t\t\tif ( !quote ) {\n\t\t\t\tquote = writer.createElement( 'blockQuote' );\n\n\t\t\t\twriter.wrap( groupRange, quote );\n\t\t\t}\n\n\t\t\tquotesToMerge.push( quote );\n\t\t} );\n\n\t\t// Merge subsequent <bQ> elements. Reverse the order again because this time we want to go through\n\t\t// the <bQ> elements in the source order (due to how merge works – it moves the right element's content\n\t\t// to the first element and removes the right one. Since we may need to merge a couple of subsequent `<bQ>` elements\n\t\t// we want to keep the reference to the first (furthest left) one.\n\t\tquotesToMerge.reverse().reduce( ( currentQuote, nextQuote ) => {\n\t\t\tif ( currentQuote.nextSibling == nextQuote ) {\n\t\t\t\twriter.merge( writer.createPositionAfter( currentQuote ) );\n\n\t\t\t\treturn currentQuote;\n\t\t\t}\n\n\t\t\treturn nextQuote;\n\t\t} );\n\t}\n}\n\nfunction findQuote( elementOrPosition ) {\n\treturn elementOrPosition.parent.name == 'blockQuote' ? elementOrPosition.parent : null;\n}\n\n// Returns a minimal array of ranges containing groups of subsequent blocks.\n//\n// content:         abcdefgh\n// blocks:          [ a, b, d, f, g, h ]\n// output ranges:   [ab]c[d]e[fgh]\n//\n// @param {Array.<module:engine/model/element~Element>} blocks\n// @returns {Array.<module:engine/model/range~Range>}\nfunction getRangesOfBlockGroups( writer, blocks ) {\n\tlet startPosition;\n\tlet i = 0;\n\tconst ranges = [];\n\n\twhile ( i < blocks.length ) {\n\t\tconst block = blocks[ i ];\n\t\tconst nextBlock = blocks[ i + 1 ];\n\n\t\tif ( !startPosition ) {\n\t\t\tstartPosition = writer.createPositionBefore( block );\n\t\t}\n\n\t\tif ( !nextBlock || block.nextSibling != nextBlock ) {\n\t\t\tranges.push( writer.createRange( startPosition, writer.createPositionAfter( block ) ) );\n\t\t\tstartPosition = null;\n\t\t}\n\n\t\ti++;\n\t}\n\n\treturn ranges;\n}\n\n// Checks whether <bQ> can wrap the block.\nfunction checkCanBeQuoted( schema, block ) {\n\t// TMP will be replaced with schema.checkWrap().\n\tconst isBQAllowed = schema.checkChild( block.parent, 'blockQuote' );\n\tconst isBlockAllowedInBQ = schema.checkChild( [ '$root', 'blockQuote' ], block );\n\n\treturn isBQAllowed && isBlockAllowedInBQ;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module block-quote/blockquoteediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport BlockQuoteCommand from './blockquotecommand';\n\n/**\n * The block quote editing.\n *\n * Introduces the `'blockQuote'` command and the `'blockQuote'` model element.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class BlockQuoteEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst schema = editor.model.schema;\n\n\t\teditor.commands.add( 'blockQuote', new BlockQuoteCommand( editor ) );\n\n\t\tschema.register( 'blockQuote', {\n\t\t\tallowWhere: '$block',\n\t\t\tallowContentOf: '$root'\n\t\t} );\n\n\t\t// Disallow blockQuote in blockQuote.\n\t\tschema.addChildCheck( ( ctx, childDef ) => {\n\t\t\tif ( ctx.endsWith( 'blockQuote' ) && childDef.name == 'blockQuote' ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t\teditor.conversion.elementToElement( { model: 'blockQuote', view: 'blockquote' } );\n\n\t\t// Postfixer which cleans incorrect model states connected with block quotes.\n\t\teditor.model.document.registerPostFixer( writer => {\n\t\t\tconst changes = editor.model.document.differ.getChanges();\n\n\t\t\tfor ( const entry of changes ) {\n\t\t\t\tif ( entry.type == 'insert' ) {\n\t\t\t\t\tconst element = entry.position.nodeAfter;\n\n\t\t\t\t\tif ( !element ) {\n\t\t\t\t\t\t// We are inside a text node.\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( element.is( 'blockQuote' ) && element.isEmpty ) {\n\t\t\t\t\t\t// Added an empty blockQuote - remove it.\n\t\t\t\t\t\twriter.remove( element );\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if ( element.is( 'blockQuote' ) && !schema.checkChild( entry.position, element ) ) {\n\t\t\t\t\t\t// Added a blockQuote in incorrect place - most likely inside another blockQuote. Unwrap it\n\t\t\t\t\t\t// so the content inside is not lost.\n\t\t\t\t\t\twriter.unwrap( element );\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if ( element.is( 'element' ) ) {\n\t\t\t\t\t\t// Just added an element. Check its children to see if there are no nested blockQuotes somewhere inside.\n\t\t\t\t\t\tconst range = writer.createRangeIn( element );\n\n\t\t\t\t\t\tfor ( const child of range.getItems() ) {\n\t\t\t\t\t\t\tif ( child.is( 'blockQuote' ) && !schema.checkChild( writer.createPositionBefore( child ), child ) ) {\n\t\t\t\t\t\t\t\twriter.unwrap( child );\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if ( entry.type == 'remove' ) {\n\t\t\t\t\tconst parent = entry.position.parent;\n\n\t\t\t\t\tif ( parent.is( 'blockQuote' ) && parent.isEmpty ) {\n\t\t\t\t\t\t// Something got removed and now blockQuote is empty. Remove the blockQuote as well.\n\t\t\t\t\t\twriter.remove( parent );\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\tconst editor = this.editor;\n\t\tconst command = editor.commands.get( 'blockQuote' );\n\n\t\t// Overwrite default Enter key behavior.\n\t\t// If Enter key is pressed with selection collapsed in empty block inside a quote, break the quote.\n\t\t// This listener is added in afterInit in order to register it after list's feature listener.\n\t\t// We can't use a priority for this, because 'low' is already used by the enter feature, unless\n\t\t// we'd use numeric priority in this case.\n\t\tthis.listenTo( this.editor.editing.view.document, 'enter', ( evt, data ) => {\n\t\t\tconst doc = this.editor.model.document;\n\t\t\tconst positionParent = doc.selection.getLastPosition().parent;\n\n\t\t\tif ( doc.selection.isCollapsed && positionParent.isEmpty && command.value ) {\n\t\t\t\tthis.editor.execute( 'blockQuote' );\n\t\t\t\tthis.editor.editing.view.scrollToTheSelection();\n\n\t\t\t\tdata.preventDefault();\n\t\t\t\tevt.stop();\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module block-quote/blockquoteui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport quoteIcon from '@ckeditor/ckeditor5-core/theme/icons/quote.svg';\nimport '../theme/blockquote.css';\n/**\n * The block quote UI plugin.\n *\n * It introduces the `'blockQuote'` button.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class BlockQuoteUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const t = editor.t;\n        editor.ui.componentFactory.add('blockQuote', locale => {\n            const command = editor.commands.get('blockQuote');\n            const buttonView = new ButtonView(locale);\n            buttonView.set({\n                label: t('Block quote'),\n                icon: quoteIcon,\n                tooltip: true\n            });\n            // Bind button model to command.\n            buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n            // Execute command.\n            this.listenTo(buttonView, 'execute', () => editor.execute('blockQuote'));\n            return buttonView;\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module block-quote/blockquote\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport BlockQuoteEditing from './blockquoteediting';\nimport BlockQuoteUI from './blockquoteui';\n\n/**\n * The block quote plugin.\n *\n * For more information about this feature check the {@glink api/block-quote package page}.\n *\n * This is a \"glue\" plugin which loads the {@link module:block-quote/blockquoteediting~BlockQuoteEditing block quote editing feature}\n * and {@link module:block-quote/blockquoteui~BlockQuoteUI block quote UI feature}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class BlockQuote extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ BlockQuoteEditing, BlockQuoteUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'BlockQuote';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagecaption/utils\n */\n\nimport { enablePlaceholder } from '@ckeditor/ckeditor5-engine/src/view/placeholder';\nimport { toWidgetEditable } from '@ckeditor/ckeditor5-widget/src/utils';\n\n/**\n * Returns a function that creates a caption editable element for the given {@link module:engine/view/document~Document}.\n *\n * @param {module:engine/view/view~View} view\n * @param {String} placeholderText The text to be displayed when the caption is empty.\n * @returns {Function}\n */\nexport function captionElementCreator( view, placeholderText ) {\n\treturn writer => {\n\t\tconst editable = writer.createEditableElement( 'figcaption' );\n\t\twriter.setCustomProperty( 'imageCaption', true, editable );\n\n\t\tenablePlaceholder( {\n\t\t\tview,\n\t\t\telement: editable,\n\t\t\ttext: placeholderText\n\t\t} );\n\n\t\treturn toWidgetEditable( editable, writer );\n\t};\n}\n\n/**\n * Returns `true` if a given view element is the image caption editable.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @returns {Boolean}\n */\nexport function isCaption( viewElement ) {\n\treturn !!viewElement.getCustomProperty( 'imageCaption' );\n}\n\n/**\n * Returns the caption model element from a given image element. Returns `null` if no caption is found.\n *\n * @param {module:engine/model/element~Element} imageModelElement\n * @returns {module:engine/model/element~Element|null}\n */\nexport function getCaptionFromImage( imageModelElement ) {\n\tfor ( const node of imageModelElement.getChildren() ) {\n\t\tif ( !!node && node.is( 'caption' ) ) {\n\t\t\treturn node;\n\t\t}\n\t}\n\n\treturn null;\n}\n\n/**\n * {@link module:engine/view/matcher~Matcher} pattern. Checks if a given element is a `<figcaption>` element that is placed\n * inside the image `<figure>` element.\n *\n * @param {module:engine/view/element~Element} element\n * @returns {Object|null} Returns the object accepted by {@link module:engine/view/matcher~Matcher} or `null` if the element\n * cannot be matched.\n */\nexport function matchImageCaption( element ) {\n\tconst parent = element.parent;\n\n\t// Convert only captions for images.\n\tif ( element.name == 'figcaption' && parent && parent.name == 'figure' && parent.hasClass( 'image' ) ) {\n\t\treturn { name: true };\n\t}\n\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagecaption/imagecaptionediting\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport { isImage } from '../image/utils';\nimport {\n    captionElementCreator,\n    getCaptionFromImage,\n    matchImageCaption\n} from './utils';\n/**\n * The image caption engine plugin.\n *\n * It registers proper converters. It takes care of adding a caption element if the image without it is inserted\n * to the model document.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageCaptionEditing extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const view = editor.editing.view;\n        const schema = editor.model.schema;\n        const data = editor.data;\n        const editing = editor.editing;\n        const t = editor.t;\n        /**\n\t\t * The last selected caption editable.\n\t\t * It is used for hiding the editable when it is empty and the image widget is no longer selected.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/editableelement~EditableElement} #_lastSelectedCaption\n\t\t */\n        // Schema configuration.\n        schema.register('caption', {\n            allowIn: 'image',\n            allowContentOf: '$block',\n            isLimit: true\n        });\n        // Add caption element to each image inserted without it.\n        editor.model.document.registerPostFixer(writer => this._insertMissingModelCaptionElement(writer));\n        // View to model converter for the data pipeline.\n        editor.conversion.for('upcast').elementToElement({\n            view: matchImageCaption,\n            model: 'caption'\n        });\n        // Model to view converter for the data pipeline.\n        const createCaptionForData = writer => writer.createContainerElement('figcaption');\n        data.downcastDispatcher.on('insert:caption', captionModelToView(createCaptionForData, false));\n        // Model to view converter for the editing pipeline.\n        const createCaptionForEditing = captionElementCreator(view, t('Enter image caption'));\n        editing.downcastDispatcher.on('insert:caption', captionModelToView(createCaptionForEditing));\n        // Always show caption in view when something is inserted in model.\n        editing.downcastDispatcher.on('insert', this._fixCaptionVisibility(data => data.item), { priority: 'high' });\n        // Hide caption when everything is removed from it.\n        editing.downcastDispatcher.on('remove', this._fixCaptionVisibility(data => data.position.parent), { priority: 'high' });\n        // Update caption visibility on view in post fixer.\n        view.document.registerPostFixer(writer => this._updateCaptionVisibility(writer));\n    }\n    /**\n\t * Updates the view before each rendering, making sure that empty captions (so unnecessary ones) are hidden\n\t * and then visible when the image is selected.\n\t *\n\t * @private\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} viewWriter\n\t * @returns {Boolean} Returns `true` when the view is updated.\n\t */\n    _updateCaptionVisibility(viewWriter) {\n        const mapper = this.editor.editing.mapper;\n        const lastCaption = this._lastSelectedCaption;\n        let viewCaption;\n        // If whole image is selected.\n        const modelSelection = this.editor.model.document.selection;\n        const selectedElement = modelSelection.getSelectedElement();\n        if (selectedElement && selectedElement.is('image')) {\n            const modelCaption = getCaptionFromImage(selectedElement);\n            viewCaption = mapper.toViewElement(modelCaption);\n        }\n        // If selection is placed inside caption.\n        const position = modelSelection.getFirstPosition();\n        const modelCaption = getParentCaption(position.parent);\n        if (modelCaption) {\n            viewCaption = mapper.toViewElement(modelCaption);\n        }\n        // Is currently any caption selected?\n        if (viewCaption) {\n            // Was any caption selected before?\n            if (lastCaption) {\n                // Same caption as before?\n                if (lastCaption === viewCaption) {\n                    return showCaption(viewCaption, viewWriter);\n                } else {\n                    hideCaptionIfEmpty(lastCaption, viewWriter);\n                    this._lastSelectedCaption = viewCaption;\n                    return showCaption(viewCaption, viewWriter);\n                }\n            } else {\n                this._lastSelectedCaption = viewCaption;\n                return showCaption(viewCaption, viewWriter);\n            }\n        } else {\n            // Was any caption selected before?\n            if (lastCaption) {\n                const viewModified = hideCaptionIfEmpty(lastCaption, viewWriter);\n                this._lastSelectedCaption = null;\n                return viewModified;\n            } else {\n                return false;\n            }\n        }\n    }\n    /**\n\t * Returns a converter that fixes caption visibility during the model-to-view conversion.\n\t * Checks if the changed node is placed inside the caption element and fixes its visibility in the view.\n\t *\n\t * @private\n\t * @param {Function} nodeFinder\n\t * @returns {Function}\n\t */\n    _fixCaptionVisibility(nodeFinder) {\n        return (evt, data, conversionApi) => {\n            const node = nodeFinder(data);\n            const modelCaption = getParentCaption(node);\n            const mapper = this.editor.editing.mapper;\n            const viewWriter = conversionApi.writer;\n            if (modelCaption) {\n                const viewCaption = mapper.toViewElement(modelCaption);\n                if (viewCaption) {\n                    if (modelCaption.childCount) {\n                        viewWriter.removeClass('ck-hidden', viewCaption);\n                    } else {\n                        viewWriter.addClass('ck-hidden', viewCaption);\n                    }\n                }\n            }\n        };\n    }\n    /**\n\t * Checks whether the data inserted to the model document have an image element that has no caption element inside it.\n\t * If there is none, it adds it to the image element.\n\t *\n\t * @private\n\t * @param {module:engine/model/writer~Writer} writer The writer to make changes with.\n\t * @returns {Boolean} `true` if any change was applied, `false` otherwise.\n\t */\n    _insertMissingModelCaptionElement(writer) {\n        const model = this.editor.model;\n        const changes = model.document.differ.getChanges();\n        const imagesWithoutCaption = [];\n        for (const entry of changes) {\n            if (entry.type == 'insert' && entry.name != '$text') {\n                const item = entry.position.nodeAfter;\n                if (item.is('image') && !getCaptionFromImage(item)) {\n                    imagesWithoutCaption.push(item);\n                }\n                // Check elements with children for nested images.\n                if (!item.is('image') && item.childCount) {\n                    for (const nestedItem of model.createRangeIn(item).getItems()) {\n                        if (nestedItem.is('image') && !getCaptionFromImage(nestedItem)) {\n                            imagesWithoutCaption.push(nestedItem);\n                        }\n                    }\n                }\n            }\n        }\n        for (const image of imagesWithoutCaption) {\n            writer.appendElement('caption', image);\n        }\n        return !!imagesWithoutCaption.length;\n    }\n}\n// Creates a converter that converts image caption model element to view element.\n//\n// @private\n// @param {Function} elementCreator\n// @param {Boolean} [hide=true] When set to `false` view element will not be inserted when it's empty.\n// @returns {Function}\nfunction captionModelToView(elementCreator, hide = true) {\n    return (evt, data, conversionApi) => {\n        const captionElement = data.item;\n        // Return if element shouldn't be present when empty.\n        if (!captionElement.childCount && !hide) {\n            return;\n        }\n        if (isImage(captionElement.parent)) {\n            if (!conversionApi.consumable.consume(data.item, 'insert')) {\n                return;\n            }\n            const viewImage = conversionApi.mapper.toViewElement(data.range.start.parent);\n            const viewCaption = elementCreator(conversionApi.writer);\n            const viewWriter = conversionApi.writer;\n            // Hide if empty.\n            if (!captionElement.childCount) {\n                viewWriter.addClass('ck-hidden', viewCaption);\n            }\n            insertViewCaptionAndBind(viewCaption, data.item, viewImage, conversionApi);\n        }\n    };\n}\n// Inserts `viewCaption` at the end of `viewImage` and binds it to `modelCaption`.\n//\n// @private\n// @param {module:engine/view/containerelement~ContainerElement} viewCaption\n// @param {module:engine/model/element~Element} modelCaption\n// @param {module:engine/view/containerelement~ContainerElement} viewImage\n// @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\nfunction insertViewCaptionAndBind(viewCaption, modelCaption, viewImage, conversionApi) {\n    const viewPosition = conversionApi.writer.createPositionAt(viewImage, 'end');\n    conversionApi.writer.insert(viewPosition, viewCaption);\n    conversionApi.mapper.bindElements(modelCaption, viewCaption);\n}\n// Checks if the provided node or one of its ancestors is a caption element, and returns it.\n//\n// @private\n// @param {module:engine/model/node~Node} node\n// @returns {module:engine/model/element~Element|null}\nfunction getParentCaption(node) {\n    const ancestors = node.getAncestors({ includeSelf: true });\n    const caption = ancestors.find(ancestor => ancestor.name == 'caption');\n    if (caption && caption.parent && caption.parent.name == 'image') {\n        return caption;\n    }\n    return null;\n}\n// Hides a given caption in the view if it is empty.\n//\n// @private\n// @param {module:engine/view/containerelement~ContainerElement} caption\n// @param {module:engine/view/downcastwriter~DowncastWriter} viewWriter\n// @returns {Boolean} Returns `true` if the view was modified.\nfunction hideCaptionIfEmpty(caption, viewWriter) {\n    if (!caption.childCount && !caption.hasClass('ck-hidden')) {\n        viewWriter.addClass('ck-hidden', caption);\n        return true;\n    }\n    return false;\n}\n// Shows the caption.\n//\n// @private\n// @param {module:engine/view/containerelement~ContainerElement} caption\n// @param {module:engine/view/downcastwriter~DowncastWriter} viewWriter\n// @returns {Boolean} Returns `true` if the view was modified.\nfunction showCaption(caption, viewWriter) {\n    if (caption.hasClass('ck-hidden')) {\n        viewWriter.removeClass('ck-hidden', caption);\n        return true;\n    }\n    return false;\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagecaption\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ImageCaptionEditing from './imagecaption/imagecaptionediting';\n\nimport '../theme/imagecaption.css';\n\n/**\n * The image caption plugin.\n *\n * For a detailed overview, check the {@glink features/image#image-captions image caption} documentation.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageCaption extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ImageCaptionEditing ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageCaption';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module autoformat/blockautoformatediting\n */\n\nimport LiveRange from '@ckeditor/ckeditor5-engine/src/model/liverange';\n\n/**\n * The block autoformatting engine. It allows to format various block patterns. For example,\n * it can be configured to turn a paragraph starting with `*` and followed by a space into a list item.\n *\n * The autoformatting operation is integrated with the undo manager,\n * so the autoformatting step can be undone if the user's intention was not to format the text.\n *\n * See the constructors documentation to learn how to create custom inline autoformatters. You can also use\n * the {@link module:autoformat/autoformat~Autoformat} feature which enables a set of default autoformatters\n * (lists, headings, bold and italic).\n */\nexport default class BlockAutoformatEditing {\n\t/**\n\t * Creates a listener triggered on `change` event in the document.\n\t * Calls the callback when inserted text matches the regular expression or the command name\n\t * if provided instead of the callback.\n\t *\n\t * Examples of usage:\n\t *\n\t * To convert a paragraph to heading 1 when `- ` is typed, using just the command name:\n\t *\n\t *\t\tnew BlockAutoformatEditing( editor, /^\\- $/, 'heading1' );\n\t *\n\t * To convert a paragraph to heading 1 when `- ` is typed, using just the callback:\n\t *\n\t *\t\tnew BlockAutoformatEditing( editor, /^\\- $/, ( context ) => {\n\t *\t\t\tconst { match } = context;\n\t *\t\t\tconst headingLevel = match[ 1 ].length;\n\t *\n\t *\t\t\teditor.execute( 'heading', {\n\t *\t\t\t\tformatId: `heading${ headingLevel }`\n\t *\t\t\t} );\n\t * \t\t} );\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t * @param {RegExp} pattern The regular expression to execute on just inserted text.\n\t * @param {Function|String} callbackOrCommand The callback to execute or the command to run when the text is matched.\n\t * In case of providing the callback, it receives the following parameter:\n\t * * {Object} match RegExp.exec() result of matching the pattern to inserted text.\n\t */\n\tconstructor( editor, pattern, callbackOrCommand ) {\n\t\tlet callback;\n\t\tlet command = null;\n\n\t\tif ( typeof callbackOrCommand == 'function' ) {\n\t\t\tcallback = callbackOrCommand;\n\t\t} else {\n\t\t\t// We assume that the actual command name was provided.\n\t\t\tcommand = editor.commands.get( callbackOrCommand );\n\n\t\t\tcallback = () => {\n\t\t\t\teditor.execute( callbackOrCommand );\n\t\t\t};\n\t\t}\n\n\t\teditor.model.document.on( 'change', ( evt, batch ) => {\n\t\t\tif ( command && !command.isEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( batch.type == 'transparent' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst changes = Array.from( editor.model.document.differ.getChanges() );\n\t\t\tconst entry = changes[ 0 ];\n\n\t\t\t// Typing is represented by only a single change.\n\t\t\tif ( changes.length != 1 || entry.type !== 'insert' || entry.name != '$text' || entry.length != 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst item = entry.position.textNode || entry.position.nodeAfter;\n\n\t\t\tif ( !item.parent.is( 'paragraph' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst match = pattern.exec( item.data );\n\n\t\t\tif ( !match ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Use enqueueChange to create new batch to separate typing batch from the auto-format changes.\n\t\t\teditor.model.enqueueChange( writer => {\n\t\t\t\t// Matched range.\n\t\t\t\tconst start = writer.createPositionAt( item.parent, 0 );\n\t\t\t\tconst end = writer.createPositionAt( item.parent, match[ 0 ].length );\n\t\t\t\tconst range = new LiveRange( start, end );\n\n\t\t\t\tconst wasChanged = callback( { match } );\n\n\t\t\t\t// Remove matched text.\n\t\t\t\tif ( wasChanged !== false ) {\n\t\t\t\t\twriter.remove( range );\n\t\t\t\t}\n\n\t\t\t\trange.detach();\n\t\t\t} );\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module autoformat/inlineautoformatediting\n */\n\n/**\n * The inline autoformatting engine. It allows to format various inline patterns. For example,\n * it can be configured to make \"foo\" bold when typed `**foo**` (the `**` markers will be removed).\n *\n * The autoformatting operation is integrated with the undo manager,\n * so the autoformatting step can be undone if the user's intention was not to format the text.\n *\n * See the constructors documentation to learn how to create custom inline autoformatters. You can also use\n * the {@link module:autoformat/autoformat~Autoformat} feature which enables a set of default autoformatters\n * (lists, headings, bold and italic).\n */\nexport default class InlineAutoformatEditing {\n\t/**\n\t * Enables autoformatting mechanism for a given {@link module:core/editor/editor~Editor}.\n\t *\n\t * It formats the matched text by applying the given model attribute or by running the provided formatting callback.\n\t * On every change applied to the model the autoformatting engine checks the text on the left of the selection\n\t * and executes the provided action if the text matches given criteria (regular expression or callback).\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t * @param {Function|RegExp} testRegexpOrCallback The regular expression or callback to execute on text.\n\t * Provided regular expression *must* have three capture groups. The first and the third capture group\n\t * should match opening and closing delimiters. The second capture group should match the text to format.\n\t *\n\t *\t\t// Matches the `**bold text**` pattern.\n\t *\t\t// There are three capturing groups:\n\t *\t\t// - The first to match the starting `**` delimiter.\n\t *\t\t// - The second to match the text to format.\n\t *\t\t// - The third to match the ending `**` delimiter.\n\t *\t\tnew InlineAutoformatEditing( editor, /(\\*\\*)([^\\*]+?)(\\*\\*)$/g, 'bold' );\n\t *\n\t * When a function is provided instead of the regular expression, it will be executed with the text to match as a parameter.\n\t * The function should return proper \"ranges\" to delete and format.\n\t *\n\t *\t\t{\n\t *\t\t\tremove: [\n\t *\t\t\t\t[ 0, 1 ],\t// Remove the first letter from the given text.\n\t *\t\t\t\t[ 5, 6 ]\t// Remove the 6th letter from the given text.\n\t *\t\t\t],\n\t *\t\t\tformat: [\n\t *\t\t\t\t[ 1, 5 ]\t// Format all letters from 2nd to 5th.\n\t *\t\t\t]\n\t *\t\t}\n\t *\n\t * @param {Function|String} attributeOrCallback The name of attribute to apply on matching text or a callback for manual\n\t * formatting. If callback is passed it should return `false` if changes should not be applied (e.g. if a command is disabled).\n\t *\n\t *\t\t// Use attribute name:\n\t *\t\tnew InlineAutoformatEditing( editor, /(\\*\\*)([^\\*]+?)(\\*\\*)$/g, 'bold' );\n\t *\n\t *\t\t// Use formatting callback:\n\t *\t\tnew InlineAutoformatEditing( editor, /(\\*\\*)([^\\*]+?)(\\*\\*)$/g, ( writer, rangesToFormat ) => {\n\t *\t\t\tconst command = editor.commands.get( 'bold' );\n\t *\n\t *\t\t\tif ( !command.isEnabled ) {\n\t *\t\t\t\treturn false;\n\t *\t\t\t}\n\t *\n\t *\t\t\tconst validRanges = editor.model.schema.getValidRanges( rangesToFormat, 'bold' );\n\t *\n\t *\t\t\tfor ( let range of validRanges ) {\n\t *\t\t\t\twriter.setAttribute( 'bold', true, range );\n\t *\t\t\t}\n\t *\t\t} );\n\t */\n\tconstructor( editor, testRegexpOrCallback, attributeOrCallback ) {\n\t\tlet regExp;\n\t\tlet attributeKey;\n\t\tlet testCallback;\n\t\tlet formatCallback;\n\n\t\tif ( testRegexpOrCallback instanceof RegExp ) {\n\t\t\tregExp = testRegexpOrCallback;\n\t\t} else {\n\t\t\ttestCallback = testRegexpOrCallback;\n\t\t}\n\n\t\tif ( typeof attributeOrCallback == 'string' ) {\n\t\t\tattributeKey = attributeOrCallback;\n\t\t} else {\n\t\t\tformatCallback = attributeOrCallback;\n\t\t}\n\n\t\t// A test callback run on changed text.\n\t\ttestCallback = testCallback || ( text => {\n\t\t\tlet result;\n\t\t\tconst remove = [];\n\t\t\tconst format = [];\n\n\t\t\twhile ( ( result = regExp.exec( text ) ) !== null ) {\n\t\t\t\t// There should be full match and 3 capture groups.\n\t\t\t\tif ( result && result.length < 4 ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tlet {\n\t\t\t\t\tindex,\n\t\t\t\t\t'1': leftDel,\n\t\t\t\t\t'2': content,\n\t\t\t\t\t'3': rightDel\n\t\t\t\t} = result;\n\n\t\t\t\t// Real matched string - there might be some non-capturing groups so we need to recalculate starting index.\n\t\t\t\tconst found = leftDel + content + rightDel;\n\t\t\t\tindex += result[ 0 ].length - found.length;\n\n\t\t\t\t// Start and End offsets of delimiters to remove.\n\t\t\t\tconst delStart = [\n\t\t\t\t\tindex,\n\t\t\t\t\tindex + leftDel.length\n\t\t\t\t];\n\t\t\t\tconst delEnd = [\n\t\t\t\t\tindex + leftDel.length + content.length,\n\t\t\t\t\tindex + leftDel.length + content.length + rightDel.length\n\t\t\t\t];\n\n\t\t\t\tremove.push( delStart );\n\t\t\t\tremove.push( delEnd );\n\n\t\t\t\tformat.push( [ index + leftDel.length, index + leftDel.length + content.length ] );\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tremove,\n\t\t\t\tformat\n\t\t\t};\n\t\t} );\n\n\t\t// A format callback run on matched text.\n\t\tformatCallback = formatCallback || ( ( writer, rangesToFormat ) => {\n\t\t\tconst validRanges = editor.model.schema.getValidRanges( rangesToFormat, attributeKey );\n\n\t\t\tfor ( const range of validRanges ) {\n\t\t\t\twriter.setAttribute( attributeKey, true, range );\n\t\t\t}\n\n\t\t\t// After applying attribute to the text, remove given attribute from the selection.\n\t\t\t// This way user is able to type a text without attribute used by auto formatter.\n\t\t\twriter.removeSelectionAttribute( attributeKey );\n\t\t} );\n\n\t\teditor.model.document.on( 'change', ( evt, batch ) => {\n\t\t\tif ( batch.type == 'transparent' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selection = editor.model.document.selection;\n\n\t\t\t// Do nothing if selection is not collapsed.\n\t\t\tif ( !selection.isCollapsed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst changes = Array.from( editor.model.document.differ.getChanges() );\n\t\t\tconst entry = changes[ 0 ];\n\n\t\t\t// Typing is represented by only a single change.\n\t\t\tif ( changes.length != 1 || entry.type !== 'insert' || entry.name != '$text' || entry.length != 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst block = selection.focus.parent;\n\t\t\tconst text = getText( block ).slice( 0, selection.focus.offset );\n\t\t\tconst testOutput = testCallback( text );\n\t\t\tconst rangesToFormat = testOutputToRanges( block, testOutput.format, editor.model );\n\t\t\tconst rangesToRemove = testOutputToRanges( block, testOutput.remove, editor.model );\n\n\t\t\tif ( !( rangesToFormat.length && rangesToRemove.length ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Use enqueueChange to create new batch to separate typing batch from the auto-format changes.\n\t\t\teditor.model.enqueueChange( writer => {\n\t\t\t\t// Apply format.\n\t\t\t\tconst hasChanged = formatCallback( writer, rangesToFormat );\n\n\t\t\t\t// Strict check on `false` to have backward compatibility (when callbacks were returning `undefined`).\n\t\t\t\tif ( hasChanged === false ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Remove delimiters - use reversed order to not mix the offsets while removing.\n\t\t\t\tfor ( const range of rangesToRemove.reverse() ) {\n\t\t\t\t\twriter.remove( range );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n}\n\n// Returns whole text from parent element by adding all data from text nodes together.\n//\n// @private\n// @param {module:engine/model/element~Element} element\n// @returns {String}\nfunction getText( element ) {\n\treturn Array.from( element.getChildren() ).reduce( ( a, b ) => a + b.data, '' );\n}\n\n// Converts output of the test function provided to the InlineAutoformatEditing and converts it to the model ranges\n// inside provided block.\n//\n// @private\n// @param {module:engine/model/element~Element} block\n// @param {Array.<Array>} arrays\n// @param {module:engine/model/model~Model} model\nfunction testOutputToRanges( block, arrays, model ) {\n\treturn arrays\n\t\t.filter( array => ( array[ 0 ] !== undefined && array[ 1 ] !== undefined ) )\n\t\t.map( array => {\n\t\t\treturn model.createRange( model.createPositionAt( block, array[ 0 ] ), model.createPositionAt( block, array[ 1 ] ) );\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module autoformat/autoformat\n */\n\nimport BlockAutoformatEditing from './blockautoformatediting';\nimport InlineAutoformatEditing from './inlineautoformatediting';\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\n/**\n * Enables a set of predefined autoformatting actions.\n *\n * For a detailed overview, check the {@glink features/autoformat Autoformatting feature documentation}\n * and the {@glink api/autoformat package page}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Autoformat extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Autoformat';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\tthis._addListAutoformats();\n\t\tthis._addBasicStylesAutoformats();\n\t\tthis._addHeadingAutoformats();\n\t\tthis._addBlockQuoteAutoformats();\n\t}\n\n\t/**\n\t * Adds autoformatting related to the {@link module:list/list~List}.\n\t *\n\t * When typed:\n\t * - `* ` or `- ` &ndash; A paragraph will be changed to a bulleted list.\n\t * - `1. ` or `1) ` &ndash; A paragraph will be changed to a numbered list (\"1\" can be any digit or a list of digits).\n\t *\n\t * @private\n\t */\n\t_addListAutoformats() {\n\t\tconst commands = this.editor.commands;\n\n\t\tif ( commands.get( 'bulletedList' ) ) {\n\t\t\t// eslint-disable-next-line no-new\n\t\t\tnew BlockAutoformatEditing( this.editor, /^[*-]\\s$/, 'bulletedList' );\n\t\t}\n\n\t\tif ( commands.get( 'numberedList' ) ) {\n\t\t\t// eslint-disable-next-line no-new\n\t\t\tnew BlockAutoformatEditing( this.editor, /^1[.|)]\\s$/, 'numberedList' );\n\t\t}\n\t}\n\n\t/**\n\t * Adds autoformatting related to the {@link module:basic-styles/bold~Bold},\n\t * {@link module:basic-styles/italic~Italic} and {@link module:basic-styles/code~Code}.\n\t *\n\t * When typed:\n\t * - `**foobar**` &ndash; `**` characters are removed and `foobar` is set to bold,\n\t * - `__foobar__` &ndash; `__` characters are removed and `foobar` is set to bold,\n\t * - `*foobar*` &ndash; `*` characters are removed and `foobar` is set to italic,\n\t * - `_foobar_` &ndash; `_` characters are removed and `foobar` is set to italic,\n\t * - ``` `foobar` &ndash; ``` ` ``` characters are removed and `foobar` is set to code.\n\t *\n\t * @private\n\t */\n\t_addBasicStylesAutoformats() {\n\t\tconst commands = this.editor.commands;\n\n\t\tif ( commands.get( 'bold' ) ) {\n\t\t\t/* eslint-disable no-new */\n\t\t\tconst boldCallback = getCallbackFunctionForInlineAutoformat( this.editor, 'bold' );\n\n\t\t\tnew InlineAutoformatEditing( this.editor, /(\\*\\*)([^*]+)(\\*\\*)$/g, boldCallback );\n\t\t\tnew InlineAutoformatEditing( this.editor, /(__)([^_]+)(__)$/g, boldCallback );\n\t\t\t/* eslint-enable no-new */\n\t\t}\n\n\t\tif ( commands.get( 'italic' ) ) {\n\t\t\t/* eslint-disable no-new */\n\t\t\tconst italicCallback = getCallbackFunctionForInlineAutoformat( this.editor, 'italic' );\n\n\t\t\t// The italic autoformatter cannot be triggered by the bold markers, so we need to check the\n\t\t\t// text before the pattern (e.g. `(?:^|[^\\*])`).\n\t\t\tnew InlineAutoformatEditing( this.editor, /(?:^|[^*])(\\*)([^*_]+)(\\*)$/g, italicCallback );\n\t\t\tnew InlineAutoformatEditing( this.editor, /(?:^|[^_])(_)([^_]+)(_)$/g, italicCallback );\n\t\t\t/* eslint-enable no-new */\n\t\t}\n\n\t\tif ( commands.get( 'code' ) ) {\n\t\t\t/* eslint-disable no-new */\n\t\t\tconst codeCallback = getCallbackFunctionForInlineAutoformat( this.editor, 'code' );\n\n\t\t\tnew InlineAutoformatEditing( this.editor, /(`)([^`]+)(`)$/g, codeCallback );\n\t\t\t/* eslint-enable no-new */\n\t\t}\n\t}\n\n\t/**\n\t * Adds autoformatting related to {@link module:heading/heading~Heading}.\n\t *\n\t * It is using a number at the end of the command name to associate it with the proper trigger:\n\t *\n\t * * `heading` with value `heading1` will be executed when typing `#`,\n\t * * `heading` with value `heading2` will be executed when typing `##`,\n\t * * ... up to `heading6` and `######`.\n\t *\n\t * @private\n\t */\n\t_addHeadingAutoformats() {\n\t\tconst command = this.editor.commands.get( 'heading' );\n\n\t\tif ( command ) {\n\t\t\tcommand.modelElements\n\t\t\t\t.filter( name => name.match( /^heading[1-6]$/ ) )\n\t\t\t\t.forEach( commandValue => {\n\t\t\t\t\tconst level = commandValue[ 7 ];\n\t\t\t\t\tconst pattern = new RegExp( `^(#{${ level }})\\\\s$` );\n\n\t\t\t\t\t// eslint-disable-next-line no-new\n\t\t\t\t\tnew BlockAutoformatEditing( this.editor, pattern, () => {\n\t\t\t\t\t\tif ( !command.isEnabled ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.editor.execute( 'heading', { value: commandValue } );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Adds autoformatting related to {@link module:block-quote/blockquote~BlockQuote}.\n\t *\n\t * When typed:\n\t * * `> ` &ndash; A paragraph will be changed to a block quote.\n\t *\n\t * @private\n\t */\n\t_addBlockQuoteAutoformats() {\n\t\tif ( this.editor.commands.get( 'blockQuote' ) ) {\n\t\t\t// eslint-disable-next-line no-new\n\t\t\tnew BlockAutoformatEditing( this.editor, /^>\\s$/, 'blockQuote' );\n\t\t}\n\t}\n}\n\n// Helper function for getting `InlineAutoformatEditing` callbacks that checks if command is enabled.\n//\n// @param {module:core/editor/editor~Editor} editor\n// @param {String} attributeKey\n// @returns {Function}\nfunction getCallbackFunctionForInlineAutoformat( editor, attributeKey ) {\n\treturn ( writer, rangesToFormat ) => {\n\t\tconst command = editor.commands.get( attributeKey );\n\n\t\tif ( !command.isEnabled ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst validRanges = editor.model.schema.getValidRanges( rangesToFormat, attributeKey );\n\n\t\tfor ( const range of validRanges ) {\n\t\t\twriter.setAttribute( attributeKey, true, range );\n\t\t}\n\n\t\t// After applying attribute to the text, remove given attribute from the selection.\n\t\t// This way user is able to type a text without attribute used by auto formatter.\n\t\twriter.removeSelectionAttribute( attributeKey );\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n// The editor creator to use.\nimport ClassicEditorBase from '@ckeditor/ckeditor5-editor-classic/src/classiceditor';\n\nimport Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';\nimport UploadAdapter from '@ckeditor/ckeditor5-adapter-ckfinder/src/uploadadapter';\nimport Autoformat from '@ckeditor/ckeditor5-autoformat/src/autoformat';\nimport Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';\nimport Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';\nimport BlockQuote from '@ckeditor/ckeditor5-block-quote/src/blockquote';\nimport CKFinder from '@ckeditor/ckeditor5-ckfinder/src/ckfinder';\nimport EasyImage from '@ckeditor/ckeditor5-easy-image/src/easyimage';\nimport Heading from '@ckeditor/ckeditor5-heading/src/heading';\nimport Image from '@ckeditor/ckeditor5-image/src/image';\nimport ImageCaption from '@ckeditor/ckeditor5-image/src/imagecaption';\nimport ImageStyle from '@ckeditor/ckeditor5-image/src/imagestyle';\nimport ImageToolbar from '@ckeditor/ckeditor5-image/src/imagetoolbar';\nimport ImageUpload from '@ckeditor/ckeditor5-image/src/imageupload';\nimport Link from '@ckeditor/ckeditor5-link/src/link';\nimport List from '@ckeditor/ckeditor5-list/src/list';\nimport MediaEmbed from '@ckeditor/ckeditor5-media-embed/src/mediaembed';\nimport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\nimport PasteFromOffice from '@ckeditor/ckeditor5-paste-from-office/src/pastefromoffice';\nimport Table from '@ckeditor/ckeditor5-table/src/table';\nimport TableToolbar from '@ckeditor/ckeditor5-table/src/tabletoolbar';\n\nexport default class ClassicEditor extends ClassicEditorBase {}\n\n// Plugins to include in the build.\nClassicEditor.builtinPlugins = [\n\tEssentials,\n\tUploadAdapter,\n\tAutoformat,\n\tBold,\n\tItalic,\n\tBlockQuote,\n\tCKFinder,\n\tEasyImage,\n\tHeading,\n\tImage,\n\tImageCaption,\n\tImageStyle,\n\tImageToolbar,\n\tImageUpload,\n\tLink,\n\tList,\n\tMediaEmbed,\n\tParagraph,\n\tPasteFromOffice,\n\tTable,\n\tTableToolbar\n];\n\n// Editor configuration.\nClassicEditor.defaultConfig = {\n\ttoolbar: {\n\t\titems: [\n\t\t\t'heading',\n\t\t\t'|',\n\t\t\t'bold',\n\t\t\t'italic',\n\t\t\t'link',\n\t\t\t'bulletedList',\n\t\t\t'numberedList',\n\t\t\t'imageUpload',\n\t\t\t'blockQuote',\n\t\t\t'insertTable',\n\t\t\t'mediaEmbed',\n\t\t\t'undo',\n\t\t\t'redo'\n\t\t]\n\t},\n\timage: {\n\t\ttoolbar: [\n\t\t\t'imageStyle:full',\n\t\t\t'imageStyle:side',\n\t\t\t'|',\n\t\t\t'imageTextAlternative'\n\t\t]\n\t},\n\ttable: {\n\t\tcontentToolbar: [\n\t\t\t'tableColumn',\n\t\t\t'tableRow',\n\t\t\t'mergeTableCells'\n\t\t]\n\t},\n\t// This value must be kept in sync with the language defined in webpack.config.js.\n\tlanguage: 'en'\n};\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/elementreplacer\n */\n\n/**\n * Utility class allowing to hide existing HTML elements or replace them with given ones in a way that doesn't remove\n * the original elements from the DOM.\n */\nexport default class ElementReplacer {\n\tconstructor() {\n\t\t/**\n\t\t * The elements replaced by {@link #replace} and their replacements.\n\t\t *\n\t\t * @private\n\t\t * @member {Array.<Object>}\n\t\t */\n\t\tthis._replacedElements = [];\n\t}\n\n\t/**\n\t * Hides the `element` and, if specified, inserts the the given element next to it.\n\t *\n\t * The effect of this method can be reverted by {@link #restore}.\n\t *\n\t * @param {HTMLElement} element The element to replace.\n\t * @param {HTMLElement} [newElement] The replacement element. If not passed, then the `element` will just be hidden.\n\t */\n\treplace( element, newElement ) {\n\t\tthis._replacedElements.push( { element, newElement } );\n\n\t\telement.style.display = 'none';\n\n\t\tif ( newElement ) {\n\t\t\telement.parentNode.insertBefore( newElement, element.nextSibling );\n\t\t}\n\t}\n\n\t/**\n\t * Restores what {@link #replace} did.\n\t */\n\trestore() {\n\t\tthis._replacedElements.forEach( ( { element, newElement } ) => {\n\t\t\telement.style.display = '';\n\n\t\t\tif ( newElement ) {\n\t\t\t\tnewElement.remove();\n\t\t\t}\n\t\t} );\n\n\t\tthis._replacedElements = [];\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module paste-from-office/filters/space\n */\n\n/**\n * Replaces last space preceding elements closing tag with `&nbsp;`. Such operation prevents spaces from being removed\n * during further DOM/View processing (see especially {@link module:engine/view/domconverter~DomConverter#_processDataFromDomText}).\n * This method also takes into account Word specific `<o:p></o:p>` empty tags.\n * Additionally multiline sequences of spaces and new lines between tags are removed (see #39 and #40).\n *\n * @param {String} htmlString HTML string in which spacing should be normalized.\n * @returns {String} Input HTML with spaces normalized.\n */\nexport function normalizeSpacing( htmlString ) {\n\t// Run normalizeSafariSpaceSpans() two times to cover nested spans.\n\treturn normalizeSafariSpaceSpans( normalizeSafariSpaceSpans( htmlString ) )\n\t\t// Remove all \\r\\n from \"spacerun spans\" so the last replace line doesn't strip all whitespaces.\n\t\t.replace( /(<span style=['\"]mso-spacerun:yes['\"]>[\\s]*?)[\\r\\n]+(\\s*<\\/span>)/g, '$1$2' )\n\t\t.replace( /<span style=['\"]mso-spacerun:yes['\"]><\\/span>/g, '' )\n\t\t.replace( / <\\//g, '\\u00A0</' )\n\t\t.replace( / <o:p><\\/o:p>/g, '\\u00A0<o:p></o:p>' )\n\t\t// Remove all whitespaces when they contain any \\r or \\n.\n\t\t.replace( />(\\s*[\\r\\n]\\s*)</g, '><' );\n}\n\n/**\n * Normalizes spacing in special Word `spacerun spans` (`<span style='mso-spacerun:yes'>\\s+</span>`) by replacing\n * all spaces with `&nbsp; ` pairs. This prevents spaces from being removed during further DOM/View processing\n * (see especially {@link module:engine/view/domconverter~DomConverter#_processDataFromDomText}).\n *\n * @param {Document} htmlDocument Native `Document` object in which spacing should be normalized.\n */\nexport function normalizeSpacerunSpans( htmlDocument ) {\n\thtmlDocument.querySelectorAll( 'span[style*=spacerun]' ).forEach( el => {\n\t\t// Use `el.childNodes[ 0 ].data.length` instead of `el.innerText.length`. For `el.innerText.length` which\n\t\t// contains spaces mixed with `&nbsp;` Edge browser returns incorrect length.\n\t\tconst innerTextLength = el.childNodes[ 0 ].data.length;\n\n\t\tel.innerHTML = Array( innerTextLength + 1 ).join( '\\u00A0 ' ).substr( 0, innerTextLength );\n\t} );\n}\n\n// Normalizes specific spacing generated by Safari when content pasted from Word (`<span class=\"Apple-converted-space\"> </span>`)\n// by replacing all spaces sequences longer than 1 space with `&nbsp; ` pairs. This prevents spaces from being removed during\n// further DOM/View processing (see especially {@link module:engine/view/domconverter~DomConverter#_processDataFromDomText}).\n//\n// This function is similar to {@link module:clipboard/utils/normalizeclipboarddata normalizeClipboardData util} but uses\n// regular spaces / &nbsp; sequence for replacement.\n//\n// @param {String} htmlString HTML string in which spacing should be normalized\n// @returns {String} Input HTML with spaces normalized.\nfunction normalizeSafariSpaceSpans( htmlString ) {\n\treturn htmlString.replace( /<span(?: class=\"Apple-converted-space\"|)>(\\s+)<\\/span>/g, ( fullMatch, spaces ) => {\n\t\treturn spaces.length === 1 ? ' ' : Array( spaces.length + 1 ).join( '\\u00A0 ' ).substr( 0, spaces.length );\n\t} );\n}\n\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module paste-from-office/filters/parse\n */\n\n/* globals DOMParser */\n\nimport DomConverter from '@ckeditor/ckeditor5-engine/src/view/domconverter';\nimport { NBSP_FILLER } from '@ckeditor/ckeditor5-engine/src/view/filler';\n\nimport { normalizeSpacing, normalizeSpacerunSpans } from './space';\n\n/**\n * Parses provided HTML extracting contents of `<body>` and `<style>` tags.\n *\n * @param {String} htmlString HTML string to be parsed.\n * @returns {Object} result\n * @returns {module:engine/view/documentfragment~DocumentFragment} result.body Parsed body\n * content as a traversable structure.\n * @returns {String} result.bodyString Entire body content as a string.\n * @returns {Array.<CSSStyleSheet>} result.styles Array of native `CSSStyleSheet` objects, each representing\n * separate `style` tag from the source HTML.\n * @returns {String} result.stylesString All `style` tags contents combined in the order of occurrence into one string.\n */\nexport function parseHtml( htmlString ) {\n\tconst domParser = new DOMParser();\n\n\t// Remove Word specific \"if comments\" so content inside is not omitted by the parser.\n\thtmlString = htmlString.replace( /<!--\\[if gte vml 1]>/g, '' );\n\n\tconst normalizedHtml = normalizeSpacing( cleanContentAfterBody( htmlString ) );\n\n\t// Parse htmlString as native Document object.\n\tconst htmlDocument = domParser.parseFromString( normalizedHtml, 'text/html' );\n\n\tnormalizeSpacerunSpans( htmlDocument );\n\n\t// Get `innerHTML` first as transforming to View modifies the source document.\n\tconst bodyString = htmlDocument.body.innerHTML;\n\n\t// Transform document.body to View.\n\tconst bodyView = documentToView( htmlDocument );\n\n\t// Extract stylesheets.\n\tconst stylesObject = extractStyles( htmlDocument );\n\n\treturn {\n\t\tbody: bodyView,\n\t\tbodyString,\n\t\tstyles: stylesObject.styles,\n\t\tstylesString: stylesObject.stylesString\n\t};\n}\n\n// Transforms native `Document` object into {@link module:engine/view/documentfragment~DocumentFragment}.\n//\n// @param {Document} htmlDocument Native `Document` object to be transformed.\n// @returns {module:engine/view/documentfragment~DocumentFragment}\nfunction documentToView( htmlDocument ) {\n\tconst domConverter = new DomConverter( { blockFiller: NBSP_FILLER } );\n\tconst fragment = htmlDocument.createDocumentFragment();\n\tconst nodes = htmlDocument.body.childNodes;\n\n\twhile ( nodes.length > 0 ) {\n\t\tfragment.appendChild( nodes[ 0 ] );\n\t}\n\n\treturn domConverter.domToView( fragment );\n}\n\n// Extracts both `CSSStyleSheet` and string representation from all `style` elements available in a provided `htmlDocument`.\n//\n// @param {Document} htmlDocument Native `Document` object from which styles will be extracted.\n// @returns {Object} result\n// @returns {Array.<CSSStyleSheet>} result.styles Array of native `CSSStyleSheet` object, each representing\n// separate `style` tag from the source object.\n// @returns {String} result.stylesString All `style` tags contents combined in the order of occurrence as one string.\nfunction extractStyles( htmlDocument ) {\n\tconst styles = [];\n\tconst stylesString = [];\n\tconst styleTags = Array.from( htmlDocument.getElementsByTagName( 'style' ) );\n\n\tfor ( const style of styleTags ) {\n\t\tif ( style.sheet && style.sheet.cssRules && style.sheet.cssRules.length ) {\n\t\t\tstyles.push( style.sheet );\n\t\t\tstylesString.push( style.innerHTML );\n\t\t}\n\t}\n\n\treturn {\n\t\tstyles,\n\t\tstylesString: stylesString.join( ' ' )\n\t};\n}\n\n// Removes leftover content from between closing </body> and closing </html> tag:\n//\n// \t\t<html><body><p>Foo Bar</p></body><span>Fo</span></html> -> <html><body><p>Foo Bar</p></body></html>\n//\n// This function is used as specific browsers (Edge) add some random content after `body` tag when pasting from Word.\n// @param {String} htmlString The HTML string to be cleaned.\n// @returns {String} The HTML string with leftover content removed.\nfunction cleanContentAfterBody( htmlString ) {\n\tconst regexp = /<\\/body>(.*?)(<\\/html>|$)/;\n\tconst match = htmlString.match( regexp );\n\n\tif ( match && match[ 1 ] ) {\n\t\thtmlString = htmlString.slice( 0, match.index ) + htmlString.slice( match.index ).replace( match[ 1 ], '' );\n\t}\n\n\treturn htmlString;\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module paste-from-office/filters/list\n */\n\nimport Element from '@ckeditor/ckeditor5-engine/src/view/element';\nimport Matcher from '@ckeditor/ckeditor5-engine/src/view/matcher';\nimport UpcastWriter from '@ckeditor/ckeditor5-engine/src/view/upcastwriter';\n\n/**\n * Transforms Word specific list-like elements to the semantic HTML lists.\n *\n * Lists in Word are represented by block elements with special attributes like:\n *\n *\t\t<p class=MsoListParagraphCxSpFirst style='mso-list:l1 level1 lfo1'>...</p> // Paragraph based list.\n *\t\t<h1 style='mso-list:l0 level1 lfo1'>...</h1> // Heading 1 based list.\n *\n * @param {module:engine/view/documentfragment~DocumentFragment} documentFragment The view structure which to transform.\n * @param {String} stylesString Styles from which list-like elements styling will be extracted.\n */\nexport function transformListItemLikeElementsIntoLists( documentFragment, stylesString ) {\n\tif ( !documentFragment.childCount ) {\n\t\treturn;\n\t}\n\n\tconst writer = new UpcastWriter();\n\tconst itemLikeElements = findAllItemLikeElements( documentFragment, writer );\n\n\tif ( !itemLikeElements.length ) {\n\t\treturn;\n\t}\n\n\tlet currentList = null;\n\n\titemLikeElements.forEach( ( itemLikeElement, i ) => {\n\t\tif ( !currentList || isNewListNeeded( itemLikeElements[ i - 1 ], itemLikeElement ) ) {\n\t\t\tconst listStyle = detectListStyle( itemLikeElement, stylesString );\n\n\t\t\tcurrentList = insertNewEmptyList( listStyle, itemLikeElement.element, writer );\n\t\t}\n\n\t\tconst listItem = transformElementIntoListItem( itemLikeElement.element, writer );\n\n\t\twriter.appendChild( listItem, currentList );\n\t} );\n}\n\n// Finds all list-like elements in a given document fragment.\n//\n// @param {module:engine/view/documentfragment~DocumentFragment} documentFragment Document fragment\n// in which to look for list-like nodes.\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\n// @returns {Array.<Object>} Array of found list-like items. Each item is an object containing:\n//\n//\t\t* {module:engine/src/view/element~Element} element List-like element.\n//\t\t* {Number} id List item id parsed from `mso-list` style (see `getListItemData()` function).\n//\t\t* {Number} order List item creation order parsed from `mso-list` style (see `getListItemData()` function).\n//\t\t* {Number} indent List item indentation level parsed from `mso-list` style (see `getListItemData()` function).\nfunction findAllItemLikeElements( documentFragment, writer ) {\n\tconst range = writer.createRangeIn( documentFragment );\n\n\t// Matcher for finding list-like elements.\n\tconst itemLikeElementsMatcher = new Matcher( {\n\t\tname: /^p|h\\d+$/,\n\t\tstyles: {\n\t\t\t'mso-list': /.*/\n\t\t}\n\t} );\n\n\tconst itemLikeElements = [];\n\n\tfor ( const value of range ) {\n\t\tif ( value.type === 'elementStart' && itemLikeElementsMatcher.match( value.item ) ) {\n\t\t\tconst itemData = getListItemData( value.item );\n\n\t\t\titemLikeElements.push( {\n\t\t\t\telement: value.item,\n\t\t\t\tid: itemData.id,\n\t\t\t\torder: itemData.order,\n\t\t\t\tindent: itemData.indent\n\t\t\t} );\n\t\t}\n\t}\n\n\treturn itemLikeElements;\n}\n\n// Extracts list item style from the provided CSS.\n//\n// List item style is extracted from CSS stylesheet. Each list with its specific style attribute\n// value (`mso-list:l1 level1 lfo1`) has its dedicated properties in a CSS stylesheet defined with a selector like:\n//\n// \t\t@list l1:level1 { ... }\n//\n// It contains `mso-level-number-format` property which defines list numbering/bullet style. If this property\n// is not defined it means default `decimal` numbering.\n//\n// Here CSS string representation is used as `mso-level-number-format` property is an invalid CSS property\n// and will be removed during CSS parsing.\n//\n// @param {Object} listLikeItem List-like item for which list style will be searched for. Usually\n// a result of `findAllItemLikeElements()` function.\n// @param {String} stylesString CSS stylesheet.\n// @returns {Object} result\n// @returns {String} result.type List type, could be `ul` or `ol`.\n// @returns {String} result.style List style, for example: `decimal`, `lower-roman`, etc. It is extracted\n// directly from Word stylesheet without further processing and may be not compatible\n// with CSS `list-style-type` property accepted values.\nfunction detectListStyle( listLikeItem, stylesString ) {\n\tconst listStyleRegexp = new RegExp( `@list l${ listLikeItem.id }:level${ listLikeItem.indent }\\\\s*({[^}]*)`, 'gi' );\n\tconst listStyleTypeRegex = /mso-level-number-format:([^;]*);/gi;\n\n\tconst listStyleMatch = listStyleRegexp.exec( stylesString );\n\n\tlet listStyleType = 'decimal'; // Decimal is default one.\n\tif ( listStyleMatch && listStyleMatch[ 1 ] ) {\n\t\tconst listStyleTypeMatch = listStyleTypeRegex.exec( listStyleMatch[ 1 ] );\n\n\t\tif ( listStyleTypeMatch && listStyleTypeMatch[ 1 ] ) {\n\t\t\tlistStyleType = listStyleTypeMatch[ 1 ].trim();\n\t\t}\n\t}\n\n\treturn {\n\t\ttype: listStyleType !== 'bullet' && listStyleType !== 'image' ? 'ol' : 'ul',\n\t\tstyle: listStyleType\n\t};\n}\n\n// Creates empty list of a given type and inserts it after a specified element.\n//\n// @param {Object} listStyle List style object which determines the type of newly created list.\n// Usually a result of `detectListStyle()` function.\n// @param {module:engine/view/element~Element} element Element before which list is inserted.\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\n// @returns {module:engine/view/element~Element} Newly created list element.\nfunction insertNewEmptyList( listStyle, element, writer ) {\n\tconst list = new Element( listStyle.type );\n\tconst position = element.parent.getChildIndex( element );\n\n\twriter.insertChild( position, list, element.parent );\n\n\treturn list;\n}\n\n// Transforms given element into a semantic list item. As the function operates on a provided\n// {module:engine/src/view/element~Element element} it will modify the view structure to which this element belongs.\n//\n// @param {module:engine/view/element~Element} element Element which will be transformed into list item.\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\n// @returns {module:engine/view/element~Element} New element to which the given one was transformed. It is\n// inserted in place of the old element (the reference to the old element is lost due to renaming).\nfunction transformElementIntoListItem( element, writer ) {\n\tremoveBulletElement( element, writer );\n\n\treturn writer.rename( 'li', element );\n}\n\n// Extracts list item information from Word specific list-like element style:\n//\n//\t\t`style=\"mso-list:l1 level1 lfo1\"`\n//\n// where:\n//\n//\t\t* `l1` is a list id (however it does not mean this is a continuous list - see #43),\n//\t\t* `level1` is a list item indentation level,\n//\t\t* `lfo1` is a list insertion order in a document.\n//\n// @param {module:engine/view/element~Element} element Element from which style data is extracted.\n// @returns {Object} result\n// @returns {Number} result.id Parent list id.\n// @returns {Number} result.order List item creation order.\n// @returns {Number} result.indent List item indentation level.\nfunction getListItemData( element ) {\n\tconst data = {};\n\tconst listStyle = element.getStyle( 'mso-list' );\n\n\tif ( listStyle ) {\n\t\tdata.id = parseInt( listStyle.match( /(^|\\s+)l(\\d+)/i )[ 2 ] );\n\t\tdata.order = parseInt( listStyle.match( /\\s*lfo(\\d+)/i )[ 1 ] );\n\t\tdata.indent = parseInt( listStyle.match( /\\s*level(\\d+)/i )[ 1 ] );\n\t}\n\n\treturn data;\n}\n\n// Removes span with a numbering/bullet from a given element.\n//\n// @param {module:engine/view/element~Element} element\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\nfunction removeBulletElement( element, writer ) {\n\t// Matcher for finding `span` elements holding lists numbering/bullets.\n\tconst bulletMatcher = new Matcher( {\n\t\tname: 'span',\n\t\tstyles: {\n\t\t\t'mso-list': 'Ignore'\n\t\t}\n\t} );\n\n\tconst range = writer.createRangeIn( element );\n\n\tfor ( const value of range ) {\n\t\tif ( value.type === 'elementStart' && bulletMatcher.match( value.item ) ) {\n\t\t\twriter.remove( value.item );\n\t\t}\n\t}\n}\n\n// Whether previous and current item belongs to the same list. It is determined based on `item.id`\n// (extracted from `mso-list` style, see #getListItemData) and previous sibling of the current item.\n//\n// @param {Object} previousItem\n// @param {Object} currentItem\n// @returns {Boolean}\nfunction isNewListNeeded( previousItem, currentItem ) {\n\tif ( previousItem.id !== currentItem.id ) {\n\t\treturn true;\n\t}\n\n\tconst previousSibling = currentItem.element.previousSibling;\n\n\tif ( !previousSibling ) {\n\t\treturn true;\n\t}\n\n\t// Even with the same id the list does not have to be continuous (#43).\n\treturn !previousSibling.is( 'ul' ) && !previousSibling.is( 'ol' );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module paste-from-office/filters/image\n */\n\n/* globals btoa */\n\nimport ViewMatcher from '@ckeditor/ckeditor5-engine/src/view/matcher';\nimport UpcastWriter from '@ckeditor/ckeditor5-engine/src/view/upcastwriter';\n\n/**\n * Replaces source attribute of all `<img>` elements representing regular\n * images (not the Word shapes) with inlined base64 image representation extracted from RTF or Blob data.\n *\n * @param {module:engine/view/documentfragment~DocumentFragment} documentFragment Document fragment on which transform images.\n * @param {String} rtfData The RTF data from which images representation will be used.\n */\nexport function replaceImagesSourceWithBase64( documentFragment, rtfData ) {\n\tif ( !documentFragment.childCount ) {\n\t\treturn;\n\t}\n\n\tconst upcastWriter = new UpcastWriter();\n\tconst shapesIds = findAllShapesIds( documentFragment, upcastWriter );\n\n\tremoveAllImgElementsRepresentingShapes( shapesIds, documentFragment, upcastWriter );\n\tremoveAllShapeElements( documentFragment, upcastWriter );\n\n\tconst images = findAllImageElementsWithLocalSource( documentFragment, upcastWriter );\n\n\tif ( images.length ) {\n\t\treplaceImagesFileSourceWithInlineRepresentation( images, extractImageDataFromRtf( rtfData ), upcastWriter );\n\t}\n}\n\n/**\n * Converts given HEX string to base64 representation.\n *\n * @protected\n * @param {String} hexString The HEX string to be converted.\n * @returns {String} Base64 representation of a given HEX string.\n */\nexport function _convertHexToBase64( hexString ) {\n\treturn btoa( hexString.match( /\\w{2}/g ).map( char => {\n\t\treturn String.fromCharCode( parseInt( char, 16 ) );\n\t} ).join( '' ) );\n}\n\n// Finds all shapes (`<v:*>...</v:*>`) ids. Shapes can represent images (canvas)\n// or Word shapes (which does not have RTF or Blob representation).\n//\n// @param {module:engine/view/documentfragment~DocumentFragment} documentFragment Document fragment\n// from which to extract shape ids.\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\n// @returns {Array.<String>} Array of shape ids.\nfunction findAllShapesIds( documentFragment, writer ) {\n\tconst range = writer.createRangeIn( documentFragment );\n\n\tconst shapeElementsMatcher = new ViewMatcher( {\n\t\tname: /v:(.+)/\n\t} );\n\n\tconst shapesIds = [];\n\n\tfor ( const value of range ) {\n\t\tconst el = value.item;\n\t\tconst prevSiblingName = el.previousSibling && el.previousSibling.name || null;\n\n\t\t// If shape element have 'o:gfxdata' attribute and is not directly before `<v:shapetype>` element it means it represent Word shape.\n\t\tif ( shapeElementsMatcher.match( el ) && el.getAttribute( 'o:gfxdata' ) && prevSiblingName !== 'v:shapetype' ) {\n\t\t\tshapesIds.push( value.item.getAttribute( 'id' ) );\n\t\t}\n\t}\n\n\treturn shapesIds;\n}\n\n// Removes all `<img>` elements which represents Word shapes and not regular images.\n//\n// @param {Array.<String>} shapesIds Shape ids which will be checked against `<img>` elements.\n// @param {module:engine/view/documentfragment~DocumentFragment} documentFragment Document fragment from which to remove `<img>` elements.\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\nfunction removeAllImgElementsRepresentingShapes( shapesIds, documentFragment, writer ) {\n\tconst range = writer.createRangeIn( documentFragment );\n\n\tconst imageElementsMatcher = new ViewMatcher( {\n\t\tname: 'img'\n\t} );\n\n\tconst imgs = [];\n\n\tfor ( const value of range ) {\n\t\tif ( imageElementsMatcher.match( value.item ) ) {\n\t\t\tconst el = value.item;\n\t\t\tconst shapes = el.getAttribute( 'v:shapes' ) ? el.getAttribute( 'v:shapes' ).split( ' ' ) : [];\n\n\t\t\tif ( shapes.length && shapes.every( shape => shapesIds.indexOf( shape ) > -1 ) ) {\n\t\t\t\timgs.push( el );\n\t\t\t// Shapes may also have empty source while content is paste in some browsers (Safari).\n\t\t\t} else if ( !el.getAttribute( 'src' ) ) {\n\t\t\t\timgs.push( el );\n\t\t\t}\n\t\t}\n\t}\n\n\tfor ( const img of imgs ) {\n\t\twriter.remove( img );\n\t}\n}\n\n// Removes all shape elements (`<v:*>...</v:*>`) so they do not pollute the output structure.\n//\n// @param {module:engine/view/documentfragment~DocumentFragment} documentFragment Document fragment from which to remove shape elements.\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\nfunction removeAllShapeElements( documentFragment, writer ) {\n\tconst range = writer.createRangeIn( documentFragment );\n\n\tconst shapeElementsMatcher = new ViewMatcher( {\n\t\tname: /v:(.+)/\n\t} );\n\n\tconst shapes = [];\n\n\tfor ( const value of range ) {\n\t\tif ( shapeElementsMatcher.match( value.item ) ) {\n\t\t\tshapes.push( value.item );\n\t\t}\n\t}\n\n\tfor ( const shape of shapes ) {\n\t\twriter.remove( shape );\n\t}\n}\n\n// Finds all `<img>` elements in a given document fragment which have source pointing to local `file://` resource.\n//\n// @param {module:engine/view/documentfragment~DocumentFragment} documentFragment Document fragment in which to look for `<img>` elements.\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\n// @returns {Object} result All found images grouped by source type.\n// @returns {Array.<module:engine/view/element~Element>} result.file Array of found `<img>` elements with `file://` source.\n// @returns {Array.<module:engine/view/element~Element>} result.blob Array of found `<img>` elements with `blob:` source.\nfunction findAllImageElementsWithLocalSource( documentFragment, writer ) {\n\tconst range = writer.createRangeIn( documentFragment );\n\n\tconst imageElementsMatcher = new ViewMatcher( {\n\t\tname: 'img'\n\t} );\n\n\tconst imgs = [];\n\n\tfor ( const value of range ) {\n\t\tif ( imageElementsMatcher.match( value.item ) ) {\n\t\t\tif ( value.item.getAttribute( 'src' ).startsWith( 'file://' ) ) {\n\t\t\t\timgs.push( value.item );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn imgs;\n}\n\n// Extracts all images HEX representations from a given RTF data.\n//\n// @param {String} rtfData The RTF data from which to extract images HEX representation.\n// @returns {Array.<Object>} Array of found HEX representations. Each array item is an object containing:\n//\n// \t\t* {String} hex Image representation in HEX format.\n// \t\t* {string} type Type of image, `image/png` or `image/jpeg`.\nfunction extractImageDataFromRtf( rtfData ) {\n\tif ( !rtfData ) {\n\t\treturn [];\n\t}\n\n\tconst regexPictureHeader = /{\\\\pict[\\s\\S]+?\\\\bliptag-?\\d+(\\\\blipupi-?\\d+)?({\\\\\\*\\\\blipuid\\s?[\\da-fA-F]+)?[\\s}]*?/;\n\tconst regexPicture = new RegExp( '(?:(' + regexPictureHeader.source + '))([\\\\da-fA-F\\\\s]+)\\\\}', 'g' );\n\tconst images = rtfData.match( regexPicture );\n\tconst result = [];\n\n\tif ( images ) {\n\t\tfor ( const image of images ) {\n\t\t\tlet imageType = false;\n\n\t\t\tif ( image.includes( '\\\\pngblip' ) ) {\n\t\t\t\timageType = 'image/png';\n\t\t\t} else if ( image.includes( '\\\\jpegblip' ) ) {\n\t\t\t\timageType = 'image/jpeg';\n\t\t\t}\n\n\t\t\tif ( imageType ) {\n\t\t\t\tresult.push( {\n\t\t\t\t\thex: image.replace( regexPictureHeader, '' ).replace( /[^\\da-fA-F]/g, '' ),\n\t\t\t\t\ttype: imageType\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n// Replaces `src` attribute value of all given images with the corresponding base64 image representation.\n//\n// @param {Array.<module:engine/view/element~Element>} imageElements Array of image elements which will have its source replaced.\n// @param {Array.<Object>} imagesHexSources Array of images hex sources (usually the result of `extractImageDataFromRtf()` function).\n// The array should be the same length as `imageElements` parameter.\n// @param {module:engine/view/upcastwriter~UpcastWriter} writer\nfunction replaceImagesFileSourceWithInlineRepresentation( imageElements, imagesHexSources, writer ) {\n\t// Assume there is an equal amount of image elements and images HEX sources so they can be matched accordingly based on existing order.\n\tif ( imageElements.length === imagesHexSources.length ) {\n\t\tfor ( let i = 0; i < imageElements.length; i++ ) {\n\t\t\tconst newSrc = `data:${ imagesHexSources[ i ].type };base64,${ _convertHexToBase64( imagesHexSources[ i ].hex ) }`;\n\t\t\twriter.setAttribute( 'src', newSrc, imageElements[ i ] );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module paste-from-office/pastefromoffice\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport { parseHtml } from './filters/parse';\nimport { transformListItemLikeElementsIntoLists } from './filters/list';\nimport { replaceImagesSourceWithBase64 } from './filters/image';\n\n/**\n * The Paste from Office plugin.\n *\n * This plugin handles content pasted from Office apps (for now only Word) and transforms it (if necessary)\n * to a valid structure which can then be understood by the editor features.\n *\n * For more information about this feature check the {@glink api/paste-from-office package page}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class PasteFromOffice extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'PasteFromOffice';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\tthis.listenTo( editor.plugins.get( 'Clipboard' ), 'inputTransformation', ( evt, data ) => {\n\t\t\tconst html = data.dataTransfer.getData( 'text/html' );\n\n\t\t\tif ( data.pasteFromOfficeProcessed !== true && isWordInput( html ) ) {\n\t\t\t\tdata.content = this._normalizeWordInput( html, data.dataTransfer );\n\n\t\t\t\t// Set the flag so if `inputTransformation` is re-fired, PFO will not process it again (#44).\n\t\t\t\tdata.pasteFromOfficeProcessed = true;\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\t}\n\n\t/**\n\t * Normalizes input pasted from Word to format suitable for editor {@link module:engine/model/model~Model}.\n\t *\n\t * **Note**: this function was exposed mainly for testing purposes and should not be called directly.\n\t *\n\t * @protected\n\t * @param {String} input Word input.\n\t * @param {module:clipboard/datatransfer~DataTransfer} dataTransfer Data transfer instance.\n\t * @returns {module:engine/view/documentfragment~DocumentFragment} Normalized input.\n\t */\n\t_normalizeWordInput( input, dataTransfer ) {\n\t\tconst { body, stylesString } = parseHtml( input );\n\n\t\ttransformListItemLikeElementsIntoLists( body, stylesString );\n\t\treplaceImagesSourceWithBase64( body, dataTransfer.getData( 'text/rtf' ) );\n\n\t\treturn body;\n\t}\n}\n\n// Checks if given HTML string is a result of pasting content from Word.\n//\n// @param {String} html HTML string to test.\n// @returns {Boolean} True if given HTML string is a Word HTML.\nfunction isWordInput( html ) {\n\treturn !!( html && ( html.match( /<meta\\s*name=\"?generator\"?\\s*content=\"?microsoft\\s*word\\s*\\d+\"?\\/?>/gi ) ||\n\t\thtml.match( /xmlns:o=\"urn:schemas-microsoft-com/gi ) ) );\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module ckfinder/ckfinderui\n */\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport browseFilesIcon from '../theme/icons/browse-files.svg';\n/**\n * The CKFinder UI plugin. It introduces he `'ckfinder'` toolbar button.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class CKFinderUI extends Plugin {\n    /**\n\t * @inheritDoc\n\t */\n    static get pluginName() {\n        return 'CKFinderUI';\n    }\n    /**\n\t * @inheritDoc\n\t */\n    init() {\n        const editor = this.editor;\n        const componentFactory = editor.ui.componentFactory;\n        const t = editor.t;\n        componentFactory.add('ckfinder', locale => {\n            const command = editor.commands.get('ckfinder');\n            const button = new ButtonView(locale);\n            button.set({\n                label: t('Insert image or file'),\n                icon: browseFilesIcon,\n                tooltip: true\n            });\n            button.bind('isEnabled').to(command);\n            button.on('execute', () => {\n                editor.execute('ckfinder');\n                editor.editing.view.focus();\n            });\n            return button;\n        });\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/* global window */\n/**\n * @module ckfinder/ckfindercommand\n */\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n/**\n * The CKFinder command. It is used by the {@link module:ckfinder/ckfinderediting~CKFinderEditing ckfinder editng feature}\n * to open a CKFinder file browser to insert an image or a link to a file into content.\n *\n *\t\teditor.execute( 'ckfinder' );\n *\n * @extends module:core/command~Command\n */\nexport default class CKFinderCommand extends Command {\n    /**\n\t * @inheritDoc\n\t */\n    constructor(editor) {\n        super(editor);\n        // Remove default document listener to lower its priority.\n        this.stopListening(this.editor.model.document, 'change');\n        // Lower this command listener priority to be sure that refresh() will be called after link & image refresh.\n        this.listenTo(this.editor.model.document, 'change', () => this.refresh(), { priority: 'low' });\n    }\n    /**\n\t * @inheritDoc\n\t */\n    refresh() {\n        const imageCommand = this.editor.commands.get('imageUpload');\n        const linkCommand = this.editor.commands.get('link');\n        // The CKFinder command is enabled when one of image or link command is enabled.\n        this.isEnabled = imageCommand && linkCommand && (imageCommand.isEnabled || linkCommand.isEnabled);\n    }\n    /**\n\t * @inheritDoc\n\t */\n    execute() {\n        const editor = this.editor;\n        const openerMethod = this.editor.config.get('ckfinder.openerMethod') || 'modal';\n        if (openerMethod != 'popup' && openerMethod != 'modal') {\n            throw new CKEditorError('ckfinder-unknown-openerMethod: The openerMethod config option must by \"popup\" or \"modal\".', editor);\n        }\n        const options = this.editor.config.get('ckfinder.options') || {};\n        options.chooseFiles = true;\n        // Cache the user-defined onInit method\n        const originalOnInit = options.onInit;\n        // Pass the lang code to the CKFinder if not defined by user.\n        if (!options.language) {\n            options.language = editor.locale.language;\n        }\n        // The onInit method allows to extend CKFinder's behavior. It is used to attach event listeners to file choosing related events.\n        options.onInit = finder => {\n            // Call original options.onInit if it was defined by user.\n            if (originalOnInit) {\n                originalOnInit();\n            }\n            finder.on('files:choose', evt => {\n                const files = evt.data.files.toArray();\n                // Insert links\n                const links = files.filter(file => !file.isImage());\n                const images = files.filter(file => file.isImage());\n                for (const linkFile of links) {\n                    editor.execute('link', linkFile.getUrl());\n                }\n                const imagesUrls = [];\n                for (const image of images) {\n                    const url = image.getUrl();\n                    imagesUrls.push(url ? url : finder.request('file:getProxyUrl', { file: image }));\n                }\n                if (imagesUrls.length) {\n                    insertImages(editor, imagesUrls);\n                }\n            });\n            finder.on('file:choose:resizedImage', evt => {\n                const resizedUrl = evt.data.resizedUrl;\n                if (!resizedUrl) {\n                    const notification = editor.plugins.get('Notification');\n                    const t = editor.locale.t;\n                    notification.showWarning(t('Could not obtain resized image URL.'), {\n                        title: t('Selecting resized image failed'),\n                        namespace: 'ckfinder'\n                    });\n                    return;\n                }\n                insertImages(editor, [resizedUrl]);\n            });\n        };\n        window.CKFinder[openerMethod](options);\n    }\n}\nfunction insertImages(editor, urls) {\n    const imageCommand = editor.commands.get('imageUpload');\n    // Check if inserting an image is actually possible - it might be possible to only insert a link.\n    if (!imageCommand.isEnabled) {\n        const notification = editor.plugins.get('Notification');\n        const t = editor.locale.t;\n        notification.showWarning(t('Could not insert image at the current position.'), {\n            title: t('Inserting image failed'),\n            namespace: 'ckfinder'\n        });\n        return;\n    }\n    editor.execute('imageInsert', { source: urls });\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ckfinder/ckfinderediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Notification from '@ckeditor/ckeditor5-ui/src/notification/notification';\n\nimport CKFinderCommand from './ckfindercommand';\n\n/**\n * The CKFinder editing feature. It introduces the {@link module:ckfinder/ckfindercommand~CKFinderCommand ckfinder command}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class CKFinderEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'CKFinderEditing';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ Notification ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\teditor.commands.add( 'ckfinder', new CKFinderCommand( editor ) );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ckfinder/ckfinder\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\n\nimport CKFinderUI from './ckfinderui';\nimport CKFinderEditing from './ckfinderediting';\nimport CKFinderUploadAdapter from '@ckeditor/ckeditor5-adapter-ckfinder/src/uploadadapter';\n\n/**\n * The CKFinder feature, a bridge between the CKEditor 5 WYSIWYG editor and the\n * [CKFinder](https://ckeditor.com/ckfinder) file manager and uploader.\n *\n * This is a \"glue\" plugin which enables:\n *\n * * {@link module:ckfinder/ckfinderediting~CKFinderEditing},\n * * {@link module:ckfinder/ckfinderui~CKFinderUI},\n * * {@link module:adapter-ckfinder/uploadadapter~CKFinderUploadAdapter}.\n *\n * See the {@glink features/image-upload/ckfinder \"CKFinder integration\" guide} to learn how to configure\n * and use this feature.\n *\n * Check out the {@glink features/image-upload/image-upload comprehensive \"Image upload\" guide} to learn about\n * other ways to upload images into CKEditor 5.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class CKFinder extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'CKFinder';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ CKFinderEditing, CKFinderUI, CKFinderUploadAdapter ];\n\t}\n}\n\n/**\n * The configuration of the {@link module:ckfinder/ckfinder~CKFinder CKFinder feature}.\n *\n * Read more in {@link module:ckfinder/ckfinder~CKFinderConfig}.\n *\n * @member {module:ckfinder/ckfinder~CKFinderConfig} module:core/editor/editorconfig~EditorConfig#ckfinder\n */\n\n/**\n * The configuration of the {@link module:ckfinder/ckfinder~CKFinder CKFinder feature}\n * and its {@link module:adapter-ckfinder/uploadadapter~CKFinderUploadAdapter upload adapter}.\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n *\t\t\t\tckfinder: {\n *\t\t\t\t\toptions: {\n *\t\t\t\t\t\tresourceType: 'Images'\n *\t\t\t\t\t}\n *\t\t\t\t}\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * See {@link module:core/editor/editorconfig~EditorConfig all editor options}.\n *\n * @interface CKFinderConfig\n */\n\n/**\n * The configuration options passed to the CKFinder file manager instance.\n *\n * Check the file manager [documentation](https://ckeditor.com/docs/ckfinder/ckfinder3/#!/api/CKFinder.Config-cfg-language)\n * for the complete list of options.\n *\n * @member {Object} module:ckfinder/ckfinder~CKFinderConfig#options\n */\n\n/**\n * The type of the CKFinder opener method.\n *\n * Supported types are:\n *\n * * `'modal'` - opens a CKFinder in a modal,\n * * `'popup'` - opens a CKFinder in a new \"pop-up\" window.\n *\n * Defaults to `'modal'`.\n *\n * @member {String} module:ckfinder/ckfinder~CKFinderConfig#openerMethod\n */\n\n/**\n * The path (URL) to the connector which handles the file upload in the CKFinder file manager.\n * When specified, enables the automatic upload of resources such as images inserted into the content.\n *\n * For instance, to use CKFinder's {@glink @ckfinder ckfinder3-php/commands.html#command_quick_upload quick upload}\n * command, your can use the following (or similar) path:\n *\n *\t\tClassicEditor\n *\t\t\t.create( editorElement, {\n *\t\t\t\tckfinder: {\n *\t\t\t\t\tuploadUrl: '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json'\n *\t\t\t\t}\n *\t\t\t} )\n *\t\t\t.then( ... )\n *\t\t\t.catch( ... );\n *\n * Used by the {@link module:adapter-ckfinder/uploadadapter~CKFinderUploadAdapter upload adapter}.\n *\n * @member {String} module:ckfinder/ckfinder~CKFinderConfig#uploadUrl\n */\n","module.exports = \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z\\\"/><path d=\\\"M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z\\\"/></svg>\"","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module editor-classic/classiceditorui\n */\n\nimport EditorUI from '@ckeditor/ckeditor5-core/src/editor/editorui';\nimport enableToolbarKeyboardFocus from '@ckeditor/ckeditor5-ui/src/toolbar/enabletoolbarkeyboardfocus';\nimport normalizeToolbarConfig from '@ckeditor/ckeditor5-ui/src/toolbar/normalizetoolbarconfig';\nimport { enablePlaceholder } from '@ckeditor/ckeditor5-engine/src/view/placeholder';\nimport ElementReplacer from '@ckeditor/ckeditor5-utils/src/elementreplacer';\n\n/**\n * The classic editor UI class.\n *\n * @extends module:core/editor/editorui~EditorUI\n */\nexport default class ClassicEditorUI extends EditorUI {\n\t/**\n\t * Creates an instance of the classic editor UI class.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t * @param {module:ui/editorui/editoruiview~EditorUIView} view The view of the UI.\n\t */\n\tconstructor( editor, view ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The main (top–most) view of the editor UI.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/editorui/editoruiview~EditorUIView} #view\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * A normalized `config.toolbar` object.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._toolbarConfig = normalizeToolbarConfig( editor.config.get( 'toolbar' ) );\n\n\t\t/**\n\t\t * The element replacer instance used to hide the editor's source element.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:utils/elementreplacer~ElementReplacer}\n\t\t */\n\t\tthis._elementReplacer = new ElementReplacer();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget element() {\n\t\treturn this.view.element;\n\t}\n\n\t/**\n\t * Initializes the UI.\n\t *\n\t * @param {HTMLElement|null} replacementElement The DOM element that will be the source for the created editor.\n\t */\n\tinit( replacementElement ) {\n\t\tconst editor = this.editor;\n\t\tconst view = this.view;\n\t\tconst editingView = editor.editing.view;\n\t\tconst editable = view.editable;\n\t\tconst editingRoot = editingView.document.getRoot();\n\n\t\t// The editable UI and editing root should share the same name. Then name is used\n\t\t// to recognize the particular editable, for instance in ARIA attributes.\n\t\teditable.name = editingRoot.rootName;\n\n\t\tview.render();\n\n\t\t// The editable UI element in DOM is available for sure only after the editor UI view has been rendered.\n\t\t// But it can be available earlier if a DOM element has been passed to BalloonEditor.create().\n\t\tconst editableElement = editable.element;\n\n\t\t// Register the editable UI view in the editor. A single editor instance can aggregate multiple\n\t\t// editable areas (roots) but the classic editor has only one.\n\t\tthis.setEditableElement( editable.name, editableElement );\n\n\t\t// Let the global focus tracker know that the editable UI element is focusable and\n\t\t// belongs to the editor. From now on, the focus tracker will sustain the editor focus\n\t\t// as long as the editable is focused (e.g. the user is typing).\n\t\tthis.focusTracker.add( editableElement );\n\n\t\t// Let the editable UI element respond to the changes in the global editor focus\n\t\t// tracker. It has been added to the same tracker a few lines above but, in reality, there are\n\t\t// many focusable areas in the editor, like balloons, toolbars or dropdowns and as long\n\t\t// as they have focus, the editable should act like it is focused too (although technically\n\t\t// it isn't), e.g. by setting the proper CSS class, visually announcing focus to the user.\n\t\t// Doing otherwise will result in editable focus styles disappearing, once e.g. the\n\t\t// toolbar gets focused.\n\t\tview.editable.bind( 'isFocused' ).to( this.focusTracker );\n\n\t\t// Bind the editable UI element to the editing view, making it an end– and entry–point\n\t\t// of the editor's engine. This is where the engine meets the UI.\n\t\teditingView.attachDomRoot( editableElement );\n\n\t\t// If an element containing the initial data of the editor was provided, replace it with\n\t\t// an editor instance's UI in DOM until the editor is destroyed. For instance, a <textarea>\n\t\t// can be such element.\n\t\tif ( replacementElement ) {\n\t\t\tthis._elementReplacer.replace( replacementElement, this.element );\n\t\t}\n\n\t\tthis._initPlaceholder();\n\t\tthis._initToolbar();\n\t\tthis.fire( 'ready' );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tconst view = this.view;\n\t\tconst editingView = this.editor.editing.view;\n\n\t\tthis._elementReplacer.restore();\n\t\teditingView.detachDomRoot( view.editable.name );\n\t\tview.destroy();\n\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Initializes the editor toolbar.\n\t *\n\t * @private\n\t */\n\t_initToolbar() {\n\t\tconst editor = this.editor;\n\t\tconst view = this.view;\n\t\tconst editingView = editor.editing.view;\n\n\t\t// Set–up the sticky panel with toolbar.\n\t\tview.stickyPanel.bind( 'isActive' ).to( this.focusTracker, 'isFocused' );\n\t\tview.stickyPanel.limiterElement = view.element;\n\n\t\tif ( this._toolbarConfig.viewportTopOffset ) {\n\t\t\tview.stickyPanel.viewportTopOffset = this._toolbarConfig.viewportTopOffset;\n\t\t}\n\n\t\tview.toolbar.fillFromConfig( this._toolbarConfig.items, this.componentFactory );\n\n\t\tenableToolbarKeyboardFocus( {\n\t\t\torigin: editingView,\n\t\t\toriginFocusTracker: this.focusTracker,\n\t\t\toriginKeystrokeHandler: editor.keystrokes,\n\t\t\ttoolbar: view.toolbar\n\t\t} );\n\t}\n\n\t/**\n\t * Enable the placeholder text on the editing root, if any was configured.\n\t *\n\t * @private\n\t */\n\t_initPlaceholder() {\n\t\tconst editor = this.editor;\n\t\tconst editingView = editor.editing.view;\n\t\tconst editingRoot = editingView.document.getRoot();\n\t\tconst sourceElement = editor.sourceElement;\n\n\t\tconst placeholderText = editor.config.get( 'placeholder' ) ||\n\t\t\tsourceElement && sourceElement.tagName.toLowerCase() === 'textarea' && sourceElement.getAttribute( 'placeholder' );\n\n\t\tif ( placeholderText ) {\n\t\t\tenablePlaceholder( {\n\t\t\t\tview: editingView,\n\t\t\t\telement: editingRoot,\n\t\t\t\ttext: placeholderText,\n\t\t\t\tisDirectHost: false\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module ui/editorui/boxed/boxededitoruiview\n */\nimport EditorUIView from '../../editorui/editoruiview';\nimport LabelView from '../../label/labelview';\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\n/**\n * The boxed editor UI view class. This class represents an editor interface\n * consisting of a toolbar and an editable area, enclosed within a box.\n *\n * @extends module:ui/editorui/editoruiview~EditorUIView\n */\nexport default class BoxedEditorUIView extends EditorUIView {\n    /**\n\t * Creates an instance of the boxed editor UI view class.\n\t *\n\t * @param {module:utils/locale~Locale} locale The locale instance..\n\t */\n    constructor(locale) {\n        super(locale);\n        const ariaLabelUid = uid();\n        /**\n\t\t * Collection of the child views located in the top (`.ck-editor__top`)\n\t\t * area of the UI.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this.top = this.createCollection();\n        /**\n\t\t * Collection of the child views located in the main (`.ck-editor__main`)\n\t\t * area of the UI.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n        this.main = this.createCollection();\n        /**\n\t\t * Voice label of the UI.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {module:ui/view~View} #_voiceLabelView\n\t\t */\n        this._voiceLabelView = this._createVoiceLabel(ariaLabelUid);\n        this.setTemplate({\n            tag: 'div',\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-reset',\n                    'ck-editor',\n                    'ck-rounded-corners'\n                ],\n                role: 'application',\n                dir: 'ltr',\n                lang: locale.language,\n                'aria-labelledby': `ck-editor__aria-label_${ ariaLabelUid }`\n            },\n            children: [\n                this._voiceLabelView,\n                {\n                    tag: 'div',\n                    attributes: {\n                        class: [\n                            'ck',\n                            'ck-editor__top',\n                            'ck-reset_all'\n                        ],\n                        role: 'presentation'\n                    },\n                    children: this.top\n                },\n                {\n                    tag: 'div',\n                    attributes: {\n                        class: [\n                            'ck',\n                            'ck-editor__main'\n                        ],\n                        role: 'presentation'\n                    },\n                    children: this.main\n                }\n            ]\n        });\n    }\n    /**\n\t * Creates a voice label view instance.\n\t *\n\t * @private\n\t * @returns {module:ui/label/labelview~LabelView}\n\t */\n    _createVoiceLabel(ariaLabelUid) {\n        const t = this.t;\n        const voiceLabel = new LabelView();\n        voiceLabel.text = t('Rich Text Editor');\n        voiceLabel.extendTemplate({\n            attributes: {\n                id: `ck-editor__aria-label_${ ariaLabelUid }`,\n                class: 'ck-voice-label'\n            }\n        });\n        return voiceLabel;\n    }\n}","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/panel/sticky/stickypanelview\n */\n\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport View from '../../view';\nimport Template from '../../template';\nimport toUnit from '@ckeditor/ckeditor5-utils/src/dom/tounit';\n\nimport '../../../theme/components/panel/stickypanel.css';\n\nconst toPx = toUnit( 'px' );\n\n/**\n * The sticky panel view class.\n */\nexport default class StickyPanelView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * Controls whether the sticky panel should be active.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #isActive\n\t\t */\n\t\tthis.set( 'isActive', false );\n\n\t\t/**\n\t\t * Controls whether the sticky panel is in the \"sticky\" state.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #isSticky\n\t\t */\n\t\tthis.set( 'isSticky', false );\n\n\t\t/**\n\t\t * The limiter element for the sticky panel instance. Its bounding rect limits\n\t\t * the \"stickyness\" of the panel, i.e. when the panel reaches the bottom\n\t\t * edge of the limiter, it becomes sticky to that edge and does not float\n\t\t * off the limiter. It is mandatory for the panel to work properly and once\n\t\t * set, it cannot be changed.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {HTMLElement} #limiterElement\n\t\t */\n\t\tthis.set( 'limiterElement', null );\n\n\t\t/**\n\t\t * The offset from the bottom edge of {@link #limiterElement}\n\t\t * which stops the panel from stickying any further to prevent limiter's content\n\t\t * from being completely covered.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @default 50\n\t\t * @member {Number} #limiterBottomOffset\n\t\t */\n\t\tthis.set( 'limiterBottomOffset', 50 );\n\n\t\t/**\n\t\t * The offset from the top edge of the web browser's viewport which makes the\n\t\t * panel become sticky. The default value is `0`, which means the panel becomes\n\t\t * sticky when it's upper edge touches the top of the page viewport.\n\t\t *\n\t\t * This attribute is useful when the web page has UI elements positioned to the top\n\t\t * either using `position: fixed` or `position: sticky`, which would cover the\n\t\t * sticky panel or vice–versa (depending on the `z-index` hierarchy).\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @default 0\n\t\t * @member {Number} #viewportTopOffset\n\t\t */\n\t\tthis.set( 'viewportTopOffset', 0 );\n\n\t\t/**\n\t\t * Controls the `margin-left` CSS style of the panel.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {String} #_marginLeft\n\t\t */\n\t\tthis.set( '_marginLeft', null );\n\n\t\t/**\n\t\t * Set `true` if the sticky panel reached the bottom edge of the\n\t\t * {@link #limiterElement}.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #_isStickyToTheLimiter\n\t\t */\n\t\tthis.set( '_isStickyToTheLimiter', false );\n\n\t\t/**\n\t\t * Set `true` if the sticky panel uses the {@link #viewportTopOffset},\n\t\t * i.e. not {@link #_isStickyToTheLimiter} and the {@link #viewportTopOffset}\n\t\t * is not `0`.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} #_hasViewportTopOffset\n\t\t */\n\t\tthis.set( '_hasViewportTopOffset', false );\n\n\t\t/**\n\t\t * Collection of the child views which creates balloon panel contents.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.content = this.createCollection();\n\n\t\t/**\n\t\t * The DOM bounding client rect of the {@link module:ui/view~View#element} of the panel.\n\t\t *\n\t\t * @protected\n\t\t * @member {Object} #_panelRect\n\t\t */\n\n\t\t/**\n\t\t * The DOM bounding client rect of the {@link #limiterElement}\n\t\t * of the panel.\n\t\t *\n\t\t * @protected\n\t\t * @member {Object} #_limiterRect\n\t\t */\n\n\t\t/**\n\t\t * A dummy element which visually fills the space as long as the\n\t\t * actual panel is sticky. It prevents flickering of the UI.\n\t\t *\n\t\t * @protected\n\t\t * @property {HTMLElement}\n\t\t */\n\t\tthis._contentPanelPlaceholder = new Template( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-sticky-panel__placeholder'\n\t\t\t\t],\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: bind.to( 'isSticky', isSticky => isSticky ? 'block' : 'none' ),\n\t\t\t\t\theight: bind.to( 'isSticky', isSticky => {\n\t\t\t\t\t\treturn isSticky ? toPx( this._panelRect.height ) : null;\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t}\n\t\t} ).render();\n\n\t\t/**\n\t\t * The panel which accepts children into {@link #content} collection.\n\t\t * Also an element which is positioned when {@link #isSticky}.\n\t\t *\n\t\t * @protected\n\t\t * @property {HTMLElement}\n\t\t */\n\t\tthis._contentPanel = new Template( {\n\t\t\ttag: 'div',\n\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-sticky-panel__content',\n\t\t\t\t\t// Toggle class of the panel when \"sticky\" state changes in the view.\n\t\t\t\t\tbind.if( 'isSticky', 'ck-sticky-panel__content_sticky' ),\n\t\t\t\t\tbind.if( '_isStickyToTheLimiter', 'ck-sticky-panel__content_sticky_bottom-limit' ),\n\t\t\t\t],\n\t\t\t\tstyle: {\n\t\t\t\t\twidth: bind.to( 'isSticky', isSticky => {\n\t\t\t\t\t\treturn isSticky ? toPx( this._contentPanelPlaceholder.getBoundingClientRect().width ) : null;\n\t\t\t\t\t} ),\n\n\t\t\t\t\ttop: bind.to( '_hasViewportTopOffset', _hasViewportTopOffset => {\n\t\t\t\t\t\treturn _hasViewportTopOffset ? toPx( this.viewportTopOffset ) : null;\n\t\t\t\t\t} ),\n\n\t\t\t\t\tbottom: bind.to( '_isStickyToTheLimiter', _isStickyToTheLimiter => {\n\t\t\t\t\t\treturn _isStickyToTheLimiter ? toPx( this.limiterBottomOffset ) : null;\n\t\t\t\t\t} ),\n\n\t\t\t\t\tmarginLeft: bind.to( '_marginLeft' )\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tchildren: this.content\n\t\t} ).render();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-sticky-panel'\n\t\t\t\t]\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tthis._contentPanelPlaceholder,\n\t\t\t\tthis._contentPanel\n\t\t\t]\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Check if the panel should go into the sticky state immediately.\n\t\tthis._checkIfShouldBeSticky();\n\n\t\t// Update sticky state of the panel as the window is being scrolled.\n\t\tthis.listenTo( global.window, 'scroll', () => {\n\t\t\tthis._checkIfShouldBeSticky();\n\t\t} );\n\n\t\t// Synchronize with `model.isActive` because sticking an inactive panel is pointless.\n\t\tthis.listenTo( this, 'change:isActive', () => {\n\t\t\tthis._checkIfShouldBeSticky();\n\t\t} );\n\t}\n\n\t/**\n\t * Analyzes the environment to decide whether the panel should\n\t * be sticky or not.\n\t *\n\t * @protected\n\t */\n\t_checkIfShouldBeSticky() {\n\t\tconst panelRect = this._panelRect = this._contentPanel.getBoundingClientRect();\n\t\tlet limiterRect;\n\n\t\tif ( !this.limiterElement ) {\n\t\t\tthis.isSticky = false;\n\t\t} else {\n\t\t\tlimiterRect = this._limiterRect = this.limiterElement.getBoundingClientRect();\n\n\t\t\t// The panel must be active to become sticky.\n\t\t\tthis.isSticky = this.isActive &&\n\t\t\t\t// The limiter's top edge must be beyond the upper edge of the visible viewport (+the viewportTopOffset).\n\t\t\t\tlimiterRect.top < this.viewportTopOffset &&\n\t\t\t\t// The model#limiterElement's height mustn't be smaller than the panel's height and model#limiterBottomOffset.\n\t\t\t\t// There's no point in entering the sticky mode if the model#limiterElement is very, very small, because\n\t\t\t\t// it would immediately set model#_isStickyToTheLimiter true and, given model#limiterBottomOffset, the panel\n\t\t\t\t// would be positioned before the model#limiterElement.\n\t\t\t\tthis._panelRect.height + this.limiterBottomOffset < limiterRect.height;\n\t\t}\n\n\t\t// Stick the panel to the top edge of the viewport simulating CSS position:sticky.\n\t\t// TODO: Possibly replaced by CSS in the future http://caniuse.com/#feat=css-sticky\n\t\tif ( this.isSticky ) {\n\t\t\tthis._isStickyToTheLimiter =\n\t\t\t\tlimiterRect.bottom < panelRect.height + this.limiterBottomOffset + this.viewportTopOffset;\n\t\t\tthis._hasViewportTopOffset = !this._isStickyToTheLimiter && !!this.viewportTopOffset;\n\t\t\tthis._marginLeft = this._isStickyToTheLimiter ? null : toPx( -global.window.scrollX );\n\t\t}\n\t\t// Detach the panel from the top edge of the viewport.\n\t\telse {\n\t\t\tthis._isStickyToTheLimiter = false;\n\t\t\tthis._hasViewportTopOffset = false;\n\t\t\tthis._marginLeft = null;\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module editor-classic/classiceditoruiview\n */\n\nimport BoxedEditorUIView from '@ckeditor/ckeditor5-ui/src/editorui/boxed/boxededitoruiview';\nimport InlineEditableUIView from '@ckeditor/ckeditor5-ui/src/editableui/inline/inlineeditableuiview';\nimport StickyPanelView from '@ckeditor/ckeditor5-ui/src/panel/sticky/stickypanelview';\nimport ToolbarView from '@ckeditor/ckeditor5-ui/src/toolbar/toolbarview';\n\nimport '../theme/classiceditor.css';\n\n/**\n * Classic editor UI view. Uses an inline editable and a sticky toolbar, all\n * enclosed in a boxed UI view.\n *\n * @extends module:ui/editorui/boxed/boxededitoruiview~BoxedEditorUIView\n */\nexport default class ClassicEditorUIView extends BoxedEditorUIView {\n\t/**\n\t * Creates an instance of the classic editor UI view.\n\t *\n\t * @param {module:utils/locale~Locale} locale The {@link module:core/editor/editor~Editor#locale} instance.\n\t * @param {module:engine/view/view~View} editingView The editing view instance this view is related to.\n\t */\n\tconstructor( locale, editingView ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * Sticky panel view instance. This is a parent view of a {@link #toolbar}\n\t\t * that makes toolbar sticky.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/panel/sticky/stickypanelview~StickyPanelView}\n\t\t */\n\t\tthis.stickyPanel = new StickyPanelView( locale );\n\n\t\t/**\n\t\t * Toolbar view instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarView}\n\t\t */\n\t\tthis.toolbar = new ToolbarView( locale );\n\n\t\t/**\n\t\t * Editable UI view.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/editableui/inline/inlineeditableuiview~InlineEditableUIView}\n\t\t */\n\t\tthis.editable = new InlineEditableUIView( locale, editingView );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Set toolbar as a child of a stickyPanel and makes toolbar sticky.\n\t\tthis.stickyPanel.content.add( this.toolbar );\n\n\t\tthis.top.add( this.stickyPanel );\n\t\tthis.main.add( this.editable );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module editor-classic/classiceditor\n */\n\nimport Editor from '@ckeditor/ckeditor5-core/src/editor/editor';\nimport DataApiMixin from '@ckeditor/ckeditor5-core/src/editor/utils/dataapimixin';\nimport ElementApiMixin from '@ckeditor/ckeditor5-core/src/editor/utils/elementapimixin';\nimport attachToForm from '@ckeditor/ckeditor5-core/src/editor/utils/attachtoform';\nimport HtmlDataProcessor from '@ckeditor/ckeditor5-engine/src/dataprocessor/htmldataprocessor';\nimport ClassicEditorUI from './classiceditorui';\nimport ClassicEditorUIView from './classiceditoruiview';\nimport getDataFromElement from '@ckeditor/ckeditor5-utils/src/dom/getdatafromelement';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { isElement } from 'lodash-es';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * The {@glink builds/guides/overview#classic-editor classic editor} implementation.\n * It uses an inline editable and a sticky toolbar, all enclosed in a boxed UI.\n * See the {@glink examples/builds/classic-editor demo}.\n *\n * In order to create a classic editor instance, use the static\n * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`} method.\n *\n * # Classic editor and classic build\n *\n * The classic editor can be used directly from source (if you installed the\n * [`@ckeditor/ckeditor5-editor-classic`](https://www.npmjs.com/package/@ckeditor/ckeditor5-editor-classic) package)\n * but it is also available in the {@glink builds/guides/overview#classic-editor classic build}.\n *\n * {@glink builds/guides/overview Builds} are ready-to-use editors with plugins bundled in. When using the editor from\n * source you need to take care of loading all plugins by yourself\n * (through the {@link module:core/editor/editorconfig~EditorConfig#plugins `config.plugins`} option).\n * Using the editor from source gives much better flexibility and allows easier customization.\n *\n * Read more about initializing the editor from source or as a build in\n * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}.\n *\n * @mixes module:core/editor/utils/dataapimixin~DataApiMixin\n * @mixes module:core/editor/utils/elementapimixin~ElementApiMixin\n * @implements module:core/editor/editorwithui~EditorWithUI\n * @extends module:core/editor/editor~Editor\n */\nexport default class ClassicEditor extends Editor {\n\t/**\n\t * Creates an instance of the classic editor.\n\t *\n\t * **Note:** do not use the constructor to create editor instances. Use the static\n\t * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`} method instead.\n\t *\n\t * @protected\n\t * @param {HTMLElement|String} sourceElementOrData The DOM element that will be the source for the created editor\n\t * or the editor's initial data. For more information see\n\t * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}.\n\t * @param {module:core/editor/editorconfig~EditorConfig} config The editor configuration.\n\t */\n\tconstructor( sourceElementOrData, config ) {\n\t\tsuper( config );\n\n\t\tif ( isElement( sourceElementOrData ) ) {\n\t\t\tthis.sourceElement = sourceElementOrData;\n\t\t}\n\n\t\tthis.data.processor = new HtmlDataProcessor();\n\n\t\tthis.model.document.createRoot();\n\n\t\tthis.ui = new ClassicEditorUI( this, new ClassicEditorUIView( this.locale, this.editing.view ) );\n\n\t\tattachToForm( this );\n\t}\n\n\t/**\n\t * Destroys the editor instance, releasing all resources used by it.\n\t *\n\t * Updates the editor's source element with the data.\n\t *\n\t * @returns {Promise}\n\t */\n\tdestroy() {\n\t\tif ( this.sourceElement ) {\n\t\t\tthis.updateSourceElement();\n\t\t}\n\n\t\tthis.ui.destroy();\n\n\t\treturn super.destroy();\n\t}\n\n\t/**\n\t * Creates a new classic editor instance.\n\t *\n\t * There are three ways how the editor can be initialized.\n\t *\n\t * # Replacing a DOM element (and loading data from it)\n\t *\n\t * You can initialize the editor using an existing DOM element:\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( document.querySelector( '#editor' ) )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\t\t\t} )\n\t *\t\t\t.catch( err => {\n\t *\t\t\t\tconsole.error( err.stack );\n\t *\t\t\t} );\n\t *\n\t * The element's content will be used as the editor data and the element will be replaced by the editor UI.\n\t *\n\t * # Creating a detached editor\n\t *\n\t * Alternatively, you can initialize the editor by passing the initial data directly as a string.\n\t * In this case, the editor will render an element that must be inserted into the DOM:\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( '<p>Hello world!</p>' )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\n\t *\t\t\t\t// Initial data was provided so the editor UI element needs to be added manually to the DOM.\n\t *\t\t\t\tdocument.body.appendChild( editor.ui.element );\n\t *\t\t\t} )\n\t *\t\t\t.catch( err => {\n\t *\t\t\t\tconsole.error( err.stack );\n\t *\t\t\t} );\n\t *\n\t * This lets you dynamically append the editor to your web page whenever it is convenient for you. You may use this method if your\n\t * web page content is generated on the client side and the DOM structure is not ready at the moment when you initialize the editor.\n\t *\n\t * # Replacing a DOM element (and data provided in `config.initialData`)\n\t *\n\t * You can also mix these two ways by providing a DOM element to be used and passing the initial data through the configuration:\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( document.querySelector( '#editor' ), {\n\t *\t\t\t\tinitialData: '<h2>Initial data</h2><p>Foo bar.</p>'\n\t *\t\t\t} )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\t\t\t} )\n\t *\t\t\t.catch( err => {\n\t *\t\t\t\tconsole.error( err.stack );\n\t *\t\t\t} );\n\t *\n\t * This method can be used to initialize the editor on an existing element with the specified content in case if your integration\n\t * makes it difficult to set the content of the source element.\n\t *\n\t * Note that an error will be thrown if you pass the initial data both as the first parameter and also in the configuration.\n\t *\n\t * # Configuring the editor\n\t *\n\t * See the {@link module:core/editor/editorconfig~EditorConfig editor configuration documentation} to learn more about\n\t * customizing plugins, toolbar and more.\n\t *\n\t * # Using the editor from source\n\t *\n\t * The code samples listed in the previous sections of this documentation assume that you are using an\n\t * {@glink builds/guides/overview editor build} (for example – `@ckeditor/ckeditor5-build-classic`).\n\t *\n\t * If you want to use the classic editor from source (`@ckeditor/ckeditor5-editor-classic/src/classiceditor`),\n\t * you need to define the list of\n\t * {@link module:core/editor/editorconfig~EditorConfig#plugins plugins to be initialized} and\n\t * {@link module:core/editor/editorconfig~EditorConfig#toolbar toolbar items}. Read more about using the editor from\n\t * source in the {@glink builds/guides/integration/advanced-setup \"Advanced setup\" guide}.\n\t *\n\t * @param {HTMLElement|String} sourceElementOrData The DOM element that will be the source for the created editor\n\t * or the editor's initial data.\n\t *\n\t * If a DOM element is passed, its content will be automatically loaded to the editor upon initialization\n\t * and the {@link module:editor-classic/classiceditorui~ClassicEditorUI#element editor element} will replace the passed element\n\t * in the DOM (the original one will be hidden and the editor will be injected next to it).\n\t *\n\t * Moreover, the editor data will be set back to the original element once the editor is destroyed and when a form, in which\n\t * this element is contained, is submitted (if the original element is a `<textarea>`). This ensures seamless integration with native\n\t * web forms.\n\t *\n\t * If the initial data is passed, a detached editor will be created. In this case you need to insert it into the DOM manually.\n\t * It is available under the {@link module:editor-classic/classiceditorui~ClassicEditorUI#element `editor.ui.element`} property.\n\t *\n\t * @param {module:core/editor/editorconfig~EditorConfig} [config] The editor configuration.\n\t * @returns {Promise} A promise resolved once the editor is ready. The promise resolves with the created editor instance.\n\t */\n\tstatic create( sourceElementOrData, config = {} ) {\n\t\treturn new Promise( resolve => {\n\t\t\tconst editor = new this( sourceElementOrData, config );\n\n\t\t\tresolve(\n\t\t\t\teditor.initPlugins()\n\t\t\t\t\t.then( () => editor.ui.init( isElement( sourceElementOrData ) ? sourceElementOrData : null ) )\n\t\t\t\t\t.then( () => {\n\t\t\t\t\t\tif ( !isElement( sourceElementOrData ) && config.initialData ) {\n\t\t\t\t\t\t\t// Documented in core/editor/editorconfig.jdoc.\n\t\t\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t\t\t'editor-create-initial-data: ' +\n\t\t\t\t\t\t\t\t'The config.initialData option cannot be used together with initial data passed in Editor.create().',\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst initialData = config.initialData || getInitialData( sourceElementOrData );\n\n\t\t\t\t\t\treturn editor.data.init( initialData );\n\t\t\t\t\t} )\n\t\t\t\t\t.then( () => editor.fire( 'ready' ) )\n\t\t\t\t\t.then( () => editor )\n\t\t\t);\n\t\t} );\n\t}\n}\n\nmix( ClassicEditor, DataApiMixin );\nmix( ClassicEditor, ElementApiMixin );\n\nfunction getInitialData( sourceElementOrData ) {\n\treturn isElement( sourceElementOrData ) ? getDataFromElement( sourceElementOrData ) : sourceElementOrData;\n}\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.cloneWith` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @param {Function} [customizer] The function to customize cloning.\n * @returns {*} Returns the deep cloned value.\n * @see _.cloneWith\n * @example\n *\n * function customizer(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(true);\n *   }\n * }\n *\n * var el = _.cloneDeepWith(document.body, customizer);\n *\n * console.log(el === document.body);\n * // => false\n * console.log(el.nodeName);\n * // => 'BODY'\n * console.log(el.childNodes.length);\n * // => 20\n */\nfunction cloneDeepWith(value, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n}\n\nexport default cloneDeepWith;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.CKEditorInspector=t():e.CKEditorInspector=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=32)}([function(e,t,n){\"use strict\";e.exports=n(6)},function(e,t,n){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||\"\",r=e[3];if(!r)return n;if(t&&\"function\"==typeof btoa){var o=(a=r,\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+\" */\"),i=r.sources.map(function(e){return\"/*# sourceURL=\"+r.sourceRoot+e+\" */\"});return[n].concat(i).concat([o]).join(\"\\n\")}var a;return[n].join(\"\\n\")}(t,e);return t[2]?\"@media \"+t[2]+\"{\"+n+\"}\":n}).join(\"\")},t.i=function(e,n){\"string\"==typeof e&&(e=[[null,e,\"\"]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]=\"(\"+a[2]+\") and (\"+n+\")\"),t.push(a))}},t}},function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),l=function(e){var t={};return function(e,n){if(\"function\"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),s=null,c=0,u=[],p=n(14);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(y(r.parts[a],t))}else{var l=[];for(a=0;a<r.parts.length;a++)l.push(y(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:l}}}}function f(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}function h(e,t){var n=l(e.insertInto);if(!n)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var r=u[u.length-1];if(\"top\"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if(\"bottom\"===e.insertAt)n.appendChild(t);else{if(\"object\"!=typeof e.insertAt||!e.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var o=l(e.insertAt.before,n);n.insertBefore(t,o)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function g(e){var t=document.createElement(\"style\");if(void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return v(t,e.attrs),h(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function y(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i=\"function\"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=c++;n=s||(s=g(t)),r=x.bind(null,n,a,!1),o=x.bind(null,n,a,!0)}else e.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(n=function(e){var t=document.createElement(\"link\");return void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),e.attrs.rel=\"stylesheet\",v(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=p(r));o&&(r+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+\" */\");var a=new Blob([r],{type:\"text/css\"}),l=e.href;e.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}.bind(null,n,t),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute(\"media\",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(t=t||{}).attrs=\"object\"==typeof t.attrs?t.attrs:{},t.singleton||\"boolean\"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto=\"head\"),t.insertAt||(t.insertAt=\"bottom\");var n=f(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(l=i[a.id]).refs--,r.push(l)}e&&d(f(e,t),t);for(o=0;o<r.length;o++){var l;if(0===(l=r[o]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete i[l.id]}}}};var b,k=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join(\"\\n\")});function x(e,t,n,r){var o=n?\"\":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t,n){var r=n(17);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){\"use strict\";!function e(){if(\"undefined\"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&\"function\"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(7)},function(e,t,n){\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String(\"abc\");if(e[5]=\"de\",\"5\"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t[\"_\"+String.fromCharCode(n)]=n;if(\"0123456789\"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(\"\"))return!1;var r={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(e){r[e]=e}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},r)).join(\"\")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,l=function(e){if(null==e)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in n=Object(arguments[s]))o.call(n,c)&&(l[c]=n[c]);if(r){a=r(n);for(var u=0;u<a.length;u++)i.call(n,a[u])&&(l[a[u]]=n[a[u]])}}return l}},function(e,t,n){\"use strict\";\n/** @license React v16.8.4\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var r=n(5),o=\"function\"==typeof Symbol&&Symbol.for,i=o?Symbol.for(\"react.element\"):60103,a=o?Symbol.for(\"react.portal\"):60106,l=o?Symbol.for(\"react.fragment\"):60107,s=o?Symbol.for(\"react.strict_mode\"):60108,c=o?Symbol.for(\"react.profiler\"):60114,u=o?Symbol.for(\"react.provider\"):60109,p=o?Symbol.for(\"react.context\"):60110,d=o?Symbol.for(\"react.concurrent_mode\"):60111,f=o?Symbol.for(\"react.forward_ref\"):60112,h=o?Symbol.for(\"react.suspense\"):60113,m=o?Symbol.for(\"react.memo\"):60115,g=o?Symbol.for(\"react.lazy\"):60116,v=\"function\"==typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,n=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,r=0;r<t;r++)n+=\"&args[]=\"+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,o,i,a,l){if(!e){if(e=void 0,void 0===t)e=Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var s=[n,r,o,i,a,l],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name=\"Invariant Violation\"}throw e.framesToPop=1,e}}(!1,\"Minified React error #\"+e+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function x(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||b}function w(){}function E(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||b}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){\"object\"!=typeof e&&\"function\"!=typeof e&&null!=e&&y(\"85\"),this.updater.enqueueSetState(this,e,t,\"setState\")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,\"forceUpdate\")},w.prototype=x.prototype;var _=E.prototype=new w;_.constructor=E,r(_,x.prototype),_.isPureReactComponent=!0;var S={current:null},C={current:null},T=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r=void 0,o={},a=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(a=\"\"+t.key),t)T.call(t,r)&&!N.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:i,type:e,key:a,ref:l,props:o,_owner:C.current}}function z(e){return\"object\"==typeof e&&null!==e&&e.$$typeof===i}var R=/\\/+/g,O=[];function D(e,t,n,r){if(O.length){var o=O.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>O.length&&O.push(e)}function I(e,t,n){return null==e?0:function e(t,n,r,o){var l=typeof t;\"undefined\"!==l&&\"boolean\"!==l||(t=null);var s=!1;if(null===t)s=!0;else switch(l){case\"string\":case\"number\":s=!0;break;case\"object\":switch(t.$$typeof){case i:case a:s=!0}}if(s)return r(o,t,\"\"===n?\".\"+j(t,0):n),1;if(s=0,n=\"\"===n?\".\":n+\":\",Array.isArray(t))for(var c=0;c<t.length;c++){var u=n+j(l=t[c],c);s+=e(l,u,r,o)}else if(u=null===t||\"object\"!=typeof t?null:\"function\"==typeof(u=v&&t[v]||t[\"@@iterator\"])?u:null,\"function\"==typeof u)for(t=u.call(t),c=0;!(l=t.next()).done;)s+=e(l=l.value,u=n+j(l,c++),r,o);else\"object\"===l&&y(\"31\",\"[object Object]\"==(r=\"\"+t)?\"object with keys {\"+Object.keys(t).join(\", \")+\"}\":r,\"\");return s}(e,\"\",t,n)}function j(e,t){return\"object\"==typeof e&&null!==e&&null!=e.key?function(e){var t={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function A(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,function(e){return e}):null!=e&&(z(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?\"\":(\"\"+e.key).replace(R,\"$&/\")+\"/\")+n)),r.push(e))}function U(e,t,n,r,o){var i=\"\";null!=n&&(i=(\"\"+n).replace(R,\"$&/\")+\"/\"),I(e,L,t=D(t,i,r,o)),M(t)}function W(){var e=S.current;return null===e&&y(\"307\"),e}var F={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;I(e,A,t=D(null,null,t,n)),M(t)},count:function(e){return I(e,function(){return null},null)},toArray:function(e){var t=[];return U(e,t,null,function(e){return e}),t},only:function(e){return z(e)||y(\"143\"),e}},createRef:function(){return{current:null}},Component:x,PureComponent:E,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return W().useCallback(e,t)},useContext:function(e,t){return W().useContext(e,t)},useEffect:function(e,t){return W().useEffect(e,t)},useImperativeHandle:function(e,t,n){return W().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return W().useLayoutEffect(e,t)},useMemo:function(e,t){return W().useMemo(e,t)},useReducer:function(e,t,n){return W().useReducer(e,t,n)},useRef:function(e){return W().useRef(e)},useState:function(e){return W().useState(e)},Fragment:l,StrictMode:s,Suspense:h,createElement:P,cloneElement:function(e,t,n){null==e&&y(\"267\",e);var o=void 0,a=r({},e.props),l=e.key,s=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,c=C.current),void 0!==t.key&&(l=\"\"+t.key);var u=void 0;for(o in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)T.call(t,o)&&!N.hasOwnProperty(o)&&(a[o]=void 0===t[o]&&void 0!==u?u[o]:t[o])}if(1===(o=arguments.length-2))a.children=n;else if(1<o){u=Array(o);for(var p=0;p<o;p++)u[p]=arguments[p+2];a.children=u}return{$$typeof:i,type:e.type,key:l,ref:s,props:a,_owner:c}},createFactory:function(e){var t=P.bind(null,e);return t.type=e,t},isValidElement:z,version:\"16.8.4\",unstable_ConcurrentMode:d,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentOwner:C,assign:r}},H={default:F},B=H&&F||H;e.exports=B.default||B},function(e,t,n){\"use strict\";\n/** @license React v16.8.4\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var r=n(0),o=n(5),i=n(8);function a(e){for(var t=arguments.length-1,n=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,r=0;r<t;r++)n+=\"&args[]=\"+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,o,i,a,l){if(!e){if(e=void 0,void 0===t)e=Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var s=[n,r,o,i,a,l],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name=\"Invariant Violation\"}throw e.framesToPop=1,e}}(!1,\"Minified React error #\"+e+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",n)}r||a(\"227\");var l=!1,s=null,c=!1,u=null,p={onError:function(e){l=!0,s=e}};function d(e,t,n,r,o,i,a,c,u){l=!1,s=null,function(e,t,n,r,o,i,a,l,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}.apply(p,arguments)}var f=null,h={};function m(){if(f)for(var e in h){var t=h[e],n=f.indexOf(e);if(-1<n||a(\"96\",e),!v[n])for(var r in t.extractEvents||a(\"97\",e),v[n]=t,n=t.eventTypes){var o=void 0,i=n[r],l=t,s=r;y.hasOwnProperty(s)&&a(\"99\",s),y[s]=i;var c=i.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&g(c[o],l,s);o=!0}else i.registrationName?(g(i.registrationName,l,s),o=!0):o=!1;o||a(\"98\",r,e)}}}function g(e,t,n){b[e]&&a(\"100\",e),b[e]=t,k[e]=t.eventTypes[n].dependencies}var v=[],y={},b={},k={},x=null,w=null,E=null;function _(e,t,n){var r=e.type||\"unknown-event\";e.currentTarget=E(n),function(e,t,n,r,o,i,p,f,h){if(d.apply(this,arguments),l){if(l){var m=s;l=!1,s=null}else a(\"198\"),m=void 0;c||(c=!0,u=m)}}(r,t,void 0,e),e.currentTarget=null}function S(e,t){return null==t&&a(\"30\"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function C(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var T=null;function N(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)_(e,t[r],n[r]);else t&&_(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var P={injectEventPluginOrder:function(e){f&&a(\"101\"),f=Array.prototype.slice.call(e),m()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];h.hasOwnProperty(t)&&h[t]===r||(h[t]&&a(\"102\",t),h[t]=r,n=!0)}n&&m()}};function z(e,t){var n=e.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[t];e:switch(t){case\"onClick\":case\"onClickCapture\":case\"onDoubleClick\":case\"onDoubleClickCapture\":case\"onMouseDown\":case\"onMouseDownCapture\":case\"onMouseMove\":case\"onMouseMoveCapture\":case\"onMouseUp\":case\"onMouseUpCapture\":(r=!r.disabled)||(r=!(\"button\"===(e=e.type)||\"input\"===e||\"select\"===e||\"textarea\"===e)),e=!r;break e;default:e=!1}return e?null:(n&&\"function\"!=typeof n&&a(\"231\",t,typeof n),n)}function R(e){if(null!==e&&(T=S(T,e)),e=T,T=null,e&&(C(e,N),T&&a(\"95\"),c))throw e=u,c=!1,u=null,e}var O=Math.random().toString(36).slice(2),D=\"__reactInternalInstance$\"+O,M=\"__reactEventHandlers$\"+O;function I(e){if(e[D])return e[D];for(;!e[D];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[D]).tag||6===e.tag?e:null}function j(e){return!(e=e[D])||5!==e.tag&&6!==e.tag?null:e}function A(e){if(5===e.tag||6===e.tag)return e.stateNode;a(\"33\")}function L(e){return e[M]||null}function U(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function W(e,t,n){(t=z(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=S(n._dispatchListeners,t),n._dispatchInstances=S(n._dispatchInstances,e))}function F(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=U(t);for(t=n.length;0<t--;)W(n[t],\"captured\",e);for(t=0;t<n.length;t++)W(n[t],\"bubbled\",e)}}function H(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=z(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=S(n._dispatchListeners,t),n._dispatchInstances=S(n._dispatchInstances,e))}function B(e){e&&e.dispatchConfig.registrationName&&H(e._targetInst,null,e)}function V(e){C(e,F)}var $=!(\"undefined\"==typeof window||!window.document||!window.document.createElement);function Y(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[\"Webkit\"+e]=\"webkit\"+t,n[\"Moz\"+e]=\"moz\"+t,n}var X={animationend:Y(\"Animation\",\"AnimationEnd\"),animationiteration:Y(\"Animation\",\"AnimationIteration\"),animationstart:Y(\"Animation\",\"AnimationStart\"),transitionend:Y(\"Transition\",\"TransitionEnd\")},G={},Q={};function q(e){if(G[e])return G[e];if(!X[e])return e;var t,n=X[e];for(t in n)if(n.hasOwnProperty(t)&&t in Q)return G[e]=n[t];return e}$&&(Q=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete X.animationend.animation,delete X.animationiteration.animation,delete X.animationstart.animation),\"TransitionEvent\"in window||delete X.transitionend.transition);var Z=q(\"animationend\"),K=q(\"animationiteration\"),J=q(\"animationstart\"),ee=q(\"transitionend\"),te=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),ne=null,re=null,oe=null;function ie(){if(oe)return oe;var e,t,n=re,r=n.length,o=\"value\"in ne?ne.value:ne.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return oe=o.slice(e,1<t?1-t:void 0)}function ae(){return!0}function le(){return!1}function se(e,t,n,r){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):\"target\"===o?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ae:le,this.isPropagationStopped=le,this}function ce(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function ue(e){e instanceof this||a(\"279\"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function pe(e){e.eventPool=[],e.getPooled=ce,e.release=ue}o(se.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():\"unknown\"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ae)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():\"unknown\"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ae)},persist:function(){this.isPersistent=ae},isPersistent:le,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=le,this._dispatchInstances=this._dispatchListeners=null}}),se.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},se.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return o(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=o({},r.Interface,e),n.extend=r.extend,pe(n),n},pe(se);var de=se.extend({data:null}),fe=se.extend({data:null}),he=[9,13,27,32],me=$&&\"CompositionEvent\"in window,ge=null;$&&\"documentMode\"in document&&(ge=document.documentMode);var ve=$&&\"TextEvent\"in window&&!ge,ye=$&&(!me||ge&&8<ge&&11>=ge),be=String.fromCharCode(32),ke={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",captured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},xe=!1;function we(e,t){switch(e){case\"keyup\":return-1!==he.indexOf(t.keyCode);case\"keydown\":return 229!==t.keyCode;case\"keypress\":case\"mousedown\":case\"blur\":return!0;default:return!1}}function Ee(e){return\"object\"==typeof(e=e.detail)&&\"data\"in e?e.data:null}var _e=!1;var Se={eventTypes:ke,extractEvents:function(e,t,n,r){var o=void 0,i=void 0;if(me)e:{switch(e){case\"compositionstart\":o=ke.compositionStart;break e;case\"compositionend\":o=ke.compositionEnd;break e;case\"compositionupdate\":o=ke.compositionUpdate;break e}o=void 0}else _e?we(e,n)&&(o=ke.compositionEnd):\"keydown\"===e&&229===n.keyCode&&(o=ke.compositionStart);return o?(ye&&\"ko\"!==n.locale&&(_e||o!==ke.compositionStart?o===ke.compositionEnd&&_e&&(i=ie()):(re=\"value\"in(ne=r)?ne.value:ne.textContent,_e=!0)),o=de.getPooled(o,t,n,r),i?o.data=i:null!==(i=Ee(n))&&(o.data=i),V(o),i=o):i=null,(e=ve?function(e,t){switch(e){case\"compositionend\":return Ee(t);case\"keypress\":return 32!==t.which?null:(xe=!0,be);case\"textInput\":return(e=t.data)===be&&xe?null:e;default:return null}}(e,n):function(e,t){if(_e)return\"compositionend\"===e||!me&&we(e,t)?(e=ie(),oe=re=ne=null,_e=!1,e):null;switch(e){case\"paste\":return null;case\"keypress\":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case\"compositionend\":return ye&&\"ko\"!==t.locale?null:t.data;default:return null}}(e,n))?((t=fe.getPooled(ke.beforeInput,t,n,r)).data=e,V(t)):t=null,null===i?t:null===t?i:[i,t]}},Ce=null,Te=null,Ne=null;function Pe(e){if(e=w(e)){\"function\"!=typeof Ce&&a(\"280\");var t=x(e.stateNode);Ce(e.stateNode,e.type,t)}}function ze(e){Te?Ne?Ne.push(e):Ne=[e]:Te=e}function Re(){if(Te){var e=Te,t=Ne;if(Ne=Te=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Oe(e,t){return e(t)}function De(e,t,n){return e(t,n)}function Me(){}var Ie=!1;function je(e,t){if(Ie)return e(t);Ie=!0;try{return Oe(e,t)}finally{Ie=!1,(null!==Te||null!==Ne)&&(Me(),Re())}}var Ae={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Le(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return\"input\"===t?!!Ae[e.type]:\"textarea\"===t}function Ue(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function We(e){if(!$)return!1;var t=(e=\"on\"+e)in document;return t||((t=document.createElement(\"div\")).setAttribute(e,\"return;\"),t=\"function\"==typeof t[e]),t}function Fe(e){var t=e.type;return(e=e.nodeName)&&\"input\"===e.toLowerCase()&&(\"checkbox\"===t||\"radio\"===t)}function He(e){e._valueTracker||(e._valueTracker=function(e){var t=Fe(e)?\"checked\":\"value\",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=\"\"+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&\"function\"==typeof n.get&&\"function\"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=\"\"+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=\"\"+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Be(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=\"\";return e&&(r=Fe(e)?e.checked?\"true\":\"false\":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Ve=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ve.hasOwnProperty(\"ReactCurrentDispatcher\")||(Ve.ReactCurrentDispatcher={current:null});var $e=/^(.*)[\\\\\\/]/,Ye=\"function\"==typeof Symbol&&Symbol.for,Xe=Ye?Symbol.for(\"react.element\"):60103,Ge=Ye?Symbol.for(\"react.portal\"):60106,Qe=Ye?Symbol.for(\"react.fragment\"):60107,qe=Ye?Symbol.for(\"react.strict_mode\"):60108,Ze=Ye?Symbol.for(\"react.profiler\"):60114,Ke=Ye?Symbol.for(\"react.provider\"):60109,Je=Ye?Symbol.for(\"react.context\"):60110,et=Ye?Symbol.for(\"react.concurrent_mode\"):60111,tt=Ye?Symbol.for(\"react.forward_ref\"):60112,nt=Ye?Symbol.for(\"react.suspense\"):60113,rt=Ye?Symbol.for(\"react.memo\"):60115,ot=Ye?Symbol.for(\"react.lazy\"):60116,it=\"function\"==typeof Symbol&&Symbol.iterator;function at(e){return null===e||\"object\"!=typeof e?null:\"function\"==typeof(e=it&&e[it]||e[\"@@iterator\"])?e:null}function lt(e){if(null==e)return null;if(\"function\"==typeof e)return e.displayName||e.name||null;if(\"string\"==typeof e)return e;switch(e){case et:return\"ConcurrentMode\";case Qe:return\"Fragment\";case Ge:return\"Portal\";case Ze:return\"Profiler\";case qe:return\"StrictMode\";case nt:return\"Suspense\"}if(\"object\"==typeof e)switch(e.$$typeof){case Je:return\"Context.Consumer\";case Ke:return\"Context.Provider\";case tt:var t=e.render;return t=t.displayName||t.name||\"\",e.displayName||(\"\"!==t?\"ForwardRef(\"+t+\")\":\"ForwardRef\");case rt:return lt(e.type);case ot:if(e=1===e._status?e._result:null)return lt(e)}return null}function st(e){var t=\"\";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n=\"\";break e;default:var r=e._debugOwner,o=e._debugSource,i=lt(e.type);n=null,r&&(n=lt(r.type)),r=i,i=\"\",o?i=\" (at \"+o.fileName.replace($e,\"\")+\":\"+o.lineNumber+\")\":n&&(i=\" (created by \"+n+\")\"),n=\"\\n    in \"+(r||\"Unknown\")+i}t+=n,e=e.return}while(e);return t}var ct=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ut=Object.prototype.hasOwnProperty,pt={},dt={};function ft(e,t,n,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t}var ht={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(e){ht[e]=new ft(e,0,!1,e,null)}),[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(e){var t=e[0];ht[t]=new ft(t,1,!1,e[1],null)}),[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(e){ht[e]=new ft(e,2,!1,e.toLowerCase(),null)}),[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(e){ht[e]=new ft(e,2,!1,e,null)}),\"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(e){ht[e]=new ft(e,3,!1,e.toLowerCase(),null)}),[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(e){ht[e]=new ft(e,3,!0,e,null)}),[\"capture\",\"download\"].forEach(function(e){ht[e]=new ft(e,4,!1,e,null)}),[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(e){ht[e]=new ft(e,6,!1,e,null)}),[\"rowSpan\",\"start\"].forEach(function(e){ht[e]=new ft(e,5,!1,e.toLowerCase(),null)});var mt=/[\\-:]([a-z])/g;function gt(e){return e[1].toUpperCase()}function vt(e,t,n,r){var o=ht.hasOwnProperty(t)?ht[t]:null;(null!==o?0===o.type:!r&&(2<t.length&&(\"o\"===t[0]||\"O\"===t[0])&&(\"n\"===t[1]||\"N\"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case\"function\":case\"symbol\":return!0;case\"boolean\":return!r&&(null!==n?!n.acceptsBooleans:\"data-\"!==(e=e.toLowerCase().slice(0,5))&&\"aria-\"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!ut.call(dt,e)||!ut.call(pt,e)&&(ct.test(e)?dt[e]=!0:(pt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,\"\"+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&\"\":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?\"\":\"\"+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function yt(e){switch(typeof e){case\"boolean\":case\"number\":case\"object\":case\"string\":case\"undefined\":return e;default:return\"\"}}function bt(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function kt(e,t){var n=null==t.defaultValue?\"\":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=yt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:\"checkbox\"===t.type||\"radio\"===t.type?null!=t.checked:null!=t.value}}function xt(e,t){null!=(t=t.checked)&&vt(e,\"checked\",t,!1)}function wt(e,t){xt(e,t);var n=yt(t.value),r=t.type;if(null!=n)\"number\"===r?(0===n&&\"\"===e.value||e.value!=n)&&(e.value=\"\"+n):e.value!==\"\"+n&&(e.value=\"\"+n);else if(\"submit\"===r||\"reset\"===r)return void e.removeAttribute(\"value\");t.hasOwnProperty(\"value\")?_t(e,t.type,n):t.hasOwnProperty(\"defaultValue\")&&_t(e,t.type,yt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Et(e,t,n){if(t.hasOwnProperty(\"value\")||t.hasOwnProperty(\"defaultValue\")){var r=t.type;if(!(\"submit\"!==r&&\"reset\"!==r||void 0!==t.value&&null!==t.value))return;t=\"\"+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}\"\"!==(n=e.name)&&(e.name=\"\"),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,\"\"!==n&&(e.name=n)}function _t(e,t,n){\"number\"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=\"\"+e._wrapperState.initialValue:e.defaultValue!==\"\"+n&&(e.defaultValue=\"\"+n))}\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(e){var t=e.replace(mt,gt);ht[t]=new ft(t,1,!1,e,null)}),\"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(e){var t=e.replace(mt,gt);ht[t]=new ft(t,1,!1,e,\"http://www.w3.org/1999/xlink\")}),[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(e){var t=e.replace(mt,gt);ht[t]=new ft(t,1,!1,e,\"http://www.w3.org/XML/1998/namespace\")}),[\"tabIndex\",\"crossOrigin\"].forEach(function(e){ht[e]=new ft(e,1,!1,e.toLowerCase(),null)});var St={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function Ct(e,t,n){return(e=se.getPooled(St.change,e,t,n)).type=\"change\",ze(n),V(e),e}var Tt=null,Nt=null;function Pt(e){R(e)}function zt(e){if(Be(A(e)))return e}function Rt(e,t){if(\"change\"===e)return t}var Ot=!1;function Dt(){Tt&&(Tt.detachEvent(\"onpropertychange\",Mt),Nt=Tt=null)}function Mt(e){\"value\"===e.propertyName&&zt(Nt)&&je(Pt,e=Ct(Nt,e,Ue(e)))}function It(e,t,n){\"focus\"===e?(Dt(),Nt=n,(Tt=t).attachEvent(\"onpropertychange\",Mt)):\"blur\"===e&&Dt()}function jt(e){if(\"selectionchange\"===e||\"keyup\"===e||\"keydown\"===e)return zt(Nt)}function At(e,t){if(\"click\"===e)return zt(t)}function Lt(e,t){if(\"input\"===e||\"change\"===e)return zt(t)}$&&(Ot=We(\"input\")&&(!document.documentMode||9<document.documentMode));var Ut={eventTypes:St,_isInputEventSupported:Ot,extractEvents:function(e,t,n,r){var o=t?A(t):window,i=void 0,a=void 0,l=o.nodeName&&o.nodeName.toLowerCase();if(\"select\"===l||\"input\"===l&&\"file\"===o.type?i=Rt:Le(o)?Ot?i=Lt:(i=jt,a=It):(l=o.nodeName)&&\"input\"===l.toLowerCase()&&(\"checkbox\"===o.type||\"radio\"===o.type)&&(i=At),i&&(i=i(e,t)))return Ct(i,n,r);a&&a(e,o,t),\"blur\"===e&&(e=o._wrapperState)&&e.controlled&&\"number\"===o.type&&_t(o,\"number\",o.value)}},Wt=se.extend({view:null,detail:null}),Ft={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Ht(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ft[e])&&!!t[e]}function Bt(){return Ht}var Vt=0,$t=0,Yt=!1,Xt=!1,Gt=Wt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Bt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if(\"movementX\"in e)return e.movementX;var t=Vt;return Vt=e.screenX,Yt?\"mousemove\"===e.type?e.screenX-t:0:(Yt=!0,0)},movementY:function(e){if(\"movementY\"in e)return e.movementY;var t=$t;return $t=e.screenY,Xt?\"mousemove\"===e.type?e.screenY-t:0:(Xt=!0,0)}}),Qt=Gt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),qt={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",dependencies:[\"pointerout\",\"pointerover\"]}},Zt={eventTypes:qt,extractEvents:function(e,t,n,r){var o=\"mouseover\"===e||\"pointerover\"===e,i=\"mouseout\"===e||\"pointerout\"===e;if(o&&(n.relatedTarget||n.fromElement)||!i&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=t,t=(t=n.relatedTarget||n.toElement)?I(t):null):i=null,i===t)return null;var a=void 0,l=void 0,s=void 0,c=void 0;\"mouseout\"===e||\"mouseover\"===e?(a=Gt,l=qt.mouseLeave,s=qt.mouseEnter,c=\"mouse\"):\"pointerout\"!==e&&\"pointerover\"!==e||(a=Qt,l=qt.pointerLeave,s=qt.pointerEnter,c=\"pointer\");var u=null==i?o:A(i);if(o=null==t?o:A(t),(e=a.getPooled(l,i,n,r)).type=c+\"leave\",e.target=u,e.relatedTarget=o,(n=a.getPooled(s,t,n,r)).type=c+\"enter\",n.target=o,n.relatedTarget=u,r=t,i&&r)e:{for(o=r,c=0,a=t=i;a;a=U(a))c++;for(a=0,s=o;s;s=U(s))a++;for(;0<c-a;)t=U(t),c--;for(;0<a-c;)o=U(o),a--;for(;c--;){if(t===o||t===o.alternate)break e;t=U(t),o=U(o)}t=null}else t=null;for(o=t,t=[];i&&i!==o&&(null===(c=i.alternate)||c!==o);)t.push(i),i=U(i);for(i=[];r&&r!==o&&(null===(c=r.alternate)||c!==o);)i.push(r),r=U(r);for(r=0;r<t.length;r++)H(t[r],\"bubbled\",e);for(r=i.length;0<r--;)H(i[r],\"captured\",n);return[e,n]}};function Kt(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Jt=Object.prototype.hasOwnProperty;function en(e,t){if(Kt(e,t))return!0;if(\"object\"!=typeof e||null===e||\"object\"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Jt.call(t,n[r])||!Kt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&a(\"188\")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&a(\"188\"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,i=o?o.alternate:null;if(!o||!i)break;if(o.child===i.child){for(var l=o.child;l;){if(l===n)return nn(o),e;if(l===r)return nn(o),t;l=l.sibling}a(\"188\")}if(n.return!==r.return)n=o,r=i;else{l=!1;for(var s=o.child;s;){if(s===n){l=!0,n=o,r=i;break}if(s===r){l=!0,r=o,n=i;break}s=s.sibling}if(!l){for(s=i.child;s;){if(s===n){l=!0,n=i,r=o;break}if(s===r){l=!0,r=i,n=o;break}s=s.sibling}l||a(\"189\")}}n.alternate!==r&&a(\"190\")}return 3!==n.tag&&a(\"188\"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var on=se.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=se.extend({clipboardData:function(e){return\"clipboardData\"in e?e.clipboardData:window.clipboardData}}),ln=Wt.extend({relatedTarget:null});function sn(e){var t=e.keyCode;return\"charCode\"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var cn={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},un={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},pn=Wt.extend({key:function(e){if(e.key){var t=cn[e.key]||e.key;if(\"Unidentified\"!==t)return t}return\"keypress\"===e.type?13===(e=sn(e))?\"Enter\":String.fromCharCode(e):\"keydown\"===e.type||\"keyup\"===e.type?un[e.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Bt,charCode:function(e){return\"keypress\"===e.type?sn(e):0},keyCode:function(e){return\"keydown\"===e.type||\"keyup\"===e.type?e.keyCode:0},which:function(e){return\"keypress\"===e.type?sn(e):\"keydown\"===e.type||\"keyup\"===e.type?e.keyCode:0}}),dn=Gt.extend({dataTransfer:null}),fn=Wt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Bt}),hn=se.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Gt.extend({deltaX:function(e){return\"deltaX\"in e?e.deltaX:\"wheelDeltaX\"in e?-e.wheelDeltaX:0},deltaY:function(e){return\"deltaY\"in e?e.deltaY:\"wheelDeltaY\"in e?-e.wheelDeltaY:\"wheelDelta\"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),gn=[[\"abort\",\"abort\"],[Z,\"animationEnd\"],[K,\"animationIteration\"],[J,\"animationStart\"],[\"canplay\",\"canPlay\"],[\"canplaythrough\",\"canPlayThrough\"],[\"drag\",\"drag\"],[\"dragenter\",\"dragEnter\"],[\"dragexit\",\"dragExit\"],[\"dragleave\",\"dragLeave\"],[\"dragover\",\"dragOver\"],[\"durationchange\",\"durationChange\"],[\"emptied\",\"emptied\"],[\"encrypted\",\"encrypted\"],[\"ended\",\"ended\"],[\"error\",\"error\"],[\"gotpointercapture\",\"gotPointerCapture\"],[\"load\",\"load\"],[\"loadeddata\",\"loadedData\"],[\"loadedmetadata\",\"loadedMetadata\"],[\"loadstart\",\"loadStart\"],[\"lostpointercapture\",\"lostPointerCapture\"],[\"mousemove\",\"mouseMove\"],[\"mouseout\",\"mouseOut\"],[\"mouseover\",\"mouseOver\"],[\"playing\",\"playing\"],[\"pointermove\",\"pointerMove\"],[\"pointerout\",\"pointerOut\"],[\"pointerover\",\"pointerOver\"],[\"progress\",\"progress\"],[\"scroll\",\"scroll\"],[\"seeking\",\"seeking\"],[\"stalled\",\"stalled\"],[\"suspend\",\"suspend\"],[\"timeupdate\",\"timeUpdate\"],[\"toggle\",\"toggle\"],[\"touchmove\",\"touchMove\"],[ee,\"transitionEnd\"],[\"waiting\",\"waiting\"],[\"wheel\",\"wheel\"]],vn={},yn={};function bn(e,t){var n=e[0],r=\"on\"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+\"Capture\"},dependencies:[n],isInteractive:t},vn[e]=t,yn[n]=t}[[\"blur\",\"blur\"],[\"cancel\",\"cancel\"],[\"click\",\"click\"],[\"close\",\"close\"],[\"contextmenu\",\"contextMenu\"],[\"copy\",\"copy\"],[\"cut\",\"cut\"],[\"auxclick\",\"auxClick\"],[\"dblclick\",\"doubleClick\"],[\"dragend\",\"dragEnd\"],[\"dragstart\",\"dragStart\"],[\"drop\",\"drop\"],[\"focus\",\"focus\"],[\"input\",\"input\"],[\"invalid\",\"invalid\"],[\"keydown\",\"keyDown\"],[\"keypress\",\"keyPress\"],[\"keyup\",\"keyUp\"],[\"mousedown\",\"mouseDown\"],[\"mouseup\",\"mouseUp\"],[\"paste\",\"paste\"],[\"pause\",\"pause\"],[\"play\",\"play\"],[\"pointercancel\",\"pointerCancel\"],[\"pointerdown\",\"pointerDown\"],[\"pointerup\",\"pointerUp\"],[\"ratechange\",\"rateChange\"],[\"reset\",\"reset\"],[\"seeked\",\"seeked\"],[\"submit\",\"submit\"],[\"touchcancel\",\"touchCancel\"],[\"touchend\",\"touchEnd\"],[\"touchstart\",\"touchStart\"],[\"volumechange\",\"volumeChange\"]].forEach(function(e){bn(e,!0)}),gn.forEach(function(e){bn(e,!1)});var kn={eventTypes:vn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=yn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var o=yn[e];if(!o)return null;switch(e){case\"keypress\":if(0===sn(n))return null;case\"keydown\":case\"keyup\":e=pn;break;case\"blur\":case\"focus\":e=ln;break;case\"click\":if(2===n.button)return null;case\"auxclick\":case\"dblclick\":case\"mousedown\":case\"mousemove\":case\"mouseup\":case\"mouseout\":case\"mouseover\":case\"contextmenu\":e=Gt;break;case\"drag\":case\"dragend\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"dragstart\":case\"drop\":e=dn;break;case\"touchcancel\":case\"touchend\":case\"touchmove\":case\"touchstart\":e=fn;break;case Z:case K:case J:e=on;break;case ee:e=hn;break;case\"scroll\":e=Wt;break;case\"wheel\":e=mn;break;case\"copy\":case\"cut\":case\"paste\":e=an;break;case\"gotpointercapture\":case\"lostpointercapture\":case\"pointercancel\":case\"pointerdown\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"pointerup\":e=Qt;break;default:e=se}return V(t=e.getPooled(o,t,n,r)),t}},xn=kn.isInteractiveTopLevelEventType,wn=[];function En(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=I(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var o=Ue(e.nativeEvent);r=e.topLevelType;for(var i=e.nativeEvent,a=null,l=0;l<v.length;l++){var s=v[l];s&&(s=s.extractEvents(r,t,i,o))&&(a=S(a,s))}R(a)}}var _n=!0;function Sn(e,t){if(!t)return null;var n=(xn(e)?Tn:Nn).bind(null,e);t.addEventListener(e,n,!1)}function Cn(e,t){if(!t)return null;var n=(xn(e)?Tn:Nn).bind(null,e);t.addEventListener(e,n,!0)}function Tn(e,t){De(Nn,e,t)}function Nn(e,t){if(_n){var n=Ue(t);if(null===(n=I(n))||\"number\"!=typeof n.tag||2===tn(n)||(n=null),wn.length){var r=wn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{je(En,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>wn.length&&wn.push(e)}}}var Pn={},zn=0,Rn=\"_reactListenersID\"+(\"\"+Math.random()).slice(2);function On(e){return Object.prototype.hasOwnProperty.call(e,Rn)||(e[Rn]=zn++,Pn[e[Rn]]={}),Pn[e[Rn]]}function Dn(e){if(void 0===(e=e||(\"undefined\"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Mn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function In(e,t){var n,r=Mn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mn(r)}}function jn(){for(var e=window,t=Dn();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(e){break}t=Dn(e.document)}return t}function An(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(\"input\"===t&&(\"text\"===e.type||\"search\"===e.type||\"tel\"===e.type||\"url\"===e.type||\"password\"===e.type)||\"textarea\"===t||\"true\"===e.contentEditable)}function Ln(e){var t=jn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):\"contains\"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&An(n))if(t=r.start,void 0===(e=r.end)&&(e=t),\"selectionStart\"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=In(n,i);var a=In(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(\"function\"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Un=$&&\"documentMode\"in document&&11>=document.documentMode,Wn={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},Fn=null,Hn=null,Bn=null,Vn=!1;function $n(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Vn||null==Fn||Fn!==Dn(n)?null:(\"selectionStart\"in(n=Fn)&&An(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Bn&&en(Bn,n)?null:(Bn=n,(e=se.getPooled(Wn.select,Hn,e,t)).type=\"select\",e.target=Fn,V(e),e))}var Yn={eventTypes:Wn,extractEvents:function(e,t,n,r){var o,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(o=!i)){e:{i=On(i),o=k.onSelect;for(var a=0;a<o.length;a++){var l=o[a];if(!i.hasOwnProperty(l)||!i[l]){i=!1;break e}}i=!0}o=!i}if(o)return null;switch(i=t?A(t):window,e){case\"focus\":(Le(i)||\"true\"===i.contentEditable)&&(Fn=i,Hn=t,Bn=null);break;case\"blur\":Bn=Hn=Fn=null;break;case\"mousedown\":Vn=!0;break;case\"contextmenu\":case\"mouseup\":case\"dragend\":return Vn=!1,$n(n,r);case\"selectionchange\":if(Un)break;case\"keydown\":case\"keyup\":return $n(n,r)}return null}};function Xn(e,t){return e=o({children:void 0},t),(t=function(e){var t=\"\";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Gn(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t[\"$\"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty(\"$\"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=\"\"+yt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Qn(e,t){return null!=t.dangerouslySetInnerHTML&&a(\"91\"),o({},t,{value:void 0,defaultValue:void 0,children:\"\"+e._wrapperState.initialValue})}function qn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&a(\"92\"),Array.isArray(t)&&(1>=t.length||a(\"93\"),t=t[0]),n=t),null==n&&(n=\"\")),e._wrapperState={initialValue:yt(n)}}function Zn(e,t){var n=yt(t.value),r=yt(t.defaultValue);null!=n&&((n=\"\"+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=\"\"+r)}function Kn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}P.injectEventPluginOrder(\"ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \")),x=L,w=j,E=A,P.injectEventPluginsByName({SimpleEventPlugin:kn,EnterLeaveEventPlugin:Zt,ChangeEventPlugin:Ut,SelectEventPlugin:Yn,BeforeInputEventPlugin:Se});var Jn={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};function er(e){switch(e){case\"svg\":return\"http://www.w3.org/2000/svg\";case\"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function tr(e,t){return null==e||\"http://www.w3.org/1999/xhtml\"===e?er(t):\"http://www.w3.org/2000/svg\"===e&&\"foreignObject\"===t?\"http://www.w3.org/1999/xhtml\":e}var nr,rr=void 0,or=(nr=function(e,t){if(e.namespaceURI!==Jn.svg||\"innerHTML\"in e)e.innerHTML=t;else{for((rr=rr||document.createElement(\"div\")).innerHTML=\"<svg>\"+t+\"</svg>\",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},\"undefined\"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(e,t)})}:nr);function ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ar={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lr=[\"Webkit\",\"ms\",\"Moz\",\"O\"];function sr(e,t,n){return null==t||\"boolean\"==typeof t||\"\"===t?\"\":n||\"number\"!=typeof t||0===t||ar.hasOwnProperty(e)&&ar[e]?(\"\"+t).trim():t+\"px\"}function cr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf(\"--\"),o=sr(n,t[n],r);\"float\"===n&&(n=\"cssFloat\"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ar).forEach(function(e){lr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ar[t]=ar[e]})});var ur=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pr(e,t){t&&(ur[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a(\"137\",e,\"\"),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a(\"60\"),\"object\"==typeof t.dangerouslySetInnerHTML&&\"__html\"in t.dangerouslySetInnerHTML||a(\"61\")),null!=t.style&&\"object\"!=typeof t.style&&a(\"62\",\"\"))}function dr(e,t){if(-1===e.indexOf(\"-\"))return\"string\"==typeof t.is;switch(e){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":return!1;default:return!0}}function fr(e,t){var n=On(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=k[t];for(var r=0;r<t.length;r++){var o=t[r];if(!n.hasOwnProperty(o)||!n[o]){switch(o){case\"scroll\":Cn(\"scroll\",e);break;case\"focus\":case\"blur\":Cn(\"focus\",e),Cn(\"blur\",e),n.blur=!0,n.focus=!0;break;case\"cancel\":case\"close\":We(o)&&Cn(o,e);break;case\"invalid\":case\"submit\":case\"reset\":break;default:-1===te.indexOf(o)&&Sn(o,e)}n[o]=!0}}}function hr(){}var mr=null,gr=null;function vr(e,t){switch(e){case\"button\":case\"input\":case\"select\":case\"textarea\":return!!t.autoFocus}return!1}function yr(e,t){return\"textarea\"===e||\"option\"===e||\"noscript\"===e||\"string\"==typeof t.children||\"number\"==typeof t.children||\"object\"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var br=\"function\"==typeof setTimeout?setTimeout:void 0,kr=\"function\"==typeof clearTimeout?clearTimeout:void 0,xr=i.unstable_scheduleCallback,wr=i.unstable_cancelCallback;function Er(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function _r(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Sr=[],Cr=-1;function Tr(e){0>Cr||(e.current=Sr[Cr],Sr[Cr]=null,Cr--)}function Nr(e,t){Sr[++Cr]=e.current,e.current=t}var Pr={},zr={current:Pr},Rr={current:!1},Or=Pr;function Dr(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mr(e){return null!=(e=e.childContextTypes)}function Ir(e){Tr(Rr),Tr(zr)}function jr(e){Tr(Rr),Tr(zr)}function Ar(e,t,n){zr.current!==Pr&&a(\"168\"),Nr(zr,t),Nr(Rr,n)}function Lr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,\"function\"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in e||a(\"108\",lt(t)||\"Unknown\",i);return o({},n,r)}function Ur(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Pr,Or=zr.current,Nr(zr,t),Nr(Rr,Rr.current),!0}function Wr(e,t,n){var r=e.stateNode;r||a(\"169\"),n?(t=Lr(e,t,Or),r.__reactInternalMemoizedMergedChildContext=t,Tr(Rr),Tr(zr),Nr(zr,t)):Tr(Rr),Nr(Rr,n)}var Fr=null,Hr=null;function Br(e){return function(t){try{return e(t)}catch(e){}}}function Vr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function $r(e,t,n,r){return new Vr(e,t,n,r)}function Yr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Xr(e,t){var n=e.alternate;return null===n?((n=$r(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gr(e,t,n,r,o,i){var l=2;if(r=e,\"function\"==typeof e)Yr(e)&&(l=1);else if(\"string\"==typeof e)l=5;else e:switch(e){case Qe:return Qr(n.children,o,i,t);case et:return qr(n,3|o,i,t);case qe:return qr(n,2|o,i,t);case Ze:return(e=$r(12,n,t,4|o)).elementType=Ze,e.type=Ze,e.expirationTime=i,e;case nt:return(e=$r(13,n,t,o)).elementType=nt,e.type=nt,e.expirationTime=i,e;default:if(\"object\"==typeof e&&null!==e)switch(e.$$typeof){case Ke:l=10;break e;case Je:l=9;break e;case tt:l=11;break e;case rt:l=14;break e;case ot:l=16,r=null;break e}a(\"130\",null==e?e:typeof e,\"\")}return(t=$r(l,n,t,o)).elementType=e,t.type=r,t.expirationTime=i,t}function Qr(e,t,n,r){return(e=$r(7,e,r,t)).expirationTime=n,e}function qr(e,t,n,r){return e=$r(8,e,r,t),t=0==(1&t)?qe:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Zr(e,t,n){return(e=$r(6,e,null,t)).expirationTime=n,e}function Kr(e,t,n){return(t=$r(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),no(t,e)}function eo(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),no(t,e)}function to(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function no(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,o=t.earliestPendingTime,i=t.latestPingedTime;0===(o=0!==o?o:i)&&(0===e||r<e)&&(o=r),0!==(e=o)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=o,t.expirationTime=e}function ro(e,t){if(e&&e.defaultProps)for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var oo=(new r.Component).refs;function io(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var ao={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=wl(),o=qi(r=Qa(r,e));o.payload=t,null!=n&&(o.callback=n),Ba(),Ki(e,o),Ka(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=wl(),o=qi(r=Qa(r,e));o.tag=Vi,o.payload=t,null!=n&&(o.callback=n),Ba(),Ki(e,o),Ka(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=wl(),r=qi(n=Qa(n,e));r.tag=$i,null!=t&&(r.callback=t),Ba(),Ki(e,r),Ka(e,n)}};function lo(e,t,n,r,o,i,a){return\"function\"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(o,i))}function so(e,t,n){var r=!1,o=Pr,i=t.contextType;return\"object\"==typeof i&&null!==i?i=Hi(i):(o=Mr(t)?Or:zr.current,i=(r=null!=(r=t.contextTypes))?Dr(e,o):Pr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function co(e,t,n,r){e=t.state,\"function\"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),\"function\"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function uo(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=oo;var i=t.contextType;\"object\"==typeof i&&null!==i?o.context=Hi(i):(i=Mr(t)?Or:zr.current,o.context=Dr(e,i)),null!==(i=e.updateQueue)&&(na(e,i,n,o,r),o.state=e.memoizedState),\"function\"==typeof(i=t.getDerivedStateFromProps)&&(io(e,t,i,n),o.state=e.memoizedState),\"function\"==typeof t.getDerivedStateFromProps||\"function\"==typeof o.getSnapshotBeforeUpdate||\"function\"!=typeof o.UNSAFE_componentWillMount&&\"function\"!=typeof o.componentWillMount||(t=o.state,\"function\"==typeof o.componentWillMount&&o.componentWillMount(),\"function\"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ao.enqueueReplaceState(o,o.state,null),null!==(i=e.updateQueue)&&(na(e,i,n,o,r),o.state=e.memoizedState)),\"function\"==typeof o.componentDidMount&&(e.effectTag|=4)}var po=Array.isArray;function fo(e,t,n){if(null!==(e=n.ref)&&\"function\"!=typeof e&&\"object\"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a(\"309\"),r=n.stateNode),r||a(\"147\",e);var o=\"\"+e;return null!==t&&null!==t.ref&&\"function\"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs;t===oo&&(t=r.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}\"string\"!=typeof e&&a(\"284\"),n._owner||a(\"290\",e)}return e}function ho(e,t){\"textarea\"!==e.type&&a(\"31\",\"[object Object]\"===Object.prototype.toString.call(t)?\"object with keys {\"+Object.keys(t).join(\", \")+\"}\":t,\"\")}function mo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return(e=Xr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function l(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Zr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=fo(e,t,n),r.return=e,r):((r=Gr(n.type,n.key,n.props,null,e.mode,r)).ref=fo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function p(e,t,n,r,i){return null===t||7!==t.tag?((t=Qr(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if(\"string\"==typeof t||\"number\"==typeof t)return(t=Zr(\"\"+t,e.mode,n)).return=e,t;if(\"object\"==typeof t&&null!==t){switch(t.$$typeof){case Xe:return(n=Gr(t.type,t.key,t.props,null,e.mode,n)).ref=fo(e,null,t),n.return=e,n;case Ge:return(t=Kr(t,e.mode,n)).return=e,t}if(po(t)||at(t))return(t=Qr(t,e.mode,n,null)).return=e,t;ho(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if(\"string\"==typeof n||\"number\"==typeof n)return null!==o?null:s(e,t,\"\"+n,r);if(\"object\"==typeof n&&null!==n){switch(n.$$typeof){case Xe:return n.key===o?n.type===Qe?p(e,t,n.props.children,r,o):c(e,t,n,r):null;case Ge:return n.key===o?u(e,t,n,r):null}if(po(n)||at(n))return null!==o?null:p(e,t,n,r,null);ho(e,n)}return null}function h(e,t,n,r,o){if(\"string\"==typeof r||\"number\"==typeof r)return s(t,e=e.get(n)||null,\"\"+r,o);if(\"object\"==typeof r&&null!==r){switch(r.$$typeof){case Xe:return e=e.get(null===r.key?n:r.key)||null,r.type===Qe?p(t,e,r.props.children,o,r.key):c(t,e,r,o);case Ge:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(po(r)||at(r))return p(t,e=e.get(n)||null,r,o,null);ho(t,r)}return null}function m(o,a,l,s){for(var c=null,u=null,p=a,m=a=0,g=null;null!==p&&m<l.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var v=f(o,p,l[m],s);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(o,p),a=i(v,a,m),null===u?c=v:u.sibling=v,u=v,p=g}if(m===l.length)return n(o,p),c;if(null===p){for(;m<l.length;m++)(p=d(o,l[m],s))&&(a=i(p,a,m),null===u?c=p:u.sibling=p,u=p);return c}for(p=r(o,p);m<l.length;m++)(g=h(p,o,m,l[m],s))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=i(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&p.forEach(function(e){return t(o,e)}),c}function g(o,l,s,c){var u=at(s);\"function\"!=typeof u&&a(\"150\"),null==(s=u.call(s))&&a(\"151\");for(var p=u=null,m=l,g=l=0,v=null,y=s.next();null!==m&&!y.done;g++,y=s.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(o,m,y.value,c);if(null===b){m||(m=v);break}e&&m&&null===b.alternate&&t(o,m),l=i(b,l,g),null===p?u=b:p.sibling=b,p=b,m=v}if(y.done)return n(o,m),u;if(null===m){for(;!y.done;g++,y=s.next())null!==(y=d(o,y.value,c))&&(l=i(y,l,g),null===p?u=y:p.sibling=y,p=y);return u}for(m=r(o,m);!y.done;g++,y=s.next())null!==(y=h(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),l=i(y,l,g),null===p?u=y:p.sibling=y,p=y);return e&&m.forEach(function(e){return t(o,e)}),u}return function(e,r,i,s){var c=\"object\"==typeof i&&null!==i&&i.type===Qe&&null===i.key;c&&(i=i.props.children);var u=\"object\"==typeof i&&null!==i;if(u)switch(i.$$typeof){case Xe:e:{for(u=i.key,c=r;null!==c;){if(c.key===u){if(7===c.tag?i.type===Qe:c.elementType===i.type){n(e,c.sibling),(r=o(c,i.type===Qe?i.props.children:i.props)).ref=fo(e,c,i),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}i.type===Qe?((r=Qr(i.props.children,e.mode,s,i.key)).return=e,e=r):((s=Gr(i.type,i.key,i.props,null,e.mode,s)).ref=fo(e,r,i),s.return=e,e=s)}return l(e);case Ge:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=o(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Kr(i,e.mode,s)).return=e,e=r}return l(e)}if(\"string\"==typeof i||\"number\"==typeof i)return i=\"\"+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,i)).return=e,e=r):(n(e,r),(r=Zr(i,e.mode,s)).return=e,e=r),l(e);if(po(i))return m(e,r,i,s);if(at(i))return g(e,r,i,s);if(u&&ho(e,i),void 0===i&&!c)switch(e.tag){case 1:case 0:a(\"152\",(s=e.type).displayName||s.name||\"Component\")}return n(e,r)}}var go=mo(!0),vo=mo(!1),yo={},bo={current:yo},ko={current:yo},xo={current:yo};function wo(e){return e===yo&&a(\"174\"),e}function Eo(e,t){Nr(xo,t),Nr(ko,e),Nr(bo,yo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,\"\");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Tr(bo),Nr(bo,t)}function _o(e){Tr(bo),Tr(ko),Tr(xo)}function So(e){wo(xo.current);var t=wo(bo.current),n=tr(t,e.type);t!==n&&(Nr(ko,e),Nr(bo,n))}function Co(e){ko.current===e&&(Tr(bo),Tr(ko))}var To=0,No=2,Po=4,zo=8,Ro=16,Oo=32,Do=64,Mo=128,Io=Ve.ReactCurrentDispatcher,jo=0,Ao=null,Lo=null,Uo=null,Wo=null,Fo=null,Ho=null,Bo=0,Vo=null,$o=0,Yo=!1,Xo=null,Go=0;function Qo(){a(\"307\")}function qo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function Zo(e,t,n,r,o,i){if(jo=i,Ao=t,Uo=null!==e?e.memoizedState:null,Io.current=null===Uo?ui:pi,t=n(r,o),Yo){do{Yo=!1,Go+=1,Uo=null!==e?e.memoizedState:null,Ho=Wo,Vo=Fo=Lo=null,Io.current=pi,t=n(r,o)}while(Yo);Xo=null,Go=0}return Io.current=ci,(e=Ao).memoizedState=Wo,e.expirationTime=Bo,e.updateQueue=Vo,e.effectTag|=$o,e=null!==Lo&&null!==Lo.next,jo=0,Ho=Fo=Wo=Uo=Lo=Ao=null,Bo=0,Vo=null,$o=0,e&&a(\"300\"),t}function Ko(){Io.current=ci,jo=0,Ho=Fo=Wo=Uo=Lo=Ao=null,Bo=0,Vo=null,$o=0,Yo=!1,Xo=null,Go=0}function Jo(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Fo?Wo=Fo=e:Fo=Fo.next=e,Fo}function ei(){if(null!==Ho)Ho=(Fo=Ho).next,Uo=null!==(Lo=Uo)?Lo.next:null;else{null===Uo&&a(\"310\");var e={memoizedState:(Lo=Uo).memoizedState,baseState:Lo.baseState,queue:Lo.queue,baseUpdate:Lo.baseUpdate,next:null};Fo=null===Fo?Wo=e:Fo.next=e,Uo=Lo.next}return Fo}function ti(e,t){return\"function\"==typeof t?t(e):t}function ni(e){var t=ei(),n=t.queue;if(null===n&&a(\"311\"),0<Go){var r=n.dispatch;if(null!==Xo){var o=Xo.get(n);if(void 0!==o){Xo.delete(n);var i=t.memoizedState;do{i=e(i,o.action),o=o.next}while(null!==o);return Kt(i,t.memoizedState)||(wi=!0),t.memoizedState=i,t.baseUpdate===n.last&&(t.baseState=i),n.eagerReducer=e,n.eagerState=i,[i,r]}}return[t.memoizedState,r]}r=n.last;var l=t.baseUpdate;if(i=t.baseState,null!==l?(null!==r&&(r.next=null),r=l.next):r=null!==r?r.next:null,null!==r){var s=o=null,c=r,u=!1;do{var p=c.expirationTime;p<jo?(u||(u=!0,s=l,o=i),p>Bo&&(Bo=p)):i=c.eagerReducer===e?c.eagerState:e(i,c.action),l=c,c=c.next}while(null!==c&&c!==r);u||(s=l,o=i),Kt(i,t.memoizedState)||(wi=!0),t.memoizedState=i,t.baseUpdate=s,t.baseState=o,n.eagerReducer=e,n.eagerState=i}return[t.memoizedState,n.dispatch]}function ri(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Vo?(Vo={lastEffect:null}).lastEffect=e.next=e:null===(t=Vo.lastEffect)?Vo.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Vo.lastEffect=e),e}function oi(e,t,n,r){var o=Jo();$o|=e,o.memoizedState=ri(t,n,void 0,void 0===r?null:r)}function ii(e,t,n,r){var o=ei();r=void 0===r?null:r;var i=void 0;if(null!==Lo){var a=Lo.memoizedState;if(i=a.destroy,null!==r&&qo(r,a.deps))return void ri(To,n,i,r)}$o|=e,o.memoizedState=ri(t,n,i,r)}function ai(e,t){return\"function\"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function li(){}function si(e,t,n){25>Go||a(\"301\");var r=e.alternate;if(e===Ao||null!==r&&r===Ao)if(Yo=!0,e={expirationTime:jo,action:n,eagerReducer:null,eagerState:null,next:null},null===Xo&&(Xo=new Map),void 0===(n=Xo.get(t)))Xo.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Ba();var o=wl(),i={expirationTime:o=Qa(o,e),action:n,eagerReducer:null,eagerState:null,next:null},l=t.last;if(null===l)i.next=i;else{var s=l.next;null!==s&&(i.next=s),l.next=i}if(t.last=i,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.eagerReducer))try{var c=t.eagerState,u=r(c,n);if(i.eagerReducer=r,i.eagerState=u,Kt(u,c))return}catch(e){}Ka(e,o)}}var ci={readContext:Hi,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo},ui={readContext:Hi,useCallback:function(e,t){return Jo().memoizedState=[e,void 0===t?null:t],e},useContext:Hi,useEffect:function(e,t){return oi(516,Mo|Do,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,oi(4,Po|Oo,ai.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oi(4,Po|Oo,e,t)},useMemo:function(e,t){var n=Jo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Jo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,eagerReducer:e,eagerState:t}).dispatch=si.bind(null,Ao,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Jo().memoizedState=e},useState:function(e){var t=Jo();return\"function\"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,eagerReducer:ti,eagerState:e}).dispatch=si.bind(null,Ao,e),[t.memoizedState,e]},useDebugValue:li},pi={readContext:Hi,useCallback:function(e,t){var n=ei();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&qo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Hi,useEffect:function(e,t){return ii(516,Mo|Do,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ii(4,Po|Oo,ai.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ii(4,Po|Oo,e,t)},useMemo:function(e,t){var n=ei();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&qo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ni,useRef:function(){return ei().memoizedState},useState:function(e){return ni(ti)},useDebugValue:li},di=null,fi=null,hi=!1;function mi(e,t){var n=$r(5,null,null,0);n.elementType=\"DELETED\",n.type=\"DELETED\",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function gi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=\"\"===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function vi(e){if(hi){var t=fi;if(t){var n=t;if(!gi(e,t)){if(!(t=Er(n))||!gi(e,t))return e.effectTag|=2,hi=!1,void(di=e);mi(di,n)}di=e,fi=_r(t)}else e.effectTag|=2,hi=!1,di=e}}function yi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;di=e}function bi(e){if(e!==di)return!1;if(!hi)return yi(e),hi=!0,!1;var t=e.type;if(5!==e.tag||\"head\"!==t&&\"body\"!==t&&!yr(t,e.memoizedProps))for(t=fi;t;)mi(e,t),t=Er(t);return yi(e),fi=di?Er(e.stateNode):null,!0}function ki(){fi=di=null,hi=!1}var xi=Ve.ReactCurrentOwner,wi=!1;function Ei(e,t,n,r){t.child=null===e?vo(t,null,n,r):go(t,e.child,n,r)}function _i(e,t,n,r,o){n=n.render;var i=t.ref;return Fi(t,o),r=Zo(e,t,n,r,i,o),null===e||wi?(t.effectTag|=1,Ei(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),Di(e,t,o))}function Si(e,t,n,r,o,i){if(null===e){var a=n.type;return\"function\"!=typeof a||Yr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gr(n.type,null,r,null,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ci(e,t,a,r,o,i))}return a=e.child,o<i&&(o=a.memoizedProps,(n=null!==(n=n.compare)?n:en)(o,r)&&e.ref===t.ref)?Di(e,t,i):(t.effectTag|=1,(e=Xr(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ci(e,t,n,r,o,i){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(wi=!1,o<i)?Di(e,t,i):Ni(e,t,n,r,i)}function Ti(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ni(e,t,n,r,o){var i=Mr(n)?Or:zr.current;return i=Dr(t,i),Fi(t,o),n=Zo(e,t,n,r,i,o),null===e||wi?(t.effectTag|=1,Ei(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),Di(e,t,o))}function Pi(e,t,n,r,o){if(Mr(n)){var i=!0;Ur(t)}else i=!1;if(Fi(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),so(t,n,r),uo(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,l=t.memoizedProps;a.props=l;var s=a.context,c=n.contextType;\"object\"==typeof c&&null!==c?c=Hi(c):c=Dr(t,c=Mr(n)?Or:zr.current);var u=n.getDerivedStateFromProps,p=\"function\"==typeof u||\"function\"==typeof a.getSnapshotBeforeUpdate;p||\"function\"!=typeof a.UNSAFE_componentWillReceiveProps&&\"function\"!=typeof a.componentWillReceiveProps||(l!==r||s!==c)&&co(t,a,r,c),Xi=!1;var d=t.memoizedState;s=a.state=d;var f=t.updateQueue;null!==f&&(na(t,f,r,a,o),s=t.memoizedState),l!==r||d!==s||Rr.current||Xi?(\"function\"==typeof u&&(io(t,n,u,r),s=t.memoizedState),(l=Xi||lo(t,n,l,r,d,s,c))?(p||\"function\"!=typeof a.UNSAFE_componentWillMount&&\"function\"!=typeof a.componentWillMount||(\"function\"==typeof a.componentWillMount&&a.componentWillMount(),\"function\"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),\"function\"==typeof a.componentDidMount&&(t.effectTag|=4)):(\"function\"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=c,r=l):(\"function\"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,l=t.memoizedProps,a.props=t.type===t.elementType?l:ro(t.type,l),s=a.context,\"object\"==typeof(c=n.contextType)&&null!==c?c=Hi(c):c=Dr(t,c=Mr(n)?Or:zr.current),(p=\"function\"==typeof(u=n.getDerivedStateFromProps)||\"function\"==typeof a.getSnapshotBeforeUpdate)||\"function\"!=typeof a.UNSAFE_componentWillReceiveProps&&\"function\"!=typeof a.componentWillReceiveProps||(l!==r||s!==c)&&co(t,a,r,c),Xi=!1,s=t.memoizedState,d=a.state=s,null!==(f=t.updateQueue)&&(na(t,f,r,a,o),d=t.memoizedState),l!==r||s!==d||Rr.current||Xi?(\"function\"==typeof u&&(io(t,n,u,r),d=t.memoizedState),(u=Xi||lo(t,n,l,r,s,d,c))?(p||\"function\"!=typeof a.UNSAFE_componentWillUpdate&&\"function\"!=typeof a.componentWillUpdate||(\"function\"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,c),\"function\"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,c)),\"function\"==typeof a.componentDidUpdate&&(t.effectTag|=4),\"function\"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):(\"function\"!=typeof a.componentDidUpdate||l===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),\"function\"!=typeof a.getSnapshotBeforeUpdate||l===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=c,r=u):(\"function\"!=typeof a.componentDidUpdate||l===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),\"function\"!=typeof a.getSnapshotBeforeUpdate||l===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return zi(e,t,n,r,i,o)}function zi(e,t,n,r,o,i){Ti(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return o&&Wr(t,n,!1),Di(e,t,i);r=t.stateNode,xi.current=t;var l=a&&\"function\"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=go(t,e.child,null,i),t.child=go(t,null,l,i)):Ei(e,t,l,i),t.memoizedState=r.state,o&&Wr(t,n,!0),t.child}function Ri(e){var t=e.stateNode;t.pendingContext?Ar(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ar(0,t.context,!1),Eo(e,t.containerInfo)}function Oi(e,t,n){var r=t.mode,o=t.pendingProps,i=t.memoizedState;if(0==(64&t.effectTag)){i=null;var a=!1}else i={timedOutAt:null!==i?i.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var l=o.fallback;e=Qr(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Qr(l,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=vo(t,null,o.children,n);else null!==e.memoizedState?(l=(r=e.child).sibling,a?(n=o.fallback,o=Xr(r,r.pendingProps),0==(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(o.child=a)),r=o.sibling=Xr(l,n,l.expirationTime),n=o,o.childExpirationTime=0,n.return=r.return=t):n=r=go(t,r.child,o.children,n)):(l=e.child,a?(a=o.fallback,(o=Qr(null,r,0,null)).child=l,0==(1&t.mode)&&(o.child=null!==t.memoizedState?t.child.child:t.child),(r=o.sibling=Qr(a,r,n,null)).effectTag|=2,n=o,o.childExpirationTime=0,n.return=r.return=t):r=n=go(t,l,o.children,n)),t.stateNode=e.stateNode;return t.memoizedState=i,t.child=n,r}function Di(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&a(\"153\"),null!==t.child){for(n=Xr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Xr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Mi(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Rr.current)wi=!0;else if(r<n){switch(wi=!1,t.tag){case 3:Ri(t),ki();break;case 5:So(t);break;case 1:Mr(t.type)&&Ur(t);break;case 4:Eo(t,t.stateNode.containerInfo);break;case 10:Ui(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Oi(e,t,n):null!==(t=Di(e,t,n))?t.sibling:null}return Di(e,t,n)}}else wi=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var o=Dr(t,zr.current);if(Fi(t,n),o=Zo(null,t,r,e,o,n),t.effectTag|=1,\"object\"==typeof o&&null!==o&&\"function\"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,Ko(),Mr(r)){var i=!0;Ur(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var l=r.getDerivedStateFromProps;\"function\"==typeof l&&io(t,r,l,e),o.updater=ao,t.stateNode=o,o._reactInternalFiber=t,uo(t,r,e,n),t=zi(null,t,r,!0,i,n)}else t.tag=0,Ei(null,t,o,n),t=t.child;return t;case 16:switch(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),i=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(o),t.type=e,o=t.tag=function(e){if(\"function\"==typeof e)return Yr(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),i=ro(e,i),l=void 0,o){case 0:l=Ni(null,t,e,i,n);break;case 1:l=Pi(null,t,e,i,n);break;case 11:l=_i(null,t,e,i,n);break;case 14:l=Si(null,t,e,ro(e.type,i),r,n);break;default:a(\"306\",e,\"\")}return l;case 0:return r=t.type,o=t.pendingProps,Ni(e,t,r,o=t.elementType===r?o:ro(r,o),n);case 1:return r=t.type,o=t.pendingProps,Pi(e,t,r,o=t.elementType===r?o:ro(r,o),n);case 3:return Ri(t),null===(r=t.updateQueue)&&a(\"282\"),o=null!==(o=t.memoizedState)?o.element:null,na(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===o?(ki(),t=Di(e,t,n)):(o=t.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(fi=_r(t.stateNode.containerInfo),di=t,o=hi=!0),o?(t.effectTag|=2,t.child=vo(t,null,r,n)):(Ei(e,t,r,n),ki()),t=t.child),t;case 5:return So(t),null===e&&vi(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,l=o.children,yr(r,o)?l=null:null!==i&&yr(r,i)&&(t.effectTag|=16),Ti(e,t),1!==n&&1&t.mode&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ei(e,t,l,n),t=t.child),t;case 6:return null===e&&vi(t),null;case 13:return Oi(e,t,n);case 4:return Eo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=go(t,null,r,n):Ei(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,_i(e,t,r,o=t.elementType===r?o:ro(r,o),n);case 7:return Ei(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ei(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,Ui(t,i=o.value),null!==l){var s=l.value;if(0===(i=Kt(s,i)?0:0|(\"function\"==typeof r._calculateChangedBits?r._calculateChangedBits(s,i):1073741823))){if(l.children===o.children&&!Rr.current){t=Di(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.contextDependencies;if(null!==c){l=s.child;for(var u=c.first;null!==u;){if(u.context===r&&0!=(u.observedBits&i)){1===s.tag&&((u=qi(n)).tag=$i,Ki(s,u)),s.expirationTime<n&&(s.expirationTime=n),null!==(u=s.alternate)&&u.expirationTime<n&&(u.expirationTime=n),u=n;for(var p=s.return;null!==p;){var d=p.alternate;if(p.childExpirationTime<u)p.childExpirationTime=u,null!==d&&d.childExpirationTime<u&&(d.childExpirationTime=u);else{if(!(null!==d&&d.childExpirationTime<u))break;d.childExpirationTime=u}p=p.return}c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else l=10===s.tag&&s.type===t.type?null:s.child;if(null!==l)l.return=s;else for(l=s;null!==l;){if(l===t){l=null;break}if(null!==(s=l.sibling)){s.return=l.return,l=s;break}l=l.return}s=l}}Ei(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(i=t.pendingProps).children,Fi(t,n),r=r(o=Hi(o,i.unstable_observedBits)),t.effectTag|=1,Ei(e,t,r,n),t.child;case 14:return i=ro(o=t.type,t.pendingProps),Si(e,t,o,i=ro(o.type,i),r,n);case 15:return Ci(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ro(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Mr(r)?(e=!0,Ur(t)):e=!1,Fi(t,n),so(t,r,o),uo(t,r,o,n),zi(null,t,r,!0,e,n)}a(\"156\")}var Ii={current:null},ji=null,Ai=null,Li=null;function Ui(e,t){var n=e.type._context;Nr(Ii,n._currentValue),n._currentValue=t}function Wi(e){var t=Ii.current;Tr(Ii),e.type._context._currentValue=t}function Fi(e,t){ji=e,Li=Ai=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(wi=!0),e.contextDependencies=null}function Hi(e,t){return Li!==e&&!1!==t&&0!==t&&(\"number\"==typeof t&&1073741823!==t||(Li=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ai?(null===ji&&a(\"308\"),Ai=t,ji.contextDependencies={first:t,expirationTime:0}):Ai=Ai.next=t),e._currentValue}var Bi=0,Vi=1,$i=2,Yi=3,Xi=!1;function Gi(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Qi(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function qi(e){return{expirationTime:e,tag:Bi,payload:null,callback:null,next:null,nextEffect:null}}function Zi(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Ki(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,o=null;null===r&&(r=e.updateQueue=Gi(e.memoizedState))}else r=e.updateQueue,o=n.updateQueue,null===r?null===o?(r=e.updateQueue=Gi(e.memoizedState),o=n.updateQueue=Gi(n.memoizedState)):r=e.updateQueue=Qi(o):null===o&&(o=n.updateQueue=Qi(r));null===o||r===o?Zi(r,t):null===r.lastUpdate||null===o.lastUpdate?(Zi(r,t),Zi(o,t)):(Zi(r,t),o.lastUpdate=t)}function Ji(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Gi(e.memoizedState):ea(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function ea(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Qi(t)),t}function ta(e,t,n,r,i,a){switch(n.tag){case Vi:return\"function\"==typeof(e=n.payload)?e.call(a,r,i):e;case Yi:e.effectTag=-2049&e.effectTag|64;case Bi:if(null==(i=\"function\"==typeof(e=n.payload)?e.call(a,r,i):e))break;return o({},r,i);case $i:Xi=!0}return r}function na(e,t,n,r,o){Xi=!1;for(var i=(t=ea(e,t)).baseState,a=null,l=0,s=t.firstUpdate,c=i;null!==s;){var u=s.expirationTime;u<o?(null===a&&(a=s,i=c),l<u&&(l=u)):(c=ta(e,0,s,c,n,r),null!==s.callback&&(e.effectTag|=32,s.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=s:(t.lastEffect.nextEffect=s,t.lastEffect=s))),s=s.next}for(u=null,s=t.firstCapturedUpdate;null!==s;){var p=s.expirationTime;p<o?(null===u&&(u=s,null===a&&(i=c)),l<p&&(l=p)):(c=ta(e,0,s,c,n,r),null!==s.callback&&(e.effectTag|=32,s.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=s:(t.lastCapturedEffect.nextEffect=s,t.lastCapturedEffect=s))),s=s.next}null===a&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===u&&(i=c),t.baseState=i,t.firstUpdate=a,t.firstCapturedUpdate=u,e.expirationTime=l,e.memoizedState=c}function ra(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),oa(t.firstEffect,n),t.firstEffect=t.lastEffect=null,oa(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function oa(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;\"function\"!=typeof n&&a(\"191\",n),n.call(r)}e=e.nextEffect}}function ia(e,t){return{value:e,source:t,stack:st(t)}}function aa(e){e.effectTag|=4}var la=void 0,sa=void 0,ca=void 0,ua=void 0;la=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},sa=function(){},ca=function(e,t,n,r,i){var a=e.memoizedProps;if(a!==r){var l=t.stateNode;switch(wo(bo.current),e=null,n){case\"input\":a=bt(l,a),r=bt(l,r),e=[];break;case\"option\":a=Xn(l,a),r=Xn(l,r),e=[];break;case\"select\":a=o({},a,{value:void 0}),r=o({},r,{value:void 0}),e=[];break;case\"textarea\":a=Qn(l,a),r=Qn(l,r),e=[];break;default:\"function\"!=typeof a.onClick&&\"function\"==typeof r.onClick&&(l.onclick=hr)}pr(n,r),l=n=void 0;var s=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if(\"style\"===n){var c=a[n];for(l in c)c.hasOwnProperty(l)&&(s||(s={}),s[l]=\"\")}else\"dangerouslySetInnerHTML\"!==n&&\"children\"!==n&&\"suppressContentEditableWarning\"!==n&&\"suppressHydrationWarning\"!==n&&\"autoFocus\"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var u=r[n];if(c=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&u!==c&&(null!=u||null!=c))if(\"style\"===n)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(s||(s={}),s[l]=\"\");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(s||(s={}),s[l]=u[l])}else s||(e||(e=[]),e.push(n,s)),s=u;else\"dangerouslySetInnerHTML\"===n?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(n,\"\"+u)):\"children\"===n?c===u||\"string\"!=typeof u&&\"number\"!=typeof u||(e=e||[]).push(n,\"\"+u):\"suppressContentEditableWarning\"!==n&&\"suppressHydrationWarning\"!==n&&(b.hasOwnProperty(n)?(null!=u&&fr(i,n),e||c===u||(e=[])):(e=e||[]).push(n,u))}s&&(e=e||[]).push(\"style\",s),i=e,(t.updateQueue=i)&&aa(t)}},ua=function(e,t,n,r){n!==r&&aa(t)};var pa=\"function\"==typeof WeakSet?WeakSet:Set;function da(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=st(n)),null!==n&&lt(n.type),t=t.value,null!==e&&1===e.tag&&lt(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function fa(e){var t=e.ref;if(null!==t)if(\"function\"==typeof t)try{t(null)}catch(t){Ga(e,t)}else t.current=null}function ha(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==To){var o=r.destroy;r.destroy=void 0,void 0!==o&&o()}(r.tag&t)!==To&&(o=r.create,r.destroy=o()),r=r.next}while(r!==n)}}function ma(e){switch(\"function\"==typeof Hr&&Hr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var o=e;try{r()}catch(e){Ga(o,e)}}n=n.next}while(n!==t)}break;case 1:if(fa(e),\"function\"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Ga(e,t)}break;case 5:fa(e);break;case 4:ya(e)}}function ga(e){return 5===e.tag||3===e.tag||4===e.tag}function va(e){e:{for(var t=e.return;null!==t;){if(ga(t)){var n=t;break e}t=t.return}a(\"160\"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:a(\"161\")}16&n.effectTag&&(ir(t,\"\"),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ga(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(n)if(r){var i=t,l=o.stateNode,s=n;8===i.nodeType?i.parentNode.insertBefore(l,s):i.insertBefore(l,s)}else t.insertBefore(o.stateNode,n);else r?(l=t,s=o.stateNode,8===l.nodeType?(i=l.parentNode).insertBefore(s,l):(i=l).appendChild(s),null!=(l=l._reactRootContainer)||null!==i.onclick||(i.onclick=hr)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function ya(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&a(\"160\"),n.tag){case 5:r=n.stateNode,o=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var i=t,l=i;;)if(ma(l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===i)break;for(;null===l.sibling;){if(null===l.return||l.return===i)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(i=r,l=t.stateNode,8===i.nodeType?i.parentNode.removeChild(l):i.removeChild(l)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,o=!0,t.child.return=t,t=t.child;continue}}else if(ma(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:ha(Po,zo,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,i=t.updateQueue;t.updateQueue=null,null!==i&&function(e,t,n,r,o){e[M]=o,\"input\"===n&&\"radio\"===o.type&&null!=o.name&&xt(e,o),dr(n,r),r=dr(n,o);for(var i=0;i<t.length;i+=2){var a=t[i],l=t[i+1];\"style\"===a?cr(e,l):\"dangerouslySetInnerHTML\"===a?or(e,l):\"children\"===a?ir(e,l):vt(e,a,l,r)}switch(n){case\"input\":wt(e,o);break;case\"textarea\":Zn(e,o);break;case\"select\":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!o.multiple,null!=(n=o.value)?Gn(e,!!o.multiple,n,!1):t!==!!o.multiple&&(null!=o.defaultValue?Gn(e,!!o.multiple,o.defaultValue,!0):Gn(e,!!o.multiple,o.multiple?[]:\"\",!1))}}(n,i,o,e,r)}break;case 6:null===t.stateNode&&a(\"162\"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=wl())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display=\"none\";else{r=n.stateNode;var o=n.memoizedProps.style;o=null!=o&&o.hasOwnProperty(\"display\")?o.display:null,r.style.display=sr(\"display\",o)}}else if(6===n.tag)n.stateNode.nodeValue=t?\"\":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var l=t.stateNode;null===l&&(l=t.stateNode=new pa),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Qa(t=wl(),e),null!==(e=Za(e,t))&&(Jr(e,t),0!==(t=e.expirationTime)&&El(e,t))}.bind(null,t,e);l.has(e)||(l.add(e),e.then(n,n))})}break;case 17:break;default:a(\"163\")}}var ka=\"function\"==typeof WeakMap?WeakMap:Map;function xa(e,t,n){(n=qi(n)).tag=Yi,n.payload={element:null};var r=t.value;return n.callback=function(){Ol(r),da(e,t)},n}function wa(e,t,n){(n=qi(n)).tag=Yi;var r=e.type.getDerivedStateFromError;if(\"function\"==typeof r){var o=t.value;n.payload=function(){return r(o)}}var i=e.stateNode;return null!==i&&\"function\"==typeof i.componentDidCatch&&(n.callback=function(){\"function\"!=typeof r&&(null===La?La=new Set([this]):La.add(this));var n=t.value,o=t.stack;da(e,t),this.componentDidCatch(n,{componentStack:null!==o?o:\"\"})}),n}function Ea(e){switch(e.tag){case 1:Mr(e.type)&&Ir();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return _o(),jr(),0!=(64&(t=e.effectTag))&&a(\"285\"),e.effectTag=-2049&t|64,e;case 5:return Co(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return _o(),null;case 10:return Wi(e),null;default:return null}}var _a=Ve.ReactCurrentDispatcher,Sa=Ve.ReactCurrentOwner,Ca=1073741822,Ta=!1,Na=null,Pa=null,za=0,Ra=-1,Oa=!1,Da=null,Ma=!1,Ia=null,ja=null,Aa=null,La=null;function Ua(){if(null!==Na)for(var e=Na.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&Ir();break;case 3:_o(),jr();break;case 5:Co(t);break;case 4:_o();break;case 10:Wi(t)}e=e.return}Pa=null,za=0,Ra=-1,Oa=!1,Na=null}function Wa(){for(;null!==Da;){var e=Da.effectTag;if(16&e&&ir(Da.stateNode,\"\"),128&e){var t=Da.alternate;null!==t&&(null!==(t=t.ref)&&(\"function\"==typeof t?t(null):t.current=null))}switch(14&e){case 2:va(Da),Da.effectTag&=-3;break;case 6:va(Da),Da.effectTag&=-3,ba(Da.alternate,Da);break;case 4:ba(Da.alternate,Da);break;case 8:ya(e=Da),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Da=Da.nextEffect}}function Fa(){for(;null!==Da;){if(256&Da.effectTag)e:{var e=Da.alternate,t=Da;switch(t.tag){case 0:case 11:case 15:ha(No,To,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ro(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a(\"163\")}}Da=Da.nextEffect}}function Ha(e,t){for(;null!==Da;){var n=Da.effectTag;if(36&n){var r=Da.alternate,o=Da,i=t;switch(o.tag){case 0:case 11:case 15:ha(Ro,Oo,o);break;case 1:var l=o.stateNode;if(4&o.effectTag)if(null===r)l.componentDidMount();else{var s=o.elementType===o.type?r.memoizedProps:ro(o.type,r.memoizedProps);l.componentDidUpdate(s,r.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}null!==(r=o.updateQueue)&&ra(0,r,l);break;case 3:if(null!==(r=o.updateQueue)){if(l=null,null!==o.child)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}ra(0,r,l)}break;case 5:i=o.stateNode,null===r&&4&o.effectTag&&vr(o.type,o.memoizedProps)&&i.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a(\"163\")}}128&n&&(null!==(o=Da.ref)&&(i=Da.stateNode,\"function\"==typeof o?o(i):o.current=i)),512&n&&(Ia=e),Da=Da.nextEffect}}function Ba(){null!==ja&&wr(ja),null!==Aa&&Aa()}function Va(e,t){Ma=Ta=!0,e.current===t&&a(\"177\");var n=e.pendingCommitExpirationTime;0===n&&a(\"261\"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,o=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Jr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Jr(e,t)):t>n&&Jr(e,t)}no(0,e)}(e,o>r?o:r),Sa.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,mr=_n,gr=function(){var e=jn();if(An(e)){if(\"selectionStart\"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch(e){t=null;break e}var i=0,a=-1,l=-1,s=0,c=0,u=e,p=null;t:for(;;){for(var d;u!==t||0!==r&&3!==u.nodeType||(a=i+r),u!==o||0!==n&&3!==u.nodeType||(l=i+n),3===u.nodeType&&(i+=u.nodeValue.length),null!==(d=u.firstChild);)p=u,u=d;for(;;){if(u===e)break t;if(p===t&&++s===r&&(a=i),p===o&&++c===n&&(l=i),null!==(d=u.nextSibling))break;p=(u=p).parentNode}u=d}t=-1===a||-1===l?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),_n=!1,Da=r;null!==Da;){o=!1;var l=void 0;try{Fa()}catch(e){o=!0,l=e}o&&(null===Da&&a(\"178\"),Ga(Da,l),null!==Da&&(Da=Da.nextEffect))}for(Da=r;null!==Da;){o=!1,l=void 0;try{Wa()}catch(e){o=!0,l=e}o&&(null===Da&&a(\"178\"),Ga(Da,l),null!==Da&&(Da=Da.nextEffect))}for(Ln(gr),gr=null,_n=!!mr,mr=null,e.current=t,Da=r;null!==Da;){o=!1,l=void 0;try{Ha(e,n)}catch(e){o=!0,l=e}o&&(null===Da&&a(\"178\"),Ga(Da,l),null!==Da&&(Da=Da.nextEffect))}if(null!==r&&null!==Ia){var s=function(e,t){Aa=ja=Ia=null;var n=ol;ol=!0;do{if(512&t.effectTag){var r=!1,o=void 0;try{var i=t;ha(Mo,To,i),ha(To,Do,i)}catch(e){r=!0,o=e}r&&Ga(t,o)}t=t.nextEffect}while(null!==t);ol=n,0!==(n=e.expirationTime)&&El(e,n),ul||ol||Nl(1073741823,!1)}.bind(null,e,r);ja=i.unstable_runWithPriority(i.unstable_NormalPriority,function(){return xr(s)}),Aa=s}Ta=Ma=!1,\"function\"==typeof Fr&&Fr(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(La=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function $a(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){Na=e;e:{var i=t,l=za,s=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Mr(t.type)&&Ir();break;case 3:_o(),jr(),(s=t.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==i&&null!==i.child||(bi(t),t.effectTag&=-3),sa(t);break;case 5:Co(t);var c=wo(xo.current);if(l=t.type,null!==i&&null!=t.stateNode)ca(i,t,l,s,c),i.ref!==t.ref&&(t.effectTag|=128);else if(s){var u=wo(bo.current);if(bi(t)){i=(s=t).stateNode;var p=s.type,d=s.memoizedProps,f=c;switch(i[D]=s,i[M]=d,l=void 0,c=p){case\"iframe\":case\"object\":Sn(\"load\",i);break;case\"video\":case\"audio\":for(p=0;p<te.length;p++)Sn(te[p],i);break;case\"source\":Sn(\"error\",i);break;case\"img\":case\"image\":case\"link\":Sn(\"error\",i),Sn(\"load\",i);break;case\"form\":Sn(\"reset\",i),Sn(\"submit\",i);break;case\"details\":Sn(\"toggle\",i);break;case\"input\":kt(i,d),Sn(\"invalid\",i),fr(f,\"onChange\");break;case\"select\":i._wrapperState={wasMultiple:!!d.multiple},Sn(\"invalid\",i),fr(f,\"onChange\");break;case\"textarea\":qn(i,d),Sn(\"invalid\",i),fr(f,\"onChange\")}for(l in pr(c,d),p=null,d)d.hasOwnProperty(l)&&(u=d[l],\"children\"===l?\"string\"==typeof u?i.textContent!==u&&(p=[\"children\",u]):\"number\"==typeof u&&i.textContent!==\"\"+u&&(p=[\"children\",\"\"+u]):b.hasOwnProperty(l)&&null!=u&&fr(f,l));switch(c){case\"input\":He(i),Et(i,d,!0);break;case\"textarea\":He(i),Kn(i);break;case\"select\":case\"option\":break;default:\"function\"==typeof d.onClick&&(i.onclick=hr)}l=p,s.updateQueue=l,(s=null!==l)&&aa(t)}else{d=t,i=l,f=s,p=9===c.nodeType?c:c.ownerDocument,u===Jn.html&&(u=er(i)),u===Jn.html?\"script\"===i?((i=p.createElement(\"div\")).innerHTML=\"<script><\\/script>\",p=i.removeChild(i.firstChild)):\"string\"==typeof f.is?p=p.createElement(i,{is:f.is}):(p=p.createElement(i),\"select\"===i&&f.multiple&&(p.multiple=!0)):p=p.createElementNS(u,i),(i=p)[D]=d,i[M]=s,la(i,t,!1,!1),f=i;var h=c,m=dr(p=l,d=s);switch(p){case\"iframe\":case\"object\":Sn(\"load\",f),c=d;break;case\"video\":case\"audio\":for(c=0;c<te.length;c++)Sn(te[c],f);c=d;break;case\"source\":Sn(\"error\",f),c=d;break;case\"img\":case\"image\":case\"link\":Sn(\"error\",f),Sn(\"load\",f),c=d;break;case\"form\":Sn(\"reset\",f),Sn(\"submit\",f),c=d;break;case\"details\":Sn(\"toggle\",f),c=d;break;case\"input\":kt(f,d),c=bt(f,d),Sn(\"invalid\",f),fr(h,\"onChange\");break;case\"option\":c=Xn(f,d);break;case\"select\":f._wrapperState={wasMultiple:!!d.multiple},c=o({},d,{value:void 0}),Sn(\"invalid\",f),fr(h,\"onChange\");break;case\"textarea\":qn(f,d),c=Qn(f,d),Sn(\"invalid\",f),fr(h,\"onChange\");break;default:c=d}pr(p,c),u=void 0;var g=p,v=f,y=c;for(u in y)if(y.hasOwnProperty(u)){var k=y[u];\"style\"===u?cr(v,k):\"dangerouslySetInnerHTML\"===u?null!=(k=k?k.__html:void 0)&&or(v,k):\"children\"===u?\"string\"==typeof k?(\"textarea\"!==g||\"\"!==k)&&ir(v,k):\"number\"==typeof k&&ir(v,\"\"+k):\"suppressContentEditableWarning\"!==u&&\"suppressHydrationWarning\"!==u&&\"autoFocus\"!==u&&(b.hasOwnProperty(u)?null!=k&&fr(h,u):null!=k&&vt(v,u,k,m))}switch(p){case\"input\":He(f),Et(f,d,!1);break;case\"textarea\":He(f),Kn(f);break;case\"option\":null!=d.value&&f.setAttribute(\"value\",\"\"+yt(d.value));break;case\"select\":(c=f).multiple=!!d.multiple,null!=(f=d.value)?Gn(c,!!d.multiple,f,!1):null!=d.defaultValue&&Gn(c,!!d.multiple,d.defaultValue,!0);break;default:\"function\"==typeof c.onClick&&(f.onclick=hr)}(s=vr(l,s))&&aa(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a(\"166\");break;case 6:i&&null!=t.stateNode?ua(i,t,i.memoizedProps,s):(\"string\"!=typeof s&&(null===t.stateNode&&a(\"166\")),i=wo(xo.current),wo(bo.current),bi(t)?(l=(s=t).stateNode,i=s.memoizedProps,l[D]=s,(s=l.nodeValue!==i)&&aa(t)):(l=t,(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[D]=t,l.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=l,Na=t;break e}s=null!==s,l=null!==i&&null!==i.memoizedState,null!==i&&!s&&l&&(null!==(i=i.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=i,i.nextEffect=c):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(s||l)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:_o(),sa(t);break;case 10:Wi(t);break;case 9:case 14:break;case 17:Mr(t.type)&&Ir();break;case 18:break;default:a(\"156\")}Na=null}if(t=e,1===za||1!==t.childExpirationTime){for(s=0,l=t.child;null!==l;)(i=l.expirationTime)>s&&(s=i),(c=l.childExpirationTime)>s&&(s=c),l=l.sibling;t.childExpirationTime=s}if(null!==Na)return Na;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=Ea(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Ya(e){var t=Mi(e.alternate,e,za);return e.memoizedProps=e.pendingProps,null===t&&(t=$a(e)),Sa.current=null,t}function Xa(e,t){Ta&&a(\"243\"),Ba(),Ta=!0;var n=_a.current;_a.current=ci;var r=e.nextExpirationTimeToWorkOn;r===za&&e===Pa&&null!==Na||(Ua(),za=r,Na=Xr((Pa=e).current,null),e.pendingCommitExpirationTime=0);for(var o=!1;;){try{if(t)for(;null!==Na&&!Cl();)Na=Ya(Na);else for(;null!==Na;)Na=Ya(Na)}catch(t){if(Li=Ai=ji=null,Ko(),null===Na)o=!0,Ol(t);else{null===Na&&a(\"271\");var i=Na,l=i.return;if(null!==l){e:{var s=e,c=l,u=i,p=t;if(l=za,u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==p&&\"object\"==typeof p&&\"function\"==typeof p.then){var d=p;p=c;var f=-1,h=-1;do{if(13===p.tag){var m=p.alternate;if(null!==m&&null!==(m=m.memoizedState)){h=10*(1073741822-m.timedOutAt);break}\"number\"==typeof(m=p.pendingProps.maxDuration)&&(0>=m?f=0:(-1===f||m<f)&&(f=m))}p=p.return}while(null!==p);p=c;do{if((m=13===p.tag)&&(m=void 0!==p.memoizedProps.fallback&&null===p.memoizedState),m){if(null===(c=p.updateQueue)?((c=new Set).add(d),p.updateQueue=c):c.add(d),0==(1&p.mode)){p.effectTag|=64,u.effectTag&=-1957,1===u.tag&&(null===u.alternate?u.tag=17:((l=qi(1073741823)).tag=$i,Ki(u,l))),u.expirationTime=1073741823;break e}c=l;var g=(u=s).pingCache;null===g?(g=u.pingCache=new ka,m=new Set,g.set(d,m)):void 0===(m=g.get(d))&&(m=new Set,g.set(d,m)),m.has(c)||(m.add(c),u=qa.bind(null,u,d,c),d.then(u,u)),-1===f?s=1073741823:(-1===h&&(h=10*(1073741822-to(s,l))-5e3),s=h+f),0<=s&&Ra<s&&(Ra=s),p.effectTag|=2048,p.expirationTime=l;break e}p=p.return}while(null!==p);p=Error((lt(u.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\"+st(u))}Oa=!0,p=ia(p,u),s=c;do{switch(s.tag){case 3:s.effectTag|=2048,s.expirationTime=l,Ji(s,l=xa(s,p,l));break e;case 1:if(f=p,h=s.type,u=s.stateNode,0==(64&s.effectTag)&&(\"function\"==typeof h.getDerivedStateFromError||null!==u&&\"function\"==typeof u.componentDidCatch&&(null===La||!La.has(u)))){s.effectTag|=2048,s.expirationTime=l,Ji(s,l=wa(s,f,l));break e}}s=s.return}while(null!==s)}Na=$a(i);continue}o=!0,Ol(t)}}break}if(Ta=!1,_a.current=n,Li=Ai=ji=null,Ko(),o)Pa=null,e.finishedWork=null;else if(null!==Na)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&a(\"281\"),Pa=null,Oa){if(o=e.latestPendingTime,i=e.latestSuspendedTime,l=e.latestPingedTime,0!==o&&o<r||0!==i&&i<r||0!==l&&l<r)return eo(e,r),void xl(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void xl(e,n,r,t,-1)}t&&-1!==Ra?(eo(e,r),(t=10*(1073741822-to(e,r)))<Ra&&(Ra=t),t=10*(1073741822-wl()),t=Ra-t,xl(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Ga(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if(\"function\"==typeof n.type.getDerivedStateFromError||\"function\"==typeof r.componentDidCatch&&(null===La||!La.has(r)))return Ki(n,e=wa(n,e=ia(t,e),1073741823)),void Ka(n,1073741823);break;case 3:return Ki(n,e=xa(n,e=ia(t,e),1073741823)),void Ka(n,1073741823)}n=n.return}3===e.tag&&(Ki(e,n=xa(e,n=ia(t,e),1073741823)),Ka(e,1073741823))}function Qa(e,t){var n=i.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(Ta&&!Ma)r=za;else{switch(n){case i.unstable_ImmediatePriority:r=1073741823;break;case i.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case i.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case i.unstable_LowPriority:case i.unstable_IdlePriority:r=1;break;default:a(\"313\")}null!==Pa&&r===za&&--r}return n===i.unstable_UserBlockingPriority&&(0===ll||r<ll)&&(ll=r),r}function qa(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Pa&&za===n?Pa=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),no(n,e),0!==(n=e.expirationTime)&&El(e,n)))}function Za(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,o=null;if(null===r&&3===e.tag)o=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){o=r.stateNode;break}r=r.return}return o}function Ka(e,t){null!==(e=Za(e,t))&&(!Ta&&0!==za&&t>za&&Ua(),Jr(e,t),Ta&&!Ma&&Pa===e||El(e,e.expirationTime),vl>gl&&(vl=0,a(\"185\")))}function Ja(e,t,n,r,o){return i.unstable_runWithPriority(i.unstable_ImmediatePriority,function(){return e(t,n,r,o)})}var el=null,tl=null,nl=0,rl=void 0,ol=!1,il=null,al=0,ll=0,sl=!1,cl=null,ul=!1,pl=!1,dl=null,fl=i.unstable_now(),hl=1073741822-(fl/10|0),ml=hl,gl=50,vl=0,yl=null;function bl(){hl=1073741822-((i.unstable_now()-fl)/10|0)}function kl(e,t){if(0!==nl){if(t<nl)return;null!==rl&&i.unstable_cancelCallback(rl)}nl=t,e=i.unstable_now()-fl,rl=i.unstable_scheduleCallback(Tl,{timeout:10*(1073741822-t)-e})}function xl(e,t,n,r,o){e.expirationTime=r,0!==o||Cl()?0<o&&(e.timeoutHandle=br(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,bl(),ml=hl,Pl(e,n)}.bind(null,e,t,n),o)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function wl(){return ol?ml:(_l(),0!==al&&1!==al||(bl(),ml=hl),ml)}function El(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===tl?(el=tl=e,e.nextScheduledRoot=e):(tl=tl.nextScheduledRoot=e).nextScheduledRoot=el):t>e.expirationTime&&(e.expirationTime=t),ol||(ul?pl&&(il=e,al=1073741823,zl(e,1073741823,!1)):1073741823===t?Nl(1073741823,!1):kl(e,t))}function _l(){var e=0,t=null;if(null!==tl)for(var n=tl,r=el;null!==r;){var o=r.expirationTime;if(0===o){if((null===n||null===tl)&&a(\"244\"),r===r.nextScheduledRoot){el=tl=r.nextScheduledRoot=null;break}if(r===el)el=o=r.nextScheduledRoot,tl.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===tl){(tl=n).nextScheduledRoot=el,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(o>e&&(e=o,t=r),r===tl)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}il=t,al=e}var Sl=!1;function Cl(){return!!Sl||!!i.unstable_shouldYield()&&(Sl=!0)}function Tl(){try{if(!Cl()&&null!==el){bl();var e=el;do{var t=e.expirationTime;0!==t&&hl<=t&&(e.nextExpirationTimeToWorkOn=hl),e=e.nextScheduledRoot}while(e!==el)}Nl(0,!0)}finally{Sl=!1}}function Nl(e,t){if(_l(),t)for(bl(),ml=hl;null!==il&&0!==al&&e<=al&&!(Sl&&hl>al);)zl(il,al,hl>al),_l(),bl(),ml=hl;else for(;null!==il&&0!==al&&e<=al;)zl(il,al,!1),_l();if(t&&(nl=0,rl=null),0!==al&&kl(il,al),vl=0,yl=null,null!==dl)for(e=dl,dl=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){sl||(sl=!0,cl=e)}}if(sl)throw e=cl,cl=null,sl=!1,e}function Pl(e,t){ol&&a(\"253\"),il=e,al=t,zl(e,t,!1),Nl(1073741823,!1)}function zl(e,t,n){if(ol&&a(\"245\"),ol=!0,n){var r=e.finishedWork;null!==r?Rl(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,kr(r)),Xa(e,n),null!==(r=e.finishedWork)&&(Cl()?e.finishedWork=r:Rl(e,r,t)))}else null!==(r=e.finishedWork)?Rl(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,kr(r)),Xa(e,n),null!==(r=e.finishedWork)&&Rl(e,r,t));ol=!1}function Rl(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===dl?dl=[r]:dl.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===yl?vl++:(yl=e,vl=0),i.unstable_runWithPriority(i.unstable_ImmediatePriority,function(){Va(e,t)})}function Ol(e){null===il&&a(\"246\"),il.expirationTime=0,sl||(sl=!0,cl=e)}function Dl(e,t){var n=ul;ul=!0;try{return e(t)}finally{(ul=n)||ol||Nl(1073741823,!1)}}function Ml(e,t){if(ul&&!pl){pl=!0;try{return e(t)}finally{pl=!1}}return e(t)}function Il(e,t,n){ul||ol||0===ll||(Nl(ll,!1),ll=0);var r=ul;ul=!0;try{return i.unstable_runWithPriority(i.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(ul=r)||ol||Nl(1073741823,!1)}}function jl(e,t,n,r,o){var i=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||a(\"170\");var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Mr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);a(\"171\"),l=void 0}if(1===n.tag){var s=n.type;if(Mr(s)){n=Lr(n,s,l);break e}}n=l}else n=Pr;return null===t.context?t.context=n:t.pendingContext=n,t=o,(o=qi(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(o.callback=t),Ba(),Ki(i,o),Ka(i,r),r}function Al(e,t,n,r){var o=t.current;return jl(e,t,n,o=Qa(wl(),o),r)}function Ll(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ul(e){var t=1073741822-25*(1+((1073741822-wl()+500)/25|0));t>=Ca&&(t=Ca-1),this._expirationTime=Ca=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Wl(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Fl(e,t,n){e={current:t=$r(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Hl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||\" react-mount-point-unstable \"!==e.nodeValue))}function Bl(e,t,n,r,o){var i=n._reactRootContainer;if(i){if(\"function\"==typeof o){var a=o;o=function(){var e=Ll(i._internalRoot);a.call(e)}}null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute(\"data-reactroot\"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Fl(e,!1,t)}(n,r),\"function\"==typeof o){var l=o;o=function(){var e=Ll(i._internalRoot);l.call(e)}}Ml(function(){null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)})}return Ll(i._internalRoot)}function Vl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Hl(t)||a(\"200\"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ge,key:null==r?null:\"\"+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ce=function(e,t,n){switch(t){case\"input\":if(wt(e,n),t=n.name,\"radio\"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+t)+'][type=\"radio\"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=L(r);o||a(\"90\"),Be(r),wt(r,o)}}}break;case\"textarea\":Zn(e,n);break;case\"select\":null!=(t=n.value)&&Gn(e,!!n.multiple,t,!1)}},Ul.prototype.render=function(e){this._defer||a(\"250\"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Wl;return jl(e,t,null,n,r._onCommit),r},Ul.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ul.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a(\"251\"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)r=o,o=o._next;null===r&&a(\"251\"),r._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Pl(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ul.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Wl.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Wl.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];\"function\"!=typeof n&&a(\"191\",n),n()}}},Fl.prototype.render=function(e,t){var n=this._internalRoot,r=new Wl;return null!==(t=void 0===t?null:t)&&r.then(t),Al(e,n,null,r._onCommit),r},Fl.prototype.unmount=function(e){var t=this._internalRoot,n=new Wl;return null!==(e=void 0===e?null:e)&&n.then(e),Al(null,t,null,n._onCommit),n},Fl.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,o=new Wl;return null!==(n=void 0===n?null:n)&&o.then(n),Al(t,r,e,o._onCommit),o},Fl.prototype.createBatch=function(){var e=new Ul(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Oe=Dl,De=Il,Me=function(){ol||0===ll||(Nl(ll,!1),ll=0)};var $l={createPortal:Vl,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&(\"function\"==typeof e.render?a(\"188\"):a(\"268\",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return Hl(t)||a(\"200\"),Bl(null,e,t,!0,n)},render:function(e,t,n){return Hl(t)||a(\"200\"),Bl(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return Hl(n)||a(\"200\"),(null==e||void 0===e._reactInternalFiber)&&a(\"38\"),Bl(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Hl(e)||a(\"40\"),!!e._reactRootContainer&&(Ml(function(){Bl(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Vl.apply(void 0,arguments)},unstable_batchedUpdates:Dl,unstable_interactiveUpdates:Il,flushSync:function(e,t){ol&&a(\"187\");var n=ul;ul=!0;try{return Ja(e,t)}finally{ul=n,Nl(1073741823,!1)}},unstable_createRoot:function(e,t){return Hl(e)||a(\"299\",\"unstable_createRoot\"),new Fl(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=ul;ul=!0;try{Ja(e)}finally{(ul=t)||ol||Nl(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[j,A,L,P.injectEventPluginsByName,y,V,function(e){C(e,B)},ze,Re,Nn,R]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if(\"undefined\"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Fr=Br(function(e){return t.onCommitFiberRoot(n,e)}),Hr=Br(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}})(o({},e,{overrideProps:null,currentDispatcherRef:Ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:I,bundleType:0,version:\"16.8.4\",rendererPackageName:\"react-dom\"});var Yl={default:$l},Xl=Yl&&$l||Yl;e.exports=Xl.default||Xl},function(e,t,n){\"use strict\";e.exports=n(9)},function(e,t,n){\"use strict\";(function(e){\n/** @license React v0.13.4\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nObject.defineProperty(t,\"__esModule\",{value:!0});var n=null,r=!1,o=3,i=-1,a=-1,l=!1,s=!1;function c(){if(!l){var e=n.expirationTime;s?E():s=!0,w(d,e)}}function u(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=o,l=a;o=e,a=t;try{var s=r()}finally{o=i,a=l}if(\"function\"==typeof s)if(s={callback:s,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=s.next=s.previous=s;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=s,c()),(t=r.previous).next=r.previous=s,s.next=r,s.previous=t}}function p(){if(-1===i&&null!==n&&1===n.priorityLevel){l=!0;try{do{u()}while(null!==n&&1===n.priorityLevel)}finally{l=!1,null!==n?c():s=!1}}}function d(e){l=!0;var o=r;r=e;try{if(e)for(;null!==n;){var i=t.unstable_now();if(!(n.expirationTime<=i))break;do{u()}while(null!==n&&n.expirationTime<=i)}else if(null!==n)do{u()}while(null!==n&&!_())}finally{l=!1,r=o,null!==n?c():s=!1,p()}}var f,h,m=Date,g=\"function\"==typeof setTimeout?setTimeout:void 0,v=\"function\"==typeof clearTimeout?clearTimeout:void 0,y=\"function\"==typeof requestAnimationFrame?requestAnimationFrame:void 0,b=\"function\"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function k(e){f=y(function(t){v(h),e(t)}),h=g(function(){b(f),e(t.unstable_now())},100)}if(\"object\"==typeof performance&&\"function\"==typeof performance.now){var x=performance;t.unstable_now=function(){return x.now()}}else t.unstable_now=function(){return m.now()};var w,E,_,S=null;if(\"undefined\"!=typeof window?S=window:void 0!==e&&(S=e),S&&S._schedMock){var C=S._schedMock;w=C[0],E=C[1],_=C[2],t.unstable_now=C[3]}else if(\"undefined\"==typeof window||\"function\"!=typeof MessageChannel){var T=null,N=function(e){if(null!==T)try{T(e)}finally{T=null}};w=function(e){null!==T?setTimeout(w,0,e):(T=e,setTimeout(N,0,!1))},E=function(){T=null},_=function(){return!1}}else{\"undefined\"!=typeof console&&(\"function\"!=typeof y&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\"),\"function\"!=typeof b&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\"));var P=null,z=!1,R=-1,O=!1,D=!1,M=0,I=33,j=33;_=function(){return M<=t.unstable_now()};var A=new MessageChannel,L=A.port2;A.port1.onmessage=function(){z=!1;var e=P,n=R;P=null,R=-1;var r=t.unstable_now(),o=!1;if(0>=M-r){if(!(-1!==n&&n<=r))return O||(O=!0,k(U)),P=e,void(R=n);o=!0}if(null!==e){D=!0;try{e(o)}finally{D=!1}}};var U=function(e){if(null!==P){k(U);var t=e-M+j;t<j&&I<j?(8>t&&(t=8),j=t<I?I:t):I=t,M=e+j,z||(z=!0,L.postMessage(void 0))}else O=!1};w=function(e,t){P=e,R=t,D||0>t?L.postMessage(void 0):O||(O=!0,k(U))},E=function(){P=null,z=!1,R=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=o,a=i;o=e,i=t.unstable_now();try{return n()}finally{o=r,i=a,p()}},t.unstable_next=function(e){switch(o){case 1:case 2:case 3:var n=3;break;default:n=o}var r=o,a=i;o=n,i=t.unstable_now();try{return e()}finally{o=r,i=a,p()}},t.unstable_scheduleCallback=function(e,r){var a=-1!==i?i:t.unstable_now();if(\"object\"==typeof r&&null!==r&&\"number\"==typeof r.timeout)r=a+r.timeout;else switch(o){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(e={callback:e,priorityLevel:o,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,c();else{a=null;var l=n;do{if(l.expirationTime>r){a=l;break}l=l.next}while(l!==n);null===a?a=n:a===n&&(n=e,c()),(r=a.previous).next=a.previous=e,e.next=a,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=o;return function(){var r=o,a=i;o=n,i=t.unstable_now();try{return e.apply(this,arguments)}finally{o=r,i=a,p()}}},t.unstable_getCurrentPriorityLevel=function(){return o},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||_())},t.unstable_continueExecution=function(){null!==n&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(10))},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=function(e,t){\"use strict\";function n(e,t){return e(t={exports:{}},t.exports),t.exports}function r(e){return function(){return e}}e=e&&e.hasOwnProperty(\"default\")?e.default:e,t=t&&t.hasOwnProperty(\"default\")?t.default:t;var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e};var i=o,a=function(e){};a=function(e){if(void 0===e)throw new Error(\"invariant requires an error message argument\")};var l=function(e,t,n,r,o,i,l,s){if(a(t),!e){var c;if(void 0===t)c=new Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var u=[n,r,o,i,l,s],p=0;(c=new Error(t.replace(/%s/g,function(){return u[p++]}))).name=\"Invariant Violation\"}throw c.framesToPop=1,c}},s=function(e,t){if(void 0===t)throw new Error(\"`warning(condition, format, ...args)` requires a warning message argument\");if(0!==t.indexOf(\"Failed Composite propType: \")&&!e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i=\"Warning: \"+e.replace(/%s/g,function(){return n[o++]});\"undefined\"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}}).apply(void 0,[t].concat(r))}},c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,d=function(){try{if(!Object.assign)return!1;var e=new String(\"abc\");if(e[5]=\"de\",\"5\"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t[\"_\"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(\"0123456789\"!==r.join(\"\"))return!1;var o={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(e){o[e]=e}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},o)).join(\"\")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=function(e){if(null==e)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))u.call(n,a)&&(o[a]=n[a]);if(c){r=c(n);for(var l=0;l<r.length;l++)p.call(n,r[l])&&(o[r[l]]=n[r[l]])}}return o},f=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\",h=l,m=s,g=f,v={},y=function(e,t,n,r,o){for(var i in e)if(e.hasOwnProperty(i)){var a;try{h(\"function\"==typeof e[i],\"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.\",r||\"React class\",n,i,typeof e[i]),a=e[i](t,i,r,n,null,g)}catch(e){a=e}if(m(!a||a instanceof Error,\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",r||\"React class\",n,i,typeof a),a instanceof Error&&!(a.message in v)){v[a.message]=!0;var l=o?o():\"\";m(!1,\"Failed %s type: %s%s\",n,a.message,null!=l?l:\"\")}}},b=function(e,t){var n=\"function\"==typeof Symbol&&Symbol.iterator,r=\"@@iterator\",o=\"<<anonymous>>\",a={array:p(\"array\"),bool:p(\"boolean\"),func:p(\"function\"),number:p(\"number\"),object:p(\"object\"),string:p(\"string\"),symbol:p(\"symbol\"),any:u(i.thatReturnsNull),arrayOf:function(e){return u(function(t,n,r,o,i){if(\"function\"!=typeof e)return new c(\"Property `\"+i+\"` of component `\"+r+\"` has invalid PropType notation inside arrayOf.\");var a=t[n];if(!Array.isArray(a)){var l=m(a);return new c(\"Invalid \"+o+\" `\"+i+\"` of type `\"+l+\"` supplied to `\"+r+\"`, expected an array.\")}for(var s=0;s<a.length;s++){var u=e(a,s,r,o,i+\"[\"+s+\"]\",f);if(u instanceof Error)return u}return null})},element:u(function(t,n,r,o,i){var a=t[n];if(!e(a)){var l=m(a);return new c(\"Invalid \"+o+\" `\"+i+\"` of type `\"+l+\"` supplied to `\"+r+\"`, expected a single ReactElement.\")}return null}),instanceOf:function(e){return u(function(t,n,r,i,a){if(!(t[n]instanceof e)){var l=e.name||o,s=(u=t[n]).constructor&&u.constructor.name?u.constructor.name:o;return new c(\"Invalid \"+i+\" `\"+a+\"` of type `\"+s+\"` supplied to `\"+r+\"`, expected instance of `\"+l+\"`.\")}var u;return null})},node:u(function(e,t,n,r,o){return h(e[t])?null:new c(\"Invalid \"+r+\" `\"+o+\"` supplied to `\"+n+\"`, expected a ReactNode.\")}),objectOf:function(e){return u(function(t,n,r,o,i){if(\"function\"!=typeof e)return new c(\"Property `\"+i+\"` of component `\"+r+\"` has invalid PropType notation inside objectOf.\");var a=t[n],l=m(a);if(\"object\"!==l)return new c(\"Invalid \"+o+\" `\"+i+\"` of type `\"+l+\"` supplied to `\"+r+\"`, expected an object.\");for(var s in a)if(a.hasOwnProperty(s)){var u=e(a,s,r,o,i+\".\"+s,f);if(u instanceof Error)return u}return null})},oneOf:function(e){return Array.isArray(e)?u(function(t,n,r,o,i){for(var a=t[n],l=0;l<e.length;l++)if(s=a,u=e[l],s===u?0!==s||1/s==1/u:s!=s&&u!=u)return null;var s,u,p=JSON.stringify(e);return new c(\"Invalid \"+o+\" `\"+i+\"` of value `\"+a+\"` supplied to `\"+r+\"`, expected one of \"+p+\".\")}):(s(!1,\"Invalid argument supplied to oneOf, expected an instance of array.\"),i.thatReturnsNull)},oneOfType:function(e){if(!Array.isArray(e))return s(!1,\"Invalid argument supplied to oneOfType, expected an instance of array.\"),i.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if(\"function\"!=typeof n)return s(!1,\"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.\",v(n),t),i.thatReturnsNull}return u(function(t,n,r,o,i){for(var a=0;a<e.length;a++){var l=e[a];if(null==l(t,n,r,o,i,f))return null}return new c(\"Invalid \"+o+\" `\"+i+\"` supplied to `\"+r+\"`.\")})},shape:function(e){return u(function(t,n,r,o,i){var a=t[n],l=m(a);if(\"object\"!==l)return new c(\"Invalid \"+o+\" `\"+i+\"` of type `\"+l+\"` supplied to `\"+r+\"`, expected `object`.\");for(var s in e){var u=e[s];if(u){var p=u(a,s,r,o,i+\".\"+s,f);if(p)return p}}return null})},exact:function(e){return u(function(t,n,r,o,i){var a=t[n],l=m(a);if(\"object\"!==l)return new c(\"Invalid \"+o+\" `\"+i+\"` of type `\"+l+\"` supplied to `\"+r+\"`, expected `object`.\");var s=d({},t[n],e);for(var u in s){var p=e[u];if(!p)return new c(\"Invalid \"+o+\" `\"+i+\"` key `\"+u+\"` supplied to `\"+r+\"`.\\nBad object: \"+JSON.stringify(t[n],null,\"  \")+\"\\nValid keys: \"+JSON.stringify(Object.keys(e),null,\"  \"));var h=p(a,u,r,o,i+\".\"+u,f);if(h)return h}return null})}};function c(e){this.message=e,this.stack=\"\"}function u(e){var n={},r=0;function i(i,a,u,p,d,h,m){if(p=p||o,h=h||u,m!==f)if(t)l(!1,\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types\");else if(\"undefined\"!=typeof console){var g=p+\":\"+u;!n[g]&&r<3&&(s(!1,\"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.\",h,p),n[g]=!0,r++)}return null==a[u]?i?null===a[u]?new c(\"The \"+d+\" `\"+h+\"` is marked as required in `\"+p+\"`, but its value is `null`.\"):new c(\"The \"+d+\" `\"+h+\"` is marked as required in `\"+p+\"`, but its value is `undefined`.\"):null:e(a,u,p,d,h)}var a=i.bind(null,!1);return a.isRequired=i.bind(null,!0),a}function p(e){return u(function(t,n,r,o,i,a){var l=t[n];if(m(l)!==e){var s=g(l);return new c(\"Invalid \"+o+\" `\"+i+\"` of type `\"+s+\"` supplied to `\"+r+\"`, expected `\"+e+\"`.\")}return null})}function h(t){switch(typeof t){case\"number\":case\"string\":case\"undefined\":return!0;case\"boolean\":return!t;case\"object\":if(Array.isArray(t))return t.every(h);if(null===t||e(t))return!0;var o=function(e){var t=e&&(n&&e[n]||e[r]);if(\"function\"==typeof t)return t}(t);if(!o)return!1;var i,a=o.call(t);if(o!==t.entries){for(;!(i=a.next()).done;)if(!h(i.value))return!1}else for(;!(i=a.next()).done;){var l=i.value;if(l&&!h(l[1]))return!1}return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?\"array\":e instanceof RegExp?\"object\":function(e,t){return\"symbol\"===e||(\"Symbol\"===t[\"@@toStringTag\"]||\"function\"==typeof Symbol&&t instanceof Symbol)}(t,e)?\"symbol\":t}function g(e){if(null==e)return\"\"+e;var t=m(e);if(\"object\"===t){if(e instanceof Date)return\"date\";if(e instanceof RegExp)return\"regexp\"}return t}function v(e){var t=g(e);switch(t){case\"array\":case\"object\":return\"an \"+t;case\"boolean\":case\"date\":case\"regexp\":return\"a \"+t;default:return t}}return c.prototype=Error.prototype,a.checkPropTypes=y,a.PropTypes=a,a},k=n(function(e){var t=\"function\"==typeof Symbol&&Symbol.for&&Symbol.for(\"react.element\")||60103;e.exports=b(function(e){return\"object\"==typeof e&&null!==e&&e.$$typeof===t},!0)}),x=n(function(e){\n/*!\n\t  Copyright (c) 2016 Jed Watson.\n\t  Licensed under the MIT License (MIT), see\n\t  http://jedwatson.github.io/classnames\n\t*/\n!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if(\"string\"===i||\"number\"===i)e.push(o);else if(Array.isArray(o))e.push(n.apply(null,o));else if(\"object\"===i)for(var a in o)t.call(o,a)&&o[a]&&e.push(a)}}return e.join(\" \")}e.exports?e.exports=n:window.classNames=n}()});function w(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function E(e){return\"function\"==typeof e||\"[object Function]\"===Object.prototype.toString.call(e)}function _(e){return\"number\"==typeof e&&!isNaN(e)}function S(e){return parseInt(e,10)}function C(e,t,n){if(e[t])return new Error(\"Invalid prop \"+t+\" passed to \"+n+\" - do not set this, set it on the child.\")}var T=[\"Moz\",\"Webkit\",\"O\",\"ms\"];function N(e,t){return t?\"\"+t+function(e){for(var t=\"\",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):\"-\"===e[r]?n=!0:t+=e[r];return t}(e):e}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"transform\";if(\"undefined\"==typeof window||void 0===window.document)return\"\";var t=window.document.documentElement.style;if(e in t)return\"\";for(var n=0;n<T.length;n++)if(N(e,T[n])in t)return T[n];return\"\"}(),z=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},I=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t},j=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},A=\"\";function L(e,t){return A||(A=w([\"matches\",\"webkitMatchesSelector\",\"mozMatchesSelector\",\"msMatchesSelector\",\"oMatchesSelector\"],function(t){return E(e[t])})),!!E(e[A])&&e[A](t)}function U(e,t,n){var r=e;do{if(L(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function W(e,t,n){e&&(e.attachEvent?e.attachEvent(\"on\"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e[\"on\"+t]=n)}function F(e,t,n){e&&(e.detachEvent?e.detachEvent(\"on\"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e[\"on\"+t]=null)}function H(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=S(n.borderTopWidth),t+=S(n.borderBottomWidth)}function B(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=S(n.borderLeftWidth),t+=S(n.borderRightWidth)}function V(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=S(n.paddingTop),t-=S(n.paddingBottom)}function $(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=S(n.paddingLeft),t-=S(n.paddingRight)}function Y(e){if(e){var t,n,r=e.getElementById(\"react-draggable-style-el\");r||((r=e.createElement(\"style\")).type=\"text/css\",r.id=\"react-draggable-style-el\",r.innerHTML=\".react-draggable-transparent-selection *::-moz-selection {background: transparent;}\\n\",r.innerHTML+=\".react-draggable-transparent-selection *::selection {background: transparent;}\\n\",e.getElementsByTagName(\"head\")[0].appendChild(r)),e.body&&(t=e.body,n=\"react-draggable-transparent-selection\",t.classList?t.classList.add(n):t.className.match(new RegExp(\"(?:^|\\\\s)\"+n+\"(?!\\\\S)\"))||(t.className+=\" \"+n))}}function X(e){try{e&&e.body&&(t=e.body,n=\"react-draggable-transparent-selection\",t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp(\"(?:^|\\\\s)\"+n+\"(?!\\\\S)\",\"g\"),\"\")),e.selection?e.selection.empty():window.getSelection().removeAllRanges()}catch(e){}var t,n}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D({touchAction:\"none\"},e)}function Q(e){return\"both\"===e.props.axis||\"x\"===e.props.axis}function q(e){return\"both\"===e.props.axis||\"y\"===e.props.axis}function Z(e,t,n){var r=\"number\"==typeof t?function(e,t){return e.targetTouches&&w(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&w(e.changedTouches,function(e){return t===e.identifier})}(e,t):null;if(\"number\"==typeof t&&!r)return null;var o=ee(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return function(e,t){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),r=e.clientX+t.scrollLeft-n.left,o=e.clientY+t.scrollTop-n.top;return{x:r,y:o}}(r||e,i)}function K(e,t,n){var r=e.state,o=!_(r.lastX),i=ee(e);return o?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}}function J(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function ee(t){var n=e.findDOMNode(t);if(!n)throw new Error(\"<DraggableCore>: Unmounted during event!\");return n}var te={touch:{start:\"touchstart\",move:\"touchmove\",stop:\"touchend\"},mouse:{start:\"mousedown\",move:\"mousemove\",stop:\"mouseup\"}},ne=te.mouse,re=function(n){function r(){var t,n,o;z(this,r);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return o=I(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(a))),n=o,o.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},o.handleDragStart=function(t){if(o.props.onMouseDown(t),!o.props.allowAnyClick&&\"number\"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode(o);if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error(\"<DraggableCore> not mounted on DragStart!\");var r=n.ownerDocument;if(!(o.props.disabled||!(t.target instanceof r.defaultView.Node)||o.props.handle&&!U(t.target,o.props.handle,n)||o.props.cancel&&U(t.target,o.props.cancel,n))){var i=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}(t);o.setState({touchIdentifier:i});var a=Z(t,i,o);if(null!=a){var l=a.x,s=a.y,c=K(o,l,s);o.props.onStart;var u=o.props.onStart(t,c);!1!==u&&(o.props.enableUserSelectHack&&Y(r),o.setState({dragging:!0,lastX:l,lastY:s}),W(r,ne.move,o.handleDrag),W(r,ne.stop,o.handleDragStop))}}},o.handleDrag=function(e){\"touchmove\"===e.type&&e.preventDefault();var t=Z(e,o.state.touchIdentifier,o);if(null!=t){var n=t.x,r=t.y;if(Array.isArray(o.props.grid)){var i=n-o.state.lastX,a=r-o.state.lastY,l=function(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]}(o.props.grid,i,a),s=j(l,2);if(i=s[0],a=s[1],!i&&!a)return;n=o.state.lastX+i,r=o.state.lastY+a}var c=K(o,n,r),u=o.props.onDrag(e,c);if(!1!==u)o.setState({lastX:n,lastY:r});else try{o.handleDragStop(new MouseEvent(\"mouseup\"))}catch(e){var p=document.createEvent(\"MouseEvents\");p.initMouseEvent(\"mouseup\",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.handleDragStop(p)}}},o.handleDragStop=function(t){if(o.state.dragging){var n=Z(t,o.state.touchIdentifier,o);if(null!=n){var r=n.x,i=n.y,a=K(o,r,i),l=e.findDOMNode(o);l&&o.props.enableUserSelectHack&&X(l.ownerDocument),o.setState({dragging:!1,lastX:NaN,lastY:NaN}),o.props.onStop(t,a),l&&(F(l.ownerDocument,ne.move,o.handleDrag),F(l.ownerDocument,ne.stop,o.handleDragStop))}}},o.onMouseDown=function(e){return ne=te.mouse,o.handleDragStart(e)},o.onMouseUp=function(e){return ne=te.mouse,o.handleDragStop(e)},o.onTouchStart=function(e){return ne=te.touch,o.handleDragStart(e)},o.onTouchEnd=function(e){return ne=te.touch,o.handleDragStop(e)},I(o,n)}return M(r,n),R(r,[{key:\"componentWillUnmount\",value:function(){var t=e.findDOMNode(this);if(t){var n=t.ownerDocument;F(n,te.mouse.move,this.handleDrag),F(n,te.touch.move,this.handleDrag),F(n,te.mouse.stop,this.handleDragStop),F(n,te.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&X(n)}}},{key:\"render\",value:function(){return t.cloneElement(t.Children.only(this.props.children),{style:G(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),r}(t.Component);re.displayName=\"DraggableCore\",re.propTypes={allowAnyClick:k.bool,disabled:k.bool,enableUserSelectHack:k.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error(\"Draggable's offsetParent must be a DOM Node.\")},grid:k.arrayOf(k.number),scale:k.number,handle:k.string,cancel:k.string,onStart:k.func,onDrag:k.func,onStop:k.func,onMouseDown:k.func,className:C,style:C,transform:C},re.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}};var oe=function(n){function r(e){z(this,r);var t=I(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.onDragStart=function(e,n){var r=t.props.onStart(e,J(t,n));if(!1===r)return!1;t.setState({dragging:!0,dragged:!0})},t.onDrag=function(e,n){if(!t.state.dragging)return!1;var r=J(t,n),o={x:r.x,y:r.y};if(t.props.bounds){var i=o.x,a=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var l=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r=\"string\"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);var o=ee(e);if(\"string\"==typeof r){var i=o.ownerDocument,a=i.defaultView,l=void 0;if(!((l=\"parent\"===r?o.parentNode:i.querySelector(r))instanceof a.HTMLElement))throw new Error('Bounds selector \"'+r+'\" could not find an element.');var s=a.getComputedStyle(o),c=a.getComputedStyle(l);r={left:-o.offsetLeft+S(c.paddingLeft)+S(s.marginLeft),top:-o.offsetTop+S(c.paddingTop)+S(s.marginTop),right:$(l)-B(o)-o.offsetLeft+S(c.paddingRight)-S(s.marginRight),bottom:V(l)-H(o)-o.offsetTop+S(c.paddingBottom)-S(s.marginBottom)}}return _(r.right)&&(t=Math.min(t,r.right)),_(r.bottom)&&(n=Math.min(n,r.bottom)),_(r.left)&&(t=Math.max(t,r.left)),_(r.top)&&(n=Math.max(n,r.top)),[t,n]}(t,o.x,o.y),s=j(l,2),c=s[0],u=s[1];o.x=c,o.y=u,o.slackX=t.state.slackX+(i-o.x),o.slackY=t.state.slackY+(a-o.y),r.x=o.x,r.y=o.y,r.deltaX=o.x-t.state.x,r.deltaY=o.y-t.state.y}var p=t.props.onDrag(e,r);if(!1===p)return!1;t.setState(o)},t.onDragStop=function(e,n){if(!t.state.dragging)return!1;var r=t.props.onStop(e,J(t,n));if(!1===r)return!1;var o={dragging:!1,slackX:0,slackY:0},i=Boolean(t.props.position);if(i){var a=t.props.position,l=a.x,s=a.y;o.x=l,o.y=s}t.setState(o)},t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},t}return M(r,n),R(r,[{key:\"componentWillMount\",value:function(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn(\"A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.\")}},{key:\"componentDidMount\",value:function(){void 0!==window.SVGElement&&e.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:\"componentWillReceiveProps\",value:function(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:\"componentWillUnmount\",value:function(){this.setState({dragging:!1})}},{key:\"render\",value:function(){var e,n,r,o,i={},a=null,l=Boolean(this.props.position),s=!l||this.state.dragging,c=this.props.position||this.props.defaultPosition,u={x:Q(this)&&s?this.state.x:c.x,y:q(this)&&s?this.state.y:c.y};this.state.isElementSVG?(r=(n=u).x,o=n.y,a=\"translate(\"+r+\",\"+o+\")\"):i=function(e){var t=e.x,n=e.y;return O({},N(\"transform\",P),\"translate(\"+t+\"px,\"+n+\"px)\")}(u);var p=this.props,d=p.defaultClassName,f=p.defaultClassNameDragging,h=p.defaultClassNameDragged,m=t.Children.only(this.props.children),g=x(m.props.className||\"\",d,(O(e={},f,this.state.dragging),O(e,h,this.state.dragged),e));return t.createElement(re,D({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(m,{className:g,style:D({},m.props.style,i),transform:a}))}}]),r}(t.Component);return oe.displayName=\"Draggable\",oe.propTypes=D({},re.propTypes,{axis:k.oneOf([\"both\",\"x\",\"y\",\"none\"]),bounds:k.oneOfType([k.shape({left:k.number,right:k.number,top:k.number,bottom:k.number}),k.string,k.oneOf([!1])]),defaultClassName:k.string,defaultClassNameDragging:k.string,defaultClassNameDragged:k.string,defaultPosition:k.shape({x:k.number,y:k.number}),position:k.shape({x:k.number,y:k.number}),className:C,style:C,transform:C}),oe.defaultProps=D({},re.defaultProps,{axis:\"both\",bounds:!1,defaultClassName:\"react-draggable\",defaultClassNameDragging:\"react-draggable-dragging\",defaultClassNameDragged:\"react-draggable-dragged\",defaultPosition:{x:0,y:0},position:null,scale:1}),oe.default=oe,oe.DraggableCore=re,oe}(n(4),n(0))},function(e,t,n){var r=n(13);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,':root{--ck-inspector-color-tree-node-hover:#eaf2fb;--ck-inspector-color-tree-node-name:#882680;--ck-inspector-color-tree-node-attribute-name:#8a8a8a;--ck-inspector-color-tree-node-tag:#aaa;--ck-inspector-color-tree-node-attribute:#9a4819;--ck-inspector-color-tree-node-attribute-value:#2a43ac;--ck-inspector-color-tree-text-border:#b7b7b7;--ck-inspector-color-tree-node-border-hover:#b0c6e0;--ck-inspector-color-tree-content-delimiter:#ddd;--ck-inspector-color-tree-node-active-bg:#f5faff;--ck-inspector-color-tree-node-name-active-bg:#2b98f0;--ck-inspector-color-tree-node-inactive:#8a8a8a;--ck-inspector-color-tree-selection:red;--ck-inspector-color-comment:green}.ck-inspector .ck-inspector-tree{background:var(--ck-inspector-color-white);padding:1em;width:100%;height:100%;overflow:auto;user-select:none}.ck-inspector-tree .ck-inspector-tree-node__attribute{font:inherit;margin-left:.4em;color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__name{color:var(--ck-inspector-color-tree-node-attribute)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value{color:var(--ck-inspector-color-tree-node-attribute-value)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value:before{content:\\'=\"\\'}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value:after{content:\\'\"\\'}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__name{color:var(--ck-inspector-color-tree-node-name);display:block;padding:0 .1em;border-left:1px solid transparent}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__name:hover{background:var(--ck-inspector-color-tree-node-hover)}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__content{padding:1px .5em 1px 1.5em;border-left:1px solid var(--ck-inspector-color-tree-content-delimiter);white-space:pre-wrap}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless) .ck-inspector-tree-node__name:before{content:\"<\";color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless) .ck-inspector-tree-node__name:after{content:\">\";color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless).ck-inspector-tree-node_empty .ck-inspector-tree-node__name:after{content:\" />\"}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_tagless .ck-inspector-tree-node__content{display:none}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:first-child,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:first-child:after,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:first-child:before,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:first-child :not(.ck-inspector-tree__selection){background:var(--ck-inspector-color-tree-node-name-active-bg);color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active .ck-inspector-tree-node__content,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:last-child{background:var(--ck-inspector-color-tree-node-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__content{border-left-color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:last-child{border-left:1px solid var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled{opacity:.8}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled .ck-inspector-tree-node__name,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled .ck-inspector-tree-node__name *{color:var(--ck-inspector-color-tree-node-inactive)}.ck-inspector-tree .ck-inspector-tree-text{display:block;margin-bottom:1px}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-node__content{border:1px dotted var(--ck-inspector-color-tree-text-border);border-radius:2px;padding:0 1px;margin-right:1px;display:inline-block}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes:not(:empty){margin-right:.5em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute{background:var(--ck-inspector-color-tree-node-attribute-name);border-radius:2px;padding:0 .5em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute+.ck-inspector-tree-node__attribute{margin-left:.2em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute>*{color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute:first-child{margin-left:0}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__content{border-style:solid;border-color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__attribute{background:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__attribute>*{color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active>.ck-inspector-tree-node__content{background:var(--ck-inspector-color-tree-node-name-active-bg);color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text:not(.ck-inspector-tree-node_active) .ck-inspector-tree-node__content:hover{background:var(--ck-inspector-color-tree-node-hover);border-style:solid;border-color:var(--ck-inspector-color-tree-node-border-hover)}.ck-inspector-tree .ck-inspector-tree-comment{color:var(--ck-inspector-color-comment);font-style:italic}.ck-inspector-tree .ck-inspector-tree-comment a{color:inherit;text-decoration:underline}.ck-inspector-tree_compact-text .ck-inspector-tree-text,.ck-inspector-tree_compact-text .ck-inspector-tree-text .ck-inspector-tree-node__content{display:inline}.ck-inspector .ck-inspector__tree__navigation{padding:.5em 1em;border-bottom:1px solid var(--ck-inspector-color-border)}.ck-inspector .ck-inspector__tree__navigation label{margin-right:.5em}.ck-inspector-tree .ck-inspector-tree__selection{font-weight:700;color:var(--ck-inspector-color-white);background:var(--ck-inspector-color-tree-selection);padding:0 .2em}',\"\"])},function(e,t){e.exports=function(e){var t=\"undefined\"!=typeof window&&window.location;if(!t)throw new Error(\"fixUrls requires window.location\");if(!e||\"string\"!=typeof e)return e;var n=t.protocol+\"//\"+t.host,r=n+t.pathname.replace(/\\/[^\\/]*$/,\"/\");return e.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(e,t){var o,i=t.trim().replace(/^\"(.*)\"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(i)?e:(o=0===i.indexOf(\"//\")?i:0===i.indexOf(\"/\")?n+i:r+i.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(o)+\")\")})}},function(e,t,n){var r=n(16);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,\":root{--ck-inspector-navbox-empty-background:#fafafa}.ck-inspector .ck-inspector-navbox{display:flex;flex-direction:column;height:100%;align-items:stretch}.ck-inspector .ck-inspector-navbox .ck-inspector-navbox__navigation{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch;min-height:30px;max-height:30px;border-bottom:1px solid var(--ck-inspector-color-border);width:100%;user-select:none;align-items:center}.ck-inspector .ck-inspector-navbox .ck-inspector-navbox__content{display:flex;flex-direction:row;height:100%;overflow:hidden}\",\"\"])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,\":root{--ck-inspector-explorer-width:300px}.ck-inspector .ck-inspector-pane{display:flex;width:100%}.ck-inspector .ck-inspector-pane.ck-inspector-pane_empty{align-items:center;justify-content:center;padding:1em;background:var(--ck-inspector-navbox-empty-background)}.ck-inspector .ck-inspector-pane.ck-inspector-pane_empty p{align-self:center;width:100%;text-align:center}.ck-inspector .ck-inspector-pane>.ck-inspector-navbox:last-child{min-width:var(--ck-inspector-explorer-width);width:var(--ck-inspector-explorer-width)}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child{border-right:1px solid var(--ck-inspector-color-border);flex:1 1 auto;overflow:hidden}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child .ck-inspector-navbox__navigation{align-items:center}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child .ck-inspector-tree__config label{margin-left:1em;margin-right:1em}\",\"\"])},function(e,t,n){var r=n(19);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,\":root{--ck-inspector-color-tab-background-hover:rgba(0,0,0,0.07);--ck-inspector-color-tab-active-border:#0dacef}.ck-inspector .ck-inspector-horizontal-nav{display:flex;flex-direction:row;user-select:none;align-self:stretch}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item{-webkit-appearance:none;background:none;border:0;border-bottom:2px solid transparent;padding:.5em 1em;align-self:stretch}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item:hover{background:var(--ck-inspector-color-tab-background-hover)}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item.ck-inspector-horizontal-nav__item_active{border-bottom-color:var(--ck-inspector-color-tab-active-border)}\",\"\"])},function(e,t,n){var r=n(21);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,\".ck-inspector-side-pane{position:relative}\",\"\"])},function(e,t,n){var r=n(23);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,\".ck-inspector .ck-inspector-button{width:16px;height:16px;border:0;text-indent:100px;overflow:hidden;opacity:.8;margin-left:.7em;flex:0 0 auto}.ck-inspector .ck-inspector-button:first-of-type{margin-left:auto}.ck-inspector .ck-inspector-button:hover{opacity:1}.ck-inspector .ck-inspector-button.ck-inspector-button_log{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNSA0LjE2NWw1LjcgNC4xMi01LjcgMy4xNTNtNy45NDkuMDYyaDUuNjU1IiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlPSIjNkU2RTZFIiBzdHJva2Utd2lkdGg9IjEuNSIvPjwvc3ZnPg==)}.ck-inspector .ck-inspector-button.ck-inspector-button_exec{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIHN0cm9rZT0iIzZFNkU2RSIgc3Ryb2tlLXdpZHRoPSIxLjUiIGN4PSI4IiBjeT0iOCIgcj0iNy4yNSIvPjxwYXRoIGZpbGw9IiM2RTZFNkUiIGQ9Ik02LjA5NCA1LjIzNUwxMS4wNzQgOGwtNC45OCAzLjAxOHoiLz48L2c+PC9zdmc+)}\",\"\"])},function(e,t,n){var r=n(25);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,':root{--ck-inspector-color-property-list-property-name:#d0363f;--ck-inspector-color-property-list-property-value-true:green;--ck-inspector-color-property-list-property-value-false:red;--ck-inspector-color-property-list-property-value-unknown:#888;--ck-inspector-color-property-list-background:#f5f5f5}.ck-inspector .ck-inspector-property-list{display:grid;grid-template-columns:auto 1fr}.ck-inspector .ck-inspector-property-list>:nth-of-type(odd){background:var(--ck-inspector-color-property-list-background)}.ck-inspector .ck-inspector-property-list dt{padding:0 .7em 0 1.2em;min-width:15em}.ck-inspector .ck-inspector-property-list dt label{color:var(--ck-inspector-color-property-list-property-name)}.ck-inspector .ck-inspector-property-list dd{padding-right:.7em}.ck-inspector .ck-inspector-property-list dd input{width:100%}.ck-inspector .ck-inspector-property-list dd input[value=false]{color:var(--ck-inspector-color-property-list-property-value-false)}.ck-inspector .ck-inspector-property-list dd input[value=true]{color:var(--ck-inspector-color-property-list-property-value-true)}.ck-inspector .ck-inspector-property-list dd input[value=\"function() {…}\"],.ck-inspector .ck-inspector-property-list dd input[value=undefined]{color:var(--ck-inspector-color-property-list-property-value-unknown)}.ck-inspector .ck-inspector-property-list dd input[value=\"function() {…}\"]{font-style:italic}',\"\"])},function(e,t,n){var r=n(27);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,\".ck-inspector .ck-inspector__object-inspector{width:100%;background:var(--ck-inspector-color-white);overflow:auto}.ck-inspector .ck-inspector__object-inspector h2,.ck-inspector .ck-inspector__object-inspector h3{display:flex;flex-direction:row;flex-wrap:nowrap}.ck-inspector .ck-inspector__object-inspector h2{padding:1em;overflow:hidden;text-overflow:ellipsis}.ck-inspector .ck-inspector__object-inspector h2 span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;margin-right:1em}.ck-inspector .ck-inspector__object-inspector h2 a{color:var(--ck-inspector-color-tree-node-name)}.ck-inspector .ck-inspector__object-inspector h2 em:after,.ck-inspector .ck-inspector__object-inspector h2 em:before{content:'\\\"'}.ck-inspector .ck-inspector__object-inspector h3{font-size:12px;padding:.4em .7em}.ck-inspector .ck-inspector__object-inspector h3 a{color:inherit}.ck-inspector .ck-inspector__object-inspector h3 .ck-inspector-button{display:none}.ck-inspector .ck-inspector__object-inspector h3:hover .ck-inspector-button{display:block}.ck-inspector .ck-inspector__object-inspector hr{border-top:1px solid var(--ck-inspector-color-border)}\",\"\"])},function(e,t,n){var r=n(29);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,\":root{--ck-inspector-color-white:#fff;--ck-inspector-color-black:#000;--ck-inspector-color-background:#f3f3f3;--ck-inspector-color-link:#005cc6;--ck-inspector-code-font-size:11px;--ck-inspector-code-font-family:monaco,Consolas,Lucida Console,monospace;--ck-inspector-color-border:#d0d0d0}.ck-inspector,.ck-inspector *{box-sizing:border-box;width:auto;height:auto;position:static;margin:0;padding:0;border:0;background:transparent;text-decoration:none;transition:none;word-wrap:break-word;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:12px;line-height:17px;-webkit-font-smoothing:auto}.ck-inspector{overflow:hidden;border-collapse:collapse;color:var(--ck-inspector-color-black);text-align:left;white-space:normal;cursor:auto;float:none;background:var(--ck-inspector-color-background);border-top:1px solid var(--ck-inspector-color-border);z-index:9999}.ck-inspector.ck-inspector_collapsed>.ck-inspector-navbox>.ck-inspector-navbox__navigation .ck-inspector-horizontal-nav{display:none}.ck-inspector .ck-inspector-navbox__navigation__logo,.ck-inspector .ck-inspector-navbox__navigation__toggle{background-size:contain;background-repeat:no-repeat;background-position:50%;display:block;overflow:hidden;text-indent:100px;align-self:center;white-space:nowrap;margin-right:1em}.ck-inspector .ck-inspector-navbox__navigation__logo{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='68' height='64' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M43.71 11.025a11.508 11.508 0 0 0-1.213 5.159c0 6.42 5.244 11.625 11.713 11.625.083 0 .167 0 .25-.002v16.282a5.464 5.464 0 0 1-2.756 4.739L30.986 60.7a5.548 5.548 0 0 1-5.512 0L4.756 48.828A5.464 5.464 0 0 1 2 44.089V20.344c0-1.955 1.05-3.76 2.756-4.738L25.474 3.733a5.548 5.548 0 0 1 5.512 0l12.724 7.292z' fill='%23FFF'/%3E%3Cpath d='M45.684 8.79a12.604 12.604 0 0 0-1.329 5.65c0 7.032 5.744 12.733 12.829 12.733.091 0 .183-.001.274-.003v17.834a5.987 5.987 0 0 1-3.019 5.19L31.747 63.196a6.076 6.076 0 0 1-6.037 0L3.02 50.193A5.984 5.984 0 0 1 0 45.003V18.997c0-2.14 1.15-4.119 3.019-5.19L25.71.804a6.076 6.076 0 0 1 6.037 0L45.684 8.79zm-29.44 11.89c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h25.489c.833 0 1.51-.67 1.51-1.498v-.715c0-.827-.677-1.498-1.51-1.498h-25.49zm0 9.227c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h18.479c.833 0 1.509-.67 1.509-1.498v-.715c0-.827-.676-1.498-1.51-1.498H16.244zm0 9.227c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h25.489c.833 0 1.51-.67 1.51-1.498v-.715c0-.827-.677-1.498-1.51-1.498h-25.49zm41.191-14.459c-5.835 0-10.565-4.695-10.565-10.486 0-5.792 4.73-10.487 10.565-10.487C63.27 3.703 68 8.398 68 14.19c0 5.791-4.73 10.486-10.565 10.486zm3.422-8.68c0-.467-.084-.875-.251-1.225a2.547 2.547 0 0 0-.686-.88 2.888 2.888 0 0 0-1.026-.531 4.418 4.418 0 0 0-1.259-.175c-.134 0-.283.006-.447.018a2.72 2.72 0 0 0-.446.07l.075-1.4h3.587v-1.8h-5.462l-.214 5.06c.319-.116.682-.21 1.089-.28.406-.071.77-.107 1.088-.107.218 0 .437.021.655.063.218.041.413.114.585.218s.313.244.422.419c.109.175.163.391.163.65 0 .424-.132.745-.396.961a1.434 1.434 0 0 1-.938.325c-.352 0-.656-.1-.912-.3-.256-.2-.43-.453-.523-.762l-1.925.588c.1.35.258.664.472.943.214.279.47.514.767.706.298.191.63.339.995.443.365.104.749.156 1.151.156.437 0 .86-.064 1.272-.193.41-.13.778-.323 1.1-.581a2.8 2.8 0 0 0 .775-.981c.193-.396.29-.864.29-1.405z' fill='%231EBC61' fill-rule='nonzero'/%3E%3C/g%3E%3C/svg%3E\\\");width:1.8em;height:1.8em;margin-left:1em}.ck-inspector .ck-inspector-navbox__navigation__toggle{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIgNS41bDUuMjkzIDUuMjkzYTEgMSAwIDAgMCAxLjQxNCAwTDE0IDUuNSIgc3Ryb2tlPSIjNzQ3NDc0IiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==);width:1.6em;height:1.6em;opacity:.7}.ck-inspector .ck-inspector-navbox__navigation__toggle:hover{opacity:1}.ck-inspector .ck-inspector-navbox__navigation__toggle.ck-inspector-navbox__navigation__toggle_up{transform:rotate(180deg)}.ck-inspector .ck-inspector-editor-selector{margin-left:auto;margin-right:1em}.ck-inspector .ck-inspector-code,.ck-inspector .ck-inspector-code *{font-size:var(--ck-inspector-code-font-size);font-family:var(--ck-inspector-code-font-family);cursor:default}.ck-inspector a{color:var(--ck-inspector-color-link);text-decoration:none}.ck-inspector a:hover{text-decoration:underline;cursor:pointer}.ck-inspector button{outline:0}\",\"\"])},function(e,t,n){var r=n(31);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,\"html body.ck-inspector-body-expanded{margin-bottom:var(--ck-inspector-height)}.ck-inspector-wrapper *{box-sizing:border-box}\",\"\"])},function(e,t,n){\"use strict\";n.r(t);var r=n(0),o=n.n(r),i=n(4),a=n.n(i),l=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t},p={base:{position:\"absolute\",userSelect:\"none\",MsUserSelect:\"none\"},top:{width:\"100%\",height:\"10px\",top:\"-5px\",left:\"0px\",cursor:\"row-resize\"},right:{width:\"10px\",height:\"100%\",top:\"0px\",right:\"-5px\",cursor:\"col-resize\"},bottom:{width:\"100%\",height:\"10px\",bottom:\"-5px\",left:\"0px\",cursor:\"row-resize\"},left:{width:\"10px\",height:\"100%\",top:\"0px\",left:\"-5px\",cursor:\"col-resize\"},topRight:{width:\"20px\",height:\"20px\",position:\"absolute\",right:\"-10px\",top:\"-10px\",cursor:\"ne-resize\"},bottomRight:{width:\"20px\",height:\"20px\",position:\"absolute\",right:\"-10px\",bottom:\"-10px\",cursor:\"se-resize\"},bottomLeft:{width:\"20px\",height:\"20px\",position:\"absolute\",left:\"-10px\",bottom:\"-10px\",cursor:\"sw-resize\"},topLeft:{width:\"20px\",height:\"20px\",position:\"absolute\",left:\"-10px\",top:\"-10px\",cursor:\"nw-resize\"}},d=function(e){return Object(r.createElement)(\"div\",{className:e.className,style:c({},p.base,p[e.direction],e.replaceStyles||{}),onMouseDown:function(t){e.onResizeStart(t,e.direction)},onTouchStart:function(t){e.onResizeStart(t,e.direction)}},e.children)},f={userSelect:\"none\",MozUserSelect:\"none\",WebkitUserSelect:\"none\",MsUserSelect:\"none\"},h={userSelect:\"auto\",MozUserSelect:\"auto\",WebkitUserSelect:\"auto\",MsUserSelect:\"auto\"},m=function(e,t,n){return Math.max(Math.min(e,n),t)},g=function(e,t){return Math.round(e/t)*t},v=function(e,t){return t.reduce(function(t,n){return Math.abs(n-e)<Math.abs(t-e)?n:t})},y=function(e,t){return e.substr(e.length-t.length,t.length)===t},b=function(e){return\"auto\"===e.toString()?e.toString():y(e.toString(),\"px\")?e.toString():y(e.toString(),\"%\")?e.toString():y(e.toString(),\"vh\")?e.toString():y(e.toString(),\"vw\")?e.toString():y(e.toString(),\"vmax\")?e.toString():y(e.toString(),\"vmin\")?e.toString():e+\"px\"},k=[\"style\",\"className\",\"grid\",\"snap\",\"bounds\",\"size\",\"defaultSize\",\"minWidth\",\"minHeight\",\"maxWidth\",\"maxHeight\",\"lockAspectRatio\",\"lockAspectRatioExtraWidth\",\"lockAspectRatioExtraHeight\",\"enable\",\"handleStyles\",\"handleClasses\",\"handleWrapperStyle\",\"handleWrapperClass\",\"children\",\"onResizeStart\",\"onResize\",\"onResizeStop\",\"handleComponent\",\"scale\",\"resizeRatio\"],x=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isResizing:!1,resizeCursor:\"auto\",width:void 0===(n.propsSize&&n.propsSize.width)?\"auto\":n.propsSize&&n.propsSize.width,height:void 0===(n.propsSize&&n.propsSize.height)?\"auto\":n.propsSize&&n.propsSize.height,direction:\"right\",original:{x:0,y:0,width:0,height:0}},n.updateExtendsProps(e),n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),\"undefined\"!=typeof window&&(window.addEventListener(\"mouseup\",n.onMouseUp),window.addEventListener(\"mousemove\",n.onMouseMove),window.addEventListener(\"mouseleave\",n.onMouseUp),window.addEventListener(\"touchmove\",n.onMouseMove),window.addEventListener(\"touchend\",n.onMouseUp)),n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r[\"Component\"]),s(t,[{key:\"updateExtendsProps\",value:function(e){this.extendsProps=Object.keys(e).reduce(function(t,n){return-1!==k.indexOf(n)?t:(t[n]=e[n],t)},{})}},{key:\"getParentSize\",value:function(){var e=this.base;if(!e)return{width:window.innerWidth,height:window.innerHeight};var t=!1,n=this.parentNode.style.flexWrap,r=e.style.minWidth;\"wrap\"!==n&&(t=!0,this.parentNode.style.flexWrap=\"wrap\"),e.style.position=\"relative\",e.style.minWidth=\"100%\";var o={width:e.offsetWidth,height:e.offsetHeight};return e.style.position=\"absolute\",t&&(this.parentNode.style.flexWrap=n),e.style.minWidth=r,o}},{key:\"componentDidMount\",value:function(){var e=this.size;this.setState({width:this.state.width||e.width,height:this.state.height||e.height});var t=this.parentNode;if(t instanceof HTMLElement&&!this.base){var n=document.createElement(\"div\");n.style.width=\"100%\",n.style.height=\"100%\",n.style.position=\"absolute\",n.style.transform=\"scale(0, 0)\",n.style.left=\"0\",n.style.flex=\"0\",n.classList?n.classList.add(\"__resizable_base__\"):n.className+=\"__resizable_base__\",t.appendChild(n)}}},{key:\"componentWillReceiveProps\",value:function(e){this.updateExtendsProps(e)}},{key:\"componentWillUnmount\",value:function(){if(\"undefined\"!=typeof window){window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"mouseleave\",this.onMouseUp),window.removeEventListener(\"touchmove\",this.onMouseMove),window.removeEventListener(\"touchend\",this.onMouseUp);var e=this.parentNode,t=this.base;if(!t||!e)return;if(!(e instanceof HTMLElement&&t instanceof Node))return;e.removeChild(t)}}},{key:\"calculateNewSize\",value:function(e,t){var n=this.propsSize&&this.propsSize[t];return\"auto\"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&\"auto\"!==n?e:\"auto\"}},{key:\"onResizeStart\",value:function(e,t){var n=0,r=0;if(e.nativeEvent instanceof MouseEvent){if(n=e.nativeEvent.clientX,r=e.nativeEvent.clientY,3===e.nativeEvent.which)return}else e.nativeEvent instanceof TouchEvent&&(n=e.nativeEvent.touches[0].clientX,r=e.nativeEvent.touches[0].clientY);this.props.onResizeStart&&this.props.onResizeStart(e,t,this.resizable),this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.setState({original:{x:n,y:r,width:this.size.width,height:this.size.height},isResizing:!0,resizeCursor:window.getComputedStyle(e.target).cursor,direction:t})}},{key:\"onMouseMove\",value:function(e){if(this.state.isResizing){var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,n=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,r=this.state,o=r.direction,i=r.original,a=r.width,l=r.height,s=this.props,c=s.lockAspectRatio,u=s.lockAspectRatioExtraHeight,p=s.lockAspectRatioExtraWidth,d=this.props.scale||1,f=this.props,h=f.maxWidth,b=f.maxHeight,k=f.minWidth,x=f.minHeight,w=this.props.resizeRatio||1,E=this.getParentSize();if(h&&\"string\"==typeof h&&y(h,\"%\")){var _=Number(h.replace(\"%\",\"\"))/100;h=E.width*_}if(b&&\"string\"==typeof b&&y(b,\"%\")){var S=Number(b.replace(\"%\",\"\"))/100;b=E.height*S}if(k&&\"string\"==typeof k&&y(k,\"%\")){var C=Number(k.replace(\"%\",\"\"))/100;k=E.width*C}if(x&&\"string\"==typeof x&&y(x,\"%\")){var T=Number(x.replace(\"%\",\"\"))/100;x=E.height*T}h=void 0===h?void 0:Number(h),b=void 0===b?void 0:Number(b),k=void 0===k?void 0:Number(k),x=void 0===x?void 0:Number(x);var N=\"number\"==typeof c?c:i.width/i.height,P=i.width,z=i.height;if(/right/i.test(o)&&(P=i.width+(t-i.x)*w/d,c&&(z=(P-p)/N+u)),/left/i.test(o)&&(P=i.width-(t-i.x)*w/d,c&&(z=(P-p)/N+u)),/bottom/i.test(o)&&(z=i.height+(n-i.y)*w/d,c&&(P=(z-u)*N+p)),/top/i.test(o)&&(z=i.height-(n-i.y)*w/d,c&&(P=(z-u)*N+p)),\"parent\"===this.props.bounds){var R=this.parentNode;if(R instanceof HTMLElement){var O=R.getBoundingClientRect(),D=O.left,M=O.top,I=this.resizable.getBoundingClientRect(),j=I.left,A=I.top,L=R.offsetWidth+(D-j),U=R.offsetHeight+(M-A);h=h&&h<L?h:L,b=b&&b<U?b:U}}else if(\"window\"===this.props.bounds){if(\"undefined\"!=typeof window){var W=this.resizable.getBoundingClientRect(),F=W.left,H=W.top,B=window.innerWidth-F,V=window.innerHeight-H;h=h&&h<B?h:B,b=b&&b<V?b:V}}else if(this.props.bounds instanceof HTMLElement){var $=this.props.bounds.getBoundingClientRect(),Y=$.left,X=$.top,G=this.resizable.getBoundingClientRect(),Q=G.left,q=G.top;if(!(this.props.bounds instanceof HTMLElement))return;var Z=this.props.bounds.offsetWidth+(Y-Q),K=this.props.bounds.offsetHeight+(X-q);h=h&&h<Z?h:Z,b=b&&b<K?b:K}var J=void 0===k?10:k,ee=void 0===h||h<0?P:h,te=void 0===x?10:x,ne=void 0===b||b<0?z:b;if(c){var re=(te-u)*N+p,oe=(ne-u)*N+p,ie=(J-p)/N+u,ae=(ee-p)/N+u,le=Math.max(J,re),se=Math.min(ee,oe),ce=Math.max(te,ie),ue=Math.min(ne,ae);P=m(P,le,se),z=m(z,ce,ue)}else P=m(P,J,ee),z=m(z,te,ne);this.props.grid&&(P=g(P,this.props.grid[0])),this.props.grid&&(z=g(z,this.props.grid[1])),this.props.snap&&this.props.snap.x&&(P=v(P,this.props.snap.x)),this.props.snap&&this.props.snap.y&&(z=v(z,this.props.snap.y));var pe={width:P-i.width,height:z-i.height};if(a&&\"string\"==typeof a&&y(a,\"%\"))P=P/E.width*100+\"%\";if(l&&\"string\"==typeof l&&y(l,\"%\"))z=z/E.height*100+\"%\";this.setState({width:this.calculateNewSize(P,\"width\"),height:this.calculateNewSize(z,\"height\")}),this.props.onResize&&this.props.onResize(e,o,this.resizable,pe)}}},{key:\"onMouseUp\",value:function(e){var t=this.state,n=t.isResizing,r=t.direction,o=t.original;if(n){var i={width:this.size.width-o.width,height:this.size.height-o.height};this.props.onResizeStop&&this.props.onResizeStop(e,r,this.resizable,i),this.props.size&&this.setState(this.props.size),this.setState({isResizing:!1,resizeCursor:\"auto\"})}}},{key:\"updateSize\",value:function(e){this.setState({width:e.width,height:e.height})}},{key:\"renderResizer\",value:function(){var e=this,t=this.props,n=t.enable,o=t.handleStyles,i=t.handleClasses,a=t.handleWrapperStyle,l=t.handleWrapperClass,s=t.handleComponent;if(!n)return null;var c=Object.keys(n).map(function(t){return!1!==n[t]?Object(r.createElement)(d,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:o&&o[t],className:i&&i[t]},s&&s[t]?Object(r.createElement)(s[t]):null):null});return Object(r.createElement)(\"span\",{className:l,style:a},c)}},{key:\"render\",value:function(){var e=this,t=this.state.isResizing?f:h;return Object(r.createElement)(\"div\",c({ref:function(t){t&&(e.resizable=t)},style:c({position:\"relative\"},t,this.props.style,this.sizeStyle,{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:\"border-box\"}),className:this.props.className},this.extendsProps),this.state.isResizing&&Object(r.createElement)(\"div\",{style:{height:\"100%\",width:\"100%\",backgroundColor:\"rgba(0,0,0,0)\",cursor:\"\"+(this.state.resizeCursor||\"auto\"),opacity:\"0\",position:\"fixed\",zIndex:\"9999\",top:\"0\",left:\"0\",bottom:\"0\",right:\"0\"}}),this.props.children,this.renderResizer())}},{key:\"parentNode\",get:function(){return this.resizable.parentNode}},{key:\"propsSize\",get:function(){return this.props.size||this.props.defaultSize}},{key:\"base\",get:function(){var e=this.parentNode;if(e)for(var t=[].slice.call(e.children),n=0;n<t.length;n+=1){var r=t[n];if(r instanceof HTMLElement&&r.classList.contains(\"__resizable_base__\"))return r}}},{key:\"size\",get:function(){var e=0,t=0;if(\"undefined\"!=typeof window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,o=this.resizable.style.position;\"relative\"!==o&&(this.resizable.style.position=\"relative\"),e=\"auto\"!==this.resizable.style.width?this.resizable.offsetWidth:n,t=\"auto\"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=o}return{width:e,height:t}}},{key:\"sizeStyle\",get:function(){var e=this,t=this.props.size,n=function(t){if(void 0===e.state[t]||\"auto\"===e.state[t])return\"auto\";if(e.propsSize&&e.propsSize[t]&&y(e.propsSize[t].toString(),\"%\")){if(y(e.state[t].toString(),\"%\"))return e.state[t].toString();var n=e.getParentSize();return Number(e.state[t].toString().replace(\"px\",\"\"))/n[t]*100+\"%\"}return b(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?b(t.width):n(\"width\"),height:t&&void 0!==t.height&&!this.state.isResizing?b(t.height):n(\"height\")}}}]),t}();x.defaultProps={onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1};var w=x,E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */var _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};var S=n(11),C={width:\"auto\",height:\"auto\",display:\"inline-block\",position:\"absolute\",top:0,left:0},T=function(e){function t(t){var n=e.call(this,t)||this;return n.isResizing=!1,n.state={original:{x:0,y:0},bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.getMaxSizesFromProps=n.getMaxSizesFromProps.bind(n),n}return function(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){var e=this.getOffsetFromParent(),t=e.left,n=e.top,r=this.getDraggablePosition(),o=r.x,i=r.y;this.draggable.setState({x:o-t,y:i-n}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var e=this.draggable.state;return{x:e.x,y:e.y}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){return{maxWidth:void 0===this.props.maxWidth?Number.MAX_SAFE_INTEGER:this.props.maxWidth,maxHeight:void 0===this.props.maxHeight?Number.MAX_SAFE_INTEGER:this.props.maxHeight}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(e){var t=this.props.scale;switch(this.props.bounds){case\"window\":return window.innerHeight/t;case\"body\":return document.body.offsetHeight/t;default:return e.offsetHeight}},t.prototype.getOffsetWidth=function(e){var t=this.props.scale;switch(this.props.bounds){case\"window\":return window.innerWidth/t;case\"body\":return document.body.offsetWidth/t;default:return e.offsetWidth}},t.prototype.onDragStart=function(e,t){if(this.props.onDragStart&&this.props.onDragStart(e,t),this.props.bounds){var n,r=this.getParent(),o=this.props.scale;if(\"parent\"===this.props.bounds)n=r;else{if(\"body\"===this.props.bounds){var i=r.getBoundingClientRect(),a=i.left,l=i.top,s=document.body.getBoundingClientRect(),c=-(a-r.offsetLeft*o-s.left)/o,u=-(l-r.offsetTop*o-s.top)/o,p=(document.body.offsetWidth-this.resizable.size.width*o)/o+c,d=(document.body.offsetHeight-this.resizable.size.height*o)/o+u;return this.setState({bounds:{top:u,right:p,bottom:d,left:c}})}if(\"window\"===this.props.bounds){if(!this.resizable)return;var f=r.getBoundingClientRect(),h=f.left,m=f.top,g=-(h-r.offsetLeft*o)/o,v=-(m-r.offsetTop*o)/o;p=(window.innerWidth-this.resizable.size.width*o)/o+g,d=(window.innerHeight-this.resizable.size.height*o)/o+v;return this.setState({bounds:{top:v,right:p,bottom:d,left:g}})}n=document.querySelector(this.props.bounds)}if(n instanceof HTMLElement&&r instanceof HTMLElement){var y=n.getBoundingClientRect(),b=y.left,k=y.top,x=r.getBoundingClientRect(),w=(b-x.left)/o,E=k-x.top;if(this.resizable){var _=this.getOffsetFromParent();this.setState({bounds:{top:E-_.top,right:w+(n.offsetWidth-this.resizable.size.width)-_.left/o,bottom:E+(n.offsetHeight-this.resizable.size.height)-_.top,left:w-_.left/o}})}}}},t.prototype.onDrag=function(e,t){if(this.props.onDrag){var n=this.getOffsetFromParent();this.props.onDrag(e,_({},t,{x:t.x-n.left,y:t.y-n.top}))}},t.prototype.onDragStop=function(e,t){if(this.props.onDragStop){var n=this.getOffsetFromParent(),r=n.left,o=n.top;return this.props.onDragStop(e,_({},t,{x:t.x+r,y:t.y+o}))}},t.prototype.onResizeStart=function(e,t,n){e.stopPropagation(),this.isResizing=!0;var r=this.props.scale;if(this.setState({original:this.getDraggablePosition()}),this.props.bounds){var o=this.getParent(),i=void 0;i=\"parent\"===this.props.bounds?o:\"body\"===this.props.bounds?document.body:\"window\"===this.props.bounds?window:document.querySelector(this.props.bounds);var a=this.getSelfElement();if(a instanceof Element&&(i instanceof HTMLElement||i===window)&&o instanceof HTMLElement){var l=this.getMaxSizesFromProps(),s=l.maxWidth,c=l.maxHeight,u=this.getParentSize();if(s&&\"string\"==typeof s)if(s.endsWith(\"%\")){var p=Number(s.replace(\"%\",\"\"))/100;s=u.width*p}else s.endsWith(\"px\")&&(s=Number(s.replace(\"px\",\"\")));if(c&&\"string\"==typeof c)if(c.endsWith(\"%\")){p=Number(c.replace(\"%\",\"\"))/100;c=u.width*p}else c.endsWith(\"px\")&&(c=Number(c.replace(\"px\",\"\")));var d=a.getBoundingClientRect(),f=d.left,h=d.top,m=\"window\"===this.props.bounds?{left:0,top:0}:i.getBoundingClientRect(),g=m.left,v=m.top,y=this.getOffsetWidth(i),b=this.getOffsetHeight(i),k=t.toLowerCase().endsWith(\"left\"),x=t.toLowerCase().endsWith(\"right\"),w=t.startsWith(\"top\"),E=t.startsWith(\"bottom\");if(k&&this.resizable){var _=(f-g)/r+this.resizable.size.width;this.setState({maxWidth:_>Number(s)?s:_})}if(x||this.props.lockAspectRatio&&!k){_=y+(g-f)/r;this.setState({maxWidth:_>Number(s)?s:_})}if(w&&this.resizable){_=(h-v)/r+this.resizable.size.height;this.setState({maxHeight:_>Number(c)?c:_})}if(E||this.props.lockAspectRatio&&!w){_=b+(v-h)/r;this.setState({maxHeight:_>Number(c)?c:_})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(e,t,n)},t.prototype.onResize=function(e,t,n,r){var o,i,a=this.getOffsetFromParent();/left/i.test(t)&&(o=this.state.original.x-r.width,this.props.position||this.draggable.setState({x:o}),o+=a.left),/top/i.test(t)&&(i=this.state.original.y-r.height,this.props.position||this.draggable.setState({y:i}),i+=a.top),this.props.onResize&&(void 0===o&&(o=this.getDraggablePosition().x+a.left),void 0===i&&(i=this.getDraggablePosition().y+a.top),this.props.onResize(e,t,n,r,{x:o,y:i}))},t.prototype.onResizeStop=function(e,t,n,r){this.isResizing=!1;var o=this.getMaxSizesFromProps(),i=o.maxWidth,a=o.maxHeight;if(this.setState({maxWidth:i,maxHeight:a}),this.props.onResizeStop){var l=this.getDraggablePosition();this.props.onResizeStop(e,t,n,r,l)}},t.prototype.updateSize=function(e){this.resizable&&this.resizable.updateSize({width:e.width,height:e.height})},t.prototype.updatePosition=function(e){this.draggable.setState(e)},t.prototype.getOffsetFromParent=function(){var e=this.props.scale,t=this.getParent();if(!t)return{top:0,left:0};var n=t.getBoundingClientRect(),r=n.left,o=n.top,i=this.getSelfElement().getBoundingClientRect(),a=this.getDraggablePosition();return{left:i.left-r-a.x*e,top:i.top-o-a.y*e}},t.prototype.render=function(){var e=this,t=this.props,n=t.disableDragging,o=t.style,i=t.dragHandleClassName,a=t.position,l=t.onMouseDown,s=t.dragAxis,c=t.dragGrid,u=t.bounds,p=t.enableUserSelectHack,d=t.cancel,f=t.children,h=(t.onResizeStart,t.onResize,t.onResizeStop,t.onDragStart,t.onDrag,t.onDragStop,t.resizeHandleStyles),m=t.resizeHandleClasses,g=t.enableResizing,v=t.resizeGrid,y=t.resizeHandleWrapperClass,b=t.resizeHandleWrapperStyle,k=t.scale,x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(t,[\"disableDragging\",\"style\",\"dragHandleClassName\",\"position\",\"onMouseDown\",\"dragAxis\",\"dragGrid\",\"bounds\",\"enableUserSelectHack\",\"cancel\",\"children\",\"onResizeStart\",\"onResize\",\"onResizeStop\",\"onDragStart\",\"onDrag\",\"onDragStop\",\"resizeHandleStyles\",\"resizeHandleClasses\",\"enableResizing\",\"resizeGrid\",\"resizeHandleWrapperClass\",\"resizeHandleWrapperStyle\",\"scale\"]),E=this.props.default?_({},this.props.default):void 0;delete x.default;var T,N=_({},C,n||i?{cursor:\"auto\"}:{cursor:\"move\"},o),P=this.getOffsetFromParent(),z=P.left,R=P.top;return a&&(T={x:a.x-z,y:a.y-R}),Object(r.createElement)(S,{ref:function(t){t&&(e.draggable=t)},handle:i?\".\"+i:void 0,defaultPosition:E,onMouseDown:l,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:s,disabled:n,grid:c,bounds:u?this.state.bounds:void 0,position:T,enableUserSelectHack:p,cancel:d,scale:k},Object(r.createElement)(w,_({},x,{ref:function(t){t&&(e.resizable=t)},defaultSize:E,size:this.props.size,enable:g,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:N,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.isResizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.isResizing?this.state.maxHeight:this.props.maxHeight,grid:v,handleWrapperClass:y,handleWrapperStyle:b,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:h,handleClasses:m,scale:this.props.scale}),f))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(r.Component);\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\nclass N{static set(e,t){window.localStorage.setItem(\"ck5-inspector-\"+e,t)}static get(e){return window.localStorage.getItem(\"ck5-inspector-\"+e)}}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */function P(e,t=!0){if(void 0===e)return\"undefined\";if(\"function\"==typeof e)return\"function() {…}\";const n=JSON.stringify(e);return t?n:n.replace(/(^\"|\"$)/g,\"\")}function z(e){return e.map(([e,t])=>(\"symbol\"==typeof e&&(e=e.toString()),[e,P(t)]))}function R(e,t){return e.length>t?e.substr(0,t)+`… [${e.length-t} characters left]`:e}n(12);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const D=500;class M extends r.Component{render(){let e;return e=this.props.items?this.props.items.map((e,t)=>H(e,t,{onClick:this.props.onClick,showCompactText:this.props.showCompactText,activeNode:this.props.activeNode})):\"Nothing to show.\",o.a.createElement(\"div\",{className:[\"ck-inspector-tree\",this.props.showCompactText?\"ck-inspector-tree_compact-text\":\"\"].join(\" \")},e)}}class I extends r.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){this.props.onClick(e,this.props.item.node)}getChildren(){return this.props.item.children.map((e,t)=>H(e,t,this.treeProps))}get isActive(){return this.props.item.node===this.props.activeNode}get treeProps(){return{onClick:this.props.onClick,showCompactText:this.props.showCompactText,activeNode:this.props.activeNode}}}class j extends I{render(){const e=this.props.item,t=e.presentation,n=t&&t.isEmpty,r=t&&t.cssClass,i=[\"ck-inspector-code\",\"ck-inspector-tree-node\",this.isActive?\"ck-inspector-tree-node_active\":\"\",n?\"ck-inspector-tree-node_empty\":\"\",r];return o.a.createElement(\"div\",{className:i.join(\" \"),onClick:this.handleClick},o.a.createElement(\"span\",{className:\"ck-inspector-tree-node__name\"},e.name,this.getAttributes()),o.a.createElement(\"div\",{className:\"ck-inspector-tree-node__content\"},this.getChildren()),n?\"\":o.a.createElement(\"span\",{className:\"ck-inspector-tree-node__name\"},\"/\",e.name))}getAttributes(){const e=[],t=this.props.item;for(const[n,r]of t.attributes)e.push(o.a.createElement(L,{key:n,name:n,value:r}));return e}}class A extends I{render(){const e=[\"ck-inspector-tree-text\",this.isActive?\"ck-inspector-tree-node_active\":\"\"].join(\" \");return o.a.createElement(\"span\",{className:e,onClick:this.handleClick},o.a.createElement(\"span\",{className:\"ck-inspector-tree-node__content\"},this.props.showCompactText?\"\":this.getAttributes(),this.props.showCompactText?\"\":'\"',this.getChildren(),this.props.showCompactText?\"\":'\"'))}getAttributes(){const e=[],t=this.props.item,n=t.presentation,r=n&&n.dontRenderAttributeValue;for(const[n,i]of t.attributes)e.push(o.a.createElement(L,{key:n,name:n,value:i,dontRenderValue:r}));return o.a.createElement(\"span\",{className:\"ck-inspector-tree-text__attributes\"},e)}}class L extends r.Component{render(){let e;const t=R(this.props.value,D);return this.props.dontRenderValue||(e=o.a.createElement(\"span\",{className:\"ck-inspector-tree-node__attribute__value\"},t)),o.a.createElement(\"span\",{className:\"ck-inspector-tree-node__attribute\"},o.a.createElement(\"span\",{className:\"ck-inspector-tree-node__attribute__name\",title:t},this.props.name),e)}}class U extends r.Component{render(){return o.a.createElement(\"span\",{className:\"ck-inspector-tree__selection\"},this.props.isEnd?\"]\":\"[\")}}class W extends r.Component{render(){return o.a.createElement(\"span\",null,this.props.text)}}class F extends r.Component{render(){return o.a.createElement(\"span\",{className:\"ck-inspector-tree-comment\",dangerouslySetInnerHTML:{__html:this.props.item.text}})}}function H(e,t,n){return\"string\"==typeof e?o.a.createElement(W,{key:t,text:e}):\"element\"===e.type?o.a.createElement(j,O({key:t,item:e},n)):\"text\"===e.type?o.a.createElement(A,O({key:t,item:e},n)):\"comment\"===e.type?o.a.createElement(F,{key:t,item:e}):o.a.createElement(U,{key:t,isEnd:e.isEnd})}n(15);\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class B extends r.Component{render(){const e=Array.isArray(this.props.children)?this.props.children:[this.props.children];return o.a.createElement(\"div\",{className:\"ck-inspector-navbox\"},e.length>1?o.a.createElement(\"div\",{className:\"ck-inspector-navbox__navigation\"},e[0]):\"\",o.a.createElement(\"div\",{className:\"ck-inspector-navbox__content\"},e[e.length-1]))}}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class V extends r.Component{render(){return[o.a.createElement(\"label\",{htmlFor:this.props.id,key:\"label\"},this.props.label,\":\"),o.a.createElement(\"select\",{id:this.props.id,value:this.props.value,onChange:this.props.onChange,key:\"select\"},this.props.options.map(e=>o.a.createElement(\"option\",{value:e,key:e},e)))]}}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class $ extends r.Component{render(){return[o.a.createElement(\"label\",{htmlFor:this.props.id,key:\"label\"},this.props.label,\":\"),o.a.createElement(\"input\",{type:\"checkbox\",id:this.props.id,key:\"input\",checked:this.props.isChecked,onChange:this.props.onChange})]}}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */function Y(e){return class extends e{constructor(...e){super(...e),this._onEditorEventCallback=(()=>{this.forceUpdate()})}componentDidMount(){this.startListeningToEditor()}componentDidUpdate(e){e&&e.editor&&e.editor!==this.props.editor&&this.stopListeningToEditor(e),this.props.editor&&(e&&e.editor&&e.editor===this.props.editor||this.startListeningToEditor())}componentWillUnmount(){this.stopListeningToEditor(this.props)}startListeningToEditor(){const{target:e,event:t}=this.editorEventObserverConfig(this.props);e.on(t,this._onEditorEventCallback),this.forceUpdate()}stopListeningToEditor(e){const{target:t,event:n}=this.editorEventObserverConfig(e);t.off(n,this._onEditorEventCallback)}}}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */function X(e){return e&&e.is(\"element\")}function G(e){return e&&e.is(\"rootElement\")}function Q(e){return e.getPath?e.getPath():e.path}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const q=\"model-compact-text\";function Z(e,t,n){return X(e)?function(e,t,n){const r={};if(Object.assign(r,{type:\"element\",name:e.name,children:[],node:e}),e.childCount){let o=!1,i=!1;for(const a of e.getChildren()){const e=Z(a,t,n);o||t.textNode||t.nodeAfter!==a||(r.children.push({type:\"selection\",isEnd:!1}),o=!0),i||n.textNode||n.nodeAfter!==a||(r.children.push({type:\"selection\",isEnd:!0}),i=!0),r.children.push(e),o||t.textNode||t.nodeBefore!==a||(r.children.push({type:\"selection\",isEnd:!1}),o=!0),i||n.textNode||n.nodeBefore!==a||(r.children.push({type:\"selection\",isEnd:!0}),i=!0)}}else t.textNode||t.parent!==e||t.nodeBefore||t.nodeAfter||r.children.push({type:\"selection\",isEnd:!1}),n.textNode||n.parent!==e||n.nodeBefore||n.nodeAfter||r.children.push({type:\"selection\",isEnd:!0});return r.attributes=K(e),r}(e,t,n):function(e,t,n){const r={};let o;Object.assign(r,{type:\"text\",children:[e.data],node:e,presentation:{dontRenderAttributeValue:!0}}),t.textNode===e&&(o=t.offset-e.startOffset,r.children=[e.data.slice(0,o),{type:\"selection\"},e.data.slice(o,e.data.length)]);if(n.textNode===e){let i=n.offset-e.startOffset;t.textNode===n.textNode&&(i-=o);const a=r.children.pop();r.children.push(a.slice(0,i),{type:\"selection\",isEnd:!0},a.slice(i,a.length))}return r.children=r.children.filter(e=>e),r.attributes=K(e),r}(e,t,n)}function K(e){const t=[...e.getAttributes()].map(([e,t])=>[e,P(t,!1)]);return new Map(t)}var J=Y(class extends r.Component{constructor(e){super(e),this.state={showCompactText:\"true\"===N.get(q)},this.handleCompactTextChange=this.handleCompactTextChange.bind(this)}editorEventObserverConfig(e){return{target:e.editor.model.document,event:\"change\"}}handleCompactTextChange(e){this.setState({showCompactText:e.target.checked},()=>{N.set(q,this.state.showCompactText)})}render(){const e=this.getEditorModelTree();return o.a.createElement(B,null,[o.a.createElement(\"div\",{className:\"ck-inspector-tree__config\",key:\"root-cfg\"},o.a.createElement(V,{id:\"view-root-select\",label:\"Root\",value:this.props.currentRootName,options:this.props.editorRoots.map(e=>e.rootName),onChange:e=>this.props.onRootChange(e.target.value)})),o.a.createElement(\"div\",{className:\"ck-inspector-tree__config\",key:\"text-cfg\"},o.a.createElement($,{label:\"Compact text\",id:\"model-compact-text\",isChecked:this.state.showCompactText,onChange:this.handleCompactTextChange}))],o.a.createElement(M,{items:e,onClick:this.props.onClick,showCompactText:this.state.showCompactText,activeNode:this.props.currentEditorNode}))}getEditorModelTree(){if(!this.props.currentRootName)return null;const e=this.props.editor,t=e.model.document.getRoot(this.props.currentRootName),n=e.model.document.selection.getFirstRange();return[Z(t,n.start,n.end)]}});n(3);\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\nclass ee extends r.Component{render(){return o.a.createElement(\"div\",{className:[\"ck-inspector-pane\",this.props.splitVertically?\"ck-inspector-pane_vsplit\":\"\",this.props.isEmpty?\"ck-inspector-pane_empty\":\"\"].join(\" \")},this.props.children)}}n(18);\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class te extends r.Component{constructor(e){super(e),this.handleTabClick=this.handleTabClick.bind(this)}handleTabClick(e){this.setState({activeTab:e},()=>{this.props.onClick(e)})}render(){return o.a.createElement(\"div\",{className:\"ck-inspector-horizontal-nav\"},this.props.definitions.map(e=>o.a.createElement(ne,{key:e,label:e,isActive:this.props.activeTab===e,onClick:()=>this.handleTabClick(e)})))}}class ne extends r.Component{render(){return o.a.createElement(\"button\",{className:[\"ck-inspector-horizontal-nav__item\",this.props.isActive?\" ck-inspector-horizontal-nav__item_active\":\"\"].join(\" \"),key:this.props.label,onClick:this.props.onClick,type:\"button\"},this.props.label)}}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class re extends r.Component{constructor(e){super(e),this.handleTabClick=this.handleTabClick.bind(this)}handleTabClick(e){this.props.onTabChange(e)}render(){const e=Array.isArray(this.props.children)?this.props.children:[this.props.children];return o.a.createElement(B,null,[this.props.contentBefore,o.a.createElement(te,{key:\"navigation\",definitions:e.map(e=>e.props.label),activeTab:this.props.activeTab,onClick:this.handleTabClick}),this.props.contentAfter],e.filter(e=>e.props.label===this.props.activeTab))}}n(20);\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const oe=\"side-pane-width\",ie=200,ae=\"500px\",le={position:\"relative\"};class se extends r.Component{constructor(e){super(e),this.state={width:N.get(oe)||ae},this.handleSidePaneResize=this.handleSidePaneResize.bind(this)}get maxSidePaneWidth(){return Math.min(window.innerWidth-400,.8*window.innerWidth)}handleSidePaneResize(e,t,n){this.setState({width:n.style.width},()=>{N.set(oe,n.style.width)})}render(){return o.a.createElement(\"div\",{className:\"ck-inspector-side-pane\"},o.a.createElement(T,{enableResizing:{left:!0},disableDragging:!0,minWidth:ie,maxWidth:this.maxSidePaneWidth,style:le,position:{x:\"100%\",y:\"100%\"},size:{width:this.state.width,height:\"100%\"},onResizeStop:this.handleSidePaneResize},this.props.children))}}n(22);\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class ce extends r.Component{render(){return o.a.createElement(\"button\",{className:`ck-inspector-button ck-inspector-button_${this.props.type}`,type:\"button\",onClick:this.props.onClick,title:this.props.text},this.props.text)}}n(24);\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const ue=2e3;class pe extends r.Component{render(){const e=Math.random().toString(36).substring(7);return o.a.createElement(\"dl\",{className:\"ck-inspector-property-list ck-inspector-code\"},this.props.items.map(([t,n])=>(n=R(String(n),ue),[o.a.createElement(\"dt\",{key:`${t}-name`},o.a.createElement(\"label\",{htmlFor:`${e}-${t}-input`},t),\":\"),o.a.createElement(\"dd\",{key:`${t}-value`},o.a.createElement(\"input\",{id:`${e}-${t}-input`,type:\"text\",value:n,readOnly:!0}))])))}}n(26);function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class fe extends r.Component{render(){const e=[];for(const t of this.props.lists)t.items.length&&e.push(o.a.createElement(\"hr\",{key:`${t.name}-separator`}),o.a.createElement(\"h3\",{key:`${t.name}-header`},o.a.createElement(\"a\",{href:t.url,target:\"_blank\",rel:\"noopener noreferrer\"},t.name),t.buttons&&t.buttons.map((e,t)=>o.a.createElement(ce,de({key:\"button\"+t},e)))),o.a.createElement(pe,{key:`${t.name}-list`,items:t.items}));return o.a.createElement(\"div\",{className:\"ck-inspector__object-inspector\"},o.a.createElement(\"h2\",{className:\"ck-inspector-code\"},this.props.header),e)}}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class he{static group(...e){console.group(...e)}static groupEnd(...e){console.groupEnd(...e)}static log(...e){console.log(...e)}}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */var me=Y(class extends r.Component{editorEventObserverConfig(e){return{target:e.editor.model.document,event:\"change\"}}render(){const e=this.getInspectedEditorNodeInfo();return e?o.a.createElement(fe,{header:[o.a.createElement(\"span\",{key:\"link\"},o.a.createElement(\"a\",{href:e.url,target:\"_blank\",rel:\"noopener noreferrer\"},o.a.createElement(\"b\",null,e.type),\":\"),\"Text\"===e.type?o.a.createElement(\"em\",null,e.name):e.name),o.a.createElement(ce,{key:\"log\",type:\"log\",text:\"Log in console\",onClick:()=>he.log(e.editorNode)})],lists:[{name:\"Attributes\",url:e.url,items:e.attributes},{name:\"Properties\",url:e.url,items:e.properties}]}):o.a.createElement(ee,{isEmpty:\"true\"},o.a.createElement(\"p\",null,\"Select a node in the tree to inspect\"))}getInspectedEditorNodeInfo(){const e=this.props.inspectedNode,t=this.props.currentRootName;if(!e)return null;if(!G(e)&&!e.parent)return;if(e.root.rootName!==t)return;const n={editorNode:e,properties:[],attributes:[]};return X(e)?(G(e)?(n.type=\"RootElement\",n.name=e.rootName,n.url=\"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_rootelement-RootElement.html\"):(n.type=\"Element\",n.name=e.name,n.url=\"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_element-Element.html\"),n.properties.push([\"childCount\",e.childCount],[\"startOffset\",e.startOffset],[\"endOffset\",e.endOffset],[\"maxOffset\",e.maxOffset])):(n.name=e.data,n.type=\"Text\",n.url=\"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_text-Text.html\",n.properties.push([\"startOffset\",e.startOffset],[\"endOffset\",e.endOffset],[\"offsetSize\",e.offsetSize])),n.properties.push([\"path\",Q(e)]),n.attributes.push(...e.getAttributes()),n.properties=z(n.properties),n.attributes=z(n.attributes),n}});\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const ge=\"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_selection-Selection.html\";function ve(e){return[[\"path\",Q(e)],[\"stickiness\",e.stickiness],[\"index\",e.index],[\"isAtEnd\",e.isAtEnd],[\"isAtStart\",e.isAtStart],[\"offset\",e.offset],[\"textNode\",e.textNode&&e.textNode.data]]}var ye=Y(class extends r.Component{editorEventObserverConfig(e){return{target:e.editor.model.document,event:\"change\"}}render(){const e=this.getEditorSelectionInfo();return o.a.createElement(fe,{header:[o.a.createElement(\"span\",{key:\"link\"},o.a.createElement(\"a\",{href:ge,target:\"_blank\",rel:\"noopener noreferrer\"},o.a.createElement(\"b\",null,\"Selection\"))),o.a.createElement(ce,{key:\"log\",type:\"log\",text:\"Log in console\",onClick:()=>he.log(this.props.editor.model.document.selection)})],lists:[{name:\"Attributes\",url:`${ge}#function-getAttributes`,items:e.attributes},{name:\"Properties\",url:`${ge}`,items:e.properties},{name:\"Anchor\",url:`${ge}#member-anchor`,buttons:[{type:\"log\",text:\"Log in console\",onClick:()=>he.log(this.props.editor.model.document.selection.anchor)}],items:e.anchor},{name:\"Focus\",url:`${ge}#member-focus`,buttons:[{type:\"log\",text:\"Log in console\",onClick:()=>he.log(this.props.editor.model.document.selection.focus)}],items:e.focus}]})}getEditorSelectionInfo(){const e=this.props.editor.model.document.selection,t=e.anchor,n=e.focus,r={properties:[[\"isCollapsed\",e.isCollapsed],[\"isBackward\",e.isBackward],[\"isGravityOverridden\",e.isGravityOverridden],[\"rangeCount\",e.rangeCount]],attributes:[...e.getAttributes()],anchor:ve(t),focus:ve(n)};for(const e in r)r[e]=z(r[e]);return r}});\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const be=\"active-model-tab-name\";class ke extends r.Component{constructor(e){super(e),this.state={editor:null,editorRoots:null,currentRootName:null,currentEditorNode:null,activeTab:N.get(be)||\"Inspect\"},this.handleRootChange=this.handleRootChange.bind(this),this.handlePaneChange=this.handlePaneChange.bind(this),this.handleTreeClick=this.handleTreeClick.bind(this)}handleTreeClick(e,t){e.persist(),e.stopPropagation(),this.setState({currentEditorNode:t},()=>{2==e.detail&&this.setState({activeTab:\"Inspect\"},()=>{N.set(be,\"Inspect\")})})}handleRootChange(e){this.setState({currentRootName:e})}handlePaneChange(e){this.setState({activeTab:e},()=>{N.set(be,e)})}render(){return this.props.editor?o.a.createElement(ee,{splitVertically:\"true\"},o.a.createElement(J,{editor:this.props.editor,editorRoots:this.state.editorRoots,currentEditorNode:this.state.currentEditorNode,currentRootName:this.state.currentRootName,onClick:this.handleTreeClick,onRootChange:this.handleRootChange}),o.a.createElement(se,null,o.a.createElement(re,{onTabChange:this.handlePaneChange,activeTab:this.state.activeTab},o.a.createElement(me,{label:\"Inspect\",editor:this.state.editor,currentRootName:this.state.currentRootName,inspectedNode:this.state.currentEditorNode}),o.a.createElement(ye,{label:\"Selection\",editor:this.state.editor})))):o.a.createElement(ee,{isEmpty:\"true\"},o.a.createElement(\"p\",null,\"Nothing to show. Attach another editor instance to start inspecting.\"))}static getDerivedStateFromProps(e,t){if(e.editor!==t.editor){const t=function(e){if(!e)return null;const t=[...e.model.document.roots];return t.filter(({rootName:e})=>\"$graveyard\"!==e).concat(t.filter(({rootName:e})=>\"$graveyard\"===e))}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */(e.editor);return{editor:e.editor,editorRoots:t,currentRootName:t?t[0].rootName:null,currentEditorNode:null}}return null}}function xe(e){return e&&e.name}function we(e){return e&&xe(e)&&e.is(\"attributeElement\")}function Ee(e){return e&&xe(e)&&e.is(\"emptyElement\")}function _e(e){return e&&xe(e)&&e.is(\"uiElement\")}function Se(e){return e&&e.is(\"rootElement\")}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\nconst Ce=\"view-element-types\";function Te(e,t,n,r){return xe(e)?function(e,t,n,r){const o={};Object.assign(o,{type:\"element\",children:[],node:e}),r?we(e)?o.name=\"attribute:\"+e.name:Se(e)?o.name=\"root:\"+e.name:Ee(e)?o.name=\"empty:\"+e.name:_e(e)?o.name=\"ui:\"+e.name:o.name=\"container:\"+e.name:o.name=e.name;Ee(e)&&(o.presentation={isEmpty:!0});_e(e)&&o.children.push({type:\"comment\",text:[\"&lt;!--\",\"The View UI element content has been skipped. \",'<a href=\"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_uielement-UIElement.html\" target=\"_blank\">',\"Find out why\",\"</a>.\",\" --&gt;\"].join(\"\")});if(e.childCount){let i=!1,a=!1;for(const l of e.getChildren()){const e=Te(l,t,n,r);i||t.nodeAfter!==l||(o.children.push({type:\"selection\",isEnd:!1}),i=!0),a||n.nodeAfter!==l||(o.children.push({type:\"selection\",isEnd:!0}),a=!0),o.children.push(e),i||t.nodeBefore!==l||(o.children.push({type:\"selection\",isEnd:!1}),i=!0),a||n.nodeBefore!==l||(o.children.push({type:\"selection\",isEnd:!0}),a=!0)}}else t.parent!==e||t.nodeBefore||t.nodeAfter||o.children.push({type:\"selection\",isEnd:!1}),n.parent!==e||n.nodeBefore||n.nodeAfter||o.children.push({type:\"selection\",isEnd:!0});return o.attributes=function(e){const t=[...e.getAttributes()].map(([e,t])=>[e,P(t,!1)]);return new Map(t)}(e),o}(e,t,n,r):function(e,t,n){const r={};let o;Object.assign(r,{type:\"text\",children:[e.data],node:e}),t.parent===e&&(o=t.offset,r.children=[e.data.slice(0,o),{type:\"selection\"},e.data.slice(o,e.data.length)]);if(n.parent===e){let e=n.offset;t.parent===n.parent&&(e-=o);const i=r.children.pop();r.children.push(i.slice(0,e),{type:\"selection\",isEnd:!0},i.slice(e,i.length))}return r.children=r.children.filter(e=>e),r}(e,t,n)}var Ne=Y(class extends r.Component{constructor(e){super(e),this.state={showTypes:\"true\"===N.get(Ce)},this.handleShowTypesChange=this.handleShowTypesChange.bind(this)}editorEventObserverConfig(e){return{target:e.editor.editing.view,event:\"render\"}}handleShowTypesChange(e){this.setState({showTypes:e.target.checked},()=>{N.set(Ce,this.state.showTypes)})}render(){const e=this.getEditorViewTree();return o.a.createElement(B,null,[o.a.createElement(\"div\",{className:\"ck-inspector-tree__config\",key:\"root-cfg\"},o.a.createElement(V,{id:\"view-root-select\",label:\"Root\",value:this.props.currentRootName,options:this.props.editorRoots.map(e=>e.rootName),onChange:e=>this.props.onRootChange(e.target.value)})),o.a.createElement(\"div\",{className:\"ck-inspector-tree__config\",key:\"types-cfg\"},o.a.createElement($,{label:\"Show element types\",id:\"view-show-types\",isChecked:this.state.showTypes,onChange:this.handleShowTypesChange}))],o.a.createElement(M,{items:e,onClick:this.props.onClick,showCompactText:\"true\",activeNode:this.props.currentEditorNode}))}getEditorViewTree(){if(!this.props.currentRootName)return;const e=this.props.editor.editing.view.document,t=e.getRoot(this.props.currentRootName),n=e.selection.getFirstRange();return[Te(t,n.start,n.end,this.state.showTypes)]}});\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const Pe=\"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view\";var ze=Y(class extends r.Component{editorEventObserverConfig(e){return{target:e.editor.editing.view,event:\"render\"}}render(){const e=this.getInspectedEditorNodeInfo();return e?o.a.createElement(fe,{header:[o.a.createElement(\"span\",{key:\"link\"},o.a.createElement(\"a\",{href:e.url,target:\"_blank\",rel:\"noopener noreferrer\"},o.a.createElement(\"b\",null,e.type),\":\"),\"Text\"===e.type?o.a.createElement(\"em\",null,e.name):e.name),o.a.createElement(ce,{key:\"log\",type:\"log\",text:\"Log in console\",onClick:()=>he.log(e.editorNode)})],lists:[{name:\"Attributes\",url:e.url,items:e.attributes},{name:\"Properties\",url:e.url,items:e.properties},{name:\"Custom Properties\",url:`${Pe}_element-Element.html#function-getCustomProperty`,items:e.customProperties}]}):o.a.createElement(ee,{isEmpty:\"true\"},o.a.createElement(\"p\",null,\"Select a node in the tree to inspect\"))}getInspectedEditorNodeInfo(){const e=this.props.inspectedNode,t=this.props.currentRootName;if(!e)return null;if(!Se(e)&&!e.parent)return;if(e.root.rootName!==t)return;const n={editorNode:e,properties:[],attributes:[],customProperties:[]};return xe(e)?(Se(e)?(n.type=\"RootEditableElement\",n.name=e.rootName,n.url=`${Pe}_rooteditableelement-RootEditableElement.html`):(n.name=e.name,we(e)?(n.type=\"AttributeElement\",n.url=`${Pe}_attributeelement-AttributeElement.html`):Ee(e)?(n.type=\"EmptyElement\",n.url=`${Pe}_emptyelement-EmptyElement.html`):_e(e)?(n.type=\"UIElement\",n.url=`${Pe}_uielement-UIElement.html`):(n.type=\"ContainerElement\",n.url=`${Pe}_containerelement-ContainerElement.html`)),n.attributes.push(...e.getAttributes()),n.properties.push([\"index\",e.index],[\"isEmpty\",e.isEmpty],[\"childCount\",e.childCount]),n.customProperties.push(...e.getCustomProperties())):(n.name=e.data,n.type=\"Text\",n.url=`${Pe}_text-Text.html`,n.properties.push([\"index\",e.index])),n.properties=z(n.properties),n.customProperties=z(n.customProperties),n.attributes=z(n.attributes),n}});\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const Re=\"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_selection-Selection.html\";function Oe(e){return[[\"offset\",e.offset],[\"isAtEnd\",e.isAtEnd],[\"isAtStart\",e.isAtStart],[\"parent\",(t=e.parent,xe(t)?we(t)?\"attribute:\"+t.name:Se(t)?\"root:\"+t.name:\"container:\"+t.name:t.data)]];var t}var De=Y(class extends r.Component{editorEventObserverConfig(e){return{target:e.editor.editing.view,event:\"render\"}}render(){const e=this.getEditorSelectionInfo();return o.a.createElement(fe,{header:[o.a.createElement(\"span\",{key:\"link\"},o.a.createElement(\"a\",{href:Re,target:\"_blank\",rel:\"noopener noreferrer\"},o.a.createElement(\"b\",null,\"Selection\"))),o.a.createElement(ce,{key:\"log\",type:\"log\",text:\"Log in console\",onClick:()=>he.log(this.props.editor.editing.view.document.selection)})],lists:[{name:\"Properties\",url:`${Re}`,items:e.properties},{name:\"Anchor\",url:`${Re}#member-anchor`,buttons:[{type:\"log\",text:\"Log in console\",onClick:()=>he.log(this.props.editor.editing.view.document.selection.anchor)}],items:e.anchor},{name:\"Focus\",url:`${Re}#member-focus`,buttons:[{type:\"log\",text:\"Log in console\",onClick:()=>he.log(this.props.editor.editing.view.document.selection.focus)}],items:e.focus}]})}getEditorSelectionInfo(){const e=this.props.editor.editing.view.document.selection,t={properties:[[\"isCollapsed\",e.isCollapsed],[\"isBackward\",e.isBackward],[\"isFake\",e.isFake],[\"rangeCount\",e.rangeCount]],anchor:Oe(e.anchor),focus:Oe(e.focus)};for(const e in t)t[e]=z(t[e]);return t}});\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const Me=\"active-view-tab-name\";class Ie extends r.Component{constructor(e){super(e),this.state={editor:null,currentEditorNode:null,editorRoots:null,currentRootName:null,activeTab:N.get(Me)||\"Inspect\"},this.handleTreeClick=this.handleTreeClick.bind(this),this.handlePaneChange=this.handlePaneChange.bind(this),this.handleRootChange=this.handleRootChange.bind(this)}handleTreeClick(e,t){e.persist(),e.stopPropagation(),this.setState({currentEditorNode:t},()=>{2==e.detail&&this.setState({activeTab:\"Inspect\"},()=>{N.set(Me,\"Inspect\")})})}handleRootChange(e){this.setState({currentRootName:e})}handlePaneChange(e){this.setState({activeTab:e},()=>{N.set(Me,e)})}render(){return this.props.editor?o.a.createElement(ee,{splitVertically:\"true\"},o.a.createElement(Ne,{currentEditorNode:this.state.currentEditorNode,currentRootName:this.state.currentRootName,editor:this.props.editor,editorRoots:this.state.editorRoots,onClick:this.handleTreeClick,onRootChange:this.handleRootChange}),o.a.createElement(se,null,o.a.createElement(re,{onTabChange:this.handlePaneChange,activeTab:this.state.activeTab},o.a.createElement(ze,{label:\"Inspect\",editor:this.state.editor,currentRootName:this.state.currentRootName,inspectedNode:this.state.currentEditorNode}),o.a.createElement(De,{label:\"Selection\",editor:this.state.editor})))):o.a.createElement(ee,{isEmpty:\"true\"},o.a.createElement(\"p\",null,\"Nothing to show. Attach another editor instance to start inspecting.\"))}static getDerivedStateFromProps(e,t){const n=function(e){if(!e)return null;return[...e.editing.view.document.roots]}\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */(e.editor);return e.editor!==t.editor?{editor:e.editor,editorRoots:n,currentRootName:n?n[0].rootName:null,currentEditorNode:null}:null}}var je=Y(class extends r.Component{editorEventObserverConfig(e){return{target:e.editor.model.document,event:\"change\"}}render(){return o.a.createElement(B,null,o.a.createElement(M,{items:this.getCommandStates(),onClick:this.props.onClick,activeNode:this.props.currentCommandName}))}getCommandStates(){const e=this.props.editor,t=[];for(const[n,r]of e.commands){const e=[];void 0!==r.value&&e.push([\"value\",P(r.value,!1)]),t.push({name:n,type:\"element\",children:[],node:n,attributes:e,presentation:{isEmpty:!0,cssClass:[\"ck-inspector-tree-node_tagless\",r.isEnabled?\"\":\"ck-inspector-tree-node_disabled\"].join(\" \")}})}return t.sort((e,t)=>e.name>t.name?1:-1)}});\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */var Ae=Y(class extends r.Component{editorEventObserverConfig(e){return{target:e.editor.model.document,event:\"change\"}}render(){const e=this.getEditorCommandInfo();return e?o.a.createElement(fe,{header:[o.a.createElement(\"span\",{key:\"link\"},o.a.createElement(\"a\",{href:e.url,target:\"_blank\",rel:\"noopener noreferrer\"},o.a.createElement(\"b\",null,e.type)),\":\",e.name),o.a.createElement(ce,{key:\"exec\",type:\"exec\",text:\"Execute command\",onClick:()=>this.props.editor.execute(e.name)}),o.a.createElement(ce,{key:\"log\",type:\"log\",text:\"Log in console\",onClick:()=>he.log(e.command)})],lists:[{name:\"Properties\",url:e.url,items:e.properties}]}):o.a.createElement(ee,{isEmpty:\"true\"},o.a.createElement(\"p\",null,\"Select a command to inspect\"))}getEditorCommandInfo(){const e=this.props.editor,t=this.props.inspectedCommandName;if(!t)return null;const n=e.commands.get(t);return{name:t,type:\"Command\",url:\"https://ckeditor.com/docs/ckeditor5/latest/api/module_core_command-Command.html\",properties:z([[\"isEnabled\",n.isEnabled],[\"value\",n.value]]),command:n}}});\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */class Le extends r.Component{constructor(e){super(e),this.state={editor:null,currentCommandName:null},this.handleTreeClick=this.handleTreeClick.bind(this)}handleTreeClick(e,t){e.persist(),e.stopPropagation(),this.setState({currentCommandName:t})}render(){return this.props.editor?o.a.createElement(ee,{splitVertically:\"true\"},o.a.createElement(je,{editor:this.props.editor,currentCommandName:this.state.currentCommandName,onClick:this.handleTreeClick}),o.a.createElement(se,null,o.a.createElement(re,{activeTab:\"Inspect\"},o.a.createElement(Ae,{label:\"Inspect\",editor:this.props.editor,inspectedCommandName:this.state.currentCommandName})))):o.a.createElement(ee,{isEmpty:\"true\"},o.a.createElement(\"p\",null,\"Nothing to show. Attach another editor instance to start inspecting.\"))}static getDerivedStateFromProps(e,t){return e.editor!==t.editor?{editor:e.editor,currentCommandName:null}:null}}n(28);\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */const Ue=\"active-tab-name\",We=\"is-collapsed\",Fe=\"height\",He=\"100\",Be=\"400px\",Ve=30,$e={position:\"fixed\",bottom:\"0\",left:\"0\",right:\"0\",top:\"auto\"};class Ye extends r.Component{constructor(e){super(e);const t=N.get(Fe)||Be;this.state={isCollapsed:\"true\"===N.get(We),height:t,editors:null,currentEditorName:null,activeTab:N.get(Ue)||\"Model\"},qe(t),this.handlePaneChange=this.handlePaneChange.bind(this),this.handleEditorChange=this.handleEditorChange.bind(this),this.handleToggleCollapseClick=this.handleToggleCollapseClick.bind(this),this.handleInspectorResize=this.handleInspectorResize.bind(this)}handlePaneChange(e){this.setState({activeTab:e},()=>{N.set(Ue,e)})}handleEditorChange(e){this.setState({currentEditorName:e})}handleToggleCollapseClick(){this.setState({isCollapsed:!this.state.isCollapsed},()=>{N.set(We,this.state.isCollapsed)})}handleInspectorResize(e,t,n){this.setState({height:n.style.height},()=>{const e=n.style.height;N.set(Fe,e),qe(e)})}render(){this.state.isCollapsed?document.body.classList.remove(\"ck-inspector-body-expanded\"):document.body.classList.add(\"ck-inspector-body-expanded\");const e=this.state.editors.get(this.state.currentEditorName);return o.a.createElement(T,{bounds:\"window\",enableResizing:{top:!this.state.isCollapsed},disableDragging:!0,minHeight:He,maxHeight:\"100%\",style:$e,className:[\"ck-inspector\",this.state.isCollapsed?\"ck-inspector_collapsed\":\"\"].join(\" \"),position:{x:0,y:\"100%\"},size:{width:\"100%\",height:this.state.isCollapsed?Ve:this.state.height},onResizeStop:this.handleInspectorResize},o.a.createElement(re,{onTabChange:this.handlePaneChange,contentBefore:o.a.createElement(Xe,{key:\"docs\"}),activeTab:this.state.activeTab,contentAfter:[o.a.createElement(Qe,{key:\"selector\",currentEditorName:this.state.currentEditorName,editors:this.state.editors,onChange:e=>this.handleEditorChange(e.target.value)}),o.a.createElement(Ge,{key:\"inspector-toggle\",onClick:this.handleToggleCollapseClick,isUp:this.state.isCollapsed})]},o.a.createElement(ke,{label:\"Model\",editor:e}),o.a.createElement(Ie,{label:\"View\",editor:e}),o.a.createElement(Le,{label:\"Commands\",editor:e})))}static getDerivedStateFromProps(e,t){return e.editors.has(t.currentEditorName)?null:{editors:e.editors,currentEditorName:e.editors.size?[...e.editors][0][0]:\"\"}}}class Xe extends r.Component{render(){return o.a.createElement(\"a\",{className:\"ck-inspector-navbox__navigation__logo\",title:\"Go to the documentation\",href:\"https://ckeditor.com/docs/ckeditor5/latest/\",target:\"_blank\",rel:\"noopener noreferrer\"},\"CKEditor documentation\")}}class Ge extends r.Component{render(){return o.a.createElement(\"button\",{type:\"button\",onClick:this.props.onClick,title:\"Toggle inspector\",className:[\"ck-inspector-navbox__navigation__toggle\",this.props.isUp?\" ck-inspector-navbox__navigation__toggle_up\":\"\"].join(\" \")},\"Toggle inspector\")}}class Qe extends r.Component{render(){return o.a.createElement(\"div\",{className:\"ck-inspector-editor-selector\",key:\"editor-selector\"},this.props.currentEditorName?o.a.createElement(V,{id:\"inspector-editor-selector\",label:\"Editor instance\",value:this.props.currentEditorName,options:[...this.props.editors].map(([e])=>e),onChange:this.props.onChange}):\"\")}}function qe(e){document.body.style.setProperty(\"--ck-inspector-height\",e)}n(30);n.d(t,\"default\",function(){return Je}),\n/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\nwindow.CKEDITOR_INSPECTOR_VERSION=\"1.3.0\";const Ze=document.createElement(\"div\");Ze.className=\"ck-inspector-wrapper\";let Ke=0;class Je{static attach(e,t){let n,r;return\"string\"==typeof e?(n=e,r=t):(n=`editor-${++Ke}`,r=e),he.group(\"%cAttached the inspector to a CKEditor 5 instance. To learn more, visit https://ckeditor.com/docs/ckeditor5.\",\"font-weight: bold;\"),he.log(`Editor instance \"${n}\"`,r),he.groupEnd(),Je._editors.set(n,r),r.on(\"destroy\",()=>{Je.detach(n)}),Ze.parentNode||(document.body.appendChild(Ze),a.a.render(o.a.createElement(Ye,{ref:Je._inspectorRef,editors:Je._editors}),Ze)),Je._updateState(),n}static detach(e){Je._editors.delete(e),Je._updateState()}static _updateState(){Je._inspectorRef.current.setState({editors:Je._editors})}}Je._editors=new Map,Je._inspectorRef=o.a.createRef()}]).default});","/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals console, window, document */\n\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic/src/ckeditor';\nimport CKEditorInspector from '@ckeditor/ckeditor5-inspector';\nimport { CS_CONFIG } from '@ckeditor/ckeditor5-cloud-services/tests/_utils/cloud-services-config';\n\nClassicEditor\n\t.create( document.querySelector( '#snippet-classic-editor' ), {\n\t\tcloudServices: CS_CONFIG,\n\t\ttoolbar: {\n\t\t\tviewportTopOffset: window.getViewportTopOffsetConfig()\n\t\t}\n\t} )\n\t.then( editor => {\n\t\twindow.editor = editor;\n\n\t\tdocument.querySelector( '#snippet-inspect-button' ).addEventListener( 'click', () => {\n\t\t\tCKEditorInspector.attach( editor );\n\t\t} );\n\t} )\n\t.catch( err => {\n\t\tconsole.error( err );\n\t} );\n\n"],"sourceRoot":""}