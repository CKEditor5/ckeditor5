<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>UI library - CKEditor 5 Documentation</title>
    <meta property="og:title" content="UI library - CKEditor 5 Documentation">
    <meta property="og:description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <link rel="canonical" href="/ckeditor5/latest/framework/guides/architecture/ui-library.html">
    <link rel="icon" type="image/png" href="../../../assets/img/favicons/16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="../../../assets/img/favicons/32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../assets/img/favicons/96x96.png" sizes="96x96">
    <link rel="apple-touch-icon" type="image/png" href="../../../assets/img/favicons/200x200.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
    <link rel="stylesheet" href="../../../../../assets/0.4.9/css/styles.css" type="text/css" media="screen">
    <link rel="stylesheet" href="../../../assets/styles.css" type="text/css">
    <script>
      ( function() {
      	'use strict';
      	var el = document.createElement( 'script' );
      	el.setAttribute( 'async', 'async' );
      	el.setAttribute( 'defer', 'defer' );
      	if ( typeof Symbol === 'function' && typeof Symbol() === 'symbol' ) {
      		el.src = "../../../../../assets/0.4.9/scripts/app.js";
      	} else {
      		el.src = "../../../../../assets/0.4.9/scripts/app-polyfill.js";
      	}
      	document.getElementsByTagName( 'head' )[ 0 ].appendChild( el );
      } )();
    </script>
    <script>if ( ["ckeditor5.github.io"].indexOf( location.hostname ) !== -1 ) {
      	function pageView() {
      		ga( 'send', 'pageview', location.pathname + location.search + location.hash );
      	}
      
      	(function( i, s, o, g, r, a, m ) {
      		i[ 'GoogleAnalyticsObject' ] = r;
      		i[ r ] = i[ r ] || function() {
      				(i[ r ].q = i[ r ].q || []).push( arguments )
      			}, i[ r ].l = 1 * new Date();
      		a = s.createElement( o ),
      			m = s.getElementsByTagName( o )[ 0 ];
      		a.async = 1;
      		a.src = g;
      		m.parentNode.insertBefore( a, m )
      	})( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
      
      	ga( 'create', {"trackingId":"UA-271067-19","cookieDomain":"ckeditor5.github.io"} );
      
      	pageView();
      
      	window.addEventListener( 'hashchange', pageView );
      }
    </script>
  </head>
  <body>
    <header class="top" data-project="ckeditor5">
      <div class="top__logo top__left"><span class="top__logo__product-icon" style="background-image: url( ../../../assets/img/project-logo.svg )"></span><a class="top__logo__product-title" href="../../../index.html">CKEditor 5</a></div>
      <ul class="top__menu">
        <li><a href="../../../builds/index.html">Builds</a></li>
        <li><a class="top__menu__item--active" href="../../index.html">Framework</a></li>
        <li><a href="../../../examples/index.html">Examples</a></li>
        <li><a href="../../../features/index.html">Features</a></li>
        <li><a class="top__menu__api" href="../../../api/index.html">API</a></li>
        <li><a class="top__menu-github-link" href="https://github.com/ckeditor/ckeditor5" target="_blank" title="CKEditor 5 on GitHub."></a></li>
      </ul>
      <div class="top__search">
        <input class="top__search__box" type="text" id="docsearch_input" placeholder="Search in CKEditor 5">
        <button class="top__search__button" type="submit"><img src="../../../../../assets/0.4.9/img/loupe.svg" alt="Search"></button>
      </div>
    </header>
    <main class="main">
      <section class="main__content formatted">
        <div class="main__content-inner">
          <div class="github-contrib"><a href="https://github.com/ckeditor/ckeditor5/blob/master/docs/framework/guides/architecture/ui-library.md" title="Contribute to this guide"><img src="../../../../../assets/0.4.9/img/edit.svg" alt="Contribute to this guide"></a><a href="https://github.com/ckeditor/ckeditor5/issues/new" title="Report an issue"><img src="../../../../../assets/0.4.9/img/exclamation-circle.svg" alt="Report an issue"></a>
          </div>
          <h1><img src="../../../../../assets/0.4.9/img/book.svg" alt="guide">UI library
          </h1><nav class="secondary-navigation"><h3>Table of contents</h3><ol><li><a href="#views">Views</a><ol><li><a href="#definition">Definition</a></li><li><a href="#interaction">Interaction</a></li><li><a href="#best-practices">Best practices</a></li></ol></li><li><a href="#templates">Templates</a></li><li><a href="#view-collections-and-the-ui-tree">View collections and the UI tree</a></li><li><a href="#using-the-existing-components">Using the existing components</a><ol><li><a href="#dropdowns">Dropdowns</a><ol><li><a href="#adding-a-list-to-a-dropdown">Adding a list to a dropdown</a></li><li><a href="#adding-a-toolbar-to-a-dropdown">Adding a toolbar to a dropdown</a></li></ol></li><li><a href="#best-practices-2">Best practices</a></li></ol></li><li><a href="#keystrokes-and-focus-management">Keystrokes and focus management</a><ol><li><a href="#focus-tracker">Focus tracker</a></li><li><a href="#keystroke-handler">Keystroke handler</a></li></ol></li></ol></nav>
<p>The standard UI library of CKEditor 5 is <a href="https://www.npmjs.com/package/@ckeditor/ckeditor5-ui" target="_blank" rel="noopener"><code>@ckeditor/ckeditor5-ui</code></a>. It provides base classes and helpers that allow for building a modular UI that seamlessly integrates with other components of the ecosystem.</p>
<h2 id="views"><a class="headerlink" href="#views">#</a> Views</h2>
<p>Views use <a href="#templates">templates</a> to build the UI. They also provide observable interfaces that other features (e.g. <a href="core-editor-architecture.html#plugins">plugins</a>, <a href="core-editor-architecture.html#commands">commands</a>, etc.) can use to change the DOM without any actual interaction with the native API.</p>
<h3 id="definition"><a class="headerlink" href="#definition">#</a> Definition</h3>
<p>A simple input view class can be defined as follows:</p>
<pre class="highlight"><code class="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SampleInputView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">constructor</span>( locale ) {
        <span class="hljs-keyword">super</span>( locale );

        <span class="hljs-comment">// An entry point to binding observables with DOM attributes,</span>
        <span class="hljs-comment">// events and text nodes.</span>
        <span class="hljs-keyword">const</span> bind = <span class="hljs-keyword">this</span>.bindTemplate;

        <span class="hljs-comment">// Views define their interface (state) using observable properties.</span>
        <span class="hljs-keyword">this</span>.set( {
            <span class="hljs-attr">isEnabled</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">placeholder</span>: <span class="hljs-string">&apos;&apos;</span>
        } );

        <span class="hljs-keyword">this</span>.setTemplate( {
            <span class="hljs-attr">tag</span>: <span class="hljs-string">&apos;input&apos;</span>,
            <span class="hljs-attr">attributes</span>: {
                <span class="hljs-attr">class</span>: [
                    <span class="hljs-string">&apos;foo&apos;</span>,
                    <span class="hljs-comment">// The value of view#isEnabled will control the presence</span>
                    <span class="hljs-comment">// of the class.</span>
                    bind.if( <span class="hljs-string">&apos;isEnabled&apos;</span>, <span class="hljs-string">&apos;ck-enabled&apos;</span> ),
                ],

                <span class="hljs-comment">// The HTML &quot;placeholder&quot; attribute is also controlled by the observable.</span>
                placeholder: bind.to( <span class="hljs-string">&apos;placeholder&apos;</span> ),
                <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;text&apos;</span>
            },
            <span class="hljs-attr">on</span>: {
                <span class="hljs-comment">// DOM keydown events will fire the view#input event.</span>
                keydown: bind.to( <span class="hljs-string">&apos;input&apos;</span> )
            }
        } );
    }

    setValue( newValue ) {
        <span class="hljs-keyword">this</span>.element.value = newValue;
    }
}
</code></pre>
<p>Note that views encapsulate the DOM they render. Because the UI is organized according to the <em>view-per-tree</em> rule, it is clear which view is responsible for which part of the UI so it is unlikely that a collision occurs between two features writing to the same DOM node.</p>
<p>More often than not, views become children of other views (collections), nodes in the <a href="#view-collections-and-the-ui-tree">UI view tree</a>:</p>
<pre class="highlight"><code class="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParentView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">constructor</span>( locale ) {
        <span class="hljs-keyword">super</span>( locale );

        <span class="hljs-keyword">const</span> childA = <span class="hljs-keyword">new</span> SampleInputView( locale );
        <span class="hljs-keyword">const</span> childB = <span class="hljs-keyword">new</span> SampleInputView( locale );

        <span class="hljs-keyword">this</span>.setTemplate( {
            <span class="hljs-attr">tag</span>: <span class="hljs-string">&apos;div&apos;</span>,
            <span class="hljs-attr">children</span>: [
                childA,
                childB
            ]
        } );
    }
}

<span class="hljs-keyword">const</span> parent = <span class="hljs-keyword">new</span> ParentView( locale );

parent.render();

<span class="hljs-comment">// Will insert &lt;div&gt;&lt;input .. /&gt;&lt;input .. /&gt;&lt;/div&gt;.</span>
<span class="hljs-built_in">document</span>.body.appendChild( parent.element );
</code></pre>
<p>It is also possible to create standalone views that do not belong to any collection. They must be <a href="../../../api/module_ui_view-View.html#function-render">rendered</a> before injection into the DOM:</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> SampleInputView( locale );

view.render();

<span class="hljs-comment">// Will insert &lt;input class=&quot;foo&quot; type=&quot;text&quot; placeholder=&quot;&quot; /&gt;</span>
<span class="hljs-built_in">document</span>.body.appendChild( view.element );
</code></pre>
<h3 id="interaction"><a class="headerlink" href="#interaction">#</a> Interaction</h3>
<p>Features can interact with the state of the DOM via the observable properties of the view, so the following:</p>
<pre class="highlight"><code class="js">view.isEnabled = <span class="hljs-literal">true</span>;
view.placeholder = <span class="hljs-string">&apos;Type some text&apos;</span>;
</code></pre>
<p>will result in:</p>
<pre class="highlight"><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;foo ck-enabled&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Type some text&quot;</span> /&gt;</span>
</code></pre>
<p>Alternatively, they can <a href="core-editor-architecture.html#event-system-and-observables">bind</a> them directly to their own observable properties:</p>
<pre class="highlight"><code class="js">view.bind( <span class="hljs-string">&apos;placeholder&apos;</span>, <span class="hljs-string">&apos;isEnabled&apos;</span> ).to( observable, <span class="hljs-string">&apos;placeholderText&apos;</span>, <span class="hljs-string">&apos;isEnabled&apos;</span> );

<span class="hljs-comment">// The following will be automatically reflected in the view#placeholder and</span>
<span class="hljs-comment">// view.element#placeholder HTML attribute in the DOM.</span>
observable.placeholderText = <span class="hljs-string">&apos;Some placeholder&apos;</span>;
</code></pre>
<p>Also, since views propagate DOM events, features can now react to the user actions:</p>
<pre class="highlight"><code class="js"><span class="hljs-comment">// Each &quot;keydown&quot; event in the input will execute a command.</span>
view.on( <span class="hljs-string">&apos;input&apos;</span>, () =&gt; {
    editor.execute( <span class="hljs-string">&apos;myCommand&apos;</span> );
} );
</code></pre>
<h3 id="best-practices"><a class="headerlink" href="#best-practices">#</a> Best practices</h3>
<p>A complete view should provide an interface for the features, encapsulating DOM nodes and attributes. Features should not touch the DOM of the view using the native API. Any kind of interaction must be handled by the view that owns an <a href="../../../api/module_ui_view-View.html#member-element"><code>element</code></a> to avoid collisions:</p>
<pre class="highlight"><code class="js"><span class="hljs-comment">// Will change the value of the input.</span>
view.setValue( <span class="hljs-string">&apos;A new value of the input.&apos;</span> );

<span class="hljs-comment">// WRONG! This is **NOT** the right way to interact with the DOM because it</span>
<span class="hljs-comment">// collides with an observable binding to the #placeholderText. The value will</span>
<span class="hljs-comment">// be permanently overridden when the state of the observable changes.</span>
view.element.placeholder = <span class="hljs-string">&apos;A new placeholder&apos;</span>;
</code></pre>
<h2 id="templates"><a class="headerlink" href="#templates">#</a> Templates</h2>
<p><a href="../../../api/module_ui_template-Template.html">Templates</a> render DOM elements and text nodes in the UI library. Used primarily by <a href="#views">views</a>, they are the lowest layer of the UI connecting the application to the web page.</p>
<div class="info-box notice"><p>Check out the <a href="../../../api/module_ui_template-TemplateDefinition.html"><code>TemplateDefinition</code></a> to learn more about the template syntax and other advanced concepts.</p></div>
<p>Templates support <a href="core-editor-architecture.html#event-system-and-observables">observable properties</a> bindings and handle native DOM events. A very simple template can look like this:</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">new</span> Template( {
    <span class="hljs-attr">tag</span>: <span class="hljs-string">&apos;p&apos;</span>,
    <span class="hljs-attr">attributes</span>: {
        <span class="hljs-attr">class</span>: [
            <span class="hljs-string">&apos;foo&apos;</span>,
            bind.to( <span class="hljs-string">&apos;className&apos;</span> )
        ],
        <span class="hljs-attr">style</span>: {
            <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&apos;yellow&apos;</span>
        }
    },
    <span class="hljs-attr">on</span>: {
        <span class="hljs-attr">click</span>: bind.to( <span class="hljs-string">&apos;clicked&apos;</span> )
    },
    <span class="hljs-attr">children</span>: [
        <span class="hljs-string">&apos;A paragraph.&apos;</span>
    ]
} ).render();
</code></pre>
<p>It renders to an HTML element:</p>
<pre class="highlight"><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;foo bar&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: yellow;&quot;</span>&gt;</span>A paragraph.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<p>where <code>observable#className</code> is <code>&quot;bar&quot;</code>. The <code>observable</code> in the example above can be a <a href="#views">view</a> or any object which is <a href="../../../api/module_utils_observablemixin-Observable.html">observable</a>. When the value of the <code>className</code> attribute changes, the template updates the <code>class</code> attribute in the DOM. From now on the element is permanently bound to the state of the application.</p>
<p>Similarly, when rendered, the template also takes care of DOM events. A binding to the <code>click</code> event in the definition makes the <code>observable</code> always fire the <code>clicked</code> event upon an action in the DOM. This way the <code>observable</code> provides an event interface of the DOM element and all the communication should pass through it.</p>
<h2 id="view-collections-and-the-ui-tree"><a class="headerlink" href="#view-collections-and-the-ui-tree">#</a> View collections and the UI tree</h2>
<p>Views are organized into <a href="../../../api/module_ui_viewcollection-ViewCollection.html">collections</a> which manage their elements and propagate DOM events even further. Adding or removing a view in a collection moves the <a href="../../../api/module_ui_view-View.html#member-element">view&#x2019;s element</a> in the DOM to reflect the position.</p>
<p>Each editor UI has a <a href="../../../api/module_core_editor_editorui-EditorUI.html#member-view">root view</a>, which can be found under <code>editor.ui.view</code>. Such view usually defines the container element of the editor and undermost view collections that other features can populate.</p>
<p>For instance, the <code>BoxedEditorUiView</code> class defines two collections:</p>
<ul>
<li><a href="../../../api/module_ui_editorui_boxed_boxededitoruiview-BoxedEditorUIView.html#member-top"><code>top</code></a> &#x2013; A collection that hosts the toolbar.</li>
<li><a href="../../../api/module_ui_editorui_boxed_boxededitoruiview-BoxedEditorUIView.html#member-main"><code>main</code></a> &#x2013; A collection that contains the editable area of the editor.</li>
</ul>
<p>It also inherits the <a href="../../../api/module_ui_editorui_editoruiview-EditorUIView.html#member-body"><code>body</code></a> collection which resides directly in the <code>&lt;body&gt;</code> of the web page and stores floating elements like <a href="../../../api/module_ui_panel_balloon_balloonpanelview-BalloonPanelView.html">balloon panels</a>.</p>
<p>Plugins can populate the root view collections with their children. Such child views become a part of the UI tree and will be managed by the editor, e.g. they will be initialized and destroyed along with the editor.</p>
<pre class="highlight"><code class="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPlugin</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Plugin</span> </span>{
    init() {
        <span class="hljs-keyword">const</span> editor = <span class="hljs-keyword">this</span>.editor;
        <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> MyPluginView();

        editor.ui.top.add( view );
    }
}
</code></pre>
<p><code>MyPluginView</code> can <a href="../../../api/module_ui_view-View.html#function-createCollection">create its own view collections</a> and populate them during the life cycle of the editor. There is no limit to the depth of the UI tree, which usually looks like this:</p>
<pre class="highlight"><code class="">EditorUIView
    &#x251C;&#x2500;&#x2500; &quot;top&quot; collection
    &#x2502;    &#x2514;&#x2500;&#x2500; ToolbarView
    &#x2502;        &#x2514;&#x2500;&#x2500; &quot;items&quot; collection
    &#x2502;            &#x251C;&#x2500;&#x2500; DropdownView
    &#x2502;            &#x2502;    &#x251C;&#x2500;&#x2500; ButtonView
    &#x2502;            &#x2502;    &#x2514;&#x2500;&#x2500; PanelView
    &#x2502;            &#x251C;&#x2500;&#x2500; ButtonViewA
    &#x2502;            &#x251C;&#x2500;&#x2500; ButtonViewB
    &#x2502;            &#x2514;&#x2500;&#x2500; ...
    &#x251C;&#x2500;&#x2500; &quot;main&quot; collection
    &#x2502;    &#x2514;&#x2500;&#x2500; InlineEditableUIView
    &#x2514;&#x2500;&#x2500; &quot;body&quot; collection
         &#x251C;&#x2500;&#x2500; BalloonPanelView
         &#x2502;    &#x2514;&#x2500;&#x2500; &quot;content&quot; collection
         &#x2502;        &#x2514;&#x2500;&#x2500; ToolbarView
         &#x251C;&#x2500;&#x2500; BalloonPanelView
         &#x2502;    &#x2514;&#x2500;&#x2500; &quot;content&quot; collection
         &#x2502;        &#x2514;&#x2500;&#x2500; ...
         &#x2514;&#x2500;&#x2500; ...
</code></pre>
<h2 id="using-the-existing-components"><a class="headerlink" href="#using-the-existing-components">#</a> Using the existing components</h2>
<p>The framework provides a number of common <a href="../../../api/ui.html">components</a> like <a href="../../../api/module_ui_button_buttonview-ButtonView.html"><code>ButtonView</code></a> or <a href="../../../api/module_ui_toolbar_toolbarview-ToolbarView.html"><code>ToolbarView</code></a> that can be helpful when developing a new user interface.</p>
<p>For example, to create a toolbar with a few buttons inside, <code>ToolbarView</code> and <code>ButtonView</code> classes need to be imported first:</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">import</span> ToolbarView <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/toolbar/toolbarview&apos;</span>;
<span class="hljs-keyword">import</span> ButtonView <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/button/buttonview&apos;</span>;
</code></pre>
<p>Create the toolbar and a couple of buttons with labels first. Then append the buttons to the toolbar:</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">const</span> toolbar = <span class="hljs-keyword">new</span> ToolbarView();
<span class="hljs-keyword">const</span> buttonFoo = <span class="hljs-keyword">new</span> ButtonView();
<span class="hljs-keyword">const</span> buttonBar = <span class="hljs-keyword">new</span> ButtonView();

buttonFoo.set( {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Foo&apos;</span>,
    <span class="hljs-attr">withText</span>: <span class="hljs-literal">true</span>
} );

buttonBar.set( {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Bar&apos;</span>,
    <span class="hljs-attr">withText</span>: <span class="hljs-literal">true</span>
} );

toolbar.items.add( buttonFoo );
toolbar.items.add( buttonBar );
</code></pre>
<p>The toolbar can now join the <a href="#view-collections-and-the-ui-tree">UI tree</a> or it can be injected straight into the DOM. To keep the example simple, proceed with the latter scenario:</p>
<pre class="highlight"><code class="js">toolbar.render();

<span class="hljs-built_in">document</span>.body.appendChild( toolbar.element );
</code></pre>
<p>The result should look like this:</p>
<p><img src="../../../assets/img/framework-architecture-toolbar.png" alt="A simple toolbar created using existing components." width="636"></p>
<p>The toolbar renders correctly but it does not do much. To execute an action when the button is clicked, a listener must be defined. To shorten the code and instead of two listeners define just one, the buttons can <a href="../../../api/module_utils_emittermixin-EmitterMixin.html#function-delegate">delegate</a> the <a href="../../../api/module_ui_button_buttonview-ButtonView.html#event-execute"><code>execute</code></a> event to their parent:</p>
<pre class="highlight"><code class="js">buttonFoo.delegate( <span class="hljs-string">&apos;execute&apos;</span> ).to( toolbar );
buttonBar.delegate( <span class="hljs-string">&apos;execute&apos;</span> ).to( toolbar );

toolbar.on( <span class="hljs-string">&apos;execute&apos;</span>, evt =&gt; {
    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">`The &quot;<span class="hljs-subst">${ evt.source.label }</span>&quot; button was clicked!`</span> );
} );
</code></pre>
<h3 id="dropdowns"><a class="headerlink" href="#dropdowns">#</a> Dropdowns</h3>
<p>The framework implements the <a href="../../../api/module_ui_dropdown_dropdownview-DropdownView.html">dropdown</a> component which can host any sort of UI in its panel. It is composed of a <a href="../../../api/module_ui_dropdown_dropdownview-DropdownView.html#member-buttonView">button</a> (to open the dropdown) and a <a href="../../../api/module_ui_dropdown_dropdownview-DropdownView.html#member-panelView">panel</a> (the container).</p>
<p>The button can be either:</p>
<ul>
<li>a standard <a href="../../../api/module_ui_button_buttonview-ButtonView.html"><code>ButtonView</code></a>,</li>
<li>a <a href="../../../api/module_ui_dropdown_button_splitbuttonview-SplitButtonView.html"><code>SplitButtonView</code></a>, for more complex use cases.</li>
</ul>
<p>The dropdown panel exposes its <a href="../../../api/module_ui_dropdown_dropdownpanelview-DropdownPanelView.html#member-children">children</a> collection which aggregates the child <a href="../../../api/module_ui_view-View.html">views</a>. The most common views displayed in the dropdown panel are:</p>
<ul>
<li><a href="../../../api/module_ui_list_listview-ListView.html"><code>ListView</code></a></li>
<li><a href="../../../api/module_ui_toolbar_toolbarview-ToolbarView.html"><code>ToolbarView</code></a></li>
</ul>
<p>The framework provides a set of helpers to make the dropdown creation process easier, although it is still possible to compose a custom dropdown from scratch using the base classes.</p>
<p>The <a href="../../../api/module_ui_dropdown_utils.html#static-function-createDropdown"><code>createDropdown</code></a> helper creates a <a href="../../../api/module_ui_dropdown_dropdownview-DropdownView.html"><code>DropdownView</code></a> with either a <a href="../../../api/module_ui_button_buttonview-ButtonView.html"><code>ButtonView</code></a> or a <a href="../../../api/module_ui_dropdown_button_splitbuttonview-SplitButtonView.html"><code>SplitButtonView</code></a>.</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">import</span> { createDropdown } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/dropdown/utils&apos;</span>;
<span class="hljs-keyword">import</span> SplitButtonView <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/dropdown/button/splitbuttonview&apos;</span>;

<span class="hljs-keyword">const</span> dropdownView = createDropdown( locale, SplitButtonView );
</code></pre>
<p>This kind of (default) dropdown comes with a set of behaviors:</p>
<ul>
<li>It closes the panel when it loses the focus, e.g. the user moved the focus elsewhere.</li>
<li>It closes the panel upon the <a href="../../../api/module_ui_dropdown_dropdownview-DropdownView.html#event-execute"><code>execute</code></a> event.</li>
<li>It focuses the view hosted in the panel, e.g. when navigating the toolbar using the keyboard.</li>
</ul>
<h4 id="adding-a-list-to-a-dropdown"><a class="headerlink" href="#adding-a-list-to-a-dropdown">#</a> Adding a list to a dropdown</h4>
<p>The <a href="../../../api/module_ui_list_listview-ListView.html"><code>ListView</code></a> can be added to a dropdown using the <a href="../../../api/module_ui_dropdown_utils.html#static-function-addListToDropdown"><code>addListToDropdown</code></a> helper.</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">import</span> Model <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/model&apos;</span>;
<span class="hljs-keyword">import</span> Collection <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-utils/src/collection&apos;</span>;
<span class="hljs-keyword">import</span> { addListToDropdown, createDropdown } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/dropdown/utils&apos;</span>;

<span class="hljs-comment">// The default dropdown.</span>
<span class="hljs-keyword">const</span> dropdownView = createDropdown( locale );

<span class="hljs-comment">// The collection of the list items.</span>
<span class="hljs-keyword">const</span> items = <span class="hljs-keyword">new</span> Collection();

items.add( <span class="hljs-keyword">new</span> Model( { <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Foo&apos;</span> } ) );
items.add( <span class="hljs-keyword">new</span> Model( { <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Bar&apos;</span> } ) );

<span class="hljs-comment">// Create a dropdown with a list inside the panel.</span>
addListToDropdown( dropdownView, items );
</code></pre>
<h4 id="adding-a-toolbar-to-a-dropdown"><a class="headerlink" href="#adding-a-toolbar-to-a-dropdown">#</a> Adding a toolbar to a dropdown</h4>
<p>A <a href="../../../api/module_ui_toolbar_toolbarview-ToolbarView.html"><code>ToolbarView</code></a> can be added to a dropdown using  the <a href="../../../api/module_ui_dropdown_utils.html#static-function-addToolbarToDropdown"><code>addToolbarToDropdown</code></a> helper.</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">import</span> ButtonView <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/button/buttonview&apos;</span>;
<span class="hljs-keyword">import</span> { addToolbarToDropdown, createDropdown } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/dropdown/utils&apos;</span>;
<span class="hljs-keyword">import</span> SplitButtonView <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-ui/src/dropdown/button/splitbuttonview&apos;</span>;

<span class="hljs-keyword">const</span> buttons = [];

<span class="hljs-comment">// Add a simple button to the array of toolbar items.</span>
buttons.push( <span class="hljs-keyword">new</span> ButtonView() );

<span class="hljs-comment">// Add another component to the array of toolbar items.</span>
buttons.push( componentFactory.create( <span class="hljs-string">&apos;componentName&apos;</span> ) );

<span class="hljs-keyword">const</span> dropdownView = createDropdown( locale, SplitButtonView );

<span class="hljs-comment">// Create a dropdown with a toolbar inside the panel.</span>
addToolbarToDropdown( dropdownView, buttons );
</code></pre>
<p>A common practice is making the main dropdown button <a href="../../../api/module_ui_dropdown_dropdownview-DropdownView.html#member-isEnabled">enabled</a> when one of the toolbar items is enabled:</p>
<pre class="highlight"><code class="js"><span class="hljs-comment">// Enable the dropdown&apos;s button when any of the toolbar items is enabled.</span>
dropdownView.bind( <span class="hljs-string">&apos;isEnabled&apos;</span> ).toMany( buttons, <span class="hljs-string">&apos;isEnabled&apos;</span>,
    ( ...areEnabled ) =&gt; areEnabled.some( <span class="hljs-function"><span class="hljs-params">isEnabled</span> =&gt;</span> isEnabled )
);
</code></pre>
<h3 id="best-practices-2"><a class="headerlink" href="#best-practices-2">#</a> Best practices</h3>
<p>It is advised that for the best user experience the editing view gets <a href="../../../api/module_engine_view_view-View.html#function-focus">focused</a> upon any user action (e.g. executing a command) to make sure the editor retains focus:</p>
<pre class="highlight"><code class="js"><span class="hljs-comment">// Execute some action on dropdown#execute event.</span>
dropdownView.buttonView.on( <span class="hljs-string">&apos;execute&apos;</span>, () =&gt; {
    editor.execute( <span class="hljs-string">&apos;command&apos;</span>, { <span class="hljs-attr">value</span>: ... } );
    editor.editing.view.focus();
} );
</code></pre>
<h2 id="keystrokes-and-focus-management"><a class="headerlink" href="#keystrokes-and-focus-management">#</a> Keystrokes and focus management</h2>
<p><em>Coming soon&#x2026;</em></p>
<p>The framework offers built&#x2013;in classes that help manage keystrokes and focus in the UI. They are particularly useful when it comes to bringing accessibility features to the application.</p>
<h3 id="focus-tracker"><a class="headerlink" href="#focus-tracker">#</a> Focus tracker</h3>
<p>The <a href="../../../api/module_utils_focustracker-FocusTracker.html"><code>FocusTracker</code></a> class can observe a number of HTML elements and determine if one of them is focused either by the user (clicking, typing) or using the <code>HTMLElement.focus()</code> DOM method.</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">import</span> FocusTracker <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-utils/src/focustracker&apos;</span>;

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> focusTracker = <span class="hljs-keyword">new</span> FocusTracker();
</code></pre>
<p>To register elements in the tracker, use the <a href="../../../api/module_utils_focustracker-FocusTracker.html#function-add"><code>add()</code></a> method:</p>
<pre class="highlight"><code class="js">focusTracker.add( <span class="hljs-built_in">document</span>.querySelector( <span class="hljs-string">&apos;.some-element&apos;</span> ) );
focusTracker.add( viewInstance.element );
</code></pre>
<p>Observing focus tracker&#x2019;s <a href="../../../api/module_utils_focustracker-FocusTracker.html#member-isFocused"><code>isFocused</code></a> observable property allows to determine whether one of the registered elements is currently focused:</p>
<pre class="highlight"><code class="js">focusTracker.on( <span class="hljs-string">&apos;change:isFocused&apos;</span>, ( evt, name, isFocused ) =&gt; {
    <span class="hljs-keyword">if</span> ( isFocused ) {
        <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&apos;The&apos;</span>, focusTracker.focusedElement, <span class="hljs-string">&apos;is focused now.&apos;</span> );
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&apos;The elements are blurred.&apos;</span> );
    }
} );
</code></pre>
<p>This information is useful when implementing a certain type of UI whose behavior depends on the focus, for example, contextual panels and floating balloons containing forms should hide when the user decides to abandon them.</p>
<h3 id="keystroke-handler"><a class="headerlink" href="#keystroke-handler">#</a> Keystroke handler</h3>
<p>The <a href="../../../api/module_utils_keystrokehandler-KeystrokeHandler.html"><code>KeystrokeHandler</code></a> listens to the keystroke events fired by an HTML element or any of its descendants and executes pre&#x2013;defined actions when the keystroke is pressed. Usually, each <a href="#views">view</a> creates its own keystroke handler instance which takes care of the keystrokes fired by the elements the view has rendered.</p>
<pre class="highlight"><code class="js"><span class="hljs-keyword">import</span> KeystrokeHandler <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@ckeditor/ckeditor5-utils/src/keystrokehandler&apos;</span>;

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> keystrokeHandler = <span class="hljs-keyword">new</span> KeystrokeHandler();
</code></pre>
<p>To define the scope of the keystroke handler in the DOM, use the <a href="../../../api/module_utils_keystrokehandler-KeystrokeHandler.html#function-listenTo"><code>listenTo()</code></a> method:</p>
<pre class="highlight"><code class="js">keystrokeHandler.listenTo( <span class="hljs-built_in">document</span>.querySelector( <span class="hljs-string">&apos;.some-element&apos;</span> ) );
keystrokeHandler.listenTo( viewInstance.element );
</code></pre>
<div class="info-box notice"><p>Check out the list of <a href="../../../api/module_utils_keyboard.html#static-constant-keyCodes">known key names</a> supported by the keystroke handler.</p></div>
<p>Keystroke action callbacks are functions. To prevent the default action of the keystroke and stop further propagation, use the <code>cancel()</code> function provided in the callback.</p>
<pre class="highlight"><code class="js">keystrokeHandler.set( <span class="hljs-string">&apos;Tab&apos;</span>, ( keyEvtData, cancel ) =&gt; {
    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&apos;Tab was pressed!&apos;</span> );

    <span class="hljs-comment">// This keystroke has been handled and can be canceled.</span>
    cancel();
} );
</code></pre>
<div class="info-box notice"><p>There is also an <a href="../../../api/module_core_editingkeystrokehandler-EditingKeystrokeHandler.html"><code>EditingKeystrokeHandler</code></a> class which has the same API as <code>KeystrokeHandler</code> but it offers direct keystroke bindings to editor commands.</p><p>The editor provides such keystroke handler under the <a href="../../../api/module_core_editor_editor-Editor.html#member-keystrokes"><code>editor.keystrokes</code></a> property so any plugin can register keystrokes associated with editor commands. For example, the <a href="../../../api/module_undo_undo-Undo.html">Undo</a> plugin registers <code>editor.keystrokes.set( &apos;Ctrl+Z&apos;, &apos;undo&apos; );</code> to execute its <code>undo</code> command.</p></div>
<p>When multiple callbacks are assigned to the same keystroke, priorities can be used to decide which one should be handled first and whether other callbacks should be executed at all:</p>
<pre class="highlight"><code class="js">keystrokeHandler.set( <span class="hljs-string">&apos;Ctrl+A&apos;</span>, ( keyEvtData ) =&gt; {
    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&apos;A normal priority listener.&apos;</span> );
} );

keystrokeHandler.set( <span class="hljs-string">&apos;Ctrl+A&apos;</span>, ( keyEvtData ) =&gt; {
    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&apos;A high priority listener.&apos;</span> );

    <span class="hljs-comment">// The normal priority listener will not be executed.</span>
    cancel();
}, { <span class="hljs-attr">priority</span>: <span class="hljs-string">&apos;high&apos;</span> } );
</code></pre>
<p>Pressing <kbd>Ctrl</kbd>+<kbd>A</kbd> will only log:</p>
<pre class="highlight"><code class="">&quot;A high priority listener.&quot;
</code></pre>

        </div>
      </section>
      <div class="side-navigation">
        <div class="side-navigation__wrapper">
          <nav class="side-navigation__inner">
            <ul class="tree guide-tree">
                          <li>
                            <div class="tree__item__wrapper--disabled"><span class="tree__item--folder tree__item__text">Guides</span>
                              <ul>
                                      <li><a href="../overview.html">
                                          <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span></div></a></li>
                                      <li><a href="../quick-start.html">
                                          <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Quick start</span></div></a></li>
                                      <li>
                                        <div class="tree__item__wrapper--disabled"><span class="tree__item--folder tree__item__text">Architecture</span>
                                          <ul>
                                                  <li><a href="intro.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Introduction</span></div></a></li>
                                                  <li><a href="core-editor-architecture.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Core editor architecture</span></div></a></li>
                                                  <li><a href="editing-engine.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Editing engine</span></div></a></li>
                                                  <li><a href="">
                                                      <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">UI library</span></div></a></li>
                                          </ul>
                                        </div>
                                      </li>
                                      <li>
                                        <div class="tree__item__wrapper--disabled"><span class="tree__item--folder tree__item__text">User interface</span>
                                          <ul>
                                                  <li><a href="../ui/theme-customization.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Theme customization</span></div></a></li>
                                                  <li><a href="../ui/external-ui.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Third–party UI</span></div></a></li>
                                                  <li><a href="../ui/document-editor.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Document editor</span></div></a></li>
                                          </ul>
                                        </div>
                                      </li>
                                      <li>
                                        <div class="tree__item__wrapper--disabled"><span class="tree__item--folder tree__item__text">Contributing</span>
                                          <ul>
                                                  <li><a href="../contributing/development-environment.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Development environment</span></div></a></li>
                                                  <li><a href="../contributing/testing-environment.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Testing environment</span></div></a></li>
                                                  <li><a href="../contributing/git-commit-message-convention.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Git commit message convention</span></div></a></li>
                                          </ul>
                                        </div>
                                      </li>
                                      <li>
                                        <div class="tree__item__wrapper--disabled"><span class="tree__item--folder tree__item__text">Support</span>
                                          <ul>
                                                  <li><a href="../support/browser-compatibility.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Browser compatibility</span></div></a></li>
                                                  <li><a href="../support/license-and-legal.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">License and legal</span></div></a></li>
                                                  <li><a href="../support/getting-support.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Getting support</span></div></a></li>
                                                  <li><a href="../support/reporting-issues.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Reporting issues</span></div></a></li>
                                                  <li><a href="../support/error-codes.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Error codes</span></div></a></li>
                                          </ul>
                                        </div>
                                      </li>
                              </ul>
                            </div>
                          </li>
            </ul>
          </nav>
        </div>
      </div>
    </main>
    <footer class="footer footer--bordered">
      <p>&copy; 2017-2018 <a href="http://cksource.com">CKSource</a>. All rights reserved.</p>
    </footer>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
docsearch({
apiKey:'fc463c26455365ad403d5ec51796cd73',indexName:'ckeditor_nightly',inputSelector:'#docsearch_input',algoliaOptions:{hitsPerPage:250,attributesToRetrieve:'*',facetFilters:['tags: ckeditor5']},debug:false,
transformData: function( hits ) {var sortingFn = function( a, b ) {a.custom_ranking = a.custom_ranking || 0;b.custom_ranking = b.custom_ranking || 0;if ( a.custom_ranking === b.custom_ranking ) return a.index - b.index;if ( a.custom_ranking > b.custom_ranking ) return -1;if ( a.custom_ranking < b.custom_ranking ) return 1;};var result = [];var tags = [ 'builds', 'framework', 'examples', 'features', 'api' ];var hitsGrouped = { api: [] };hitsGrouped[ 'framework' ] = hits.filter( function( h ) {return h.tags.includes( 'framework' );} ).slice( 0, 7 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn );tags.forEach( function( tag ) {if ( tag !== 'framework' ) {hitsGrouped[ tag ] = hits.filter( function( h ) {return h.tags.includes( tag );} ).slice( 0, 10 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn ).slice( 0, 3 );}} );var apiSearchHits = [];if ( window.apiSearch ) apiSearchHits = window.apiSearch();hitsGrouped.api = hitsGrouped.api.filter( function( h ) {var isDuplicated = false;for ( var i = 0; i < apiSearchHits.length; i++ ) {if ( h.url.includes( apiSearchHits[ i ].urlShort ) ) {isDuplicated = true;break;}}return !isDuplicated;} );hitsGrouped.api = ( apiSearchHits || [] ).concat( hitsGrouped.api );result = result.concat( hitsGrouped[ 'framework' ] );tags.forEach( function( tag ) {if ( tag !== 'framework' ) result = result.concat( hitsGrouped[ tag ].slice( 0, 4 ) );} );return result;}
});
</script>
  </body>
</html>