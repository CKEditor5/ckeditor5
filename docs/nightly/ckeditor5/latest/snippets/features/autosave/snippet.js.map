{"version":3,"file":"features/autosave/snippet.js","mappings":";;;sBAWO,MAIMA,EAAY,CACxBC,SALwB,kGAMxBC,UAJyB,8CCG1B,IAAIC,EAAkB,IAEtBC,SAASC,cAAe,yBAA0BC,iBAAkB,UAAUC,IAC7EJ,EAAkBI,EAAIC,OAAOC,KAAK,IAGnCC,cACEC,OAAQP,SAASC,cAAe,qBAAuB,CACvDO,cAAeZ,EACfa,MAAO,CACNC,QAAS,CACR,oBAAqB,mBAAoB,sBAAuB,IAChE,qBAAsB,uBAAwB,mBAGhDC,GAAI,CACHC,eAAgB,CACfC,IAAKC,OAAOC,+BAGdC,MAAO,CACNnB,SC3BsB,kCD4BtBoB,2BAA4B,CAAE,SAAU,SAAU,UAEnDC,SAAU,CACT,IAAAC,CAAMC,GACL,OAceC,EAdED,EAAOE,UAepB,IAAIC,SAASC,IAEnBC,YAAY,MAuBd,SAAkCC,GACjC,MAAMC,EAAU3B,SAASC,cAAe,6BAExC2B,IACAD,EAAQE,UAAUC,IAAK,WACvBH,EAAQI,YAAcL,EAEtBD,YAAY,KACc,KAAlBG,GACND,EAAQE,UAAUG,OAAQ,UAC3B,GACE,IACJ,CAlCGC,CAAyBZ,GAEzBG,GAAS,GACPzB,EAAiB,IAPtB,IAAmBsB,CAbhB,GAEDa,WAAY,QAEZC,MAAMf,IACNN,OAAOM,OAASA,EAmBlB,SAAwBA,GACvB,MAAMgB,EAAiBhB,EAAOiB,QAAQC,IAAK,kBACrCC,EAAkBvC,SAASC,cAAe,4BAEhDmC,EAAeI,GAAI,iBAAiB,CAAErC,EAAKsC,EAAcC,KACnDA,EACJH,EAAgBV,UAAUC,IAAK,QAE/BS,EAAgBV,UAAUG,OAAQ,OACnC,GAEF,CA5BEW,CAAevB,EAAQ,IAEvBwB,OAAOC,IACPlB,QAAQmB,MAAOD,EAAIE,MAAO,IA2B5B,IAAInB,EAAiB,C","sources":["webpack://ckeditor5/./packages/ckeditor5-cloud-services/tests/_utils/cloud-services-config.js","webpack://ckeditor5/./node_modules/umberto/source/ckeditor5/44.1.0/_snippets/features/autosave.js","webpack://ckeditor5/./packages/ckeditor5-ckbox/tests/_utils/ckbox-config.js"],"sourcesContent":["/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n// WARNING: The URLs below should not be used for any other purpose than Easy Image plugin development.\n// Images uploaded using the testing token service may be deleted automatically at any moment.\n// If you would like to try the Easy Image service, please sign up for a free trial (https://ckeditor.com/ckeditor-cloud-services/).\n// Images uploaded during the free trial will not be deleted for the whole trial period and additionally the trial service can be converted\n// into a subscription at any moment, allowing you to preserve all uploaded images.\n\nexport const TOKEN_URL = 'https://33333.cke-cs.com/token/dev/ijrDsqFix838Gh3wGO3F77FSW94BwcLXprJ4APSp3XQ26xsUHTi0jcb1hoBt';\n\nexport const UPLOAD_URL = 'https://33333.cke-cs.com/easyimage/upload/';\n\nexport const CS_CONFIG = {\n\ttokenUrl: TOKEN_URL,\n\tuploadUrl: UPLOAD_URL\n};\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * This is the additional demo snippet.\n * The base snippet sits in the /_snippets/installation/getting-and-setting-data folder.\n * This is due to legacy reasons.\n */\n\n/* globals ClassicEditor, console, window, document, setTimeout */\n\nimport { CS_CONFIG } from '@ckeditor/ckeditor5-cloud-services/tests/_utils/cloud-services-config.js';\nimport { TOKEN_URL } from '@ckeditor/ckeditor5-ckbox/tests/_utils/ckbox-config.js';\n\nlet HTTP_SERVER_LAG = 500;\n\ndocument.querySelector( '#snippet-autosave-lag' ).addEventListener( 'change', evt => {\n\tHTTP_SERVER_LAG = evt.target.value;\n} );\n\nClassicEditor\n\t.create( document.querySelector( '#snippet-autosave' ), {\n\t\tcloudServices: CS_CONFIG,\n\t\timage: {\n\t\t\ttoolbar: [\n\t\t\t\t'imageStyle:inline', 'imageStyle:block', 'imageStyle:wrapText', '|',\n\t\t\t\t'toggleImageCaption', 'imageTextAlternative', 'ckboxImageEdit'\n\t\t\t]\n\t\t},\n\t\tui: {\n\t\t\tviewportOffset: {\n\t\t\t\ttop: window.getViewportTopOffsetConfig()\n\t\t\t}\n\t\t},\n\t\tckbox: {\n\t\t\ttokenUrl: TOKEN_URL,\n\t\t\tallowExternalImagesEditing: [ /^data:/, 'origin', /ckbox/ ]\n\t\t},\n\t\tautosave: {\n\t\t\tsave( editor ) {\n\t\t\t\treturn saveData( editor.getData() );\n\t\t\t}\n\t\t},\n\t\tlicenseKey: 'GPL'\n\t} )\n\t.then( editor => {\n\t\twindow.editor = editor;\n\n\t\tdisplayStatus( editor );\n\t} )\n\t.catch( err => {\n\t\tconsole.error( err.stack );\n\t} );\n\nfunction saveData( data ) {\n\treturn new Promise( resolve => {\n\t\t// Fake HTTP server's lag.\n\t\tsetTimeout( () => {\n\t\t\tupdateServerDataConsole( data );\n\n\t\t\tresolve();\n\t\t}, HTTP_SERVER_LAG );\n\t} );\n}\n\nfunction displayStatus( editor ) {\n\tconst pendingActions = editor.plugins.get( 'PendingActions' );\n\tconst statusIndicator = document.querySelector( '#snippet-autosave-status' );\n\n\tpendingActions.on( 'change:hasAny', ( evt, propertyName, newValue ) => {\n\t\tif ( newValue ) {\n\t\t\tstatusIndicator.classList.add( 'busy' );\n\t\t} else {\n\t\t\tstatusIndicator.classList.remove( 'busy' );\n\t\t}\n\t} );\n}\n\nlet consoleUpdates = 0;\n\nfunction updateServerDataConsole( msg ) {\n\tconst console = document.querySelector( '#snippet-autosave-console' );\n\n\tconsoleUpdates++;\n\tconsole.classList.add( 'updated' );\n\tconsole.textContent = msg;\n\n\tsetTimeout( () => {\n\t\tif ( --consoleUpdates == 0 ) {\n\t\t\tconsole.classList.remove( 'updated' );\n\t\t}\n\t}, 500 );\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n// WARNING: The URLs below should not be used for any other purpose than CKBox plugin development.\n// Images uploaded using the testing token service may be deleted automatically at any moment.\n// If you would like to try the CKBox service, please sign up for a free trial.\n// Images uploaded during the free trial will not be deleted for the whole trial period and additionally the trial service can be converted\n// into a subscription at any moment, allowing you to preserve all uploaded images.\nexport const TOKEN_URL = 'https://api.ckbox.io/token/demo';\n\n// If you want to play with non-superadmin tokens, use:\n// export const TOKEN_URL = 'https://preview.ckbox.io/cke-workspaces-demo/?page=token&role=user&workspaces=some-id1,some-id2';\n"],"names":["CS_CONFIG","tokenUrl","uploadUrl","HTTP_SERVER_LAG","document","querySelector","addEventListener","evt","target","value","ClassicEditor","create","cloudServices","image","toolbar","ui","viewportOffset","top","window","getViewportTopOffsetConfig","ckbox","allowExternalImagesEditing","autosave","save","editor","data","getData","Promise","resolve","setTimeout","msg","console","consoleUpdates","classList","add","textContent","remove","updateServerDataConsole","licenseKey","then","pendingActions","plugins","get","statusIndicator","on","propertyName","newValue","displayStatus","catch","err","error","stack"],"sourceRoot":""}