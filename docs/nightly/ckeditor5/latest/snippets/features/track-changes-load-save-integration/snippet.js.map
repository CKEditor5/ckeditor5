{"version":3,"file":"features/track-changes-load-save-integration/snippet.js","mappings":"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","sources":["webpack://ckeditor5/./node_modules/umberto/source/ckeditor5/44.1.0/_snippets/features/track-changes-load-save-integration.js"],"sourcesContent":["/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* globals window, document, LICENSE_KEY, setTimeout, ClassicEditor, EditorWatchdog */\n\n// Application data will be available under a global variable `appData`.\nconst appData = {\n\t// Users data.\n\tusers: [\n\t\t{\n\t\t\tid: 'user-1',\n\t\t\tname: 'Mex Haddox'\n\t\t},\n\t\t{\n\t\t\tid: 'user-2',\n\t\t\tname: 'Zee Croce'\n\t\t}\n\t],\n\n\t// The ID of the current user.\n\tuserId: 'user-1',\n\n\t// Suggestions data.\n\tsuggestions: [\n\t\t{\n\t\t\tid: 'suggestion-1',\n\t\t\ttype: 'insertion',\n\t\t\tauthorId: 'user-2',\n\t\t\tcreatedAt: new Date( 2019, 1, 13, 11, 20, 48 ),\n\t\t\tdata: null,\n\t\t\tattributes: {}\n\t\t},\n\t\t{\n\t\t\tid: 'suggestion-2',\n\t\t\ttype: 'deletion',\n\t\t\tauthorId: 'user-1',\n\t\t\tcreatedAt: new Date( 2019, 1, 14, 12, 7, 20 ),\n\t\t\tdata: null,\n\t\t\tattributes: {}\n\t\t},\n\t\t{\n\t\t\tid: 'suggestion-3',\n\t\t\ttype: 'attribute:bold|ci1tcnk0lkep',\n\t\t\tauthorId: 'user-1',\n\t\t\tcreatedAt: new Date( 2019, 2, 8, 10, 2, 7 ),\n\t\t\tdata: {\n\t\t\t\tkey: 'bold',\n\t\t\t\toldValue: null,\n\t\t\t\tnewValue: true\n\t\t\t},\n\t\t\tattributes: {\n\t\t\t\tgroupId: 'e29adbb2f3963e522da4d2be03bc5345f'\n\t\t\t}\n\t\t}\n\t]\n};\n\nconst initialData =\n\t`<h2>\n\t\tBilingual Personality Disorder\n\t</h2>\n\t<p>\n\t\tThis may be the first time you hear about this\n\t\t<suggestion-start name=\"insertion:suggestion-1:user-2\"></suggestion-start>\n\t\tmade-up<suggestion-end name=\"insertion:suggestion-1:user-2\"></suggestion-end>\n\t\tdisorder but it actually is not that far from truth.\n\t\tAs recent studies show, the language you speak has more effects on you than you realize.\n\t\tAccording to the studies, the language a person speaks affects their cognition,\n\t\t<suggestion-start name=\"deletion:suggestion-2:user-1\"></suggestion-start>\n\t\tfeelings, <suggestion-end name=\"deletion:suggestion-2:user-1\"></suggestion-end>\n\t\tbehavior, emotions and hence <strong>their personality</strong>.\n\t</p>\n\t<figure class=\"image image-style-side\">\n\t\t<img src=\"../../../assets/img/collaboration-demo-img.jpg\"\n\t\t\tsrcset=\"../../../assets/img/collaboration-demo-img.jpg, ../../../assets/img/collaboration-demo-img_2x.jpg 2x\">\n\t\t<figcaption>\n\t\t\tOne language, one person.\n\t\t</figcaption>\n\t</figure>\n\t<p>\n\t\tThis shouldnâ€™t come as a surprise\n\t\t<a href=\"https://en.wikipedia.org/wiki/Lateralization_of_brain_function\">since we already know</a>\n\t\tthat different regions of the brain become more active depending on the activity.\n\t\tThe structure, information and especially\n\t\t<suggestion-start name=\"attribute:bold|ci1tcnk0lkep:suggestion-3:user-1\"></suggestion-start><strong>the \n\t\tculture of languages<suggestion-end name=\"attribute:bold|ci1tcnk0lkep:suggestion-3:user-1\"></strong></suggestion-end>\n\t\tvaries substantially\n\t\tand the language a person speaks is an essential element of daily life.\n\t</p>`;\n\nconst lastSavedData = { data: initialData, suggestionsData: appData.suggestions };\n\nlet consoleUpdates = 0;\nlet editor;\nconst consoleEl = document.querySelector( '#tc-integration-console' );\nconst saveButtonEl = document.querySelector( '#tc-integration-save' );\nconst loadButtonEl = document.querySelector( '#tc-integration-load' );\n\nsaveButtonEl.addEventListener( 'click', () => {\n\tif ( editor ) {\n\t\tlastSavedData.suggestionsData = Array.from( editor.plugins.get( 'TrackChanges' ).getSuggestions( { toJSON: true } ) );\n\t\tlastSavedData.data = editor.data.get();\n\n\t\tupdateConsole( lastSavedData );\n\t\tloadButtonEl.disabled = false;\n\t}\n} );\n\nloadButtonEl.addEventListener( 'click', () => {\n\tif ( editor ) {\n\t\teditor.setData( lastSavedData.data );\n\t}\n} );\n\nfunction updateConsole( data ) {\n\tconst dataEl = document.createElement( 'div' );\n\tconst suggestionsEl = document.createElement( 'div' );\n\n\tconsoleUpdates++;\n\tconsoleEl.classList.add( 'updated' );\n\n\tdataEl.className = 'tc-integration-console__data';\n\tdataEl.textContent = data.data;\n\n\tsuggestionsEl.className = 'tc-integration-console__suggestions';\n\tsuggestionsEl.textContent = JSON.stringify( data.suggestionsData, undefined, 2 );\n\n\tconsoleEl.innerHTML = '';\n\tconsoleEl.appendChild( suggestionsEl );\n\tconsoleEl.appendChild( dataEl );\n\n\tsetTimeout( () => {\n\t\tif ( --consoleUpdates == 0 ) {\n\t\t\tconsoleEl.classList.remove( 'updated' );\n\t\t}\n\t}, 500 );\n}\n\nclass TrackChangesIntegration {\n\tconstructor( editor ) {\n\t\tthis.editor = editor;\n\t}\n\n\tinit() {\n\t\tconst usersPlugin = this.editor.plugins.get( 'Users' );\n\t\tconst trackChangesPlugin = this.editor.plugins.get( 'TrackChanges' );\n\n\t\t// Load the users data.\n\t\tfor ( const user of appData.users ) {\n\t\t\tusersPlugin.addUser( user );\n\t\t}\n\n\t\t// Set the current user.\n\t\tusersPlugin.defineMe( appData.userId );\n\n\t\t// Load the comment threads data.\n\t\tfor ( const suggestion of lastSavedData.suggestionsData ) {\n\t\t\ttrackChangesPlugin.addSuggestion( suggestion );\n\t\t}\n\t}\n}\n\nconst watchdog = new EditorWatchdog( ClassicEditor );\nwindow.watchdog = watchdog;\n\nwatchdog.setCreator( ( el, config ) => {\n\treturn ClassicEditor.create( el, config )\n\t\t.then( _editor => {\n\t\t\teditor = _editor;\n\n\t\t\t_editor.execute( 'trackChanges' );\n\n\t\t\treturn _editor;\n\t\t} );\n} );\n\nwatchdog.setDestructor( _editor => {\n\teditor = undefined;\n\n\treturn _editor.destroy();\n} );\n\nwatchdog.create( document.querySelector( '.tc-integration .editor' ), {\n\tinitialData: lastSavedData.data,\n\textraPlugins: [ TrackChangesIntegration ],\n\ttoolbar: {\n\t\titems: [\n\t\t\t'undo', 'redo',\n\t\t\t'|', 'trackChanges', 'comment', 'commentsArchive',\n\t\t\t'|', 'heading',\n\t\t\t'|', 'bold', 'italic',\n\t\t\t{\n\t\t\t\tlabel: 'More...',\n\t\t\t\titems: [ 'insertImage', '|', 'link', '|', 'bulletedList', 'numberedList' ]\n\t\t\t}\n\t\t],\n\t\tshouldNotGroupWhenFull: true\n\t},\n\tlicenseKey: LICENSE_KEY,\n\tsidebar: {\n\t\tcontainer: document.querySelector( '.tc-integration .sidebar' )\n\t},\n\timage: {\n\t\ttoolbar: [\n\t\t\t'imageStyle:inline', 'imageStyle:block', 'imageStyle:wrapText', '|',\n\t\t\t'toggleImageCaption', 'imageTextAlternative', '|', 'ckboxImageEdit'\n\t\t]\n\t},\n\tckbox: {\n\t\tallowExternalImagesEditing: [ /^data:/, 'origin', /ckbox/ ],\n\t\tforceDemoLabel: true\n\t},\n\tui: {\n\t\tviewportOffset: {\n\t\t\ttop: window.getViewportTopOffsetConfig()\n\t\t}\n\t},\n\tcomments: {\n\t\teditorConfig: {\n\t\t\textraPlugins: ClassicEditor.builtinPlugins.filter( plugin => {\n\t\t\t\treturn [ 'Bold', 'Italic', 'Underline', 'List', 'Autoformat' ].includes( plugin.pluginName );\n\t\t\t} )\n\t\t}\n\t},\n\tmention: {\n\t\tfeeds: [\n\t\t\t{\n\t\t\t\tmarker: '@',\n\t\t\t\tfeed: [ '@Barney', '@Lily', '@Marry Ann', '@Marshall', '@Robin', '@Ted' ]\n\t\t\t}\n\t\t]\n\t}\n} );\n"],"names":["appData","users","id","name","userId","suggestions","type","authorId","createdAt","Date","data","attributes","key","oldValue","newValue","groupId","lastSavedData","suggestionsData","editor","consoleUpdates","consoleEl","document","querySelector","saveButtonEl","loadButtonEl","addEventListener","Array","from","plugins","get","getSuggestions","toJSON","dataEl","createElement","suggestionsEl","classList","add","className","textContent","JSON","stringify","undefined","innerHTML","appendChild","setTimeout","remove","updateConsole","disabled","setData","watchdog","EditorWatchdog","ClassicEditor","window","setCreator","el","config","create","then","_editor","execute","setDestructor","destroy","initialData","extraPlugins","constructor","this","init","usersPlugin","trackChangesPlugin","user","addUser","defineMe","suggestion","addSuggestion","toolbar","items","label","shouldNotGroupWhenFull","licenseKey","sidebar","container","image","ckbox","allowExternalImagesEditing","forceDemoLabel","ui","viewportOffset","top","getViewportTopOffsetConfig","comments","editorConfig","builtinPlugins","filter","plugin","includes","pluginName","mention","feeds","marker","feed"],"sourceRoot":""}