{"version":3,"file":"features/comments-load-save-integration/snippet.js","mappings":"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","sources":["webpack://ckeditor5/./node_modules/umberto/source/ckeditor5/44.1.0/_snippets/features/comments-load-save-integration.js"],"sourcesContent":["/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* globals window, document, LICENSE_KEY, setTimeout, EditorWatchdog, ClassicEditor, MentionPlugin */\n\n// Application data will be available under a global variable `appData`.\nconst appData = {\n\t// Users data.\n\tusers: [\n\t\t{\n\t\t\tid: 'user-1',\n\t\t\tname: 'Mex Haddox'\n\t\t},\n\t\t{\n\t\t\tid: 'user-2',\n\t\t\tname: 'Zee Croce'\n\t\t}\n\t],\n\n\t// The ID of the current user.\n\tuserId: 'user-1',\n\n\t// Comment threads data.\n\tcommentThreads: [\n\t\t{\n\t\t\tthreadId: 'thread-1',\n\t\t\tcomments: [\n\t\t\t\t{\n\t\t\t\t\tcommentId: 'comment-1',\n\t\t\t\t\tauthorId: 'user-1',\n\t\t\t\t\tcontent: '<p>Are we sure we want to use a made-up disorder name?</p>',\n\t\t\t\t\tcreatedAt: new Date( '09/20/2018 14:21:53' ),\n\t\t\t\t\tattributes: {}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcommentId: 'comment-2',\n\t\t\t\t\tauthorId: 'user-2',\n\t\t\t\t\tcontent: '<p>Why not?</p>',\n\t\t\t\t\tcreatedAt: new Date( '09/21/2018 08:17:01' ),\n\t\t\t\t\tattributes: {}\n\t\t\t\t}\n\t\t\t],\n\t\t\tcontext: {\n\t\t\t\ttype: 'text',\n\t\t\t\tvalue: 'Bilingual Personality Disorder'\n\t\t\t},\n\t\t\tresolvedAt: null,\n\t\t\tresolvedBy: null,\n\t\t\tattributes: {}\n\t\t}\n\t]\n};\n\nconst initialData =\n\t`<h2>\n\t\t<comment-start name=\"thread-1\"></comment-start>\n\t\tBilingual Personality Disorder\n\t\t<comment-end name=\"thread-1\"></comment-end>\n\t</h2>\n\t</h2>\n\t<p>\n\t\tThis may be the first time you hear about this made-up disorder but it actually isn’t so far from the truth.\n\t\tAs recent studies show, the language you speak has more effects on you than you realize.\n\t\tAccording to the studies, the language a person speaks affects their cognition,\n\t\tbehavior, emotions and hence <strong>their personality</strong>.\n\t</p>\n\t<figure class=\"image image-style-side\">\n\t\t<img src=\"../../../assets/img/collaboration-demo-img.jpg\"\n\t\t\tsrcset=\"../../../assets/img/collaboration-demo-img.jpg, ../../../assets/img/collaboration-demo-img_2x.jpg 2x\">\n\t\t<figcaption>\n\t\t\tOne language, one person.\n\t\t</figcaption>\n\t</figure>\n\t<p>\n\t\tThis shouldn’t come as a surprise\n\t\t<a href=\"https://en.wikipedia.org/wiki/Lateralization_of_brain_function\">since we already know</a>\n\t\tthat different regions of the brain become more active depending on the activity.\n\t\tThe structure, information and especially <strong>the culture</strong> of languages varies substantially\n\t\tand the language a person speaks is an essential element of daily life.\n\t</p>`;\n\nconst lastSavedData = { data: initialData, threadsData: appData.commentThreads };\n\nlet consoleUpdates = 0;\nlet editor;\nconst consoleEl = document.querySelector( '#comments-integration-console' );\nconst saveButtonEl = document.querySelector( '#comments-integration-save' );\nconst loadButtonEl = document.querySelector( '#comments-integration-load' );\n\nsaveButtonEl.addEventListener( 'click', () => {\n\tif ( editor ) {\n\t\tlastSavedData.threadsData = editor.plugins.get( 'CommentsRepository' ).getCommentThreads( {\n\t\t\tskipNotAttached: true,\n\t\t\tskipEmpty: true\n\t\t} );\n\n\t\tlastSavedData.data = editor.data.get();\n\n\t\tupdateConsole( lastSavedData );\n\t\tloadButtonEl.disabled = false;\n\t}\n} );\n\nloadButtonEl.addEventListener( 'click', () => {\n\tif ( editor ) {\n\t\teditor.setData( lastSavedData.data );\n\t}\n} );\n\nfunction updateConsole( data ) {\n\tconst dataEl = document.createElement( 'div' );\n\tconst commentsEl = document.createElement( 'div' );\n\n\tconsoleUpdates++;\n\tconsoleEl.classList.add( 'updated' );\n\n\tdataEl.className = 'comments-integration-console__data';\n\tdataEl.textContent = data.data;\n\n\tcommentsEl.className = 'comments-integration-console__comments';\n\tcommentsEl.textContent = JSON.stringify( data.threadsData, undefined, 2 );\n\n\tconsoleEl.innerHTML = '';\n\tconsoleEl.appendChild( commentsEl );\n\tconsoleEl.appendChild( dataEl );\n\n\tsetTimeout( () => {\n\t\tif ( --consoleUpdates == 0 ) {\n\t\t\tconsoleEl.classList.remove( 'updated' );\n\t\t}\n\t}, 500 );\n}\n\nclass CommentsIntegration {\n\tconstructor( editor ) {\n\t\tthis.editor = editor;\n\t}\n\n\tstatic get requires() {\n\t\treturn [ 'CommentsRepository' ];\n\t}\n\n\tinit() {\n\t\tconst usersPlugin = this.editor.plugins.get( 'Users' );\n\t\tconst commentsRepositoryPlugin = this.editor.plugins.get( 'CommentsRepository' );\n\n\t\t// Load the users data.\n\t\tfor ( const user of appData.users ) {\n\t\t\tusersPlugin.addUser( user );\n\t\t}\n\n\t\t// Set the current user.\n\t\tusersPlugin.defineMe( 'user-1' );\n\n\t\t// Load the comment threads data.\n\t\tfor ( const commentThread of lastSavedData.threadsData ) {\n\t\t\tcommentsRepositoryPlugin.addCommentThread( commentThread );\n\t\t}\n\t}\n}\n\nconst watchdog = new EditorWatchdog( ClassicEditor );\n\nwatchdog.setCreator( ( el, config ) => {\n\treturn window.ClassicEditor.create( el, config )\n\t\t.then( newEditor => {\n\t\t\teditor = newEditor;\n\n\t\t\treturn editor;\n\t\t} );\n} );\n\nwatchdog.setDestructor( oldEditor => {\n\teditor = null;\n\n\treturn oldEditor.destroy();\n} );\n\nwindow.watchdog = watchdog;\n\nwatchdog.create( document.querySelector( '.comments-integration .editor' ), {\n\tinitialData: lastSavedData.data,\n\tplugins: [\n\t\t'Essentials', 'Autoformat', 'Heading', 'Bold', 'Italic', 'Link', 'List', 'Image', 'EasyImage',\n\t\t'ImageToolbar', 'ImageStyle', 'ImageCaption', 'Comments', CommentsIntegration, MentionPlugin\n\t],\n\ttoolbar: {\n\t\titems: [\n\t\t\t'undo', 'redo',\n\t\t\t'|', 'comment', 'commentsArchive',\n\t\t\t'|', 'heading',\n\t\t\t'|', 'bold', 'italic',\n\t\t\t'|', 'link',\n\t\t\t'|', 'bulletedList', 'numberedList'\n\t\t]\n\t},\n\tlicenseKey: LICENSE_KEY,\n\tsidebar: {\n\t\tcontainer: document.querySelector( '.comments-integration .sidebar' )\n\t},\n\tui: {\n\t\tviewportOffset: {\n\t\t\ttop: window.getViewportTopOffsetConfig()\n\t\t}\n\t},\n\tcomments: {\n\t\teditorConfig: {\n\t\t\textraPlugins: ClassicEditor.builtinPlugins.filter( plugin => {\n\t\t\t\treturn [ 'Bold', 'Italic', 'Underline', 'List', 'Autoformat' ].includes( plugin.pluginName );\n\t\t\t} )\n\t\t}\n\t},\n\tmention: {\n\t\tfeeds: [\n\t\t\t{\n\t\t\t\tmarker: '@',\n\t\t\t\tfeed: [ '@Barney', '@Lily', '@Marry Ann', '@Marshall', '@Robin', '@Ted' ]\n\t\t\t}\n\t\t]\n\t}\n} );\n"],"names":["appData","users","id","name","userId","commentThreads","threadId","comments","commentId","authorId","content","createdAt","Date","attributes","context","type","value","resolvedAt","resolvedBy","lastSavedData","data","threadsData","editor","consoleUpdates","consoleEl","document","querySelector","saveButtonEl","loadButtonEl","addEventListener","plugins","get","getCommentThreads","skipNotAttached","skipEmpty","dataEl","createElement","commentsEl","classList","add","className","textContent","JSON","stringify","undefined","innerHTML","appendChild","setTimeout","remove","updateConsole","disabled","setData","watchdog","EditorWatchdog","ClassicEditor","setCreator","el","config","window","create","then","newEditor","setDestructor","oldEditor","destroy","initialData","constructor","this","requires","init","usersPlugin","commentsRepositoryPlugin","user","addUser","defineMe","commentThread","addCommentThread","MentionPlugin","toolbar","items","licenseKey","sidebar","container","ui","viewportOffset","top","getViewportTopOffsetConfig","editorConfig","extraPlugins","builtinPlugins","filter","plugin","includes","pluginName","mention","feeds","marker","feed"],"sourceRoot":""}