<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Update to version 25.x | CKEditor 5 Documentation</title>
    <meta name="description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:card" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:site" content="@ckeditor">
    <meta name="x-generated-at" content="Wed Jan 15 2025 02:13:09 GMT+0000 (Coordinated Universal Time)">
    <meta property="og:title" content="Update to version 25.x | CKEditor 5 Documentation">
    <meta property="og:description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ckeditor.com/docs/ckeditor5/latest/updating/guides/update-to-25.html">
    <meta property="DC.language" content="en">
    <meta property="DC.publisher" content="CKSource">
    <meta property="DC.creator" content="CKEditor">
    <meta property="DC.title" content="Update to version 25.x | CKEditor 5 Documentation">
    <meta property="DC.format" content="text/html">
    <meta property="DC.type" content="Text">
    <meta property="DC.description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <link rel="canonical" href="https://ckeditor.com/docs/ckeditor5/latest/updating/guides/update-to-25.html">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/96x96.png" sizes="96x96">
    <link rel="apple-touch-icon" type="image/png" href="../../assets/img/favicons/200x200.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
    <link rel="stylesheet" href="../../../../assets/4.4.2/css/styles.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../assets/styles.css" type="text/css">
    <link rel="preconnect" href="https://dev.visualwebsiteoptimizer.com">
    <script id="vwoCode" type="text/javascript">
      window._vwo_code || (function() {
      var account_id='854367',
      version=2.1,
      settings_tolerance=2000,
      hide_element='body',
      hide_element_style = 'opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important',
      f=false,w=window,d=document,v=d.querySelector('#vwoCode'),cK='_vwo_'+account_id+'_settings',cc={};try{var c=JSON.parse(localStorage.getItem('_vwo_'+account_id+'_config'));cc=c&&typeof c==='object'?c:{}}catch(e){}var stT=cc.stT==='session'?w.sessionStorage:w.localStorage;code={use_existing_jquery:function(){return typeof use_existing_jquery!=='undefined'?use_existing_jquery:undefined},library_tolerance:function(){return typeof library_tolerance!=='undefined'?library_tolerance:undefined},settings_tolerance:function(){return cc.sT||settings_tolerance},hide_element_style:function(){return'{'+(cc.hES||hide_element_style)+'}'},hide_element:function(){if(performance.getEntriesByName('first-contentful-paint')[0]){return''}return typeof cc.hE==='string'?cc.hE:hide_element},getVersion:function(){return version},finish:function(e){if(!f){f=true;var t=d.getElementById('_vis_opt_path_hides');if(t)t.parentNode.removeChild(t);if(e)(new Image).src='https://dev.visualwebsiteoptimizer.com/ee.gif?a='+account_id+e}},finished:function(){return f},addScript:function(e){var t=d.createElement('script');t.type='text/javascript';if(e.src){t.src=e.src}else{t.text=e.text}d.getElementsByTagName('head')[0].appendChild(t)},load:function(e,t){var i=this.getSettings(),n=d.createElement('script'),r=this;t=t||{};if(i){n.textContent=i;d.getElementsByTagName('head')[0].appendChild(n);if(!w.VWO||VWO.caE){stT.removeItem(cK);r.load(e)}}else{var o=new XMLHttpRequest;o.open('GET',e,true);o.withCredentials=!t.dSC;o.responseType=t.responseType||'text';o.onload=function(){if(t.onloadCb){return t.onloadCb(o,e)}if(o.status===200){_vwo_code.addScript({text:o.responseText})}else{_vwo_code.finish('&e=loading_failure:'+e)}};o.onerror=function(){if(t.onerrorCb){return t.onerrorCb(e)}_vwo_code.finish('&e=loading_failure:'+e)};o.send()}},getSettings:function(){try{var e=stT.getItem(cK);if(!e){return}e=JSON.parse(e);if(Date.now()>e.e){stT.removeItem(cK);return}return e.s}catch(e){return}},init:function(){if(d.URL.indexOf('__vwo_disable__')>-1)return;var e=this.settings_tolerance();w._vwo_settings_timer=setTimeout(function(){_vwo_code.finish();stT.removeItem(cK)},e);var t;if(this.hide_element()!=='body'){t=d.createElement('style');var i=this.hide_element(),n=i?i+this.hide_element_style():'',r=d.getElementsByTagName('head')[0];t.setAttribute('id','_vis_opt_path_hides');v&&t.setAttribute('nonce',v.nonce);t.setAttribute('type','text/css');if(t.styleSheet)t.styleSheet.cssText=n;else t.appendChild(d.createTextNode(n));r.appendChild(t)}else{t=d.getElementsByTagName('head')[0];var n=d.createElement('div');n.style.cssText='z-index: 2147483647 !important;position: fixed !important;left: 0 !important;top: 0 !important;width: 100% !important;height: 100% !important;background: white !important;';n.setAttribute('id','_vis_opt_path_hides');n.classList.add('_vis_hide_layer');t.parentNode.insertBefore(n,t.nextSibling)}var o='https://dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&vn='+version;if(w.location.search.indexOf('_vwo_xhr')!==-1){this.addScript({src:o})}else{this.load(o+'&x=true')}}};w._vwo_code=code;code.init();})();
    </script>
    <script>if ( ["ckeditor5.github.io"].indexOf( location.hostname ) !== -1 ) {
      	( function ( w, d, e, u, a, b ) {
      		a = d.createElement( e );
      		b = d.getElementsByTagName( e )[ 0 ];
      		a.async = 1;
      		a.src = u;
      		b.parentNode.insertBefore( a, b )
      	} )( window, document, 'script', 'https://www.googletagmanager.com/gtag/js?id=G-H2PK3PSE3F' );
      	window.dataLayer = window.dataLayer || [];
      
      	function gtag() {
      		dataLayer.push( arguments );
      	}
      
      	gtag( 'js', new Date() );
      	gtag( 'config', 'G-H2PK3PSE3F' );
      }
    </script>
    <meta name="permalink-disable-domains" content="ckeditor5.github.io,fake.ckeditor.com,localhost,127.0.0.1">
    <meta name="project-version" content="44.1.0">
    <meta name="project-slug" content="ckeditor5">
  <meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <header class="top" data-project="ckeditor5">
      <div class="header__main">
        <div class="header__main-rwd-button"><a href="#"><span></span><span></span><span></span></a></div>
        <div class="header__main-title"><a class="header__main-title-home" href="../../../../index.html">CKEditor Ecosystem Documentation</a></div>
        <div class="top__search">
          <input class="top__search__box" type="text" id="docsearch_input" placeholder="Search in CKEditor 5">
          <div class="top__search__button"><img src="../../../../assets/4.4.2/img/loupe.svg" alt="Search"></div>
        </div>
      </div>
      <div class="header__sub">
        <ul class="top__menu">
          <li class="top__menu-project-logo"><a href="../../index.html">CKEditor 5</a></li>
          <li><a href="../../getting-started/index.html">Getting started</a></li>
          <li><a href="../../features/index.html">Features</a></li>
          <li><a href="../../examples/index.html">Examples</a></li>
          <li><a href="../../framework/index.html">Framework</a></li>
          <li><a class="top__menu__api" href="../../api/index.html">API</a></li>
          <li><a class="top__menu__item--active" href="../index.html">Updating</a></li>
          <li><a href="../../support/index.html">Support</a></li>
          <li><a class="top__menu-github-link" href="https://github.com/ckeditor/ckeditor5" target="_blank" title="CKEditor 5 on GitHub."><svg viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li>
        </ul>
      </div>
      <div class="header__menu-rwd">
        <ul class="header__menu-rwd__projects">
          <li data-project="ckeditor5"><a href="../../../latest/index.html">CKEditor 5</a>
            <ul class="tree header__menu-rwd__projects-pages">
              <li data-group="getting-started"><a href="../../getting-started/index.html">Getting started</a>
              </li>
              <li data-group="features"><a href="../../features/index.html">Features</a>
              </li>
              <li data-group="examples"><a href="../../examples/index.html">Examples</a>
              </li>
              <li data-group="framework"><a href="../../framework/index.html">Framework</a>
              </li>
              <li data-group="api-reference"><a href="../../api/index.html">API</a>
              </li>
              <li data-group="updating"><a href="../index.html">Updating</a>
                <ul class="header__menu-rwd__projects-subpages">
                          <li><a href="../index.html" title="Overview">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span>
                              </div></a></li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Migrations from npm to CDN</span>
                            </div>
                            <ul class="tree__item-nested-list" data-id="migrations">
                                  <li><a href="../migrations/vanilla-js.html" title="Vanilla JS">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vanilla JS</span>
                                      </div></a></li>
                                  <li><a href="../migrations/testing-suite.html" title="Vanilla JS testing suite">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vanilla JS testing suite</span>
                                      </div></a></li>
                                  <li><a href="../migrations/react.html" title="React">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">React</span>
                                      </div></a></li>
                                  <li><a href="../migrations/vuejs-v3.html" title="Vue.js 3+">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vue.js 3+</span>
                                      </div></a></li>
                                  <li><a href="../migrations/angular.html" title="Angular">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Angular</span>
                                      </div></a></li>
                            </ul>
                          </li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">New installation methods</span>
                            </div>
                            <ul class="tree__item-nested-list" data-id="nim-migration">
                                  <li><a href="../nim-migration/migration-to-new-installation-methods.html" title="Migrating to new installation methods">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating to new installation methods</span>
                                      </div></a></li>
                                  <li><a href="../nim-migration/predefined-builds.html" title="Migrating from predefined builds">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating from predefined builds</span>
                                      </div></a></li>
                                  <li><a href="../nim-migration/online-builder.html" title="Migrating from legacy Online Builder">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating from legacy Online Builder</span>
                                      </div></a></li>
                                  <li><a href="../nim-migration/customized-builds.html" title="Migrating from customized builds">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating from customized builds</span>
                                      </div></a></li>
                                  <li><a href="../nim-migration/dll-builds.html" title="Migrating from DLL builds">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating from DLL builds</span>
                                      </div></a></li>
                                  <li><a href="../nim-migration/custom-plugins.html" title="Migrating custom plugins">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating custom plugins</span>
                                      </div></a></li>
                            </ul>
                          </li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">CKEditor 4 migration</span>
                            </div>
                            <ul class="tree__item-nested-list" data-id="ckeditor4-migration">
                                  <li><a href="../ckeditor4/migration-from-ckeditor-4.html" title="Migration from CKEditor 4">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration from CKEditor 4</span>
                                      </div></a></li>
                                  <li><a href="../ckeditor4/ckeditor4-plugin-compatibility.html" title="Plugin equivalents">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Plugin equivalents</span>
                                      </div></a></li>
                                  <li><a href="../ckeditor4/ckeditor4-configuration-compatibility.html" title="Configuration options compatibility">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Configuration options compatibility</span>
                                      </div></a></li>
                                  <li><a href="../ckeditor4/ckeditor4-troubleshooting.html" title="Troubleshooting">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Troubleshooting</span>
                                      </div></a></li>
                            </ul>
                          </li>
                          <li><a href="../maintaining.html" title="Maintaining your editor">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Maintaining your editor</span>
                              </div></a></li>
                          <li><a href="../release-process.html" title="Release process">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Release process</span>
                              </div></a></li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Update guides</span>
                            </div>
                            <ul class="tree__item-nested-list" data-id="update-guides">
                                  <li><a href="updating-ckeditor-5.html" title="Updating CKEditor 5">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Updating CKEditor 5</span>
                                      </div></a></li>
                                  <li><a href="changelog.html" title="Changelog">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Changelog</span>
                                      </div></a></li>
                                  <li><a href="update-to-44.html" title="Update to v44.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v44.x</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                      </div></a></li>
                                  <li><a href="update-to-43.html" title="Update to v43.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v43.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-42.html" title="Update to v42.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v42.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-41.html" title="Update to v41.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v41.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-40.html" title="Update to v40.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v40.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-39.html" title="Update to v39.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v39.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-38.html" title="Update to v38.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v38.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-37.html" title="Update to v37.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v37.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-36.html" title="Update to v36.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v36.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-35.html" title="Update to v35.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v35.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-34.html" title="Update to v34.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v34.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-33.html" title="Update to v33.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v33.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-32.html" title="Update to v32.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v32.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-31.html" title="Update to v31.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v31.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-30.html" title="Update to v30.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v30.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-29.html" title="Update to v29.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v29.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-28.html" title="Update to v28.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v28.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-27.html" title="Update to v27.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v27.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-26.html" title="Update to v26.x">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v26.x</span>
                                      </div></a></li>
                                  <li><a href="" title="Update to v25.x">
                                      <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Update to v25.x</span>
                                      </div></a></li>
                            </ul>
                          </li>
                          <li><a href="../versioning-policy.html" title="Versioning policy">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Versioning policy</span>
                              </div></a></li>
                </ul>
              </li>
              <li data-group="support"><a href="../../support/index.html">Support</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </header>
    <main class="main">
      <section class="main__content formatted">
        <div class="main__content-inner">
          <div class="github-contrib"><a href="https://github.com/ckeditor/ckeditor5/blob/master/docs/updating/update-to-25.md" title="Contribute to this guide"><img src="../../../../assets/4.4.2/img/edit.svg" alt="Contribute to this guide"></a>
          </div>
          <div class="rwd-breadcrumbs"><a href="../../../../index.html">Home</a><span class="rwd-breadcrumbs__separator">/</span><a href="../../index.html">CKEditor 5</a><span class="rwd-breadcrumbs__separator">/</span><a href="../index.html">Updating</a>
          </div>
          <h1 class="main__content-title">Update to CKEditor 5 v25.x
          </h1><nav class="secondary-navigation"><h3>Table of contents</h3><ol><li><a href="#update-to-ckeditor-5-v2500" title="Update to CKEditor&nbsp;5 v25.0.0">Update to CKEditor&nbsp;5 v25.0.0</a><ol><li><a href="#the-redesign-of-the-annotations-api" title="The redesign of the Annotations API">The redesign of the Annotations API</a></li><li><a href="#conceptual-and-architectural-changes" title="Conceptual and architectural changes">Conceptual and architectural changes</a></li><li><a href="#code-migration-examples" title="Code migration examples">Code migration examples</a><ol><li><a href="#registering-and-activating-annotation-uis" title="Registering and activating annotation UIs">Registering and activating annotation UIs</a></li></ol></li><li><a href="#using-global-collection-of-annotations-and-active-annotations" title="Using  global collection of annotations and active annotations">Using  global collection of annotations and active annotations</a></li><li><a href="#creating-a-custom-annotations-ui" title="Creating a custom Annotations UI">Creating a custom Annotations UI</a></li></ol></li></ol></nav>
<div class="info-box notice"><p>When updating your CKEditor&nbsp;5 installation, ensure <strong>all the packages are the same version</strong> to avoid errors.</p><p>For custom builds, you may try removing the <code>package-lock.json</code> or <code>yarn.lock</code> files (if applicable) and reinstalling all packages before rebuilding the editor. For best results, make sure you use the most recent package versions.</p></div>
<h2 id="update-to-ckeditor-5-v2500"><a class="headerlink" href="#update-to-ckeditor-5-v2500">#</a> Update to CKEditor&nbsp;5 v25.0.0</h2>
<p><em>Released on January 27, 2021.</em></p>
<p>For the entire list of changes introduced in version 25.0.0, see the <a href="https://github.com/ckeditor/ckeditor5/releases/tag/v25.0.0">release notes for CKEditor&nbsp;5 v25.0.0</a>.</p>
<p>This migration guide enumerates the most important changes that require your attention when upgrading to CKEditor&nbsp;5 v25.0.0 due to changes introduced in the <a href="../../features/collaboration/collaboration.html">collaboration features</a> and the redesign of the annotations API.</p>
<h3 id="the-redesign-of-the-annotations-api"><a class="headerlink" href="#the-redesign-of-the-annotations-api">#</a> The redesign of the Annotations API</h3>
<p>The entire annotations API was redesigned to support many annotation UIs at the same time. A good example of this is an idea of displaying <a href="../../features/collaboration/comments/comments.html">comments</a> in the <a href="../../features/collaboration/annotations/annotations-display-mode.html#wide-sidebar">sidebar</a> while showing suggestions from <a href="../../features/collaboration/track-changes/track-changes.html">track changes</a> in <a href="../../features/collaboration/annotations/annotations-display-mode.html#inline-balloons">inline balloons</a> when their corresponding suggestions are active. Due to that, some architectural changes were made and quite a lot of breaking changes were introduced with this release. See the migration guide below to check how to adapt to the changes.</p>
<h3 id="conceptual-and-architectural-changes"><a class="headerlink" href="#conceptual-and-architectural-changes">#</a> Conceptual and architectural changes</h3>
<p>The new annotations API allows for activating (attaching) many annotation UIs at the same time. To allow multiple UIs at the same time, the annotation filtering function must be registered during the annotation UI activation. Though, still, one annotation can be handled only by one annotation UI at the same time.</p>
<p>The new annotations API allows for setting multiple active annotations at the same time (max one per each annotation UI), so at some point more than one annotation can be active for various annotation UIs.</p>
<p>An annotation UI is now activated with its own collection of filtered annotations and became responsible for reacting to more events. This allows for more customization possibilities, however, unfortunately, it comes with more code needed to be written for the custom annotation UI class. After the changes, an annotation UI is responsible for:</p>
<ul>
<li>Displaying the annotation.</li>
<li>Marking the annotation as active when it should be activated and propagating this change via an observable property.</li>
<li>Reacting to editor events (though this is planned to be changed and simplified in the future).</li>
<li>Reacting to focus changes in the annotation collection.</li>
<li>Handling newly added and removed annotations.</li>
<li>Handling the annotation activation and deactivation from external places via the <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_annotationsuis-AnnotationsUI.html#function-setActiveAnnotation"><code>setActiveAnnotation()</code></a> method.</li>
</ul>
<p>The existing <code>Annotations</code> class was split to the new <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_annotations-Annotations.html"><code>Annotations</code></a> class, which is a global collection of annotations, and the new <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_annotationsuis-AnnotationsUIs.html"><code>AnnotationsUIs</code></a> class, which is mainly responsible for registering and activating annotation UIs.</p>
<p>In place where the <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_view_annotationview-AnnotationView.html"><code>AnnotationView</code></a> had been used, the new <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_annotations-Annotations.html"><code>Annotations</code></a>  class instance is used and it exposes mainly the following properties:</p>
<ul>
<li><a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_annotation-Annotation.html#member-target"><code>target</code></a> – The target element to which the annotation should be bound. It can be a <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_utils_dom_rect-Rect.html"><code>Rect</code></a> instance or an HTML Element.</li>
<li><a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_annotation-Annotation.html#member-view"><code>view</code></a> – The <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_view_annotationview-AnnotationView.html"><code>AnnotationView</code></a> instance.</li>
<li><a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_annotation-Annotation.html#member-type"><code>type</code></a> – The type of the annotation.</li>
<li><a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_annotation-Annotation.html#member-isActive"><code>isActive</code></a> – A property that determines if the annotation view and annotation inner views are active or not. It should be changed by the annotation UI when it changes the active annotation.</li>
</ul>
<p>The <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_sidebar-Sidebar.html"><code>Sidebar</code></a> class stopped operating on the global collection of annotations. From now on, the annotation UI that is responsible for displaying the sidebar should provide the sidebar with its collection of annotations and inform about possible actions with the new <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_sidebar-Sidebar.html#function-rearrange"><code>rearrange()</code></a> and <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_sidebar-Sidebar.html#function-refresh"><code>refresh()</code></a> methods.</p>
<p>The <a href="https://ckeditor.com/docs/ckeditor5/latest/api/module_comments_annotations_editorannotations-EditorAnnotations.html"><code>EditorAnnotations</code></a> started firing events instead of manipulating the global collection of annotations. From now on, every annotation UI needs to create its own integration with this class. This may change in the future as it complicates the implementation of the custom UI.</p>
<h3 id="code-migration-examples"><a class="headerlink" href="#code-migration-examples">#</a> Code migration examples</h3>
<h4 id="registering-and-activating-annotation-uis"><a class="headerlink" href="#registering-and-activating-annotation-uis">#</a> Registering and activating annotation UIs</h4>
<p>Before:</p>
<pre class="highlight"><code class="js">const annotations = editor.plugins.get( 'Annotations' );

annotations.register( 'myCustomUI', myCustomUI );
annotations.switchTo( 'myCustomUI' );

// Activate and deactivate the UI.
annotations.attach( 'myCustomUI' );
annotations.detach( 'myCustomUI' );
</code></pre>
<p>After:</p>
<pre class="highlight"><code class="js">const annotationsUIs = editor.plugins.get( 'AnnotationsUIs' );

annotationsUIs.register( 'myCustomUI', myCustomUI );
annotationsUIs.switchTo( 'myCustomUI' );

// Activate and deactivate the UI.
annotationsUIs.activate( 'myCustomUI' );
annotationsUIs.deactivate( 'myCustomUI' );

// Activate two different UIs for comments and suggestions.
annotationsUIs.activate( 'wideSidebar', annotation =&gt; annotation.type === 'comment' );
annotationsUIs.activate( 'inline', annotation =&gt; annotation.type !== 'comment' );
annotationsUIs.deactivateAll();
</code></pre>
<h3 id="using-global-collection-of-annotations-and-active-annotations"><a class="headerlink" href="#using-global-collection-of-annotations-and-active-annotations">#</a> Using  global collection of annotations and active annotations</h3>
<p>Before:</p>
<pre class="highlight"><code class="js">const annotations = editor.plugins.get( 'Annotations' );

// An annotation view or `null`.
const activeAnnotationView = annotations.activeView;

// A collection of annotation views.
const annotationViewCollection = annotations.items;

// Adding an annotation to the collection.
const target = new Rect( { left: 0, top: 0 } );
annotations.add( innerView, target );

// Removing an annotation based on the inner view.
annotations.remove( innerView );
</code></pre>
<p>After:</p>
<pre class="highlight"><code class="js">const annotations = editor.plugins.get( 'Annotations' );

// A set of active annotations.
const activeAnnotations = annotations.activeAnnotations;

// An array of active annotation views.
Array.from( activeAnnotations, annotation =&gt; annotation.view );

// A collection of annotations (`Annotation` class items).
const annotationCollection = annotations.collection;

// Adding an annotation to the collection.
annotations.add( new Annotation( {
    view: new AnnotationView( innerView ),
    target: new Rect( { left: 0, top: 0 } ),
    type: 'comment' // The type is used only for the AnnotationsUIs filtering mechanism.
} ) );

// Removing an annotation based on the inner view.
const annotation = annotations.getByInnerView( innerView );
annotations.remove( annotation );
</code></pre>
<h3 id="creating-a-custom-annotations-ui"><a class="headerlink" href="#creating-a-custom-annotations-ui">#</a> Creating a custom Annotations UI</h3>
<p>Before:</p>
<pre class="highlight"><code class="js">class CustomAnnotationUI {
    attach() {
        const annotations = this.editor.plugins.get( 'Annotations' );

        // The code responsible for displaying annotations
        // based on the global collection of annotations.
    }

    detach() {
        // The code responsible for hiding the UI and detaching
        // listeners from the global annotation collection.
    }
}
</code></pre>
<p>After:</p>
<pre class="highlight"><code class="js">class CustomAnnotationUI extends ContextPlugin {
    constructor() {
        this.set( 'activeAnnotation', null );
    }

    setActiveAnnotation( annotation ) {
        // The code responsible for reacting to annotation changes.
        if ( annotation === this.activeAnnotation ) {
            return;
        }

        if ( this.activeAnnotation ) {
            this.activeAnnotation.isActive = false;
        }

        if ( annotation ) {
            annotation.isActive = true;
        }

        this.activeAnnotation = annotation;
    }

    attach( annotations ) {
        // The code responsible for displaying annotations
        // based on the annotation collection passed to this UI.

        // The code responsible for setting an active and non-active annotation
        // based on the annotation focus changes.
        this.listenTo( annotations, 'focus', ( evt, annotation ) =&gt; {
            this.setActiveAnnotation( annotation );
        } );

        this.listenTo( annotations, 'blur', () =&gt; {
            this.setActiveAnnotation( null );
        } );

        // The code responsible for the integration with editor annotation markers,
        // editor events and the editor selection changes.
        // The requirement of this integration might change in the future.
        // If the plugin was initialized as an editor plugin, the integration
        // should look like the following:
        const editorAnnotations = editor.plugins.get( 'EditorAnnotations' );

        this.listenTo( editorAnnotations, 'refresh', () =&gt; refreshActiveAnnotation.bind( this ) );
        this.listenTo( editorAnnotations, 'blur' ( evt, { isAnnotationTracked } ) =&gt; {
            if ( this.activeAnnotation &amp;&amp; isAnnotationTracked( this.activeAnnotation ) ) {
                this.setActiveAnnotation( null );
            }
        } );
        this.listenTo( editorAnnotations, 'uiUpdate' () =&gt; annotations._refreshPositioning();

        function refreshActiveAnnotation() {
            const selectedAnnotations = editorAnnotations.getOrderedSelectedAnnotations( {
                annotations: this._annotations,
                activeAnnotation: this.activeAnnotation
            } );

            this.setActiveAnnotation( selectedAnnotations[ 0 ] || null );
        }
    }

    detach() {
        // The code responsible for hiding the UI and detaching
        // listeners from the annotation collection, editor annotations and others.
    }
}
</code></pre>

          <div class="info-box notice notice__feedback">
            <p>
              Every day, we work hard to keep our documentation complete. Have you spotted outdated information? Is something missing?
              Please report it via our <a href="https://github.com/ckeditor/ckeditor5/issues/new?labels=squad%3Accx%2Ctype%3Adocs&amp;template=7-docs-issue-community.yml&amp;title=Docs+issue+report+from+%22updating%2Fguides%2Fupdate-to-25.html%22&amp;project-version=44.1.0" id="report-widget-issue-tracker">issue tracker</a>.
            </p>
            <p>
              With the release of version 42.0.0, we have rewritten much of our documentation to reflect the new import paths and features.
              We appreciate your feedback to help us ensure its accuracy and completeness.
            </p>
          </div>
          <script>
            ( () => {
                const issueTracker = document.getElementById( 'report-widget-issue-tracker' );
                const hrefUrl = new URL( issueTracker.href );
                hrefUrl.searchParams.set( 'user-agent', navigator.userAgent )
                hrefUrl.searchParams.set( 'origin-url', location.href )
                issueTracker.href = hrefUrl.toString();
            } )();
          </script>
        </div>
      </section>
      <div class="side-navigation">
        <div class="side-navigation__wrapper">
          <nav class="side-navigation__inner">
            <ul class="tree guide-tree" id="guidetree">
                          <li><a href="../index.html" title="Overview">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span>
                              </div></a></li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Migrations from npm to CDN</span>
                            </div>
                            <ul class="tree__item-nested-list" data-id="migrations">
                                    <li><a href="../migrations/vanilla-js.html" title="Vanilla JS">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vanilla JS</span>
                                        </div></a></li>
                                    <li><a href="../migrations/testing-suite.html" title="Vanilla JS testing suite">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vanilla JS testing suite</span>
                                        </div></a></li>
                                    <li><a href="../migrations/react.html" title="React">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">React</span>
                                        </div></a></li>
                                    <li><a href="../migrations/vuejs-v3.html" title="Vue.js 3+">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Vue.js 3+</span>
                                        </div></a></li>
                                    <li><a href="../migrations/angular.html" title="Angular">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Angular</span>
                                        </div></a></li>
                            </ul>
                          </li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">New installation methods</span>
                            </div>
                            <ul class="tree__item-nested-list" data-id="nim-migration">
                                    <li><a href="../nim-migration/migration-to-new-installation-methods.html" title="Migrating to new installation methods">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating to new installation methods</span>
                                        </div></a></li>
                                    <li><a href="../nim-migration/predefined-builds.html" title="Migrating from predefined builds">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating from predefined builds</span>
                                        </div></a></li>
                                    <li><a href="../nim-migration/online-builder.html" title="Migrating from legacy Online Builder">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating from legacy Online Builder</span>
                                        </div></a></li>
                                    <li><a href="../nim-migration/customized-builds.html" title="Migrating from customized builds">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating from customized builds</span>
                                        </div></a></li>
                                    <li><a href="../nim-migration/dll-builds.html" title="Migrating from DLL builds">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating from DLL builds</span>
                                        </div></a></li>
                                    <li><a href="../nim-migration/custom-plugins.html" title="Migrating custom plugins">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migrating custom plugins</span>
                                        </div></a></li>
                            </ul>
                          </li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">CKEditor 4 migration</span>
                            </div>
                            <ul class="tree__item-nested-list" data-id="ckeditor4-migration">
                                    <li><a href="../ckeditor4/migration-from-ckeditor-4.html" title="Migration from CKEditor 4">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration from CKEditor 4</span>
                                        </div></a></li>
                                    <li><a href="../ckeditor4/ckeditor4-plugin-compatibility.html" title="Plugin equivalents">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Plugin equivalents</span>
                                        </div></a></li>
                                    <li><a href="../ckeditor4/ckeditor4-configuration-compatibility.html" title="Configuration options compatibility">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Configuration options compatibility</span>
                                        </div></a></li>
                                    <li><a href="../ckeditor4/ckeditor4-troubleshooting.html" title="Troubleshooting">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Troubleshooting</span>
                                        </div></a></li>
                            </ul>
                          </li>
                          <li><a href="../maintaining.html" title="Maintaining your editor">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Maintaining your editor</span>
                              </div></a></li>
                          <li><a href="../release-process.html" title="Release process">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Release process</span>
                              </div></a></li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Update guides</span>
                            </div>
                            <ul class="tree__item-nested-list" data-id="update-guides">
                                    <li><a href="updating-ckeditor-5.html" title="Updating CKEditor 5">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Updating CKEditor 5</span>
                                        </div></a></li>
                                    <li><a href="changelog.html" title="Changelog">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Changelog</span>
                                        </div></a></li>
                                    <li><a href="update-to-44.html" title="Update to v44.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v44.x</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                        </div></a></li>
                                    <li><a href="update-to-43.html" title="Update to v43.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v43.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-42.html" title="Update to v42.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v42.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-41.html" title="Update to v41.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v41.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-40.html" title="Update to v40.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v40.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-39.html" title="Update to v39.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v39.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-38.html" title="Update to v38.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v38.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-37.html" title="Update to v37.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v37.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-36.html" title="Update to v36.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v36.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-35.html" title="Update to v35.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v35.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-34.html" title="Update to v34.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v34.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-33.html" title="Update to v33.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v33.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-32.html" title="Update to v32.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v32.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-31.html" title="Update to v31.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v31.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-30.html" title="Update to v30.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v30.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-29.html" title="Update to v29.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v29.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-28.html" title="Update to v28.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v28.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-27.html" title="Update to v27.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v27.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-26.html" title="Update to v26.x">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v26.x</span>
                                        </div></a></li>
                                    <li><a href="" title="Update to v25.x">
                                        <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Update to v25.x</span>
                                        </div></a></li>
                            </ul>
                          </li>
                          <li><a href="../versioning-policy.html" title="Versioning policy">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Versioning policy</span>
                              </div></a></li>
            </ul>
          </nav>
        </div>
      </div>
    </main>
    <footer class="footer footer--bordered">
      <p>&copy; 2003-2025 <a href="http://cksource.com">CKSource</a>. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
docsearch({
apiKey:'fc463c26455365ad403d5ec51796cd73',indexName:'ckeditor_nightly',inputSelector:'#docsearch_input',algoliaOptions:{hitsPerPage:250,attributesToRetrieve:'*'},
transformData: function( hits ) {var sortingFn = function( a, b ) {a.custom_ranking = a.custom_ranking || 0;b.custom_ranking = b.custom_ranking || 0;if ( a.custom_ranking === b.custom_ranking ) return a.index - b.index;if ( a.custom_ranking > b.custom_ranking ) return -1;if ( a.custom_ranking < b.custom_ranking ) return 1;};var result = [];var tags = [ 'getting-started', 'features', 'examples', 'framework', 'api', 'updating', 'support' ];var hitsGrouped = { api: [] };hitsGrouped[ 'updating' ] = hits.filter( function( h ) {return h.tags.includes( 'ckeditor5' ) && h.tags.includes( 'updating' );} ).slice( 0, 7 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn );tags.forEach( function( tag ) {if ( tag !== 'updating' ) {hitsGrouped[ tag ] = hits.filter( function( h ) {return h.tags.includes( 'ckeditor5' ) && h.tags.includes( tag );} ).slice( 0, 10 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn ).slice( 0, 3 );}} );var apiSearchHits = [];if ( window.apiSearch ) apiSearchHits = window.apiSearch();hitsGrouped.api = hitsGrouped.api.filter( function( h ) {var isDuplicated = false;for ( var i = 0; i < apiSearchHits.length; i++ ) {if ( h.url.includes( apiSearchHits[ i ].urlShort ) ) {isDuplicated = true;break;}}return !isDuplicated;} );hitsGrouped.api = ( apiSearchHits || [] ).concat( hitsGrouped.api );result = result.concat( hitsGrouped[ 'updating' ] );tags.forEach( function( tag ) {if ( tag !== 'updating' ) result = result.concat( hitsGrouped[ tag ].slice( 0, 4 ) );} );return result;}
});
</script>
    <script src="../../../../assets/4.4.2/scripts/app.js"></script>
    <script src="../../assets/buildwarningbanner.js" async></script>
  </body>
</html>